function FK(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function is(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function UK(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var BK={exports:{}},sk={},zK={exports:{}},Kn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw=Symbol.for("react.element"),$me=Symbol.for("react.portal"),Dme=Symbol.for("react.fragment"),Lme=Symbol.for("react.strict_mode"),Ome=Symbol.for("react.profiler"),Fme=Symbol.for("react.provider"),Ume=Symbol.for("react.context"),Bme=Symbol.for("react.forward_ref"),zme=Symbol.for("react.suspense"),Wme=Symbol.for("react.memo"),Vme=Symbol.for("react.lazy"),bW=Symbol.iterator;function Gme(t){return t===null||typeof t!="object"?null:(t=bW&&t[bW]||t["@@iterator"],typeof t=="function"?t:null)}var WK={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VK=Object.assign,GK={};function Yv(t,e,n){this.props=t,this.context=e,this.refs=GK,this.updater=n||WK}Yv.prototype.isReactComponent={};Yv.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yv.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function HK(){}HK.prototype=Yv.prototype;function v4(t,e,n){this.props=t,this.context=e,this.refs=GK,this.updater=n||WK}var y4=v4.prototype=new HK;y4.constructor=v4;VK(y4,Yv.prototype);y4.isPureReactComponent=!0;var wW=Array.isArray,jK=Object.prototype.hasOwnProperty,x4={current:null},XK={key:!0,ref:!0,__self:!0,__source:!0};function qK(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)jK.call(e,r)&&!XK.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Tw,type:t,key:s,ref:o,props:i,_owner:x4.current}}function Hme(t,e){return{$$typeof:Tw,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function b4(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tw}function jme(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var SW=/\/+/g;function J3(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jme(""+t.key):e.toString(36)}function kT(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Tw:case $me:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+J3(o,0):r,wW(i)?(n="",t!=null&&(n=t.replace(SW,"$&/")+"/"),kT(i,e,n,"",function(c){return c})):i!=null&&(b4(i)&&(i=Hme(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(SW,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",wW(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+J3(s,a);o+=kT(s,e,n,l,i)}else if(l=Gme(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+J3(s,a++),o+=kT(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function R_(t,e,n){if(t==null)return t;var r=[],i=0;return kT(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Xme(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qo={current:null},AT={transition:null},qme={ReactCurrentDispatcher:qo,ReactCurrentBatchConfig:AT,ReactCurrentOwner:x4};Kn.Children={map:R_,forEach:function(t,e,n){R_(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return R_(t,function(){e++}),e},toArray:function(t){return R_(t,function(e){return e})||[]},only:function(t){if(!b4(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Kn.Component=Yv;Kn.Fragment=Dme;Kn.Profiler=Ome;Kn.PureComponent=v4;Kn.StrictMode=Lme;Kn.Suspense=zme;Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qme;Kn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=VK({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=x4.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)jK.call(e,l)&&!XK.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Tw,type:t.type,key:i,ref:s,props:r,_owner:o}};Kn.createContext=function(t){return t={$$typeof:Ume,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Fme,_context:t},t.Consumer=t};Kn.createElement=qK;Kn.createFactory=function(t){var e=qK.bind(null,t);return e.type=t,e};Kn.createRef=function(){return{current:null}};Kn.forwardRef=function(t){return{$$typeof:Bme,render:t}};Kn.isValidElement=b4;Kn.lazy=function(t){return{$$typeof:Vme,_payload:{_status:-1,_result:t},_init:Xme}};Kn.memo=function(t,e){return{$$typeof:Wme,type:t,compare:e===void 0?null:e}};Kn.startTransition=function(t){var e=AT.transition;AT.transition={};try{t()}finally{AT.transition=e}};Kn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Kn.useCallback=function(t,e){return qo.current.useCallback(t,e)};Kn.useContext=function(t){return qo.current.useContext(t)};Kn.useDebugValue=function(){};Kn.useDeferredValue=function(t){return qo.current.useDeferredValue(t)};Kn.useEffect=function(t,e){return qo.current.useEffect(t,e)};Kn.useId=function(){return qo.current.useId()};Kn.useImperativeHandle=function(t,e,n){return qo.current.useImperativeHandle(t,e,n)};Kn.useInsertionEffect=function(t,e){return qo.current.useInsertionEffect(t,e)};Kn.useLayoutEffect=function(t,e){return qo.current.useLayoutEffect(t,e)};Kn.useMemo=function(t,e){return qo.current.useMemo(t,e)};Kn.useReducer=function(t,e,n){return qo.current.useReducer(t,e,n)};Kn.useRef=function(t){return qo.current.useRef(t)};Kn.useState=function(t){return qo.current.useState(t)};Kn.useSyncExternalStore=function(t,e,n){return qo.current.useSyncExternalStore(t,e,n)};Kn.useTransition=function(){return qo.current.useTransition()};Kn.version="18.2.0";zK.exports=Kn;var N=zK.exports;const wc=is(N),uE=FK({__proto__:null,default:wc},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yme=N,Kme=Symbol.for("react.element"),Zme=Symbol.for("react.fragment"),Jme=Object.prototype.hasOwnProperty,Qme=Yme.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ege={key:!0,ref:!0,__self:!0,__source:!0};function YK(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Jme.call(e,r)&&!ege.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Kme,type:t,key:s,ref:o,props:i,_owner:Qme.current}}sk.Fragment=Zme;sk.jsx=YK;sk.jsxs=YK;BK.exports=sk;var L=BK.exports,L$={},KK={exports:{}},il={},ZK={exports:{}},JK={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,F){var W=D.length;D.push(F);e:for(;0<W;){var V=W-1>>>1,j=D[V];if(0<i(j,F))D[V]=F,D[W]=j,W=V;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var F=D[0],W=D.pop();if(W!==F){D[0]=W;e:for(var V=0,j=D.length,J=j>>>1;V<J;){var Q=2*(V+1)-1,te=D[Q],re=Q+1,se=D[re];if(0>i(te,W))re<j&&0>i(se,te)?(D[V]=se,D[re]=W,V=re):(D[V]=te,D[Q]=W,V=Q);else if(re<j&&0>i(se,W))D[V]=se,D[re]=W,V=re;else break e}}return F}function i(D,F){var W=D.sortIndex-F.sortIndex;return W!==0?W:D.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=D)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function S(D){if(v=!1,x(D),!p)if(n(l)!==null)p=!0,z(_);else{var F=n(c);F!==null&&X(S,F.startTime-D)}}function _(D,F){p=!1,v&&(v=!1,g(A),A=-1),h=!0;var W=f;try{for(x(F),d=n(l);d!==null&&(!(d.expirationTime>F)||D&&!R());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var j=V(d.expirationTime<=F);F=t.unstable_now(),typeof j=="function"?d.callback=j:d===n(l)&&r(l),x(F)}else r(l);d=n(l)}if(d!==null)var J=!0;else{var Q=n(c);Q!==null&&X(S,Q.startTime-F),J=!1}return J}finally{d=null,f=W,h=!1}}var C=!1,T=null,A=-1,k=5,M=-1;function R(){return!(t.unstable_now()-M<k)}function P(){if(T!==null){var D=t.unstable_now();M=D;var F=!0;try{F=T(!0,D)}finally{F?O():(C=!1,T=null)}}else C=!1}var O;if(typeof y=="function")O=function(){y(P)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,U=$.port2;$.port1.onmessage=P,O=function(){U.postMessage(null)}}else O=function(){m(P,0)};function z(D){T=D,C||(C=!0,O())}function X(D,F){A=m(function(){D(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,z(_))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var W=f;f=F;try{return D()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=f;f=D;try{return F()}finally{f=W}},t.unstable_scheduleCallback=function(D,F,W){var V=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?V+W:V):W=V,D){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=W+j,D={id:u++,callback:F,priorityLevel:D,startTime:W,expirationTime:j,sortIndex:-1},W>V?(D.sortIndex=W,e(c,D),n(l)===null&&D===n(c)&&(v?(g(A),A=-1):v=!0,X(S,W-V))):(D.sortIndex=j,e(l,D),p||h||(p=!0,z(_))),D},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(D){var F=f;return function(){var W=f;f=F;try{return D.apply(this,arguments)}finally{f=W}}}})(JK);ZK.exports=JK;var tge=ZK.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QK=N,tl=tge;function St(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eZ=new Set,V1={};function Wm(t,e){uv(t,e),uv(t+"Capture",e)}function uv(t,e){for(V1[t]=e,t=0;t<e.length;t++)eZ.add(e[t])}var Ld=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),O$=Object.prototype.hasOwnProperty,nge=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_W={},CW={};function rge(t){return O$.call(CW,t)?!0:O$.call(_W,t)?!1:nge.test(t)?CW[t]=!0:(_W[t]=!0,!1)}function ige(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sge(t,e,n,r){if(e===null||typeof e>"u"||ige(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yo(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var js={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){js[t]=new Yo(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];js[e]=new Yo(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){js[t]=new Yo(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){js[t]=new Yo(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){js[t]=new Yo(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){js[t]=new Yo(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){js[t]=new Yo(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){js[t]=new Yo(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){js[t]=new Yo(t,5,!1,t.toLowerCase(),null,!1,!1)});var w4=/[\-:]([a-z])/g;function S4(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(w4,S4);js[e]=new Yo(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(w4,S4);js[e]=new Yo(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(w4,S4);js[e]=new Yo(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){js[t]=new Yo(t,1,!1,t.toLowerCase(),null,!1,!1)});js.xlinkHref=new Yo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){js[t]=new Yo(t,1,!1,t.toLowerCase(),null,!0,!0)});function _4(t,e,n,r){var i=js.hasOwnProperty(e)?js[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sge(e,n,i,r)&&(n=null),r||i===null?rge(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qd=QK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N_=Symbol.for("react.element"),b0=Symbol.for("react.portal"),w0=Symbol.for("react.fragment"),C4=Symbol.for("react.strict_mode"),F$=Symbol.for("react.profiler"),tZ=Symbol.for("react.provider"),nZ=Symbol.for("react.context"),T4=Symbol.for("react.forward_ref"),U$=Symbol.for("react.suspense"),B$=Symbol.for("react.suspense_list"),E4=Symbol.for("react.memo"),Sf=Symbol.for("react.lazy"),rZ=Symbol.for("react.offscreen"),TW=Symbol.iterator;function dx(t){return t===null||typeof t!="object"?null:(t=TW&&t[TW]||t["@@iterator"],typeof t=="function"?t:null)}var vi=Object.assign,Q3;function Zx(t){if(Q3===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Q3=e&&e[1]||""}return`
`+Q3+t}var eN=!1;function tN(t,e){if(!t||eN)return"";eN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{eN=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zx(t):""}function oge(t){switch(t.tag){case 5:return Zx(t.type);case 16:return Zx("Lazy");case 13:return Zx("Suspense");case 19:return Zx("SuspenseList");case 0:case 2:case 15:return t=tN(t.type,!1),t;case 11:return t=tN(t.type.render,!1),t;case 1:return t=tN(t.type,!0),t;default:return""}}function z$(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case w0:return"Fragment";case b0:return"Portal";case F$:return"Profiler";case C4:return"StrictMode";case U$:return"Suspense";case B$:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nZ:return(t.displayName||"Context")+".Consumer";case tZ:return(t._context.displayName||"Context")+".Provider";case T4:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case E4:return e=t.displayName||null,e!==null?e:z$(t.type)||"Memo";case Sf:e=t._payload,t=t._init;try{return z$(t(e))}catch{}}return null}function age(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z$(e);case 8:return e===C4?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function th(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iZ(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lge(t){var e=iZ(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function P_(t){t._valueTracker||(t._valueTracker=lge(t))}function sZ(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=iZ(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function W$(t,e){var n=e.checked;return vi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function EW(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=th(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oZ(t,e){e=e.checked,e!=null&&_4(t,"checked",e,!1)}function V$(t,e){oZ(t,e);var n=th(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?G$(t,e.type,n):e.hasOwnProperty("defaultValue")&&G$(t,e.type,th(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function MW(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function G$(t,e,n){(e!=="number"||dE(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jx=Array.isArray;function W0(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+th(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function H$(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(St(91));return vi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kW(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(St(92));if(Jx(n)){if(1<n.length)throw Error(St(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:th(n)}}function aZ(t,e){var n=th(e.value),r=th(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function AW(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lZ(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function j$(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lZ(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $_,cZ=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($_=$_||document.createElement("div"),$_.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$_.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function G1(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var u1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cge=["Webkit","ms","Moz","O"];Object.keys(u1).forEach(function(t){cge.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),u1[e]=u1[t]})});function uZ(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||u1.hasOwnProperty(t)&&u1[t]?(""+e).trim():e+"px"}function dZ(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=uZ(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var uge=vi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function X$(t,e){if(e){if(uge[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(St(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(St(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(St(61))}if(e.style!=null&&typeof e.style!="object")throw Error(St(62))}}function q$(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y$=null;function M4(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var K$=null,V0=null,G0=null;function IW(t){if(t=kw(t)){if(typeof K$!="function")throw Error(St(280));var e=t.stateNode;e&&(e=uk(e),K$(t.stateNode,t.type,e))}}function fZ(t){V0?G0?G0.push(t):G0=[t]:V0=t}function hZ(){if(V0){var t=V0,e=G0;if(G0=V0=null,IW(t),e)for(t=0;t<e.length;t++)IW(e[t])}}function pZ(t,e){return t(e)}function mZ(){}var nN=!1;function gZ(t,e,n){if(nN)return t(e,n);nN=!0;try{return pZ(t,e,n)}finally{nN=!1,(V0!==null||G0!==null)&&(mZ(),hZ())}}function H1(t,e){var n=t.stateNode;if(n===null)return null;var r=uk(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(St(231,e,typeof n));return n}var Z$=!1;if(Ld)try{var fx={};Object.defineProperty(fx,"passive",{get:function(){Z$=!0}}),window.addEventListener("test",fx,fx),window.removeEventListener("test",fx,fx)}catch{Z$=!1}function dge(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var d1=!1,fE=null,hE=!1,J$=null,fge={onError:function(t){d1=!0,fE=t}};function hge(t,e,n,r,i,s,o,a,l){d1=!1,fE=null,dge.apply(fge,arguments)}function pge(t,e,n,r,i,s,o,a,l){if(hge.apply(this,arguments),d1){if(d1){var c=fE;d1=!1,fE=null}else throw Error(St(198));hE||(hE=!0,J$=c)}}function Vm(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vZ(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function RW(t){if(Vm(t)!==t)throw Error(St(188))}function mge(t){var e=t.alternate;if(!e){if(e=Vm(t),e===null)throw Error(St(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return RW(i),t;if(s===r)return RW(i),e;s=s.sibling}throw Error(St(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(St(189))}}if(n.alternate!==r)throw Error(St(190))}if(n.tag!==3)throw Error(St(188));return n.stateNode.current===n?t:e}function yZ(t){return t=mge(t),t!==null?xZ(t):null}function xZ(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xZ(t);if(e!==null)return e;t=t.sibling}return null}var bZ=tl.unstable_scheduleCallback,NW=tl.unstable_cancelCallback,gge=tl.unstable_shouldYield,vge=tl.unstable_requestPaint,Ui=tl.unstable_now,yge=tl.unstable_getCurrentPriorityLevel,k4=tl.unstable_ImmediatePriority,wZ=tl.unstable_UserBlockingPriority,pE=tl.unstable_NormalPriority,xge=tl.unstable_LowPriority,SZ=tl.unstable_IdlePriority,ok=null,yu=null;function bge(t){if(yu&&typeof yu.onCommitFiberRoot=="function")try{yu.onCommitFiberRoot(ok,t,void 0,(t.current.flags&128)===128)}catch{}}var Ec=Math.clz32?Math.clz32:_ge,wge=Math.log,Sge=Math.LN2;function _ge(t){return t>>>=0,t===0?32:31-(wge(t)/Sge|0)|0}var D_=64,L_=4194304;function Qx(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mE(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Qx(a):(s&=o,s!==0&&(r=Qx(s)))}else o=n&~i,o!==0?r=Qx(o):s!==0&&(r=Qx(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ec(e),i=1<<n,r|=t[n],e&=~i;return r}function Cge(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tge(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ec(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Cge(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Q$(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _Z(){var t=D_;return D_<<=1,!(D_&4194240)&&(D_=64),t}function rN(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ew(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ec(e),t[e]=n}function Ege(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ec(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function A4(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ec(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Mr=0;function CZ(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var TZ,I4,EZ,MZ,kZ,eD=!1,O_=[],Ff=null,Uf=null,Bf=null,j1=new Map,X1=new Map,Tf=[],Mge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PW(t,e){switch(t){case"focusin":case"focusout":Ff=null;break;case"dragenter":case"dragleave":Uf=null;break;case"mouseover":case"mouseout":Bf=null;break;case"pointerover":case"pointerout":j1.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":X1.delete(e.pointerId)}}function hx(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=kw(e),e!==null&&I4(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kge(t,e,n,r,i){switch(e){case"focusin":return Ff=hx(Ff,t,e,n,r,i),!0;case"dragenter":return Uf=hx(Uf,t,e,n,r,i),!0;case"mouseover":return Bf=hx(Bf,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return j1.set(s,hx(j1.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,X1.set(s,hx(X1.get(s)||null,t,e,n,r,i)),!0}return!1}function AZ(t){var e=Ip(t.target);if(e!==null){var n=Vm(e);if(n!==null){if(e=n.tag,e===13){if(e=vZ(n),e!==null){t.blockedOn=e,kZ(t.priority,function(){EZ(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function IT(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tD(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Y$=r,n.target.dispatchEvent(r),Y$=null}else return e=kw(n),e!==null&&I4(e),t.blockedOn=n,!1;e.shift()}return!0}function $W(t,e,n){IT(t)&&n.delete(e)}function Age(){eD=!1,Ff!==null&&IT(Ff)&&(Ff=null),Uf!==null&&IT(Uf)&&(Uf=null),Bf!==null&&IT(Bf)&&(Bf=null),j1.forEach($W),X1.forEach($W)}function px(t,e){t.blockedOn===e&&(t.blockedOn=null,eD||(eD=!0,tl.unstable_scheduleCallback(tl.unstable_NormalPriority,Age)))}function q1(t){function e(i){return px(i,t)}if(0<O_.length){px(O_[0],t);for(var n=1;n<O_.length;n++){var r=O_[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ff!==null&&px(Ff,t),Uf!==null&&px(Uf,t),Bf!==null&&px(Bf,t),j1.forEach(e),X1.forEach(e),n=0;n<Tf.length;n++)r=Tf[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tf.length&&(n=Tf[0],n.blockedOn===null);)AZ(n),n.blockedOn===null&&Tf.shift()}var H0=qd.ReactCurrentBatchConfig,gE=!0;function Ige(t,e,n,r){var i=Mr,s=H0.transition;H0.transition=null;try{Mr=1,R4(t,e,n,r)}finally{Mr=i,H0.transition=s}}function Rge(t,e,n,r){var i=Mr,s=H0.transition;H0.transition=null;try{Mr=4,R4(t,e,n,r)}finally{Mr=i,H0.transition=s}}function R4(t,e,n,r){if(gE){var i=tD(t,e,n,r);if(i===null)hN(t,e,r,vE,n),PW(t,r);else if(kge(i,t,e,n,r))r.stopPropagation();else if(PW(t,r),e&4&&-1<Mge.indexOf(t)){for(;i!==null;){var s=kw(i);if(s!==null&&TZ(s),s=tD(t,e,n,r),s===null&&hN(t,e,r,vE,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else hN(t,e,r,null,n)}}var vE=null;function tD(t,e,n,r){if(vE=null,t=M4(r),t=Ip(t),t!==null)if(e=Vm(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vZ(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vE=t,null}function IZ(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yge()){case k4:return 1;case wZ:return 4;case pE:case xge:return 16;case SZ:return 536870912;default:return 16}default:return 16}}var Af=null,N4=null,RT=null;function RZ(){if(RT)return RT;var t,e=N4,n=e.length,r,i="value"in Af?Af.value:Af.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return RT=i.slice(t,1<r?1-r:void 0)}function NT(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function F_(){return!0}function DW(){return!1}function sl(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?F_:DW,this.isPropagationStopped=DW,this}return vi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=F_)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=F_)},persist:function(){},isPersistent:F_}),e}var Kv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},P4=sl(Kv),Mw=vi({},Kv,{view:0,detail:0}),Nge=sl(Mw),iN,sN,mx,ak=vi({},Mw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$4,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mx&&(mx&&t.type==="mousemove"?(iN=t.screenX-mx.screenX,sN=t.screenY-mx.screenY):sN=iN=0,mx=t),iN)},movementY:function(t){return"movementY"in t?t.movementY:sN}}),LW=sl(ak),Pge=vi({},ak,{dataTransfer:0}),$ge=sl(Pge),Dge=vi({},Mw,{relatedTarget:0}),oN=sl(Dge),Lge=vi({},Kv,{animationName:0,elapsedTime:0,pseudoElement:0}),Oge=sl(Lge),Fge=vi({},Kv,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Uge=sl(Fge),Bge=vi({},Kv,{data:0}),OW=sl(Bge),zge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gge(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Vge[t])?!!e[t]:!1}function $4(){return Gge}var Hge=vi({},Mw,{key:function(t){if(t.key){var e=zge[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=NT(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wge[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$4,charCode:function(t){return t.type==="keypress"?NT(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?NT(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jge=sl(Hge),Xge=vi({},ak,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),FW=sl(Xge),qge=vi({},Mw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$4}),Yge=sl(qge),Kge=vi({},Kv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zge=sl(Kge),Jge=vi({},ak,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qge=sl(Jge),e0e=[9,13,27,32],D4=Ld&&"CompositionEvent"in window,f1=null;Ld&&"documentMode"in document&&(f1=document.documentMode);var t0e=Ld&&"TextEvent"in window&&!f1,NZ=Ld&&(!D4||f1&&8<f1&&11>=f1),UW=" ",BW=!1;function PZ(t,e){switch(t){case"keyup":return e0e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $Z(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var S0=!1;function n0e(t,e){switch(t){case"compositionend":return $Z(e);case"keypress":return e.which!==32?null:(BW=!0,UW);case"textInput":return t=e.data,t===UW&&BW?null:t;default:return null}}function r0e(t,e){if(S0)return t==="compositionend"||!D4&&PZ(t,e)?(t=RZ(),RT=N4=Af=null,S0=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return NZ&&e.locale!=="ko"?null:e.data;default:return null}}var i0e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zW(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!i0e[t.type]:e==="textarea"}function DZ(t,e,n,r){fZ(r),e=yE(e,"onChange"),0<e.length&&(n=new P4("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var h1=null,Y1=null;function s0e(t){jZ(t,0)}function lk(t){var e=T0(t);if(sZ(e))return t}function o0e(t,e){if(t==="change")return e}var LZ=!1;if(Ld){var aN;if(Ld){var lN="oninput"in document;if(!lN){var WW=document.createElement("div");WW.setAttribute("oninput","return;"),lN=typeof WW.oninput=="function"}aN=lN}else aN=!1;LZ=aN&&(!document.documentMode||9<document.documentMode)}function VW(){h1&&(h1.detachEvent("onpropertychange",OZ),Y1=h1=null)}function OZ(t){if(t.propertyName==="value"&&lk(Y1)){var e=[];DZ(e,Y1,t,M4(t)),gZ(s0e,e)}}function a0e(t,e,n){t==="focusin"?(VW(),h1=e,Y1=n,h1.attachEvent("onpropertychange",OZ)):t==="focusout"&&VW()}function l0e(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lk(Y1)}function c0e(t,e){if(t==="click")return lk(e)}function u0e(t,e){if(t==="input"||t==="change")return lk(e)}function d0e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pc=typeof Object.is=="function"?Object.is:d0e;function K1(t,e){if(Pc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!O$.call(e,i)||!Pc(t[i],e[i]))return!1}return!0}function GW(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function HW(t,e){var n=GW(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=GW(n)}}function FZ(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FZ(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function UZ(){for(var t=window,e=dE();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dE(t.document)}return e}function L4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function f0e(t){var e=UZ(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&FZ(n.ownerDocument.documentElement,n)){if(r!==null&&L4(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=HW(n,s);var o=HW(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var h0e=Ld&&"documentMode"in document&&11>=document.documentMode,_0=null,nD=null,p1=null,rD=!1;function jW(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rD||_0==null||_0!==dE(r)||(r=_0,"selectionStart"in r&&L4(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),p1&&K1(p1,r)||(p1=r,r=yE(nD,"onSelect"),0<r.length&&(e=new P4("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_0)))}function U_(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var C0={animationend:U_("Animation","AnimationEnd"),animationiteration:U_("Animation","AnimationIteration"),animationstart:U_("Animation","AnimationStart"),transitionend:U_("Transition","TransitionEnd")},cN={},BZ={};Ld&&(BZ=document.createElement("div").style,"AnimationEvent"in window||(delete C0.animationend.animation,delete C0.animationiteration.animation,delete C0.animationstart.animation),"TransitionEvent"in window||delete C0.transitionend.transition);function ck(t){if(cN[t])return cN[t];if(!C0[t])return t;var e=C0[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BZ)return cN[t]=e[n];return t}var zZ=ck("animationend"),WZ=ck("animationiteration"),VZ=ck("animationstart"),GZ=ck("transitionend"),HZ=new Map,XW="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yh(t,e){HZ.set(t,e),Wm(e,[t])}for(var uN=0;uN<XW.length;uN++){var dN=XW[uN],p0e=dN.toLowerCase(),m0e=dN[0].toUpperCase()+dN.slice(1);yh(p0e,"on"+m0e)}yh(zZ,"onAnimationEnd");yh(WZ,"onAnimationIteration");yh(VZ,"onAnimationStart");yh("dblclick","onDoubleClick");yh("focusin","onFocus");yh("focusout","onBlur");yh(GZ,"onTransitionEnd");uv("onMouseEnter",["mouseout","mouseover"]);uv("onMouseLeave",["mouseout","mouseover"]);uv("onPointerEnter",["pointerout","pointerover"]);uv("onPointerLeave",["pointerout","pointerover"]);Wm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wm("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var e1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g0e=new Set("cancel close invalid load scroll toggle".split(" ").concat(e1));function qW(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pge(r,e,void 0,t),t.currentTarget=null}function jZ(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;qW(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;qW(i,a,c),s=l}}}if(hE)throw t=J$,hE=!1,J$=null,t}function Kr(t,e){var n=e[lD];n===void 0&&(n=e[lD]=new Set);var r=t+"__bubble";n.has(r)||(XZ(e,t,2,!1),n.add(r))}function fN(t,e,n){var r=0;e&&(r|=4),XZ(n,t,r,e)}var B_="_reactListening"+Math.random().toString(36).slice(2);function Z1(t){if(!t[B_]){t[B_]=!0,eZ.forEach(function(n){n!=="selectionchange"&&(g0e.has(n)||fN(n,!1,t),fN(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[B_]||(e[B_]=!0,fN("selectionchange",!1,e))}}function XZ(t,e,n,r){switch(IZ(e)){case 1:var i=Ige;break;case 4:i=Rge;break;default:i=R4}n=i.bind(null,e,n,t),i=void 0,!Z$||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function hN(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ip(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}gZ(function(){var c=s,u=M4(n),d=[];e:{var f=HZ.get(t);if(f!==void 0){var h=P4,p=t;switch(t){case"keypress":if(NT(n)===0)break e;case"keydown":case"keyup":h=jge;break;case"focusin":p="focus",h=oN;break;case"focusout":p="blur",h=oN;break;case"beforeblur":case"afterblur":h=oN;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=LW;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=$ge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Yge;break;case zZ:case WZ:case VZ:h=Oge;break;case GZ:h=Zge;break;case"scroll":h=Nge;break;case"wheel":h=Qge;break;case"copy":case"cut":case"paste":h=Uge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=FW}var v=(e&4)!==0,m=!v&&t==="scroll",g=v?f!==null?f+"Capture":null:f;v=[];for(var y=c,x;y!==null;){x=y;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,g!==null&&(S=H1(y,g),S!=null&&v.push(J1(y,S,x)))),m)break;y=y.return}0<v.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Y$&&(p=n.relatedTarget||n.fromElement)&&(Ip(p)||p[Od]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?Ip(p):null,p!==null&&(m=Vm(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(v=LW,S="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=FW,S="onPointerLeave",g="onPointerEnter",y="pointer"),m=h==null?f:T0(h),x=p==null?f:T0(p),f=new v(S,y+"leave",h,n,u),f.target=m,f.relatedTarget=x,S=null,Ip(u)===c&&(v=new v(g,y+"enter",p,n,u),v.target=x,v.relatedTarget=m,S=v),m=S,h&&p)t:{for(v=h,g=p,y=0,x=v;x;x=Ig(x))y++;for(x=0,S=g;S;S=Ig(S))x++;for(;0<y-x;)v=Ig(v),y--;for(;0<x-y;)g=Ig(g),x--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=Ig(v),g=Ig(g)}v=null}else v=null;h!==null&&YW(d,f,h,v,!1),p!==null&&m!==null&&YW(d,m,p,v,!0)}}e:{if(f=c?T0(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=o0e;else if(zW(f))if(LZ)_=u0e;else{_=l0e;var C=a0e}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=c0e);if(_&&(_=_(t,c))){DZ(d,_,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&G$(f,"number",f.value)}switch(C=c?T0(c):window,t){case"focusin":(zW(C)||C.contentEditable==="true")&&(_0=C,nD=c,p1=null);break;case"focusout":p1=nD=_0=null;break;case"mousedown":rD=!0;break;case"contextmenu":case"mouseup":case"dragend":rD=!1,jW(d,n,u);break;case"selectionchange":if(h0e)break;case"keydown":case"keyup":jW(d,n,u)}var T;if(D4)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else S0?PZ(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(NZ&&n.locale!=="ko"&&(S0||A!=="onCompositionStart"?A==="onCompositionEnd"&&S0&&(T=RZ()):(Af=u,N4="value"in Af?Af.value:Af.textContent,S0=!0)),C=yE(c,A),0<C.length&&(A=new OW(A,t,null,n,u),d.push({event:A,listeners:C}),T?A.data=T:(T=$Z(n),T!==null&&(A.data=T)))),(T=t0e?n0e(t,n):r0e(t,n))&&(c=yE(c,"onBeforeInput"),0<c.length&&(u=new OW("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=T))}jZ(d,e)})}function J1(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yE(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=H1(t,n),s!=null&&r.unshift(J1(t,s,i)),s=H1(t,e),s!=null&&r.push(J1(t,s,i))),t=t.return}return r}function Ig(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function YW(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=H1(n,s),l!=null&&o.unshift(J1(n,l,a))):i||(l=H1(n,s),l!=null&&o.push(J1(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var v0e=/\r\n?/g,y0e=/\u0000|\uFFFD/g;function KW(t){return(typeof t=="string"?t:""+t).replace(v0e,`
`).replace(y0e,"")}function z_(t,e,n){if(e=KW(e),KW(t)!==e&&n)throw Error(St(425))}function xE(){}var iD=null,sD=null;function oD(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var aD=typeof setTimeout=="function"?setTimeout:void 0,x0e=typeof clearTimeout=="function"?clearTimeout:void 0,ZW=typeof Promise=="function"?Promise:void 0,b0e=typeof queueMicrotask=="function"?queueMicrotask:typeof ZW<"u"?function(t){return ZW.resolve(null).then(t).catch(w0e)}:aD;function w0e(t){setTimeout(function(){throw t})}function pN(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),q1(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);q1(e)}function zf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function JW(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zv=Math.random().toString(36).slice(2),du="__reactFiber$"+Zv,Q1="__reactProps$"+Zv,Od="__reactContainer$"+Zv,lD="__reactEvents$"+Zv,S0e="__reactListeners$"+Zv,_0e="__reactHandles$"+Zv;function Ip(t){var e=t[du];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Od]||n[du]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=JW(t);t!==null;){if(n=t[du])return n;t=JW(t)}return e}t=n,n=t.parentNode}return null}function kw(t){return t=t[du]||t[Od],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function T0(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(St(33))}function uk(t){return t[Q1]||null}var cD=[],E0=-1;function xh(t){return{current:t}}function ei(t){0>E0||(t.current=cD[E0],cD[E0]=null,E0--)}function jr(t,e){E0++,cD[E0]=t.current,t.current=e}var nh={},_o=xh(nh),ga=xh(!1),cm=nh;function dv(t,e){var n=t.type.contextTypes;if(!n)return nh;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function va(t){return t=t.childContextTypes,t!=null}function bE(){ei(ga),ei(_o)}function QW(t,e,n){if(_o.current!==nh)throw Error(St(168));jr(_o,e),jr(ga,n)}function qZ(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(St(108,age(t)||"Unknown",i));return vi({},n,r)}function wE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nh,cm=_o.current,jr(_o,t),jr(ga,ga.current),!0}function eV(t,e,n){var r=t.stateNode;if(!r)throw Error(St(169));n?(t=qZ(t,e,cm),r.__reactInternalMemoizedMergedChildContext=t,ei(ga),ei(_o),jr(_o,t)):ei(ga),jr(ga,n)}var gd=null,dk=!1,mN=!1;function YZ(t){gd===null?gd=[t]:gd.push(t)}function C0e(t){dk=!0,YZ(t)}function bh(){if(!mN&&gd!==null){mN=!0;var t=0,e=Mr;try{var n=gd;for(Mr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gd=null,dk=!1}catch(i){throw gd!==null&&(gd=gd.slice(t+1)),bZ(k4,bh),i}finally{Mr=e,mN=!1}}return null}var M0=[],k0=0,SE=null,_E=0,Sl=[],_l=0,um=null,_d=1,Cd="";function mp(t,e){M0[k0++]=_E,M0[k0++]=SE,SE=t,_E=e}function KZ(t,e,n){Sl[_l++]=_d,Sl[_l++]=Cd,Sl[_l++]=um,um=t;var r=_d;t=Cd;var i=32-Ec(r)-1;r&=~(1<<i),n+=1;var s=32-Ec(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_d=1<<32-Ec(e)+i|n<<i|r,Cd=s+t}else _d=1<<s|n<<i|r,Cd=t}function O4(t){t.return!==null&&(mp(t,1),KZ(t,1,0))}function F4(t){for(;t===SE;)SE=M0[--k0],M0[k0]=null,_E=M0[--k0],M0[k0]=null;for(;t===um;)um=Sl[--_l],Sl[_l]=null,Cd=Sl[--_l],Sl[_l]=null,_d=Sl[--_l],Sl[_l]=null}var Za=null,Xa=null,oi=!1,pc=null;function ZZ(t,e){var n=Al(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tV(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Za=t,Xa=zf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Za=t,Xa=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=um!==null?{id:_d,overflow:Cd}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Al(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Za=t,Xa=null,!0):!1;default:return!1}}function uD(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dD(t){if(oi){var e=Xa;if(e){var n=e;if(!tV(t,e)){if(uD(t))throw Error(St(418));e=zf(n.nextSibling);var r=Za;e&&tV(t,e)?ZZ(r,n):(t.flags=t.flags&-4097|2,oi=!1,Za=t)}}else{if(uD(t))throw Error(St(418));t.flags=t.flags&-4097|2,oi=!1,Za=t}}}function nV(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Za=t}function W_(t){if(t!==Za)return!1;if(!oi)return nV(t),oi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!oD(t.type,t.memoizedProps)),e&&(e=Xa)){if(uD(t))throw JZ(),Error(St(418));for(;e;)ZZ(t,e),e=zf(e.nextSibling)}if(nV(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(St(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xa=zf(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xa=null}}else Xa=Za?zf(t.stateNode.nextSibling):null;return!0}function JZ(){for(var t=Xa;t;)t=zf(t.nextSibling)}function fv(){Xa=Za=null,oi=!1}function U4(t){pc===null?pc=[t]:pc.push(t)}var T0e=qd.ReactCurrentBatchConfig;function dc(t,e){if(t&&t.defaultProps){e=vi({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var CE=xh(null),TE=null,A0=null,B4=null;function z4(){B4=A0=TE=null}function W4(t){var e=CE.current;ei(CE),t._currentValue=e}function fD(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function j0(t,e){TE=t,B4=A0=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fa=!0),t.firstContext=null)}function Bl(t){var e=t._currentValue;if(B4!==t)if(t={context:t,memoizedValue:e,next:null},A0===null){if(TE===null)throw Error(St(308));A0=t,TE.dependencies={lanes:0,firstContext:t}}else A0=A0.next=t;return e}var Rp=null;function V4(t){Rp===null?Rp=[t]:Rp.push(t)}function QZ(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,V4(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fd(t,r)}function Fd(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _f=!1;function G4(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eJ(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pd(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wf(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,dr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fd(t,n)}return i=r.interleaved,i===null?(e.next=e,V4(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fd(t,n)}function PT(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,A4(t,n)}}function rV(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function EE(t,e,n,r){var i=t.updateQueue;_f=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,v=a;switch(f=e,h=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=vi({},d,f);break e;case 2:_f=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);fm|=o,t.lanes=o,t.memoizedState=d}}function iV(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(St(191,i));i.call(r)}}}var tJ=new QK.Component().refs;function hD(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:vi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fk={isMounted:function(t){return(t=t._reactInternals)?Vm(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Vo(),i=Gf(t),s=Pd(r,i);s.payload=e,n!=null&&(s.callback=n),e=Wf(t,s,i),e!==null&&(Mc(e,t,i,r),PT(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Vo(),i=Gf(t),s=Pd(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Wf(t,s,i),e!==null&&(Mc(e,t,i,r),PT(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vo(),r=Gf(t),i=Pd(n,r);i.tag=2,e!=null&&(i.callback=e),e=Wf(t,i,r),e!==null&&(Mc(e,t,r,n),PT(e,t,r))}};function sV(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!K1(n,r)||!K1(i,s):!0}function nJ(t,e,n){var r=!1,i=nh,s=e.contextType;return typeof s=="object"&&s!==null?s=Bl(s):(i=va(e)?cm:_o.current,r=e.contextTypes,s=(r=r!=null)?dv(t,i):nh),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fk,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function oV(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fk.enqueueReplaceState(e,e.state,null)}function pD(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=tJ,G4(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Bl(s):(s=va(e)?cm:_o.current,i.context=dv(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hD(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fk.enqueueReplaceState(i,i.state,null),EE(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function gx(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(St(309));var r=n.stateNode}if(!r)throw Error(St(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===tJ&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(St(284));if(!n._owner)throw Error(St(290,t))}return t}function V_(t,e){throw t=Object.prototype.toString.call(e),Error(St(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function aV(t){var e=t._init;return e(t._payload)}function rJ(t){function e(g,y){if(t){var x=g.deletions;x===null?(g.deletions=[y],g.flags|=16):x.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=Hf(g,y),g.index=0,g.sibling=null,g}function s(g,y,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<y?(g.flags|=2,y):x):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,y,x,S){return y===null||y.tag!==6?(y=SN(x,g.mode,S),y.return=g,y):(y=i(y,x),y.return=g,y)}function l(g,y,x,S){var _=x.type;return _===w0?u(g,y,x.props.children,S,x.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Sf&&aV(_)===y.type)?(S=i(y,x.props),S.ref=gx(g,y,x),S.return=g,S):(S=UT(x.type,x.key,x.props,null,g.mode,S),S.ref=gx(g,y,x),S.return=g,S)}function c(g,y,x,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=_N(x,g.mode,S),y.return=g,y):(y=i(y,x.children||[]),y.return=g,y)}function u(g,y,x,S,_){return y===null||y.tag!==7?(y=Xp(x,g.mode,S,_),y.return=g,y):(y=i(y,x),y.return=g,y)}function d(g,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=SN(""+y,g.mode,x),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case N_:return x=UT(y.type,y.key,y.props,null,g.mode,x),x.ref=gx(g,null,y),x.return=g,x;case b0:return y=_N(y,g.mode,x),y.return=g,y;case Sf:var S=y._init;return d(g,S(y._payload),x)}if(Jx(y)||dx(y))return y=Xp(y,g.mode,x,null),y.return=g,y;V_(g,y)}return null}function f(g,y,x,S){var _=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(g,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case N_:return x.key===_?l(g,y,x,S):null;case b0:return x.key===_?c(g,y,x,S):null;case Sf:return _=x._init,f(g,y,_(x._payload),S)}if(Jx(x)||dx(x))return _!==null?null:u(g,y,x,S,null);V_(g,x)}return null}function h(g,y,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(x)||null,a(y,g,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case N_:return g=g.get(S.key===null?x:S.key)||null,l(y,g,S,_);case b0:return g=g.get(S.key===null?x:S.key)||null,c(y,g,S,_);case Sf:var C=S._init;return h(g,y,x,C(S._payload),_)}if(Jx(S)||dx(S))return g=g.get(x)||null,u(y,g,S,_,null);V_(y,S)}return null}function p(g,y,x,S){for(var _=null,C=null,T=y,A=y=0,k=null;T!==null&&A<x.length;A++){T.index>A?(k=T,T=null):k=T.sibling;var M=f(g,T,x[A],S);if(M===null){T===null&&(T=k);break}t&&T&&M.alternate===null&&e(g,T),y=s(M,y,A),C===null?_=M:C.sibling=M,C=M,T=k}if(A===x.length)return n(g,T),oi&&mp(g,A),_;if(T===null){for(;A<x.length;A++)T=d(g,x[A],S),T!==null&&(y=s(T,y,A),C===null?_=T:C.sibling=T,C=T);return oi&&mp(g,A),_}for(T=r(g,T);A<x.length;A++)k=h(T,g,A,x[A],S),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?A:k.key),y=s(k,y,A),C===null?_=k:C.sibling=k,C=k);return t&&T.forEach(function(R){return e(g,R)}),oi&&mp(g,A),_}function v(g,y,x,S){var _=dx(x);if(typeof _!="function")throw Error(St(150));if(x=_.call(x),x==null)throw Error(St(151));for(var C=_=null,T=y,A=y=0,k=null,M=x.next();T!==null&&!M.done;A++,M=x.next()){T.index>A?(k=T,T=null):k=T.sibling;var R=f(g,T,M.value,S);if(R===null){T===null&&(T=k);break}t&&T&&R.alternate===null&&e(g,T),y=s(R,y,A),C===null?_=R:C.sibling=R,C=R,T=k}if(M.done)return n(g,T),oi&&mp(g,A),_;if(T===null){for(;!M.done;A++,M=x.next())M=d(g,M.value,S),M!==null&&(y=s(M,y,A),C===null?_=M:C.sibling=M,C=M);return oi&&mp(g,A),_}for(T=r(g,T);!M.done;A++,M=x.next())M=h(T,g,A,M.value,S),M!==null&&(t&&M.alternate!==null&&T.delete(M.key===null?A:M.key),y=s(M,y,A),C===null?_=M:C.sibling=M,C=M);return t&&T.forEach(function(P){return e(g,P)}),oi&&mp(g,A),_}function m(g,y,x,S){if(typeof x=="object"&&x!==null&&x.type===w0&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case N_:e:{for(var _=x.key,C=y;C!==null;){if(C.key===_){if(_=x.type,_===w0){if(C.tag===7){n(g,C.sibling),y=i(C,x.props.children),y.return=g,g=y;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Sf&&aV(_)===C.type){n(g,C.sibling),y=i(C,x.props),y.ref=gx(g,C,x),y.return=g,g=y;break e}n(g,C);break}else e(g,C);C=C.sibling}x.type===w0?(y=Xp(x.props.children,g.mode,S,x.key),y.return=g,g=y):(S=UT(x.type,x.key,x.props,null,g.mode,S),S.ref=gx(g,y,x),S.return=g,g=S)}return o(g);case b0:e:{for(C=x.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(g,y.sibling),y=i(y,x.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=_N(x,g.mode,S),y.return=g,g=y}return o(g);case Sf:return C=x._init,m(g,y,C(x._payload),S)}if(Jx(x))return p(g,y,x,S);if(dx(x))return v(g,y,x,S);V_(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,x),y.return=g,g=y):(n(g,y),y=SN(x,g.mode,S),y.return=g,g=y),o(g)):n(g,y)}return m}var hv=rJ(!0),iJ=rJ(!1),Aw={},xu=xh(Aw),eb=xh(Aw),tb=xh(Aw);function Np(t){if(t===Aw)throw Error(St(174));return t}function H4(t,e){switch(jr(tb,e),jr(eb,t),jr(xu,Aw),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:j$(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=j$(e,t)}ei(xu),jr(xu,e)}function pv(){ei(xu),ei(eb),ei(tb)}function sJ(t){Np(tb.current);var e=Np(xu.current),n=j$(e,t.type);e!==n&&(jr(eb,t),jr(xu,n))}function j4(t){eb.current===t&&(ei(xu),ei(eb))}var pi=xh(0);function ME(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gN=[];function X4(){for(var t=0;t<gN.length;t++)gN[t]._workInProgressVersionPrimary=null;gN.length=0}var $T=qd.ReactCurrentDispatcher,vN=qd.ReactCurrentBatchConfig,dm=0,gi=null,ls=null,Ts=null,kE=!1,m1=!1,nb=0,E0e=0;function ro(){throw Error(St(321))}function q4(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pc(t[n],e[n]))return!1;return!0}function Y4(t,e,n,r,i,s){if(dm=s,gi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$T.current=t===null||t.memoizedState===null?I0e:R0e,t=n(r,i),m1){s=0;do{if(m1=!1,nb=0,25<=s)throw Error(St(301));s+=1,Ts=ls=null,e.updateQueue=null,$T.current=N0e,t=n(r,i)}while(m1)}if($T.current=AE,e=ls!==null&&ls.next!==null,dm=0,Ts=ls=gi=null,kE=!1,e)throw Error(St(300));return t}function K4(){var t=nb!==0;return nb=0,t}function tu(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ts===null?gi.memoizedState=Ts=t:Ts=Ts.next=t,Ts}function zl(){if(ls===null){var t=gi.alternate;t=t!==null?t.memoizedState:null}else t=ls.next;var e=Ts===null?gi.memoizedState:Ts.next;if(e!==null)Ts=e,ls=t;else{if(t===null)throw Error(St(310));ls=t,t={memoizedState:ls.memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},Ts===null?gi.memoizedState=Ts=t:Ts=Ts.next=t}return Ts}function rb(t,e){return typeof e=="function"?e(t):e}function yN(t){var e=zl(),n=e.queue;if(n===null)throw Error(St(311));n.lastRenderedReducer=t;var r=ls,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((dm&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,gi.lanes|=u,fm|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Pc(r,e.memoizedState)||(fa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,gi.lanes|=s,fm|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xN(t){var e=zl(),n=e.queue;if(n===null)throw Error(St(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Pc(s,e.memoizedState)||(fa=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function oJ(){}function aJ(t,e){var n=gi,r=zl(),i=e(),s=!Pc(r.memoizedState,i);if(s&&(r.memoizedState=i,fa=!0),r=r.queue,Z4(uJ.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ts!==null&&Ts.memoizedState.tag&1){if(n.flags|=2048,ib(9,cJ.bind(null,n,r,i,e),void 0,null),ks===null)throw Error(St(349));dm&30||lJ(n,e,i)}return i}function lJ(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gi.updateQueue,e===null?(e={lastEffect:null,stores:null},gi.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cJ(t,e,n,r){e.value=n,e.getSnapshot=r,dJ(e)&&fJ(t)}function uJ(t,e,n){return n(function(){dJ(e)&&fJ(t)})}function dJ(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pc(t,n)}catch{return!0}}function fJ(t){var e=Fd(t,1);e!==null&&Mc(e,t,1,-1)}function lV(t){var e=tu();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rb,lastRenderedState:t},e.queue=t,t=t.dispatch=A0e.bind(null,gi,t),[e.memoizedState,t]}function ib(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gi.updateQueue,e===null?(e={lastEffect:null,stores:null},gi.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hJ(){return zl().memoizedState}function DT(t,e,n,r){var i=tu();gi.flags|=t,i.memoizedState=ib(1|e,n,void 0,r===void 0?null:r)}function hk(t,e,n,r){var i=zl();r=r===void 0?null:r;var s=void 0;if(ls!==null){var o=ls.memoizedState;if(s=o.destroy,r!==null&&q4(r,o.deps)){i.memoizedState=ib(e,n,s,r);return}}gi.flags|=t,i.memoizedState=ib(1|e,n,s,r)}function cV(t,e){return DT(8390656,8,t,e)}function Z4(t,e){return hk(2048,8,t,e)}function pJ(t,e){return hk(4,2,t,e)}function mJ(t,e){return hk(4,4,t,e)}function gJ(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vJ(t,e,n){return n=n!=null?n.concat([t]):null,hk(4,4,gJ.bind(null,e,t),n)}function J4(){}function yJ(t,e){var n=zl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&q4(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function xJ(t,e){var n=zl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&q4(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bJ(t,e,n){return dm&21?(Pc(n,e)||(n=_Z(),gi.lanes|=n,fm|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fa=!0),t.memoizedState=n)}function M0e(t,e){var n=Mr;Mr=n!==0&&4>n?n:4,t(!0);var r=vN.transition;vN.transition={};try{t(!1),e()}finally{Mr=n,vN.transition=r}}function wJ(){return zl().memoizedState}function k0e(t,e,n){var r=Gf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},SJ(t))_J(e,n);else if(n=QZ(t,e,n,r),n!==null){var i=Vo();Mc(n,t,r,i),CJ(n,e,r)}}function A0e(t,e,n){var r=Gf(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(SJ(t))_J(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Pc(a,o)){var l=e.interleaved;l===null?(i.next=i,V4(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=QZ(t,e,i,r),n!==null&&(i=Vo(),Mc(n,t,r,i),CJ(n,e,r))}}function SJ(t){var e=t.alternate;return t===gi||e!==null&&e===gi}function _J(t,e){m1=kE=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function CJ(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,A4(t,n)}}var AE={readContext:Bl,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useInsertionEffect:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useSyncExternalStore:ro,useId:ro,unstable_isNewReconciler:!1},I0e={readContext:Bl,useCallback:function(t,e){return tu().memoizedState=[t,e===void 0?null:e],t},useContext:Bl,useEffect:cV,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,DT(4194308,4,gJ.bind(null,e,t),n)},useLayoutEffect:function(t,e){return DT(4194308,4,t,e)},useInsertionEffect:function(t,e){return DT(4,2,t,e)},useMemo:function(t,e){var n=tu();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tu();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=k0e.bind(null,gi,t),[r.memoizedState,t]},useRef:function(t){var e=tu();return t={current:t},e.memoizedState=t},useState:lV,useDebugValue:J4,useDeferredValue:function(t){return tu().memoizedState=t},useTransition:function(){var t=lV(!1),e=t[0];return t=M0e.bind(null,t[1]),tu().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gi,i=tu();if(oi){if(n===void 0)throw Error(St(407));n=n()}else{if(n=e(),ks===null)throw Error(St(349));dm&30||lJ(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,cV(uJ.bind(null,r,s,t),[t]),r.flags|=2048,ib(9,cJ.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=tu(),e=ks.identifierPrefix;if(oi){var n=Cd,r=_d;n=(r&~(1<<32-Ec(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=nb++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=E0e++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},R0e={readContext:Bl,useCallback:yJ,useContext:Bl,useEffect:Z4,useImperativeHandle:vJ,useInsertionEffect:pJ,useLayoutEffect:mJ,useMemo:xJ,useReducer:yN,useRef:hJ,useState:function(){return yN(rb)},useDebugValue:J4,useDeferredValue:function(t){var e=zl();return bJ(e,ls.memoizedState,t)},useTransition:function(){var t=yN(rb)[0],e=zl().memoizedState;return[t,e]},useMutableSource:oJ,useSyncExternalStore:aJ,useId:wJ,unstable_isNewReconciler:!1},N0e={readContext:Bl,useCallback:yJ,useContext:Bl,useEffect:Z4,useImperativeHandle:vJ,useInsertionEffect:pJ,useLayoutEffect:mJ,useMemo:xJ,useReducer:xN,useRef:hJ,useState:function(){return xN(rb)},useDebugValue:J4,useDeferredValue:function(t){var e=zl();return ls===null?e.memoizedState=t:bJ(e,ls.memoizedState,t)},useTransition:function(){var t=xN(rb)[0],e=zl().memoizedState;return[t,e]},useMutableSource:oJ,useSyncExternalStore:aJ,useId:wJ,unstable_isNewReconciler:!1};function mv(t,e){try{var n="",r=e;do n+=oge(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function bN(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mD(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var P0e=typeof WeakMap=="function"?WeakMap:Map;function TJ(t,e,n){n=Pd(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){RE||(RE=!0,TD=r),mD(t,e)},n}function EJ(t,e,n){n=Pd(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mD(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){mD(t,e),typeof r!="function"&&(Vf===null?Vf=new Set([this]):Vf.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uV(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new P0e;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=X0e.bind(null,t,e,n),e.then(t,t))}function dV(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fV(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pd(-1,1),e.tag=2,Wf(n,e,1))),n.lanes|=1),t)}var $0e=qd.ReactCurrentOwner,fa=!1;function Lo(t,e,n,r){e.child=t===null?iJ(e,null,n,r):hv(e,t.child,n,r)}function hV(t,e,n,r,i){n=n.render;var s=e.ref;return j0(e,i),r=Y4(t,e,n,r,s,i),n=K4(),t!==null&&!fa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ud(t,e,i)):(oi&&n&&O4(e),e.flags|=1,Lo(t,e,r,i),e.child)}function pV(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!oF(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,MJ(t,e,s,r,i)):(t=UT(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:K1,n(o,r)&&t.ref===e.ref)return Ud(t,e,i)}return e.flags|=1,t=Hf(s,r),t.ref=e.ref,t.return=e,e.child=t}function MJ(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(K1(s,r)&&t.ref===e.ref)if(fa=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(fa=!0);else return e.lanes=t.lanes,Ud(t,e,i)}return gD(t,e,n,r,i)}function kJ(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(R0,Ua),Ua|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,jr(R0,Ua),Ua|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,jr(R0,Ua),Ua|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,jr(R0,Ua),Ua|=r;return Lo(t,e,i,n),e.child}function AJ(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gD(t,e,n,r,i){var s=va(n)?cm:_o.current;return s=dv(e,s),j0(e,i),n=Y4(t,e,n,r,s,i),r=K4(),t!==null&&!fa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ud(t,e,i)):(oi&&r&&O4(e),e.flags|=1,Lo(t,e,n,i),e.child)}function mV(t,e,n,r,i){if(va(n)){var s=!0;wE(e)}else s=!1;if(j0(e,i),e.stateNode===null)LT(t,e),nJ(e,n,r),pD(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Bl(c):(c=va(n)?cm:_o.current,c=dv(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&oV(e,o,r,c),_f=!1;var f=e.memoizedState;o.state=f,EE(e,r,o,i),l=e.memoizedState,a!==r||f!==l||ga.current||_f?(typeof u=="function"&&(hD(e,n,u,r),l=e.memoizedState),(a=_f||sV(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,eJ(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:dc(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Bl(l):(l=va(n)?cm:_o.current,l=dv(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&oV(e,o,r,l),_f=!1,f=e.memoizedState,o.state=f,EE(e,r,o,i);var p=e.memoizedState;a!==d||f!==p||ga.current||_f?(typeof h=="function"&&(hD(e,n,h,r),p=e.memoizedState),(c=_f||sV(e,n,c,r,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return vD(t,e,n,r,s,i)}function vD(t,e,n,r,i,s){AJ(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&eV(e,n,!1),Ud(t,e,s);r=e.stateNode,$0e.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=hv(e,t.child,null,s),e.child=hv(e,null,a,s)):Lo(t,e,a,s),e.memoizedState=r.state,i&&eV(e,n,!0),e.child}function IJ(t){var e=t.stateNode;e.pendingContext?QW(t,e.pendingContext,e.pendingContext!==e.context):e.context&&QW(t,e.context,!1),H4(t,e.containerInfo)}function gV(t,e,n,r,i){return fv(),U4(i),e.flags|=256,Lo(t,e,n,r),e.child}var yD={dehydrated:null,treeContext:null,retryLane:0};function xD(t){return{baseLanes:t,cachePool:null,transitions:null}}function RJ(t,e,n){var r=e.pendingProps,i=pi.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),jr(pi,i&1),t===null)return dD(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=gk(o,r,0,null),t=Xp(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xD(n),e.memoizedState=yD,t):Q4(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return D0e(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hf(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Hf(a,s):(s=Xp(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?xD(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=yD,r}return s=t.child,t=s.sibling,r=Hf(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Q4(t,e){return e=gk({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function G_(t,e,n,r){return r!==null&&U4(r),hv(e,t.child,null,n),t=Q4(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function D0e(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=bN(Error(St(422))),G_(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=gk({mode:"visible",children:r.children},i,0,null),s=Xp(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&hv(e,t.child,null,o),e.child.memoizedState=xD(o),e.memoizedState=yD,s);if(!(e.mode&1))return G_(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(St(419)),r=bN(s,r,void 0),G_(t,e,o,r)}if(a=(o&t.childLanes)!==0,fa||a){if(r=ks,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fd(t,i),Mc(r,t,i,-1))}return sF(),r=bN(Error(St(421))),G_(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=q0e.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Xa=zf(i.nextSibling),Za=e,oi=!0,pc=null,t!==null&&(Sl[_l++]=_d,Sl[_l++]=Cd,Sl[_l++]=um,_d=t.id,Cd=t.overflow,um=e),e=Q4(e,r.children),e.flags|=4096,e)}function vV(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fD(t.return,e,n)}function wN(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function NJ(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Lo(t,e,r.children,n),r=pi.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vV(t,n,e);else if(t.tag===19)vV(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(jr(pi,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ME(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),wN(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ME(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}wN(e,!0,n,null,s);break;case"together":wN(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function LT(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ud(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fm|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(St(153));if(e.child!==null){for(t=e.child,n=Hf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function L0e(t,e,n){switch(e.tag){case 3:IJ(e),fv();break;case 5:sJ(e);break;case 1:va(e.type)&&wE(e);break;case 4:H4(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;jr(CE,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(jr(pi,pi.current&1),e.flags|=128,null):n&e.child.childLanes?RJ(t,e,n):(jr(pi,pi.current&1),t=Ud(t,e,n),t!==null?t.sibling:null);jr(pi,pi.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return NJ(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),jr(pi,pi.current),r)break;return null;case 22:case 23:return e.lanes=0,kJ(t,e,n)}return Ud(t,e,n)}var PJ,bD,$J,DJ;PJ=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bD=function(){};$J=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Np(xu.current);var s=null;switch(n){case"input":i=W$(t,i),r=W$(t,r),s=[];break;case"select":i=vi({},i,{value:void 0}),r=vi({},r,{value:void 0}),s=[];break;case"textarea":i=H$(t,i),r=H$(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xE)}X$(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(V1.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(V1.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Kr("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};DJ=function(t,e,n,r){n!==r&&(e.flags|=4)};function vx(t,e){if(!oi)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function io(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function O0e(t,e,n){var r=e.pendingProps;switch(F4(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return io(e),null;case 1:return va(e.type)&&bE(),io(e),null;case 3:return r=e.stateNode,pv(),ei(ga),ei(_o),X4(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(W_(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pc!==null&&(kD(pc),pc=null))),bD(t,e),io(e),null;case 5:j4(e);var i=Np(tb.current);if(n=e.type,t!==null&&e.stateNode!=null)$J(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(St(166));return io(e),null}if(t=Np(xu.current),W_(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[du]=e,r[Q1]=s,t=(e.mode&1)!==0,n){case"dialog":Kr("cancel",r),Kr("close",r);break;case"iframe":case"object":case"embed":Kr("load",r);break;case"video":case"audio":for(i=0;i<e1.length;i++)Kr(e1[i],r);break;case"source":Kr("error",r);break;case"img":case"image":case"link":Kr("error",r),Kr("load",r);break;case"details":Kr("toggle",r);break;case"input":EW(r,s),Kr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Kr("invalid",r);break;case"textarea":kW(r,s),Kr("invalid",r)}X$(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&z_(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&z_(r.textContent,a,t),i=["children",""+a]):V1.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Kr("scroll",r)}switch(n){case"input":P_(r),MW(r,s,!0);break;case"textarea":P_(r),AW(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=xE)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lZ(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[du]=e,t[Q1]=r,PJ(t,e,!1,!1),e.stateNode=t;e:{switch(o=q$(n,r),n){case"dialog":Kr("cancel",t),Kr("close",t),i=r;break;case"iframe":case"object":case"embed":Kr("load",t),i=r;break;case"video":case"audio":for(i=0;i<e1.length;i++)Kr(e1[i],t);i=r;break;case"source":Kr("error",t),i=r;break;case"img":case"image":case"link":Kr("error",t),Kr("load",t),i=r;break;case"details":Kr("toggle",t),i=r;break;case"input":EW(t,r),i=W$(t,r),Kr("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=vi({},r,{value:void 0}),Kr("invalid",t);break;case"textarea":kW(t,r),i=H$(t,r),Kr("invalid",t);break;default:i=r}X$(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?dZ(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cZ(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&G1(t,l):typeof l=="number"&&G1(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(V1.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Kr("scroll",t):l!=null&&_4(t,s,l,o))}switch(n){case"input":P_(t),MW(t,r,!1);break;case"textarea":P_(t),AW(t);break;case"option":r.value!=null&&t.setAttribute("value",""+th(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?W0(t,!!r.multiple,s,!1):r.defaultValue!=null&&W0(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=xE)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return io(e),null;case 6:if(t&&e.stateNode!=null)DJ(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(St(166));if(n=Np(tb.current),Np(xu.current),W_(e)){if(r=e.stateNode,n=e.memoizedProps,r[du]=e,(s=r.nodeValue!==n)&&(t=Za,t!==null))switch(t.tag){case 3:z_(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&z_(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[du]=e,e.stateNode=r}return io(e),null;case 13:if(ei(pi),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(oi&&Xa!==null&&e.mode&1&&!(e.flags&128))JZ(),fv(),e.flags|=98560,s=!1;else if(s=W_(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(St(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(St(317));s[du]=e}else fv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;io(e),s=!1}else pc!==null&&(kD(pc),pc=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pi.current&1?hs===0&&(hs=3):sF())),e.updateQueue!==null&&(e.flags|=4),io(e),null);case 4:return pv(),bD(t,e),t===null&&Z1(e.stateNode.containerInfo),io(e),null;case 10:return W4(e.type._context),io(e),null;case 17:return va(e.type)&&bE(),io(e),null;case 19:if(ei(pi),s=e.memoizedState,s===null)return io(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)vx(s,!1);else{if(hs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ME(t),o!==null){for(e.flags|=128,vx(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return jr(pi,pi.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ui()>gv&&(e.flags|=128,r=!0,vx(s,!1),e.lanes=4194304)}else{if(!r)if(t=ME(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vx(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!oi)return io(e),null}else 2*Ui()-s.renderingStartTime>gv&&n!==1073741824&&(e.flags|=128,r=!0,vx(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ui(),e.sibling=null,n=pi.current,jr(pi,r?n&1|2:n&1),e):(io(e),null);case 22:case 23:return iF(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ua&1073741824&&(io(e),e.subtreeFlags&6&&(e.flags|=8192)):io(e),null;case 24:return null;case 25:return null}throw Error(St(156,e.tag))}function F0e(t,e){switch(F4(e),e.tag){case 1:return va(e.type)&&bE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pv(),ei(ga),ei(_o),X4(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return j4(e),null;case 13:if(ei(pi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(St(340));fv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ei(pi),null;case 4:return pv(),null;case 10:return W4(e.type._context),null;case 22:case 23:return iF(),null;case 24:return null;default:return null}}var H_=!1,po=!1,U0e=typeof WeakSet=="function"?WeakSet:Set,jt=null;function I0(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_i(t,e,r)}else n.current=null}function wD(t,e,n){try{n()}catch(r){_i(t,e,r)}}var yV=!1;function B0e(t,e){if(iD=gE,t=UZ(),L4(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sD={focusedElem:t,selectionRange:n},gE=!1,jt=e;jt!==null;)if(e=jt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,jt=t;else for(;jt!==null;){e=jt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,m=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:dc(e.type,v),m);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(St(163))}}catch(S){_i(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,jt=t;break}jt=e.return}return p=yV,yV=!1,p}function g1(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&wD(e,n,s)}i=i.next}while(i!==r)}}function pk(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function SD(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function LJ(t){var e=t.alternate;e!==null&&(t.alternate=null,LJ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[du],delete e[Q1],delete e[lD],delete e[S0e],delete e[_0e])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OJ(t){return t.tag===5||t.tag===3||t.tag===4}function xV(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OJ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _D(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xE));else if(r!==4&&(t=t.child,t!==null))for(_D(t,e,n),t=t.sibling;t!==null;)_D(t,e,n),t=t.sibling}function CD(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(CD(t,e,n),t=t.sibling;t!==null;)CD(t,e,n),t=t.sibling}var Vs=null,hc=!1;function ff(t,e,n){for(n=n.child;n!==null;)FJ(t,e,n),n=n.sibling}function FJ(t,e,n){if(yu&&typeof yu.onCommitFiberUnmount=="function")try{yu.onCommitFiberUnmount(ok,n)}catch{}switch(n.tag){case 5:po||I0(n,e);case 6:var r=Vs,i=hc;Vs=null,ff(t,e,n),Vs=r,hc=i,Vs!==null&&(hc?(t=Vs,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vs.removeChild(n.stateNode));break;case 18:Vs!==null&&(hc?(t=Vs,n=n.stateNode,t.nodeType===8?pN(t.parentNode,n):t.nodeType===1&&pN(t,n),q1(t)):pN(Vs,n.stateNode));break;case 4:r=Vs,i=hc,Vs=n.stateNode.containerInfo,hc=!0,ff(t,e,n),Vs=r,hc=i;break;case 0:case 11:case 14:case 15:if(!po&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&wD(n,e,o),i=i.next}while(i!==r)}ff(t,e,n);break;case 1:if(!po&&(I0(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_i(n,e,a)}ff(t,e,n);break;case 21:ff(t,e,n);break;case 22:n.mode&1?(po=(r=po)||n.memoizedState!==null,ff(t,e,n),po=r):ff(t,e,n);break;default:ff(t,e,n)}}function bV(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new U0e),e.forEach(function(r){var i=Y0e.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function rc(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Vs=a.stateNode,hc=!1;break e;case 3:Vs=a.stateNode.containerInfo,hc=!0;break e;case 4:Vs=a.stateNode.containerInfo,hc=!0;break e}a=a.return}if(Vs===null)throw Error(St(160));FJ(s,o,i),Vs=null,hc=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){_i(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)UJ(e,t),e=e.sibling}function UJ(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rc(e,t),Zc(t),r&4){try{g1(3,t,t.return),pk(3,t)}catch(v){_i(t,t.return,v)}try{g1(5,t,t.return)}catch(v){_i(t,t.return,v)}}break;case 1:rc(e,t),Zc(t),r&512&&n!==null&&I0(n,n.return);break;case 5:if(rc(e,t),Zc(t),r&512&&n!==null&&I0(n,n.return),t.flags&32){var i=t.stateNode;try{G1(i,"")}catch(v){_i(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&oZ(i,s),q$(a,o);var c=q$(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?dZ(i,d):u==="dangerouslySetInnerHTML"?cZ(i,d):u==="children"?G1(i,d):_4(i,u,d,c)}switch(a){case"input":V$(i,s);break;case"textarea":aZ(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?W0(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?W0(i,!!s.multiple,s.defaultValue,!0):W0(i,!!s.multiple,s.multiple?[]:"",!1))}i[Q1]=s}catch(v){_i(t,t.return,v)}}break;case 6:if(rc(e,t),Zc(t),r&4){if(t.stateNode===null)throw Error(St(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){_i(t,t.return,v)}}break;case 3:if(rc(e,t),Zc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{q1(e.containerInfo)}catch(v){_i(t,t.return,v)}break;case 4:rc(e,t),Zc(t);break;case 13:rc(e,t),Zc(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(nF=Ui())),r&4&&bV(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(po=(c=po)||u,rc(e,t),po=c):rc(e,t),Zc(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(jt=t,u=t.child;u!==null;){for(d=jt=u;jt!==null;){switch(f=jt,h=f.child,f.tag){case 0:case 11:case 14:case 15:g1(4,f,f.return);break;case 1:I0(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){_i(r,n,v)}}break;case 5:I0(f,f.return);break;case 22:if(f.memoizedState!==null){SV(d);continue}}h!==null?(h.return=f,jt=h):SV(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=uZ("display",o))}catch(v){_i(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){_i(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:rc(e,t),Zc(t),r&4&&bV(t);break;case 21:break;default:rc(e,t),Zc(t)}}function Zc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(OJ(n)){var r=n;break e}n=n.return}throw Error(St(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(G1(i,""),r.flags&=-33);var s=xV(t);CD(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=xV(t);_D(t,a,o);break;default:throw Error(St(161))}}catch(l){_i(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function z0e(t,e,n){jt=t,BJ(t)}function BJ(t,e,n){for(var r=(t.mode&1)!==0;jt!==null;){var i=jt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||H_;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||po;a=H_;var c=po;if(H_=o,(po=l)&&!c)for(jt=i;jt!==null;)o=jt,l=o.child,o.tag===22&&o.memoizedState!==null?_V(i):l!==null?(l.return=o,jt=l):_V(i);for(;s!==null;)jt=s,BJ(s),s=s.sibling;jt=i,H_=a,po=c}wV(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,jt=s):wV(t)}}function wV(t){for(;jt!==null;){var e=jt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:po||pk(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!po)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:dc(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&iV(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}iV(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&q1(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(St(163))}po||e.flags&512&&SD(e)}catch(f){_i(e,e.return,f)}}if(e===t){jt=null;break}if(n=e.sibling,n!==null){n.return=e.return,jt=n;break}jt=e.return}}function SV(t){for(;jt!==null;){var e=jt;if(e===t){jt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,jt=n;break}jt=e.return}}function _V(t){for(;jt!==null;){var e=jt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pk(4,e)}catch(l){_i(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){_i(e,i,l)}}var s=e.return;try{SD(e)}catch(l){_i(e,s,l)}break;case 5:var o=e.return;try{SD(e)}catch(l){_i(e,o,l)}}}catch(l){_i(e,e.return,l)}if(e===t){jt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,jt=a;break}jt=e.return}}var W0e=Math.ceil,IE=qd.ReactCurrentDispatcher,eF=qd.ReactCurrentOwner,Ll=qd.ReactCurrentBatchConfig,dr=0,ks=null,Ki=null,Hs=0,Ua=0,R0=xh(0),hs=0,sb=null,fm=0,mk=0,tF=0,v1=null,la=null,nF=0,gv=1/0,pd=null,RE=!1,TD=null,Vf=null,j_=!1,If=null,NE=0,y1=0,ED=null,OT=-1,FT=0;function Vo(){return dr&6?Ui():OT!==-1?OT:OT=Ui()}function Gf(t){return t.mode&1?dr&2&&Hs!==0?Hs&-Hs:T0e.transition!==null?(FT===0&&(FT=_Z()),FT):(t=Mr,t!==0||(t=window.event,t=t===void 0?16:IZ(t.type)),t):1}function Mc(t,e,n,r){if(50<y1)throw y1=0,ED=null,Error(St(185));Ew(t,n,r),(!(dr&2)||t!==ks)&&(t===ks&&(!(dr&2)&&(mk|=n),hs===4&&Ef(t,Hs)),ya(t,r),n===1&&dr===0&&!(e.mode&1)&&(gv=Ui()+500,dk&&bh()))}function ya(t,e){var n=t.callbackNode;Tge(t,e);var r=mE(t,t===ks?Hs:0);if(r===0)n!==null&&NW(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&NW(n),e===1)t.tag===0?C0e(CV.bind(null,t)):YZ(CV.bind(null,t)),b0e(function(){!(dr&6)&&bh()}),n=null;else{switch(CZ(r)){case 1:n=k4;break;case 4:n=wZ;break;case 16:n=pE;break;case 536870912:n=SZ;break;default:n=pE}n=qJ(n,zJ.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zJ(t,e){if(OT=-1,FT=0,dr&6)throw Error(St(327));var n=t.callbackNode;if(X0()&&t.callbackNode!==n)return null;var r=mE(t,t===ks?Hs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=PE(t,r);else{e=r;var i=dr;dr|=2;var s=VJ();(ks!==t||Hs!==e)&&(pd=null,gv=Ui()+500,jp(t,e));do try{H0e();break}catch(a){WJ(t,a)}while(!0);z4(),IE.current=s,dr=i,Ki!==null?e=0:(ks=null,Hs=0,e=hs)}if(e!==0){if(e===2&&(i=Q$(t),i!==0&&(r=i,e=MD(t,i))),e===1)throw n=sb,jp(t,0),Ef(t,r),ya(t,Ui()),n;if(e===6)Ef(t,r);else{if(i=t.current.alternate,!(r&30)&&!V0e(i)&&(e=PE(t,r),e===2&&(s=Q$(t),s!==0&&(r=s,e=MD(t,s))),e===1))throw n=sb,jp(t,0),Ef(t,r),ya(t,Ui()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(St(345));case 2:gp(t,la,pd);break;case 3:if(Ef(t,r),(r&130023424)===r&&(e=nF+500-Ui(),10<e)){if(mE(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Vo(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=aD(gp.bind(null,t,la,pd),e);break}gp(t,la,pd);break;case 4:if(Ef(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ec(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ui()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*W0e(r/1960))-r,10<r){t.timeoutHandle=aD(gp.bind(null,t,la,pd),r);break}gp(t,la,pd);break;case 5:gp(t,la,pd);break;default:throw Error(St(329))}}}return ya(t,Ui()),t.callbackNode===n?zJ.bind(null,t):null}function MD(t,e){var n=v1;return t.current.memoizedState.isDehydrated&&(jp(t,e).flags|=256),t=PE(t,e),t!==2&&(e=la,la=n,e!==null&&kD(e)),t}function kD(t){la===null?la=t:la.push.apply(la,t)}function V0e(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pc(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ef(t,e){for(e&=~tF,e&=~mk,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ec(e),r=1<<n;t[n]=-1,e&=~r}}function CV(t){if(dr&6)throw Error(St(327));X0();var e=mE(t,0);if(!(e&1))return ya(t,Ui()),null;var n=PE(t,e);if(t.tag!==0&&n===2){var r=Q$(t);r!==0&&(e=r,n=MD(t,r))}if(n===1)throw n=sb,jp(t,0),Ef(t,e),ya(t,Ui()),n;if(n===6)throw Error(St(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gp(t,la,pd),ya(t,Ui()),null}function rF(t,e){var n=dr;dr|=1;try{return t(e)}finally{dr=n,dr===0&&(gv=Ui()+500,dk&&bh())}}function hm(t){If!==null&&If.tag===0&&!(dr&6)&&X0();var e=dr;dr|=1;var n=Ll.transition,r=Mr;try{if(Ll.transition=null,Mr=1,t)return t()}finally{Mr=r,Ll.transition=n,dr=e,!(dr&6)&&bh()}}function iF(){Ua=R0.current,ei(R0)}function jp(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,x0e(n)),Ki!==null)for(n=Ki.return;n!==null;){var r=n;switch(F4(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bE();break;case 3:pv(),ei(ga),ei(_o),X4();break;case 5:j4(r);break;case 4:pv();break;case 13:ei(pi);break;case 19:ei(pi);break;case 10:W4(r.type._context);break;case 22:case 23:iF()}n=n.return}if(ks=t,Ki=t=Hf(t.current,null),Hs=Ua=e,hs=0,sb=null,tF=mk=fm=0,la=v1=null,Rp!==null){for(e=0;e<Rp.length;e++)if(n=Rp[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Rp=null}return t}function WJ(t,e){do{var n=Ki;try{if(z4(),$T.current=AE,kE){for(var r=gi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kE=!1}if(dm=0,Ts=ls=gi=null,m1=!1,nb=0,eF.current=null,n===null||n.return===null){hs=1,sb=e,Ki=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Hs,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=dV(o);if(h!==null){h.flags&=-257,fV(h,o,a,s,e),h.mode&1&&uV(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){uV(s,c,e),sF();break e}l=Error(St(426))}}else if(oi&&a.mode&1){var m=dV(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),fV(m,o,a,s,e),U4(mv(l,a));break e}}s=l=mv(l,a),hs!==4&&(hs=2),v1===null?v1=[s]:v1.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=TJ(s,l,e);rV(s,g);break e;case 1:a=l;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Vf===null||!Vf.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=EJ(s,a,e);rV(s,S);break e}}s=s.return}while(s!==null)}HJ(n)}catch(_){e=_,Ki===n&&n!==null&&(Ki=n=n.return);continue}break}while(!0)}function VJ(){var t=IE.current;return IE.current=AE,t===null?AE:t}function sF(){(hs===0||hs===3||hs===2)&&(hs=4),ks===null||!(fm&268435455)&&!(mk&268435455)||Ef(ks,Hs)}function PE(t,e){var n=dr;dr|=2;var r=VJ();(ks!==t||Hs!==e)&&(pd=null,jp(t,e));do try{G0e();break}catch(i){WJ(t,i)}while(!0);if(z4(),dr=n,IE.current=r,Ki!==null)throw Error(St(261));return ks=null,Hs=0,hs}function G0e(){for(;Ki!==null;)GJ(Ki)}function H0e(){for(;Ki!==null&&!gge();)GJ(Ki)}function GJ(t){var e=XJ(t.alternate,t,Ua);t.memoizedProps=t.pendingProps,e===null?HJ(t):Ki=e,eF.current=null}function HJ(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=F0e(n,e),n!==null){n.flags&=32767,Ki=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hs=6,Ki=null;return}}else if(n=O0e(n,e,Ua),n!==null){Ki=n;return}if(e=e.sibling,e!==null){Ki=e;return}Ki=e=t}while(e!==null);hs===0&&(hs=5)}function gp(t,e,n){var r=Mr,i=Ll.transition;try{Ll.transition=null,Mr=1,j0e(t,e,n,r)}finally{Ll.transition=i,Mr=r}return null}function j0e(t,e,n,r){do X0();while(If!==null);if(dr&6)throw Error(St(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(St(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Ege(t,s),t===ks&&(Ki=ks=null,Hs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||j_||(j_=!0,qJ(pE,function(){return X0(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ll.transition,Ll.transition=null;var o=Mr;Mr=1;var a=dr;dr|=4,eF.current=null,B0e(t,n),UJ(n,t),f0e(sD),gE=!!iD,sD=iD=null,t.current=n,z0e(n),vge(),dr=a,Mr=o,Ll.transition=s}else t.current=n;if(j_&&(j_=!1,If=t,NE=i),s=t.pendingLanes,s===0&&(Vf=null),bge(n.stateNode),ya(t,Ui()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(RE)throw RE=!1,t=TD,TD=null,t;return NE&1&&t.tag!==0&&X0(),s=t.pendingLanes,s&1?t===ED?y1++:(y1=0,ED=t):y1=0,bh(),null}function X0(){if(If!==null){var t=CZ(NE),e=Ll.transition,n=Mr;try{if(Ll.transition=null,Mr=16>t?16:t,If===null)var r=!1;else{if(t=If,If=null,NE=0,dr&6)throw Error(St(331));var i=dr;for(dr|=4,jt=t.current;jt!==null;){var s=jt,o=s.child;if(jt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(jt=c;jt!==null;){var u=jt;switch(u.tag){case 0:case 11:case 15:g1(8,u,s)}var d=u.child;if(d!==null)d.return=u,jt=d;else for(;jt!==null;){u=jt;var f=u.sibling,h=u.return;if(LJ(u),u===c){jt=null;break}if(f!==null){f.return=h,jt=f;break}jt=h}}}var p=s.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(v!==null)}}jt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,jt=o;else e:for(;jt!==null;){if(s=jt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:g1(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,jt=g;break e}jt=s.return}}var y=t.current;for(jt=y;jt!==null;){o=jt;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,jt=x;else e:for(o=y;jt!==null;){if(a=jt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:pk(9,a)}}catch(_){_i(a,a.return,_)}if(a===o){jt=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,jt=S;break e}jt=a.return}}if(dr=i,bh(),yu&&typeof yu.onPostCommitFiberRoot=="function")try{yu.onPostCommitFiberRoot(ok,t)}catch{}r=!0}return r}finally{Mr=n,Ll.transition=e}}return!1}function TV(t,e,n){e=mv(n,e),e=TJ(t,e,1),t=Wf(t,e,1),e=Vo(),t!==null&&(Ew(t,1,e),ya(t,e))}function _i(t,e,n){if(t.tag===3)TV(t,t,n);else for(;e!==null;){if(e.tag===3){TV(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vf===null||!Vf.has(r))){t=mv(n,t),t=EJ(e,t,1),e=Wf(e,t,1),t=Vo(),e!==null&&(Ew(e,1,t),ya(e,t));break}}e=e.return}}function X0e(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Vo(),t.pingedLanes|=t.suspendedLanes&n,ks===t&&(Hs&n)===n&&(hs===4||hs===3&&(Hs&130023424)===Hs&&500>Ui()-nF?jp(t,0):tF|=n),ya(t,e)}function jJ(t,e){e===0&&(t.mode&1?(e=L_,L_<<=1,!(L_&130023424)&&(L_=4194304)):e=1);var n=Vo();t=Fd(t,e),t!==null&&(Ew(t,e,n),ya(t,n))}function q0e(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jJ(t,n)}function Y0e(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(St(314))}r!==null&&r.delete(e),jJ(t,n)}var XJ;XJ=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ga.current)fa=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fa=!1,L0e(t,e,n);fa=!!(t.flags&131072)}else fa=!1,oi&&e.flags&1048576&&KZ(e,_E,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;LT(t,e),t=e.pendingProps;var i=dv(e,_o.current);j0(e,n),i=Y4(null,e,r,t,i,n);var s=K4();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,va(r)?(s=!0,wE(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,G4(e),i.updater=fk,e.stateNode=i,i._reactInternals=e,pD(e,r,t,n),e=vD(null,e,r,!0,s,n)):(e.tag=0,oi&&s&&O4(e),Lo(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(LT(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Z0e(r),t=dc(r,t),i){case 0:e=gD(null,e,r,t,n);break e;case 1:e=mV(null,e,r,t,n);break e;case 11:e=hV(null,e,r,t,n);break e;case 14:e=pV(null,e,r,dc(r.type,t),n);break e}throw Error(St(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dc(r,i),gD(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dc(r,i),mV(t,e,r,i,n);case 3:e:{if(IJ(e),t===null)throw Error(St(387));r=e.pendingProps,s=e.memoizedState,i=s.element,eJ(t,e),EE(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=mv(Error(St(423)),e),e=gV(t,e,r,n,i);break e}else if(r!==i){i=mv(Error(St(424)),e),e=gV(t,e,r,n,i);break e}else for(Xa=zf(e.stateNode.containerInfo.firstChild),Za=e,oi=!0,pc=null,n=iJ(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fv(),r===i){e=Ud(t,e,n);break e}Lo(t,e,r,n)}e=e.child}return e;case 5:return sJ(e),t===null&&dD(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,oD(r,i)?o=null:s!==null&&oD(r,s)&&(e.flags|=32),AJ(t,e),Lo(t,e,o,n),e.child;case 6:return t===null&&dD(e),null;case 13:return RJ(t,e,n);case 4:return H4(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hv(e,null,r,n):Lo(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dc(r,i),hV(t,e,r,i,n);case 7:return Lo(t,e,e.pendingProps,n),e.child;case 8:return Lo(t,e,e.pendingProps.children,n),e.child;case 12:return Lo(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,jr(CE,r._currentValue),r._currentValue=o,s!==null)if(Pc(s.value,o)){if(s.children===i.children&&!ga.current){e=Ud(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Pd(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),fD(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(St(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fD(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Lo(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,j0(e,n),i=Bl(i),r=r(i),e.flags|=1,Lo(t,e,r,n),e.child;case 14:return r=e.type,i=dc(r,e.pendingProps),i=dc(r.type,i),pV(t,e,r,i,n);case 15:return MJ(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dc(r,i),LT(t,e),e.tag=1,va(r)?(t=!0,wE(e)):t=!1,j0(e,n),nJ(e,r,i),pD(e,r,i,n),vD(null,e,r,!0,t,n);case 19:return NJ(t,e,n);case 22:return kJ(t,e,n)}throw Error(St(156,e.tag))};function qJ(t,e){return bZ(t,e)}function K0e(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Al(t,e,n,r){return new K0e(t,e,n,r)}function oF(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Z0e(t){if(typeof t=="function")return oF(t)?1:0;if(t!=null){if(t=t.$$typeof,t===T4)return 11;if(t===E4)return 14}return 2}function Hf(t,e){var n=t.alternate;return n===null?(n=Al(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function UT(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")oF(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case w0:return Xp(n.children,i,s,e);case C4:o=8,i|=8;break;case F$:return t=Al(12,n,e,i|2),t.elementType=F$,t.lanes=s,t;case U$:return t=Al(13,n,e,i),t.elementType=U$,t.lanes=s,t;case B$:return t=Al(19,n,e,i),t.elementType=B$,t.lanes=s,t;case rZ:return gk(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tZ:o=10;break e;case nZ:o=9;break e;case T4:o=11;break e;case E4:o=14;break e;case Sf:o=16,r=null;break e}throw Error(St(130,t==null?t:typeof t,""))}return e=Al(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Xp(t,e,n,r){return t=Al(7,t,r,e),t.lanes=n,t}function gk(t,e,n,r){return t=Al(22,t,r,e),t.elementType=rZ,t.lanes=n,t.stateNode={isHidden:!1},t}function SN(t,e,n){return t=Al(6,t,null,e),t.lanes=n,t}function _N(t,e,n){return e=Al(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function J0e(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rN(0),this.expirationTimes=rN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rN(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function aF(t,e,n,r,i,s,o,a,l){return t=new J0e(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Al(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},G4(s),t}function Q0e(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:b0,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function YJ(t){if(!t)return nh;t=t._reactInternals;e:{if(Vm(t)!==t||t.tag!==1)throw Error(St(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(va(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(St(171))}if(t.tag===1){var n=t.type;if(va(n))return qZ(t,n,e)}return e}function KJ(t,e,n,r,i,s,o,a,l){return t=aF(n,r,!0,t,i,s,o,a,l),t.context=YJ(null),n=t.current,r=Vo(),i=Gf(n),s=Pd(r,i),s.callback=e??null,Wf(n,s,i),t.current.lanes=i,Ew(t,i,r),ya(t,r),t}function vk(t,e,n,r){var i=e.current,s=Vo(),o=Gf(i);return n=YJ(n),e.context===null?e.context=n:e.pendingContext=n,e=Pd(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wf(i,e,o),t!==null&&(Mc(t,i,o,s),PT(t,i,o)),o}function $E(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function EV(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lF(t,e){EV(t,e),(t=t.alternate)&&EV(t,e)}function eve(){return null}var ZJ=typeof reportError=="function"?reportError:function(t){console.error(t)};function cF(t){this._internalRoot=t}yk.prototype.render=cF.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(St(409));vk(t,e,null,null)};yk.prototype.unmount=cF.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hm(function(){vk(null,t,null,null)}),e[Od]=null}};function yk(t){this._internalRoot=t}yk.prototype.unstable_scheduleHydration=function(t){if(t){var e=MZ();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tf.length&&e!==0&&e<Tf[n].priority;n++);Tf.splice(n,0,t),n===0&&AZ(t)}};function uF(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function MV(){}function tve(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=$E(o);s.call(c)}}var o=KJ(e,r,t,0,null,!1,!1,"",MV);return t._reactRootContainer=o,t[Od]=o.current,Z1(t.nodeType===8?t.parentNode:t),hm(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=$E(l);a.call(c)}}var l=aF(t,0,!1,null,null,!1,!1,"",MV);return t._reactRootContainer=l,t[Od]=l.current,Z1(t.nodeType===8?t.parentNode:t),hm(function(){vk(e,l,n,r)}),l}function bk(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=$E(o);a.call(l)}}vk(e,o,t,i)}else o=tve(n,e,t,i,r);return $E(o)}TZ=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qx(e.pendingLanes);n!==0&&(A4(e,n|1),ya(e,Ui()),!(dr&6)&&(gv=Ui()+500,bh()))}break;case 13:hm(function(){var r=Fd(t,1);if(r!==null){var i=Vo();Mc(r,t,1,i)}}),lF(t,1)}};I4=function(t){if(t.tag===13){var e=Fd(t,134217728);if(e!==null){var n=Vo();Mc(e,t,134217728,n)}lF(t,134217728)}};EZ=function(t){if(t.tag===13){var e=Gf(t),n=Fd(t,e);if(n!==null){var r=Vo();Mc(n,t,e,r)}lF(t,e)}};MZ=function(){return Mr};kZ=function(t,e){var n=Mr;try{return Mr=t,e()}finally{Mr=n}};K$=function(t,e,n){switch(e){case"input":if(V$(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=uk(r);if(!i)throw Error(St(90));sZ(r),V$(r,i)}}}break;case"textarea":aZ(t,n);break;case"select":e=n.value,e!=null&&W0(t,!!n.multiple,e,!1)}};pZ=rF;mZ=hm;var nve={usingClientEntryPoint:!1,Events:[kw,T0,uk,fZ,hZ,rF]},yx={findFiberByHostInstance:Ip,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rve={bundleType:yx.bundleType,version:yx.version,rendererPackageName:yx.rendererPackageName,rendererConfig:yx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qd.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yZ(t),t===null?null:t.stateNode},findFiberByHostInstance:yx.findFiberByHostInstance||eve,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var X_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!X_.isDisabled&&X_.supportsFiber)try{ok=X_.inject(rve),yu=X_}catch{}}il.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nve;il.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uF(e))throw Error(St(200));return Q0e(t,e,null,n)};il.createRoot=function(t,e){if(!uF(t))throw Error(St(299));var n=!1,r="",i=ZJ;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=aF(t,1,!1,null,null,n,!1,r,i),t[Od]=e.current,Z1(t.nodeType===8?t.parentNode:t),new cF(e)};il.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(St(188)):(t=Object.keys(t).join(","),Error(St(268,t)));return t=yZ(e),t=t===null?null:t.stateNode,t};il.flushSync=function(t){return hm(t)};il.hydrate=function(t,e,n){if(!xk(e))throw Error(St(200));return bk(null,t,e,!0,n)};il.hydrateRoot=function(t,e,n){if(!uF(t))throw Error(St(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ZJ;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=KJ(e,null,t,1,n??null,i,!1,s,o),t[Od]=e.current,Z1(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new yk(e)};il.render=function(t,e,n){if(!xk(e))throw Error(St(200));return bk(null,t,e,!1,n)};il.unmountComponentAtNode=function(t){if(!xk(t))throw Error(St(40));return t._reactRootContainer?(hm(function(){bk(null,null,t,!1,function(){t._reactRootContainer=null,t[Od]=null})}),!0):!1};il.unstable_batchedUpdates=rF;il.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xk(n))throw Error(St(200));if(t==null||t._reactInternals===void 0)throw Error(St(38));return bk(t,e,n,!1,r)};il.version="18.2.0-next-9e3b772b8-20220608";function JJ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JJ)}catch(t){console.error(t)}}JJ(),KK.exports=il;var Iw=KK.exports;const q_=is(Iw);var kV=Iw;L$.createRoot=kV.createRoot,L$.hydrateRoot=kV.hydrateRoot;/**
 * @remix-run/router v1.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ob(){return ob=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ob.apply(this,arguments)}var Rf;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rf||(Rf={}));const AV="popstate";function ive(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Gm(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),AD("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:DE(s))}function r(i,s){wk(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return ove(e,n,r,t)}function Mi(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wk(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sve(){return Math.random().toString(36).substr(2,8)}function IV(t,e){return{usr:t.state,key:t.key,idx:e}}function AD(t,e,n,r){return n===void 0&&(n=null),ob({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Gm(e):e,{state:n,key:e&&e.key||r||sve()})}function DE(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gm(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ove(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Rf.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(ob({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Rf.Pop;let m=u(),g=m==null?null:m-c;c=m,l&&l({action:a,location:v.location,delta:g})}function f(m,g){a=Rf.Push;let y=AD(v.location,m,g);n&&n(y,m),c=u()+1;let x=IV(y,c),S=v.createHref(y);try{o.pushState(x,"",S)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(S)}s&&l&&l({action:a,location:v.location,delta:1})}function h(m,g){a=Rf.Replace;let y=AD(v.location,m,g);n&&n(y,m),c=u();let x=IV(y,c),S=v.createHref(y);o.replaceState(x,"",S),s&&l&&l({action:a,location:v.location,delta:0})}function p(m){let g=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof m=="string"?m:DE(m);return Mi(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let v={get action(){return a},get location(){return t(i,o)},listen(m){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(AV,d),l=m,()=>{i.removeEventListener(AV,d),l=null}},createHref(m){return e(i,m)},createURL:p,encodeLocation(m){let g=p(m);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:h,go(m){return o.go(m)}};return v}var RV;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(RV||(RV={}));function ave(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Gm(e):e,i=ab(r.pathname||"/",n);if(i==null)return null;let s=QJ(t);lve(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=vve(s[a],xve(i));return o}function QJ(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Mi(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=jf([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Mi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),QJ(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:mve(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of eQ(s.path))i(s,o,l)}),e}function eQ(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=eQ(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function lve(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gve(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cve=/^:\w+$/,uve=3,dve=2,fve=1,hve=10,pve=-2,NV=t=>t==="*";function mve(t,e){let n=t.split("/"),r=n.length;return n.some(NV)&&(r+=pve),e&&(r+=dve),n.filter(i=>!NV(i)).reduce((i,s)=>i+(cve.test(s)?uve:s===""?fve:hve),r)}function gve(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function vve(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=ID({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:jf([i,u.pathname]),pathnameBase:Cve(jf([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=jf([i,u.pathnameBase]))}return s}function ID(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=yve(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?c[f]=void 0:c[f]=bve(p||"",f),c},{}),pathname:s,pathnameBase:o,pattern:t}}function yve(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wk(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function xve(t){try{return decodeURI(t)}catch(e){return wk(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bve(t,e){try{return decodeURIComponent(t)}catch(n){return wk(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function ab(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function wve(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Gm(t):t;return{pathname:n?n.startsWith("/")?n:Sve(n,e):e,search:Tve(r),hash:Eve(i)}}function Sve(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function CN(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _ve(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function tQ(t,e){let n=_ve(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function nQ(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Gm(t):(i=ob({},t),Mi(!i.pathname||!i.pathname.includes("?"),CN("?","pathname","search",i)),Mi(!i.pathname||!i.pathname.includes("#"),CN("#","pathname","hash",i)),Mi(!i.search||!i.search.includes("#"),CN("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=wve(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const jf=t=>t.join("/").replace(/\/\/+/g,"/"),Cve=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Tve=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Eve=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Mve(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rQ=["post","put","patch","delete"];new Set(rQ);const kve=["get",...rQ];new Set(kve);/**
 * React Router v6.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lb(){return lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lb.apply(this,arguments)}const Sk=N.createContext(null),iQ=N.createContext(null),wh=N.createContext(null),_k=N.createContext(null),Hm=N.createContext({outlet:null,matches:[],isDataRoute:!1}),sQ=N.createContext(null);function Ave(t,e){let{relative:n}=e===void 0?{}:e;Rw()||Mi(!1);let{basename:r,navigator:i}=N.useContext(wh),{hash:s,pathname:o,search:a}=Ck(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:jf([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Rw(){return N.useContext(_k)!=null}function Nw(){return Rw()||Mi(!1),N.useContext(_k).location}function oQ(t){N.useContext(wh).static||N.useLayoutEffect(t)}function Ive(){let{isDataRoute:t}=N.useContext(Hm);return t?Vve():Rve()}function Rve(){Rw()||Mi(!1);let t=N.useContext(Sk),{basename:e,future:n,navigator:r}=N.useContext(wh),{matches:i}=N.useContext(Hm),{pathname:s}=Nw(),o=JSON.stringify(tQ(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return oQ(()=>{a.current=!0}),N.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=nQ(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:jf([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}function Ck(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(wh),{matches:i}=N.useContext(Hm),{pathname:s}=Nw(),o=JSON.stringify(tQ(i,r.v7_relativeSplatPath));return N.useMemo(()=>nQ(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Nve(t,e){return Pve(t,e)}function Pve(t,e,n,r){Rw()||Mi(!1);let{navigator:i}=N.useContext(wh),{matches:s}=N.useContext(Hm),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Nw(),u;if(e){var d;let m=typeof e=="string"?Gm(e):e;l==="/"||(d=m.pathname)!=null&&d.startsWith(l)||Mi(!1),u=m}else u=c;let f=u.pathname||"/",h=l==="/"?f:f.slice(l.length)||"/",p=ave(t,{pathname:h}),v=Fve(p&&p.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:jf([l,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?l:jf([l,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),s,n,r);return e&&v?N.createElement(_k.Provider,{value:{location:lb({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Rf.Pop}},v):v}function $ve(){let t=Wve(),e=Mve(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,s)}const Dve=N.createElement($ve,null);class Lve extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Hm.Provider,{value:this.props.routeContext},N.createElement(sQ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ove(t){let{routeContext:e,match:n,children:r}=t,i=N.useContext(Sk);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Hm.Provider,{value:e},r)}function Fve(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||Mi(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let h,p=!1,v=null,m=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||Dve,l&&(c<0&&f===0?(Gve("route-fallback",!1),p=!0,m=null):c===f&&(p=!0,m=d.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),y=()=>{let x;return h?x=v:p?x=m:d.route.Component?x=N.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=u,N.createElement(Ove,{match:d,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?N.createElement(Lve,{location:n.location,revalidation:n.revalidation,component:v,error:h,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var aQ=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(aQ||{}),LE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(LE||{});function Uve(t){let e=N.useContext(Sk);return e||Mi(!1),e}function Bve(t){let e=N.useContext(iQ);return e||Mi(!1),e}function zve(t){let e=N.useContext(Hm);return e||Mi(!1),e}function lQ(t){let e=zve(),n=e.matches[e.matches.length-1];return n.route.id||Mi(!1),n.route.id}function Wve(){var t;let e=N.useContext(sQ),n=Bve(LE.UseRouteError),r=lQ(LE.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Vve(){let{router:t}=Uve(aQ.UseNavigateStable),e=lQ(LE.UseNavigateStable),n=N.useRef(!1);return oQ(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,lb({fromRouteId:e},s)))},[t,e])}const PV={};function Gve(t,e,n){!e&&!PV[t]&&(PV[t]=!0)}function $o(t){Mi(!1)}function Hve(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Rf.Pop,navigator:s,static:o=!1,future:a}=t;Rw()&&Mi(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:o,future:lb({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Gm(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,v=N.useMemo(()=>{let m=ab(u,l);return m==null?null:{location:{pathname:m,search:d,hash:f,state:h,key:p},navigationType:i}},[l,u,d,f,h,p,i]);return v==null?null:N.createElement(wh.Provider,{value:c},N.createElement(_k.Provider,{children:n,value:v}))}function jve(t){let{children:e,location:n}=t;return Nve(RD(e),n)}new Promise(()=>{});function RD(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,RD(r.props.children,s));return}r.type!==$o&&Mi(!1),!r.props.index||!r.props.children||Mi(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=RD(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function OE(){return OE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OE.apply(this,arguments)}function cQ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Xve(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qve(t,e){return t.button===0&&(!e||e==="_self")&&!Xve(t)}const Yve=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Kve=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],Zve=N.createContext({isTransitioning:!1}),Jve="startTransition",$V=uE[Jve];function Qve(t){let{basename:e,children:n,future:r,window:i}=t,s=N.useRef();s.current==null&&(s.current=ive({window:i,v5Compat:!0}));let o=s.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=N.useCallback(d=>{c&&$V?$V(()=>l(d)):l(d)},[l,c]);return N.useLayoutEffect(()=>o.listen(u),[o,u]),N.createElement(Hve,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const eye=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tye=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nye=N.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=e,f=cQ(e,Yve),{basename:h}=N.useContext(wh),p,v=!1;if(typeof c=="string"&&tye.test(c)&&(p=c,eye))try{let x=new URL(window.location.href),S=c.startsWith("//")?new URL(x.protocol+c):new URL(c),_=ab(S.pathname,h);S.origin===x.origin&&_!=null?c=_+S.search+S.hash:v=!0}catch{}let m=Ave(c,{relative:i}),g=iye(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:d});function y(x){r&&r(x),x.defaultPrevented||g(x)}return N.createElement("a",OE({},f,{href:p||m,onClick:v||s?r:y,ref:n,target:l}))}),cb=N.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:c,children:u}=e,d=cQ(e,Kve),f=Ck(l,{relative:d.relative}),h=Nw(),p=N.useContext(iQ),{navigator:v}=N.useContext(wh),m=p!=null&&sye(f)&&c===!0,g=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,y=h.pathname,x=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;i||(y=y.toLowerCase(),x=x?x.toLowerCase():null,g=g.toLowerCase());const S=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let _=y===g||!o&&y.startsWith(g)&&y.charAt(S)==="/",C=x!=null&&(x===g||!o&&x.startsWith(g)&&x.charAt(g.length)==="/"),T={isActive:_,isPending:C,isTransitioning:m},A=_?r:void 0,k;typeof s=="function"?k=s(T):k=[s,_?"active":null,C?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let M=typeof a=="function"?a(T):a;return N.createElement(nye,OE({},d,{"aria-current":A,className:k,ref:n,style:M,to:l,unstable_viewTransition:c}),typeof u=="function"?u(T):u)});var ND;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ND||(ND={}));var DV;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(DV||(DV={}));function rye(t){let e=N.useContext(Sk);return e||Mi(!1),e}function iye(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Ive(),c=Nw(),u=Ck(t,{relative:o});return N.useCallback(d=>{if(qve(d,n)){d.preventDefault();let f=r!==void 0?r:DE(c)===DE(u);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function sye(t,e){e===void 0&&(e={});let n=N.useContext(Zve);n==null&&Mi(!1);let{basename:r}=rye(ND.useViewTransitionState),i=Ck(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=ab(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ab(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ID(i.pathname,o)!=null||ID(i.pathname,s)!=null}const oye={black:"#000",white:"#fff"},ub=oye,aye={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Rg=aye,lye={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Ng=lye,cye={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Pg=cye,uye={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},$g=uye,dye={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Dg=dye,fye={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},xx=fye,hye={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},pye=hye;function rh(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const Pw="$$material";function ve(){return ve=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ve.apply(this,arguments)}function Zt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function uQ(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var mye=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,gye=uQ(function(t){return mye.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function vye(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function yye(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var xye=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(yye(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=vye(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),co="-ms-",FE="-moz-",wr="-webkit-",dQ="comm",dF="rule",fF="decl",bye="@import",fQ="@keyframes",wye="@layer",Sye=Math.abs,Tk=String.fromCharCode,_ye=Object.assign;function Cye(t,e){return Gs(t,0)^45?(((e<<2^Gs(t,0))<<2^Gs(t,1))<<2^Gs(t,2))<<2^Gs(t,3):0}function hQ(t){return t.trim()}function Tye(t,e){return(t=e.exec(t))?t[0]:t}function Sr(t,e,n){return t.replace(e,n)}function PD(t,e){return t.indexOf(e)}function Gs(t,e){return t.charCodeAt(e)|0}function db(t,e,n){return t.slice(e,n)}function ou(t){return t.length}function hF(t){return t.length}function Y_(t,e){return e.push(t),t}function Eye(t,e){return t.map(e).join("")}var Ek=1,vv=1,pQ=0,Sa=0,qi=0,Jv="";function Mk(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Ek,column:vv,length:o,return:""}}function bx(t,e){return _ye(Mk("",null,null,"",null,null,0),t,{length:-t.length},e)}function Mye(){return qi}function kye(){return qi=Sa>0?Gs(Jv,--Sa):0,vv--,qi===10&&(vv=1,Ek--),qi}function Ja(){return qi=Sa<pQ?Gs(Jv,Sa++):0,vv++,qi===10&&(vv=1,Ek++),qi}function bu(){return Gs(Jv,Sa)}function BT(){return Sa}function $w(t,e){return db(Jv,t,e)}function fb(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function mQ(t){return Ek=vv=1,pQ=ou(Jv=t),Sa=0,[]}function gQ(t){return Jv="",t}function zT(t){return hQ($w(Sa-1,$D(t===91?t+2:t===40?t+1:t)))}function Aye(t){for(;(qi=bu())&&qi<33;)Ja();return fb(t)>2||fb(qi)>3?"":" "}function Iye(t,e){for(;--e&&Ja()&&!(qi<48||qi>102||qi>57&&qi<65||qi>70&&qi<97););return $w(t,BT()+(e<6&&bu()==32&&Ja()==32))}function $D(t){for(;Ja();)switch(qi){case t:return Sa;case 34:case 39:t!==34&&t!==39&&$D(qi);break;case 40:t===41&&$D(t);break;case 92:Ja();break}return Sa}function Rye(t,e){for(;Ja()&&t+qi!==57;)if(t+qi===84&&bu()===47)break;return"/*"+$w(e,Sa-1)+"*"+Tk(t===47?t:Ja())}function Nye(t){for(;!fb(bu());)Ja();return $w(t,Sa)}function Pye(t){return gQ(WT("",null,null,null,[""],t=mQ(t),0,[0],t))}function WT(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,f=0,h=0,p=0,v=1,m=1,g=1,y=0,x="",S=i,_=s,C=r,T=x;m;)switch(p=y,y=Ja()){case 40:if(p!=108&&Gs(T,d-1)==58){PD(T+=Sr(zT(y),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:T+=zT(y);break;case 9:case 10:case 13:case 32:T+=Aye(p);break;case 92:T+=Iye(BT()-1,7);continue;case 47:switch(bu()){case 42:case 47:Y_($ye(Rye(Ja(),BT()),e,n),l);break;default:T+="/"}break;case 123*v:a[c++]=ou(T)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+u:g==-1&&(T=Sr(T,/\f/g,"")),h>0&&ou(T)-d&&Y_(h>32?OV(T+";",r,n,d-1):OV(Sr(T," ","")+";",r,n,d-2),l);break;case 59:T+=";";default:if(Y_(C=LV(T,e,n,c,u,i,a,x,S=[],_=[],d),s),y===123)if(u===0)WT(T,e,C,C,S,s,d,a,_);else switch(f===99&&Gs(T,3)===110?100:f){case 100:case 108:case 109:case 115:WT(t,C,C,r&&Y_(LV(t,C,C,0,0,i,a,x,i,S=[],d),_),i,_,d,a,r?S:_);break;default:WT(T,C,C,C,[""],_,0,a,_)}}c=u=h=0,v=g=1,x=T="",d=o;break;case 58:d=1+ou(T),h=p;default:if(v<1){if(y==123)--v;else if(y==125&&v++==0&&kye()==125)continue}switch(T+=Tk(y),y*v){case 38:g=u>0?1:(T+="\f",-1);break;case 44:a[c++]=(ou(T)-1)*g,g=1;break;case 64:bu()===45&&(T+=zT(Ja())),f=bu(),u=d=ou(x=T+=Nye(BT())),y++;break;case 45:p===45&&ou(T)==2&&(v=0)}}return s}function LV(t,e,n,r,i,s,o,a,l,c,u){for(var d=i-1,f=i===0?s:[""],h=hF(f),p=0,v=0,m=0;p<r;++p)for(var g=0,y=db(t,d+1,d=Sye(v=o[p])),x=t;g<h;++g)(x=hQ(v>0?f[g]+" "+y:Sr(y,/&\f/g,f[g])))&&(l[m++]=x);return Mk(t,e,n,i===0?dF:a,l,c,u)}function $ye(t,e,n){return Mk(t,e,n,dQ,Tk(Mye()),db(t,2,-2),0)}function OV(t,e,n,r){return Mk(t,e,n,fF,db(t,0,r),db(t,r+1,-1),r)}function q0(t,e){for(var n="",r=hF(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function Dye(t,e,n,r){switch(t.type){case wye:if(t.children.length)break;case bye:case fF:return t.return=t.return||t.value;case dQ:return"";case fQ:return t.return=t.value+"{"+q0(t.children,r)+"}";case dF:t.value=t.props.join(",")}return ou(n=q0(t.children,r))?t.return=t.value+"{"+n+"}":""}function Lye(t){var e=hF(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function Oye(t){return function(e){e.root||(e=e.return)&&t(e)}}var Fye=function(e,n,r){for(var i=0,s=0;i=s,s=bu(),i===38&&s===12&&(n[r]=1),!fb(s);)Ja();return $w(e,Sa)},Uye=function(e,n){var r=-1,i=44;do switch(fb(i)){case 0:i===38&&bu()===12&&(n[r]=1),e[r]+=Fye(Sa-1,n,r);break;case 2:e[r]+=zT(i);break;case 4:if(i===44){e[++r]=bu()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Tk(i)}while(i=Ja());return e},Bye=function(e,n){return gQ(Uye(mQ(e),n))},FV=new WeakMap,zye=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!FV.get(r))&&!i){FV.set(e,!0);for(var s=[],o=Bye(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},Wye=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function vQ(t,e){switch(Cye(t,e)){case 5103:return wr+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wr+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return wr+t+FE+t+co+t+t;case 6828:case 4268:return wr+t+co+t+t;case 6165:return wr+t+co+"flex-"+t+t;case 5187:return wr+t+Sr(t,/(\w+).+(:[^]+)/,wr+"box-$1$2"+co+"flex-$1$2")+t;case 5443:return wr+t+co+"flex-item-"+Sr(t,/flex-|-self/,"")+t;case 4675:return wr+t+co+"flex-line-pack"+Sr(t,/align-content|flex-|-self/,"")+t;case 5548:return wr+t+co+Sr(t,"shrink","negative")+t;case 5292:return wr+t+co+Sr(t,"basis","preferred-size")+t;case 6060:return wr+"box-"+Sr(t,"-grow","")+wr+t+co+Sr(t,"grow","positive")+t;case 4554:return wr+Sr(t,/([^-])(transform)/g,"$1"+wr+"$2")+t;case 6187:return Sr(Sr(Sr(t,/(zoom-|grab)/,wr+"$1"),/(image-set)/,wr+"$1"),t,"")+t;case 5495:case 3959:return Sr(t,/(image-set\([^]*)/,wr+"$1$`$1");case 4968:return Sr(Sr(t,/(.+:)(flex-)?(.*)/,wr+"box-pack:$3"+co+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wr+t+t;case 4095:case 3583:case 4068:case 2532:return Sr(t,/(.+)-inline(.+)/,wr+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ou(t)-1-e>6)switch(Gs(t,e+1)){case 109:if(Gs(t,e+4)!==45)break;case 102:return Sr(t,/(.+:)(.+)-([^]+)/,"$1"+wr+"$2-$3$1"+FE+(Gs(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~PD(t,"stretch")?vQ(Sr(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Gs(t,e+1)!==115)break;case 6444:switch(Gs(t,ou(t)-3-(~PD(t,"!important")&&10))){case 107:return Sr(t,":",":"+wr)+t;case 101:return Sr(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+wr+(Gs(t,14)===45?"inline-":"")+"box$3$1"+wr+"$2$3$1"+co+"$2box$3")+t}break;case 5936:switch(Gs(t,e+11)){case 114:return wr+t+co+Sr(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return wr+t+co+Sr(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return wr+t+co+Sr(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return wr+t+co+t+t}return t}var Vye=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case fF:e.return=vQ(e.value,e.length);break;case fQ:return q0([bx(e,{value:Sr(e.value,"@","@"+wr)})],i);case dF:if(e.length)return Eye(e.props,function(s){switch(Tye(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return q0([bx(e,{props:[Sr(s,/:(read-\w+)/,":"+FE+"$1")]})],i);case"::placeholder":return q0([bx(e,{props:[Sr(s,/:(plac\w+)/,":"+wr+"input-$1")]}),bx(e,{props:[Sr(s,/:(plac\w+)/,":"+FE+"$1")]}),bx(e,{props:[Sr(s,/:(plac\w+)/,co+"input-$1")]})],i)}return""})}},Gye=[Vye],Hye=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var m=v.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||Gye,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var m=v.getAttribute("data-emotion").split(" "),g=1;g<m.length;g++)s[m[g]]=!0;a.push(v)});var l,c=[zye,Wye];{var u,d=[Dye,Oye(function(v){u.insert(v)})],f=Lye(c.concat(i,d)),h=function(m){return q0(Pye(m),f)};l=function(m,g,y,x){u=y,h(m?m+"{"+g.styles+"}":g.styles),x&&(p.inserted[g.name]=!0)}}var p={key:n,sheet:new xye({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},yQ={exports:{}},Ir={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rs=typeof Symbol=="function"&&Symbol.for,pF=Rs?Symbol.for("react.element"):60103,mF=Rs?Symbol.for("react.portal"):60106,kk=Rs?Symbol.for("react.fragment"):60107,Ak=Rs?Symbol.for("react.strict_mode"):60108,Ik=Rs?Symbol.for("react.profiler"):60114,Rk=Rs?Symbol.for("react.provider"):60109,Nk=Rs?Symbol.for("react.context"):60110,gF=Rs?Symbol.for("react.async_mode"):60111,Pk=Rs?Symbol.for("react.concurrent_mode"):60111,$k=Rs?Symbol.for("react.forward_ref"):60112,Dk=Rs?Symbol.for("react.suspense"):60113,jye=Rs?Symbol.for("react.suspense_list"):60120,Lk=Rs?Symbol.for("react.memo"):60115,Ok=Rs?Symbol.for("react.lazy"):60116,Xye=Rs?Symbol.for("react.block"):60121,qye=Rs?Symbol.for("react.fundamental"):60117,Yye=Rs?Symbol.for("react.responder"):60118,Kye=Rs?Symbol.for("react.scope"):60119;function ol(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case pF:switch(t=t.type,t){case gF:case Pk:case kk:case Ik:case Ak:case Dk:return t;default:switch(t=t&&t.$$typeof,t){case Nk:case $k:case Ok:case Lk:case Rk:return t;default:return e}}case mF:return e}}}function xQ(t){return ol(t)===Pk}Ir.AsyncMode=gF;Ir.ConcurrentMode=Pk;Ir.ContextConsumer=Nk;Ir.ContextProvider=Rk;Ir.Element=pF;Ir.ForwardRef=$k;Ir.Fragment=kk;Ir.Lazy=Ok;Ir.Memo=Lk;Ir.Portal=mF;Ir.Profiler=Ik;Ir.StrictMode=Ak;Ir.Suspense=Dk;Ir.isAsyncMode=function(t){return xQ(t)||ol(t)===gF};Ir.isConcurrentMode=xQ;Ir.isContextConsumer=function(t){return ol(t)===Nk};Ir.isContextProvider=function(t){return ol(t)===Rk};Ir.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===pF};Ir.isForwardRef=function(t){return ol(t)===$k};Ir.isFragment=function(t){return ol(t)===kk};Ir.isLazy=function(t){return ol(t)===Ok};Ir.isMemo=function(t){return ol(t)===Lk};Ir.isPortal=function(t){return ol(t)===mF};Ir.isProfiler=function(t){return ol(t)===Ik};Ir.isStrictMode=function(t){return ol(t)===Ak};Ir.isSuspense=function(t){return ol(t)===Dk};Ir.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===kk||t===Pk||t===Ik||t===Ak||t===Dk||t===jye||typeof t=="object"&&t!==null&&(t.$$typeof===Ok||t.$$typeof===Lk||t.$$typeof===Rk||t.$$typeof===Nk||t.$$typeof===$k||t.$$typeof===qye||t.$$typeof===Yye||t.$$typeof===Kye||t.$$typeof===Xye)};Ir.typeOf=ol;yQ.exports=Ir;var Zye=yQ.exports,bQ=Zye,Jye={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Qye={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},wQ={};wQ[bQ.ForwardRef]=Jye;wQ[bQ.Memo]=Qye;var exe=!0;function txe(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var SQ=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||exe===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},_Q=function(e,n,r){SQ(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function nxe(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var rxe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ixe=/[A-Z]|^ms/g,sxe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,CQ=function(e){return e.charCodeAt(1)===45},UV=function(e){return e!=null&&typeof e!="boolean"},TN=uQ(function(t){return CQ(t)?t:t.replace(ixe,"-$&").toLowerCase()}),BV=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(sxe,function(r,i,s){return au={name:i,styles:s,next:au},i})}return rxe[e]!==1&&!CQ(e)&&typeof n=="number"&&n!==0?n+"px":n};function hb(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return au={name:n.name,styles:n.styles,next:au},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)au={name:r.name,styles:r.styles,next:au},r=r.next;var i=n.styles+";";return i}return oxe(t,e,n)}case"function":{if(t!==void 0){var s=au,o=n(t);return au=s,hb(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function oxe(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=hb(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":UV(o)&&(r+=TN(s)+":"+BV(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)UV(o[a])&&(r+=TN(s)+":"+BV(s,o[a])+";");else{var l=hb(t,e,o);switch(s){case"animation":case"animationName":{r+=TN(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var zV=/label:\s*([^\s;\n{]+)\s*(;|$)/g,au,vF=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";au=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=hb(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=hb(r,n,e[a]),i&&(s+=o[a]);zV.lastIndex=0;for(var l="",c;(c=zV.exec(s))!==null;)l+="-"+c[1];var u=nxe(s)+l;return{name:u,styles:s,next:au}},axe=function(e){return e()},TQ=uE.useInsertionEffect?uE.useInsertionEffect:!1,lxe=TQ||axe,WV=TQ||N.useLayoutEffect,EQ=N.createContext(typeof HTMLElement<"u"?Hye({key:"css"}):null);EQ.Provider;var MQ=function(e){return N.forwardRef(function(n,r){var i=N.useContext(EQ);return e(n,i,r)})},yF=N.createContext({}),cxe=MQ(function(t,e){var n=t.styles,r=vF([n],void 0,N.useContext(yF)),i=N.useRef();return WV(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),WV(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&_Q(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function uxe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return vF(e)}var xF=function(){var e=uxe.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},dxe=gye,fxe=function(e){return e!=="theme"},VV=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?dxe:fxe},GV=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},hxe=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return SQ(n,r,i),lxe(function(){return _Q(n,r,i)}),null},pxe=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=GV(e,n,r),l=a||VV(i),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var f=u.length,h=1;h<f;h++)d.push(u[h],u[0][h])}var p=MQ(function(v,m,g){var y=c&&v.as||i,x="",S=[],_=v;if(v.theme==null){_={};for(var C in v)_[C]=v[C];_.theme=N.useContext(yF)}typeof v.className=="string"?x=txe(m.registered,S,v.className):v.className!=null&&(x=v.className+" ");var T=vF(d.concat(S),m.registered,_);x+=m.key+"-"+T.name,o!==void 0&&(x+=" "+o);var A=c&&a===void 0?VV(y):l,k={};for(var M in v)c&&M==="as"||A(M)&&(k[M]=v[M]);return k.className=x,k.ref=g,N.createElement(N.Fragment,null,N.createElement(hxe,{cache:m,serialized:T,isStringTag:typeof y=="string"}),N.createElement(y,k))});return p.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=d,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(v,m){return t(v,ve({},n,m,{shouldForwardProp:GV(p,m,!0)})).apply(void 0,d)},p}},mxe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],DD=pxe.bind();mxe.forEach(function(t){DD[t]=DD(t)});var kQ={exports:{}},gxe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",vxe=gxe,yxe=vxe;function AQ(){}function IQ(){}IQ.resetWarningCache=AQ;var xxe=function(){function t(r,i,s,o,a,l){if(l!==yxe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:IQ,resetWarningCache:AQ};return n.PropTypes=n,n};kQ.exports=xxe();var bxe=kQ.exports;const ge=is(bxe);function wxe(t){return t==null||Object.keys(t).length===0}function Sxe(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(wxe(i)?n:i):e;return L.jsx(cxe,{styles:r})}function RQ(t,e){return DD(t,e)}const _xe=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))};function xd(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function NQ(t){if(!xd(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=NQ(t[n])}),e}function xa(t,e,n={clone:!0}){const r=n.clone?ve({},t):t;return xd(t)&&xd(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(xd(e[i])&&i in t&&xd(t[i])?r[i]=xa(t[i],e[i],n):n.clone?r[i]=xd(e[i])?NQ(e[i]):e[i]:r[i]=e[i])}),r}function kt(t){if(typeof t!="string")throw new Error(rh(7));return t.charAt(0).toUpperCase()+t.slice(1)}function LD(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function bF(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function Cxe(t,e){return()=>null}function x1(t,e){var n,r;return N.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function bo(t){return t&&t.ownerDocument||document}function ih(t){return bo(t).defaultView||window}function Txe(t,e){return()=>null}function pb(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const Exe=typeof window<"u"?N.useLayoutEffect:N.useEffect,$c=Exe;let HV=0;function Mxe(t){const[e,n]=N.useState(t),r=t||e;return N.useEffect(()=>{e==null&&(HV+=1,n(`mui-${HV}`))},[e]),r}const jV=uE.useId;function Fk(t){if(jV!==void 0){const e=jV();return t??e}return Mxe(t)}function kxe(t,e,n,r,i){return null}function Y0({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=N.useRef(t!==void 0),[s,o]=N.useState(e),a=i?t:s,l=N.useCallback(c=>{i||o(c)},[]);return[a,l]}function Sc(t){const e=N.useRef(t);return $c(()=>{e.current=t}),N.useRef((...n)=>(0,e.current)(...n)).current}function zi(...t){return N.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{pb(n,e)})},t)}let Uk=!0,OD=!1,XV;const Axe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Ixe(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&Axe[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function Rxe(t){t.metaKey||t.altKey||t.ctrlKey||(Uk=!0)}function EN(){Uk=!1}function Nxe(){this.visibilityState==="hidden"&&OD&&(Uk=!0)}function Pxe(t){t.addEventListener("keydown",Rxe,!0),t.addEventListener("mousedown",EN,!0),t.addEventListener("pointerdown",EN,!0),t.addEventListener("touchstart",EN,!0),t.addEventListener("visibilitychange",Nxe,!0)}function $xe(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return Uk||Ixe(e)}function wF(){const t=N.useCallback(i=>{i!=null&&Pxe(i.ownerDocument)},[]),e=N.useRef(!1);function n(){return e.current?(OD=!0,window.clearTimeout(XV),XV=window.setTimeout(()=>{OD=!1},100),e.current=!1,!0):!1}function r(i){return $xe(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function PQ(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}const Dxe=t=>{const e=N.useRef({});return N.useEffect(()=>{e.current=t}),e.current},Lxe=Dxe;function SF(t,e){const n=ve({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=ve({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=ve({},s),Object.keys(i).forEach(o=>{n[r][o]=SF(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function ir(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}const qV=t=>t,Oxe=()=>{let t=qV;return{configure(e){t=e},generate(e){return t(e)},reset(){t=qV}}},Fxe=Oxe(),_F=Fxe,Uxe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Zn(t,e,n="Mui"){const r=Uxe[e];return r?`${n}-${r}`:`${_F.generate(t)}-${e}`}function Xn(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Zn(t,i,n)}),r}const Bxe=["values","unit","step"],zxe=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>ve({},n,{[r.key]:r.val}),{})};function Wxe(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=Zt(t,Bxe),s=zxe(e),o=Object.keys(s);function a(f){return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n})`}function l(f){return`@media (max-width:${(typeof e[f]=="number"?e[f]:f)-r/100}${n})`}function c(f,h){const p=o.indexOf(h);return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:h)-r/100}${n})`}function u(f){return o.indexOf(f)+1<o.length?c(f,o[o.indexOf(f)+1]):a(f)}function d(f){const h=o.indexOf(f);return h===0?a(o[1]):h===o.length-1?l(o[h]):c(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return ve({keys:o,values:s,up:a,down:l,between:c,only:u,not:d,unit:n},i)}const Vxe={borderRadius:4},Gxe=Vxe;function b1(t,e){return e?xa(t,e,{clone:!1}):t}const CF={xs:0,sm:600,md:900,lg:1200,xl:1536},YV={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${CF[t]}px)`};function Bd(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||YV;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||YV;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||CF).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function Hxe(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function jxe(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function yv(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function UE(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=yv(t,n)||r,e&&(i=e(i,r,t)),i}function Vi(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=yv(l,r)||{};return Bd(o,a,d=>{let f=UE(c,i,d);return d===f&&typeof d=="string"&&(f=UE(c,i,`${e}${d==="default"?"":kt(d)}`,d)),n===!1?f:{[n]:f}})};return s.propTypes={},s.filterProps=[e],s}function Xxe(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const qxe={m:"margin",p:"padding"},Yxe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},KV={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Kxe=Xxe(t=>{if(t.length>2)if(KV[t])t=KV[t];else return[t];const[e,n]=t.split(""),r=qxe[e],i=Yxe[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),TF=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],EF=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...TF,...EF];function Dw(t,e,n,r){var i;const s=(i=yv(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function $Q(t){return Dw(t,"spacing",8)}function Lw(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function Zxe(t,e){return n=>t.reduce((r,i)=>(r[i]=Lw(e,n),r),{})}function Jxe(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=Kxe(n),s=Zxe(i,r),o=t[n];return Bd(t,o,s)}function DQ(t,e){const n=$Q(t.theme);return Object.keys(t).map(r=>Jxe(t,e,r,n)).reduce(b1,{})}function bi(t){return DQ(t,TF)}bi.propTypes={};bi.filterProps=TF;function wi(t){return DQ(t,EF)}wi.propTypes={};wi.filterProps=EF;function Qxe(t=8){if(t.mui)return t;const e=$Q({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function Bk(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?b1(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Cl(t){return typeof t!="number"?t:`${t}px solid`}function Yl(t,e){return Vi({prop:t,themeKey:"borders",transform:e})}const e1e=Yl("border",Cl),t1e=Yl("borderTop",Cl),n1e=Yl("borderRight",Cl),r1e=Yl("borderBottom",Cl),i1e=Yl("borderLeft",Cl),s1e=Yl("borderColor"),o1e=Yl("borderTopColor"),a1e=Yl("borderRightColor"),l1e=Yl("borderBottomColor"),c1e=Yl("borderLeftColor"),u1e=Yl("outline",Cl),d1e=Yl("outlineColor"),zk=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Dw(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Lw(e,r)});return Bd(t,t.borderRadius,n)}return null};zk.propTypes={};zk.filterProps=["borderRadius"];Bk(e1e,t1e,n1e,r1e,i1e,s1e,o1e,a1e,l1e,c1e,zk,u1e,d1e);const Wk=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Dw(t.theme,"spacing",8),n=r=>({gap:Lw(e,r)});return Bd(t,t.gap,n)}return null};Wk.propTypes={};Wk.filterProps=["gap"];const Vk=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Dw(t.theme,"spacing",8),n=r=>({columnGap:Lw(e,r)});return Bd(t,t.columnGap,n)}return null};Vk.propTypes={};Vk.filterProps=["columnGap"];const Gk=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Dw(t.theme,"spacing",8),n=r=>({rowGap:Lw(e,r)});return Bd(t,t.rowGap,n)}return null};Gk.propTypes={};Gk.filterProps=["rowGap"];const f1e=Vi({prop:"gridColumn"}),h1e=Vi({prop:"gridRow"}),p1e=Vi({prop:"gridAutoFlow"}),m1e=Vi({prop:"gridAutoColumns"}),g1e=Vi({prop:"gridAutoRows"}),v1e=Vi({prop:"gridTemplateColumns"}),y1e=Vi({prop:"gridTemplateRows"}),x1e=Vi({prop:"gridTemplateAreas"}),b1e=Vi({prop:"gridArea"});Bk(Wk,Vk,Gk,f1e,h1e,p1e,m1e,g1e,v1e,y1e,x1e,b1e);function K0(t,e){return e==="grey"?e:t}const w1e=Vi({prop:"color",themeKey:"palette",transform:K0}),S1e=Vi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:K0}),_1e=Vi({prop:"backgroundColor",themeKey:"palette",transform:K0});Bk(w1e,S1e,_1e);function Wa(t){return t<=1&&t!==0?`${t*100}%`:t}const C1e=Vi({prop:"width",transform:Wa}),MF=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||CF[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Wa(n)}};return Bd(t,t.maxWidth,e)}return null};MF.filterProps=["maxWidth"];const T1e=Vi({prop:"minWidth",transform:Wa}),E1e=Vi({prop:"height",transform:Wa}),M1e=Vi({prop:"maxHeight",transform:Wa}),k1e=Vi({prop:"minHeight",transform:Wa});Vi({prop:"size",cssProperty:"width",transform:Wa});Vi({prop:"size",cssProperty:"height",transform:Wa});const A1e=Vi({prop:"boxSizing"});Bk(C1e,MF,T1e,E1e,M1e,k1e,A1e);const I1e={border:{themeKey:"borders",transform:Cl},borderTop:{themeKey:"borders",transform:Cl},borderRight:{themeKey:"borders",transform:Cl},borderBottom:{themeKey:"borders",transform:Cl},borderLeft:{themeKey:"borders",transform:Cl},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Cl},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:zk},color:{themeKey:"palette",transform:K0},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:K0},backgroundColor:{themeKey:"palette",transform:K0},p:{style:wi},pt:{style:wi},pr:{style:wi},pb:{style:wi},pl:{style:wi},px:{style:wi},py:{style:wi},padding:{style:wi},paddingTop:{style:wi},paddingRight:{style:wi},paddingBottom:{style:wi},paddingLeft:{style:wi},paddingX:{style:wi},paddingY:{style:wi},paddingInline:{style:wi},paddingInlineStart:{style:wi},paddingInlineEnd:{style:wi},paddingBlock:{style:wi},paddingBlockStart:{style:wi},paddingBlockEnd:{style:wi},m:{style:bi},mt:{style:bi},mr:{style:bi},mb:{style:bi},ml:{style:bi},mx:{style:bi},my:{style:bi},margin:{style:bi},marginTop:{style:bi},marginRight:{style:bi},marginBottom:{style:bi},marginLeft:{style:bi},marginX:{style:bi},marginY:{style:bi},marginInline:{style:bi},marginInlineStart:{style:bi},marginInlineEnd:{style:bi},marginBlock:{style:bi},marginBlockStart:{style:bi},marginBlockEnd:{style:bi},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Wk},rowGap:{style:Gk},columnGap:{style:Vk},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Wa},maxWidth:{style:MF},minWidth:{transform:Wa},height:{transform:Wa},maxHeight:{transform:Wa},minHeight:{transform:Wa},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Hk=I1e;function R1e(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function N1e(t,e){return typeof t=="function"?t(e):t}function P1e(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const f=yv(i,c)||{};return d?d(o):Bd(o,r,p=>{let v=UE(f,u,p);return p===v&&typeof p=="string"&&(v=UE(f,u,`${n}${p==="default"?"":kt(p)}`,p)),l===!1?v:{[l]:v}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:Hk;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const u=Hxe(s.breakpoints),d=Object.keys(u);let f=u;return Object.keys(c).forEach(h=>{const p=N1e(c[h],s);if(p!=null)if(typeof p=="object")if(o[h])f=b1(f,t(h,p,s,o));else{const v=Bd({theme:s},p,m=>({[h]:m}));R1e(v,p)?f[h]=e({sx:p,theme:s}):f=b1(f,v)}else f=b1(f,t(h,p,s,o))}),jxe(d,f)}return Array.isArray(i)?i.map(a):a(i)}return e}const LQ=P1e();LQ.filterProps=["sx"];const jk=LQ,$1e=["breakpoints","palette","spacing","shape"];function Ow(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=Zt(t,$1e),a=Wxe(n),l=Qxe(i);let c=xa({breakpoints:a,direction:"ltr",components:{},palette:ve({mode:"light"},r),spacing:l,shape:ve({},Gxe,s)},o);return c=e.reduce((u,d)=>xa(u,d),c),c.unstable_sxConfig=ve({},Hk,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return jk({sx:d,theme:this})},c}function D1e(t){return Object.keys(t).length===0}function OQ(t=null){const e=N.useContext(yF);return!e||D1e(e)?t:e}const L1e=Ow();function Fw(t=L1e){return OQ(t)}function O1e({styles:t,themeId:e,defaultTheme:n={}}){const r=Fw(n),i=typeof t=="function"?t(e&&r[e]||r):t;return L.jsx(Sxe,{styles:i})}const F1e=["sx"],U1e=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:Hk;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function kF(t){const{sx:e}=t,n=Zt(t,F1e),{systemProps:r,otherProps:i}=U1e(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return xd(a)?ve({},r,a):r}:s=ve({},r,e),ve({},i,{sx:s})}function FQ(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=FQ(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function sn(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=FQ(t))&&(r&&(r+=" "),r+=e);return r}const B1e=["className","component"];function z1e(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=RQ("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(jk);return N.forwardRef(function(l,c){const u=Fw(n),d=kF(l),{className:f,component:h="div"}=d,p=Zt(d,B1e);return L.jsx(s,ve({as:h,ref:c,className:sn(f,i?i(r):r),theme:e&&u[e]||u},p))})}const W1e=["variant"];function ZV(t){return t.length===0}function UQ(t){const{variant:e}=t,n=Zt(t,W1e);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=ZV(r)?t[i]:kt(t[i]):r+=`${ZV(r)?i:kt(i)}${kt(t[i].toString())}`}),r}const V1e=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function G1e(t){return Object.keys(t).length===0}function H1e(t){return typeof t=="string"&&t.charCodeAt(0)>96}const j1e=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,BE=t=>{let e=0;const n={};return t&&t.forEach(r=>{let i="";typeof r.props=="function"?(i=`callback${e}`,e+=1):i=UQ(r.props),n[i]=r.style}),n},X1e=(t,e)=>{let n=[];return e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants),BE(n)},zE=(t,e,n)=>{const{ownerState:r={}}=t,i=[];let s=0;return n&&n.forEach(o=>{let a=!0;if(typeof o.props=="function"){const l=ve({},t,r);a=o.props(l)}else Object.keys(o.props).forEach(l=>{r[l]!==o.props[l]&&t[l]!==o.props[l]&&(a=!1)});a&&(typeof o.props=="function"?i.push(e[`callback${s}`]):i.push(e[UQ(o.props)])),typeof o.props=="function"&&(s+=1)}),i},q1e=(t,e,n,r)=>{var i;const s=n==null||(i=n.components)==null||(i=i[r])==null?void 0:i.variants;return zE(t,e,s)};function w1(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Y1e=Ow(),K1e=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function VT({defaultTheme:t,theme:e,themeId:n}){return G1e(e)?t:e[n]||e}function Z1e(t){return t?(e,n)=>n[t]:null}const JV=({styledArg:t,props:e,defaultTheme:n,themeId:r})=>{const i=t(ve({},e,{theme:VT(ve({},e,{defaultTheme:n,themeId:r}))}));let s;if(i&&i.variants&&(s=i.variants,delete i.variants),s){const o=zE(e,BE(s),s);return[i,...o]}return i};function BQ(t={}){const{themeId:e,defaultTheme:n=Y1e,rootShouldForwardProp:r=w1,slotShouldForwardProp:i=w1}=t,s=o=>jk(ve({},o,{theme:VT(ve({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{_xe(o,S=>S.filter(_=>!(_!=null&&_.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:d,overridesResolver:f=Z1e(K1e(c))}=a,h=Zt(a,V1e),p=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,v=d||!1;let m,g=w1;c==="Root"||c==="root"?g=r:c?g=i:H1e(o)&&(g=void 0);const y=RQ(o,ve({shouldForwardProp:g,label:m},h)),x=(S,..._)=>{const C=_?_.map(M=>{if(typeof M=="function"&&M.__emotion_real!==M)return R=>JV({styledArg:M,props:R,defaultTheme:n,themeId:e});if(xd(M)){let R=M,P;return M&&M.variants&&(P=M.variants,delete R.variants,R=O=>{let $=M;return zE(O,BE(P),P).forEach(z=>{$=xa($,z)}),$}),R}return M}):[];let T=S;if(xd(S)){let M;S&&S.variants&&(M=S.variants,delete T.variants,T=R=>{let P=S;return zE(R,BE(M),M).forEach($=>{P=xa(P,$)}),P})}else typeof S=="function"&&S.__emotion_real!==S&&(T=M=>JV({styledArg:S,props:M,defaultTheme:n,themeId:e}));l&&f&&C.push(M=>{const R=VT(ve({},M,{defaultTheme:n,themeId:e})),P=j1e(l,R);if(P){const O={};return Object.entries(P).forEach(([$,U])=>{O[$]=typeof U=="function"?U(ve({},M,{theme:R})):U}),f(M,O)}return null}),l&&!p&&C.push(M=>{const R=VT(ve({},M,{defaultTheme:n,themeId:e}));return q1e(M,X1e(l,R),R,l)}),v||C.push(s);const A=C.length-_.length;if(Array.isArray(S)&&A>0){const M=new Array(A).fill("");T=[...S,...M],T.raw=[...S.raw,...M]}const k=y(T,...C);return o.muiName&&(k.muiName=o.muiName),k};return y.withConfig&&(x.withConfig=y.withConfig),x}}const J1e=BQ(),zQ=J1e;function Q1e(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:SF(e.components[n].defaultProps,r)}function AF({props:t,name:e,defaultTheme:n,themeId:r}){let i=Fw(n);return r&&(i=i[r]||i),Q1e({theme:i,name:e,props:t})}function IF(t,e=0,n=1){return Math.min(Math.max(e,t),n)}function ebe(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function pm(t){if(t.type)return t;if(t.charAt(0)==="#")return pm(ebe(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(rh(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(rh(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}function Xk(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function tbe(t){t=pm(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,u=(c+n/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),Xk({type:a,values:l})}function QV(t){t=pm(t);let e=t.type==="hsl"||t.type==="hsla"?pm(tbe(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function nbe(t,e){const n=QV(t),r=QV(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Hr(t,e){return t=pm(t),e=IF(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Xk(t)}function rbe(t,e){if(t=pm(t),e=IF(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Xk(t)}function ibe(t,e){if(t=pm(t),e=IF(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Xk(t)}const sbe=["className","component","disableGutters","fixed","maxWidth","classes"],obe=Ow(),abe=zQ("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${kt(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),lbe=t=>AF({props:t,name:"MuiContainer",defaultTheme:obe}),cbe=(t,e)=>{const n=l=>Zn(e,l),{classes:r,fixed:i,disableGutters:s,maxWidth:o}=t,a={root:["root",o&&`maxWidth${kt(String(o))}`,i&&"fixed",s&&"disableGutters"]};return ir(a,n,r)};function ube(t={}){const{createStyledComponent:e=abe,useThemeProps:n=lbe,componentName:r="MuiContainer"}=t,i=e(({theme:o,ownerState:a})=>ve({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!a.disableGutters&&{paddingLeft:o.spacing(2),paddingRight:o.spacing(2),[o.breakpoints.up("sm")]:{paddingLeft:o.spacing(3),paddingRight:o.spacing(3)}}),({theme:o,ownerState:a})=>a.fixed&&Object.keys(o.breakpoints.values).reduce((l,c)=>{const u=c,d=o.breakpoints.values[u];return d!==0&&(l[o.breakpoints.up(u)]={maxWidth:`${d}${o.breakpoints.unit}`}),l},{}),({theme:o,ownerState:a})=>ve({},a.maxWidth==="xs"&&{[o.breakpoints.up("xs")]:{maxWidth:Math.max(o.breakpoints.values.xs,444)}},a.maxWidth&&a.maxWidth!=="xs"&&{[o.breakpoints.up(a.maxWidth)]:{maxWidth:`${o.breakpoints.values[a.maxWidth]}${o.breakpoints.unit}`}}));return N.forwardRef(function(a,l){const c=n(a),{className:u,component:d="div",disableGutters:f=!1,fixed:h=!1,maxWidth:p="lg"}=c,v=Zt(c,sbe),m=ve({},c,{component:d,disableGutters:f,fixed:h,maxWidth:p}),g=cbe(m,r);return L.jsx(i,ve({as:d,ownerState:m,className:sn(g.root,u),ref:l},v))})}const dbe=(t,e)=>t.filter(n=>e.includes(n)),Qv=(t,e,n)=>{const r=t.keys[0];Array.isArray(e)?e.forEach((i,s)=>{n((o,a)=>{s<=t.keys.length-1&&(s===0?Object.assign(o,a):o[t.up(t.keys[s])]=a)},i)}):e&&typeof e=="object"?(Object.keys(e).length>t.keys.length?t.keys:dbe(t.keys,Object.keys(e))).forEach(s=>{if(t.keys.indexOf(s)!==-1){const o=e[s];o!==void 0&&n((a,l)=>{r===s?Object.assign(a,l):a[t.up(s)]=l},o)}}):(typeof e=="number"||typeof e=="string")&&n((i,s)=>{Object.assign(i,s)},e)};function zd(t){return t?`Level${t}`:""}function Uw(t){return t.unstable_level>0&&t.container}function WQ(t){return function(n){return`var(--Grid-${n}Spacing${zd(t.unstable_level)})`}}function RF(t){return function(n){return t.unstable_level===0?`var(--Grid-${n}Spacing)`:`var(--Grid-${n}Spacing${zd(t.unstable_level-1)})`}}function NF(t){return t.unstable_level===0?"var(--Grid-columns)":`var(--Grid-columns${zd(t.unstable_level-1)})`}const fbe=({theme:t,ownerState:e})=>{const n=WQ(e),r={};return Qv(t.breakpoints,e.gridSize,(i,s)=>{let o={};s===!0&&(o={flexBasis:0,flexGrow:1,maxWidth:"100%"}),s==="auto"&&(o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof s=="number"&&(o={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${s} / ${NF(e)}${Uw(e)?` + ${n("column")}`:""})`}),i(r,o)}),r},hbe=({theme:t,ownerState:e})=>{const n={};return Qv(t.breakpoints,e.gridOffset,(r,i)=>{let s={};i==="auto"&&(s={marginLeft:"auto"}),typeof i=="number"&&(s={marginLeft:i===0?"0px":`calc(100% * ${i} / ${NF(e)})`}),r(n,s)}),n},pbe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n=Uw(e)?{[`--Grid-columns${zd(e.unstable_level)}`]:NF(e)}:{"--Grid-columns":12};return Qv(t.breakpoints,e.columns,(r,i)=>{r(n,{[`--Grid-columns${zd(e.unstable_level)}`]:i})}),n},mbe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n=RF(e),r=Uw(e)?{[`--Grid-rowSpacing${zd(e.unstable_level)}`]:n("row")}:{};return Qv(t.breakpoints,e.rowSpacing,(i,s)=>{var o;i(r,{[`--Grid-rowSpacing${zd(e.unstable_level)}`]:typeof s=="string"?s:(o=t.spacing)==null?void 0:o.call(t,s)})}),r},gbe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n=RF(e),r=Uw(e)?{[`--Grid-columnSpacing${zd(e.unstable_level)}`]:n("column")}:{};return Qv(t.breakpoints,e.columnSpacing,(i,s)=>{var o;i(r,{[`--Grid-columnSpacing${zd(e.unstable_level)}`]:typeof s=="string"?s:(o=t.spacing)==null?void 0:o.call(t,s)})}),r},vbe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return Qv(t.breakpoints,e.direction,(r,i)=>{r(n,{flexDirection:i})}),n},ybe=({ownerState:t})=>{const e=WQ(t),n=RF(t);return ve({minWidth:0,boxSizing:"border-box"},t.container&&ve({display:"flex",flexWrap:"wrap"},t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},{margin:`calc(${e("row")} / -2) calc(${e("column")} / -2)`},t.disableEqualOverflow&&{margin:`calc(${e("row")} * -1) 0px 0px calc(${e("column")} * -1)`}),(!t.container||Uw(t))&&ve({padding:`calc(${n("row")} / 2) calc(${n("column")} / 2)`},(t.disableEqualOverflow||t.parentDisableEqualOverflow)&&{padding:`${n("row")} 0px 0px ${n("column")}`}))},xbe=t=>{const e=[];return Object.entries(t).forEach(([n,r])=>{r!==!1&&r!==void 0&&e.push(`grid-${n}-${String(r)}`)}),e},bbe=(t,e="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(t))return[`spacing-${e}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const r=[];return Object.entries(t).forEach(([i,s])=>{n(s)&&r.push(`spacing-${i}-${String(s)}`)}),r}return[]},wbe=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([e,n])=>`direction-${e}-${n}`):[`direction-xs-${String(t)}`],Sbe=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],_be=Ow(),Cbe=zQ("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>e.root});function Tbe(t){return AF({props:t,name:"MuiGrid",defaultTheme:_be})}function Ebe(t={}){const{createStyledComponent:e=Cbe,useThemeProps:n=Tbe,componentName:r="MuiGrid"}=t,i=N.createContext(void 0),s=(l,c)=>{const{container:u,direction:d,spacing:f,wrap:h,gridSize:p}=l,v={root:["root",u&&"container",h!=="wrap"&&`wrap-xs-${String(h)}`,...wbe(d),...xbe(p),...u?bbe(f,c.breakpoints.keys[0]):[]]};return ir(v,m=>Zn(r,m),{})},o=e(pbe,gbe,mbe,fbe,vbe,ybe,hbe),a=N.forwardRef(function(c,u){var d,f,h,p,v,m,g,y;const x=Fw(),S=n(c),_=kF(S),C=N.useContext(i),{className:T,children:A,columns:k=12,container:M=!1,component:R="div",direction:P="row",wrap:O="wrap",spacing:$=0,rowSpacing:U=$,columnSpacing:z=$,disableEqualOverflow:X,unstable_level:D=0}=_,F=Zt(_,Sbe);let W=X;D&&X!==void 0&&(W=c.disableEqualOverflow);const V={},j={},J={};Object.entries(F).forEach(([le,H])=>{x.breakpoints.values[le]!==void 0?V[le]=H:x.breakpoints.values[le.replace("Offset","")]!==void 0?j[le.replace("Offset","")]=H:J[le]=H});const Q=(d=c.columns)!=null?d:D?void 0:k,te=(f=c.spacing)!=null?f:D?void 0:$,re=(h=(p=c.rowSpacing)!=null?p:c.spacing)!=null?h:D?void 0:U,se=(v=(m=c.columnSpacing)!=null?m:c.spacing)!=null?v:D?void 0:z,fe=ve({},_,{level:D,columns:Q,container:M,direction:P,wrap:O,spacing:te,rowSpacing:re,columnSpacing:se,gridSize:V,gridOffset:j,disableEqualOverflow:(g=(y=W)!=null?y:C)!=null?g:!1,parentDisableEqualOverflow:C}),ae=s(fe,x);let ye=L.jsx(o,ve({ref:u,as:R,ownerState:fe,className:sn(ae.root,T)},J,{children:N.Children.map(A,le=>{if(N.isValidElement(le)&&x1(le,["Grid"])){var H;return N.cloneElement(le,{unstable_level:(H=le.props.unstable_level)!=null?H:D+1})}return le})}));return W!==void 0&&W!==(C??!1)&&(ye=L.jsx(i.Provider,{value:W,children:ye})),ye});return a.muiName="Grid",a}function Mbe(t,e){return ve({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const kbe=["mode","contrastThreshold","tonalOffset"],e9={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ub.white,default:ub.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},MN={text:{primary:ub.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ub.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function t9(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=ibe(t.main,i):e==="dark"&&(t.dark=rbe(t.main,s)))}function Abe(t="light"){return t==="dark"?{main:Pg[200],light:Pg[50],dark:Pg[400]}:{main:Pg[700],light:Pg[400],dark:Pg[800]}}function Ibe(t="light"){return t==="dark"?{main:Ng[200],light:Ng[50],dark:Ng[400]}:{main:Ng[500],light:Ng[300],dark:Ng[700]}}function Rbe(t="light"){return t==="dark"?{main:Rg[500],light:Rg[300],dark:Rg[700]}:{main:Rg[700],light:Rg[400],dark:Rg[800]}}function Nbe(t="light"){return t==="dark"?{main:$g[400],light:$g[300],dark:$g[700]}:{main:$g[700],light:$g[500],dark:$g[900]}}function Pbe(t="light"){return t==="dark"?{main:Dg[400],light:Dg[300],dark:Dg[700]}:{main:Dg[800],light:Dg[500],dark:Dg[900]}}function $be(t="light"){return t==="dark"?{main:xx[400],light:xx[300],dark:xx[700]}:{main:"#ed6c02",light:xx[500],dark:xx[900]}}function Dbe(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=Zt(t,kbe),s=t.primary||Abe(e),o=t.secondary||Ibe(e),a=t.error||Rbe(e),l=t.info||Nbe(e),c=t.success||Pbe(e),u=t.warning||$be(e);function d(v){return nbe(v,MN.text.primary)>=n?MN.text.primary:e9.text.primary}const f=({color:v,name:m,mainShade:g=500,lightShade:y=300,darkShade:x=700})=>{if(v=ve({},v),!v.main&&v[g]&&(v.main=v[g]),!v.hasOwnProperty("main"))throw new Error(rh(11,m?` (${m})`:"",g));if(typeof v.main!="string")throw new Error(rh(12,m?` (${m})`:"",JSON.stringify(v.main)));return t9(v,"light",y,r),t9(v,"dark",x,r),v.contrastText||(v.contrastText=d(v.main)),v},h={dark:MN,light:e9};return xa(ve({common:ve({},ub),mode:e,primary:f({color:s,name:"primary"}),secondary:f({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:a,name:"error"}),warning:f({color:u,name:"warning"}),info:f({color:l,name:"info"}),success:f({color:c,name:"success"}),grey:pye,contrastThreshold:n,getContrastText:d,augmentColor:f,tonalOffset:r},h[e]),i)}const Lbe=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Obe(t){return Math.round(t*1e5)/1e5}const n9={textTransform:"uppercase"},r9='"Roboto", "Helvetica", "Arial", sans-serif';function Fbe(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=r9,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d}=n,f=Zt(n,Lbe),h=i/14,p=d||(g=>`${g/c*h}rem`),v=(g,y,x,S,_)=>ve({fontFamily:r,fontWeight:g,fontSize:p(y),lineHeight:x},r===r9?{letterSpacing:`${Obe(S/y)}em`}:{},_,u),m={h1:v(s,96,1.167,-1.5),h2:v(s,60,1.2,-.5),h3:v(o,48,1.167,0),h4:v(o,34,1.235,.25),h5:v(o,24,1.334,0),h6:v(a,20,1.6,.15),subtitle1:v(o,16,1.75,.15),subtitle2:v(a,14,1.57,.1),body1:v(o,16,1.5,.15),body2:v(o,14,1.43,.15),button:v(a,14,1.75,.4,n9),caption:v(o,12,1.66,.4),overline:v(o,12,2.66,1,n9),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return xa(ve({htmlFontSize:c,pxToRem:p,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},m),f,{clone:!1})}const Ube=.2,Bbe=.14,zbe=.12;function ii(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${Ube})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Bbe})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${zbe})`].join(",")}const Wbe=["none",ii(0,2,1,-1,0,1,1,0,0,1,3,0),ii(0,3,1,-2,0,2,2,0,0,1,5,0),ii(0,3,3,-2,0,3,4,0,0,1,8,0),ii(0,2,4,-1,0,4,5,0,0,1,10,0),ii(0,3,5,-1,0,5,8,0,0,1,14,0),ii(0,3,5,-1,0,6,10,0,0,1,18,0),ii(0,4,5,-2,0,7,10,1,0,2,16,1),ii(0,5,5,-3,0,8,10,1,0,3,14,2),ii(0,5,6,-3,0,9,12,1,0,3,16,2),ii(0,6,6,-3,0,10,14,1,0,4,18,3),ii(0,6,7,-4,0,11,15,1,0,4,20,3),ii(0,7,8,-4,0,12,17,2,0,5,22,4),ii(0,7,8,-4,0,13,19,2,0,5,24,4),ii(0,7,9,-4,0,14,21,2,0,5,26,4),ii(0,8,9,-5,0,15,22,2,0,6,28,5),ii(0,8,10,-5,0,16,24,2,0,6,30,5),ii(0,8,11,-5,0,17,26,2,0,6,32,5),ii(0,9,11,-5,0,18,28,2,0,7,34,6),ii(0,9,12,-6,0,19,29,2,0,7,36,6),ii(0,10,13,-6,0,20,31,3,0,8,38,7),ii(0,10,13,-6,0,21,33,3,0,8,40,7),ii(0,10,14,-6,0,22,35,3,0,8,42,7),ii(0,11,14,-7,0,23,36,3,0,9,44,8),ii(0,11,15,-7,0,24,38,3,0,9,46,8)],Vbe=Wbe,Gbe=["duration","easing","delay"],Hbe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},jbe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function i9(t){return`${Math.round(t)}ms`}function Xbe(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function qbe(t){const e=ve({},Hbe,t.easing),n=ve({},jbe,t.duration);return ve({getAutoHeightDuration:Xbe,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return Zt(s,Gbe),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof o=="string"?o:i9(o)} ${a} ${typeof l=="string"?l:i9(l)}`).join(",")}},t,{easing:e,duration:n})}const Ybe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Kbe=Ybe,Zbe=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function VQ(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=Zt(t,Zbe);if(t.vars)throw new Error(rh(18));const a=Dbe(r),l=Ow(t);let c=xa(l,{mixins:Mbe(l.breakpoints,n),palette:a,shadows:Vbe.slice(),typography:Fbe(a,s),transitions:qbe(i),zIndex:ve({},Kbe)});return c=xa(c,o),c=e.reduce((u,d)=>xa(u,d),c),c.unstable_sxConfig=ve({},Hk,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return jk({sx:d,theme:this})},c}const Jbe=VQ(),qk=Jbe;function PF(){const t=Fw(qk);return t[Pw]||t}function sr({props:t,name:e}){return AF({props:t,name:e,defaultTheme:qk,themeId:Pw})}const Kl=t=>w1(t)&&t!=="classes",Qbe=w1,ewe=BQ({themeId:Pw,defaultTheme:qk,rootShouldForwardProp:Kl}),Gt=ewe,twe=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)},s9=twe;function nwe(t){return Zn("MuiSvgIcon",t)}Xn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const rwe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],iwe=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${kt(e)}`,`fontSize${kt(n)}`]};return ir(i,nwe,r)},swe=Gt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${kt(n.color)}`],e[`fontSize${kt(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,o,a,l,c,u,d,f,h,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=t.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[e.fontSize],color:(d=(f=(t.vars||t).palette)==null||(f=f[e.color])==null?void 0:f.main)!=null?d:{action:(h=(t.vars||t).palette)==null||(h=h.action)==null?void 0:h.active,disabled:(p=(t.vars||t).palette)==null||(p=p.action)==null?void 0:p.disabled,inherit:void 0}[e.color]}}),GQ=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:f="0 0 24 24"}=r,h=Zt(r,rwe),p=N.isValidElement(i)&&i.type==="svg",v=ve({},r,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:p}),m={};u||(m.viewBox=f);const g=iwe(v);return L.jsxs(swe,ve({as:a,className:sn(g.root,s),focusable:"false",color:c,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},m,h,p&&i.props,{ownerState:v,children:[p?i.props.children:i,d?L.jsx("title",{children:d}):null]}))});GQ.muiName="SvgIcon";const o9=GQ;function Yk(t,e){function n(r,i){return L.jsx(o9,ve({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=o9.muiName,N.memo(N.forwardRef(n))}const owe={configure:t=>{_F.configure(t)}},awe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:kt,createChainedFunction:LD,createSvgIcon:Yk,debounce:bF,deprecatedPropType:Cxe,isMuiElement:x1,ownerDocument:bo,ownerWindow:ih,requirePropFactory:Txe,setRef:pb,unstable_ClassNameGenerator:owe,unstable_useEnhancedEffect:$c,unstable_useId:Fk,unsupportedProp:kxe,useControlled:Y0,useEventCallback:Sc,useForkRef:zi,useIsFocusVisible:wF},Symbol.toStringTag,{value:"Module"}));var Dr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $F=Symbol.for("react.element"),DF=Symbol.for("react.portal"),Kk=Symbol.for("react.fragment"),Zk=Symbol.for("react.strict_mode"),Jk=Symbol.for("react.profiler"),Qk=Symbol.for("react.provider"),eA=Symbol.for("react.context"),lwe=Symbol.for("react.server_context"),tA=Symbol.for("react.forward_ref"),nA=Symbol.for("react.suspense"),rA=Symbol.for("react.suspense_list"),iA=Symbol.for("react.memo"),sA=Symbol.for("react.lazy"),cwe=Symbol.for("react.offscreen"),HQ;HQ=Symbol.for("react.module.reference");function Zl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case $F:switch(t=t.type,t){case Kk:case Jk:case Zk:case nA:case rA:return t;default:switch(t=t&&t.$$typeof,t){case lwe:case eA:case tA:case sA:case iA:case Qk:return t;default:return e}}case DF:return e}}}Dr.ContextConsumer=eA;Dr.ContextProvider=Qk;Dr.Element=$F;Dr.ForwardRef=tA;Dr.Fragment=Kk;Dr.Lazy=sA;Dr.Memo=iA;Dr.Portal=DF;Dr.Profiler=Jk;Dr.StrictMode=Zk;Dr.Suspense=nA;Dr.SuspenseList=rA;Dr.isAsyncMode=function(){return!1};Dr.isConcurrentMode=function(){return!1};Dr.isContextConsumer=function(t){return Zl(t)===eA};Dr.isContextProvider=function(t){return Zl(t)===Qk};Dr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===$F};Dr.isForwardRef=function(t){return Zl(t)===tA};Dr.isFragment=function(t){return Zl(t)===Kk};Dr.isLazy=function(t){return Zl(t)===sA};Dr.isMemo=function(t){return Zl(t)===iA};Dr.isPortal=function(t){return Zl(t)===DF};Dr.isProfiler=function(t){return Zl(t)===Jk};Dr.isStrictMode=function(t){return Zl(t)===Zk};Dr.isSuspense=function(t){return Zl(t)===nA};Dr.isSuspenseList=function(t){return Zl(t)===rA};Dr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Kk||t===Jk||t===Zk||t===nA||t===rA||t===cwe||typeof t=="object"&&t!==null&&(t.$$typeof===sA||t.$$typeof===iA||t.$$typeof===Qk||t.$$typeof===eA||t.$$typeof===tA||t.$$typeof===HQ||t.getModuleId!==void 0)};Dr.typeOf=Zl;function FD(t,e){return FD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},FD(t,e)}function jQ(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,FD(t,e)}const a9={disabled:!1},WE=wc.createContext(null);var uwe=function(e){return e.scrollTop},t1="unmounted",vp="exited",yp="entering",p0="entered",UD="exiting",Yd=function(t){jQ(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=vp,s.appearStatus=yp):l=p0:r.unmountOnExit||r.mountOnEnter?l=t1:l=vp,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===t1?{status:vp}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==yp&&o!==p0&&(s=yp):(o===yp||o===p0)&&(s=UD)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===yp){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:q_.findDOMNode(this);o&&uwe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===vp&&this.setState({status:t1})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[q_.findDOMNode(this),a],c=l[0],u=l[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!i&&!o||a9.disabled){this.safeSetState({status:p0},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:yp},function(){s.props.onEntering(c,u),s.onTransitionEnd(f,function(){s.safeSetState({status:p0},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:q_.findDOMNode(this);if(!s||a9.disabled){this.safeSetState({status:vp},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:UD},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:vp},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:q_.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===t1)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Zt(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return wc.createElement(WE.Provider,{value:null},typeof o=="function"?o(i,a):wc.cloneElement(wc.Children.only(o),a))},e}(wc.Component);Yd.contextType=WE;Yd.propTypes={};function Lg(){}Yd.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Lg,onEntering:Lg,onEntered:Lg,onExit:Lg,onExiting:Lg,onExited:Lg};Yd.UNMOUNTED=t1;Yd.EXITED=vp;Yd.ENTERING=yp;Yd.ENTERED=p0;Yd.EXITING=UD;const XQ=Yd;function dwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LF(t,e){var n=function(s){return e&&N.isValidElement(s)?e(s):s},r=Object.create(null);return t&&N.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function fwe(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function Pp(t,e,n){return n[e]!=null?n[e]:t.props[e]}function hwe(t,e){return LF(t.children,function(n){return N.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Pp(n,"appear",t),enter:Pp(n,"enter",t),exit:Pp(n,"exit",t)})})}function pwe(t,e,n){var r=LF(t.children),i=fwe(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(N.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=N.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Pp(o,"exit",t),enter:Pp(o,"enter",t)}):!l&&a&&!u?i[s]=N.cloneElement(o,{in:!1}):l&&a&&N.isValidElement(c)&&(i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:Pp(o,"exit",t),enter:Pp(o,"enter",t)}))}}),i}var mwe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},gwe={component:"div",childFactory:function(e){return e}},OF=function(t){jQ(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(dwe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?hwe(i,a):pwe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=LF(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=ve({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=Zt(i,["component","childFactory"]),l=this.state.contextValue,c=mwe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?wc.createElement(WE.Provider,{value:l},c):wc.createElement(WE.Provider,{value:l},wc.createElement(s,a,c))},e}(wc.Component);OF.propTypes={};OF.defaultProps=gwe;const vwe=OF,qQ=t=>t.scrollTop;function VE(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function ywe(t){return Zn("MuiPaper",t)}Xn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const xwe=["className","component","elevation","square","variant"],bwe=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return ir(s,ywe,i)},wwe=Gt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return ve({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&ve({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Hr("#fff",s9(e.elevation))}, ${Hr("#fff",s9(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),Swe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=r,c=Zt(r,xwe),u=ve({},r,{component:s,elevation:o,square:a,variant:l}),d=bwe(u);return L.jsx(wwe,ve({as:s,ownerState:u,className:sn(d.root,i),ref:n},c))}),Bw=Swe;function _we(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=t,[u,d]=N.useState(!1),f=sn(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),h={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},p=sn(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&d(!0),N.useEffect(()=>{if(!a&&l!=null){const v=setTimeout(l,c);return()=>{clearTimeout(v)}}},[l,a,c]),L.jsx("span",{className:f,style:h,children:L.jsx("span",{className:p})})}const Cwe=Xn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),wl=Cwe,Twe=["center","classes","className"];let oA=t=>t,l9,c9,u9,d9;const BD=550,Ewe=80,Mwe=xF(l9||(l9=oA`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),kwe=xF(c9||(c9=oA`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Awe=xF(u9||(u9=oA`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Iwe=Gt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Rwe=Gt(_we,{name:"MuiTouchRipple",slot:"Ripple"})(d9||(d9=oA`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),wl.rippleVisible,Mwe,BD,({theme:t})=>t.transitions.easing.easeInOut,wl.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,wl.child,wl.childLeaving,kwe,BD,({theme:t})=>t.transitions.easing.easeInOut,wl.childPulsate,Awe,({theme:t})=>t.transitions.easing.easeInOut),Nwe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=Zt(r,Twe),[l,c]=N.useState([]),u=N.useRef(0),d=N.useRef(null);N.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const f=N.useRef(!1),h=N.useRef(0),p=N.useRef(null),v=N.useRef(null);N.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]);const m=N.useCallback(S=>{const{pulsate:_,rippleX:C,rippleY:T,rippleSize:A,cb:k}=S;c(M=>[...M,L.jsx(Rwe,{classes:{ripple:sn(s.ripple,wl.ripple),rippleVisible:sn(s.rippleVisible,wl.rippleVisible),ripplePulsate:sn(s.ripplePulsate,wl.ripplePulsate),child:sn(s.child,wl.child),childLeaving:sn(s.childLeaving,wl.childLeaving),childPulsate:sn(s.childPulsate,wl.childPulsate)},timeout:BD,pulsate:_,rippleX:C,rippleY:T,rippleSize:A},u.current)]),u.current+=1,d.current=k},[s]),g=N.useCallback((S={},_={},C=()=>{})=>{const{pulsate:T=!1,center:A=i||_.pulsate,fakeElement:k=!1}=_;if((S==null?void 0:S.type)==="mousedown"&&f.current){f.current=!1;return}(S==null?void 0:S.type)==="touchstart"&&(f.current=!0);const M=k?null:v.current,R=M?M.getBoundingClientRect():{width:0,height:0,left:0,top:0};let P,O,$;if(A||S===void 0||S.clientX===0&&S.clientY===0||!S.clientX&&!S.touches)P=Math.round(R.width/2),O=Math.round(R.height/2);else{const{clientX:U,clientY:z}=S.touches&&S.touches.length>0?S.touches[0]:S;P=Math.round(U-R.left),O=Math.round(z-R.top)}if(A)$=Math.sqrt((2*R.width**2+R.height**2)/3),$%2===0&&($+=1);else{const U=Math.max(Math.abs((M?M.clientWidth:0)-P),P)*2+2,z=Math.max(Math.abs((M?M.clientHeight:0)-O),O)*2+2;$=Math.sqrt(U**2+z**2)}S!=null&&S.touches?p.current===null&&(p.current=()=>{m({pulsate:T,rippleX:P,rippleY:O,rippleSize:$,cb:C})},h.current=setTimeout(()=>{p.current&&(p.current(),p.current=null)},Ewe)):m({pulsate:T,rippleX:P,rippleY:O,rippleSize:$,cb:C})},[i,m]),y=N.useCallback(()=>{g({},{pulsate:!0})},[g]),x=N.useCallback((S,_)=>{if(clearTimeout(h.current),(S==null?void 0:S.type)==="touchend"&&p.current){p.current(),p.current=null,h.current=setTimeout(()=>{x(S,_)});return}p.current=null,c(C=>C.length>0?C.slice(1):C),d.current=_},[]);return N.useImperativeHandle(n,()=>({pulsate:y,start:g,stop:x}),[y,g,x]),L.jsx(Iwe,ve({className:sn(wl.root,s.root,o),ref:v},a,{children:L.jsx(vwe,{component:null,exit:!0,children:l})}))}),Pwe=Nwe;function $we(t){return Zn("MuiButtonBase",t)}const Dwe=Xn("MuiButtonBase",["root","disabled","focusVisible"]),Lwe=Dwe,Owe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Fwe=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=ir({root:["root",e&&"disabled",n&&"focusVisible"]},$we,i);return n&&r&&(o.root+=` ${r}`),o},Uwe=Gt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Lwe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Bwe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:f=!1,LinkComponent:h="a",onBlur:p,onClick:v,onContextMenu:m,onDragLeave:g,onFocus:y,onFocusVisible:x,onKeyDown:S,onKeyUp:_,onMouseDown:C,onMouseLeave:T,onMouseUp:A,onTouchEnd:k,onTouchMove:M,onTouchStart:R,tabIndex:P=0,TouchRippleProps:O,touchRippleRef:$,type:U}=r,z=Zt(r,Owe),X=N.useRef(null),D=N.useRef(null),F=zi(D,$),{isFocusVisibleRef:W,onFocus:V,onBlur:j,ref:J}=wF(),[Q,te]=N.useState(!1);c&&Q&&te(!1),N.useImperativeHandle(i,()=>({focusVisible:()=>{te(!0),X.current.focus()}}),[]);const[re,se]=N.useState(!1);N.useEffect(()=>{se(!0)},[]);const fe=re&&!u&&!c;N.useEffect(()=>{Q&&f&&!u&&re&&D.current.pulsate()},[u,f,Q,re]);function ae(De,We,gt=d){return Sc(ct=>(We&&We(ct),!gt&&D.current&&D.current[De](ct),!0))}const ye=ae("start",C),le=ae("stop",m),H=ae("stop",g),Me=ae("stop",A),we=ae("stop",De=>{Q&&De.preventDefault(),T&&T(De)}),Ee=ae("start",R),me=ae("stop",k),qe=ae("stop",M),ke=ae("stop",De=>{j(De),W.current===!1&&te(!1),p&&p(De)},!1),ee=Sc(De=>{X.current||(X.current=De.currentTarget),V(De),W.current===!0&&(te(!0),x&&x(De)),y&&y(De)}),Y=()=>{const De=X.current;return l&&l!=="button"&&!(De.tagName==="A"&&De.href)},oe=N.useRef(!1),xe=Sc(De=>{f&&!oe.current&&Q&&D.current&&De.key===" "&&(oe.current=!0,D.current.stop(De,()=>{D.current.start(De)})),De.target===De.currentTarget&&Y()&&De.key===" "&&De.preventDefault(),S&&S(De),De.target===De.currentTarget&&Y()&&De.key==="Enter"&&!c&&(De.preventDefault(),v&&v(De))}),Se=Sc(De=>{f&&De.key===" "&&D.current&&Q&&!De.defaultPrevented&&(oe.current=!1,D.current.stop(De,()=>{D.current.pulsate(De)})),_&&_(De),v&&De.target===De.currentTarget&&Y()&&De.key===" "&&!De.defaultPrevented&&v(De)});let be=l;be==="button"&&(z.href||z.to)&&(be=h);const Re={};be==="button"?(Re.type=U===void 0?"button":U,Re.disabled=c):(!z.href&&!z.to&&(Re.role="button"),c&&(Re["aria-disabled"]=c));const Ke=zi(n,J,X),ze=ve({},r,{centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:f,tabIndex:P,focusVisible:Q}),Pe=Fwe(ze);return L.jsxs(Uwe,ve({as:be,className:sn(Pe.root,a),ownerState:ze,onBlur:ke,onClick:v,onContextMenu:le,onFocus:ee,onKeyDown:xe,onKeyUp:Se,onMouseDown:ye,onMouseLeave:we,onMouseUp:Me,onDragLeave:H,onTouchEnd:me,onTouchMove:qe,onTouchStart:Ee,ref:Ke,tabIndex:c?-1:P,type:U},Re,z,{children:[o,fe?L.jsx(Pwe,ve({ref:F,center:s},O)):null]}))}),mb=Bwe;function zwe(t){return Zn("MuiIconButton",t)}const Wwe=Xn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Vwe=Wwe,Gwe=["edge","children","className","color","disabled","disableFocusRipple","size"],Hwe=t=>{const{classes:e,disabled:n,color:r,edge:i,size:s}=t,o={root:["root",n&&"disabled",r!=="default"&&`color${kt(r)}`,i&&`edge${kt(i)}`,`size${kt(s)}`]};return ir(o,zwe,e)},jwe=Gt(mb,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${kt(n.color)}`],n.edge&&e[`edge${kt(n.edge)}`],e[`size${kt(n.size)}`]]}})(({theme:t,ownerState:e})=>ve({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Hr(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return ve({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&ve({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":ve({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Hr(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${Vwe.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),Xwe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium"}=r,d=Zt(r,Gwe),f=ve({},r,{edge:i,color:a,disabled:l,disableFocusRipple:c,size:u}),h=Hwe(f);return L.jsx(jwe,ve({className:sn(h.root,o),centerRipple:!0,focusRipple:!c,disabled:l,ref:n,ownerState:f},d,{children:s}))}),S1=Xwe,qwe=Yk(L.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function Ywe(t){return Zn("MuiTypography",t)}Xn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Kwe=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Zwe=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${kt(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return ir(a,Ywe,o)},Jwe=Gt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${kt(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>ve({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),f9={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Qwe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},e2e=t=>Qwe[t]||t,t2e=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiTypography"}),i=e2e(r.color),s=kF(ve({},r,{color:i})),{align:o="inherit",className:a,component:l,gutterBottom:c=!1,noWrap:u=!1,paragraph:d=!1,variant:f="body1",variantMapping:h=f9}=s,p=Zt(s,Kwe),v=ve({},s,{align:o,color:i,className:a,component:l,gutterBottom:c,noWrap:u,paragraph:d,variant:f,variantMapping:h}),m=l||(d?"p":h[f]||f9[f])||"span",g=Zwe(v);return L.jsx(Jwe,ve({as:m,ref:n,ownerState:v,className:sn(g.root,a)},p))}),En=t2e;function n2e(t){return Zn("MuiAppBar",t)}Xn("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const r2e=["className","color","enableColorOnDark","position"],i2e=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${kt(e)}`,`position${kt(n)}`]};return ir(i,n2e,r)},K_=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,s2e=Gt(Bw,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${kt(n.position)}`],e[`color${kt(n.color)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return ve({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},e.position==="fixed"&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},e.position==="absolute"&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="sticky"&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="static"&&{position:"static"},e.position==="relative"&&{position:"relative"},!t.vars&&ve({},e.color==="default"&&{backgroundColor:n,color:t.palette.getContrastText(n)},e.color&&e.color!=="default"&&e.color!=="inherit"&&e.color!=="transparent"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!e.enableColorOnDark&&{backgroundColor:null,color:null},e.color==="transparent"&&ve({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"})),t.vars&&ve({},e.color==="default"&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette.AppBar.defaultBg:K_(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":e.enableColorOnDark?t.vars.palette.text.primary:K_(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},e.color&&!e.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette[e.color].main:K_(t.vars.palette.AppBar.darkBg,t.vars.palette[e.color].main),"--AppBar-color":e.enableColorOnDark?t.vars.palette[e.color].contrastText:K_(t.vars.palette.AppBar.darkColor,t.vars.palette[e.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:e.color==="inherit"?"inherit":"var(--AppBar-color)"},e.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),o2e=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiAppBar"}),{className:i,color:s="primary",enableColorOnDark:o=!1,position:a="fixed"}=r,l=Zt(r,r2e),c=ve({},r,{color:s,position:a,enableColorOnDark:o}),u=i2e(c);return L.jsx(s2e,ve({square:!0,component:"header",ownerState:c,elevation:4,className:sn(u.root,i,a==="fixed"&&"mui-fixed"),ref:n},l))}),a2e=o2e;function GE(t){return typeof t=="string"}function l2e(t,e,n){return t===void 0||GE(t)?e:ve({},e,{ownerState:ve({},e.ownerState,n)})}const c2e={disableDefaultClasses:!1},u2e=N.createContext(c2e);function d2e(t){const{disableDefaultClasses:e}=N.useContext(u2e);return n=>e?"":t(n)}function YQ(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function f2e(t,e,n){return typeof t=="function"?t(e,n):t}function h9(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function h2e(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const h=sn(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),p=ve({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),v=ve({},n,i,r);return h.length>0&&(v.className=h),Object.keys(p).length>0&&(v.style=p),{props:v,internalRef:void 0}}const o=YQ(ve({},i,r)),a=h9(r),l=h9(i),c=e(o),u=sn(c==null?void 0:c.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d=ve({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),f=ve({},c,n,l,a);return u.length>0&&(f.className=u),Object.keys(d).length>0&&(f.style=d),{props:f,internalRef:c.ref}}const p2e=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function mm(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=Zt(t,p2e),a=s?{}:f2e(r,i),{props:l,internalRef:c}=h2e(ve({},o,{externalSlotProps:a})),u=zi(c,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return l2e(n,ve({},l,{ref:u}),i)}const m2e=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function g2e(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function v2e(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function y2e(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||v2e(t))}function x2e(t){const e=[],n=[];return Array.from(t.querySelectorAll(m2e)).forEach((r,i)=>{const s=g2e(r);s===-1||!y2e(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function b2e(){return!0}function w2e(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=x2e,isEnabled:o=b2e,open:a}=t,l=N.useRef(!1),c=N.useRef(null),u=N.useRef(null),d=N.useRef(null),f=N.useRef(null),h=N.useRef(!1),p=N.useRef(null),v=zi(e.ref,p),m=N.useRef(null);N.useEffect(()=>{!a||!p.current||(h.current=!n)},[n,a]),N.useEffect(()=>{if(!a||!p.current)return;const x=bo(p.current);return p.current.contains(x.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),h.current&&p.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[a]),N.useEffect(()=>{if(!a||!p.current)return;const x=bo(p.current),S=T=>{m.current=T,!(r||!o()||T.key!=="Tab")&&x.activeElement===p.current&&T.shiftKey&&(l.current=!0,u.current&&u.current.focus())},_=()=>{const T=p.current;if(T===null)return;if(!x.hasFocus()||!o()||l.current){l.current=!1;return}if(T.contains(x.activeElement)||r&&x.activeElement!==c.current&&x.activeElement!==u.current)return;if(x.activeElement!==f.current)f.current=null;else if(f.current!==null)return;if(!h.current)return;let A=[];if((x.activeElement===c.current||x.activeElement===u.current)&&(A=s(p.current)),A.length>0){var k,M;const R=!!((k=m.current)!=null&&k.shiftKey&&((M=m.current)==null?void 0:M.key)==="Tab"),P=A[0],O=A[A.length-1];typeof P!="string"&&typeof O!="string"&&(R?O.focus():P.focus())}else T.focus()};x.addEventListener("focusin",_),x.addEventListener("keydown",S,!0);const C=setInterval(()=>{x.activeElement&&x.activeElement.tagName==="BODY"&&_()},50);return()=>{clearInterval(C),x.removeEventListener("focusin",_),x.removeEventListener("keydown",S,!0)}},[n,r,i,o,a,s]);const g=x=>{d.current===null&&(d.current=x.relatedTarget),h.current=!0,f.current=x.target;const S=e.props.onFocus;S&&S(x)},y=x=>{d.current===null&&(d.current=x.relatedTarget),h.current=!0};return L.jsxs(N.Fragment,{children:[L.jsx("div",{tabIndex:a?0:-1,onFocus:y,ref:c,"data-testid":"sentinelStart"}),N.cloneElement(e,{ref:v,onFocus:g}),L.jsx("div",{tabIndex:a?0:-1,onFocus:y,ref:u,"data-testid":"sentinelEnd"})]})}var ba="top",Wl="bottom",Vl="right",wa="left",FF="auto",zw=[ba,Wl,Vl,wa],xv="start",gb="end",S2e="clippingParents",KQ="viewport",wx="popper",_2e="reference",p9=zw.reduce(function(t,e){return t.concat([e+"-"+xv,e+"-"+gb])},[]),ZQ=[].concat(zw,[FF]).reduce(function(t,e){return t.concat([e,e+"-"+xv,e+"-"+gb])},[]),C2e="beforeRead",T2e="read",E2e="afterRead",M2e="beforeMain",k2e="main",A2e="afterMain",I2e="beforeWrite",R2e="write",N2e="afterWrite",P2e=[C2e,T2e,E2e,M2e,k2e,A2e,I2e,R2e,N2e];function Du(t){return t?(t.nodeName||"").toLowerCase():null}function nl(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function gm(t){var e=nl(t).Element;return t instanceof e||t instanceof Element}function Ol(t){var e=nl(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function UF(t){if(typeof ShadowRoot>"u")return!1;var e=nl(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function $2e(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Ol(s)||!Du(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function D2e(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!Ol(i)||!Du(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const L2e={name:"applyStyles",enabled:!0,phase:"write",fn:$2e,effect:D2e,requires:["computeStyles"]};function wu(t){return t.split("-")[0]}var qp=Math.max,HE=Math.min,bv=Math.round;function zD(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function JQ(){return!/^((?!chrome|android).)*safari/i.test(zD())}function wv(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Ol(t)&&(i=t.offsetWidth>0&&bv(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&bv(r.height)/t.offsetHeight||1);var o=gm(t)?nl(t):window,a=o.visualViewport,l=!JQ()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/i,f=r.height/s;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function BF(t){var e=wv(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function QQ(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&UF(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Wd(t){return nl(t).getComputedStyle(t)}function O2e(t){return["table","td","th"].indexOf(Du(t))>=0}function Sh(t){return((gm(t)?t.ownerDocument:t.document)||window.document).documentElement}function aA(t){return Du(t)==="html"?t:t.assignedSlot||t.parentNode||(UF(t)?t.host:null)||Sh(t)}function m9(t){return!Ol(t)||Wd(t).position==="fixed"?null:t.offsetParent}function F2e(t){var e=/firefox/i.test(zD()),n=/Trident/i.test(zD());if(n&&Ol(t)){var r=Wd(t);if(r.position==="fixed")return null}var i=aA(t);for(UF(i)&&(i=i.host);Ol(i)&&["html","body"].indexOf(Du(i))<0;){var s=Wd(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Ww(t){for(var e=nl(t),n=m9(t);n&&O2e(n)&&Wd(n).position==="static";)n=m9(n);return n&&(Du(n)==="html"||Du(n)==="body"&&Wd(n).position==="static")?e:n||F2e(t)||e}function zF(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function _1(t,e,n){return qp(t,HE(e,n))}function U2e(t,e,n){var r=_1(t,e,n);return r>n?n:r}function eee(){return{top:0,right:0,bottom:0,left:0}}function tee(t){return Object.assign({},eee(),t)}function nee(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var B2e=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,tee(typeof e!="number"?e:nee(e,zw))};function z2e(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=wu(n.placement),l=zF(a),c=[wa,Vl].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=B2e(i.padding,n),f=BF(s),h=l==="y"?ba:wa,p=l==="y"?Wl:Vl,v=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],m=o[l]-n.rects.reference[l],g=Ww(s),y=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,x=v/2-m/2,S=d[h],_=y-f[u]-d[p],C=y/2-f[u]/2+x,T=_1(S,C,_),A=l;n.modifiersData[r]=(e={},e[A]=T,e.centerOffset=T-C,e)}}function W2e(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||QQ(e.elements.popper,i)&&(e.elements.arrow=i))}const V2e={name:"arrow",enabled:!0,phase:"main",fn:z2e,effect:W2e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sv(t){return t.split("-")[1]}var G2e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function H2e(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:bv(n*i)/i||0,y:bv(r*i)/i||0}}function g9(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=o.x,h=f===void 0?0:f,p=o.y,v=p===void 0?0:p,m=typeof u=="function"?u({x:h,y:v}):{x:h,y:v};h=m.x,v=m.y;var g=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),x=wa,S=ba,_=window;if(c){var C=Ww(n),T="clientHeight",A="clientWidth";if(C===nl(n)&&(C=Sh(n),Wd(C).position!=="static"&&a==="absolute"&&(T="scrollHeight",A="scrollWidth")),C=C,i===ba||(i===wa||i===Vl)&&s===gb){S=Wl;var k=d&&C===_&&_.visualViewport?_.visualViewport.height:C[T];v-=k-r.height,v*=l?1:-1}if(i===wa||(i===ba||i===Wl)&&s===gb){x=Vl;var M=d&&C===_&&_.visualViewport?_.visualViewport.width:C[A];h-=M-r.width,h*=l?1:-1}}var R=Object.assign({position:a},c&&G2e),P=u===!0?H2e({x:h,y:v},nl(n)):{x:h,y:v};if(h=P.x,v=P.y,l){var O;return Object.assign({},R,(O={},O[S]=y?"0":"",O[x]=g?"0":"",O.transform=(_.devicePixelRatio||1)<=1?"translate("+h+"px, "+v+"px)":"translate3d("+h+"px, "+v+"px, 0)",O))}return Object.assign({},R,(e={},e[S]=y?v+"px":"",e[x]=g?h+"px":"",e.transform="",e))}function j2e(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:wu(e.placement),variation:Sv(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,g9(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,g9(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const X2e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:j2e,data:{}};var Z_={passive:!0};function q2e(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=nl(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Z_)}),a&&l.addEventListener("resize",n.update,Z_),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Z_)}),a&&l.removeEventListener("resize",n.update,Z_)}}const Y2e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:q2e,data:{}};var K2e={left:"right",right:"left",bottom:"top",top:"bottom"};function GT(t){return t.replace(/left|right|bottom|top/g,function(e){return K2e[e]})}var Z2e={start:"end",end:"start"};function v9(t){return t.replace(/start|end/g,function(e){return Z2e[e]})}function WF(t){var e=nl(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function VF(t){return wv(Sh(t)).left+WF(t).scrollLeft}function J2e(t,e){var n=nl(t),r=Sh(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=JQ();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+VF(t),y:l}}function Q2e(t){var e,n=Sh(t),r=WF(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=qp(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=qp(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+VF(t),l=-r.scrollTop;return Wd(i||n).direction==="rtl"&&(a+=qp(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function GF(t){var e=Wd(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function ree(t){return["html","body","#document"].indexOf(Du(t))>=0?t.ownerDocument.body:Ol(t)&&GF(t)?t:ree(aA(t))}function C1(t,e){var n;e===void 0&&(e=[]);var r=ree(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=nl(r),o=i?[s].concat(s.visualViewport||[],GF(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(C1(aA(o)))}function WD(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function eSe(t,e){var n=wv(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function y9(t,e,n){return e===KQ?WD(J2e(t,n)):gm(e)?eSe(e,n):WD(Q2e(Sh(t)))}function tSe(t){var e=C1(aA(t)),n=["absolute","fixed"].indexOf(Wd(t).position)>=0,r=n&&Ol(t)?Ww(t):t;return gm(r)?e.filter(function(i){return gm(i)&&QQ(i,r)&&Du(i)!=="body"}):[]}function nSe(t,e,n,r){var i=e==="clippingParents"?tSe(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=y9(t,c,r);return l.top=qp(u.top,l.top),l.right=HE(u.right,l.right),l.bottom=HE(u.bottom,l.bottom),l.left=qp(u.left,l.left),l},y9(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function iee(t){var e=t.reference,n=t.element,r=t.placement,i=r?wu(r):null,s=r?Sv(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case ba:l={x:o,y:e.y-n.height};break;case Wl:l={x:o,y:e.y+e.height};break;case Vl:l={x:e.x+e.width,y:a};break;case wa:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?zF(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case xv:l[c]=l[c]-(e[u]/2-n[u]/2);break;case gb:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function vb(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?S2e:a,c=n.rootBoundary,u=c===void 0?KQ:c,d=n.elementContext,f=d===void 0?wx:d,h=n.altBoundary,p=h===void 0?!1:h,v=n.padding,m=v===void 0?0:v,g=tee(typeof m!="number"?m:nee(m,zw)),y=f===wx?_2e:wx,x=t.rects.popper,S=t.elements[p?y:f],_=nSe(gm(S)?S:S.contextElement||Sh(t.elements.popper),l,u,o),C=wv(t.elements.reference),T=iee({reference:C,element:x,strategy:"absolute",placement:i}),A=WD(Object.assign({},x,T)),k=f===wx?A:C,M={top:_.top-k.top+g.top,bottom:k.bottom-_.bottom+g.bottom,left:_.left-k.left+g.left,right:k.right-_.right+g.right},R=t.modifiersData.offset;if(f===wx&&R){var P=R[i];Object.keys(M).forEach(function(O){var $=[Vl,Wl].indexOf(O)>=0?1:-1,U=[ba,Wl].indexOf(O)>=0?"y":"x";M[O]+=P[U]*$})}return M}function rSe(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?ZQ:l,u=Sv(r),d=u?a?p9:p9.filter(function(p){return Sv(p)===u}):zw,f=d.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,v){return p[v]=vb(t,{placement:v,boundary:i,rootBoundary:s,padding:o})[wu(v)],p},{});return Object.keys(h).sort(function(p,v){return h[p]-h[v]})}function iSe(t){if(wu(t)===FF)return[];var e=GT(t);return[v9(t),e,v9(e)]}function sSe(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,v=n.allowedAutoPlacements,m=e.options.placement,g=wu(m),y=g===m,x=l||(y||!p?[GT(m)]:iSe(m)),S=[m].concat(x).reduce(function(Q,te){return Q.concat(wu(te)===FF?rSe(e,{placement:te,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:v}):te)},[]),_=e.rects.reference,C=e.rects.popper,T=new Map,A=!0,k=S[0],M=0;M<S.length;M++){var R=S[M],P=wu(R),O=Sv(R)===xv,$=[ba,Wl].indexOf(P)>=0,U=$?"width":"height",z=vb(e,{placement:R,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),X=$?O?Vl:wa:O?Wl:ba;_[U]>C[U]&&(X=GT(X));var D=GT(X),F=[];if(s&&F.push(z[P]<=0),a&&F.push(z[X]<=0,z[D]<=0),F.every(function(Q){return Q})){k=R,A=!1;break}T.set(R,F)}if(A)for(var W=p?3:1,V=function(te){var re=S.find(function(se){var fe=T.get(se);if(fe)return fe.slice(0,te).every(function(ae){return ae})});if(re)return k=re,"break"},j=W;j>0;j--){var J=V(j);if(J==="break")break}e.placement!==k&&(e.modifiersData[r]._skip=!0,e.placement=k,e.reset=!0)}}const oSe={name:"flip",enabled:!0,phase:"main",fn:sSe,requiresIfExists:["offset"],data:{_skip:!1}};function x9(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function b9(t){return[ba,Vl,Wl,wa].some(function(e){return t[e]>=0})}function aSe(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=vb(e,{elementContext:"reference"}),a=vb(e,{altBoundary:!0}),l=x9(o,r),c=x9(a,i,s),u=b9(l),d=b9(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const lSe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:aSe};function cSe(t,e,n){var r=wu(t),i=[wa,ba].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[wa,Vl].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function uSe(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=ZQ.reduce(function(u,d){return u[d]=cSe(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const dSe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:uSe};function fSe(t){var e=t.state,n=t.name;e.modifiersData[n]=iee({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const hSe={name:"popperOffsets",enabled:!0,phase:"read",fn:fSe,data:{}};function pSe(t){return t==="x"?"y":"x"}function mSe(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,v=p===void 0?0:p,m=vb(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),g=wu(e.placement),y=Sv(e.placement),x=!y,S=zF(g),_=pSe(S),C=e.modifiersData.popperOffsets,T=e.rects.reference,A=e.rects.popper,k=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,M=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),R=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(C){if(s){var O,$=S==="y"?ba:wa,U=S==="y"?Wl:Vl,z=S==="y"?"height":"width",X=C[S],D=X+m[$],F=X-m[U],W=h?-A[z]/2:0,V=y===xv?T[z]:A[z],j=y===xv?-A[z]:-T[z],J=e.elements.arrow,Q=h&&J?BF(J):{width:0,height:0},te=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:eee(),re=te[$],se=te[U],fe=_1(0,T[z],Q[z]),ae=x?T[z]/2-W-fe-re-M.mainAxis:V-fe-re-M.mainAxis,ye=x?-T[z]/2+W+fe+se+M.mainAxis:j+fe+se+M.mainAxis,le=e.elements.arrow&&Ww(e.elements.arrow),H=le?S==="y"?le.clientTop||0:le.clientLeft||0:0,Me=(O=R==null?void 0:R[S])!=null?O:0,we=X+ae-Me-H,Ee=X+ye-Me,me=_1(h?HE(D,we):D,X,h?qp(F,Ee):F);C[S]=me,P[S]=me-X}if(a){var qe,ke=S==="x"?ba:wa,ee=S==="x"?Wl:Vl,Y=C[_],oe=_==="y"?"height":"width",xe=Y+m[ke],Se=Y-m[ee],be=[ba,wa].indexOf(g)!==-1,Re=(qe=R==null?void 0:R[_])!=null?qe:0,Ke=be?xe:Y-T[oe]-A[oe]-Re+M.altAxis,ze=be?Y+T[oe]+A[oe]-Re-M.altAxis:Se,Pe=h&&be?U2e(Ke,Y,ze):_1(h?Ke:xe,Y,h?ze:Se);C[_]=Pe,P[_]=Pe-Y}e.modifiersData[r]=P}}const gSe={name:"preventOverflow",enabled:!0,phase:"main",fn:mSe,requiresIfExists:["offset"]};function vSe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ySe(t){return t===nl(t)||!Ol(t)?WF(t):vSe(t)}function xSe(t){var e=t.getBoundingClientRect(),n=bv(e.width)/t.offsetWidth||1,r=bv(e.height)/t.offsetHeight||1;return n!==1||r!==1}function bSe(t,e,n){n===void 0&&(n=!1);var r=Ol(e),i=Ol(e)&&xSe(e),s=Sh(e),o=wv(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Du(e)!=="body"||GF(s))&&(a=ySe(e)),Ol(e)?(l=wv(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=VF(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function wSe(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function SSe(t){var e=wSe(t);return P2e.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function _Se(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function CSe(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var w9={placement:"bottom",modifiers:[],strategy:"absolute"};function S9(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function TSe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?w9:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},w9,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(g){var y=typeof g=="function"?g(u.options):g;v(),u.options=Object.assign({},s,u.options,y),u.scrollParents={reference:gm(a)?C1(a):a.contextElement?C1(a.contextElement):[],popper:C1(l)};var x=SSe(CSe([].concat(r,u.options.modifiers)));return u.orderedModifiers=x.filter(function(S){return S.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var g=u.elements,y=g.reference,x=g.popper;if(S9(y,x)){u.rects={reference:bSe(y,Ww(x),u.options.strategy==="fixed"),popper:BF(x)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(M){return u.modifiersData[M.name]=Object.assign({},M.data)});for(var S=0;S<u.orderedModifiers.length;S++){if(u.reset===!0){u.reset=!1,S=-1;continue}var _=u.orderedModifiers[S],C=_.fn,T=_.options,A=T===void 0?{}:T,k=_.name;typeof C=="function"&&(u=C({state:u,options:A,name:k,instance:h})||u)}}}},update:_Se(function(){return new Promise(function(m){h.forceUpdate(),m(u)})}),destroy:function(){v(),f=!0}};if(!S9(a,l))return h;h.setOptions(c).then(function(m){!f&&c.onFirstUpdate&&c.onFirstUpdate(m)});function p(){u.orderedModifiers.forEach(function(m){var g=m.name,y=m.options,x=y===void 0?{}:y,S=m.effect;if(typeof S=="function"){var _=S({state:u,name:g,instance:h,options:x}),C=function(){};d.push(_||C)}})}function v(){d.forEach(function(m){return m()}),d=[]}return h}}var ESe=[Y2e,hSe,X2e,L2e,dSe,oSe,gSe,V2e,lSe],MSe=TSe({defaultModifiers:ESe});function kSe(t){return typeof t=="function"?t():t}const see=N.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=N.useState(null),l=zi(N.isValidElement(r)?r.ref:null,n);if($c(()=>{s||a(kSe(i)||document.body)},[i,s]),$c(()=>{if(o&&!s)return pb(n,o),()=>{pb(n,null)}},[n,o,s]),s){if(N.isValidElement(r)){const c={ref:l};return N.cloneElement(r,c)}return L.jsx(N.Fragment,{children:r})}return L.jsx(N.Fragment,{children:o&&Iw.createPortal(r,o)})});function ASe(t){return Zn("MuiPopper",t)}Xn("MuiPopper",["root"]);const ISe=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],RSe=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function NSe(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function VD(t){return typeof t=="function"?t():t}function PSe(t){return t.nodeType!==void 0}const $Se=()=>ir({root:["root"]},d2e(ASe)),DSe={},LSe=N.forwardRef(function(e,n){var r;const{anchorEl:i,children:s,direction:o,disablePortal:a,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:f,slotProps:h={},slots:p={},TransitionProps:v}=e,m=Zt(e,ISe),g=N.useRef(null),y=zi(g,n),x=N.useRef(null),S=zi(x,f),_=N.useRef(S);$c(()=>{_.current=S},[S]),N.useImperativeHandle(f,()=>x.current,[]);const C=NSe(u,o),[T,A]=N.useState(C),[k,M]=N.useState(VD(i));N.useEffect(()=>{x.current&&x.current.forceUpdate()}),N.useEffect(()=>{i&&M(VD(i))},[i]),$c(()=>{if(!k||!c)return;const U=D=>{A(D.placement)};let z=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:D})=>{U(D)}}];l!=null&&(z=z.concat(l)),d&&d.modifiers!=null&&(z=z.concat(d.modifiers));const X=MSe(k,g.current,ve({placement:C},d,{modifiers:z}));return _.current(X),()=>{X.destroy(),_.current(null)}},[k,a,l,c,d,C]);const R={placement:T};v!==null&&(R.TransitionProps=v);const P=$Se(),O=(r=p.root)!=null?r:"div",$=mm({elementType:O,externalSlotProps:h.root,externalForwardedProps:m,additionalProps:{role:"tooltip",ref:y},ownerState:e,className:P.root});return L.jsx(O,ve({},$,{children:typeof s=="function"?s(R):s}))}),OSe=N.forwardRef(function(e,n){const{anchorEl:r,children:i,container:s,direction:o="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:f=DSe,popperRef:h,style:p,transition:v=!1,slotProps:m={},slots:g={}}=e,y=Zt(e,RSe),[x,S]=N.useState(!0),_=()=>{S(!1)},C=()=>{S(!0)};if(!l&&!u&&(!v||x))return null;let T;if(s)T=s;else if(r){const M=VD(r);T=M&&PSe(M)?bo(M).body:bo(null).body}const A=!u&&l&&(!v||x)?"none":void 0,k=v?{in:u,onEnter:_,onExited:C}:void 0;return L.jsx(see,{disablePortal:a,container:T,children:L.jsx(LSe,ve({anchorEl:r,direction:o,disablePortal:a,modifiers:c,ref:n,open:v?!x:u,placement:d,popperOptions:f,popperRef:h,slotProps:m,slots:g},y,{style:ve({position:"fixed",top:0,left:0,display:A},p),TransitionProps:k,children:i}))})});function FSe(t){const e=bo(t);return e.body===t?ih(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function T1(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function _9(t){return parseInt(ih(t).getComputedStyle(t).paddingRight,10)||0}function USe(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function C9(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,o=>{const a=s.indexOf(o)===-1,l=!USe(o);a&&l&&T1(o,i)})}function kN(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function BSe(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(FSe(r)){const o=PQ(bo(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${_9(r)+o}px`;const a=bo(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${_9(l)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=bo(r).body;else{const o=r.parentElement,a=ih(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function zSe(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class WSe{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&T1(e.modalRef,!1);const i=zSe(n);C9(n,e.mount,e.modalRef,i,!0);const s=kN(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=kN(this.containers,s=>s.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=BSe(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=kN(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&T1(e.modalRef,n),C9(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&T1(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function VSe(t){return typeof t=="function"?t():t}function GSe(t){return t?t.props.hasOwnProperty("in"):!1}const HSe=new WSe;function jSe(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=HSe,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:d}=t,f=N.useRef({}),h=N.useRef(null),p=N.useRef(null),v=zi(p,d),[m,g]=N.useState(!u),y=GSe(l);let x=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(x=!1);const S=()=>bo(h.current),_=()=>(f.current.modalRef=p.current,f.current.mount=h.current,f.current),C=()=>{i.mount(_(),{disableScrollLock:r}),p.current&&(p.current.scrollTop=0)},T=Sc(()=>{const z=VSe(e)||S().body;i.add(_(),z),p.current&&C()}),A=N.useCallback(()=>i.isTopModal(_()),[i]),k=Sc(z=>{h.current=z,z&&(u&&A()?C():p.current&&T1(p.current,x))}),M=N.useCallback(()=>{i.remove(_(),x)},[x,i]);N.useEffect(()=>()=>{M()},[M]),N.useEffect(()=>{u?T():(!y||!s)&&M()},[u,M,y,s,T]);const R=z=>X=>{var D;(D=z.onKeyDown)==null||D.call(z,X),!(X.key!=="Escape"||X.which===229||!A())&&(n||(X.stopPropagation(),c&&c(X,"escapeKeyDown")))},P=z=>X=>{var D;(D=z.onClick)==null||D.call(z,X),X.target===X.currentTarget&&c&&c(X,"backdropClick")};return{getRootProps:(z={})=>{const X=YQ(t);delete X.onTransitionEnter,delete X.onTransitionExited;const D=ve({},X,z);return ve({role:"presentation"},D,{onKeyDown:R(D),ref:v})},getBackdropProps:(z={})=>{const X=z;return ve({"aria-hidden":!0},X,{onClick:P(X),open:u})},getTransitionProps:()=>{const z=()=>{g(!1),o&&o()},X=()=>{g(!0),a&&a(),s&&M()};return{onEnter:LD(z,l==null?void 0:l.props.onEnter),onExited:LD(X,l==null?void 0:l.props.onExited)}},rootRef:v,portalRef:k,isTopModal:A,exited:m,hasTransition:y}}const XSe=["onChange","maxRows","minRows","style","value"];function J_(t){return parseInt(t,10)||0}const qSe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function T9(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflow}const YSe=N.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a}=e,l=Zt(e,XSe),{current:c}=N.useRef(a!=null),u=N.useRef(null),d=zi(n,u),f=N.useRef(null),h=N.useRef(0),[p,v]=N.useState({outerHeightStyle:0}),m=N.useCallback(()=>{const S=u.current,C=ih(S).getComputedStyle(S);if(C.width==="0px")return{outerHeightStyle:0};const T=f.current;T.style.width=C.width,T.value=S.value||e.placeholder||"x",T.value.slice(-1)===`
`&&(T.value+=" ");const A=C.boxSizing,k=J_(C.paddingBottom)+J_(C.paddingTop),M=J_(C.borderBottomWidth)+J_(C.borderTopWidth),R=T.scrollHeight;T.value="x";const P=T.scrollHeight;let O=R;s&&(O=Math.max(Number(s)*P,O)),i&&(O=Math.min(Number(i)*P,O)),O=Math.max(O,P);const $=O+(A==="border-box"?k+M:0),U=Math.abs(O-R)<=1;return{outerHeightStyle:$,overflow:U}},[i,s,e.placeholder]),g=(S,_)=>{const{outerHeightStyle:C,overflow:T}=_;return h.current<20&&(C>0&&Math.abs((S.outerHeightStyle||0)-C)>1||S.overflow!==T)?(h.current+=1,{overflow:T,outerHeightStyle:C}):S},y=N.useCallback(()=>{const S=m();T9(S)||v(_=>g(_,S))},[m]);$c(()=>{const S=()=>{const R=m();T9(R)||Iw.flushSync(()=>{v(P=>g(P,R))})},_=()=>{h.current=0,S()};let C;const T=bF(_),A=u.current,k=ih(A);k.addEventListener("resize",T);let M;return typeof ResizeObserver<"u"&&(M=new ResizeObserver(_),M.observe(A)),()=>{T.clear(),cancelAnimationFrame(C),k.removeEventListener("resize",T),M&&M.disconnect()}},[m]),$c(()=>{y()}),N.useEffect(()=>{h.current=0},[a]);const x=S=>{h.current=0,c||y(),r&&r(S)};return L.jsxs(N.Fragment,{children:[L.jsx("textarea",ve({value:a,onChange:x,ref:d,rows:s,style:ve({height:p.outerHeightStyle,overflow:p.overflow?"hidden":void 0},o)},l)),L.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:ve({},qSe.shadow,o,{paddingTop:0,paddingBottom:0})})]})});function E9(t){return typeof t.normalize<"u"?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):t}function KSe(t={}){const{ignoreAccents:e=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:s,trim:o=!1}=t;return(a,{inputValue:l,getOptionLabel:c})=>{let u=o?l.trim():l;n&&(u=u.toLowerCase()),e&&(u=E9(u));const d=u?a.filter(f=>{let h=(s||c)(f);return n&&(h=h.toLowerCase()),e&&(h=E9(h)),i==="start"?h.indexOf(u)===0:h.indexOf(u)>-1}):a;return typeof r=="number"?d.slice(0,r):d}}function AN(t,e){for(let n=0;n<t.length;n+=1)if(e(t[n]))return n;return-1}const ZSe=KSe(),M9=5,JSe=t=>{var e;return t.current!==null&&((e=t.current.parentElement)==null?void 0:e.contains(document.activeElement))};function QSe(t){const{unstable_isActiveElementInListbox:e=JSe,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:i=!1,autoSelect:s=!1,blurOnSelect:o=!1,clearOnBlur:a=!t.freeSolo,clearOnEscape:l=!1,componentName:c="useAutocomplete",defaultValue:u=t.multiple?[]:null,disableClearable:d=!1,disableCloseOnSelect:f=!1,disabled:h,disabledItemsFocusable:p=!1,disableListWrap:v=!1,filterOptions:m=ZSe,filterSelectedOptions:g=!1,freeSolo:y=!1,getOptionDisabled:x,getOptionKey:S,getOptionLabel:_=K=>{var ne;return(ne=K.label)!=null?ne:K},groupBy:C,handleHomeEndKeys:T=!t.freeSolo,id:A,includeInputInList:k=!1,inputValue:M,isOptionEqualToValue:R=(K,ne)=>K===ne,multiple:P=!1,onChange:O,onClose:$,onHighlightChange:U,onInputChange:z,onOpen:X,open:D,openOnFocus:F=!1,options:W,readOnly:V=!1,selectOnFocus:j=!t.freeSolo,value:J}=t,Q=Fk(A);let te=_;te=K=>{const ne=_(K);return typeof ne!="string"?String(ne):ne};const re=N.useRef(!1),se=N.useRef(!0),fe=N.useRef(null),ae=N.useRef(null),[ye,le]=N.useState(null),[H,Me]=N.useState(-1),we=i?0:-1,Ee=N.useRef(we),[me,qe]=Y0({controlled:J,default:u,name:c}),[ke,ee]=Y0({controlled:M,default:"",name:c,state:"inputValue"}),[Y,oe]=N.useState(!1),xe=N.useCallback((K,ne)=>{if(!(P?me.length<ne.length:ne!==null)&&!a)return;let ie;if(P)ie="";else if(ne==null)ie="";else{const ce=te(ne);ie=typeof ce=="string"?ce:""}ke!==ie&&(ee(ie),z&&z(K,ie,"reset"))},[te,ke,P,z,ee,a,me]),[Se,be]=Y0({controlled:D,default:!1,name:c,state:"open"}),[Re,Ke]=N.useState(!0),ze=!P&&me!=null&&ke===te(me),Pe=Se&&!V,De=Pe?m(W.filter(K=>!(g&&(P?me:[me]).some(ne=>ne!==null&&R(K,ne)))),{inputValue:ze&&Re?"":ke,getOptionLabel:te}):[],We=Lxe({filteredOptions:De,value:me,inputValue:ke});N.useEffect(()=>{const K=me!==We.value;Y&&!K||y&&!K||xe(null,me)},[me,xe,Y,We.value,y]);const gt=Se&&De.length>0&&!V,ct=Sc(K=>{K===-1?fe.current.focus():ye.querySelector(`[data-tag-index="${K}"]`).focus()});N.useEffect(()=>{P&&H>me.length-1&&(Me(-1),ct(-1))},[me,P,H,ct]);function Ye(K,ne){if(!ae.current||K<0||K>=De.length)return-1;let G=K;for(;;){const ie=ae.current.querySelector(`[data-option-index="${G}"]`),ce=p?!1:!ie||ie.disabled||ie.getAttribute("aria-disabled")==="true";if(ie&&ie.hasAttribute("tabindex")&&!ce)return G;if(ne==="next"?G=(G+1)%De.length:G=(G-1+De.length)%De.length,G===K)return-1}}const Xe=Sc(({event:K,index:ne,reason:G="auto"})=>{if(Ee.current=ne,ne===-1?fe.current.removeAttribute("aria-activedescendant"):fe.current.setAttribute("aria-activedescendant",`${Q}-option-${ne}`),U&&U(K,ne===-1?null:De[ne],G),!ae.current)return;const ie=ae.current.querySelector(`[role="option"].${n}-focused`);ie&&(ie.classList.remove(`${n}-focused`),ie.classList.remove(`${n}-focusVisible`));let ce=ae.current;if(ae.current.getAttribute("role")!=="listbox"&&(ce=ae.current.parentElement.querySelector('[role="listbox"]')),!ce)return;if(ne===-1){ce.scrollTop=0;return}const Te=ae.current.querySelector(`[data-option-index="${ne}"]`);if(Te&&(Te.classList.add(`${n}-focused`),G==="keyboard"&&Te.classList.add(`${n}-focusVisible`),ce.scrollHeight>ce.clientHeight&&G!=="mouse"&&G!=="touch")){const de=Te,Ue=ce.clientHeight+ce.scrollTop,Je=de.offsetTop+de.offsetHeight;Je>Ue?ce.scrollTop=Je-ce.clientHeight:de.offsetTop-de.offsetHeight*(C?1.3:0)<ce.scrollTop&&(ce.scrollTop=de.offsetTop-de.offsetHeight*(C?1.3:0))}}),Le=Sc(({event:K,diff:ne,direction:G="next",reason:ie="auto"})=>{if(!Pe)return;const Te=Ye((()=>{const de=De.length-1;if(ne==="reset")return we;if(ne==="start")return 0;if(ne==="end")return de;const Ue=Ee.current+ne;return Ue<0?Ue===-1&&k?-1:v&&Ee.current!==-1||Math.abs(ne)>1?0:de:Ue>de?Ue===de+1&&k?-1:v||Math.abs(ne)>1?de:0:Ue})(),G);if(Xe({index:Te,reason:ie,event:K}),r&&ne!=="reset")if(Te===-1)fe.current.value=ke;else{const de=te(De[Te]);fe.current.value=de,de.toLowerCase().indexOf(ke.toLowerCase())===0&&ke.length>0&&fe.current.setSelectionRange(ke.length,de.length)}}),he=()=>{const K=(ne,G)=>{const ie=ne?te(ne):"",ce=G?te(G):"";return ie===ce};if(Ee.current!==-1&&We.filteredOptions&&We.filteredOptions.length!==De.length&&We.inputValue===ke&&(P?me.length===We.value.length&&We.value.every((ne,G)=>te(me[G])===te(ne)):K(We.value,me))){const ne=We.filteredOptions[Ee.current];if(ne&&De.some(ie=>te(ie)===te(ne)))return!0}return!1},He=N.useCallback(()=>{if(!Pe||he())return;const K=P?me[0]:me;if(De.length===0||K==null){Le({diff:"reset"});return}if(ae.current){if(K!=null){const ne=De[Ee.current];if(P&&ne&&AN(me,ie=>R(ne,ie))!==-1)return;const G=AN(De,ie=>R(ie,K));G===-1?Le({diff:"reset"}):Xe({index:G});return}if(Ee.current>=De.length-1){Xe({index:De.length-1});return}Xe({index:Ee.current})}},[De.length,P?!1:me,g,Le,Xe,Pe,ke,P]),ot=Sc(K=>{pb(ae,K),K&&He()});N.useEffect(()=>{He()},[He]);const et=K=>{Se||(be(!0),Ke(!0),X&&X(K))},Ie=(K,ne)=>{Se&&(be(!1),$&&$(K,ne))},Ce=(K,ne,G,ie)=>{if(P){if(me.length===ne.length&&me.every((ce,Te)=>ce===ne[Te]))return}else if(me===ne)return;O&&O(K,ne,G,ie),qe(ne)},ut=N.useRef(!1),dt=(K,ne,G="selectOption",ie="options")=>{let ce=G,Te=ne;if(P){Te=Array.isArray(me)?me.slice():[];const de=AN(Te,Ue=>R(ne,Ue));de===-1?Te.push(ne):ie!=="freeSolo"&&(Te.splice(de,1),ce="removeOption")}xe(K,Te),Ce(K,Te,ce,{option:ne}),!f&&(!K||!K.ctrlKey&&!K.metaKey)&&Ie(K,ce),(o===!0||o==="touch"&&ut.current||o==="mouse"&&!ut.current)&&fe.current.blur()};function yt(K,ne){if(K===-1)return-1;let G=K;for(;;){if(ne==="next"&&G===me.length||ne==="previous"&&G===-1)return-1;const ie=ye.querySelector(`[data-tag-index="${G}"]`);if(!ie||!ie.hasAttribute("tabindex")||ie.disabled||ie.getAttribute("aria-disabled")==="true")G+=ne==="next"?1:-1;else return G}}const vt=(K,ne)=>{if(!P)return;ke===""&&Ie(K,"toggleInput");let G=H;H===-1?ke===""&&ne==="previous"&&(G=me.length-1):(G+=ne==="next"?1:-1,G<0&&(G=0),G===me.length&&(G=-1)),G=yt(G,ne),Me(G),ct(G)},zt=K=>{re.current=!0,ee(""),z&&z(K,"","clear"),Ce(K,P?[]:null,"clear")},It=K=>ne=>{if(K.onKeyDown&&K.onKeyDown(ne),!ne.defaultMuiPrevented&&(H!==-1&&["ArrowLeft","ArrowRight"].indexOf(ne.key)===-1&&(Me(-1),ct(-1)),ne.which!==229))switch(ne.key){case"Home":Pe&&T&&(ne.preventDefault(),Le({diff:"start",direction:"next",reason:"keyboard",event:ne}));break;case"End":Pe&&T&&(ne.preventDefault(),Le({diff:"end",direction:"previous",reason:"keyboard",event:ne}));break;case"PageUp":ne.preventDefault(),Le({diff:-M9,direction:"previous",reason:"keyboard",event:ne}),et(ne);break;case"PageDown":ne.preventDefault(),Le({diff:M9,direction:"next",reason:"keyboard",event:ne}),et(ne);break;case"ArrowDown":ne.preventDefault(),Le({diff:1,direction:"next",reason:"keyboard",event:ne}),et(ne);break;case"ArrowUp":ne.preventDefault(),Le({diff:-1,direction:"previous",reason:"keyboard",event:ne}),et(ne);break;case"ArrowLeft":vt(ne,"previous");break;case"ArrowRight":vt(ne,"next");break;case"Enter":if(Ee.current!==-1&&Pe){const G=De[Ee.current],ie=x?x(G):!1;if(ne.preventDefault(),ie)return;dt(ne,G,"selectOption"),r&&fe.current.setSelectionRange(fe.current.value.length,fe.current.value.length)}else y&&ke!==""&&ze===!1&&(P&&ne.preventDefault(),dt(ne,ke,"createOption","freeSolo"));break;case"Escape":Pe?(ne.preventDefault(),ne.stopPropagation(),Ie(ne,"escape")):l&&(ke!==""||P&&me.length>0)&&(ne.preventDefault(),ne.stopPropagation(),zt(ne));break;case"Backspace":if(P&&!V&&ke===""&&me.length>0){const G=H===-1?me.length-1:H,ie=me.slice();ie.splice(G,1),Ce(ne,ie,"removeOption",{option:me[G]})}break;case"Delete":if(P&&!V&&ke===""&&me.length>0&&H!==-1){const G=H,ie=me.slice();ie.splice(G,1),Ce(ne,ie,"removeOption",{option:me[G]})}break}},Qt=K=>{oe(!0),F&&!re.current&&et(K)},$t=K=>{if(e(ae)){fe.current.focus();return}oe(!1),se.current=!0,re.current=!1,s&&Ee.current!==-1&&Pe?dt(K,De[Ee.current],"blur"):s&&y&&ke!==""?dt(K,ke,"blur","freeSolo"):a&&xe(K,me),Ie(K,"blur")},mt=K=>{const ne=K.target.value;ke!==ne&&(ee(ne),Ke(!1),z&&z(K,ne,"input")),ne===""?!d&&!P&&Ce(K,null,"clear"):et(K)},Ht=K=>{const ne=Number(K.currentTarget.getAttribute("data-option-index"));Ee.current!==ne&&Xe({event:K,index:ne,reason:"mouse"})},pn=K=>{Xe({event:K,index:Number(K.currentTarget.getAttribute("data-option-index")),reason:"touch"}),ut.current=!0},dn=K=>{const ne=Number(K.currentTarget.getAttribute("data-option-index"));dt(K,De[ne],"selectOption"),ut.current=!1},_t=K=>ne=>{const G=me.slice();G.splice(K,1),Ce(ne,G,"removeOption",{option:me[K]})},Dt=K=>{Se?Ie(K,"toggleInput"):et(K)},Nt=K=>{K.currentTarget.contains(K.target)&&K.target.getAttribute("id")!==Q&&K.preventDefault()},bt=K=>{K.currentTarget.contains(K.target)&&(fe.current.focus(),j&&se.current&&fe.current.selectionEnd-fe.current.selectionStart===0&&fe.current.select(),se.current=!1)},Wt=K=>{!h&&(ke===""||!Se)&&Dt(K)};let Sn=y&&ke.length>0;Sn=Sn||(P?me.length>0:me!==null);let Z=De;return C&&(Z=De.reduce((K,ne,G)=>{const ie=C(ne);return K.length>0&&K[K.length-1].group===ie?K[K.length-1].options.push(ne):K.push({key:G,index:G,group:ie,options:[ne]}),K},[])),h&&Y&&$t(),{getRootProps:(K={})=>ve({"aria-owns":gt?`${Q}-listbox`:null},K,{onKeyDown:It(K),onMouseDown:Nt,onClick:bt}),getInputLabelProps:()=>({id:`${Q}-label`,htmlFor:Q}),getInputProps:()=>({id:Q,value:ke,onBlur:$t,onFocus:Qt,onChange:mt,onMouseDown:Wt,"aria-activedescendant":Pe?"":null,"aria-autocomplete":r?"both":"list","aria-controls":gt?`${Q}-listbox`:void 0,"aria-expanded":gt,autoComplete:"off",ref:fe,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:h}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:zt}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Dt}),getTagProps:({index:K})=>ve({key:K,"data-tag-index":K,tabIndex:-1},!V&&{onDelete:_t(K)}),getListboxProps:()=>({role:"listbox",id:`${Q}-listbox`,"aria-labelledby":`${Q}-label`,ref:ot,onMouseDown:K=>{K.preventDefault()}}),getOptionProps:({index:K,option:ne})=>{var G;const ie=(P?me:[me]).some(Te=>Te!=null&&R(ne,Te)),ce=x?x(ne):!1;return{key:(G=S==null?void 0:S(ne))!=null?G:te(ne),tabIndex:-1,role:"option",id:`${Q}-option-${K}`,onMouseMove:Ht,onClick:dn,onTouchStart:pn,"data-option-index":K,"aria-disabled":ce,"aria-selected":ie}},id:Q,inputValue:ke,value:me,dirty:Sn,expanded:Pe&&ye,popupOpen:Pe,focused:Y||H!==-1,anchorEl:ye,setAnchorEl:le,focusedTag:H,groupedOptions:Z}}const e_e=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],t_e=Gt(OSe,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),n_e=N.forwardRef(function(e,n){var r;const i=OQ(),s=sr({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:l,componentsProps:c,container:u,disablePortal:d,keepMounted:f,modifiers:h,open:p,placement:v,popperOptions:m,popperRef:g,transition:y,slots:x,slotProps:S}=s,_=Zt(s,e_e),C=(r=x==null?void 0:x.root)!=null?r:l==null?void 0:l.Root,T=ve({anchorEl:o,container:u,disablePortal:d,keepMounted:f,modifiers:h,open:p,placement:v,popperOptions:m,popperRef:g,transition:y},_);return L.jsx(t_e,ve({as:a,direction:i==null?void 0:i.direction,slots:{root:C},slotProps:S??c},T,{ref:n}))}),oee=n_e;function r_e(t){return Zn("MuiListSubheader",t)}Xn("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const i_e=["className","color","component","disableGutters","disableSticky","inset"],s_e=t=>{const{classes:e,color:n,disableGutters:r,inset:i,disableSticky:s}=t,o={root:["root",n!=="default"&&`color${kt(n)}`,!r&&"gutters",i&&"inset",!s&&"sticky"]};return ir(o,r_e,e)},o_e=Gt("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${kt(n.color)}`],!n.disableGutters&&e.gutters,n.inset&&e.inset,!n.disableSticky&&e.sticky]}})(({theme:t,ownerState:e})=>ve({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},e.color==="primary"&&{color:(t.vars||t).palette.primary.main},e.color==="inherit"&&{color:"inherit"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.inset&&{paddingLeft:72},!e.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})),aee=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiListSubheader"}),{className:i,color:s="default",component:o="li",disableGutters:a=!1,disableSticky:l=!1,inset:c=!1}=r,u=Zt(r,i_e),d=ve({},r,{color:s,component:o,disableGutters:a,disableSticky:l,inset:c}),f=s_e(d);return L.jsx(o_e,ve({as:o,className:sn(f.root,i),ref:n,ownerState:d},u))});aee.muiSkipListHighlight=!0;const a_e=aee,l_e=Yk(L.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function c_e(t){return Zn("MuiChip",t)}const u_e=Xn("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),pr=u_e,d_e=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],f_e=t=>{const{classes:e,disabled:n,size:r,color:i,iconColor:s,onDelete:o,clickable:a,variant:l}=t,c={root:["root",l,n&&"disabled",`size${kt(r)}`,`color${kt(i)}`,a&&"clickable",a&&`clickableColor${kt(i)}`,o&&"deletable",o&&`deletableColor${kt(i)}`,`${l}${kt(i)}`],label:["label",`label${kt(r)}`],avatar:["avatar",`avatar${kt(r)}`,`avatarColor${kt(i)}`],icon:["icon",`icon${kt(r)}`,`iconColor${kt(s)}`],deleteIcon:["deleteIcon",`deleteIcon${kt(r)}`,`deleteIconColor${kt(i)}`,`deleteIcon${kt(l)}Color${kt(i)}`]};return ir(c,c_e,e)},h_e=Gt("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:i,clickable:s,onDelete:o,size:a,variant:l}=n;return[{[`& .${pr.avatar}`]:e.avatar},{[`& .${pr.avatar}`]:e[`avatar${kt(a)}`]},{[`& .${pr.avatar}`]:e[`avatarColor${kt(r)}`]},{[`& .${pr.icon}`]:e.icon},{[`& .${pr.icon}`]:e[`icon${kt(a)}`]},{[`& .${pr.icon}`]:e[`iconColor${kt(i)}`]},{[`& .${pr.deleteIcon}`]:e.deleteIcon},{[`& .${pr.deleteIcon}`]:e[`deleteIcon${kt(a)}`]},{[`& .${pr.deleteIcon}`]:e[`deleteIconColor${kt(r)}`]},{[`& .${pr.deleteIcon}`]:e[`deleteIcon${kt(l)}Color${kt(r)}`]},e.root,e[`size${kt(a)}`],e[`color${kt(r)}`],s&&e.clickable,s&&r!=="default"&&e[`clickableColor${kt(r)})`],o&&e.deletable,o&&r!=="default"&&e[`deletableColor${kt(r)}`],e[l],e[`${l}${kt(r)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return ve({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${pr.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${pr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:n,fontSize:t.typography.pxToRem(12)},[`& .${pr.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${pr.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${pr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${pr.icon}`]:ve({marginLeft:5,marginRight:-6},e.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},e.iconColor===e.color&&ve({color:t.vars?t.vars.palette.Chip.defaultIconColor:n},e.color!=="default"&&{color:"inherit"})),[`& .${pr.deleteIcon}`]:ve({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:Hr(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:Hr(t.palette.text.primary,.4)}},e.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},e.color!=="default"&&{color:t.vars?`rgba(${t.vars.palette[e.color].contrastTextChannel} / 0.7)`:Hr(t.palette[e.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].contrastText}})},e.size==="small"&&{height:24},e.color!=="default"&&{backgroundColor:(t.vars||t).palette[e.color].main,color:(t.vars||t).palette[e.color].contrastText},e.onDelete&&{[`&.${pr.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Hr(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},e.onDelete&&e.color!=="default"&&{[`&.${pr.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}})},({theme:t,ownerState:e})=>ve({},e.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Hr(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${pr.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Hr(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},e.clickable&&e.color!=="default"&&{[`&:hover, &.${pr.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}}),({theme:t,ownerState:e})=>ve({},e.variant==="outlined"&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${pr.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${pr.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${pr.avatar}`]:{marginLeft:4},[`& .${pr.avatarSmall}`]:{marginLeft:2},[`& .${pr.icon}`]:{marginLeft:4},[`& .${pr.iconSmall}`]:{marginLeft:2},[`& .${pr.deleteIcon}`]:{marginRight:5},[`& .${pr.deleteIconSmall}`]:{marginRight:3}},e.variant==="outlined"&&e.color!=="default"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:Hr(t.palette[e.color].main,.7)}`,[`&.${pr.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Hr(t.palette[e.color].main,t.palette.action.hoverOpacity)},[`&.${pr.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:Hr(t.palette[e.color].main,t.palette.action.focusOpacity)},[`& .${pr.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:Hr(t.palette[e.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].main}}})),p_e=Gt("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${kt(r)}`]]}})(({ownerState:t})=>ve({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},t.variant==="outlined"&&{paddingLeft:11,paddingRight:11},t.size==="small"&&{paddingLeft:8,paddingRight:8},t.size==="small"&&t.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function k9(t){return t.key==="Backspace"||t.key==="Delete"}const m_e=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiChip"}),{avatar:i,className:s,clickable:o,color:a="default",component:l,deleteIcon:c,disabled:u=!1,icon:d,label:f,onClick:h,onDelete:p,onKeyDown:v,onKeyUp:m,size:g="medium",variant:y="filled",tabIndex:x,skipFocusWhenDisabled:S=!1}=r,_=Zt(r,d_e),C=N.useRef(null),T=zi(C,n),A=F=>{F.stopPropagation(),p&&p(F)},k=F=>{F.currentTarget===F.target&&k9(F)&&F.preventDefault(),v&&v(F)},M=F=>{F.currentTarget===F.target&&(p&&k9(F)?p(F):F.key==="Escape"&&C.current&&C.current.blur()),m&&m(F)},R=o!==!1&&h?!0:o,P=R||p?mb:l||"div",O=ve({},r,{component:P,disabled:u,size:g,color:a,iconColor:N.isValidElement(d)&&d.props.color||a,onDelete:!!p,clickable:R,variant:y}),$=f_e(O),U=P===mb?ve({component:l||"div",focusVisibleClassName:$.focusVisible},p&&{disableRipple:!0}):{};let z=null;p&&(z=c&&N.isValidElement(c)?N.cloneElement(c,{className:sn(c.props.className,$.deleteIcon),onClick:A}):L.jsx(l_e,{className:sn($.deleteIcon),onClick:A}));let X=null;i&&N.isValidElement(i)&&(X=N.cloneElement(i,{className:sn($.avatar,i.props.className)}));let D=null;return d&&N.isValidElement(d)&&(D=N.cloneElement(d,{className:sn($.icon,d.props.className)})),L.jsxs(h_e,ve({as:P,className:sn($.root,s),disabled:R&&u?!0:void 0,onClick:h,onKeyDown:k,onKeyUp:M,ref:T,tabIndex:S&&u?-1:x,ownerState:O},U,_,{children:[X||D,L.jsx(p_e,{className:sn($.label),ownerState:O,children:f}),z]}))}),g_e=m_e;function ey({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const v_e=N.createContext(void 0),HF=v_e;function ty(){return N.useContext(HF)}function y_e(t){return L.jsx(O1e,ve({},t,{defaultTheme:qk,themeId:Pw}))}function A9(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function jE(t,e=!1){return t&&(A9(t.value)&&t.value!==""||e&&A9(t.defaultValue)&&t.defaultValue!=="")}function x_e(t){return t.startAdornment}function b_e(t){return Zn("MuiInputBase",t)}const w_e=Xn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Ba=w_e,S_e=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],lA=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${kt(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},cA=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},__e=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:f,startAdornment:h,type:p}=t,v={root:["root",`color${kt(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",f&&f!=="medium"&&`size${kt(f)}`,u&&"multiline",h&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",u&&"inputMultiline",f==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",h&&"inputAdornedStart",s&&"inputAdornedEnd",d&&"readOnly"]};return ir(v,b_e,e)},uA=Gt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:lA})(({theme:t,ownerState:e})=>ve({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Ba.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&ve({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),dA=Gt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:cA})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=ve({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return ve({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Ba.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${Ba.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),C_e=L.jsx(y_e,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),T_e=N.forwardRef(function(e,n){var r;const i=sr({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:f,disableInjectingGlobalStyles:h,endAdornment:p,fullWidth:v=!1,id:m,inputComponent:g="input",inputProps:y={},inputRef:x,maxRows:S,minRows:_,multiline:C=!1,name:T,onBlur:A,onChange:k,onClick:M,onFocus:R,onKeyDown:P,onKeyUp:O,placeholder:$,readOnly:U,renderSuffix:z,rows:X,slotProps:D={},slots:F={},startAdornment:W,type:V="text",value:j}=i,J=Zt(i,S_e),Q=y.value!=null?y.value:j,{current:te}=N.useRef(Q!=null),re=N.useRef(),se=N.useCallback(Pe=>{},[]),fe=zi(re,x,y.ref,se),[ae,ye]=N.useState(!1),le=ty(),H=ey({props:i,muiFormControl:le,states:["color","disabled","error","hiddenLabel","size","required","filled"]});H.focused=le?le.focused:ae,N.useEffect(()=>{!le&&f&&ae&&(ye(!1),A&&A())},[le,f,ae,A]);const Me=le&&le.onFilled,we=le&&le.onEmpty,Ee=N.useCallback(Pe=>{jE(Pe)?Me&&Me():we&&we()},[Me,we]);$c(()=>{te&&Ee({value:Q})},[Q,Ee,te]);const me=Pe=>{if(H.disabled){Pe.stopPropagation();return}R&&R(Pe),y.onFocus&&y.onFocus(Pe),le&&le.onFocus?le.onFocus(Pe):ye(!0)},qe=Pe=>{A&&A(Pe),y.onBlur&&y.onBlur(Pe),le&&le.onBlur?le.onBlur(Pe):ye(!1)},ke=(Pe,...De)=>{if(!te){const We=Pe.target||re.current;if(We==null)throw new Error(rh(1));Ee({value:We.value})}y.onChange&&y.onChange(Pe,...De),k&&k(Pe,...De)};N.useEffect(()=>{Ee(re.current)},[]);const ee=Pe=>{re.current&&Pe.currentTarget===Pe.target&&re.current.focus(),M&&M(Pe)};let Y=g,oe=y;C&&Y==="input"&&(X?oe=ve({type:void 0,minRows:X,maxRows:X},oe):oe=ve({type:void 0,maxRows:S,minRows:_},oe),Y=YSe);const xe=Pe=>{Ee(Pe.animationName==="mui-auto-fill-cancel"?re.current:{value:"x"})};N.useEffect(()=>{le&&le.setAdornedStart(!!W)},[le,W]);const Se=ve({},i,{color:H.color||"primary",disabled:H.disabled,endAdornment:p,error:H.error,focused:H.focused,formControl:le,fullWidth:v,hiddenLabel:H.hiddenLabel,multiline:C,size:H.size,startAdornment:W,type:V}),be=__e(Se),Re=F.root||c.Root||uA,Ke=D.root||u.root||{},ze=F.input||c.Input||dA;return oe=ve({},oe,(r=D.input)!=null?r:u.input),L.jsxs(N.Fragment,{children:[!h&&C_e,L.jsxs(Re,ve({},Ke,!GE(Re)&&{ownerState:ve({},Se,Ke.ownerState)},{ref:n,onClick:ee},J,{className:sn(be.root,Ke.className,l,U&&"MuiInputBase-readOnly"),children:[W,L.jsx(HF.Provider,{value:null,children:L.jsx(ze,ve({ownerState:Se,"aria-invalid":H.error,"aria-describedby":s,autoComplete:o,autoFocus:a,defaultValue:d,disabled:H.disabled,id:m,onAnimationStart:xe,name:T,placeholder:$,readOnly:U,required:H.required,rows:X,value:Q,onKeyDown:P,onKeyUp:O,type:V},oe,!GE(ze)&&{as:Y,ownerState:ve({},Se,oe.ownerState)},{ref:fe,className:sn(be.input,oe.className,U&&"MuiInputBase-readOnly"),onBlur:qe,onChange:ke,onFocus:me}))}),p,z?z(ve({},H,{startAdornment:W})):null]}))]})}),jF=T_e;function E_e(t){return Zn("MuiInput",t)}const M_e=ve({},Ba,Xn("MuiInput",["root","underline","input"])),Mf=M_e;function k_e(t){return Zn("MuiOutlinedInput",t)}const A_e=ve({},Ba,Xn("MuiOutlinedInput",["root","notchedOutline","input"])),nu=A_e;function I_e(t){return Zn("MuiFilledInput",t)}const R_e=ve({},Ba,Xn("MuiFilledInput",["root","underline","input"])),za=R_e,lee=Yk(L.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function N_e(t){return Zn("MuiAutocomplete",t)}const P_e=Xn("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),qn=P_e;var I9,R9;const $_e=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],D_e=["ref"],L_e=["key"],O_e=t=>{const{classes:e,disablePortal:n,expanded:r,focused:i,fullWidth:s,hasClearIcon:o,hasPopupIcon:a,inputFocused:l,popupOpen:c,size:u}=t,d={root:["root",r&&"expanded",i&&"focused",s&&"fullWidth",o&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag",`tagSize${kt(u)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return ir(d,N_e,e)},F_e=Gt("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{fullWidth:r,hasClearIcon:i,hasPopupIcon:s,inputFocused:o,size:a}=n;return[{[`& .${qn.tag}`]:e.tag},{[`& .${qn.tag}`]:e[`tagSize${kt(a)}`]},{[`& .${qn.inputRoot}`]:e.inputRoot},{[`& .${qn.input}`]:e.input},{[`& .${qn.input}`]:o&&e.inputFocused},e.root,r&&e.fullWidth,s&&e.hasPopupIcon,i&&e.hasClearIcon]}})(({ownerState:t})=>ve({[`&.${qn.focused} .${qn.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${qn.clearIndicator}`]:{visibility:"visible"}}},t.fullWidth&&{width:"100%"},{[`& .${qn.tag}`]:ve({margin:3,maxWidth:"calc(100% - 6px)"},t.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${qn.inputRoot}`]:{flexWrap:"wrap",[`.${qn.hasPopupIcon}&, .${qn.hasClearIcon}&`]:{paddingRight:30},[`.${qn.hasPopupIcon}.${qn.hasClearIcon}&`]:{paddingRight:56},[`& .${qn.input}`]:{width:0,minWidth:30}},[`& .${Mf.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Mf.root}.${Ba.sizeSmall}`]:{[`& .${Mf.input}`]:{padding:"2px 4px 3px 0"}},[`& .${nu.root}`]:{padding:9,[`.${qn.hasPopupIcon}&, .${qn.hasClearIcon}&`]:{paddingRight:39},[`.${qn.hasPopupIcon}.${qn.hasClearIcon}&`]:{paddingRight:65},[`& .${qn.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${qn.endAdornment}`]:{right:9}},[`& .${nu.root}.${Ba.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${qn.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${za.root}`]:{paddingTop:19,paddingLeft:8,[`.${qn.hasPopupIcon}&, .${qn.hasClearIcon}&`]:{paddingRight:39},[`.${qn.hasPopupIcon}.${qn.hasClearIcon}&`]:{paddingRight:65},[`& .${za.input}`]:{padding:"7px 4px"},[`& .${qn.endAdornment}`]:{right:9}},[`& .${za.root}.${Ba.sizeSmall}`]:{paddingBottom:1,[`& .${za.input}`]:{padding:"2.5px 4px"}},[`& .${Ba.hiddenLabel}`]:{paddingTop:8},[`& .${za.root}.${Ba.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${qn.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${za.root}.${Ba.hiddenLabel}.${Ba.sizeSmall}`]:{[`& .${qn.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${qn.input}`]:ve({flexGrow:1,textOverflow:"ellipsis",opacity:0},t.inputFocused&&{opacity:1})})),U_e=Gt("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(t,e)=>e.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),B_e=Gt(S1,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(t,e)=>e.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),z_e=Gt(S1,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:t},e)=>ve({},e.popupIndicator,t.popupOpen&&e.popupIndicatorOpen)})(({ownerState:t})=>ve({padding:2,marginRight:-2},t.popupOpen&&{transform:"rotate(180deg)"})),W_e=Gt(oee,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${qn.option}`]:e.option},e.popper,n.disablePortal&&e.popperDisablePortal]}})(({theme:t,ownerState:e})=>ve({zIndex:(t.vars||t).zIndex.modal},e.disablePortal&&{position:"absolute"})),V_e=Gt(Bw,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(t,e)=>e.paper})(({theme:t})=>ve({},t.typography.body1,{overflow:"auto"})),G_e=Gt("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(t,e)=>e.loading})(({theme:t})=>({color:(t.vars||t).palette.text.secondary,padding:"14px 16px"})),H_e=Gt("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(t,e)=>e.noOptions})(({theme:t})=>({color:(t.vars||t).palette.text.secondary,padding:"14px 16px"})),j_e=Gt("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(t,e)=>e.listbox})(({theme:t})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${qn.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${qn.focused}`]:{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${qn.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Hr(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${qn.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Hr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${qn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Hr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}}})),X_e=Gt(a_e,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(t,e)=>e.groupLabel})(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,top:-8})),q_e=Gt("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(t,e)=>e.groupUl})({padding:0,[`& .${qn.option}`]:{paddingLeft:24}}),Y_e=N.forwardRef(function(e,n){var r,i,s,o;const a=sr({props:e,name:"MuiAutocomplete"}),{autoComplete:l=!1,autoHighlight:c=!1,autoSelect:u=!1,blurOnSelect:d=!1,ChipProps:f,className:h,clearIcon:p=I9||(I9=L.jsx(qwe,{fontSize:"small"})),clearOnBlur:v=!a.freeSolo,clearOnEscape:m=!1,clearText:g="Clear",closeText:y="Close",componentsProps:x={},defaultValue:S=a.multiple?[]:null,disableClearable:_=!1,disableCloseOnSelect:C=!1,disabled:T=!1,disabledItemsFocusable:A=!1,disableListWrap:k=!1,disablePortal:M=!1,filterSelectedOptions:R=!1,forcePopupIcon:P="auto",freeSolo:O=!1,fullWidth:$=!1,getLimitTagsText:U=ne=>`+${ne}`,getOptionLabel:z,groupBy:X,handleHomeEndKeys:D=!a.freeSolo,includeInputInList:F=!1,limitTags:W=-1,ListboxComponent:V="ul",ListboxProps:j,loading:J=!1,loadingText:Q="Loading…",multiple:te=!1,noOptionsText:re="No options",openOnFocus:se=!1,openText:fe="Open",PaperComponent:ae=Bw,PopperComponent:ye=oee,popupIcon:le=R9||(R9=L.jsx(lee,{})),readOnly:H=!1,renderGroup:Me,renderInput:we,renderOption:Ee,renderTags:me,selectOnFocus:qe=!a.freeSolo,size:ke="medium",slotProps:ee={}}=a,Y=Zt(a,$_e),{getRootProps:oe,getInputProps:xe,getInputLabelProps:Se,getPopupIndicatorProps:be,getClearProps:Re,getTagProps:Ke,getListboxProps:ze,getOptionProps:Pe,value:De,dirty:We,expanded:gt,id:ct,popupOpen:Ye,focused:Xe,focusedTag:Le,anchorEl:he,setAnchorEl:He,inputValue:ot,groupedOptions:et}=QSe(ve({},a,{componentName:"Autocomplete"})),Ie=!_&&!T&&We&&!H,Ce=(!O||P===!0)&&P!==!1,{onMouseDown:ut}=xe(),{ref:dt}=j??{},yt=ze(),{ref:vt}=yt,zt=Zt(yt,D_e),It=zi(vt,dt),$t=z||(ne=>{var G;return(G=ne.label)!=null?G:ne}),mt=ve({},a,{disablePortal:M,expanded:gt,focused:Xe,fullWidth:$,getOptionLabel:$t,hasClearIcon:Ie,hasPopupIcon:Ce,inputFocused:Le===-1,popupOpen:Ye,size:ke}),Ht=O_e(mt);let pn;if(te&&De.length>0){const ne=G=>ve({className:Ht.tag,disabled:T},Ke(G));me?pn=me(De,ne,mt):pn=De.map((G,ie)=>L.jsx(g_e,ve({label:$t(G),size:ke},ne({index:ie}),f)))}if(W>-1&&Array.isArray(pn)){const ne=pn.length-W;!Xe&&ne>0&&(pn=pn.splice(0,W),pn.push(L.jsx("span",{className:Ht.tag,children:U(ne)},pn.length)))}const _t=Me||(ne=>L.jsxs("li",{children:[L.jsx(X_e,{className:Ht.groupLabel,ownerState:mt,component:"div",children:ne.group}),L.jsx(q_e,{className:Ht.groupUl,ownerState:mt,children:ne.children})]},ne.key)),Nt=Ee||((ne,G)=>{const{key:ie}=ne,ce=Zt(ne,L_e);return L.jsx("li",ve({},ce,{children:$t(G)}),ie)}),bt=(ne,G)=>{const ie=Pe({option:ne,index:G});return Nt(ve({},ie,{className:Ht.option}),ne,{selected:ie["aria-selected"],index:G,inputValue:ot},mt)},Wt=(r=ee.clearIndicator)!=null?r:x.clearIndicator,Sn=(i=ee.paper)!=null?i:x.paper,Z=(s=ee.popper)!=null?s:x.popper,K=(o=ee.popupIndicator)!=null?o:x.popupIndicator;return L.jsxs(N.Fragment,{children:[L.jsx(F_e,ve({ref:n,className:sn(Ht.root,h),ownerState:mt},oe(Y),{children:we({id:ct,disabled:T,fullWidth:!0,size:ke==="small"?"small":void 0,InputLabelProps:Se(),InputProps:ve({ref:He,className:Ht.inputRoot,startAdornment:pn,onClick:ne=>{ne.target===ne.currentTarget&&ut(ne)}},(Ie||Ce)&&{endAdornment:L.jsxs(U_e,{className:Ht.endAdornment,ownerState:mt,children:[Ie?L.jsx(B_e,ve({},Re(),{"aria-label":g,title:g,ownerState:mt},Wt,{className:sn(Ht.clearIndicator,Wt==null?void 0:Wt.className),children:p})):null,Ce?L.jsx(z_e,ve({},be(),{disabled:T,"aria-label":Ye?y:fe,title:Ye?y:fe,ownerState:mt},K,{className:sn(Ht.popupIndicator,K==null?void 0:K.className),children:le})):null]})}),inputProps:ve({className:Ht.input,disabled:T,readOnly:H},xe())})})),he?L.jsx(W_e,ve({as:ye,disablePortal:M,style:{width:he?he.clientWidth:null},ownerState:mt,role:"presentation",anchorEl:he,open:Ye},Z,{className:sn(Ht.popper,Z==null?void 0:Z.className),children:L.jsxs(V_e,ve({ownerState:mt,as:ae},Sn,{className:sn(Ht.paper,Sn==null?void 0:Sn.className),children:[J&&et.length===0?L.jsx(G_e,{className:Ht.loading,ownerState:mt,children:Q}):null,et.length===0&&!O&&!J?L.jsx(H_e,{className:Ht.noOptions,ownerState:mt,role:"presentation",onMouseDown:ne=>{ne.preventDefault()},children:re}):null,et.length>0?L.jsx(j_e,ve({as:V,className:Ht.listbox,ownerState:mt},zt,j,{ref:It,children:et.map((ne,G)=>X?_t({key:ne.key,group:ne.group,children:ne.options.map((ie,ce)=>bt(ie,ne.index+ce))}):bt(ne,G))})):null]}))})):null]})}),K_e=Y_e,Z_e=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],J_e={entering:{opacity:1},entered:{opacity:1}},Q_e=N.forwardRef(function(e,n){const r=PF(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:f,onExit:h,onExited:p,onExiting:v,style:m,timeout:g=i,TransitionComponent:y=XQ}=e,x=Zt(e,Z_e),S=N.useRef(null),_=zi(S,a.ref,n),C=$=>U=>{if($){const z=S.current;U===void 0?$(z):$(z,U)}},T=C(f),A=C(($,U)=>{qQ($);const z=VE({style:m,timeout:g,easing:l},{mode:"enter"});$.style.webkitTransition=r.transitions.create("opacity",z),$.style.transition=r.transitions.create("opacity",z),u&&u($,U)}),k=C(d),M=C(v),R=C($=>{const U=VE({style:m,timeout:g,easing:l},{mode:"exit"});$.style.webkitTransition=r.transitions.create("opacity",U),$.style.transition=r.transitions.create("opacity",U),h&&h($)}),P=C(p),O=$=>{s&&s(S.current,$)};return L.jsx(y,ve({appear:o,in:c,nodeRef:S,onEnter:A,onEntered:k,onEntering:T,onExit:R,onExited:P,onExiting:M,addEndListener:O,timeout:g},x,{children:($,U)=>N.cloneElement(a,ve({style:ve({opacity:0,visibility:$==="exited"&&!c?"hidden":void 0},J_e[$],m,a.props.style),ref:_},U))}))}),eCe=Q_e;function tCe(t){return Zn("MuiBackdrop",t)}Xn("MuiBackdrop",["root","invisible"]);const nCe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],rCe=t=>{const{classes:e,invisible:n}=t;return ir({root:["root",n&&"invisible"]},tCe,e)},iCe=Gt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>ve({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),sCe=N.forwardRef(function(e,n){var r,i,s;const o=sr({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:c="div",components:u={},componentsProps:d={},invisible:f=!1,open:h,slotProps:p={},slots:v={},TransitionComponent:m=eCe,transitionDuration:g}=o,y=Zt(o,nCe),x=ve({},o,{component:c,invisible:f}),S=rCe(x),_=(r=p.root)!=null?r:d.root;return L.jsx(m,ve({in:h,timeout:g},y,{children:L.jsx(iCe,ve({"aria-hidden":!0},_,{as:(i=(s=v.root)!=null?s:u.Root)!=null?i:c,className:sn(S.root,l,_==null?void 0:_.className),ownerState:ve({},x,_==null?void 0:_.ownerState),classes:S,ref:n,children:a}))}))}),oCe=sCe,aCe=Xn("MuiBox",["root"]),lCe=aCe,cCe=VQ(),uCe=z1e({themeId:Pw,defaultTheme:cCe,defaultClassName:lCe.root,generateClassName:_F.generate}),Qn=uCe;function dCe(t){return Zn("MuiButton",t)}const fCe=Xn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Q_=fCe,hCe=N.createContext({}),pCe=hCe,mCe=N.createContext(void 0),gCe=mCe,vCe=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],yCe=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,classes:o}=t,a={root:["root",s,`${s}${kt(e)}`,`size${kt(i)}`,`${s}Size${kt(i)}`,e==="inherit"&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${kt(i)}`],endIcon:["endIcon",`iconSize${kt(i)}`]},l=ir(a,dCe,o);return ve({},o,l)},cee=t=>ve({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),xCe=Gt(mb,{shouldForwardProp:t=>Kl(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${kt(n.color)}`],e[`size${kt(n.size)}`],e[`${n.variant}Size${kt(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],s=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return ve({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":ve({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Hr(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Hr(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Hr(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":ve({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${Q_.focusVisible}`]:ve({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${Q_.disabled}`]:ve({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Hr(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Q_.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Q_.disabled}`]:{boxShadow:"none"}}),bCe=Gt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${kt(n.size)}`]]}})(({ownerState:t})=>ve({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},cee(t))),wCe=Gt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${kt(n.size)}`]]}})(({ownerState:t})=>ve({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},cee(t))),SCe=N.forwardRef(function(e,n){const r=N.useContext(pCe),i=N.useContext(gCe),s=SF(r,e),o=sr({props:s,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:f=!1,disableFocusRipple:h=!1,endIcon:p,focusVisibleClassName:v,fullWidth:m=!1,size:g="medium",startIcon:y,type:x,variant:S="text"}=o,_=Zt(o,vCe),C=ve({},o,{color:l,component:c,disabled:d,disableElevation:f,disableFocusRipple:h,fullWidth:m,size:g,type:x,variant:S}),T=yCe(C),A=y&&L.jsx(bCe,{className:T.startIcon,ownerState:C,children:y}),k=p&&L.jsx(wCe,{className:T.endIcon,ownerState:C,children:p}),M=i||"";return L.jsxs(xCe,ve({ownerState:C,className:sn(r.className,T.root,u,M),component:c,disabled:d,focusRipple:!h,focusVisibleClassName:sn(T.focusVisible,v),ref:n,type:x},_,{classes:T,children:[A,a,k]}))}),kc=SCe;function _Ce(t){return Zn("MuiCard",t)}Xn("MuiCard",["root"]);const CCe=["className","raised"],TCe=t=>{const{classes:e}=t;return ir({root:["root"]},_Ce,e)},ECe=Gt(Bw,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),MCe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=r,o=Zt(r,CCe),a=ve({},r,{raised:s}),l=TCe(a);return L.jsx(ECe,ve({className:sn(l.root,i),elevation:s?8:void 0,ref:n,ownerState:a},o))}),uee=MCe;function kCe(t){return Zn("MuiCardActions",t)}Xn("MuiCardActions",["root","spacing"]);const ACe=["disableSpacing","className"],ICe=t=>{const{classes:e,disableSpacing:n}=t;return ir({root:["root",!n&&"spacing"]},kCe,e)},RCe=Gt("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>ve({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),NCe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:s}=r,o=Zt(r,ACe),a=ve({},r,{disableSpacing:i}),l=ICe(a);return L.jsx(RCe,ve({className:sn(l.root,s),ownerState:a,ref:n},o))}),dee=NCe;function PCe(t){return Zn("MuiCardContent",t)}Xn("MuiCardContent",["root"]);const $Ce=["className","component"],DCe=t=>{const{classes:e}=t;return ir({root:["root"]},PCe,e)},LCe=Gt("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),OCe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiCardContent"}),{className:i,component:s="div"}=r,o=Zt(r,$Ce),a=ve({},r,{component:s}),l=DCe(a);return L.jsx(LCe,ve({as:s,className:sn(l.root,i),ownerState:a,ref:n},o))}),fee=OCe,FCe=ube({createStyledComponent:Gt("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${kt(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>sr({props:t,name:"MuiContainer"})}),hee=FCe;function UCe(t){return Zn("MuiModal",t)}Xn("MuiModal",["root","hidden","backdrop"]);const BCe=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],zCe=t=>{const{open:e,exited:n,classes:r}=t;return ir({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},UCe,r)},WCe=Gt("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>ve({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),VCe=Gt(oCe,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),GCe=N.forwardRef(function(e,n){var r,i,s,o,a,l;const c=sr({name:"MuiModal",props:e}),{BackdropComponent:u=VCe,BackdropProps:d,className:f,closeAfterTransition:h=!1,children:p,container:v,component:m,components:g={},componentsProps:y={},disableAutoFocus:x=!1,disableEnforceFocus:S=!1,disableEscapeKeyDown:_=!1,disablePortal:C=!1,disableRestoreFocus:T=!1,disableScrollLock:A=!1,hideBackdrop:k=!1,keepMounted:M=!1,onBackdropClick:R,open:P,slotProps:O,slots:$}=c,U=Zt(c,BCe),z=ve({},c,{closeAfterTransition:h,disableAutoFocus:x,disableEnforceFocus:S,disableEscapeKeyDown:_,disablePortal:C,disableRestoreFocus:T,disableScrollLock:A,hideBackdrop:k,keepMounted:M}),{getRootProps:X,getBackdropProps:D,getTransitionProps:F,portalRef:W,isTopModal:V,exited:j,hasTransition:J}=jSe(ve({},z,{rootRef:n})),Q=ve({},z,{exited:j}),te=zCe(Q),re={};if(p.props.tabIndex===void 0&&(re.tabIndex="-1"),J){const{onEnter:Me,onExited:we}=F();re.onEnter=Me,re.onExited=we}const se=(r=(i=$==null?void 0:$.root)!=null?i:g.Root)!=null?r:WCe,fe=(s=(o=$==null?void 0:$.backdrop)!=null?o:g.Backdrop)!=null?s:u,ae=(a=O==null?void 0:O.root)!=null?a:y.root,ye=(l=O==null?void 0:O.backdrop)!=null?l:y.backdrop,le=mm({elementType:se,externalSlotProps:ae,externalForwardedProps:U,getSlotProps:X,additionalProps:{ref:n,as:m},ownerState:Q,className:sn(f,ae==null?void 0:ae.className,te==null?void 0:te.root,!Q.open&&Q.exited&&(te==null?void 0:te.hidden))}),H=mm({elementType:fe,externalSlotProps:ye,additionalProps:d,getSlotProps:Me=>D(ve({},Me,{onClick:we=>{R&&R(we),Me!=null&&Me.onClick&&Me.onClick(we)}})),className:sn(ye==null?void 0:ye.className,d==null?void 0:d.className,te==null?void 0:te.backdrop),ownerState:Q});return!M&&!P&&(!J||j)?null:L.jsx(see,{ref:W,container:v,disablePortal:C,children:L.jsxs(se,ve({},le,{children:[!k&&u?L.jsx(fe,ve({},H)):null,L.jsx(w2e,{disableEnforceFocus:S,disableAutoFocus:x,disableRestoreFocus:T,isEnabled:V,open:P,children:N.cloneElement(p,re)})]}))})}),HCe=GCe,jCe=Xn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),N9=jCe,XCe=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],qCe=t=>{const{classes:e,disableUnderline:n}=t,i=ir({root:["root",!n&&"underline"],input:["input"]},I_e,e);return ve({},e,i)},YCe=Gt(uA,{shouldForwardProp:t=>Kl(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...lA(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return ve({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${za.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${za.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${za.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${za.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${za.disabled}, .${za.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${za.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&ve({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),KCe=Gt(dA,{name:"MuiFilledInput",slot:"Input",overridesResolver:cA})(({theme:t,ownerState:e})=>ve({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),pee=N.forwardRef(function(e,n){var r,i,s,o;const a=sr({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:f=!1,slotProps:h,slots:p={},type:v="text"}=a,m=Zt(a,XCe),g=ve({},a,{fullWidth:u,inputComponent:d,multiline:f,type:v}),y=qCe(a),x={root:{ownerState:g},input:{ownerState:g}},S=h??c?xa(x,h??c):x,_=(r=(i=p.root)!=null?i:l.Root)!=null?r:YCe,C=(s=(o=p.input)!=null?o:l.Input)!=null?s:KCe;return L.jsx(jF,ve({slots:{root:_,input:C},componentsProps:S,fullWidth:u,inputComponent:d,multiline:f,ref:n,type:v},m,{classes:y}))});pee.muiName="Input";const mee=pee;function ZCe(t){return Zn("MuiFormControl",t)}Xn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const JCe=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],QCe=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${kt(n)}`,r&&"fullWidth"]};return ir(i,ZCe,e)},eTe=Gt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>ve({},e.root,e[`margin${kt(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>ve({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),tTe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:f=!1,margin:h="none",required:p=!1,size:v="medium",variant:m="outlined"}=r,g=Zt(r,JCe),y=ve({},r,{color:o,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:f,margin:h,required:p,size:v,variant:m}),x=QCe(y),[S,_]=N.useState(()=>{let O=!1;return i&&N.Children.forEach(i,$=>{if(!x1($,["Input","Select"]))return;const U=x1($,["Select"])?$.props.input:$;U&&x_e(U.props)&&(O=!0)}),O}),[C,T]=N.useState(()=>{let O=!1;return i&&N.Children.forEach(i,$=>{x1($,["Input","Select"])&&(jE($.props,!0)||jE($.props.inputProps,!0))&&(O=!0)}),O}),[A,k]=N.useState(!1);l&&A&&k(!1);const M=u!==void 0&&!l?u:A;let R;const P=N.useMemo(()=>({adornedStart:S,setAdornedStart:_,color:o,disabled:l,error:c,filled:C,focused:M,fullWidth:d,hiddenLabel:f,size:v,onBlur:()=>{k(!1)},onEmpty:()=>{T(!1)},onFilled:()=>{T(!0)},onFocus:()=>{k(!0)},registerEffect:R,required:p,variant:m}),[S,o,l,c,C,M,d,f,R,p,v,m]);return L.jsx(HF.Provider,{value:P,children:L.jsx(eTe,ve({as:a,ownerState:y,className:sn(x.root,s),ref:n},g,{children:i}))})}),nTe=tTe;function rTe(t){return Zn("MuiFormHelperText",t)}const iTe=Xn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),P9=iTe;var $9;const sTe=["children","className","component","disabled","error","filled","focused","margin","required","variant"],oTe=t=>{const{classes:e,contained:n,size:r,disabled:i,error:s,filled:o,focused:a,required:l}=t,c={root:["root",i&&"disabled",s&&"error",r&&`size${kt(r)}`,n&&"contained",a&&"focused",o&&"filled",l&&"required"]};return ir(c,rTe,e)},aTe=Gt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${kt(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>ve({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${P9.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${P9.error}`]:{color:(t.vars||t).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),lTe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:o="p"}=r,a=Zt(r,sTe),l=ty(),c=ey({props:r,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),u=ve({},r,{component:o,contained:c.variant==="filled"||c.variant==="outlined",variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=oTe(u);return L.jsx(aTe,ve({as:o,ownerState:u,className:sn(d.root,s),ref:n},a,{children:i===" "?$9||($9=L.jsx("span",{className:"notranslate",children:"​"})):i}))}),cTe=lTe;function uTe(t){return Zn("MuiFormLabel",t)}const dTe=Xn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),E1=dTe,fTe=["children","className","color","component","disabled","error","filled","focused","required"],hTe=t=>{const{classes:e,color:n,focused:r,disabled:i,error:s,filled:o,required:a}=t,l={root:["root",`color${kt(n)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return ir(l,uTe,e)},pTe=Gt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>ve({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>ve({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${E1.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${E1.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${E1.error}`]:{color:(t.vars||t).palette.error.main}})),mTe=Gt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${E1.error}`]:{color:(t.vars||t).palette.error.main}})),gTe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiFormLabel"}),{children:i,className:s,component:o="label"}=r,a=Zt(r,fTe),l=ty(),c=ey({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),u=ve({},r,{color:c.color||"primary",component:o,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=hTe(u);return L.jsxs(pTe,ve({as:o,ownerState:u,className:sn(d.root,s),ref:n},a,{children:[i,c.required&&L.jsxs(mTe,{ownerState:u,"aria-hidden":!0,className:d.asterisk,children:[" ","*"]})]}))}),vTe=gTe,yTe=Ebe({createStyledComponent:Gt("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(t,e)=>e.root}),componentName:"MuiGrid2",useThemeProps:t=>sr({props:t,name:"MuiGrid2"})}),XE=yTe,xTe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function GD(t){return`scale(${t}, ${t**2})`}const bTe={entering:{opacity:1,transform:GD(1)},entered:{opacity:1,transform:"none"}},IN=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),gee=N.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:f,onExiting:h,style:p,timeout:v="auto",TransitionComponent:m=XQ}=e,g=Zt(e,xTe),y=N.useRef(),x=N.useRef(),S=PF(),_=N.useRef(null),C=zi(_,s.ref,n),T=U=>z=>{if(U){const X=_.current;z===void 0?U(X):U(X,z)}},A=T(u),k=T((U,z)=>{qQ(U);const{duration:X,delay:D,easing:F}=VE({style:p,timeout:v,easing:o},{mode:"enter"});let W;v==="auto"?(W=S.transitions.getAutoHeightDuration(U.clientHeight),x.current=W):W=X,U.style.transition=[S.transitions.create("opacity",{duration:W,delay:D}),S.transitions.create("transform",{duration:IN?W:W*.666,delay:D,easing:F})].join(","),l&&l(U,z)}),M=T(c),R=T(h),P=T(U=>{const{duration:z,delay:X,easing:D}=VE({style:p,timeout:v,easing:o},{mode:"exit"});let F;v==="auto"?(F=S.transitions.getAutoHeightDuration(U.clientHeight),x.current=F):F=z,U.style.transition=[S.transitions.create("opacity",{duration:F,delay:X}),S.transitions.create("transform",{duration:IN?F:F*.666,delay:IN?X:X||F*.333,easing:D})].join(","),U.style.opacity=0,U.style.transform=GD(.75),d&&d(U)}),O=T(f),$=U=>{v==="auto"&&(y.current=setTimeout(U,x.current||0)),r&&r(_.current,U)};return N.useEffect(()=>()=>{clearTimeout(y.current)},[]),L.jsx(m,ve({appear:i,in:a,nodeRef:_,onEnter:k,onEntered:M,onEntering:A,onExit:P,onExited:O,onExiting:R,addEndListener:$,timeout:v==="auto"?null:v},g,{children:(U,z)=>N.cloneElement(s,ve({style:ve({opacity:0,transform:GD(.75),visibility:U==="exited"&&!a?"hidden":void 0},bTe[U],p,s.props.style),ref:C},z))}))});gee.muiSupportAuto=!0;const wTe=gee,STe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],_Te=t=>{const{classes:e,disableUnderline:n}=t,i=ir({root:["root",!n&&"underline"],input:["input"]},E_e,e);return ve({},e,i)},CTe=Gt(uA,{shouldForwardProp:t=>Kl(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...lA(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),ve({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Mf.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Mf.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Mf.disabled}, .${Mf.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Mf.disabled}:before`]:{borderBottomStyle:"dotted"}})}),TTe=Gt(dA,{name:"MuiInput",slot:"Input",overridesResolver:cA})({}),vee=N.forwardRef(function(e,n){var r,i,s,o;const a=sr({props:e,name:"MuiInput"}),{disableUnderline:l,components:c={},componentsProps:u,fullWidth:d=!1,inputComponent:f="input",multiline:h=!1,slotProps:p,slots:v={},type:m="text"}=a,g=Zt(a,STe),y=_Te(a),S={root:{ownerState:{disableUnderline:l}}},_=p??u?xa(p??u,S):S,C=(r=(i=v.root)!=null?i:c.Root)!=null?r:CTe,T=(s=(o=v.input)!=null?o:c.Input)!=null?s:TTe;return L.jsx(jF,ve({slots:{root:C,input:T},slotProps:_,fullWidth:d,inputComponent:f,multiline:h,ref:n,type:m},g,{classes:y}))});vee.muiName="Input";const yee=vee;function ETe(t){return Zn("MuiInputLabel",t)}Xn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const MTe=["disableAnimation","margin","shrink","variant","className"],kTe=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=t,l={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="normal"&&`size${kt(r)}`,o],asterisk:[a&&"asterisk"]},c=ir(l,ETe,e);return ve({},e,c)},ATe=Gt(vTe,{shouldForwardProp:t=>Kl(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${E1.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(({theme:t,ownerState:e})=>ve({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&ve({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&ve({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&ve({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),ITe=N.forwardRef(function(e,n){const r=sr({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:s,className:o}=r,a=Zt(r,MTe),l=ty();let c=s;typeof c>"u"&&l&&(c=l.filled||l.focused||l.adornedStart);const u=ey({props:r,muiFormControl:l,states:["size","variant","required","focused"]}),d=ve({},r,{disableAnimation:i,formControl:l,shrink:c,size:u.size,variant:u.variant,required:u.required,focused:u.focused}),f=kTe(d);return L.jsx(ATe,ve({"data-shrink":c,ownerState:d,ref:n,className:sn(f.root,o)},a,{classes:f}))}),RTe=ITe;function NTe(t){return Zn("MuiLink",t)}const PTe=Xn("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),$Te=PTe,xee={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},DTe=t=>xee[t]||t,LTe=({theme:t,ownerState:e})=>{const n=DTe(e.color),r=yv(t,`palette.${n}`,!1)||e.color,i=yv(t,`palette.${n}Channel`);return"vars"in t&&i?`rgba(${i} / 0.4)`:Hr(r,.4)},OTe=LTe,FTe=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],UTe=t=>{const{classes:e,component:n,focusVisible:r,underline:i}=t,s={root:["root",`underline${kt(i)}`,n==="button"&&"button",r&&"focusVisible"]};return ir(s,NTe,e)},BTe=Gt(En,{name:"MuiLink",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`underline${kt(n.underline)}`],n.component==="button"&&e.button]}})(({theme:t,ownerState:e})=>ve({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&ve({textDecoration:"underline"},e.color!=="inherit"&&{textDecorationColor:OTe({theme:t,ownerState:e})},{"&:hover":{textDecorationColor:"inherit"}}),e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${$Te.focusVisible}`]:{outline:"auto"}})),zTe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiLink"}),{className:i,color:s="primary",component:o="a",onBlur:a,onFocus:l,TypographyClasses:c,underline:u="always",variant:d="inherit",sx:f}=r,h=Zt(r,FTe),{isFocusVisibleRef:p,onBlur:v,onFocus:m,ref:g}=wF(),[y,x]=N.useState(!1),S=zi(n,g),_=k=>{v(k),p.current===!1&&x(!1),a&&a(k)},C=k=>{m(k),p.current===!0&&x(!0),l&&l(k)},T=ve({},r,{color:s,component:o,focusVisible:y,underline:u,variant:d}),A=UTe(T);return L.jsx(BTe,ve({color:s,className:sn(A.root,i),classes:c,component:o,onBlur:_,onFocus:C,ref:S,ownerState:T,variant:d,sx:[...Object.keys(xee).includes(s)?[]:[{color:s}],...Array.isArray(f)?f:[f]]},h))}),Lu=zTe,WTe=N.createContext({}),HD=WTe;function VTe(t){return Zn("MuiList",t)}Xn("MuiList",["root","padding","dense","subheader"]);const GTe=["children","className","component","dense","disablePadding","subheader"],HTe=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return ir({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},VTe,e)},jTe=Gt("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>ve({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),XTe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=r,u=Zt(r,GTe),d=N.useMemo(()=>({dense:a}),[a]),f=ve({},r,{component:o,dense:a,disablePadding:l}),h=HTe(f);return L.jsx(HD.Provider,{value:d,children:L.jsxs(jTe,ve({as:o,className:sn(h.root,s),ref:n,ownerState:f},u,{children:[c,i]}))})}),qTe=XTe,YTe=Xn("MuiListItemIcon",["root","alignItemsFlexStart"]),D9=YTe,KTe=Xn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),L9=KTe,ZTe=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function RN(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function O9(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function bee(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function Sx(t,e,n,r,i,s){let o=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!bee(a,s)||l)a=i(t,a,n);else return a.focus(),!0}return!1}const JTe=N.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,f=Zt(e,ZTe),h=N.useRef(null),p=N.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});$c(()=>{i&&h.current.focus()},[i]),N.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(x,S)=>{const _=!h.current.style.width;if(x.clientHeight<h.current.clientHeight&&_){const C=`${PQ(bo(x))}px`;h.current.style[S.direction==="rtl"?"paddingLeft":"paddingRight"]=C,h.current.style.width=`calc(100% + ${C})`}return h.current}}),[]);const v=x=>{const S=h.current,_=x.key,C=bo(S).activeElement;if(_==="ArrowDown")x.preventDefault(),Sx(S,C,c,l,RN);else if(_==="ArrowUp")x.preventDefault(),Sx(S,C,c,l,O9);else if(_==="Home")x.preventDefault(),Sx(S,null,c,l,RN);else if(_==="End")x.preventDefault(),Sx(S,null,c,l,O9);else if(_.length===1){const T=p.current,A=_.toLowerCase(),k=performance.now();T.keys.length>0&&(k-T.lastTime>500?(T.keys=[],T.repeating=!0,T.previousKeyMatched=!0):T.repeating&&A!==T.keys[0]&&(T.repeating=!1)),T.lastTime=k,T.keys.push(A);const M=C&&!T.repeating&&bee(C,T);T.previousKeyMatched&&(M||Sx(S,C,!1,l,RN,T))?x.preventDefault():T.previousKeyMatched=!1}u&&u(x)},m=zi(h,n);let g=-1;N.Children.forEach(o,(x,S)=>{if(!N.isValidElement(x)){g===S&&(g+=1,g>=o.length&&(g=-1));return}x.props.disabled||(d==="selectedMenu"&&x.props.selected||g===-1)&&(g=S),g===S&&(x.props.disabled||x.props.muiSkipListHighlight||x.type.muiSkipListHighlight)&&(g+=1,g>=o.length&&(g=-1))});const y=N.Children.map(o,(x,S)=>{if(S===g){const _={};return s&&(_.autoFocus=!0),x.props.tabIndex===void 0&&d==="selectedMenu"&&(_.tabIndex=0),N.cloneElement(x,_)}return x});return L.jsx(qTe,ve({role:"menu",ref:m,className:a,onKeyDown:v,tabIndex:i?0:-1},f,{children:y}))}),QTe=JTe;function eEe(t){return Zn("MuiPopover",t)}Xn("MuiPopover",["root","paper"]);const tEe=["onEntering"],nEe=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],rEe=["slotProps"];function F9(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function U9(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function B9(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function NN(t){return typeof t=="function"?t():t}const iEe=t=>{const{classes:e}=t;return ir({root:["root"],paper:["paper"]},eEe,e)},sEe=Gt(HCe,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),wee=Gt(Bw,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),oEe=N.forwardRef(function(e,n){var r,i,s;const o=sr({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:f,className:h,container:p,elevation:v=8,marginThreshold:m=16,open:g,PaperProps:y={},slots:x,slotProps:S,transformOrigin:_={vertical:"top",horizontal:"left"},TransitionComponent:C=wTe,transitionDuration:T="auto",TransitionProps:{onEntering:A}={},disableScrollLock:k=!1}=o,M=Zt(o.TransitionProps,tEe),R=Zt(o,nEe),P=(r=S==null?void 0:S.paper)!=null?r:y,O=N.useRef(),$=zi(O,P.ref),U=ve({},o,{anchorOrigin:c,anchorReference:d,elevation:v,marginThreshold:m,externalPaperSlotProps:P,transformOrigin:_,TransitionComponent:C,transitionDuration:T,TransitionProps:M}),z=iEe(U),X=N.useCallback(()=>{if(d==="anchorPosition")return u;const Me=NN(l),Ee=(Me&&Me.nodeType===1?Me:bo(O.current).body).getBoundingClientRect();return{top:Ee.top+F9(Ee,c.vertical),left:Ee.left+U9(Ee,c.horizontal)}},[l,c.horizontal,c.vertical,u,d]),D=N.useCallback(Me=>({vertical:F9(Me,_.vertical),horizontal:U9(Me,_.horizontal)}),[_.horizontal,_.vertical]),F=N.useCallback(Me=>{const we={width:Me.offsetWidth,height:Me.offsetHeight},Ee=D(we);if(d==="none")return{top:null,left:null,transformOrigin:B9(Ee)};const me=X();let qe=me.top-Ee.vertical,ke=me.left-Ee.horizontal;const ee=qe+we.height,Y=ke+we.width,oe=ih(NN(l)),xe=oe.innerHeight-m,Se=oe.innerWidth-m;if(m!==null&&qe<m){const be=qe-m;qe-=be,Ee.vertical+=be}else if(m!==null&&ee>xe){const be=ee-xe;qe-=be,Ee.vertical+=be}if(m!==null&&ke<m){const be=ke-m;ke-=be,Ee.horizontal+=be}else if(Y>Se){const be=Y-Se;ke-=be,Ee.horizontal+=be}return{top:`${Math.round(qe)}px`,left:`${Math.round(ke)}px`,transformOrigin:B9(Ee)}},[l,d,X,D,m]),[W,V]=N.useState(g),j=N.useCallback(()=>{const Me=O.current;if(!Me)return;const we=F(Me);we.top!==null&&(Me.style.top=we.top),we.left!==null&&(Me.style.left=we.left),Me.style.transformOrigin=we.transformOrigin,V(!0)},[F]);N.useEffect(()=>(k&&window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)),[l,k,j]);const J=(Me,we)=>{A&&A(Me,we),j()},Q=()=>{V(!1)};N.useEffect(()=>{g&&j()}),N.useImperativeHandle(a,()=>g?{updatePosition:()=>{j()}}:null,[g,j]),N.useEffect(()=>{if(!g)return;const Me=bF(()=>{j()}),we=ih(l);return we.addEventListener("resize",Me),()=>{Me.clear(),we.removeEventListener("resize",Me)}},[l,g,j]);let te=T;T==="auto"&&!C.muiSupportAuto&&(te=void 0);const re=p||(l?bo(NN(l)).body:void 0),se=(i=x==null?void 0:x.root)!=null?i:sEe,fe=(s=x==null?void 0:x.paper)!=null?s:wee,ae=mm({elementType:fe,externalSlotProps:ve({},P,{style:W?P.style:ve({},P.style,{opacity:0})}),additionalProps:{elevation:v,ref:$},ownerState:U,className:sn(z.paper,P==null?void 0:P.className)}),ye=mm({elementType:se,externalSlotProps:(S==null?void 0:S.root)||{},externalForwardedProps:R,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:re,open:g},ownerState:U,className:sn(z.root,h)}),{slotProps:le}=ye,H=Zt(ye,rEe);return L.jsx(se,ve({},H,!GE(se)&&{slotProps:le,disableScrollLock:k},{children:L.jsx(C,ve({appear:!0,in:g,onEntering:J,onExited:Q,timeout:te},M,{children:L.jsx(fe,ve({},ae,{children:f}))}))}))}),aEe=oEe;function lEe(t){return Zn("MuiMenu",t)}Xn("MuiMenu",["root","paper","list"]);const cEe=["onEntering"],uEe=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],dEe={vertical:"top",horizontal:"right"},fEe={vertical:"top",horizontal:"left"},hEe=t=>{const{classes:e}=t;return ir({root:["root"],paper:["paper"],list:["list"]},lEe,e)},pEe=Gt(aEe,{shouldForwardProp:t=>Kl(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),mEe=Gt(wee,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),gEe=Gt(QTe,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),vEe=N.forwardRef(function(e,n){var r,i;const s=sr({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:f,PaperProps:h={},PopoverClasses:p,transitionDuration:v="auto",TransitionProps:{onEntering:m}={},variant:g="selectedMenu",slots:y={},slotProps:x={}}=s,S=Zt(s.TransitionProps,cEe),_=Zt(s,uEe),C=PF(),T=C.direction==="rtl",A=ve({},s,{autoFocus:o,disableAutoFocusItem:c,MenuListProps:u,onEntering:m,PaperProps:h,transitionDuration:v,TransitionProps:S,variant:g}),k=hEe(A),M=o&&!c&&f,R=N.useRef(null),P=(F,W)=>{R.current&&R.current.adjustStyleForScrollbar(F,C),m&&m(F,W)},O=F=>{F.key==="Tab"&&(F.preventDefault(),d&&d(F,"tabKeyDown"))};let $=-1;N.Children.map(a,(F,W)=>{N.isValidElement(F)&&(F.props.disabled||(g==="selectedMenu"&&F.props.selected||$===-1)&&($=W))});const U=(r=y.paper)!=null?r:mEe,z=(i=x.paper)!=null?i:h,X=mm({elementType:y.root,externalSlotProps:x.root,ownerState:A,className:[k.root,l]}),D=mm({elementType:U,externalSlotProps:z,ownerState:A,className:k.paper});return L.jsx(pEe,ve({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:T?"right":"left"},transformOrigin:T?dEe:fEe,slots:{paper:U,root:y.root},slotProps:{root:X,paper:D},open:f,ref:n,transitionDuration:v,TransitionProps:ve({onEntering:P},S),ownerState:A},_,{classes:p,children:L.jsx(gEe,ve({onKeyDown:O,actions:R,autoFocus:o&&($===-1||c),autoFocusItem:M,variant:g},u,{className:sn(k.list,u.className),children:a}))}))}),See=vEe;function yEe(t){return Zn("MuiMenuItem",t)}const xEe=Xn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),_x=xEe,bEe=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],wEe=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},SEe=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:s,classes:o}=t,l=ir({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},yEe,o);return ve({},o,l)},_Ee=Gt(mb,{shouldForwardProp:t=>Kl(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:wEe})(({theme:t,ownerState:e})=>ve({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${_x.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Hr(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${_x.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Hr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${_x.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Hr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Hr(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${_x.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${_x.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${N9.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${N9.inset}`]:{marginLeft:52},[`& .${L9.root}`]:{marginTop:0,marginBottom:0},[`& .${L9.inset}`]:{paddingLeft:36},[`& .${D9.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&ve({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${D9.root} svg`]:{fontSize:"1.25rem"}}))),CEe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:o=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:f}=r,h=Zt(r,bEe),p=N.useContext(HD),v=N.useMemo(()=>({dense:o||p.dense||!1,disableGutters:l}),[p.dense,o,l]),m=N.useRef(null);$c(()=>{i&&m.current&&m.current.focus()},[i]);const g=ve({},r,{dense:v.dense,divider:a,disableGutters:l}),y=SEe(r),x=zi(m,n);let S;return r.disabled||(S=d!==void 0?d:-1),L.jsx(HD.Provider,{value:v,children:L.jsx(_Ee,ve({ref:x,role:u,tabIndex:S,component:s,focusVisibleClassName:sn(y.focusVisible,c),className:sn(y.root,f)},h,{ownerState:g,classes:y}))})}),TEe=CEe;function EEe(t){return Zn("MuiNativeSelect",t)}const MEe=Xn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),XF=MEe,kEe=["className","disabled","error","IconComponent","inputRef","variant"],AEe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${kt(n)}`,s&&"iconOpen",r&&"disabled"]};return ir(a,EEe,e)},_ee=({ownerState:t,theme:e})=>ve({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":ve({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${XF.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),IEe=Gt("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Kl,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${XF.multiple}`]:e.multiple}]}})(_ee),Cee=({ownerState:t,theme:e})=>ve({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${XF.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),REe=Gt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${kt(n.variant)}`],n.open&&e.iconOpen]}})(Cee),NEe=N.forwardRef(function(e,n){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:l="standard"}=e,c=Zt(e,kEe),u=ve({},e,{disabled:i,variant:l,error:s}),d=AEe(u);return L.jsxs(N.Fragment,{children:[L.jsx(IEe,ve({ownerState:u,className:sn(d.select,r),disabled:i,ref:a||n},c)),e.multiple?null:L.jsx(REe,{as:o,ownerState:u,className:d.icon})]})}),PEe=NEe;var z9;const $Ee=["children","classes","className","label","notched"],DEe=Gt("fieldset",{shouldForwardProp:Kl})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),LEe=Gt("legend",{shouldForwardProp:Kl})(({ownerState:t,theme:e})=>ve({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&ve({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function OEe(t){const{className:e,label:n,notched:r}=t,i=Zt(t,$Ee),s=n!=null&&n!=="",o=ve({},t,{notched:r,withLabel:s});return L.jsx(DEe,ve({"aria-hidden":!0,className:e,ownerState:o},i,{children:L.jsx(LEe,{ownerState:o,children:s?L.jsx("span",{children:n}):z9||(z9=L.jsx("span",{className:"notranslate",children:"​"}))})}))}const FEe=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],UEe=t=>{const{classes:e}=t,r=ir({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},k_e,e);return ve({},e,r)},BEe=Gt(uA,{shouldForwardProp:t=>Kl(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:lA})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return ve({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${nu.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${nu.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${nu.focused} .${nu.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${nu.error} .${nu.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${nu.disabled} .${nu.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&ve({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),zEe=Gt(OEe,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),WEe=Gt(dA,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:cA})(({theme:t,ownerState:e})=>ve({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),Tee=N.forwardRef(function(e,n){var r,i,s,o,a;const l=sr({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:f,multiline:h=!1,notched:p,slots:v={},type:m="text"}=l,g=Zt(l,FEe),y=UEe(l),x=ty(),S=ey({props:l,muiFormControl:x,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),_=ve({},l,{color:S.color||"primary",disabled:S.disabled,error:S.error,focused:S.focused,formControl:x,fullWidth:u,hiddenLabel:S.hiddenLabel,multiline:h,size:S.size,type:m}),C=(r=(i=v.root)!=null?i:c.Root)!=null?r:BEe,T=(s=(o=v.input)!=null?o:c.Input)!=null?s:WEe;return L.jsx(jF,ve({slots:{root:C,input:T},renderSuffix:A=>L.jsx(zEe,{ownerState:_,className:y.notchedOutline,label:f!=null&&f!==""&&S.required?a||(a=L.jsxs(N.Fragment,{children:[f," ","*"]})):f,notched:typeof p<"u"?p:!!(A.startAdornment||A.filled||A.focused)}),fullWidth:u,inputComponent:d,multiline:h,ref:n,type:m},g,{classes:ve({},y,{notchedOutline:null})}))});Tee.muiName="Input";const Eee=Tee;function VEe(t){return Zn("MuiSelect",t)}const GEe=Xn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Cx=GEe;var W9;const HEe=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],jEe=Gt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${Cx.select}`]:e.select},{[`&.${Cx.select}`]:e[n.variant]},{[`&.${Cx.error}`]:e.error},{[`&.${Cx.multiple}`]:e.multiple}]}})(_ee,{[`&.${Cx.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),XEe=Gt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${kt(n.variant)}`],n.open&&e.iconOpen]}})(Cee),qEe=Gt("input",{shouldForwardProp:t=>Qbe(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function V9(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function YEe(t){return t==null||typeof t=="string"&&!t.trim()}const KEe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${kt(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return ir(a,VEe,e)},ZEe=N.forwardRef(function(e,n){var r;const{"aria-describedby":i,"aria-label":s,autoFocus:o,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:f,displayEmpty:h,error:p=!1,IconComponent:v,inputRef:m,labelId:g,MenuProps:y={},multiple:x,name:S,onBlur:_,onChange:C,onClose:T,onFocus:A,onOpen:k,open:M,readOnly:R,renderValue:P,SelectDisplayProps:O={},tabIndex:$,value:U,variant:z="standard"}=e,X=Zt(e,HEe),[D,F]=Y0({controlled:U,default:d,name:"Select"}),[W,V]=Y0({controlled:M,default:u,name:"Select"}),j=N.useRef(null),J=N.useRef(null),[Q,te]=N.useState(null),{current:re}=N.useRef(M!=null),[se,fe]=N.useState(),ae=zi(n,m),ye=N.useCallback(Ye=>{J.current=Ye,Ye&&te(Ye)},[]),le=Q==null?void 0:Q.parentNode;N.useImperativeHandle(ae,()=>({focus:()=>{J.current.focus()},node:j.current,value:D}),[D]),N.useEffect(()=>{u&&W&&Q&&!re&&(fe(a?null:le.clientWidth),J.current.focus())},[Q,a]),N.useEffect(()=>{o&&J.current.focus()},[o]),N.useEffect(()=>{if(!g)return;const Ye=bo(J.current).getElementById(g);if(Ye){const Xe=()=>{getSelection().isCollapsed&&J.current.focus()};return Ye.addEventListener("click",Xe),()=>{Ye.removeEventListener("click",Xe)}}},[g]);const H=(Ye,Xe)=>{Ye?k&&k(Xe):T&&T(Xe),re||(fe(a?null:le.clientWidth),V(Ye))},Me=Ye=>{Ye.button===0&&(Ye.preventDefault(),J.current.focus(),H(!0,Ye))},we=Ye=>{H(!1,Ye)},Ee=N.Children.toArray(l),me=Ye=>{const Xe=Ee.find(Le=>Le.props.value===Ye.target.value);Xe!==void 0&&(F(Xe.props.value),C&&C(Ye,Xe))},qe=Ye=>Xe=>{let Le;if(Xe.currentTarget.hasAttribute("tabindex")){if(x){Le=Array.isArray(D)?D.slice():[];const he=D.indexOf(Ye.props.value);he===-1?Le.push(Ye.props.value):Le.splice(he,1)}else Le=Ye.props.value;if(Ye.props.onClick&&Ye.props.onClick(Xe),D!==Le&&(F(Le),C)){const he=Xe.nativeEvent||Xe,He=new he.constructor(he.type,he);Object.defineProperty(He,"target",{writable:!0,value:{value:Le,name:S}}),C(He,Ye)}x||H(!1,Xe)}},ke=Ye=>{R||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Ye.key)!==-1&&(Ye.preventDefault(),H(!0,Ye))},ee=Q!==null&&W,Y=Ye=>{!ee&&_&&(Object.defineProperty(Ye,"target",{writable:!0,value:{value:D,name:S}}),_(Ye))};delete X["aria-invalid"];let oe,xe;const Se=[];let be=!1;(jE({value:D})||h)&&(P?oe=P(D):be=!0);const Re=Ee.map(Ye=>{if(!N.isValidElement(Ye))return null;let Xe;if(x){if(!Array.isArray(D))throw new Error(rh(2));Xe=D.some(Le=>V9(Le,Ye.props.value)),Xe&&be&&Se.push(Ye.props.children)}else Xe=V9(D,Ye.props.value),Xe&&be&&(xe=Ye.props.children);return N.cloneElement(Ye,{"aria-selected":Xe?"true":"false",onClick:qe(Ye),onKeyUp:Le=>{Le.key===" "&&Le.preventDefault(),Ye.props.onKeyUp&&Ye.props.onKeyUp(Le)},role:"option",selected:Xe,value:void 0,"data-value":Ye.props.value})});be&&(x?Se.length===0?oe=null:oe=Se.reduce((Ye,Xe,Le)=>(Ye.push(Xe),Le<Se.length-1&&Ye.push(", "),Ye),[]):oe=xe);let Ke=se;!a&&re&&Q&&(Ke=le.clientWidth);let ze;typeof $<"u"?ze=$:ze=f?null:0;const Pe=O.id||(S?`mui-component-select-${S}`:void 0),De=ve({},e,{variant:z,value:D,open:ee,error:p}),We=KEe(De),gt=ve({},y.PaperProps,(r=y.slotProps)==null?void 0:r.paper),ct=Fk();return L.jsxs(N.Fragment,{children:[L.jsx(jEe,ve({ref:ye,tabIndex:ze,role:"combobox","aria-controls":ct,"aria-disabled":f?"true":void 0,"aria-expanded":ee?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[g,Pe].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:ke,onMouseDown:f||R?null:Me,onBlur:Y,onFocus:A},O,{ownerState:De,className:sn(O.className,We.select,c),id:Pe,children:YEe(oe)?W9||(W9=L.jsx("span",{className:"notranslate",children:"​"})):oe})),L.jsx(qEe,ve({"aria-invalid":p,value:Array.isArray(D)?D.join(","):D,name:S,ref:j,"aria-hidden":!0,onChange:me,tabIndex:-1,disabled:f,className:We.nativeInput,autoFocus:o,ownerState:De},X)),L.jsx(XEe,{as:v,className:We.icon,ownerState:De}),L.jsx(See,ve({id:`menu-${S||""}`,anchorEl:le,open:ee,onClose:we,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:ve({"aria-labelledby":g,role:"listbox","aria-multiselectable":x?"true":void 0,disableListWrap:!0,id:ct},y.MenuListProps),slotProps:ve({},y.slotProps,{paper:ve({},gt,{style:ve({minWidth:Ke},gt!=null?gt.style:null)})}),children:Re}))]})}),JEe=ZEe,QEe=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],eMe=["root"],tMe=t=>{const{classes:e}=t;return e},qF={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>Kl(t)&&t!=="variant",slot:"Root"},nMe=Gt(yee,qF)(""),rMe=Gt(Eee,qF)(""),iMe=Gt(mee,qF)(""),Mee=N.forwardRef(function(e,n){const r=sr({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=lee,id:d,input:f,inputProps:h,label:p,labelId:v,MenuProps:m,multiple:g=!1,native:y=!1,onClose:x,onOpen:S,open:_,renderValue:C,SelectDisplayProps:T,variant:A="outlined"}=r,k=Zt(r,QEe),M=y?PEe:JEe,R=ty(),P=ey({props:r,muiFormControl:R,states:["variant","error"]}),O=P.variant||A,$=ve({},r,{variant:O,classes:o}),U=tMe($),z=Zt(U,eMe),X=f||{standard:L.jsx(nMe,{ownerState:$}),outlined:L.jsx(rMe,{label:p,ownerState:$}),filled:L.jsx(iMe,{ownerState:$})}[O],D=zi(n,X.ref);return L.jsx(N.Fragment,{children:N.cloneElement(X,ve({inputComponent:M,inputProps:ve({children:s,error:P.error,IconComponent:u,variant:O,type:void 0,multiple:g},y?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:v,MenuProps:m,onClose:x,onOpen:S,open:_,renderValue:C,SelectDisplayProps:ve({id:d},T)},h,{classes:h?xa(z,h.classes):z},f?f.props.inputProps:{})},g&&y&&O==="outlined"?{notched:!0}:{},{ref:D,className:sn(X.props.className,a,U.root)},!f&&{variant:O},k))})});Mee.muiName="Select";const sMe=Mee;function oMe(t){return Zn("MuiToolbar",t)}Xn("MuiToolbar",["root","gutters","regular","dense"]);const aMe=["className","component","disableGutters","variant"],lMe=t=>{const{classes:e,disableGutters:n,variant:r}=t;return ir({root:["root",!n&&"gutters",r]},oMe,e)},cMe=Gt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(({theme:t,ownerState:e})=>ve({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:t,ownerState:e})=>e.variant==="regular"&&t.mixins.toolbar),uMe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiToolbar"}),{className:i,component:s="div",disableGutters:o=!1,variant:a="regular"}=r,l=Zt(r,aMe),c=ve({},r,{component:s,disableGutters:o,variant:a}),u=lMe(c);return L.jsx(cMe,ve({as:s,className:sn(u.root,i),ref:n,ownerState:c},l))}),dMe=uMe;function fMe(t){return Zn("MuiTextField",t)}Xn("MuiTextField",["root"]);const hMe=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],pMe={standard:yee,filled:mee,outlined:Eee},mMe=t=>{const{classes:e}=t;return ir({root:["root"]},fMe,e)},gMe=Gt(nTe,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),vMe=N.forwardRef(function(e,n){const r=sr({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:o,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:d=!1,FormHelperTextProps:f,fullWidth:h=!1,helperText:p,id:v,InputLabelProps:m,inputProps:g,InputProps:y,inputRef:x,label:S,maxRows:_,minRows:C,multiline:T=!1,name:A,onBlur:k,onChange:M,onFocus:R,placeholder:P,required:O=!1,rows:$,select:U=!1,SelectProps:z,type:X,value:D,variant:F="outlined"}=r,W=Zt(r,hMe),V=ve({},r,{autoFocus:s,color:l,disabled:u,error:d,fullWidth:h,multiline:T,required:O,select:U,variant:F}),j=mMe(V),J={};F==="outlined"&&(m&&typeof m.shrink<"u"&&(J.notched=m.shrink),J.label=S),U&&((!z||!z.native)&&(J.id=void 0),J["aria-describedby"]=void 0);const Q=Fk(v),te=p&&Q?`${Q}-helper-text`:void 0,re=S&&Q?`${Q}-label`:void 0,se=pMe[F],fe=L.jsx(se,ve({"aria-describedby":te,autoComplete:i,autoFocus:s,defaultValue:c,fullWidth:h,multiline:T,name:A,rows:$,maxRows:_,minRows:C,type:X,value:D,id:Q,inputRef:x,onBlur:k,onChange:M,onFocus:R,placeholder:P,inputProps:g},J,y));return L.jsxs(gMe,ve({className:sn(j.root,a),disabled:u,error:d,fullWidth:h,ref:n,required:O,color:l,variant:F,ownerState:V},W,{children:[S!=null&&S!==""&&L.jsx(RTe,ve({htmlFor:Q,id:re},m,{children:S})),U?L.jsx(sMe,ve({"aria-describedby":te,id:Q,labelId:re,value:D,input:fe},z,{children:o})):fe,p&&L.jsx(cTe,ve({id:te},f,{children:p}))]}))}),yMe=vMe,xMe="/page/assets/popcorn-kcoz_2Ri.gif",PN=()=>L.jsx(L.Fragment,{children:L.jsxs(Qn,{sx:{textAlign:"center",justifyItems:"center"},children:[L.jsx(Qn,{component:"img",sx:{height:125,width:125,borderRadius:"150px"},alt:"edwin",src:xMe}),L.jsx(En,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left",maxWidth:"xl",mx:"auto"},children:"Hi, I'm Edwin. I am a math educator interested in computer science and machine learning.  During my free time, I like to ride my bike 🚴 and study the french language 🥖."})]})});var YF={},kee={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(kee);var Vw=kee.exports,$N={};const bMe=UK(awe);var G9;function Gw(){return G9||(G9=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=bMe}($N)),$N}var wMe=Vw;Object.defineProperty(YF,"__esModule",{value:!0});var Aee=YF.default=void 0,SMe=wMe(Gw()),_Me=L,CMe=(0,SMe.default)((0,_Me.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");Aee=YF.default=CMe;var KF={},TMe=Vw;Object.defineProperty(KF,"__esModule",{value:!0});var Iee=KF.default=void 0;kMe(N);var EMe=TMe(Gw()),MMe=L;function Ree(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Ree=function(r){return r?n:e})(t)}function kMe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Ree(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}var AMe=(0,EMe.default)((0,MMe.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub");Iee=KF.default=AMe;var ZF={},IMe=Vw;Object.defineProperty(ZF,"__esModule",{value:!0});var Nee=ZF.default=void 0;PMe(N);var RMe=IMe(Gw()),NMe=L;function Pee(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Pee=function(r){return r?n:e})(t)}function PMe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Pee(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}var $Me=(0,RMe.default)((0,NMe.jsx)("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn");Nee=ZF.default=$Me;const H9=["projects","jupyter-notebooks","about"];function DMe(){const[t,e]=N.useState(null),n=i=>{e(i.currentTarget)},r=()=>{e(null)};return L.jsx(a2e,{position:"static",sx:{bgcolor:"black"},children:L.jsx(hee,{maxWidth:"xl",children:L.jsxs(dMe,{disableGutters:!0,children:[L.jsx(En,{variant:"h6",noWrap:!0,component:"a",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"edwin-torres"}),L.jsx(S1,{href:"https://github.com/edwin-torres",target:"_blank",children:L.jsx(Iee,{sx:{color:"white",display:{xs:"none",md:"flex"},mr:1,"&:hover":{transform:"scale(1.1)",cursor:"pointer"}}})}),L.jsx(S1,{href:"https://www.linkedin.com/in/torres-edwin/",target:"_blank",children:L.jsx(Nee,{sx:{color:"white",display:{xs:"none",md:"flex","&:hover":{transform:"scale(1.1)",cursor:"pointer"}},mr:1}})}),L.jsxs(Qn,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[L.jsx(S1,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:n,color:"inherit",children:L.jsx(Aee,{})}),L.jsx(See,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!t,onClose:r,sx:{display:{xs:"block",md:"none"}},children:H9.map(i=>L.jsx(TEe,{component:cb,to:"/"+i,onClick:r,children:L.jsx(En,{textAlign:"center",children:i})},i))})]}),L.jsx(En,{variant:"h5",noWrap:!0,component:"a",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"edwin-torres"}),L.jsx(Qn,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:H9.map(i=>L.jsx(kc,{component:cb,to:"/"+i,onClick:r,sx:{my:2,color:"white",display:"block"},children:i},i))})]})})})}function LMe({name:t,description:e,appRoute:n,code_url:r}){return L.jsxs(uee,{sx:{p:0,m:0,bgcolor:"#d7ccc8",borderRadius:"16px",justifyContent:"center",textAlign:"center",display:"flex"},children:[L.jsx(fee,{children:L.jsxs(Qn,{sx:{p:0,m:0,height:200,width:355},children:[L.jsx(En,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0}),L.jsx(En,{variant:"h5",component:"div",sx:{mt:3,mb:3},children:t}),L.jsxs(En,{sx:{mb:3},variant:"body2",children:[e,L.jsx("br",{})]}),L.jsx(kc,{component:cb,to:n,sx:{m:1,bgcolor:"#30a7d7","&.MuiButton-root:hover":{bgcolor:"#F15A59"}},variant:"contained",size:"small",children:" Web App"}),L.jsx(kc,{component:cb,to:r,target:"_blank",sx:{m:1,bgcolor:"#30a7d7","&.MuiButton-root:hover":{bgcolor:"#F15A59"}},variant:"contained",size:"small",children:" Code"})]})}),L.jsx(dee,{})]})}function OMe(){const t=[{name:"IMBD Episode Ratings📺",description:"Visualization of popular TV Series",appRoute:"/projects/ratings",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Ratings.jsx"},{name:"Congress Composition🏛️📜",description:"Congress members by generation",appRoute:"/projects/congress",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Congress.jsx"},{name:"Lorenz Attractor🌀",description:"Sensitive dependence on initial condition.",appRoute:"/projects/lorenz",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Lorenz.jsx"},{name:"Path Finder🌟",description:"Path finding algorithm using A*  ",appRoute:"/projects/astar",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Astar.jsx"},{name:"College Demographics👩‍🎓",description:"Laredo College Student Demographics",appRoute:"/projects/college-demographics",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/CollegeDemographics.jsx"},{name:"Chaos🌪️",description:"Sierpinski triangle via chaos game.",appRoute:"/projects/chaos",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Chaos.jsx"},{name:"Spiral🌌",description:"Just a cool rotating spiral",appRoute:"/projects/spiral",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Spiral.jsx"},{name:"Basic M.L. Model🤖🧠",description:"Predicts a digit 0-9.",appRoute:"/projects/mnist",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Minst.jsx"},{name:"Breakout Game🕹️🏓",description:"Classic Game ",appRoute:"/projects/breakout",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Breakout.jsx"}];return L.jsx(Qn,{sx:{p:0,m:0,flexGrow:1,bgcolor:"black",textAlign:"center",justifyContent:"center",display:"flex"},children:L.jsx(XE,{container:!0,sx:{bgcolor:"black"},spacing:{xs:1,md:2},columns:{xs:1,sm:2,md:3},children:t.map((e,n)=>L.jsx(XE,{sx:{bgcolor:"black"},xs:1,sm:1,md:1,children:L.jsx(LMe,{name:e.name,description:e.description,appRoute:e.appRoute,code_url:e.codeUrl})},n))})})}var FMe=Object.defineProperty,UMe=(t,e)=>{for(var n in e)FMe(t,n,{get:e[n],enumerable:!0})},Dc={};UMe(Dc,{assign:()=>WMe,colors:()=>Xf,createStringInterpolator:()=>i5,skipAnimation:()=>Bee,to:()=>Uee,willAdvance:()=>s5});var JF=jw(),Nn=t=>Hw(t,JF),QF=jw();Nn.write=t=>Hw(t,QF);var fA=jw();Nn.onStart=t=>Hw(t,fA);var e5=jw();Nn.onFrame=t=>Hw(t,e5);var t5=jw();Nn.onFinish=t=>Hw(t,t5);var Z0=[];Nn.setTimeout=(t,e)=>{const n=Nn.now()+e,r=()=>{const s=Z0.findIndex(o=>o.cancel==r);~s&&Z0.splice(s,1),Pf-=~s?1:0},i={time:n,handler:t,cancel:r};return Z0.splice($ee(n),0,i),Pf+=1,Dee(),i};var $ee=t=>~(~Z0.findIndex(e=>e.time>t)||~Z0.length);Nn.cancel=t=>{fA.delete(t),e5.delete(t),t5.delete(t),JF.delete(t),QF.delete(t)};Nn.sync=t=>{jD=!0,Nn.batchedUpdates(t),jD=!1};Nn.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,Nn.onStart(n)}return r.handler=t,r.cancel=()=>{fA.delete(n),e=null},r};var n5=typeof window<"u"?window.requestAnimationFrame:()=>{};Nn.use=t=>n5=t;Nn.now=typeof performance<"u"?()=>performance.now():Date.now;Nn.batchedUpdates=t=>t();Nn.catch=console.error;Nn.frameLoop="always";Nn.advance=()=>{Nn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Oee()};var Nf=-1,Pf=0,jD=!1;function Hw(t,e){jD?(e.delete(t),t(0)):(e.add(t),Dee())}function Dee(){Nf<0&&(Nf=0,Nn.frameLoop!=="demand"&&n5(Lee))}function BMe(){Nf=-1}function Lee(){~Nf&&(n5(Lee),Nn.batchedUpdates(Oee))}function Oee(){const t=Nf;Nf=Nn.now();const e=$ee(Nf);if(e&&(Fee(Z0.splice(0,e),n=>n.handler()),Pf-=e),!Pf){BMe();return}fA.flush(),JF.flush(t?Math.min(64,Nf-t):16.667),e5.flush(),QF.flush(),t5.flush()}function jw(){let t=new Set,e=t;return{add(n){Pf+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Pf-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Pf-=e.size,Fee(e,r=>r(n)&&t.add(r)),Pf+=t.size,e=t)}}}function Fee(t,e){t.forEach(n=>{try{e(n)}catch(r){Nn.catch(r)}})}function XD(){}var zMe=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),xt={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function md(t,e){if(xt.arr(t)){if(!xt.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Mn=(t,e)=>t.forEach(e);function Ou(t,e,n){if(xt.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var Bo=t=>xt.und(t)?[]:xt.arr(t)?t:[t];function M1(t,e){if(t.size){const n=Array.from(t);t.clear(),Mn(n,e)}}var n1=(t,...e)=>M1(t,n=>n(...e)),r5=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),i5,Uee,Xf=null,Bee=!1,s5=XD,WMe=t=>{t.to&&(Uee=t.to),t.now&&(Nn.now=t.now),t.colors!==void 0&&(Xf=t.colors),t.skipAnimation!=null&&(Bee=t.skipAnimation),t.createStringInterpolator&&(i5=t.createStringInterpolator),t.requestAnimationFrame&&Nn.use(t.requestAnimationFrame),t.batchedUpdates&&(Nn.batchedUpdates=t.batchedUpdates),t.willAdvance&&(s5=t.willAdvance),t.frameLoop&&(Nn.frameLoop=t.frameLoop)},k1=new Set,El=[],DN=[],qE=0,hA={get idle(){return!k1.size&&!El.length},start(t){qE>t.priority?(k1.add(t),Nn.onStart(VMe)):(zee(t),Nn(qD))},advance:qD,sort(t){if(qE)Nn.onFrame(()=>hA.sort(t));else{const e=El.indexOf(t);~e&&(El.splice(e,1),Wee(t))}},clear(){El=[],k1.clear()}};function VMe(){k1.forEach(zee),k1.clear(),Nn(qD)}function zee(t){El.includes(t)||Wee(t)}function Wee(t){El.splice(GMe(El,e=>e.priority>t.priority),0,t)}function qD(t){const e=DN;for(let n=0;n<El.length;n++){const r=El[n];qE=r.priority,r.idle||(s5(r),r.advance(t),r.idle||e.push(r))}return qE=0,DN=El,DN.length=0,El=e,El.length>0}function GMe(t,e){const n=t.findIndex(e);return n<0?t.length:n}var HMe=(t,e,n)=>Math.min(Math.max(n,t),e),jMe={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},_c="[-+]?\\d*\\.?\\d+",YE=_c+"%";function pA(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var XMe=new RegExp("rgb"+pA(_c,_c,_c)),qMe=new RegExp("rgba"+pA(_c,_c,_c,_c)),YMe=new RegExp("hsl"+pA(_c,YE,YE)),KMe=new RegExp("hsla"+pA(_c,YE,YE,_c)),ZMe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,JMe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,QMe=/^#([0-9a-fA-F]{6})$/,eke=/^#([0-9a-fA-F]{8})$/;function tke(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=QMe.exec(t))?parseInt(e[1]+"ff",16)>>>0:Xf&&Xf[t]!==void 0?Xf[t]:(e=XMe.exec(t))?(Og(e[1])<<24|Og(e[2])<<16|Og(e[3])<<8|255)>>>0:(e=qMe.exec(t))?(Og(e[1])<<24|Og(e[2])<<16|Og(e[3])<<8|q9(e[4]))>>>0:(e=ZMe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=eke.exec(t))?parseInt(e[1],16)>>>0:(e=JMe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=YMe.exec(t))?(j9(X9(e[1]),eC(e[2]),eC(e[3]))|255)>>>0:(e=KMe.exec(t))?(j9(X9(e[1]),eC(e[2]),eC(e[3]))|q9(e[4]))>>>0:null}function LN(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function j9(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=LN(i,r,t+1/3),o=LN(i,r,t),a=LN(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Og(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function X9(t){return(parseFloat(t)%360+360)%360/360}function q9(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function eC(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function Y9(t){let e=tke(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var yb=(t,e,n)=>{if(xt.fun(t))return t;if(xt.arr(t))return yb({range:t,output:e,extrapolate:n});if(xt.str(t.output[0]))return i5(t);const r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const u=rke(c,s);return nke(c,s[u],s[u+1],i[u],i[u+1],l,o,a,r.map)}};function nke(t,e,n,r,i,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function rke(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var ike=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return HMe(0,1,i/t)},KE=1.70158,tC=KE*1.525,K9=KE+1,Z9=2*Math.PI/3,J9=2*Math.PI/4.5,nC=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,ske={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>K9*t*t*t-KE*t*t,easeOutBack:t=>1+K9*Math.pow(t-1,3)+KE*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((tC+1)*2*t-tC)/2:(Math.pow(2*t-2,2)*((tC+1)*(t*2-2)+tC)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*Z9),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*Z9)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*J9))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*J9)/2+1,easeInBounce:t=>1-nC(1-t),easeOutBounce:nC,easeInOutBounce:t=>t<.5?(1-nC(1-2*t))/2:(1+nC(2*t-1))/2,steps:ike},xb=Symbol.for("FluidValue.get"),_v=Symbol.for("FluidValue.observers"),Tl=t=>!!(t&&t[xb]),oa=t=>t&&t[xb]?t[xb]():t,Q9=t=>t[_v]||null;function oke(t,e){t.eventObserved?t.eventObserved(e):t(e)}function bb(t,e){const n=t[_v];n&&n.forEach(r=>{oke(r,e)})}var Vee=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");ake(this,t)}},ake=(t,e)=>Gee(t,xb,e);function ny(t,e){if(t[xb]){let n=t[_v];n||Gee(t,_v,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function wb(t,e){const n=t[_v];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[_v]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var Gee=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),HT=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,lke=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,eG=new RegExp(`(${HT.source})(%|[a-z]+)`,"i"),cke=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,mA=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Hee=t=>{const[e,n]=uke(t);if(!e||r5())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&mA.test(n))return Hee(n);if(n)return n}return t},uke=t=>{const e=mA.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},ON,dke=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,jee=t=>{ON||(ON=Xf?new RegExp(`(${Object.keys(Xf).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>oa(s).replace(mA,Hee).replace(lke,Y9).replace(ON,Y9)),n=e.map(s=>s.match(HT).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>yb({...t,output:s}));return s=>{var l;const o=!eG.test(e[0])&&((l=e.find(c=>eG.test(c)))==null?void 0:l.replace(HT,""));let a=0;return e[0].replace(HT,()=>`${i[a++](s)}${o||""}`).replace(cke,dke)}},o5="react-spring: ",Xee=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${o5}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},fke=Xee(console.warn);function hke(){fke(`${o5}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var pke=Xee(console.warn);function mke(){pke(`${o5}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function gA(t){return xt.str(t)&&(t[0]=="#"||/\d/.test(t)||!r5()&&mA.test(t)||t in(Xf||{}))}var $p=r5()?N.useEffect:N.useLayoutEffect,gke=()=>{const t=N.useRef(!1);return $p(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function a5(){const t=N.useState()[1],e=gke();return()=>{e.current&&t(Math.random())}}function vke(t,e){const[n]=N.useState(()=>({inputs:e,result:t()})),r=N.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&yke(e,s.inputs)||(s={inputs:e,result:t()}):s=n,N.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function yke(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var l5=t=>N.useEffect(t,xke),xke=[];function YD(t){const e=N.useRef();return N.useEffect(()=>{e.current=t}),e.current}var Sb=Symbol.for("Animated:node"),bke=t=>!!t&&t[Sb]===t,iu=t=>t&&t[Sb],c5=(t,e)=>zMe(t,Sb,e),vA=t=>t&&t[Sb]&&t[Sb].getPayload(),qee=class{constructor(){c5(this,this)}getPayload(){return this.payload||[]}},Xw=class extends qee{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,xt.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Xw(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return xt.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,xt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},_b=class extends Xw{constructor(t){super(0),this._string=null,this._toString=yb({output:[t,t]})}static create(t){return new _b(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(xt.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=yb({output:[this.getValue(),t]})),this._value=0,super.reset()}},ZE={dependencies:null},yA=class extends qee{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Ou(this.source,(n,r)=>{bke(n)?e[r]=n.getValue(t):Tl(n)?e[r]=oa(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Mn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Ou(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){ZE.dependencies&&Tl(t)&&ZE.dependencies.add(t);const e=vA(t);e&&Mn(e,n=>this.add(n))}},Yee=class extends yA{constructor(t){super(t)}static create(t){return new Yee(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(wke)),!0)}};function wke(t){return(gA(t)?_b:Xw).create(t)}function KD(t){const e=iu(t);return e?e.constructor:xt.arr(t)?Yee:gA(t)?_b:Xw}var tG=(t,e)=>{const n=!xt.fun(t)||t.prototype&&t.prototype.isReactComponent;return N.forwardRef((r,i)=>{const s=N.useRef(null),o=n&&N.useCallback(p=>{s.current=Cke(i,p)},[i]),[a,l]=_ke(r,e),c=a5(),u=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},d=new Ske(u,l),f=N.useRef();$p(()=>(f.current=d,Mn(l,p=>ny(p,d)),()=>{f.current&&(Mn(f.current.deps,p=>wb(p,f.current)),Nn.cancel(f.current.update))})),N.useEffect(u,[]),l5(()=>()=>{const p=f.current;Mn(p.deps,v=>wb(v,p))});const h=e.getComponentProps(a.getValue());return N.createElement(t,{...h,ref:o})})},Ske=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Nn.write(this.update)}};function _ke(t,e){const n=new Set;return ZE.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new yA(t),ZE.dependencies=null,[t,n]}function Cke(t,e){return t&&(xt.fun(t)?t(e):t.current=e),e}var nG=Symbol.for("AnimatedComponent"),Tke=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new yA(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=rG(o)||"Anonymous";return xt.str(o)?o=s[o]||(s[o]=tG(o,i)):o=o[nG]||(o[nG]=tG(o,i)),o.displayName=`Animated(${a})`,o};return Ou(t,(o,a)=>{xt.arr(t)&&(a=rG(o)),s[a]=s(o)}),{animated:s}},rG=t=>xt.str(t)?t:t&&xt.str(t.displayName)?t.displayName:xt.fun(t)&&t.name||null;function aa(t,...e){return xt.fun(t)?t(...e):t}var A1=(t,e)=>t===!0||!!(e&&t&&(xt.fun(t)?t(e):Bo(t).includes(e))),Kee=(t,e)=>xt.obj(t)?e&&t[e]:t,Zee=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Eke=t=>t,xA=(t,e=Eke)=>{let n=Mke;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);xt.und(s)||(r[i]=s)}return r},Mke=["config","onProps","onStart","onChange","onPause","onResume","onRest"],kke={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Ake(t){const e={};let n=0;if(Ou(t,(r,i)=>{kke[i]||(e[i]=r,n++)}),n)return e}function u5(t){const e=Ake(t);if(e){const n={to:e};return Ou(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function Cb(t){return t=oa(t),xt.arr(t)?t.map(Cb):gA(t)?Dc.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Jee(t){for(const e in t)return!0;return!1}function ZD(t){return xt.fun(t)||xt.arr(t)&&xt.obj(t[0])}function JD(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function Qee(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var d5={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},QD={...d5.default,mass:1,damping:1,easing:ske.linear,clamp:!1},Ike=class{constructor(){this.velocity=0,Object.assign(this,QD)}};function Rke(t,e,n){n&&(n={...n},iG(n,e),e={...n,...e}),iG(t,e),Object.assign(t,e);for(const o in QD)t[o]==null&&(t[o]=QD[o]);let{frequency:r,damping:i}=t;const{mass:s}=t;return xt.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function iG(t,e){if(!xt.und(e.decay))t.duration=void 0;else{const n=!xt.und(e.tension)||!xt.und(e.friction);(n||!xt.und(e.frequency)||!xt.und(e.damping)||!xt.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var sG=[],Nke=class{constructor(){this.changed=!1,this.values=sG,this.toValues=null,this.fromValues=sG,this.config=new Ike,this.immediate=!1}};function ete(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,c,u=A1(n.cancel??(r==null?void 0:r.cancel),e);if(u)h();else{xt.und(n.pause)||(i.paused=A1(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=i.paused||A1(p,e)),l=aa(n.delay||0,e),p?(i.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){i.resumeQueue.add(f),i.timeouts.delete(c),c.cancel(),l=c.time-Nn.now()}function f(){l>0&&!Dc.skipAnimation?(i.delayed=!0,c=Nn.setTimeout(h,l),i.pauseQueue.add(d),i.timeouts.add(c)):h()}function h(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(c),t<=(i.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(p){a(p)}}})}var f5=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?J0(t.get()):e.every(n=>n.noop)?tte(t.get()):mc(t.get(),e.every(n=>n.finished)),tte=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),mc=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),J0=t=>({value:t,cancelled:!0,finished:!1});function nte(t,e,n,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const c=xA(e,(m,g)=>g==="onRest"?void 0:m);let u,d;const f=new Promise((m,g)=>(u=m,d=g)),h=m=>{const g=i<=(n.cancelId||0)&&J0(r)||i!==n.asyncId&&mc(r,!1);if(g)throw m.result=g,d(m),m},p=(m,g)=>{const y=new oG,x=new aG;return(async()=>{if(Dc.skipAnimation)throw Tb(n),x.result=mc(r,!1),d(x),x;h(y);const S=xt.obj(m)?{...m}:{...g,to:m};S.parentId=i,Ou(c,(C,T)=>{xt.und(S[T])&&(S[T]=C)});const _=await r.start(S);return h(y),n.paused&&await new Promise(C=>{n.resumeQueue.add(C)}),_})()};let v;if(Dc.skipAnimation)return Tb(n),mc(r,!1);try{let m;xt.arr(t)?m=(async g=>{for(const y of g)await p(y)})(t):m=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([m.then(u),f]),v=mc(r.get(),!0,!1)}catch(m){if(m instanceof oG)v=m.result;else if(m instanceof aG)v=m.result;else throw m}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return xt.fun(o)&&Nn.batchedUpdates(()=>{o(v,r,r.item)}),v})()}function Tb(t,e){M1(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var oG=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},aG=class extends Error{constructor(){super("SkipAnimationSignal")}},eL=t=>t instanceof h5,Pke=1,h5=class extends Vee{constructor(){super(...arguments),this.id=Pke++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=iu(this);return t&&t.getValue()}to(...t){return Dc.to(this,t)}interpolate(...t){return hke(),Dc.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){bb(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||hA.sort(this),bb(this,{type:"priority",parent:this,priority:t})}},vm=Symbol.for("SpringPhase"),rte=1,tL=2,nL=4,FN=t=>(t[vm]&rte)>0,hf=t=>(t[vm]&tL)>0,Tx=t=>(t[vm]&nL)>0,lG=(t,e)=>e?t[vm]|=tL|rte:t[vm]&=~tL,cG=(t,e)=>e?t[vm]|=nL:t[vm]&=~nL,$ke=class extends h5{constructor(t,e){if(super(),this.animation=new Nke,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!xt.und(t)||!xt.und(e)){const n=xt.obj(t)?{...t}:{...e,from:t};xt.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(hf(this)||this._state.asyncTo)||Tx(this)}get goal(){return oa(this.animation.to)}get velocity(){const t=iu(this);return t instanceof Xw?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return FN(this)}get isAnimating(){return hf(this)}get isPaused(){return Tx(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=vA(r.to);!o&&Tl(r.to)&&(i=Bo(oa(r.to))),r.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==_b?1:o?o[u].lastPosition:i[u];let f=r.immediate,h=d;if(!f){if(h=c.lastPosition,s.tension<=0){c.done=!0;return}let p=c.elapsedTime+=t;const v=r.fromValues[u],m=c.v0!=null?c.v0:c.v0=xt.arr(s.velocity)?s.velocity[u]:s.velocity;let g;const y=s.precision||(v==d?.005:Math.min(1,Math.abs(d-v)*.001));if(xt.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,S=Math.exp(-(1-x)*p);h=v+m/(1-x)*(1-S),f=Math.abs(c.lastPosition-h)<=y,g=m*S}else{g=c.lastVelocity==null?m:c.lastVelocity;const x=s.restVelocity||y/10,S=s.clamp?0:s.bounce,_=!xt.und(S),C=v==d?c.v0>0:v<d;let T,A=!1;const k=1,M=Math.ceil(t/k);for(let R=0;R<M&&(T=Math.abs(g)>x,!(!T&&(f=Math.abs(d-h)<=y,f)));++R){_&&(A=h==d||h>d==C,A&&(g=-g*S,h=d));const P=-s.tension*1e-6*(h-d),O=-s.friction*.001*g,$=(P+O)/s.mass;g=g+$*k,h=h+g*k}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,p=c.elapsedTime+=t)),x=(s.progress||0)+p/this._memoizedDuration,x=x>1?1:x<0?0:x,c.durationProgress=x),h=v+s.easing(x)*(d-v),g=(h-c.lastPosition)/t,f=x==1}c.lastVelocity=g,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(h,s.round)&&(n=!0)});const a=iu(this),l=a.getValue();if(e){const c=oa(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Nn.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(hf(this)){const{to:t,config:e}=this.animation;Nn.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return xt.und(t)?(n=this.queue||[],this.queue=[]):n=[xt.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>f5(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Tb(this._state,t&&this._lastCallId),Nn.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=xt.obj(n)?n[e]:n,(n==null||ZD(n))&&(n=void 0),r=xt.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return FN(this)||(t.reverse&&([n,r]=[r,n]),r=oa(r),xt.und(r)?iu(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,xA(t,(o,a)=>/^on/.test(a)?Kee(o,n):o)),dG(this,t,"onProps"),Mx(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return ete(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{Tx(this)||(cG(this,!0),n1(s.pauseQueue),Mx(this,"onPause",mc(this,Ex(this,this.animation.to)),this))},resume:()=>{Tx(this)&&(cG(this,!1),hf(this)&&this._resume(),n1(s.resumeQueue),Mx(this,"onResume",mc(this,Ex(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=ite(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(J0(this));const r=!xt.und(t.to),i=!xt.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(J0(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;i&&!r&&(!e.default||xt.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!md(d,c);f&&(a.from=d),d=oa(d);const h=!md(u,l);h&&this._focus(u);const p=ZD(e.to),{config:v}=a,{decay:m,velocity:g}=v;(r||i)&&(v.velocity=0),e.config&&!p&&Rke(v,aa(e.config,s),e.config!==o.config?aa(o.config,s):void 0);let y=iu(this);if(!y||xt.und(u))return n(mc(this,!0));const x=xt.und(e.reset)?i&&!e.default:!xt.und(d)&&A1(e.reset,s),S=x?d:this.get(),_=Cb(u),C=xt.num(_)||xt.arr(_)||gA(_),T=!p&&(!C||A1(o.immediate||e.immediate,s));if(h){const R=KD(u);if(R!==y.constructor)if(T)y=this._set(_);else throw Error(`Cannot animate between ${y.constructor.name} and ${R.name}, as the "to" prop suggests`)}const A=y.constructor;let k=Tl(u),M=!1;if(!k){const R=x||!FN(this)&&f;(h||R)&&(M=md(Cb(S),_),k=!M),(!md(a.immediate,T)&&!T||!md(v.decay,m)||!md(v.velocity,g))&&(k=!0)}if(M&&hf(this)&&(a.changed&&!x?k=!0:k||this._stop(l)),!p&&((k||Tl(l))&&(a.values=y.getPayload(),a.toValues=Tl(u)?null:A==_b?[1]:Bo(_)),a.immediate!=T&&(a.immediate=T,!T&&!x&&this._set(l)),k)){const{onRest:R}=a;Mn(Lke,O=>dG(this,e,O));const P=mc(this,Ex(this,l));n1(this._pendingCalls,P),this._pendingCalls.add(n),a.changed&&Nn.batchedUpdates(()=>{var O;a.changed=!x,R==null||R(P,this),x?aa(o.onRest,P):(O=a.onStart)==null||O.call(a,P,this)})}x&&this._set(S),p?n(nte(e.to,e,this._state,this)):k?this._start():hf(this)&&!h?this._pendingCalls.add(n):n(tte(S))}_focus(t){const e=this.animation;t!==e.to&&(Q9(this)&&this._detach(),e.to=t,Q9(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Tl(e)&&(ny(e,this),eL(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Tl(t)&&wb(t,this)}_set(t,e=!0){const n=oa(t);if(!xt.und(n)){const r=iu(this);if(!r||!md(n,r.getValue())){const i=KD(n);!r||r.constructor!=i?c5(this,i.create(n)):r.setValue(n),r&&Nn.batchedUpdates(()=>{this._onChange(n,e)})}}return iu(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Mx(this,"onStart",mc(this,Ex(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),aa(this.animation.onChange,t,this)),aa(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;iu(this).reset(oa(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),hf(this)||(lG(this,!0),Tx(this)||this._resume())}_resume(){Dc.skipAnimation?this.finish():hA.start(this)}_stop(t,e){if(hf(this)){lG(this,!1);const n=this.animation;Mn(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),bb(this,{type:"idle",parent:this});const r=e?J0(this.get()):mc(this.get(),Ex(this,t??n.to));n1(this._pendingCalls,r),n.changed&&(n.changed=!1,Mx(this,"onRest",r,this))}}};function Ex(t,e){const n=Cb(e),r=Cb(t.get());return md(r,n)}function ite(t,e=t.loop,n=t.to){const r=aa(e);if(r){const i=r!==!0&&u5(r),s=(i||t).reverse,o=!i||i.reset;return Eb({...t,loop:e,default:!1,pause:void 0,to:!s||ZD(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function Eb(t){const{to:e,from:n}=t=u5(t),r=new Set;return xt.obj(e)&&uG(e,r),xt.obj(n)&&uG(n,r),t.keys=r.size?Array.from(r):null,t}function Dke(t){const e=Eb(t);return xt.und(e.default)&&(e.default=xA(e)),e}function uG(t,e){Ou(t,(n,r)=>n!=null&&e.add(r))}var Lke=["onStart","onRest","onChange","onPause","onResume"];function dG(t,e,n){t.animation[n]=e[n]!==Zee(e,n)?Kee(e[n],t.key):void 0}function Mx(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var Oke=["onStart","onChange","onRest"],Fke=1,ste=class{constructor(t,e){this.id=Fke++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];xt.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Eb(t)),this}start(t){let{queue:e}=this;return t?e=Bo(t).map(Eb):this.queue=[],this._flush?this._flush(this,e):(ute(this,e),rL(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;Mn(Bo(e),r=>n[r].stop(!!t))}else Tb(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(xt.und(t))this.start({pause:!0});else{const e=this.springs;Mn(Bo(t),n=>e[n].pause())}return this}resume(t){if(xt.und(t))this.start({pause:!1});else{const e=this.springs;Mn(Bo(t),n=>e[n].resume())}return this}each(t){Ou(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,M1(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!r&&this._started,o=i||s&&n.size?this.get():null;i&&e.size&&M1(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,M1(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Nn.onFrame(this._onFrame)}};function rL(t,e){return Promise.all(e.map(n=>ote(t,n))).then(n=>f5(t,n))}async function ote(t,e,n){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:l}=e,c=xt.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const u=xt.arr(i)||xt.fun(i)?i:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):Mn(Oke,v=>{const m=e[v];if(xt.fun(m)){const g=t._events[v];e[v]=({finished:y,cancelled:x})=>{const S=g.get(m);S?(y||(S.finished=!1),x&&(S.cancelled=!0)):g.set(m,{value:null,finished:y||!1,cancelled:x||!1})},c&&(c[v]=e[v])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,n1(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const f=(r||Object.keys(t.springs)).map(v=>t.springs[v].start(e)),h=e.cancel===!0||Zee(e,"cancel")===!0;(u||h&&d.asyncId)&&f.push(ete(++t._lastAsyncId,{props:e,state:d,actions:{pause:XD,resume:XD,start(v,m){h?(Tb(d,t._lastAsyncId),m(J0(t))):(v.onRest=a,m(nte(u,v,d,t)))}}})),d.paused&&await new Promise(v=>{d.resumeQueue.add(v)});const p=f5(t,await Promise.all(f));if(o&&p.finished&&!(n&&p.noop)){const v=ite(e,o,i);if(v)return ute(t,[v]),ote(t,v,!0)}return l&&Nn.batchedUpdates(()=>l(p,t,t.item)),p}function iL(t,e){const n={...t.springs};return e&&Mn(Bo(e),r=>{xt.und(r.keys)&&(r=Eb(r)),xt.obj(r.to)||(r={...r,to:void 0}),cte(n,r,i=>lte(i))}),ate(t,n),n}function ate(t,e){Ou(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,ny(n,t))})}function lte(t,e){const n=new $ke;return n.key=t,e&&ny(n,e),n}function cte(t,e,n){e.keys&&Mn(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function ute(t,e){Mn(e,n=>{cte(t.springs,n,r=>lte(r,t))})}var qw=({children:t,...e})=>{const n=N.useContext(JE),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=vke(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=JE;return N.createElement(s,{value:e},t)},JE=Uke(qw,{});qw.Provider=JE.Provider;qw.Consumer=JE.Consumer;function Uke(t,e){return Object.assign(t,N.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var dte=()=>{const t=[],e=function(r){mke();const i=[];return Mn(t,(s,o)=>{if(xt.und(r))i.push(s.start());else{const a=n(r,s,o);a&&i.push(s.start(a))}}),i};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return Mn(t,r=>r.pause(...arguments)),this},e.resume=function(){return Mn(t,r=>r.resume(...arguments)),this},e.set=function(r){Mn(t,(i,s)=>{const o=xt.fun(r)?r(s,i):r;o&&i.set(o)})},e.start=function(r){const i=[];return Mn(t,(s,o)=>{if(xt.und(r))i.push(s.start());else{const a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},e.stop=function(){return Mn(t,r=>r.stop(...arguments)),this},e.update=function(r){return Mn(t,(i,s)=>i.update(this._getProps(r,i,s))),this};const n=function(r,i,s){return xt.fun(r)?r(s,i):r};return e._getProps=n,e};function Bke(t,e,n){const r=xt.fun(e)&&e;r&&!n&&(n=[]);const i=N.useMemo(()=>r||arguments.length==3?dte():void 0,[]),s=N.useRef(0),o=a5(),a=N.useMemo(()=>({ctrls:[],queue:[],flush(g,y){const x=iL(g,y);return s.current>0&&!a.queue.length&&!Object.keys(x).some(_=>!g.springs[_])?rL(g,y):new Promise(_=>{ate(g,x),a.queue.push(()=>{_(rL(g,y))}),o()})}}),[]),l=N.useRef([...a.ctrls]),c=[],u=YD(t)||0;N.useMemo(()=>{Mn(l.current.slice(t,u),g=>{JD(g,i),g.stop(!0)}),l.current.length=t,d(u,t)},[t]),N.useMemo(()=>{d(0,Math.min(u,t))},n);function d(g,y){for(let x=g;x<y;x++){const S=l.current[x]||(l.current[x]=new ste(null,a.flush)),_=r?r(x,S):e[x];_&&(c[x]=Dke(_))}}const f=l.current.map((g,y)=>iL(g,c[y])),h=N.useContext(qw),p=YD(h),v=h!==p&&Jee(h);$p(()=>{s.current++,a.ctrls=l.current;const{queue:g}=a;g.length&&(a.queue=[],Mn(g,y=>y())),Mn(l.current,(y,x)=>{i==null||i.add(y),v&&y.start({default:h});const S=c[x];S&&(Qee(y,S.ref),y.ref?y.queue.push(S):y.start(S))})}),l5(()=>()=>{Mn(a.ctrls,g=>g.stop(!0))});const m=f.map(g=>({...g}));return i?[m,i]:m}function Uc(t,e){const n=xt.fun(t),[[r],i]=Bke(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[r,i]:r}function jm(t,e,n){const r=xt.fun(e)&&e,{reset:i,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:l=!1,onDestroyed:c,ref:u,config:d}=r?r():e,f=N.useMemo(()=>r||arguments.length==3?dte():void 0,[]),h=Bo(t),p=[],v=N.useRef(null),m=i?null:v.current;$p(()=>{v.current=p}),l5(()=>(Mn(p,$=>{f==null||f.add($.ctrl),$.ctrl.ref=f}),()=>{Mn(v.current,$=>{$.expired&&clearTimeout($.expirationId),JD($.ctrl,f),$.ctrl.stop(!0)})}));const g=Wke(h,r?r():e,m),y=i&&v.current||[];$p(()=>Mn(y,({ctrl:$,item:U,key:z})=>{JD($,f),aa(c,U,z)}));const x=[];if(m&&Mn(m,($,U)=>{$.expired?(clearTimeout($.expirationId),y.push($)):(U=x[U]=g.indexOf($.key),~U&&(p[U]=$))}),Mn(h,($,U)=>{p[U]||(p[U]={key:g[U],item:$,phase:"mount",ctrl:new ste},p[U].ctrl.item=$)}),x.length){let $=-1;const{leave:U}=r?r():e;Mn(x,(z,X)=>{const D=m[X];~z?($=p.indexOf(D),p[$]={...D,item:h[z]}):U&&p.splice(++$,0,D)})}xt.fun(s)&&p.sort(($,U)=>s($.item,U.item));let S=-o;const _=a5(),C=xA(e),T=new Map,A=N.useRef(new Map),k=N.useRef(!1);Mn(p,($,U)=>{const z=$.key,X=$.phase,D=r?r():e;let F,W;const V=aa(D.delay||0,z);if(X=="mount")F=D.enter,W="enter";else{const te=g.indexOf(z)<0;if(X!="leave")if(te)F=D.leave,W="leave";else if(F=D.update)W="update";else return;else if(!te)F=D.enter,W="enter";else return}if(F=aa(F,$.item,U),F=xt.obj(F)?u5(F):{to:F},!F.config){const te=d||C.config;F.config=aa(te,$.item,U,W)}S+=o;const j={...C,delay:V+S,ref:u,immediate:D.immediate,reset:!1,...F};if(W=="enter"&&xt.und(j.from)){const te=r?r():e,re=xt.und(te.initial)||m?te.from:te.initial;j.from=aa(re,$.item,U)}const{onResolve:J}=j;j.onResolve=te=>{aa(J,te);const re=v.current,se=re.find(fe=>fe.key===z);if(se&&!(te.cancelled&&se.phase!="update")&&se.ctrl.idle){const fe=re.every(ae=>ae.ctrl.idle);if(se.phase=="leave"){const ae=aa(a,se.item);if(ae!==!1){const ye=ae===!0?0:ae;if(se.expired=!0,!fe&&ye>0){ye<=2147483647&&(se.expirationId=setTimeout(_,ye));return}}}fe&&re.some(ae=>ae.expired)&&(A.current.delete(se),l&&(k.current=!0),_())}};const Q=iL($.ctrl,j);W==="leave"&&l?A.current.set($,{phase:W,springs:Q,payload:j}):T.set($,{phase:W,springs:Q,payload:j})});const M=N.useContext(qw),R=YD(M),P=M!==R&&Jee(M);$p(()=>{P&&Mn(p,$=>{$.ctrl.start({default:M})})},[M]),Mn(T,($,U)=>{if(A.current.size){const z=p.findIndex(X=>X.key===U.key);p.splice(z,1)}}),$p(()=>{Mn(A.current.size?A.current:T,({phase:$,payload:U},z)=>{const{ctrl:X}=z;z.phase=$,f==null||f.add(X),P&&$=="enter"&&X.start({default:M}),U&&(Qee(X,U.ref),(X.ref||f)&&!k.current?X.update(U):(X.start(U),k.current&&(k.current=!1)))})},i?void 0:n);const O=$=>N.createElement(N.Fragment,null,p.map((U,z)=>{const{springs:X}=T.get(U)||U.ctrl,D=$({...X},U.item,U,z);return D&&D.type?N.createElement(D.type,{...D.props,key:xt.str(U.key)||xt.num(U.key)?U.key:U.ctrl.id,ref:D.ref}):D}));return f?[O,f]:O}var zke=1;function Wke(t,{key:e,keys:n=e},r){if(n===null){const i=new Set;return t.map(s=>{const o=r&&r.find(a=>a.item===s&&a.phase!=="leave"&&!i.has(a));return o?(i.add(o),o.key):zke++})}return xt.und(n)?t:xt.fun(n)?t.map(n):Bo(n)}var fte=class extends h5{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=yb(...e);const n=this._get(),r=KD(n);c5(this,r.create(n))}advance(t){const e=this._get(),n=this.get();md(e,n)||(iu(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&fG(this._active)&&UN(this)}_get(){const t=xt.arr(this.source)?this.source.map(oa):Bo(oa(this.source));return this.calc(...t)}_start(){this.idle&&!fG(this._active)&&(this.idle=!1,Mn(vA(this),t=>{t.done=!1}),Dc.skipAnimation?(Nn.batchedUpdates(()=>this.advance()),UN(this)):hA.start(this))}_attach(){let t=1;Mn(Bo(this.source),e=>{Tl(e)&&ny(e,this),eL(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Mn(Bo(this.source),t=>{Tl(t)&&wb(t,this)}),this._active.clear(),UN(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Bo(this.source).reduce((e,n)=>Math.max(e,(eL(n)?n.priority:0)+1),0))}};function Vke(t){return t.idle!==!1}function fG(t){return!t.size||Array.from(t).every(Vke)}function UN(t){t.idle||(t.idle=!0,Mn(vA(t),e=>{e.done=!0}),bb(t,{type:"idle",parent:t}))}var Gl=(t,...e)=>new fte(t,e);Dc.assign({createStringInterpolator:jee,to:(t,e)=>new fte(t,e)});var hte=/^--/;function Gke(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!hte.test(t)&&!(I1.hasOwnProperty(t)&&I1[t])?e+"px":(""+e).trim()}var hG={};function Hke(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,c=Object.values(l),u=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:hG[d]||(hG[d]=d.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));i!==void 0&&(t.textContent=i);for(const d in r)if(r.hasOwnProperty(d)){const f=Gke(d,r[d]);hte.test(d)?t.style.setProperty(d,f):t.style[d]=f}u.forEach((d,f)=>{t.setAttribute(d,c[f])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var I1={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jke=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),Xke=["Webkit","Ms","Moz","O"];I1=Object.keys(I1).reduce((t,e)=>(Xke.forEach(n=>t[jke(n,e)]=t[e]),t),I1);var qke=/^(matrix|translate|scale|rotate|skew)/,Yke=/^(translate)/,Kke=/^(rotate|skew)/,BN=(t,e)=>xt.num(t)&&t!==0?t+e:t,jT=(t,e)=>xt.arr(t)?t.every(n=>jT(n,e)):xt.num(t)?t===e:parseFloat(t)===e,Zke=class extends yA{constructor({x:t,y:e,z:n,...r}){const i=[],s=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>BN(a,"px")).join(",")})`,jT(o,0)])),Ou(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(l=>[l,l===""]);else if(qke.test(a)){if(delete r[a],xt.und(o))return;const l=Yke.test(a)?"px":Kke.test(a)?"deg":"";i.push(Bo(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${BN(f,l)})`,jT(f,0)]:c=>[`${a}(${c.map(u=>BN(u,l)).join(",")})`,jT(c,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new Jke(i,s)),super(r)}},Jke=class extends Vee{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Mn(this.inputs,(n,r)=>{const i=oa(n[0]),[s,o]=this.transforms[r](xt.arr(i)?i:n.map(oa));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Mn(this.inputs,e=>Mn(e,n=>Tl(n)&&ny(n,this)))}observerRemoved(t){t==0&&Mn(this.inputs,e=>Mn(e,n=>Tl(n)&&wb(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),bb(this,t)}},Qke=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Dc.assign({batchedUpdates:Iw.unstable_batchedUpdates,createStringInterpolator:jee,colors:jMe});var eAe=Tke(Qke,{applyAnimatedValues:Hke,createAnimatedStyle:t=>new Zke(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),nr=eAe.animated;function ym(){return ym=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ym.apply(this,arguments)}var tAe={pointerEvents:"none",position:"absolute",zIndex:10,top:0,left:0},pG=function(t,e){return"translate("+t+"px, "+e+"px)"},pte=N.memo(function(t){var e,n=t.position,r=t.anchor,i=t.children,s=Rr(),o=Ys(),a=o.animate,l=o.config,c=jre(),u=c[0],d=c[1],f=N.useRef(!1),h=void 0,p=!1,v=d.width>0&&d.height>0,m=Math.round(n[0]),g=Math.round(n[1]);v&&(r==="top"?(m-=d.width/2,g-=d.height+14):r==="right"?(m+=14,g-=d.height/2):r==="bottom"?(m-=d.width/2,g+=14):r==="left"?(m-=d.width+14,g-=d.height/2):r==="center"&&(m-=d.width/2,g-=d.height/2),h={transform:pG(m,g)},f.current||(p=!0),f.current=[m,g]);var y=Uc({to:h,config:l,immediate:!a||p}),x=ym({},tAe,s.tooltip,{transform:(e=y.transform)!=null?e:pG(m,g)});return L.jsx(nr.div,{ref:u,style:x,children:i})});pte.displayName="TooltipWrapper";var mte=N.memo(function(t){var e=t.size,n=e===void 0?12:e,r=t.color,i=t.style;return L.jsx("span",{style:ym({display:"block",width:n,height:n,background:r},i===void 0?{}:i)})}),bA=N.memo(function(t){var e,n=t.id,r=t.value,i=t.format,s=t.enableChip,o=s!==void 0&&s,a=t.color,l=t.renderContent,c=Rr(),u=o2(i);if(typeof l=="function")e=l();else{var d=r;u!==void 0&&d!==void 0&&(d=u(d)),e=L.jsxs("div",{style:c.tooltip.basic,children:[o&&L.jsx(mte,{color:a,style:c.tooltip.chip}),d!==void 0?L.jsxs("span",{children:[n,": ",L.jsx("strong",{children:""+d})]}):n]})}return L.jsx("div",{style:c.tooltip.container,children:e})}),nAe={width:"100%",borderCollapse:"collapse"},gte=N.memo(function(t){var e,n=t.title,r=t.rows,i=r===void 0?[]:r,s=t.renderContent,o=Rr();return i.length?(e=typeof s=="function"?s():L.jsxs("div",{children:[n&&n,L.jsx("table",{style:ym({},nAe,o.tooltip.table),children:L.jsx("tbody",{children:i.map(function(a,l){return L.jsx("tr",{children:a.map(function(c,u){return L.jsx("td",{style:o.tooltip.tableCell,children:c},u)})},l)})})})]}),L.jsx("div",{style:o.tooltip.container,children:e})):null});gte.displayName="TableTooltip";var sL=N.memo(function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1,s=Rr(),o=Ys(),a=o.animate,l=o.config,c=N.useMemo(function(){return ym({},s.crosshair.line,{pointerEvents:"none"})},[s.crosshair.line]),u=Uc({x1:e,x2:n,y1:r,y2:i,config:l,immediate:!a});return L.jsx(nr.line,ym({},u,{fill:"none",style:c}))});sL.displayName="CrosshairLine";var rAe=N.memo(function(t){var e,n,r=t.width,i=t.height,s=t.type,o=t.x,a=t.y;return s==="cross"?(e={x0:o,x1:o,y0:0,y1:i},n={x0:0,x1:r,y0:a,y1:a}):s==="top-left"?(e={x0:o,x1:o,y0:0,y1:a},n={x0:0,x1:o,y0:a,y1:a}):s==="top"?e={x0:o,x1:o,y0:0,y1:a}:s==="top-right"?(e={x0:o,x1:o,y0:0,y1:a},n={x0:o,x1:r,y0:a,y1:a}):s==="right"?n={x0:o,x1:r,y0:a,y1:a}:s==="bottom-right"?(e={x0:o,x1:o,y0:a,y1:i},n={x0:o,x1:r,y0:a,y1:a}):s==="bottom"?e={x0:o,x1:o,y0:a,y1:i}:s==="bottom-left"?(e={x0:o,x1:o,y0:a,y1:i},n={x0:0,x1:o,y0:a,y1:a}):s==="left"?n={x0:0,x1:o,y0:a,y1:a}:s==="x"?e={x0:o,x1:o,y0:0,y1:i}:s==="y"&&(n={x0:0,x1:r,y0:a,y1:a}),L.jsxs(L.Fragment,{children:[e&&L.jsx(sL,{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1}),n&&L.jsx(sL,{x0:n.x0,x1:n.x1,y0:n.y0,y1:n.y1})]})});rAe.displayName="Crosshair";var vte=N.createContext({showTooltipAt:function(){},showTooltipFromEvent:function(){},hideTooltip:function(){}}),oL={isVisible:!1,position:[null,null],content:null,anchor:null},yte=N.createContext(oL),iAe=function(t){var e=N.useState(oL),n=e[0],r=e[1],i=N.useCallback(function(a,l,c){var u=l[0],d=l[1];c===void 0&&(c="top"),r({isVisible:!0,position:[u,d],anchor:c,content:a})},[r]),s=N.useCallback(function(a,l,c){c===void 0&&(c="top");var u=t.current.getBoundingClientRect(),d=t.current.offsetWidth,f=d===u.width?1:d/u.width,h=(l.clientX-u.left)*f,p=(l.clientY-u.top)*f;c!=="left"&&c!=="right"||(c=h<u.width/2?"right":"left"),r({isVisible:!0,position:[h,p],anchor:c,content:a})},[t,r]),o=N.useCallback(function(){r(oL)},[r]);return{actions:N.useMemo(function(){return{showTooltipAt:i,showTooltipFromEvent:s,hideTooltip:o}},[i,s,o]),state:n}},ry=function(){var t=N.useContext(vte);if(t===void 0)throw new Error("useTooltip must be used within a TooltipProvider");return t},sAe=function(){var t=N.useContext(yte);if(t===void 0)throw new Error("useTooltipState must be used within a TooltipProvider");return t},oAe=function(t){return t.isVisible},aAe=function(){var t=sAe();return oAe(t)?L.jsx(pte,{position:t.position,anchor:t.anchor,children:t.content}):null},lAe=function(t){var e=t.container,n=t.children,r=iAe(e),i=r.actions,s=r.state;return L.jsx(vte.Provider,{value:i,children:L.jsx(yte.Provider,{value:s,children:n})})};function cAe(){this.__data__=[],this.size=0}var uAe=cAe;function dAe(t,e){return t===e||t!==t&&e!==e}var Yw=dAe,fAe=Yw;function hAe(t,e){for(var n=t.length;n--;)if(fAe(t[n][0],e))return n;return-1}var wA=hAe,pAe=wA,mAe=Array.prototype,gAe=mAe.splice;function vAe(t){var e=this.__data__,n=pAe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():gAe.call(e,n,1),--this.size,!0}var yAe=vAe,xAe=wA;function bAe(t){var e=this.__data__,n=xAe(e,t);return n<0?void 0:e[n][1]}var wAe=bAe,SAe=wA;function _Ae(t){return SAe(this.__data__,t)>-1}var CAe=_Ae,TAe=wA;function EAe(t,e){var n=this.__data__,r=TAe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var MAe=EAe,kAe=uAe,AAe=yAe,IAe=wAe,RAe=CAe,NAe=MAe;function iy(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}iy.prototype.clear=kAe;iy.prototype.delete=AAe;iy.prototype.get=IAe;iy.prototype.has=RAe;iy.prototype.set=NAe;var SA=iy,PAe=SA;function $Ae(){this.__data__=new PAe,this.size=0}var DAe=$Ae;function LAe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var OAe=LAe;function FAe(t){return this.__data__.get(t)}var UAe=FAe;function BAe(t){return this.__data__.has(t)}var zAe=BAe,WAe=typeof bc=="object"&&bc&&bc.Object===Object&&bc,xte=WAe,VAe=xte,GAe=typeof self=="object"&&self&&self.Object===Object&&self,HAe=VAe||GAe||Function("return this")(),Xu=HAe,jAe=Xu,XAe=jAe.Symbol,sy=XAe,mG=sy,bte=Object.prototype,qAe=bte.hasOwnProperty,YAe=bte.toString,kx=mG?mG.toStringTag:void 0;function KAe(t){var e=qAe.call(t,kx),n=t[kx];try{t[kx]=void 0;var r=!0}catch{}var i=YAe.call(t);return r&&(e?t[kx]=n:delete t[kx]),i}var ZAe=KAe,JAe=Object.prototype,QAe=JAe.toString;function eIe(t){return QAe.call(t)}var tIe=eIe,gG=sy,nIe=ZAe,rIe=tIe,iIe="[object Null]",sIe="[object Undefined]",vG=gG?gG.toStringTag:void 0;function oIe(t){return t==null?t===void 0?sIe:iIe:vG&&vG in Object(t)?nIe(t):rIe(t)}var _h=oIe;function aIe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var qu=aIe,lIe=_h,cIe=qu,uIe="[object AsyncFunction]",dIe="[object Function]",fIe="[object GeneratorFunction]",hIe="[object Proxy]";function pIe(t){if(!cIe(t))return!1;var e=lIe(t);return e==dIe||e==fIe||e==uIe||e==hIe}var _A=pIe;const wte=is(_A);var mIe=Xu,gIe=mIe["__core-js_shared__"],vIe=gIe,zN=vIe,yG=function(){var t=/[^.]+$/.exec(zN&&zN.keys&&zN.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function yIe(t){return!!yG&&yG in t}var xIe=yIe,bIe=Function.prototype,wIe=bIe.toString;function SIe(t){if(t!=null){try{return wIe.call(t)}catch{}try{return t+""}catch{}}return""}var Ste=SIe,_Ie=_A,CIe=xIe,TIe=qu,EIe=Ste,MIe=/[\\^$.*+?()[\]{}|]/g,kIe=/^\[object .+?Constructor\]$/,AIe=Function.prototype,IIe=Object.prototype,RIe=AIe.toString,NIe=IIe.hasOwnProperty,PIe=RegExp("^"+RIe.call(NIe).replace(MIe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $Ie(t){if(!TIe(t)||CIe(t))return!1;var e=_Ie(t)?PIe:kIe;return e.test(EIe(t))}var DIe=$Ie;function LIe(t,e){return t==null?void 0:t[e]}var OIe=LIe,FIe=DIe,UIe=OIe;function BIe(t,e){var n=UIe(t,e);return FIe(n)?n:void 0}var Xm=BIe,zIe=Xm,WIe=Xu,VIe=zIe(WIe,"Map"),p5=VIe,GIe=Xm,HIe=GIe(Object,"create"),CA=HIe,xG=CA;function jIe(){this.__data__=xG?xG(null):{},this.size=0}var XIe=jIe;function qIe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var YIe=qIe,KIe=CA,ZIe="__lodash_hash_undefined__",JIe=Object.prototype,QIe=JIe.hasOwnProperty;function eRe(t){var e=this.__data__;if(KIe){var n=e[t];return n===ZIe?void 0:n}return QIe.call(e,t)?e[t]:void 0}var tRe=eRe,nRe=CA,rRe=Object.prototype,iRe=rRe.hasOwnProperty;function sRe(t){var e=this.__data__;return nRe?e[t]!==void 0:iRe.call(e,t)}var oRe=sRe,aRe=CA,lRe="__lodash_hash_undefined__";function cRe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=aRe&&e===void 0?lRe:e,this}var uRe=cRe,dRe=XIe,fRe=YIe,hRe=tRe,pRe=oRe,mRe=uRe;function oy(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}oy.prototype.clear=dRe;oy.prototype.delete=fRe;oy.prototype.get=hRe;oy.prototype.has=pRe;oy.prototype.set=mRe;var gRe=oy,bG=gRe,vRe=SA,yRe=p5;function xRe(){this.size=0,this.__data__={hash:new bG,map:new(yRe||vRe),string:new bG}}var bRe=xRe;function wRe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var SRe=wRe,_Re=SRe;function CRe(t,e){var n=t.__data__;return _Re(e)?n[typeof e=="string"?"string":"hash"]:n.map}var TA=CRe,TRe=TA;function ERe(t){var e=TRe(this,t).delete(t);return this.size-=e?1:0,e}var MRe=ERe,kRe=TA;function ARe(t){return kRe(this,t).get(t)}var IRe=ARe,RRe=TA;function NRe(t){return RRe(this,t).has(t)}var PRe=NRe,$Re=TA;function DRe(t,e){var n=$Re(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var LRe=DRe,ORe=bRe,FRe=MRe,URe=IRe,BRe=PRe,zRe=LRe;function ay(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ay.prototype.clear=ORe;ay.prototype.delete=FRe;ay.prototype.get=URe;ay.prototype.has=BRe;ay.prototype.set=zRe;var m5=ay,WRe=SA,VRe=p5,GRe=m5,HRe=200;function jRe(t,e){var n=this.__data__;if(n instanceof WRe){var r=n.__data__;if(!VRe||r.length<HRe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new GRe(r)}return n.set(t,e),this.size=n.size,this}var XRe=jRe,qRe=SA,YRe=DAe,KRe=OAe,ZRe=UAe,JRe=zAe,QRe=XRe;function ly(t){var e=this.__data__=new qRe(t);this.size=e.size}ly.prototype.clear=YRe;ly.prototype.delete=KRe;ly.prototype.get=ZRe;ly.prototype.has=JRe;ly.prototype.set=QRe;var EA=ly,e3e=Xm,t3e=function(){try{var t=e3e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),_te=t3e,wG=_te;function n3e(t,e,n){e=="__proto__"&&wG?wG(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var g5=n3e,r3e=g5,i3e=Yw;function s3e(t,e,n){(n!==void 0&&!i3e(t[e],n)||n===void 0&&!(e in t))&&r3e(t,e,n)}var Cte=s3e;function o3e(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var a3e=o3e,l3e=a3e,c3e=l3e(),Tte=c3e,QE={exports:{}};QE.exports;(function(t,e){var n=Xu,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var d=c.length,f=a?a(d):new c.constructor(d);return c.copy(f),f}t.exports=l})(QE,QE.exports);var Ete=QE.exports,u3e=Xu,d3e=u3e.Uint8Array,Mte=d3e,SG=Mte;function f3e(t){var e=new t.constructor(t.byteLength);return new SG(e).set(new SG(t)),e}var v5=f3e,h3e=v5;function p3e(t,e){var n=e?h3e(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var kte=p3e;function m3e(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Ate=m3e,g3e=qu,_G=Object.create,v3e=function(){function t(){}return function(e){if(!g3e(e))return{};if(_G)return _G(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),y3e=v3e;function x3e(t,e){return function(n){return t(e(n))}}var Ite=x3e,b3e=Ite,w3e=b3e(Object.getPrototypeOf,Object),y5=w3e,S3e=Object.prototype;function _3e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||S3e;return t===n}var x5=_3e,C3e=y3e,T3e=y5,E3e=x5;function M3e(t){return typeof t.constructor=="function"&&!E3e(t)?C3e(T3e(t)):{}}var Rte=M3e;function k3e(t){return t!=null&&typeof t=="object"}var Bc=k3e,A3e=_h,I3e=Bc,R3e="[object Arguments]";function N3e(t){return I3e(t)&&A3e(t)==R3e}var P3e=N3e,CG=P3e,$3e=Bc,Nte=Object.prototype,D3e=Nte.hasOwnProperty,L3e=Nte.propertyIsEnumerable,O3e=CG(function(){return arguments}())?CG:function(t){return $3e(t)&&D3e.call(t,"callee")&&!L3e.call(t,"callee")},MA=O3e,F3e=Array.isArray,Ea=F3e,U3e=9007199254740991;function B3e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=U3e}var b5=B3e,z3e=_A,W3e=b5;function V3e(t){return t!=null&&W3e(t.length)&&!z3e(t)}var cy=V3e,G3e=cy,H3e=Bc;function j3e(t){return H3e(t)&&G3e(t)}var Pte=j3e,eM={exports:{}};function X3e(){return!1}var q3e=X3e;eM.exports;(function(t,e){var n=Xu,r=q3e,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(eM,eM.exports);var kA=eM.exports,Y3e=_h,K3e=y5,Z3e=Bc,J3e="[object Object]",Q3e=Function.prototype,eNe=Object.prototype,$te=Q3e.toString,tNe=eNe.hasOwnProperty,nNe=$te.call(Object);function rNe(t){if(!Z3e(t)||Y3e(t)!=J3e)return!1;var e=K3e(t);if(e===null)return!0;var n=tNe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&$te.call(n)==nNe}var w5=rNe;const S5=is(w5);var iNe=_h,sNe=b5,oNe=Bc,aNe="[object Arguments]",lNe="[object Array]",cNe="[object Boolean]",uNe="[object Date]",dNe="[object Error]",fNe="[object Function]",hNe="[object Map]",pNe="[object Number]",mNe="[object Object]",gNe="[object RegExp]",vNe="[object Set]",yNe="[object String]",xNe="[object WeakMap]",bNe="[object ArrayBuffer]",wNe="[object DataView]",SNe="[object Float32Array]",_Ne="[object Float64Array]",CNe="[object Int8Array]",TNe="[object Int16Array]",ENe="[object Int32Array]",MNe="[object Uint8Array]",kNe="[object Uint8ClampedArray]",ANe="[object Uint16Array]",INe="[object Uint32Array]",Zr={};Zr[SNe]=Zr[_Ne]=Zr[CNe]=Zr[TNe]=Zr[ENe]=Zr[MNe]=Zr[kNe]=Zr[ANe]=Zr[INe]=!0;Zr[aNe]=Zr[lNe]=Zr[bNe]=Zr[cNe]=Zr[wNe]=Zr[uNe]=Zr[dNe]=Zr[fNe]=Zr[hNe]=Zr[pNe]=Zr[mNe]=Zr[gNe]=Zr[vNe]=Zr[yNe]=Zr[xNe]=!1;function RNe(t){return oNe(t)&&sNe(t.length)&&!!Zr[iNe(t)]}var NNe=RNe;function PNe(t){return function(e){return t(e)}}var Kw=PNe,tM={exports:{}};tM.exports;(function(t,e){var n=xte,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(tM,tM.exports);var AA=tM.exports,$Ne=NNe,DNe=Kw,TG=AA,EG=TG&&TG.isTypedArray,LNe=EG?DNe(EG):$Ne,_5=LNe;function ONe(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Dte=ONe,FNe=g5,UNe=Yw,BNe=Object.prototype,zNe=BNe.hasOwnProperty;function WNe(t,e,n){var r=t[e];(!(zNe.call(t,e)&&UNe(r,n))||n===void 0&&!(e in t))&&FNe(t,e,n)}var C5=WNe,VNe=C5,GNe=g5;function HNe(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?GNe(n,a,l):VNe(n,a,l)}return n}var uy=HNe;function jNe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var XNe=jNe,qNe=9007199254740991,YNe=/^(?:0|[1-9]\d*)$/;function KNe(t,e){var n=typeof t;return e=e??qNe,!!e&&(n=="number"||n!="symbol"&&YNe.test(t))&&t>-1&&t%1==0&&t<e}var IA=KNe,ZNe=XNe,JNe=MA,QNe=Ea,ePe=kA,tPe=IA,nPe=_5,rPe=Object.prototype,iPe=rPe.hasOwnProperty;function sPe(t,e){var n=QNe(t),r=!n&&JNe(t),i=!n&&!r&&ePe(t),s=!n&&!r&&!i&&nPe(t),o=n||r||i||s,a=o?ZNe(t.length,String):[],l=a.length;for(var c in t)(e||iPe.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||tPe(c,l)))&&a.push(c);return a}var Lte=sPe;function oPe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var aPe=oPe,lPe=qu,cPe=x5,uPe=aPe,dPe=Object.prototype,fPe=dPe.hasOwnProperty;function hPe(t){if(!lPe(t))return uPe(t);var e=cPe(t),n=[];for(var r in t)r=="constructor"&&(e||!fPe.call(t,r))||n.push(r);return n}var pPe=hPe,mPe=Lte,gPe=pPe,vPe=cy;function yPe(t){return vPe(t)?mPe(t,!0):gPe(t)}var Zw=yPe,xPe=uy,bPe=Zw;function wPe(t){return xPe(t,bPe(t))}var SPe=wPe,MG=Cte,_Pe=Ete,CPe=kte,TPe=Ate,EPe=Rte,kG=MA,AG=Ea,MPe=Pte,kPe=kA,APe=_A,IPe=qu,RPe=w5,NPe=_5,IG=Dte,PPe=SPe;function $Pe(t,e,n,r,i,s,o){var a=IG(t,n),l=IG(e,n),c=o.get(l);if(c){MG(t,n,c);return}var u=s?s(a,l,n+"",t,e,o):void 0,d=u===void 0;if(d){var f=AG(l),h=!f&&kPe(l),p=!f&&!h&&NPe(l);u=l,f||h||p?AG(a)?u=a:MPe(a)?u=TPe(a):h?(d=!1,u=_Pe(l,!0)):p?(d=!1,u=CPe(l,!0)):u=[]:RPe(l)||kG(l)?(u=a,kG(a)?u=PPe(a):(!IPe(a)||APe(a))&&(u=EPe(l))):d=!1}d&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),MG(t,n,u)}var DPe=$Pe,LPe=EA,OPe=Cte,FPe=Tte,UPe=DPe,BPe=qu,zPe=Zw,WPe=Dte;function Ote(t,e,n,r,i){t!==e&&FPe(e,function(s,o){if(i||(i=new LPe),BPe(s))UPe(t,e,o,n,Ote,r,i);else{var a=r?r(WPe(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),OPe(t,o,a)}},zPe)}var VPe=Ote;function GPe(t){return t}var RA=GPe;function HPe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var jPe=HPe,XPe=jPe,RG=Math.max;function qPe(t,e,n){return e=RG(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=RG(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),XPe(t,this,a)}}var Fte=qPe;function YPe(t){return function(){return t}}var KPe=YPe,ZPe=KPe,NG=_te,JPe=RA,QPe=NG?function(t,e){return NG(t,"toString",{configurable:!0,enumerable:!1,value:ZPe(e),writable:!0})}:JPe,e$e=QPe,t$e=800,n$e=16,r$e=Date.now;function i$e(t){var e=0,n=0;return function(){var r=r$e(),i=n$e-(r-n);if(n=r,i>0){if(++e>=t$e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var s$e=i$e,o$e=e$e,a$e=s$e,l$e=a$e(o$e),Ute=l$e,c$e=RA,u$e=Fte,d$e=Ute;function f$e(t,e){return d$e(u$e(t,e,c$e),t+"")}var T5=f$e,h$e=Yw,p$e=cy,m$e=IA,g$e=qu;function v$e(t,e,n){if(!g$e(n))return!1;var r=typeof e;return(r=="number"?p$e(n)&&m$e(e,n.length):r=="string"&&e in n)?h$e(n[e],t):!1}var Bte=v$e,y$e=T5,x$e=Bte;function b$e(t){return y$e(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&x$e(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var w$e=b$e,S$e=VPe,_$e=w$e,C$e=_$e(function(t,e,n){S$e(t,e,n)}),T$e=C$e;const E$e=is(T$e);var M$e=_h,k$e=Bc,A$e="[object Symbol]";function I$e(t){return typeof t=="symbol"||k$e(t)&&M$e(t)==A$e}var NA=I$e,R$e=Ea,N$e=NA,P$e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$$e=/^\w*$/;function D$e(t,e){if(R$e(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||N$e(t)?!0:$$e.test(t)||!P$e.test(t)||e!=null&&t in Object(e)}var E5=D$e,zte=m5,L$e="Expected a function";function M5(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(L$e);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(M5.Cache||zte),n}M5.Cache=zte;var O$e=M5,F$e=O$e,U$e=500;function B$e(t){var e=F$e(t,function(r){return n.size===U$e&&n.clear(),r}),n=e.cache;return e}var z$e=B$e,W$e=z$e,V$e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G$e=/\\(\\)?/g,H$e=W$e(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(V$e,function(n,r,i,s){e.push(i?s.replace(G$e,"$1"):r||n)}),e}),j$e=H$e;function X$e(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var PA=X$e,PG=sy,q$e=PA,Y$e=Ea,K$e=NA,Z$e=1/0,$G=PG?PG.prototype:void 0,DG=$G?$G.toString:void 0;function Wte(t){if(typeof t=="string")return t;if(Y$e(t))return q$e(t,Wte)+"";if(K$e(t))return DG?DG.call(t):"";var e=t+"";return e=="0"&&1/t==-Z$e?"-0":e}var J$e=Wte,Q$e=J$e;function eDe(t){return t==null?"":Q$e(t)}var tDe=eDe,nDe=Ea,rDe=E5,iDe=j$e,sDe=tDe;function oDe(t,e){return nDe(t)?t:rDe(t,e)?[t]:iDe(sDe(t))}var dy=oDe,aDe=NA,lDe=1/0;function cDe(t){if(typeof t=="string"||aDe(t))return t;var e=t+"";return e=="0"&&1/t==-lDe?"-0":e}var fy=cDe,uDe=dy,dDe=fy;function fDe(t,e){e=uDe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[dDe(e[n++])];return n&&n==r?t:void 0}var Jw=fDe,hDe=Jw;function pDe(t,e,n){var r=t==null?void 0:hDe(t,e);return r===void 0?n:r}var Vte=pDe;const Va=is(Vte);var mDe=C5,gDe=dy,vDe=IA,LG=qu,yDe=fy;function xDe(t,e,n,r){if(!LG(t))return t;e=gDe(e,t);for(var i=-1,s=e.length,o=s-1,a=t;a!=null&&++i<s;){var l=yDe(e[i]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=o){var u=a[l];c=r?r(u,l,a):void 0,c===void 0&&(c=LG(u)?u:vDe(e[i+1])?[]:{})}mDe(a,l,c),a=a[l]}return t}var Gte=xDe,bDe=Gte;function wDe(t,e,n){return t==null?t:bDe(t,e,n)}var SDe=wDe;const bd=is(SDe);function k5(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Hte(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Qw(){}var Mb=.7,nM=1/Mb,Q0="\\s*([+-]?\\d+)\\s*",kb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Su="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_De=/^#([0-9a-f]{3,8})$/,CDe=new RegExp(`^rgb\\(${Q0},${Q0},${Q0}\\)$`),TDe=new RegExp(`^rgb\\(${Su},${Su},${Su}\\)$`),EDe=new RegExp(`^rgba\\(${Q0},${Q0},${Q0},${kb}\\)$`),MDe=new RegExp(`^rgba\\(${Su},${Su},${Su},${kb}\\)$`),kDe=new RegExp(`^hsl\\(${kb},${Su},${Su}\\)$`),ADe=new RegExp(`^hsla\\(${kb},${Su},${Su},${kb}\\)$`),OG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};k5(Qw,A5,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:FG,formatHex:FG,formatHex8:IDe,formatHsl:RDe,formatRgb:UG,toString:UG});function FG(){return this.rgb().formatHex()}function IDe(){return this.rgb().formatHex8()}function RDe(){return jte(this).formatHsl()}function UG(){return this.rgb().formatRgb()}function A5(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=_De.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?BG(e):n===3?new ha(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?rC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?rC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=CDe.exec(t))?new ha(e[1],e[2],e[3],1):(e=TDe.exec(t))?new ha(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=EDe.exec(t))?rC(e[1],e[2],e[3],e[4]):(e=MDe.exec(t))?rC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=kDe.exec(t))?VG(e[1],e[2]/100,e[3]/100,1):(e=ADe.exec(t))?VG(e[1],e[2]/100,e[3]/100,e[4]):OG.hasOwnProperty(t)?BG(OG[t]):t==="transparent"?new ha(NaN,NaN,NaN,0):null}function BG(t){return new ha(t>>16&255,t>>8&255,t&255,1)}function rC(t,e,n,r){return r<=0&&(t=e=n=NaN),new ha(t,e,n,r)}function NDe(t){return t instanceof Qw||(t=A5(t)),t?(t=t.rgb(),new ha(t.r,t.g,t.b,t.opacity)):new ha}function Ab(t,e,n,r){return arguments.length===1?NDe(t):new ha(t,e,n,r??1)}function ha(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}k5(ha,Ab,Hte(Qw,{brighter(t){return t=t==null?nM:Math.pow(nM,t),new ha(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Mb:Math.pow(Mb,t),new ha(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ha(Yp(this.r),Yp(this.g),Yp(this.b),rM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zG,formatHex:zG,formatHex8:PDe,formatRgb:WG,toString:WG}));function zG(){return`#${Dp(this.r)}${Dp(this.g)}${Dp(this.b)}`}function PDe(){return`#${Dp(this.r)}${Dp(this.g)}${Dp(this.b)}${Dp((isNaN(this.opacity)?1:this.opacity)*255)}`}function WG(){const t=rM(this.opacity);return`${t===1?"rgb(":"rgba("}${Yp(this.r)}, ${Yp(this.g)}, ${Yp(this.b)}${t===1?")":`, ${t})`}`}function rM(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Yp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Dp(t){return t=Yp(t),(t<16?"0":"")+t.toString(16)}function VG(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new xc(t,e,n,r)}function jte(t){if(t instanceof xc)return new xc(t.h,t.s,t.l,t.opacity);if(t instanceof Qw||(t=A5(t)),!t)return new xc;if(t instanceof xc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new xc(o,a,l,t.opacity)}function $De(t,e,n,r){return arguments.length===1?jte(t):new xc(t,e,n,r??1)}function xc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}k5(xc,$De,Hte(Qw,{brighter(t){return t=t==null?nM:Math.pow(nM,t),new xc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Mb:Math.pow(Mb,t),new xc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ha(WN(t>=240?t-240:t+120,i,r),WN(t,i,r),WN(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new xc(GG(this.h),iC(this.s),iC(this.l),rM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=rM(this.opacity);return`${t===1?"hsl(":"hsla("}${GG(this.h)}, ${iC(this.s)*100}%, ${iC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function GG(t){return t=(t||0)%360,t<0?t+360:t}function iC(t){return Math.max(0,Math.min(1,t||0))}function WN(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function DDe(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}function LDe(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],o=r>0?t[r-1]:2*i-s,a=r<e-1?t[r+2]:2*s-i;return DDe((n-r/e)*e,o,i,s,a)}}const Xte=t=>()=>t;function ODe(t,e){return function(n){return t+n*e}}function FDe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function UDe(t){return(t=+t)==1?qte:function(e,n){return n-e?FDe(e,n,t):Xte(isNaN(e)?n:e)}}function qte(t,e){var n=e-t;return n?ODe(t,n):Xte(isNaN(t)?e:t)}(function t(e){var n=UDe(e);function r(i,s){var o=n((i=Ab(i)).r,(s=Ab(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=qte(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function BDe(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Ab(e[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=t(r),i=t(i),s=t(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var zDe=BDe(LDe);function WDe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var aL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,VN=new RegExp(aL.source,"g");function VDe(t){return function(){return t}}function GDe(t){return function(e){return t(e)+""}}function HDe(t,e){var n=aL.lastIndex=VN.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=aL.exec(t))&&(i=VN.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:WDe(r,i)})),n=VN.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?GDe(l[0].x):VDe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}var jDe=_h,XDe=Ea,qDe=Bc,YDe="[object String]";function KDe(t){return typeof t=="string"||!XDe(t)&&qDe(t)&&jDe(t)==YDe}var ZDe=KDe;const JDe=is(ZDe);function QDe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Yte=QDe;const hn=is(Yte);function Kte(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function I5(t){let e=t,n=t;t.length===1&&(e=(o,a)=>t(o)-a,n=eLe(t));function r(o,a,l,c){for(l==null&&(l=0),c==null&&(c=o.length);l<c;){const u=l+c>>>1;n(o[u],a)<0?l=u+1:c=u}return l}function i(o,a,l,c){for(l==null&&(l=0),c==null&&(c=o.length);l<c;){const u=l+c>>>1;n(o[u],a)>0?c=u:l=u+1}return l}function s(o,a,l,c){l==null&&(l=0),c==null&&(c=o.length);const u=r(o,a,l,c-1);return u>l&&e(o[u-1],a)>-e(o[u],a)?u-1:u}return{left:r,center:s,right:i}}function eLe(t){return(e,n)=>Kte(t(e),n)}function tLe(t){return t===null?NaN:+t}const nLe=I5(Kte),rLe=nLe.right;I5(tLe).center;const Zte=rLe;var lL=Math.sqrt(50),cL=Math.sqrt(10),uL=Math.sqrt(2);function dL(t,e,n){var r,i=-1,s,o,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(s=t,t=e,e=s),(a=Jte(t,e,n))===0||!isFinite(a))return[];if(a>0){let l=Math.round(t/a),c=Math.round(e/a);for(l*a<t&&++l,c*a>e&&--c,o=new Array(s=c-l+1);++i<s;)o[i]=(l+i)*a}else{a=-a;let l=Math.round(t*a),c=Math.round(e*a);for(l/a<t&&++l,c/a>e&&--c,o=new Array(s=c-l+1);++i<s;)o[i]=(l+i)/a}return r&&o.reverse(),o}function Jte(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=lL?10:s>=cL?5:s>=uL?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=lL?10:s>=cL?5:s>=uL?2:1)}function fL(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=lL?i*=10:s>=cL?i*=5:s>=uL&&(i*=2),e<t?-i:i}function iLe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Ch(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Qte(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const HG=Symbol("implicit");function Lp(){var t=new Map,e=[],n=[],r=HG;function i(s){var o=s+"",a=t.get(o);if(!a){if(r!==HG)return r;t.set(o,a=e.push(s))}return n[(a-1)%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Map;for(const o of s){const a=o+"";t.has(a)||t.set(a,e.push(o))}return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Lp(e,n).unknown(r)},Ch.apply(i,arguments),i}function Ib(){var t=Lp().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var f=e().length,h=i<r,p=h?i:r,v=h?r:i;s=(v-p)/Math.max(1,f-l+c*2),a&&(s=Math.floor(s)),p+=(v-p-s*(f-l))*u,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var m=iLe(f).map(function(g){return p+s*g});return n(h?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.copy=function(){return Ib(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},Ch.apply(d(),arguments)}function ene(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ene(e())},t}function sLe(){return ene(Ib.apply(null,arguments).paddingInner(1))}function R5(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function tne(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function e2(){}var Rb=.7,iM=1/Rb,ev="\\s*([+-]?\\d+)\\s*",Nb="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",_u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oLe=/^#([0-9a-f]{3,8})$/,aLe=new RegExp("^rgb\\("+[ev,ev,ev]+"\\)$"),lLe=new RegExp("^rgb\\("+[_u,_u,_u]+"\\)$"),cLe=new RegExp("^rgba\\("+[ev,ev,ev,Nb]+"\\)$"),uLe=new RegExp("^rgba\\("+[_u,_u,_u,Nb]+"\\)$"),dLe=new RegExp("^hsl\\("+[Nb,_u,_u]+"\\)$"),fLe=new RegExp("^hsla\\("+[Nb,_u,_u,Nb]+"\\)$"),jG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};R5(e2,Pb,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:XG,formatHex:XG,formatHsl:hLe,formatRgb:qG,toString:qG});function XG(){return this.rgb().formatHex()}function hLe(){return nne(this).formatHsl()}function qG(){return this.rgb().formatRgb()}function Pb(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=oLe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?YG(e):n===3?new qa(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?sC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?sC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=aLe.exec(t))?new qa(e[1],e[2],e[3],1):(e=lLe.exec(t))?new qa(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=cLe.exec(t))?sC(e[1],e[2],e[3],e[4]):(e=uLe.exec(t))?sC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dLe.exec(t))?JG(e[1],e[2]/100,e[3]/100,1):(e=fLe.exec(t))?JG(e[1],e[2]/100,e[3]/100,e[4]):jG.hasOwnProperty(t)?YG(jG[t]):t==="transparent"?new qa(NaN,NaN,NaN,0):null}function YG(t){return new qa(t>>16&255,t>>8&255,t&255,1)}function sC(t,e,n,r){return r<=0&&(t=e=n=NaN),new qa(t,e,n,r)}function pLe(t){return t instanceof e2||(t=Pb(t)),t?(t=t.rgb(),new qa(t.r,t.g,t.b,t.opacity)):new qa}function hL(t,e,n,r){return arguments.length===1?pLe(t):new qa(t,e,n,r??1)}function qa(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}R5(qa,hL,tne(e2,{brighter:function(t){return t=t==null?iM:Math.pow(iM,t),new qa(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?Rb:Math.pow(Rb,t),new qa(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KG,formatHex:KG,formatRgb:ZG,toString:ZG}));function KG(){return"#"+GN(this.r)+GN(this.g)+GN(this.b)}function ZG(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function GN(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function JG(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fu(t,e,n,r)}function nne(t){if(t instanceof fu)return new fu(t.h,t.s,t.l,t.opacity);if(t instanceof e2||(t=Pb(t)),!t)return new fu;if(t instanceof fu)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new fu(o,a,l,t.opacity)}function mLe(t,e,n,r){return arguments.length===1?nne(t):new fu(t,e,n,r??1)}function fu(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}R5(fu,mLe,tne(e2,{brighter:function(t){return t=t==null?iM:Math.pow(iM,t),new fu(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Rb:Math.pow(Rb,t),new fu(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new qa(HN(t>=240?t-240:t+120,i,r),HN(t,i,r),HN(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function HN(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const N5=t=>()=>t;function gLe(t,e){return function(n){return t+n*e}}function vLe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function yLe(t){return(t=+t)==1?rne:function(e,n){return n-e?vLe(e,n,t):N5(isNaN(e)?n:e)}}function rne(t,e){var n=e-t;return n?gLe(t,n):N5(isNaN(t)?e:t)}const QG=function t(e){var n=yLe(e);function r(i,s){var o=n((i=hL(i)).r,(s=hL(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=rne(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function xLe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function bLe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function wLe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=hy(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function SLe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function sM(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function _Le(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=hy(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var pL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jN=new RegExp(pL.source,"g");function CLe(t){return function(){return t}}function TLe(t){return function(e){return t(e)+""}}function ELe(t,e){var n=pL.lastIndex=jN.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=pL.exec(t))&&(i=jN.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:sM(r,i)})),n=jN.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?TLe(l[0].x):CLe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function hy(t,e){var n=typeof e,r;return e==null||n==="boolean"?N5(e):(n==="number"?sM:n==="string"?(r=Pb(e))?(e=r,QG):ELe:e instanceof Pb?QG:e instanceof Date?SLe:bLe(e)?xLe:Array.isArray(e)?wLe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?_Le:sM)(t,e)}function P5(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function MLe(t,e){e===void 0&&(e=t,t=hy);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function kLe(t){return function(){return t}}function ALe(t){return+t}var eH=[0,1];function gu(t){return t}function mL(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:kLe(isNaN(e)?NaN:.5)}function ILe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function RLe(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=mL(i,r),s=n(o,s)):(r=mL(r,i),s=n(s,o)),function(a){return s(r(a))}}function NLe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=mL(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Zte(t,a,1,r)-1;return s[l](i[l](a))}}function $A(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $5(){var t=eH,e=eH,n=hy,r,i,s,o=gu,a,l,c;function u(){var f=Math.min(t.length,e.length);return o!==gu&&(o=ILe(t[0],t[f-1])),a=f>2?NLe:RLe,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=a(t.map(r),e,n)))(r(o(f)))}return d.invert=function(f){return o(i((c||(c=a(e,t.map(r),sM)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,ALe),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=P5,u()},d.clamp=function(f){return arguments.length?(o=f?!0:gu,u()):o!==gu},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,h){return r=f,i=h,u()}}function ine(){return $5()(gu,gu)}function PLe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function oM(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Cv(t){return t=oM(Math.abs(t)),t?t[1]:NaN}function $Le(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function DLe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var LLe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function aM(t){if(!(e=LLe.exec(t)))throw new Error("invalid format: "+t);var e;return new D5({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}aM.prototype=D5.prototype;function D5(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}D5.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function OLe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var sne;function FLe(t,e){var n=oM(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(sne=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+oM(t,Math.max(0,e+s-1))[0]}function tH(t,e){var n=oM(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const nH={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:PLe,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return tH(t*100,e)},r:tH,s:FLe,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function rH(t){return t}var iH=Array.prototype.map,sH=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ULe(t){var e=t.grouping===void 0||t.thousands===void 0?rH:$Le(iH.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?rH:DLe(iH.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"-":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=aM(d);var f=d.fill,h=d.align,p=d.sign,v=d.symbol,m=d.zero,g=d.width,y=d.comma,x=d.precision,S=d.trim,_=d.type;_==="n"?(y=!0,_="g"):nH[_]||(x===void 0&&(x=12),S=!0,_="g"),(m||f==="0"&&h==="=")&&(m=!0,f="0",h="=");var C=v==="$"?n:v==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",T=v==="$"?r:/[%p]/.test(_)?o:"",A=nH[_],k=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function M(R){var P=C,O=T,$,U,z;if(_==="c")O=A(R)+O,R="";else{R=+R;var X=R<0||1/R<0;if(R=isNaN(R)?l:A(Math.abs(R),x),S&&(R=OLe(R)),X&&+R==0&&p!=="+"&&(X=!1),P=(X?p==="("?p:a:p==="-"||p==="("?"":p)+P,O=(_==="s"?sH[8+sne/3]:"")+O+(X&&p==="("?")":""),k){for($=-1,U=R.length;++$<U;)if(z=R.charCodeAt($),48>z||z>57){O=(z===46?i+R.slice($+1):R.slice($))+O,R=R.slice(0,$);break}}}y&&!m&&(R=e(R,1/0));var D=P.length+R.length+O.length,F=D<g?new Array(g-D+1).join(f):"";switch(y&&m&&(R=e(F+R,F.length?g-O.length:1/0),F=""),h){case"<":R=P+R+O+F;break;case"=":R=P+F+R+O;break;case"^":R=F.slice(0,D=F.length>>1)+P+R+O+F.slice(D);break;default:R=F+P+R+O;break}return s(R)}return M.toString=function(){return d+""},M}function u(d,f){var h=c((d=aM(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(Cv(f)/3)))*3,v=Math.pow(10,-p),m=sH[8+p/3];return function(g){return h(v*g)+m}}return{format:c,formatPrefix:u}}var oC,t2,one;BLe({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function BLe(t){return oC=ULe(t),t2=oC.format,one=oC.formatPrefix,oC}function zLe(t){return Math.max(0,-Cv(Math.abs(t)))}function WLe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Cv(e)/3)))*3-Cv(Math.abs(t)))}function VLe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Cv(e)-Cv(t))+1}function GLe(t,e,n,r){var i=fL(t,e,n),s;switch(r=aM(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=WLe(i,o))&&(r.precision=s),one(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=VLe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=zLe(i))&&(r.precision=s-(r.type==="%")*2);break}}return t2(r)}function n2(t){var e=t.domain;return t.ticks=function(n){var r=e();return dL(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return GLe(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=Jte(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function r2(){var t=ine();return t.copy=function(){return $A(t,r2())},Ch.apply(t,arguments),n2(t)}function ane(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function oH(t){return Math.log(t)}function aH(t){return Math.exp(t)}function HLe(t){return-Math.log(-t)}function jLe(t){return-Math.exp(-t)}function XLe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function qLe(t){return t===10?XLe:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function YLe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function lH(t){return function(e){return-t(-e)}}function KLe(t){var e=t(oH,aH),n=e.domain,r=10,i,s;function o(){return i=YLe(r),s=qLe(r),n()[0]<0?(i=lH(i),s=lH(s),t(HLe,jLe)):t(oH,aH),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=function(a){var l=n(),c=l[0],u=l[l.length-1],d;(d=u<c)&&(f=c,c=u,u=f);var f=i(c),h=i(u),p,v,m,g=a==null?10:+a,y=[];if(!(r%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),c>0){for(;f<=h;++f)for(v=1,p=s(f);v<r;++v)if(m=p*v,!(m<c)){if(m>u)break;y.push(m)}}else for(;f<=h;++f)for(v=r-1,p=s(f);v>=1;--v)if(m=p*v,!(m<c)){if(m>u)break;y.push(m)}y.length*2<g&&(y=dL(c,u,g))}else y=dL(f,h,Math.min(h-f,g)).map(s);return d?y.reverse():y},e.tickFormat=function(a,l){if(l==null&&(l=r===10?".0e":","),typeof l!="function"&&(l=t2(l)),a===1/0)return l;a==null&&(a=10);var c=Math.max(1,r*a/e.ticks().length);return function(u){var d=u/s(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=function(){return n(ane(n(),{floor:function(a){return s(Math.floor(i(a)))},ceil:function(a){return s(Math.ceil(i(a)))}}))},e}function lne(){var t=KLe($5()).domain([1,10]);return t.copy=function(){return $A(t,lne()).base(t.base())},Ch.apply(t,arguments),t}function cH(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function uH(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function ZLe(t){var e=1,n=t(cH(e),uH(e));return n.constant=function(r){return arguments.length?t(cH(e=+r),uH(e)):e},n2(n)}function cne(){var t=ZLe($5());return t.copy=function(){return $A(t,cne()).constant(t.constant())},Ch.apply(t,arguments)}function une(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[Zte(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return une().domain([t,e]).range(i).unknown(s)},Ch.apply(n2(o),arguments)}var XN=new Date,qN=new Date;function Ns(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return e(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var l=[],c;if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=function(s){return Ns(function(o){if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););})},n&&(i.count=function(s,o){return XN.setTime(+s),qN.setTime(+o),t(XN),t(qN),Math.floor(n(XN,qN))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}var lM=Ns(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});lM.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ns(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):lM};const JLe=lM;lM.range;const Td=1e3,Il=Td*60,Ed=Il*60,xm=Ed*24,L5=xm*7,dH=xm*30,YN=xm*365;var dne=Ns(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*Td)},function(t,e){return(e-t)/Td},function(t){return t.getUTCSeconds()});const N0=dne;dne.range;var fne=Ns(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Td)},function(t,e){t.setTime(+t+e*Il)},function(t,e){return(e-t)/Il},function(t){return t.getMinutes()});const hne=fne;fne.range;var pne=Ns(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Td-t.getMinutes()*Il)},function(t,e){t.setTime(+t+e*Ed)},function(t,e){return(e-t)/Ed},function(t){return t.getHours()});const mne=pne;pne.range;var gne=Ns(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Il)/xm,t=>t.getDate()-1);const vne=gne;gne.range;function qm(t){return Ns(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Il)/L5})}var O5=qm(0),QLe=qm(1),eOe=qm(2),tOe=qm(3),nOe=qm(4),rOe=qm(5),iOe=qm(6);O5.range;QLe.range;eOe.range;tOe.range;nOe.range;rOe.range;iOe.range;var yne=Ns(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const xne=yne;yne.range;var F5=Ns(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});F5.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Ns(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const bne=F5;F5.range;var wne=Ns(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Il)},function(t,e){return(e-t)/Il},function(t){return t.getUTCMinutes()});const Sne=wne;wne.range;var _ne=Ns(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Ed)},function(t,e){return(e-t)/Ed},function(t){return t.getUTCHours()});const Cne=_ne;_ne.range;var Tne=Ns(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/xm},function(t){return t.getUTCDate()-1});const Ene=Tne;Tne.range;function Ym(t){return Ns(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/L5})}var U5=Ym(0),sOe=Ym(1),oOe=Ym(2),aOe=Ym(3),lOe=Ym(4),cOe=Ym(5),uOe=Ym(6);U5.range;sOe.range;oOe.range;aOe.range;lOe.range;cOe.range;uOe.range;var Mne=Ns(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const kne=Mne;Mne.range;var B5=Ns(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});B5.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Ns(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const Ane=B5;B5.range;function Ine(t,e,n,r,i,s){const o=[[N0,1,Td],[N0,5,5*Td],[N0,15,15*Td],[N0,30,30*Td],[s,1,Il],[s,5,5*Il],[s,15,15*Il],[s,30,30*Il],[i,1,Ed],[i,3,3*Ed],[i,6,6*Ed],[i,12,12*Ed],[r,1,xm],[r,2,2*xm],[n,1,L5],[e,1,dH],[e,3,3*dH],[t,1,YN]];function a(c,u,d){const f=u<c;f&&([c,u]=[u,c]);const h=d&&typeof d.range=="function"?d:l(c,u,d),p=h?h.range(c,+u+1):[];return f?p.reverse():p}function l(c,u,d){const f=Math.abs(u-c)/d,h=I5(([,,m])=>m).right(o,f);if(h===o.length)return t.every(fL(c/YN,u/YN,d));if(h===0)return JLe.every(Math.max(fL(c,u,d),1));const[p,v]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return p.every(v)}return[a,l]}const[dOe,fOe]=Ine(Ane,kne,U5,Ene,Cne,Sne),[hOe,pOe]=Ine(bne,xne,O5,vne,mne,hne);var KN=new Date,ZN=new Date;function ns(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return e(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var l=[],c;if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=function(s){return ns(function(o){if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););})},n&&(i.count=function(s,o){return KN.setTime(+s),ZN.setTime(+o),t(KN),t(ZN),Math.floor(n(KN,ZN))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}var cM=ns(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});cM.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ns(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):cM};const fH=cM;cM.range;var uM=1e3,bm=6e4,dM=36e5,Rne=864e5,Nne=6048e5,Pne=ns(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*uM)},function(t,e){return(e-t)/uM},function(t){return t.getUTCSeconds()});const hH=Pne;Pne.range;var $ne=ns(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*uM)},function(t,e){t.setTime(+t+e*bm)},function(t,e){return(e-t)/bm},function(t){return t.getMinutes()});const mOe=$ne;$ne.range;var Dne=ns(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*uM-t.getMinutes()*bm)},function(t,e){t.setTime(+t+e*dM)},function(t,e){return(e-t)/dM},function(t){return t.getHours()});const gOe=Dne;Dne.range;var Lne=ns(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*bm)/Rne},function(t){return t.getDate()-1});const One=Lne;Lne.range;function Km(t){return ns(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*bm)/Nne})}var fM=Km(0),$b=Km(1),Fne=Km(2),Une=Km(3),wm=Km(4),Bne=Km(5),zne=Km(6);fM.range;$b.range;Fne.range;Une.range;wm.range;Bne.range;zne.range;var Wne=ns(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const vOe=Wne;Wne.range;var z5=ns(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});z5.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:ns(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const Tv=z5;z5.range;var Vne=ns(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*bm)},function(t,e){return(e-t)/bm},function(t){return t.getUTCMinutes()});const yOe=Vne;Vne.range;var Gne=ns(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*dM)},function(t,e){return(e-t)/dM},function(t){return t.getUTCHours()});const xOe=Gne;Gne.range;var Hne=ns(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Rne},function(t){return t.getUTCDate()-1});const jne=Hne;Hne.range;function Zm(t){return ns(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/Nne})}var hM=Zm(0),Db=Zm(1),Xne=Zm(2),qne=Zm(3),Sm=Zm(4),Yne=Zm(5),Kne=Zm(6);hM.range;Db.range;Xne.range;qne.range;Sm.range;Yne.range;Kne.range;var Zne=ns(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const bOe=Zne;Zne.range;var W5=ns(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});W5.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:ns(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const Ev=W5;W5.range;function JN(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function QN(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ax(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function wOe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=Ix(i),u=Rx(i),d=Ix(s),f=Rx(s),h=Ix(o),p=Rx(o),v=Ix(a),m=Rx(a),g=Ix(l),y=Rx(l),x={a:X,A:D,b:F,B:W,c:null,d:xH,e:xH,f:GOe,g:e4e,G:n4e,H:zOe,I:WOe,j:VOe,L:Jne,m:HOe,M:jOe,p:V,q:j,Q:SH,s:_H,S:XOe,u:qOe,U:YOe,V:KOe,w:ZOe,W:JOe,x:null,X:null,y:QOe,Y:t4e,Z:r4e,"%":wH},S={a:J,A:Q,b:te,B:re,c:null,d:bH,e:bH,f:a4e,g:v4e,G:x4e,H:i4e,I:s4e,j:o4e,L:ere,m:l4e,M:c4e,p:se,q:fe,Q:SH,s:_H,S:u4e,u:d4e,U:f4e,V:h4e,w:p4e,W:m4e,x:null,X:null,y:g4e,Y:y4e,Z:b4e,"%":wH},_={a:M,A:R,b:P,B:O,c:$,d:vH,e:vH,f:OOe,g:gH,G:mH,H:yH,I:yH,j:POe,L:LOe,m:NOe,M:$Oe,p:k,q:ROe,Q:UOe,s:BOe,S:DOe,u:EOe,U:MOe,V:kOe,w:TOe,W:AOe,x:U,X:z,y:gH,Y:mH,Z:IOe,"%":FOe};x.x=C(n,x),x.X=C(r,x),x.c=C(e,x),S.x=C(n,S),S.X=C(r,S),S.c=C(e,S);function C(ae,ye){return function(le){var H=[],Me=-1,we=0,Ee=ae.length,me,qe,ke;for(le instanceof Date||(le=new Date(+le));++Me<Ee;)ae.charCodeAt(Me)===37&&(H.push(ae.slice(we,Me)),(qe=pH[me=ae.charAt(++Me)])!=null?me=ae.charAt(++Me):qe=me==="e"?" ":"0",(ke=ye[me])&&(me=ke(le,qe)),H.push(me),we=Me+1);return H.push(ae.slice(we,Me)),H.join("")}}function T(ae,ye){return function(le){var H=Ax(1900,void 0,1),Me=A(H,ae,le+="",0),we,Ee;if(Me!=le.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(ye&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(we=QN(Ax(H.y,0,1)),Ee=we.getUTCDay(),we=Ee>4||Ee===0?Db.ceil(we):Db(we),we=jne.offset(we,(H.V-1)*7),H.y=we.getUTCFullYear(),H.m=we.getUTCMonth(),H.d=we.getUTCDate()+(H.w+6)%7):(we=JN(Ax(H.y,0,1)),Ee=we.getDay(),we=Ee>4||Ee===0?$b.ceil(we):$b(we),we=One.offset(we,(H.V-1)*7),H.y=we.getFullYear(),H.m=we.getMonth(),H.d=we.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),Ee="Z"in H?QN(Ax(H.y,0,1)).getUTCDay():JN(Ax(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(Ee+5)%7:H.w+H.U*7-(Ee+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,QN(H)):JN(H)}}function A(ae,ye,le,H){for(var Me=0,we=ye.length,Ee=le.length,me,qe;Me<we;){if(H>=Ee)return-1;if(me=ye.charCodeAt(Me++),me===37){if(me=ye.charAt(Me++),qe=_[me in pH?ye.charAt(Me++):me],!qe||(H=qe(ae,le,H))<0)return-1}else if(me!=le.charCodeAt(H++))return-1}return H}function k(ae,ye,le){var H=c.exec(ye.slice(le));return H?(ae.p=u.get(H[0].toLowerCase()),le+H[0].length):-1}function M(ae,ye,le){var H=h.exec(ye.slice(le));return H?(ae.w=p.get(H[0].toLowerCase()),le+H[0].length):-1}function R(ae,ye,le){var H=d.exec(ye.slice(le));return H?(ae.w=f.get(H[0].toLowerCase()),le+H[0].length):-1}function P(ae,ye,le){var H=g.exec(ye.slice(le));return H?(ae.m=y.get(H[0].toLowerCase()),le+H[0].length):-1}function O(ae,ye,le){var H=v.exec(ye.slice(le));return H?(ae.m=m.get(H[0].toLowerCase()),le+H[0].length):-1}function $(ae,ye,le){return A(ae,e,ye,le)}function U(ae,ye,le){return A(ae,n,ye,le)}function z(ae,ye,le){return A(ae,r,ye,le)}function X(ae){return o[ae.getDay()]}function D(ae){return s[ae.getDay()]}function F(ae){return l[ae.getMonth()]}function W(ae){return a[ae.getMonth()]}function V(ae){return i[+(ae.getHours()>=12)]}function j(ae){return 1+~~(ae.getMonth()/3)}function J(ae){return o[ae.getUTCDay()]}function Q(ae){return s[ae.getUTCDay()]}function te(ae){return l[ae.getUTCMonth()]}function re(ae){return a[ae.getUTCMonth()]}function se(ae){return i[+(ae.getUTCHours()>=12)]}function fe(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var ye=C(ae+="",x);return ye.toString=function(){return ae},ye},parse:function(ae){var ye=T(ae+="",!1);return ye.toString=function(){return ae},ye},utcFormat:function(ae){var ye=C(ae+="",S);return ye.toString=function(){return ae},ye},utcParse:function(ae){var ye=T(ae+="",!0);return ye.toString=function(){return ae},ye}}}var pH={"-":"",_:" ",0:"0"},Ps=/^\s*\d+/,SOe=/^%/,_Oe=/[\\^$*+?|[\]().{}]/g;function xr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function COe(t){return t.replace(_Oe,"\\$&")}function Ix(t){return new RegExp("^(?:"+t.map(COe).join("|")+")","i")}function Rx(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function TOe(t,e,n){var r=Ps.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function EOe(t,e,n){var r=Ps.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function MOe(t,e,n){var r=Ps.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function kOe(t,e,n){var r=Ps.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function AOe(t,e,n){var r=Ps.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function mH(t,e,n){var r=Ps.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function gH(t,e,n){var r=Ps.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function IOe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ROe(t,e,n){var r=Ps.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function NOe(t,e,n){var r=Ps.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function vH(t,e,n){var r=Ps.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function POe(t,e,n){var r=Ps.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function yH(t,e,n){var r=Ps.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function $Oe(t,e,n){var r=Ps.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function DOe(t,e,n){var r=Ps.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function LOe(t,e,n){var r=Ps.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function OOe(t,e,n){var r=Ps.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function FOe(t,e,n){var r=SOe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function UOe(t,e,n){var r=Ps.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function BOe(t,e,n){var r=Ps.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function xH(t,e){return xr(t.getDate(),e,2)}function zOe(t,e){return xr(t.getHours(),e,2)}function WOe(t,e){return xr(t.getHours()%12||12,e,2)}function VOe(t,e){return xr(1+One.count(Tv(t),t),e,3)}function Jne(t,e){return xr(t.getMilliseconds(),e,3)}function GOe(t,e){return Jne(t,e)+"000"}function HOe(t,e){return xr(t.getMonth()+1,e,2)}function jOe(t,e){return xr(t.getMinutes(),e,2)}function XOe(t,e){return xr(t.getSeconds(),e,2)}function qOe(t){var e=t.getDay();return e===0?7:e}function YOe(t,e){return xr(fM.count(Tv(t)-1,t),e,2)}function Qne(t){var e=t.getDay();return e>=4||e===0?wm(t):wm.ceil(t)}function KOe(t,e){return t=Qne(t),xr(wm.count(Tv(t),t)+(Tv(t).getDay()===4),e,2)}function ZOe(t){return t.getDay()}function JOe(t,e){return xr($b.count(Tv(t)-1,t),e,2)}function QOe(t,e){return xr(t.getFullYear()%100,e,2)}function e4e(t,e){return t=Qne(t),xr(t.getFullYear()%100,e,2)}function t4e(t,e){return xr(t.getFullYear()%1e4,e,4)}function n4e(t,e){var n=t.getDay();return t=n>=4||n===0?wm(t):wm.ceil(t),xr(t.getFullYear()%1e4,e,4)}function r4e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+xr(e/60|0,"0",2)+xr(e%60,"0",2)}function bH(t,e){return xr(t.getUTCDate(),e,2)}function i4e(t,e){return xr(t.getUTCHours(),e,2)}function s4e(t,e){return xr(t.getUTCHours()%12||12,e,2)}function o4e(t,e){return xr(1+jne.count(Ev(t),t),e,3)}function ere(t,e){return xr(t.getUTCMilliseconds(),e,3)}function a4e(t,e){return ere(t,e)+"000"}function l4e(t,e){return xr(t.getUTCMonth()+1,e,2)}function c4e(t,e){return xr(t.getUTCMinutes(),e,2)}function u4e(t,e){return xr(t.getUTCSeconds(),e,2)}function d4e(t){var e=t.getUTCDay();return e===0?7:e}function f4e(t,e){return xr(hM.count(Ev(t)-1,t),e,2)}function tre(t){var e=t.getUTCDay();return e>=4||e===0?Sm(t):Sm.ceil(t)}function h4e(t,e){return t=tre(t),xr(Sm.count(Ev(t),t)+(Ev(t).getUTCDay()===4),e,2)}function p4e(t){return t.getUTCDay()}function m4e(t,e){return xr(Db.count(Ev(t)-1,t),e,2)}function g4e(t,e){return xr(t.getUTCFullYear()%100,e,2)}function v4e(t,e){return t=tre(t),xr(t.getUTCFullYear()%100,e,2)}function y4e(t,e){return xr(t.getUTCFullYear()%1e4,e,4)}function x4e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Sm(t):Sm.ceil(t),xr(t.getUTCFullYear()%1e4,e,4)}function b4e(){return"+0000"}function wH(){return"%"}function SH(t){return+t}function _H(t){return Math.floor(+t/1e3)}var Fg,DA,nre,rre,ire;w4e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function w4e(t){return Fg=wOe(t),DA=Fg.format,nre=Fg.parse,rre=Fg.utcFormat,ire=Fg.utcParse,Fg}function S4e(t){return new Date(t)}function _4e(t){return t instanceof Date?+t:+new Date(+t)}function V5(t,e,n,r,i,s,o,a,l,c){var u=ine(),d=u.invert,f=u.domain,h=c(".%L"),p=c(":%S"),v=c("%I:%M"),m=c("%I %p"),g=c("%a %d"),y=c("%b %d"),x=c("%B"),S=c("%Y");function _(C){return(l(C)<C?h:a(C)<C?p:o(C)<C?v:s(C)<C?m:r(C)<C?i(C)<C?g:y:n(C)<C?x:S)(C)}return u.invert=function(C){return new Date(d(C))},u.domain=function(C){return arguments.length?f(Array.from(C,_4e)):f().map(S4e)},u.ticks=function(C){var T=f();return t(T[0],T[T.length-1],C??10)},u.tickFormat=function(C,T){return T==null?_:c(T)},u.nice=function(C){var T=f();return(!C||typeof C.range!="function")&&(C=e(T[0],T[T.length-1],C??10)),C?f(ane(T,C)):u},u.copy=function(){return $A(u,V5(t,e,n,r,i,s,o,a,l,c))},u}function C4e(){return Ch.apply(V5(hOe,pOe,bne,xne,O5,vne,mne,hne,N0,DA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function T4e(){return Ch.apply(V5(dOe,fOe,Ane,kne,U5,Ene,Cne,Sne,N0,rre).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function E4e(){var t=0,e=1,n,r,i,s,o=gu,a=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(s(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(o=d,c):o};function u(d){return function(f){var h,p;return arguments.length?([h,p]=f,o=d(h,p),c):[o(0),o(1)]}}return c.range=u(hy),c.rangeRound=u(P5),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return s=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function sre(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ore(){var t=n2(E4e()(gu));return t.copy=function(){return sre(t,ore())},Qte.apply(t,arguments)}function M4e(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,c=gu,u,d=!1,f;function h(v){return isNaN(v=+v)?f:(v=.5+((v=+u(v))-s)*(r*v<r*s?a:l),c(d?Math.max(0,Math.min(1,v)):v))}h.domain=function(v){return arguments.length?([t,e,n]=v,i=u(t=+t),s=u(e=+e),o=u(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[t,e,n]},h.clamp=function(v){return arguments.length?(d=!!v,h):d},h.interpolator=function(v){return arguments.length?(c=v,h):c};function p(v){return function(m){var g,y,x;return arguments.length?([g,y,x]=m,c=MLe(v,[g,y,x]),h):[c(0),c(.5),c(1)]}}return h.range=p(hy),h.rangeRound=p(P5),h.unknown=function(v){return arguments.length?(f=v,h):f},function(v){return u=v,i=v(t),s=v(e),o=v(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function gL(){var t=n2(M4e()(gu));return t.copy=function(){return sre(t,gL())},Qte.apply(t,arguments)}function Jn(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const k4e=Jn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),A4e=Jn("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),I4e=Jn("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),R4e=Jn("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),N4e=Jn("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),P4e=Jn("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),$4e=Jn("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),D4e=Jn("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),are=Jn("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Br=t=>zDe(t[t.length-1]);var G5=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Jn);Br(G5);var H5=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Jn);Br(H5);var j5=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Jn);Br(j5);var X5=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Jn);Br(X5);var q5=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Jn);Br(q5);var Y5=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Jn);Br(Y5);var K5=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Jn);Br(K5);var Z5=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Jn);Br(Z5);var J5=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Jn);Br(J5);var Q5=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Jn);Br(Q5);var eU=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Jn);Br(eU);var tU=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Jn);Br(tU);var nU=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Jn);Br(nU);var rU=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Jn);Br(rU);var iU=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Jn);Br(iU);var sU=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Jn);Br(sU);var oU=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Jn);Br(oU);var aU=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Jn);Br(aU);var lU=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Jn);Br(lU);var cU=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Jn);Br(cU);var uU=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Jn);Br(uU);var dU=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Jn);Br(dU);var fU=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Jn);Br(fU);var hU=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Jn);Br(hU);var pU=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Jn);Br(pU);var mU=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Jn);Br(mU);var gU=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Jn);Br(gU);var L4e="__lodash_hash_undefined__";function O4e(t){return this.__data__.set(t,L4e),this}var F4e=O4e;function U4e(t){return this.__data__.has(t)}var B4e=U4e,z4e=m5,W4e=F4e,V4e=B4e;function pM(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new z4e;++e<n;)this.add(t[e])}pM.prototype.add=pM.prototype.push=W4e;pM.prototype.has=V4e;var vU=pM;function G4e(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var H4e=G4e;function j4e(t){return t!==t}var X4e=j4e;function q4e(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var Y4e=q4e,K4e=H4e,Z4e=X4e,J4e=Y4e;function Q4e(t,e,n){return e===e?J4e(t,e,n):K4e(t,Z4e,n)}var eFe=Q4e,tFe=eFe;function nFe(t,e){var n=t==null?0:t.length;return!!n&&tFe(t,e,0)>-1}var lre=nFe;function rFe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var cre=rFe;function iFe(t,e){return t.has(e)}var yU=iFe,sFe=vU,oFe=lre,aFe=cre,lFe=PA,cFe=Kw,uFe=yU,dFe=200;function fFe(t,e,n,r){var i=-1,s=oFe,o=!0,a=t.length,l=[],c=e.length;if(!a)return l;n&&(e=lFe(e,cFe(n))),r?(s=aFe,o=!1):e.length>=dFe&&(s=uFe,o=!1,e=new sFe(e));e:for(;++i<a;){var u=t[i],d=n==null?u:n(u);if(u=r||u!==0?u:0,o&&d===d){for(var f=c;f--;)if(e[f]===d)continue e;l.push(u)}else s(e,d,r)||l.push(u)}return l}var hFe=fFe,pFe=hFe,mFe=T5,gFe=Pte,vFe=mFe(function(t,e){return gFe(t)?pFe(t,e):[]}),yFe=vFe;const ure=is(yFe);var vL=Math.PI,yL=2*vL,xp=1e-6,xFe=yL-xp;function xL(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function LA(){return new xL}xL.prototype=LA.prototype={constructor:xL,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,o=this._y1,a=n-t,l=r-e,c=s-t,u=o-e,d=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>xp)if(!(Math.abs(u*a-l*c)>xp)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var f=n-s,h=r-o,p=a*a+l*l,v=f*f+h*h,m=Math.sqrt(p),g=Math.sqrt(d),y=i*Math.tan((vL-Math.acos((p+d-v)/(2*m*g)))/2),x=y/g,S=y/m;Math.abs(x-1)>xp&&(this._+="L"+(t+x*c)+","+(e+x*u)),this._+="A"+i+","+i+",0,0,"+ +(u*f>c*h)+","+(this._x1=t+S*a)+","+(this._y1=e+S*l)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n,s=!!s;var o=n*Math.cos(r),a=n*Math.sin(r),l=t+o,c=e+a,u=1^s,d=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>xp||Math.abs(this._y1-c)>xp)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%yL+yL),d>xFe?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>xp&&(this._+="A"+n+","+n+",0,"+ +(d>=vL)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function mr(t){return function(){return t}}var CH=Math.abs,so=Math.atan2,tp=Math.cos,bFe=Math.max,eP=Math.min,Jc=Math.sin,P0=Math.sqrt,uo=1e-12,Lb=Math.PI,mM=Lb/2,XT=2*Lb;function wFe(t){return t>1?0:t<-1?Lb:Math.acos(t)}function TH(t){return t>=1?mM:t<=-1?-mM:Math.asin(t)}function SFe(t){return t.innerRadius}function _Fe(t){return t.outerRadius}function CFe(t){return t.startAngle}function TFe(t){return t.endAngle}function EFe(t){return t&&t.padAngle}function MFe(t,e,n,r,i,s,o,a){var l=n-t,c=r-e,u=o-i,d=a-s,f=d*l-u*c;if(!(f*f<uo))return f=(u*(e-s)-d*(t-i))/f,[t+f*l,e+f*c]}function aC(t,e,n,r,i,s,o){var a=t-n,l=e-r,c=(o?s:-s)/P0(a*a+l*l),u=c*l,d=-c*a,f=t+u,h=e+d,p=n+u,v=r+d,m=(f+p)/2,g=(h+v)/2,y=p-f,x=v-h,S=y*y+x*x,_=i-s,C=f*v-p*h,T=(x<0?-1:1)*P0(bFe(0,_*_*S-C*C)),A=(C*x-y*T)/S,k=(-C*y-x*T)/S,M=(C*x+y*T)/S,R=(-C*y+x*T)/S,P=A-m,O=k-g,$=M-m,U=R-g;return P*P+O*O>$*$+U*U&&(A=M,k=R),{cx:A,cy:k,x01:-u,y01:-d,x11:A*(i/_-1),y11:k*(i/_-1)}}function kFe(){var t=SFe,e=_Fe,n=mr(0),r=null,i=CFe,s=TFe,o=EFe,a=null;function l(){var c,u,d=+t.apply(this,arguments),f=+e.apply(this,arguments),h=i.apply(this,arguments)-mM,p=s.apply(this,arguments)-mM,v=CH(p-h),m=p>h;if(a||(a=c=LA()),f<d&&(u=f,f=d,d=u),!(f>uo))a.moveTo(0,0);else if(v>XT-uo)a.moveTo(f*tp(h),f*Jc(h)),a.arc(0,0,f,h,p,!m),d>uo&&(a.moveTo(d*tp(p),d*Jc(p)),a.arc(0,0,d,p,h,m));else{var g=h,y=p,x=h,S=p,_=v,C=v,T=o.apply(this,arguments)/2,A=T>uo&&(r?+r.apply(this,arguments):P0(d*d+f*f)),k=eP(CH(f-d)/2,+n.apply(this,arguments)),M=k,R=k,P,O;if(A>uo){var $=TH(A/d*Jc(T)),U=TH(A/f*Jc(T));(_-=$*2)>uo?($*=m?1:-1,x+=$,S-=$):(_=0,x=S=(h+p)/2),(C-=U*2)>uo?(U*=m?1:-1,g+=U,y-=U):(C=0,g=y=(h+p)/2)}var z=f*tp(g),X=f*Jc(g),D=d*tp(S),F=d*Jc(S);if(k>uo){var W=f*tp(y),V=f*Jc(y),j=d*tp(x),J=d*Jc(x),Q;if(v<Lb&&(Q=MFe(z,X,j,J,W,V,D,F))){var te=z-Q[0],re=X-Q[1],se=W-Q[0],fe=V-Q[1],ae=1/Jc(wFe((te*se+re*fe)/(P0(te*te+re*re)*P0(se*se+fe*fe)))/2),ye=P0(Q[0]*Q[0]+Q[1]*Q[1]);M=eP(k,(d-ye)/(ae-1)),R=eP(k,(f-ye)/(ae+1))}}C>uo?R>uo?(P=aC(j,J,z,X,f,R,m),O=aC(W,V,D,F,f,R,m),a.moveTo(P.cx+P.x01,P.cy+P.y01),R<k?a.arc(P.cx,P.cy,R,so(P.y01,P.x01),so(O.y01,O.x01),!m):(a.arc(P.cx,P.cy,R,so(P.y01,P.x01),so(P.y11,P.x11),!m),a.arc(0,0,f,so(P.cy+P.y11,P.cx+P.x11),so(O.cy+O.y11,O.cx+O.x11),!m),a.arc(O.cx,O.cy,R,so(O.y11,O.x11),so(O.y01,O.x01),!m))):(a.moveTo(z,X),a.arc(0,0,f,g,y,!m)):a.moveTo(z,X),!(d>uo)||!(_>uo)?a.lineTo(D,F):M>uo?(P=aC(D,F,W,V,d,-M,m),O=aC(z,X,j,J,d,-M,m),a.lineTo(P.cx+P.x01,P.cy+P.y01),M<k?a.arc(P.cx,P.cy,M,so(P.y01,P.x01),so(O.y01,O.x01),!m):(a.arc(P.cx,P.cy,M,so(P.y01,P.x01),so(P.y11,P.x11),!m),a.arc(0,0,d,so(P.cy+P.y11,P.cx+P.x11),so(O.cy+O.y11,O.cx+O.x11),m),a.arc(O.cx,O.cy,M,so(O.y11,O.x11),so(O.y01,O.x01),!m))):a.arc(0,0,d,S,x,m)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,u=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Lb/2;return[tp(u)*c,Jc(u)*c]},l.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:mr(+c),l):t},l.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:mr(+c),l):e},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:mr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:mr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:mr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:mr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:mr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function dre(t){this._context=t}dre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function xU(t){return new dre(t)}function fre(t){return t[0]}function hre(t){return t[1]}function pre(){var t=fre,e=hre,n=mr(!0),r=null,i=xU,s=null;function o(a){var l,c=a.length,u,d=!1,f;for(r==null&&(s=i(f=LA())),l=0;l<=c;++l)!(l<c&&n(u=a[l],l,a))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(u,l,a),+e(u,l,a));if(f)return s=null,f+""||null}return o.x=function(a){return arguments.length?(t=typeof a=="function"?a:mr(+a),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:mr(+a),o):e},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:mr(!!a),o):n},o.curve=function(a){return arguments.length?(i=a,r!=null&&(s=i(r)),o):i},o.context=function(a){return arguments.length?(a==null?r=s=null:s=i(r=a),o):r},o}function AFe(){var t=fre,e=null,n=mr(0),r=hre,i=mr(!0),s=null,o=xU,a=null;function l(u){var d,f,h,p=u.length,v,m=!1,g,y=new Array(p),x=new Array(p);for(s==null&&(a=o(g=LA())),d=0;d<=p;++d){if(!(d<p&&i(v=u[d],d,u))===m)if(m=!m)f=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=d-1;h>=f;--h)a.point(y[h],x[h]);a.lineEnd(),a.areaEnd()}m&&(y[d]=+t(v,d,u),x[d]=+n(v,d,u),a.point(e?+e(v,d,u):y[d],r?+r(v,d,u):x[d]))}if(g)return a=null,g+""||null}function c(){return pre().defined(i).curve(o).context(s)}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:mr(+u),e=null,l):t},l.x0=function(u){return arguments.length?(t=typeof u=="function"?u:mr(+u),l):t},l.x1=function(u){return arguments.length?(e=u==null?null:typeof u=="function"?u:mr(+u),l):e},l.y=function(u){return arguments.length?(n=typeof u=="function"?u:mr(+u),r=null,l):n},l.y0=function(u){return arguments.length?(n=typeof u=="function"?u:mr(+u),l):n},l.y1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:mr(+u),l):r},l.lineX0=l.lineY0=function(){return c().x(t).y(n)},l.lineY1=function(){return c().x(t).y(r)},l.lineX1=function(){return c().x(e).y(n)},l.defined=function(u){return arguments.length?(i=typeof u=="function"?u:mr(!!u),l):i},l.curve=function(u){return arguments.length?(o=u,s!=null&&(a=o(s)),l):o},l.context=function(u){return arguments.length?(u==null?s=a=null:a=o(s=u),l):s},l}function IFe(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function RFe(t){return t}function NFe(){var t=RFe,e=IFe,n=null,r=mr(0),i=mr(XT),s=mr(0);function o(a){var l,c=a.length,u,d,f=0,h=new Array(c),p=new Array(c),v=+r.apply(this,arguments),m=Math.min(XT,Math.max(-XT,i.apply(this,arguments)-v)),g,y=Math.min(Math.abs(m)/c,s.apply(this,arguments)),x=y*(m<0?-1:1),S;for(l=0;l<c;++l)(S=p[h[l]=l]=+t(a[l],l,a))>0&&(f+=S);for(e!=null?h.sort(function(_,C){return e(p[_],p[C])}):n!=null&&h.sort(function(_,C){return n(a[_],a[C])}),l=0,d=f?(m-c*x)/f:0;l<c;++l,v=g)u=h[l],S=p[u],g=v+(S>0?S*d:0)+x,p[u]={data:a[u],index:l,value:S,startAngle:v,endAngle:g,padAngle:y};return p}return o.value=function(a){return arguments.length?(t=typeof a=="function"?a:mr(+a),o):t},o.sortValues=function(a){return arguments.length?(e=a,n=null,o):e},o.sort=function(a){return arguments.length?(n=a,e=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:mr(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:mr(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:mr(+a),o):s},o}var EH=Array.prototype.slice;function sh(){}function gM(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function OA(t){this._context=t}OA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gM(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function PFe(t){return new OA(t)}function mre(t){this._context=t}mre.prototype={areaStart:sh,areaEnd:sh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:gM(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $Fe(t){return new mre(t)}function gre(t){this._context=t}gre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:gM(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function DFe(t){return new gre(t)}function vre(t,e){this._basis=new OA(t),this._beta=e}vre.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const LFe=function t(e){function n(r){return e===1?new OA(r):new vre(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function vM(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function bU(t,e){this._context=t,this._k=(1-e)/6}bU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vM(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:vM(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const OFe=function t(e){function n(r){return new bU(r,e)}return n.tension=function(r){return t(+r)},n}(0);function wU(t,e){this._context=t,this._k=(1-e)/6}wU.prototype={areaStart:sh,areaEnd:sh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:vM(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const FFe=function t(e){function n(r){return new wU(r,e)}return n.tension=function(r){return t(+r)},n}(0);function SU(t,e){this._context=t,this._k=(1-e)/6}SU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vM(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const UFe=function t(e){function n(r){return new SU(r,e)}return n.tension=function(r){return t(+r)},n}(0);function _U(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>uo){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>uo){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function yre(t,e){this._context=t,this._alpha=e}yre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:_U(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const BFe=function t(e){function n(r){return e?new yre(r,e):new bU(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function xre(t,e){this._context=t,this._alpha=e}xre.prototype={areaStart:sh,areaEnd:sh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:_U(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const zFe=function t(e){function n(r){return e?new xre(r,e):new wU(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function bre(t,e){this._context=t,this._alpha=e}bre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_U(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const WFe=function t(e){function n(r){return e?new bre(r,e):new SU(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function wre(t){this._context=t}wre.prototype={areaStart:sh,areaEnd:sh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function VFe(t){return new wre(t)}function MH(t){return t<0?-1:1}function kH(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(MH(s)+MH(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function AH(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function tP(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function yM(t){this._context=t}yM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tP(this,this._t0,AH(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,tP(this,AH(this,n=kH(this,t,e)),n);break;default:tP(this,this._t0,n=kH(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Sre(t){this._context=new _re(t)}(Sre.prototype=Object.create(yM.prototype)).point=function(t,e){yM.prototype.point.call(this,e,t)};function _re(t){this._context=t}_re.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function GFe(t){return new yM(t)}function HFe(t){return new Sre(t)}function Cre(t){this._context=t}Cre.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=IH(t),i=IH(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function IH(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function jFe(t){return new Cre(t)}function FA(t,e){this._context=t,this._t=e}FA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function XFe(t){return new FA(t,.5)}function qFe(t){return new FA(t,0)}function YFe(t){return new FA(t,1)}function Mv(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function kv(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function KFe(t,e){return t[e]}function Tre(){var t=mr([]),e=kv,n=Mv,r=KFe;function i(s){var o=t.apply(this,arguments),a,l=s.length,c=o.length,u=new Array(c),d;for(a=0;a<c;++a){for(var f=o[a],h=u[a]=new Array(l),p=0,v;p<l;++p)h[p]=v=[0,+r(s[p],f,p,s)],v.data=s[p];h.key=f}for(a=0,d=e(u);a<c;++a)u[d[a]].index=a;return n(u,d),u}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:mr(EH.call(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:mr(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?kv:typeof s=="function"?s:mr(EH.call(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Mv,i):n},i}function ZFe(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Mv(t,e)}}function Ere(t,e){if((l=t.length)>0)for(var n,r=0,i,s,o,a,l,c=t[e[0]].length;r<c;++r)for(o=a=0,n=0;n<l;++n)(s=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=o,i[1]=o+=s):s<0?(i[1]=a,i[0]=a+=s):(i[0]=0,i[1]=s)}function JFe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}Mv(t,e)}}function QFe(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],d=u[r][1]||0,f=u[r-1][1]||0,h=(d-f)/2,p=0;p<a;++p){var v=t[e[p]],m=v[r][1]||0,g=v[r-1][1]||0;h+=m-g}l+=d,c+=h*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,Mv(t,e)}}function e5e(t){var e=t.map(t5e);return kv(t).sort(function(n,r){return e[n]-e[r]})}function t5e(t){for(var e=-1,n=0,r=t.length,i,s=-1/0;++e<r;)(i=+t[e][1])>s&&(s=i,n=e);return n}function Mre(t){var e=t.map(kre);return kv(t).sort(function(n,r){return e[n]-e[r]})}function kre(t){for(var e=0,n=-1,r=t.length,i;++n<r;)(i=+t[n][1])&&(e+=i);return e}function n5e(t){return Mre(t).reverse()}function r5e(t){var e=t.length,n,r,i=t.map(kre),s=e5e(t),o=0,a=0,l=[],c=[];for(n=0;n<e;++n)r=s[n],o<a?(o+=i[r],l.push(r)):(a+=i[r],c.push(r));return c.reverse().concat(l)}function i5e(t){return kv(t).reverse()}var s5e=Jw,o5e=Gte,a5e=dy;function l5e(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=s5e(t,o);n(a,o)&&o5e(s,a5e(o,t),a)}return s}var c5e=l5e;function u5e(t,e){return t!=null&&e in Object(t)}var d5e=u5e,f5e=dy,h5e=MA,p5e=Ea,m5e=IA,g5e=b5,v5e=fy;function y5e(t,e,n){e=f5e(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=v5e(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&g5e(i)&&m5e(o,i)&&(p5e(t)||h5e(t)))}var x5e=y5e,b5e=d5e,w5e=x5e;function S5e(t,e){return t!=null&&w5e(t,e,b5e)}var Are=S5e,_5e=c5e,C5e=Are;function T5e(t,e){return _5e(t,e,function(n,r){return C5e(t,r)})}var E5e=T5e;function M5e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var CU=M5e,RH=sy,k5e=MA,A5e=Ea,NH=RH?RH.isConcatSpreadable:void 0;function I5e(t){return A5e(t)||k5e(t)||!!(NH&&t&&t[NH])}var R5e=I5e,N5e=CU,P5e=R5e;function Ire(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=P5e),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?Ire(a,e-1,n,r,i):N5e(i,a):r||(i[i.length]=a)}return i}var Rre=Ire,$5e=Rre;function D5e(t){var e=t==null?0:t.length;return e?$5e(t,1):[]}var L5e=D5e,O5e=L5e,F5e=Fte,U5e=Ute;function B5e(t){return U5e(F5e(t,void 0,O5e),t+"")}var Nre=B5e,z5e=E5e,W5e=Nre,V5e=W5e(function(t,e){return t==null?{}:z5e(t,e)}),G5e=V5e;const H5e=is(G5e);function j5e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var X5e=j5e,q5e=vU,Y5e=X5e,K5e=yU,Z5e=1,J5e=2;function Q5e(t,e,n,r,i,s){var o=n&Z5e,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,h=n&J5e?new q5e:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var p=t[d],v=e[d];if(r)var m=o?r(v,p,d,e,t,s):r(p,v,d,t,e,s);if(m!==void 0){if(m)continue;f=!1;break}if(h){if(!Y5e(e,function(g,y){if(!K5e(h,y)&&(p===g||i(p,g,n,r,s)))return h.push(y)})){f=!1;break}}else if(!(p===v||i(p,v,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var Pre=Q5e;function eUe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var tUe=eUe;function nUe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var TU=nUe,PH=sy,$H=Mte,rUe=Yw,iUe=Pre,sUe=tUe,oUe=TU,aUe=1,lUe=2,cUe="[object Boolean]",uUe="[object Date]",dUe="[object Error]",fUe="[object Map]",hUe="[object Number]",pUe="[object RegExp]",mUe="[object Set]",gUe="[object String]",vUe="[object Symbol]",yUe="[object ArrayBuffer]",xUe="[object DataView]",DH=PH?PH.prototype:void 0,nP=DH?DH.valueOf:void 0;function bUe(t,e,n,r,i,s,o){switch(n){case xUe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case yUe:return!(t.byteLength!=e.byteLength||!s(new $H(t),new $H(e)));case cUe:case uUe:case hUe:return rUe(+t,+e);case dUe:return t.name==e.name&&t.message==e.message;case pUe:case gUe:return t==e+"";case fUe:var a=sUe;case mUe:var l=r&aUe;if(a||(a=oUe),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=lUe,o.set(t,e);var u=iUe(a(t),a(e),r,i,s,o);return o.delete(t),u;case vUe:if(nP)return nP.call(t)==nP.call(e)}return!1}var wUe=bUe,SUe=CU,_Ue=Ea;function CUe(t,e,n){var r=e(t);return _Ue(t)?r:SUe(r,n(t))}var $re=CUe;function TUe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var Dre=TUe;function EUe(){return[]}var Lre=EUe,MUe=Dre,kUe=Lre,AUe=Object.prototype,IUe=AUe.propertyIsEnumerable,LH=Object.getOwnPropertySymbols,RUe=LH?function(t){return t==null?[]:(t=Object(t),MUe(LH(t),function(e){return IUe.call(t,e)}))}:kUe,EU=RUe,NUe=Ite,PUe=NUe(Object.keys,Object),$Ue=PUe,DUe=x5,LUe=$Ue,OUe=Object.prototype,FUe=OUe.hasOwnProperty;function UUe(t){if(!DUe(t))return LUe(t);var e=[];for(var n in Object(t))FUe.call(t,n)&&n!="constructor"&&e.push(n);return e}var BUe=UUe,zUe=Lte,WUe=BUe,VUe=cy;function GUe(t){return VUe(t)?zUe(t):WUe(t)}var i2=GUe,HUe=$re,jUe=EU,XUe=i2;function qUe(t){return HUe(t,XUe,jUe)}var Ore=qUe,OH=Ore,YUe=1,KUe=Object.prototype,ZUe=KUe.hasOwnProperty;function JUe(t,e,n,r,i,s){var o=n&YUe,a=OH(t),l=a.length,c=OH(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in e:ZUe.call(e,f)))return!1}var h=s.get(t),p=s.get(e);if(h&&p)return h==e&&p==t;var v=!0;s.set(t,e),s.set(e,t);for(var m=o;++d<l;){f=a[d];var g=t[f],y=e[f];if(r)var x=o?r(y,g,f,e,t,s):r(g,y,f,t,e,s);if(!(x===void 0?g===y||i(g,y,n,r,s):x)){v=!1;break}m||(m=f=="constructor")}if(v&&!m){var S=t.constructor,_=e.constructor;S!=_&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof _=="function"&&_ instanceof _)&&(v=!1)}return s.delete(t),s.delete(e),v}var QUe=JUe,eBe=Xm,tBe=Xu,nBe=eBe(tBe,"DataView"),rBe=nBe,iBe=Xm,sBe=Xu,oBe=iBe(sBe,"Promise"),aBe=oBe,lBe=Xm,cBe=Xu,uBe=lBe(cBe,"Set"),Fre=uBe,dBe=Xm,fBe=Xu,hBe=dBe(fBe,"WeakMap"),pBe=hBe,bL=rBe,wL=p5,SL=aBe,_L=Fre,CL=pBe,Ure=_h,py=Ste,FH="[object Map]",mBe="[object Object]",UH="[object Promise]",BH="[object Set]",zH="[object WeakMap]",WH="[object DataView]",gBe=py(bL),vBe=py(wL),yBe=py(SL),xBe=py(_L),bBe=py(CL),bp=Ure;(bL&&bp(new bL(new ArrayBuffer(1)))!=WH||wL&&bp(new wL)!=FH||SL&&bp(SL.resolve())!=UH||_L&&bp(new _L)!=BH||CL&&bp(new CL)!=zH)&&(bp=function(t){var e=Ure(t),n=e==mBe?t.constructor:void 0,r=n?py(n):"";if(r)switch(r){case gBe:return WH;case vBe:return FH;case yBe:return UH;case xBe:return BH;case bBe:return zH}return e});var UA=bp,rP=EA,wBe=Pre,SBe=wUe,_Be=QUe,VH=UA,GH=Ea,HH=kA,CBe=_5,TBe=1,jH="[object Arguments]",XH="[object Array]",lC="[object Object]",EBe=Object.prototype,qH=EBe.hasOwnProperty;function MBe(t,e,n,r,i,s){var o=GH(t),a=GH(e),l=o?XH:VH(t),c=a?XH:VH(e);l=l==jH?lC:l,c=c==jH?lC:c;var u=l==lC,d=c==lC,f=l==c;if(f&&HH(t)){if(!HH(e))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new rP),o||CBe(t)?wBe(t,e,n,r,i,s):SBe(t,e,l,n,r,i,s);if(!(n&TBe)){var h=u&&qH.call(t,"__wrapped__"),p=d&&qH.call(e,"__wrapped__");if(h||p){var v=h?t.value():t,m=p?e.value():e;return s||(s=new rP),i(v,m,n,r,s)}}return f?(s||(s=new rP),_Be(t,e,n,r,i,s)):!1}var kBe=MBe,ABe=kBe,YH=Bc;function Bre(t,e,n,r,i){return t===e?!0:t==null||e==null||!YH(t)&&!YH(e)?t!==t&&e!==e:ABe(t,e,n,r,Bre,i)}var MU=Bre,IBe=MU;function RBe(t,e){return IBe(t,e)}var NBe=RBe;const PBe=is(NBe);function As(){return As=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},As.apply(this,arguments)}function zre(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var oh={fill:ge.string,fontSize:ge.number,fontFamily:ge.string},$Be=ge.shape({domain:ge.shape({line:ge.shape({stroke:ge.string.isRequired,strokeWidth:ge.number.isRequired,strokeDasharray:ge.string}).isRequired}).isRequired,ticks:ge.shape({line:ge.shape({stroke:ge.string.isRequired,strokeWidth:ge.number.isRequired,strokeDasharray:ge.string}).isRequired,text:ge.shape(As({},oh)).isRequired}).isRequired,legend:ge.shape({text:ge.shape(As({},oh)).isRequired}).isRequired}),DBe=ge.shape({line:ge.shape({stroke:ge.string.isRequired,strokeWidth:ge.number.isRequired,strokeDasharray:ge.string}).isRequired}),LBe=ge.shape({hidden:ge.shape({symbol:ge.shape({fill:ge.string.isRequired,opacity:ge.number}).isRequired,text:ge.shape(As({},oh,{opacity:ge.number})).isRequired}).isRequired,text:ge.shape(As({},oh)).isRequired}),OBe=ge.shape({text:ge.shape(As({},oh)).isRequired}),FBe=ge.shape({text:ge.shape(As({},oh)).isRequired}),UBe=ge.shape({text:ge.shape(As({},oh)).isRequired}),BBe=ge.shape({line:ge.shape({stroke:ge.string.isRequired,strokeWidth:ge.number.isRequired,strokeDasharray:ge.string}).isRequired}),zBe=ge.shape({text:ge.shape(As({},oh,{outlineWidth:ge.number.isRequired,outlineColor:ge.string.isRequired})).isRequired,link:ge.shape({stroke:ge.string.isRequired,strokeWidth:ge.number.isRequired,outlineWidth:ge.number.isRequired,outlineColor:ge.string.isRequired}).isRequired,outline:ge.shape({stroke:ge.string.isRequired,strokeWidth:ge.number.isRequired,outlineWidth:ge.number.isRequired,outlineColor:ge.string.isRequired}).isRequired,symbol:ge.shape({fill:ge.string.isRequired,outlineWidth:ge.number.isRequired,outlineColor:ge.string.isRequired}).isRequired});ge.shape({background:ge.string.isRequired,fontFamily:ge.string.isRequired,fontSize:ge.number.isRequired,textColor:ge.string.isRequired,axis:$Be.isRequired,grid:DBe.isRequired,legends:LBe.isRequired,labels:OBe.isRequired,dots:FBe.isRequired,markers:UBe,crosshair:BBe.isRequired,annotations:zBe.isRequired});var WBe={background:"transparent",text:{fontFamily:"sans-serif",fontSize:11,fill:"#333333",outlineWidth:0,outlineColor:"transparent"},axis:{domain:{line:{stroke:"transparent",strokeWidth:1}},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{}},legend:{text:{fontSize:12}}},grid:{line:{stroke:"#dddddd",strokeWidth:1}},legends:{hidden:{symbol:{fill:"#333333",opacity:.6},text:{fill:"#333333",opacity:.6}},text:{},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{fontSize:10}},title:{text:{}}},labels:{text:{}},markers:{lineColor:"#000000",lineStrokeWidth:1,text:{}},dots:{text:{}},tooltip:{container:{background:"white",color:"inherit",fontSize:"inherit",borderRadius:"2px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.25)",padding:"5px 9px"},basic:{whiteSpace:"pre",display:"flex",alignItems:"center"},chip:{marginRight:7},table:{},tableCell:{padding:"3px 5px"},tableCellValue:{fontWeight:"bold"}},crosshair:{line:{stroke:"#000000",strokeWidth:1,strokeOpacity:.75,strokeDasharray:"6 6"}},annotations:{text:{fontSize:13,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},link:{stroke:"#000000",strokeWidth:1,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},outline:{fill:"none",stroke:"#000000",strokeWidth:2,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},symbol:{fill:"#000000",outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1}}},VBe=["axis.ticks.text","axis.legend.text","legends.title.text","legends.text","legends.ticks.text","legends.title.text","labels.text","dots.text","markers.text","annotations.text"],GBe=function(t,e){var n=E$e({},t,e);return VBe.forEach(function(r){Va(n,r+".fontFamily")===void 0&&bd(n,r+".fontFamily",n.text.fontFamily),Va(n,r+".fontSize")===void 0&&bd(n,r+".fontSize",n.text.fontSize),Va(n,r+".fill")===void 0&&bd(n,r+".fill",n.text.fill),Va(n,r+".outlineWidth")===void 0&&bd(n,r+".outlineWidth",n.text.outlineWidth),Va(n,r+".outlineColor")===void 0&&bd(n,r+".outlineColor",n.text.outlineColor)}),n},Wre=N.createContext(),kU=function(t){var e=t.children,n=t.animate,r=t.config,i=N.useMemo(function(){var s=JDe(r)?d5[r]:r;return{animate:n,config:s}},[n,r]);return L.jsx(Wre.Provider,{value:i,children:e})},KH={animate:ge.bool,motionConfig:ge.oneOfType([ge.oneOf(Object.keys(d5)),ge.shape({mass:ge.number,tension:ge.number,friction:ge.number,clamp:ge.bool,precision:ge.number,velocity:ge.number,duration:ge.number,easing:ge.func})])};kU.propTypes={children:ge.node.isRequired,animate:KH.animate,config:KH.motionConfig};var HBe={animate:!0,config:"default"};kU.defaultProps=HBe;var Ys=function(){return N.useContext(Wre)},Vre=function(t){var e=Ys(),n=e.animate,r=e.config,i=function(a){var l=N.useRef();return N.useEffect(function(){l.current=a},[a]),l.current}(t),s=N.useMemo(function(){return HDe(i,t)},[i,t]),o=Uc({from:{value:0},to:{value:1},reset:!0,config:r,immediate:!n}).value;return Gl(o,s)},jBe={nivo:["#d76445","#f47560","#e8c1a0","#97e3d5","#61cdbb","#00b0a7"],BrBG:hn(G5),PRGn:hn(H5),PiYG:hn(j5),PuOr:hn(X5),RdBu:hn(q5),RdGy:hn(Y5),RdYlBu:hn(K5),RdYlGn:hn(Z5),spectral:hn(J5),blues:hn(dU),greens:hn(fU),greys:hn(hU),oranges:hn(gU),purples:hn(pU),reds:hn(mU),BuGn:hn(Q5),BuPu:hn(eU),GnBu:hn(tU),OrRd:hn(nU),PuBuGn:hn(rU),PuBu:hn(iU),PuRd:hn(sU),RdPu:hn(oU),YlGnBu:hn(aU),YlGn:hn(lU),YlOrBr:hn(cU),YlOrRd:hn(uU)},XBe=Object.keys(jBe);hn(G5),hn(H5),hn(j5),hn(X5),hn(q5),hn(Y5),hn(K5),hn(Z5),hn(J5),hn(dU),hn(fU),hn(hU),hn(gU),hn(pU),hn(mU),hn(Q5),hn(eU),hn(tU),hn(nU),hn(rU),hn(iU),hn(sU),hn(oU),hn(aU),hn(lU),hn(cU),hn(uU);ge.oneOfType([ge.oneOf(XBe),ge.func,ge.arrayOf(ge.string)]);var TL={basis:PFe,basisClosed:$Fe,basisOpen:DFe,bundle:LFe,cardinal:OFe,cardinalClosed:FFe,cardinalOpen:UFe,catmullRom:BFe,catmullRomClosed:zFe,catmullRomOpen:WFe,linear:xU,linearClosed:VFe,monotoneX:GFe,monotoneY:HFe,natural:jFe,step:XFe,stepAfter:YFe,stepBefore:qFe},BA=Object.keys(TL);ge.oneOf(BA);BA.filter(function(t){return t.endsWith("Closed")});ure(BA,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");var qBe=ure(BA,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");ge.oneOf(qBe);var YBe=function(t){if(!TL[t])throw new TypeError("'"+t+"', is not a valid curve interpolator identifier.");return TL[t]};ge.arrayOf(ge.shape({id:ge.string.isRequired})).isRequired,ge.arrayOf(ge.shape({id:ge.string.isRequired,match:ge.oneOfType([ge.oneOf(["*"]),ge.object,ge.func]).isRequired})).isRequired;var Gre={ascending:Mre,descending:n5e,insideOut:r5e,none:kv,reverse:i5e},KBe=Object.keys(Gre);ge.oneOf(KBe);var ZBe=function(t){return Gre[t]},Hre={expand:ZFe,diverging:Ere,none:Mv,silhouette:JFe,wiggle:QFe},JBe=Object.keys(Hre);ge.oneOf(JBe);var QBe=function(t){return Hre[t]};ge.shape({top:ge.number,right:ge.number,bottom:ge.number,left:ge.number}).isRequired;var e6e=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];ge.oneOf(e6e);var t6e=function(t){return N.useMemo(function(){return YBe(t)},[t])};Lp(are);var n6e={top:0,right:0,bottom:0,left:0},s2=function(t,e,n){return n===void 0&&(n={}),N.useMemo(function(){var r=As({},n6e,n);return{margin:r,innerWidth:t-r.left-r.right,innerHeight:e-r.top-r.bottom,outerWidth:t,outerHeight:e}},[t,e,n.top,n.right,n.bottom,n.left])},jre=function(){var t=N.useRef(null),e=N.useState({left:0,top:0,width:0,height:0}),n=e[0],r=e[1],i=N.useState(function(){return typeof ResizeObserver>"u"?null:new ResizeObserver(function(s){var o=s[0];return r(o.contentRect)})})[0];return N.useEffect(function(){return t.current&&i!==null&&i.observe(t.current),function(){i!==null&&i.disconnect()}},[]),[t,n]},r6e=function(t){return N.useMemo(function(){return GBe(WBe,t)},[t])},Xre=function(t){return typeof t=="function"?t:typeof t=="string"?t.indexOf("time:")===0?DA(t.slice("5")):t2(t):function(e){return""+e}},o2=function(t){return N.useMemo(function(){return Xre(t)},[t])},qre=N.createContext(),i6e={},Yre=function(t){var e=t.theme,n=e===void 0?i6e:e,r=t.children,i=r6e(n);return L.jsx(qre.Provider,{value:i,children:r})};Yre.propTypes={children:ge.node.isRequired,theme:ge.object};var Rr=function(){return N.useContext(qre)},Kre=function(t){var e=t.children,n=t.condition,r=t.wrapper;return n?N.cloneElement(r,{},e):e};Kre.propTypes={children:ge.node.isRequired,condition:ge.bool.isRequired,wrapper:ge.element.isRequired};var s6e={position:"relative"},my=function(t){var e=t.children,n=t.theme,r=t.renderWrapper,i=r===void 0||r,s=t.isInteractive,o=s===void 0||s,a=t.animate,l=t.motionConfig,c=N.useRef(null);return L.jsx(Yre,{theme:n,children:L.jsx(kU,{animate:a,config:l,children:L.jsx(lAe,{container:c,children:L.jsxs(Kre,{condition:i,wrapper:L.jsx("div",{style:s6e,ref:c}),children:[e,o&&L.jsx(aAe,{})]})})})})};my.propTypes={children:ge.element.isRequired,isInteractive:ge.bool,renderWrapper:ge.bool,theme:ge.object,animate:ge.bool,motionConfig:ge.string};ge.func.isRequired,ge.bool,ge.bool,ge.object.isRequired,ge.bool.isRequired,ge.string;var gy=function(t){var e=t.children,n=jre(),r=n[0],i=n[1],s=i.width>0&&i.height>0;return L.jsx("div",{ref:r,style:{width:"100%",height:"100%"},children:s&&e({width:i.width,height:i.height})})};gy.propTypes={children:ge.func.isRequired};var o6e=["id","colors"],Zre=function(t){var e=t.id,n=t.colors,r=zre(t,o6e);return L.jsx("linearGradient",As({id:e,x1:0,x2:0,y1:0,y2:1},r,{children:n.map(function(i){var s=i.offset,o=i.color,a=i.opacity;return L.jsx("stop",{offset:s+"%",stopColor:o,stopOpacity:a!==void 0?a:1},s)})}))};Zre.propTypes={id:ge.string.isRequired,colors:ge.arrayOf(ge.shape({offset:ge.number.isRequired,color:ge.string.isRequired,opacity:ge.number})).isRequired,gradientTransform:ge.string};var Jre={linearGradient:Zre},qT=N.memo(function(t){var e=t.id,n=t.background,r=t.color,i=t.size,s=t.padding,o=t.stagger,a=i+s,l=i/2,c=s/2;return o===!0&&(a=2*i+2*s),L.jsxs("pattern",{id:e,width:a,height:a,patternUnits:"userSpaceOnUse",children:[L.jsx("rect",{width:a,height:a,fill:n}),L.jsx("circle",{cx:c+l,cy:c+l,r:l,fill:r}),o&&L.jsx("circle",{cx:1.5*s+i+l,cy:1.5*s+i+l,r:l,fill:r})]})});qT.displayName="PatternDots",qT.propTypes={id:ge.string.isRequired,color:ge.string.isRequired,background:ge.string.isRequired,size:ge.number.isRequired,padding:ge.number.isRequired,stagger:ge.bool.isRequired},qT.defaultProps={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1};var Fl=function(t){return t*Math.PI/180},zA=function(t){return 180*t/Math.PI},a6e=function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},Kp=function(t,e){return{x:Math.cos(t)*e,y:Math.sin(t)*e}},l6e=function(t){var e=t%360;return e<0&&(e+=360),e},c6e={svg:{align:{left:"start",center:"middle",right:"end",start:"start",middle:"middle",end:"end"},baseline:{top:"text-before-edge",center:"central",bottom:"alphabetic"}},canvas:{align:{left:"left",center:"center",right:"right",start:"left",middle:"center",end:"right"},baseline:{top:"top",center:"middle",bottom:"bottom"}}},YT=N.memo(function(t){var e=t.id,n=t.spacing,r=t.rotation,i=t.background,s=t.color,o=t.lineWidth,a=Math.round(r)%360,l=Math.abs(n);a>180?a-=360:a>90?a-=180:a<-180?a+=360:a<-90&&(a+=180);var c,u=l,d=l;return a===0?c=`
                M 0 0 L `+u+` 0
                M 0 `+d+" L "+u+" "+d+`
            `:a===90?c=`
                M 0 0 L 0 `+d+`
                M `+u+" 0 L "+u+" "+d+`
            `:(u=Math.abs(l/Math.sin(Fl(a))),d=l/Math.sin(Fl(90-a)),c=a>0?`
                    M 0 `+-d+" L "+2*u+" "+d+`
                    M `+-u+" "+-d+" L "+u+" "+d+`
                    M `+-u+" 0 L "+u+" "+2*d+`
                `:`
                    M `+-u+" "+d+" L "+u+" "+-d+`
                    M `+-u+" "+2*d+" L "+2*u+" "+-d+`
                    M 0 `+2*d+" L "+2*u+` 0
                `),L.jsxs("pattern",{id:e,width:u,height:d,patternUnits:"userSpaceOnUse",children:[L.jsx("rect",{width:u,height:d,fill:i,stroke:"rgba(255, 0, 0, 0.1)",strokeWidth:0}),L.jsx("path",{d:c,strokeWidth:o,stroke:s,strokeLinecap:"square"})]})});YT.displayName="PatternLines",YT.propTypes={id:ge.string.isRequired,spacing:ge.number.isRequired,rotation:ge.number.isRequired,background:ge.string.isRequired,color:ge.string.isRequired,lineWidth:ge.number.isRequired},YT.defaultProps={spacing:5,rotation:0,color:"#000000",background:"#ffffff",lineWidth:2};var KT=N.memo(function(t){var e=t.id,n=t.background,r=t.color,i=t.size,s=t.padding,o=t.stagger,a=i+s,l=s/2;return o===!0&&(a=2*i+2*s),L.jsxs("pattern",{id:e,width:a,height:a,patternUnits:"userSpaceOnUse",children:[L.jsx("rect",{width:a,height:a,fill:n}),L.jsx("rect",{x:l,y:l,width:i,height:i,fill:r}),o&&L.jsx("rect",{x:1.5*s+i,y:1.5*s+i,width:i,height:i,fill:r})]})});KT.displayName="PatternSquares",KT.propTypes={id:ge.string.isRequired,color:ge.string.isRequired,background:ge.string.isRequired,size:ge.number.isRequired,padding:ge.number.isRequired,stagger:ge.bool.isRequired},KT.defaultProps={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1};var Qre={patternDots:qT,patternLines:YT,patternSquares:KT},u6e=["type"],EL=As({},Jre,Qre),eie=function(t){var e=t.defs;return!e||e.length<1?null:L.jsx("defs",{"aria-hidden":!0,children:e.map(function(n){var r=n.type,i=zre(n,u6e);return EL[r]?N.createElement(EL[r],As({key:i.id},i)):null})})};eie.propTypes={defs:ge.arrayOf(ge.shape({type:ge.oneOf(Object.keys(EL)).isRequired,id:ge.string.isRequired}))};var d6e=N.memo(eie),a2=function(t){var e=t.width,n=t.height,r=t.margin,i=t.defs,s=t.children,o=t.role,a=t.ariaLabel,l=t.ariaLabelledBy,c=t.ariaDescribedBy,u=t.isFocusable,d=Rr();return L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:n,role:o,"aria-label":a,"aria-labelledby":l,"aria-describedby":c,focusable:u,tabIndex:u?0:void 0,children:[L.jsx(d6e,{defs:i}),L.jsx("rect",{width:e,height:n,fill:d.background}),L.jsx("g",{transform:"translate("+r.left+","+r.top+")",children:s})]})};a2.propTypes={width:ge.number.isRequired,height:ge.number.isRequired,margin:ge.shape({top:ge.number.isRequired,left:ge.number.isRequired}).isRequired,defs:ge.array,children:ge.oneOfType([ge.arrayOf(ge.node),ge.node]).isRequired,role:ge.string,isFocusable:ge.bool,ariaLabel:ge.string,ariaLabelledBy:ge.string,ariaDescribedBy:ge.string};var tie=function(t){var e=t.size,n=t.color,r=t.borderWidth,i=t.borderColor;return L.jsx("circle",{r:e/2,fill:n,stroke:i,strokeWidth:r,style:{pointerEvents:"none"}})};tie.propTypes={size:ge.number.isRequired,color:ge.string.isRequired,borderWidth:ge.number.isRequired,borderColor:ge.string.isRequired};var f6e=N.memo(tie),nie=function(t){var e=t.x,n=t.y,r=t.symbol,i=r===void 0?f6e:r,s=t.size,o=t.datum,a=t.color,l=t.borderWidth,c=t.borderColor,u=t.label,d=t.labelTextAnchor,f=d===void 0?"middle":d,h=t.labelYOffset,p=h===void 0?-12:h,v=Rr(),m=Ys(),g=m.animate,y=m.config,x=Uc({transform:"translate("+e+", "+n+")",config:y,immediate:!g});return L.jsxs(nr.g,{transform:x.transform,style:{pointerEvents:"none"},children:[N.createElement(i,{size:s,color:a,datum:o,borderWidth:l,borderColor:c}),u&&L.jsx("text",{textAnchor:f,y:p,style:v.dots.text,children:u})]})};nie.propTypes={x:ge.number.isRequired,y:ge.number.isRequired,datum:ge.object.isRequired,size:ge.number.isRequired,color:ge.string.isRequired,borderWidth:ge.number.isRequired,borderColor:ge.string.isRequired,symbol:ge.oneOfType([ge.func,ge.object]),label:ge.oneOfType([ge.string,ge.number]),labelTextAnchor:ge.oneOf(["start","middle","end"]),labelYOffset:ge.number};N.memo(nie);var ML=function(t){var e=t.width,n=t.height,r=t.axis,i=t.scale,s=t.value,o=t.lineStyle,a=t.textStyle,l=t.legend,c=t.legendPosition,u=t.legendOffsetX,d=t.legendOffsetY,f=t.legendOrientation,h=Rr(),p=0,v=0,m=0,g=0;r==="y"?(m=i(s),v=e):(p=i(s),g=n);var y=null;if(l){var x=function(S){var _=S.axis,C=S.width,T=S.height,A=S.position,k=S.offsetX,M=S.offsetY,R=S.orientation,P=0,O=0,$=R==="vertical"?-90:0,U="start";if(_==="x")switch(A){case"top-left":P=-k,O=M,U="end";break;case"top":O=-M,U=R==="horizontal"?"middle":"start";break;case"top-right":P=k,O=M,U=R==="horizontal"?"start":"end";break;case"right":P=k,O=T/2,U=R==="horizontal"?"start":"middle";break;case"bottom-right":P=k,O=T-M,U="start";break;case"bottom":O=T+M,U=R==="horizontal"?"middle":"end";break;case"bottom-left":O=T-M,P=-k,U=R==="horizontal"?"end":"start";break;case"left":P=-k,O=T/2,U=R==="horizontal"?"end":"middle"}else switch(A){case"top-left":P=k,O=-M,U="start";break;case"top":P=C/2,O=-M,U=R==="horizontal"?"middle":"start";break;case"top-right":P=C-k,O=-M,U=R==="horizontal"?"end":"start";break;case"right":P=C+k,U=R==="horizontal"?"start":"middle";break;case"bottom-right":P=C-k,O=M,U="end";break;case"bottom":P=C/2,O=M,U=R==="horizontal"?"middle":"end";break;case"bottom-left":P=k,O=M,U=R==="horizontal"?"start":"end";break;case"left":P=-k,U=R==="horizontal"?"end":"middle"}return{x:P,y:O,rotation:$,textAnchor:U}}({axis:r,width:e,height:n,position:c,offsetX:u,offsetY:d,orientation:f});y=L.jsx("text",{transform:"translate("+x.x+", "+x.y+") rotate("+x.rotation+")",textAnchor:x.textAnchor,dominantBaseline:"central",style:a,children:l})}return L.jsxs("g",{transform:"translate("+p+", "+m+")",children:[L.jsx("line",{x1:0,x2:v,y1:0,y2:g,stroke:h.markers.lineColor,strokeWidth:h.markers.lineStrokeWidth,style:o}),y]})};ML.propTypes={width:ge.number.isRequired,height:ge.number.isRequired,axis:ge.oneOf(["x","y"]).isRequired,scale:ge.func.isRequired,value:ge.oneOfType([ge.number,ge.string,ge.instanceOf(Date)]).isRequired,lineStyle:ge.object,textStyle:ge.object,legend:ge.string,legendPosition:ge.oneOf(["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"]),legendOffsetX:ge.number.isRequired,legendOffsetY:ge.number.isRequired,legendOrientation:ge.oneOf(["horizontal","vertical"]).isRequired},ML.defaultProps={legendPosition:"top-right",legendOffsetX:14,legendOffsetY:14,legendOrientation:"horizontal"};var h6e=N.memo(ML),rie=function(t){var e=t.markers,n=t.width,r=t.height,i=t.xScale,s=t.yScale;return e&&e.length!==0?e.map(function(o,a){return L.jsx(h6e,As({},o,{width:n,height:r,scale:o.axis==="y"?s:i}),a)}):null};rie.propTypes={width:ge.number.isRequired,height:ge.number.isRequired,xScale:ge.func.isRequired,yScale:ge.func.isRequired,markers:ge.arrayOf(ge.shape({axis:ge.oneOf(["x","y"]).isRequired,value:ge.oneOfType([ge.number,ge.string,ge.instanceOf(Date)]).isRequired,lineStyle:ge.object,textStyle:ge.object}))};var p6e=N.memo(rie),iie=function(t){return wte(t)?t:function(e){return Va(e,t)}},$d=function(t){return N.useMemo(function(){return iie(t)},[t])},m6e=function(t,e,n,r,i,s){return t<=i&&i<=t+n&&e<=s&&s<=e+r},iP=function(t,e){var n,r=e.clientX,i=e.clientY,s=t.getBoundingClientRect(),o=(n=t.getBBox!==void 0?t.getBBox():{width:t.offsetWidth,height:t.offsetHeight}).width===s.width?1:n.width/s.width;return[(r-s.left)*o,(i-s.top)*o]},g6e=Object.keys(Jre),v6e=Object.keys(Qre),y6e=function(t,e,n){if(t==="*")return!0;if(wte(t))return t(e);if(S5(t)){var r=n?Va(e,n):e;return PBe(H5e(r,Object.keys(t)),t)}return!1},AU=function(t,e,n,r){var i=r===void 0?{}:r,s=i.dataKey,o=i.colorKey,a=o===void 0?"color":o,l=i.targetKey,c=l===void 0?"fill":l,u=[],d={};return t.length&&e.length&&(u=[].concat(t),e.forEach(function(f){for(var h=function(){var v=n[p],m=v.id,g=v.match;if(y6e(g,f,s)){var y=t.find(function(M){return M.id===m});if(y){if(v6e.includes(y.type))if(y.background==="inherit"||y.color==="inherit"){var x=Va(f,a),S=y.background,_=y.color,C=m;y.background==="inherit"&&(C=C+".bg."+x,S=x),y.color==="inherit"&&(C=C+".fg."+x,_=x),bd(f,c,"url(#"+C+")"),d[C]||(u.push(As({},y,{id:C,background:S,color:_})),d[C]=1)}else bd(f,c,"url(#"+m+")");else if(g6e.includes(y.type))if(y.colors.map(function(M){return M.color}).includes("inherit")){var T=Va(f,a),A=m,k=As({},y,{colors:y.colors.map(function(M,R){return M.color!=="inherit"?M:(A=A+"."+R+"."+T,As({},M,{color:M.color==="inherit"?T:M.color}))})});k.id=A,bd(f,c,"url(#"+A+")"),d[A]||(u.push(k),d[A]=1)}else bd(f,c,"url(#"+m+")")}return"break"}},p=0;p<n.length&&h()!=="break";p++);})),u};function x6e(){}var b6e=x6e,sP=Fre,w6e=b6e,S6e=TU,_6e=1/0,C6e=sP&&1/S6e(new sP([,-0]))[1]==_6e?function(t){return new sP(t)}:w6e,T6e=C6e,E6e=vU,M6e=lre,k6e=cre,A6e=yU,I6e=T6e,R6e=TU,N6e=200;function P6e(t,e,n){var r=-1,i=M6e,s=t.length,o=!0,a=[],l=a;if(n)o=!1,i=k6e;else if(s>=N6e){var c=e?null:I6e(t);if(c)return R6e(c);o=!1,i=A6e,l=new E6e}else l=e?[]:a;e:for(;++r<s;){var u=t[r],d=e?e(u):u;if(u=n||u!==0?u:0,o&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}var $6e=P6e,D6e=EA,L6e=MU,O6e=1,F6e=2;function U6e(t,e,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var l=a[0],c=t[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new D6e;if(r)var f=r(c,u,l,t,e,d);if(!(f===void 0?L6e(u,c,O6e|F6e,r,d):f))return!1}}return!0}var B6e=U6e,z6e=qu;function W6e(t){return t===t&&!z6e(t)}var sie=W6e,V6e=sie,G6e=i2;function H6e(t){for(var e=G6e(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,V6e(i)]}return e}var j6e=H6e;function X6e(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var oie=X6e,q6e=B6e,Y6e=j6e,K6e=oie;function Z6e(t){var e=Y6e(t);return e.length==1&&e[0][2]?K6e(e[0][0],e[0][1]):function(n){return n===t||q6e(n,t,e)}}var J6e=Z6e,Q6e=MU,eze=Vte,tze=Are,nze=E5,rze=sie,ize=oie,sze=fy,oze=1,aze=2;function lze(t,e){return nze(t)&&rze(e)?ize(sze(t),e):function(n){var r=eze(n,t);return r===void 0&&r===e?tze(n,t):Q6e(e,r,oze|aze)}}var cze=lze;function uze(t){return function(e){return e==null?void 0:e[t]}}var dze=uze,fze=Jw;function hze(t){return function(e){return fze(e,t)}}var pze=hze,mze=dze,gze=pze,vze=E5,yze=fy;function xze(t){return vze(t)?mze(yze(t)):gze(t)}var bze=xze,wze=J6e,Sze=cze,_ze=RA,Cze=Ea,Tze=bze;function Eze(t){return typeof t=="function"?t:t==null?_ze:typeof t=="object"?Cze(t)?Sze(t[0],t[1]):wze(t):Tze(t)}var IU=Eze,Mze=IU,kze=$6e;function Aze(t,e){return t&&t.length?kze(t,Mze(e)):[]}var Ize=Aze;const ZH=is(Ize);var Rze=Tte,Nze=i2;function Pze(t,e){return t&&Rze(t,e,Nze)}var $ze=Pze,Dze=cy;function Lze(t,e){return function(n,r){if(n==null)return n;if(!Dze(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=Object(n);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return n}}var Oze=Lze,Fze=$ze,Uze=Oze,Bze=Uze(Fze),aie=Bze,zze=aie,Wze=cy;function Vze(t,e){var n=-1,r=Wze(t)?Array(t.length):[];return zze(t,function(i,s,o){r[++n]=e(i,s,o)}),r}var Gze=Vze;function Hze(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var jze=Hze,JH=NA;function Xze(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=JH(t),o=e!==void 0,a=e===null,l=e===e,c=JH(e);if(!a&&!c&&!s&&t>e||s&&o&&l&&!a&&!c||r&&o&&l||!n&&l||!i)return 1;if(!r&&!s&&!c&&t<e||c&&n&&i&&!r&&!s||a&&n&&i||!o&&i||!l)return-1}return 0}var qze=Xze,Yze=qze;function Kze(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,o=i.length,a=n.length;++r<o;){var l=Yze(i[r],s[r]);if(l){if(r>=a)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var Zze=Kze,oP=PA,Jze=Jw,Qze=IU,e8e=Gze,t8e=jze,n8e=Kw,r8e=Zze,i8e=RA,s8e=Ea;function o8e(t,e,n){e.length?e=oP(e,function(s){return s8e(s)?function(o){return Jze(o,s.length===1?s[0]:s)}:s}):e=[i8e];var r=-1;e=oP(e,n8e(Qze));var i=e8e(t,function(s,o,a){var l=oP(e,function(c){return c(s)});return{criteria:l,index:++r,value:s}});return t8e(i,function(s,o){return r8e(s,o,n)})}var a8e=o8e,l8e=Rre,c8e=a8e,u8e=T5,QH=Bte;u8e(function(t,e){if(t==null)return[];var n=e.length;return n>1&&QH(t,e[0],e[1])?e=[]:n>2&&QH(e[0],e[1],e[2])&&(e=[e[0]]),c8e(t,l8e(e,1),[])});var ej=AA;ej&&ej.isDate;var Ug=[function(t){return t.setMilliseconds(0)},function(t){return t.setSeconds(0)},function(t){return t.setMinutes(0)},function(t){return t.setHours(0)},function(t){return t.setDate(1)},function(t){return t.setMonth(0)}],d8e={millisecond:[],second:Ug.slice(0,1),minute:Ug.slice(0,2),hour:Ug.slice(0,3),day:Ug.slice(0,4),month:Ug.slice(0,5),year:Ug.slice(0,6)},f8e=function(t){return function(e){return d8e[t].forEach(function(n){n(e)}),e}},h8e=function(t){var e=t.format,n=e===void 0?"native":e,r=t.precision,i=r===void 0?"millisecond":r,s=t.useUTC,o=s===void 0||s,a=f8e(i);return function(l){if(l===void 0)return l;if(n==="native"||l instanceof Date)return a(l);var c=o?ire(n):nre(n);return a(c(l))}},lie=function(t,e,n,r){var i,s,o,a,l=t.min,c=l===void 0?0:l,u=t.max,d=u===void 0?"auto":u,f=t.stacked,h=f!==void 0&&f,p=t.reverse,v=p!==void 0&&p,m=t.clamp,g=m!==void 0&&m,y=t.nice,x=y!==void 0&&y;c==="auto"?i=h===!0?(s=e.minStacked)!=null?s:0:e.min:i=c,d==="auto"?o=h===!0?(a=e.maxStacked)!=null?a:0:e.max:o=d;var S=r2().rangeRound(r==="x"?[0,n]:[n,0]).domain(v?[o,i]:[i,o]).clamp(g);return x===!0?S.nice():typeof x=="number"&&S.nice(x),p8e(S,h)},p8e=function(t,e){e===void 0&&(e=!1);var n=t;return n.type="linear",n.stacked=e,n},cie=function(t,e,n){var r=sLe().range([0,n]).domain(e.all);return r.type="point",r},m8e=function(t,e,n,r){var i=t.round,s=i===void 0||i,o=Ib().range(r==="x"?[0,n]:[n,0]).domain(e.all).round(s);return kL(o)},kL=function(t){var e=t;return e.type="band",e},g8e=function(t,e,n){var r,i,s=t.format,o=s===void 0?"native":s,a=t.precision,l=a===void 0?"millisecond":a,c=t.min,u=c===void 0?"auto":c,d=t.max,f=d===void 0?"auto":d,h=t.useUTC,p=h===void 0||h,v=t.nice,m=v!==void 0&&v,g=h8e({format:o,precision:l,useUTC:p});r=u==="auto"?g(e.min):o!=="native"?g(u):u,i=f==="auto"?g(e.max):o!=="native"?g(f):f;var y=p?T4e():C4e();y.range([0,n]),r&&i&&y.domain([r,i]),m===!0?y.nice():typeof m!="object"&&typeof m!="number"||y.nice(m);var x=y;return x.type="time",x.useUTC=p,x},v8e=function(t,e,n,r){var i,s=t.base,o=s===void 0?10:s,a=t.min,l=a===void 0?"auto":a,c=t.max,u=c===void 0?"auto":c;if(e.all.some(function(v){return v===0}))throw new Error("a log scale domain must not include or cross zero");var d,f,h=!1;if(e.all.filter(function(v){return v!=null}).forEach(function(v){h||(i===void 0?i=Math.sign(v):Math.sign(v)!==i&&(h=!0))}),h)throw new Error("a log scale domain must be strictly-positive or strictly-negative");d=l==="auto"?e.min:l,f=u==="auto"?e.max:u;var p=lne().domain([d,f]).rangeRound(r==="x"?[0,n]:[n,0]).base(o).nice();return p.type="log",p},y8e=function(t,e,n,r){var i,s,o=t.constant,a=o===void 0?1:o,l=t.min,c=l===void 0?"auto":l,u=t.max,d=u===void 0?"auto":u,f=t.reverse,h=f!==void 0&&f;i=c==="auto"?e.min:c,s=d==="auto"?e.max:d;var p=cne().constant(a).rangeRound(r==="x"?[0,n]:[n,0]).nice();h===!0?p.domain([s,i]):p.domain([i,s]);var v=p;return v.type="symlog",v};function RU(t,e,n,r){switch(t.type){case"linear":return lie(t,e,n,r);case"point":return cie(t,e,n);case"band":return m8e(t,e,n,r);case"time":return g8e(t,e,n);case"log":return v8e(t,e,n,r);case"symlog":return y8e(t,e,n,r);default:throw new Error("invalid scale spec")}}var uie=function(t){var e=t.bandwidth();if(e===0)return t;var n=e/2;return t.round()&&(n=Math.round(n)),function(r){var i;return((i=t(r))!=null?i:0)+n}},die={millisecond:[fH,fH],second:[hH,hH],minute:[mOe,yOe],hour:[gOe,xOe],day:[ns(function(t){return t.setHours(0,0,0,0)},function(t,e){return t.setDate(t.getDate()+e)},function(t,e){return(e.getTime()-t.getTime())/864e5},function(t){return Math.floor(t.getTime()/864e5)}),ns(function(t){return t.setUTCHours(0,0,0,0)},function(t,e){return t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e.getTime()-t.getTime())/864e5},function(t){return Math.floor(t.getTime()/864e5)})],week:[fM,hM],sunday:[fM,hM],monday:[$b,Db],tuesday:[Fne,Xne],wednesday:[Une,qne],thursday:[wm,Sm],friday:[Bne,Yne],saturday:[zne,Kne],month:[vOe,bOe],year:[Tv,Ev]},x8e=Object.keys(die),b8e=new RegExp("^every\\s*(\\d+)?\\s*("+x8e.join("|")+")s?$","i"),fie=function(t,e){if(Array.isArray(e))return e;if(typeof e=="string"&&"useUTC"in t){var n=e.match(b8e);if(n){var r=n[1],i=n[2],s=die[i][t.useUTC?1:0];if(i==="day"){var o,a,l=t.domain(),c=l[0],u=l[1],d=new Date(u);return d.setDate(d.getDate()+1),(o=(a=s.every(Number(r??1)))==null?void 0:a.range(c,d))!=null?o:[]}if(r===void 0)return t.ticks(s);var f=s.every(Number(r));if(f)return t.ticks(f)}throw new Error("Invalid tickValues: "+e)}if("ticks"in t){if(e===void 0)return t.ticks();if(typeof(h=e)=="number"&&isFinite(h)&&Math.floor(h)===h)return t.ticks(e)}var h;return t.domain()};function Ul(){return Ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ul.apply(this,arguments)}var hie=function(t){var e,n=t.axis,r=t.scale,i=t.ticksPosition,s=t.tickValues,o=t.tickSize,a=t.tickPadding,l=t.tickRotation,c=t.truncateTickAt,u=t.engine,d=u===void 0?"svg":u,f=fie(r,s),h=c6e[d],p="bandwidth"in r?uie(r):r,v={lineX:0,lineY:0},m={textX:0,textY:0},g=typeof document=="object"&&document.dir==="rtl",y=h.align.center,x=h.baseline.center;return n==="x"?(e=function(S){var _;return{x:(_=p(S))!=null?_:0,y:0}},v.lineY=o*(i==="after"?1:-1),m.textY=(o+a)*(i==="after"?1:-1),x=i==="after"?h.baseline.top:h.baseline.bottom,l===0?y=h.align.center:i==="after"&&l<0||i==="before"&&l>0?(y=h.align[g?"left":"right"],x=h.baseline.center):(i==="after"&&l>0||i==="before"&&l<0)&&(y=h.align[g?"right":"left"],x=h.baseline.center)):(e=function(S){var _;return{x:0,y:(_=p(S))!=null?_:0}},v.lineX=o*(i==="after"?1:-1),m.textX=(o+a)*(i==="after"?1:-1),y=i==="after"?h.align.left:h.align.right),{ticks:f.map(function(S){var _=typeof S=="string"?function(C){var T=String(C).length;return c&&c>0&&T>c?""+String(C).slice(0,c).concat("..."):""+C}(S):S;return Ul({key:S instanceof Date?""+S.valueOf():""+S,value:_},e(S),v,m)}),textAlign:y,textBaseline:x}},pie=function(t,e){if(t===void 0||typeof t=="function")return t;if(e.type==="time"){var n=DA(t);return function(r){return n(r instanceof Date?r:new Date(r))}}return t2(t)},AL=function(t){var e,n=t.width,r=t.height,i=t.scale,s=t.axis,o=t.values,a=(e=o,(Array.isArray(e)?o:void 0)||fie(i,o)),l="bandwidth"in i?uie(i):i,c=s==="x"?a.map(function(u){var d,f;return{key:u instanceof Date?""+u.valueOf():""+u,x1:(d=l(u))!=null?d:0,x2:(f=l(u))!=null?f:0,y1:0,y2:r}}):a.map(function(u){var d,f;return{key:u instanceof Date?""+u.valueOf():""+u,x1:0,x2:n,y1:(d=l(u))!=null?d:0,y2:(f=l(u))!=null?f:0}});return c},w8e=N.memo(function(t){var e,n=t.value,r=t.format,i=t.lineX,s=t.lineY,o=t.onClick,a=t.textBaseline,l=t.textAnchor,c=t.animatedProps,u=Rr(),d=u.axis.ticks.line,f=u.axis.ticks.text,h=(e=r==null?void 0:r(n))!=null?e:n,p=N.useMemo(function(){var v={opacity:c.opacity};return o?{style:Ul({},v,{cursor:"pointer"}),onClick:function(m){return o(m,h)}}:{style:v}},[c.opacity,o,h]);return L.jsxs(nr.g,Ul({transform:c.transform},p,{children:[L.jsx("line",{x1:0,x2:i,y1:0,y2:s,style:d}),f.outlineWidth>0&&L.jsx(nr.text,{dominantBaseline:a,textAnchor:l,transform:c.textTransform,style:f,strokeWidth:2*f.outlineWidth,stroke:f.outlineColor,strokeLinejoin:"round",children:""+h}),L.jsx(nr.text,{dominantBaseline:a,textAnchor:l,transform:c.textTransform,style:f,children:""+h})]}))}),S8e=function(t){var e=t.axis,n=t.scale,r=t.x,i=r===void 0?0:r,s=t.y,o=s===void 0?0:s,a=t.length,l=t.ticksPosition,c=t.tickValues,u=t.tickSize,d=u===void 0?5:u,f=t.tickPadding,h=f===void 0?5:f,p=t.tickRotation,v=p===void 0?0:p,m=t.format,g=t.renderTick,y=g===void 0?w8e:g,x=t.truncateTickAt,S=t.legend,_=t.legendPosition,C=_===void 0?"end":_,T=t.legendOffset,A=T===void 0?0:T,k=t.onClick,M=t.ariaHidden,R=Rr(),P=R.axis.legend.text,O=N.useMemo(function(){return pie(m,n)},[m,n]),$=hie({axis:e,scale:n,ticksPosition:l,tickValues:c,tickSize:d,tickPadding:h,tickRotation:v,truncateTickAt:x}),U=$.ticks,z=$.textAlign,X=$.textBaseline,D=null;if(S!==void 0){var F,W=0,V=0,j=0;e==="y"?(j=-90,W=A,C==="start"?(F="start",V=a):C==="middle"?(F="middle",V=a/2):C==="end"&&(F="end")):(V=A,C==="start"?F="start":C==="middle"?(F="middle",W=a/2):C==="end"&&(F="end",W=a)),D=L.jsxs(L.Fragment,{children:[P.outlineWidth>0&&L.jsx("text",{transform:"translate("+W+", "+V+") rotate("+j+")",textAnchor:F,style:Ul({dominantBaseline:"central"},P),strokeWidth:2*P.outlineWidth,stroke:P.outlineColor,strokeLinejoin:"round",children:S}),L.jsx("text",{transform:"translate("+W+", "+V+") rotate("+j+")",textAnchor:F,style:Ul({dominantBaseline:"central"},P),children:S})]})}var J=Ys(),Q=J.animate,te=J.config,re=Uc({transform:"translate("+i+","+o+")",lineX2:e==="x"?a:0,lineY2:e==="x"?0:a,config:te,immediate:!Q}),se=N.useCallback(function(ye){return{opacity:1,transform:"translate("+ye.x+","+ye.y+")",textTransform:"translate("+ye.textX+","+ye.textY+") rotate("+v+")"}},[v]),fe=N.useCallback(function(ye){return{opacity:0,transform:"translate("+ye.x+","+ye.y+")",textTransform:"translate("+ye.textX+","+ye.textY+") rotate("+v+")"}},[v]),ae=jm(U,{keys:function(ye){return ye.key},initial:se,from:fe,enter:se,update:se,leave:{opacity:0},config:te,immediate:!Q});return L.jsxs(nr.g,{transform:re.transform,"aria-hidden":M,children:[ae(function(ye,le,H,Me){return N.createElement(y,Ul({tickIndex:Me,format:O,rotate:v,textBaseline:X,textAnchor:z,truncateTickAt:x,animatedProps:ye},le,k?{onClick:k}:{}))}),L.jsx(nr.line,{style:R.axis.domain.line,x1:0,x2:re.lineX2,y1:0,y2:re.lineY2}),D]})},_8e=N.memo(S8e),C8e={ticksPosition:ge.oneOf(["before","after"]),tickValues:ge.oneOfType([ge.number,ge.arrayOf(ge.oneOfType([ge.number,ge.string,ge.instanceOf(Date)])),ge.string]),rotateOnTickLength:ge.shape({angle:ge.number,length:ge.number}),tickSize:ge.number,tickPadding:ge.number,tickRotation:ge.number,format:ge.oneOfType([ge.func,ge.string]),renderTick:ge.func,legend:ge.node,legendPosition:ge.oneOf(["start","middle","end"]),legendOffset:ge.number,ariaHidden:ge.bool};ge.shape(C8e);var mie=["top","right","bottom","left"],NU=N.memo(function(t){var e=t.xScale,n=t.yScale,r=t.width,i=t.height,s={top:t.top,right:t.right,bottom:t.bottom,left:t.left};return L.jsx(L.Fragment,{children:mie.map(function(o){var a=s[o];if(!a)return null;var l=o==="top"||o==="bottom";return L.jsx(_8e,Ul({},a,{axis:l?"x":"y",x:o==="right"?r:0,y:o==="bottom"?i:0,scale:l?e:n,length:l?r:i,ticksPosition:o==="top"||o==="left"?"before":"after",truncateTickAt:a.truncateTickAt}),o)})})}),T8e=N.memo(function(t){var e=t.animatedProps,n=Rr();return L.jsx(nr.line,Ul({},e,n.grid.line))}),tj=N.memo(function(t){var e=t.lines,n=Ys(),r=n.animate,i=n.config,s=jm(e,{keys:function(o){return o.key},initial:function(o){return{opacity:1,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2}},from:function(o){return{opacity:0,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2}},enter:function(o){return{opacity:1,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2}},update:function(o){return{opacity:1,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2}},leave:{opacity:0},config:i,immediate:!r});return L.jsx("g",{children:s(function(o,a){return N.createElement(T8e,Ul({},a,{key:a.key,animatedProps:o}))})})}),PU=N.memo(function(t){var e=t.width,n=t.height,r=t.xScale,i=t.yScale,s=t.xValues,o=t.yValues,a=N.useMemo(function(){return!!r&&AL({width:e,height:n,scale:r,axis:"x",values:s})},[r,s,e,n]),l=N.useMemo(function(){return!!i&&AL({width:e,height:n,scale:i,axis:"y",values:o})},[n,e,i,o]);return L.jsxs(L.Fragment,{children:[a&&L.jsx(tj,{lines:a}),l&&L.jsx(tj,{lines:l})]})}),E8e=function(t,e){var n,r=e.axis,i=e.scale,s=e.x,o=s===void 0?0:s,a=e.y,l=a===void 0?0:a,c=e.length,u=e.ticksPosition,d=e.tickValues,f=e.tickSize,h=f===void 0?5:f,p=e.tickPadding,v=p===void 0?5:p,m=e.tickRotation,g=m===void 0?0:m,y=e.format,x=e.legend,S=e.legendPosition,_=S===void 0?"end":S,C=e.legendOffset,T=C===void 0?0:C,A=e.theme,k=hie({axis:r,scale:i,ticksPosition:u,tickValues:d,tickSize:h,tickPadding:v,tickRotation:g,engine:"canvas"}),M=k.ticks,R=k.textAlign,P=k.textBaseline;t.save(),t.translate(o,l),t.textAlign=R,t.textBaseline=P;var O=A.axis.ticks.text;t.font=(O.fontWeight?O.fontWeight+" ":"")+O.fontSize+"px "+O.fontFamily,((n=A.axis.domain.line.strokeWidth)!=null?n:0)>0&&(t.lineWidth=Number(A.axis.domain.line.strokeWidth),t.lineCap="square",A.axis.domain.line.stroke&&(t.strokeStyle=A.axis.domain.line.stroke),t.beginPath(),t.moveTo(0,0),t.lineTo(r==="x"?c:0,r==="x"?0:c),t.stroke());var $=typeof y=="function"?y:function(F){return""+F};if(M.forEach(function(F){var W;((W=A.axis.ticks.line.strokeWidth)!=null?W:0)>0&&(t.lineWidth=Number(A.axis.ticks.line.strokeWidth),t.lineCap="square",A.axis.ticks.line.stroke&&(t.strokeStyle=A.axis.ticks.line.stroke),t.beginPath(),t.moveTo(F.x,F.y),t.lineTo(F.x+F.lineX,F.y+F.lineY),t.stroke());var V=$(F.value);t.save(),t.translate(F.x+F.textX,F.y+F.textY),t.rotate(Fl(g)),O.outlineWidth>0&&(t.strokeStyle=O.outlineColor,t.lineWidth=2*O.outlineWidth,t.lineJoin="round",t.strokeText(""+V,0,0)),A.axis.ticks.text.fill&&(t.fillStyle=O.fill),t.fillText(""+V,0,0),t.restore()}),x!==void 0){var U=0,z=0,X=0,D="center";r==="y"?(X=-90,U=T,_==="start"?(D="start",z=c):_==="middle"?(D="center",z=c/2):_==="end"&&(D="end")):(z=T,_==="start"?D="start":_==="middle"?(D="center",U=c/2):_==="end"&&(D="end",U=c)),t.translate(U,z),t.rotate(Fl(X)),t.font=(A.axis.legend.text.fontWeight?A.axis.legend.text.fontWeight+" ":"")+A.axis.legend.text.fontSize+"px "+A.axis.legend.text.fontFamily,A.axis.legend.text.fill&&(t.fillStyle=A.axis.legend.text.fill),t.textAlign=D,t.textBaseline="middle",t.fillText(x,0,0)}t.restore()},M8e=function(t,e){var n=e.xScale,r=e.yScale,i=e.width,s=e.height,o=e.top,a=e.right,l=e.bottom,c=e.left,u=e.theme,d={top:o,right:a,bottom:l,left:c};mie.forEach(function(f){var h=d[f];if(!h)return null;var p=f==="top"||f==="bottom",v=f==="top"||f==="left"?"before":"after",m=p?n:r,g=pie(h.format,m);E8e(t,Ul({},h,{axis:p?"x":"y",x:f==="right"?i:0,y:f==="bottom"?s:0,scale:m,format:g,length:p?i:s,ticksPosition:v,theme:u}))})},nj=function(t,e){var n=e.width,r=e.height,i=e.scale,s=e.axis,o=e.values;AL({width:n,height:r,scale:i,axis:s,values:o}).forEach(function(a){t.beginPath(),t.moveTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.stroke()})};function zn(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const k8e=zn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),A8e=zn("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),I8e=zn("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),R8e=zn("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),N8e=zn("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),P8e=zn("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),$8e=zn("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),D8e=zn("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),L8e=zn("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function WA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $U(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function vy(){}var _m=.7,Av=1/_m,tv="\\s*([+-]?\\d+)\\s*",Ob="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",O8e=/^#([0-9a-f]{3,8})$/,F8e=new RegExp("^rgb\\("+[tv,tv,tv]+"\\)$"),U8e=new RegExp("^rgb\\("+[Cu,Cu,Cu]+"\\)$"),B8e=new RegExp("^rgba\\("+[tv,tv,tv,Ob]+"\\)$"),z8e=new RegExp("^rgba\\("+[Cu,Cu,Cu,Ob]+"\\)$"),W8e=new RegExp("^hsl\\("+[Ob,Cu,Cu]+"\\)$"),V8e=new RegExp("^hsla\\("+[Ob,Cu,Cu,Ob]+"\\)$"),rj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};WA(vy,DU,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ij,formatHex:ij,formatHsl:G8e,formatRgb:sj,toString:sj});function ij(){return this.rgb().formatHex()}function G8e(){return vie(this).formatHsl()}function sj(){return this.rgb().formatRgb()}function DU(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=O8e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?oj(e):n===3?new zo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?cC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?cC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=F8e.exec(t))?new zo(e[1],e[2],e[3],1):(e=U8e.exec(t))?new zo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=B8e.exec(t))?cC(e[1],e[2],e[3],e[4]):(e=z8e.exec(t))?cC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=W8e.exec(t))?cj(e[1],e[2]/100,e[3]/100,1):(e=V8e.exec(t))?cj(e[1],e[2]/100,e[3]/100,e[4]):rj.hasOwnProperty(t)?oj(rj[t]):t==="transparent"?new zo(NaN,NaN,NaN,0):null}function oj(t){return new zo(t>>16&255,t>>8&255,t&255,1)}function cC(t,e,n,r){return r<=0&&(t=e=n=NaN),new zo(t,e,n,r)}function gie(t){return t instanceof vy||(t=DU(t)),t?(t=t.rgb(),new zo(t.r,t.g,t.b,t.opacity)):new zo}function xM(t,e,n,r){return arguments.length===1?gie(t):new zo(t,e,n,r??1)}function zo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}WA(zo,xM,$U(vy,{brighter:function(t){return t=t==null?Av:Math.pow(Av,t),new zo(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?_m:Math.pow(_m,t),new zo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aj,formatHex:aj,formatRgb:lj,toString:lj}));function aj(){return"#"+aP(this.r)+aP(this.g)+aP(this.b)}function lj(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function aP(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function cj(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new hu(t,e,n,r)}function vie(t){if(t instanceof hu)return new hu(t.h,t.s,t.l,t.opacity);if(t instanceof vy||(t=DU(t)),!t)return new hu;if(t instanceof hu)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new hu(o,a,l,t.opacity)}function H8e(t,e,n,r){return arguments.length===1?vie(t):new hu(t,e,n,r??1)}function hu(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}WA(hu,H8e,$U(vy,{brighter:function(t){return t=t==null?Av:Math.pow(Av,t),new hu(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?_m:Math.pow(_m,t),new hu(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new zo(lP(t>=240?t-240:t+120,i,r),lP(t,i,r),lP(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function lP(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const j8e=Math.PI/180,X8e=180/Math.PI;var yie=-.14861,LU=1.78277,OU=-.29227,VA=-.90649,Fb=1.97294,uj=Fb*VA,dj=Fb*LU,fj=LU*OU-VA*yie;function q8e(t){if(t instanceof Zp)return new Zp(t.h,t.s,t.l,t.opacity);t instanceof zo||(t=gie(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(fj*r+uj*e-dj*n)/(fj+uj-dj),s=r-i,o=(Fb*(n-i)-OU*s)/VA,a=Math.sqrt(o*o+s*s)/(Fb*i*(1-i)),l=a?Math.atan2(o,s)*X8e-120:NaN;return new Zp(l<0?l+360:l,a,i,t.opacity)}function IL(t,e,n,r){return arguments.length===1?q8e(t):new Zp(t,e,n,r??1)}function Zp(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}WA(Zp,IL,$U(vy,{brighter:function(t){return t=t==null?Av:Math.pow(Av,t),new Zp(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?_m:Math.pow(_m,t),new Zp(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*j8e,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new zo(255*(e+n*(yie*r+LU*i)),255*(e+n*(OU*r+VA*i)),255*(e+n*(Fb*r)),this.opacity)}}));function Y8e(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}function K8e(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],o=r>0?t[r-1]:2*i-s,a=r<e-1?t[r+2]:2*s-i;return Y8e((n-r/e)*e,o,i,s,a)}}const FU=t=>()=>t;function xie(t,e){return function(n){return t+n*e}}function Z8e(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function J8e(t,e){var n=e-t;return n?xie(t,n>180||n<-180?n-360*Math.round(n/360):n):FU(isNaN(t)?e:t)}function Q8e(t){return(t=+t)==1?nv:function(e,n){return n-e?Z8e(e,n,t):FU(isNaN(e)?n:e)}}function nv(t,e){var n=e-t;return n?xie(t,n):FU(isNaN(t)?e:t)}(function t(e){var n=Q8e(e);function r(i,s){var o=n((i=xM(i)).r,(s=xM(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=nv(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function e7e(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=xM(e[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=t(r),i=t(i),s=t(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var t7e=e7e(K8e);function bie(t){return function e(n){n=+n;function r(i,s){var o=t((i=IL(i)).h,(s=IL(s)).h),a=nv(i.s,s.s),l=nv(i.l,s.l),c=nv(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=e,r}(1)}bie(J8e);var UU=bie(nv);const zr=t=>t7e(t[t.length-1]);var wie=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(zn);const n7e=zr(wie);var Sie=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(zn);const r7e=zr(Sie);var _ie=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(zn);const i7e=zr(_ie);var Cie=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(zn);const s7e=zr(Cie);var Tie=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(zn);const o7e=zr(Tie);var Eie=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(zn);const a7e=zr(Eie);var Mie=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(zn);const l7e=zr(Mie);var kie=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(zn);const c7e=zr(kie);var Aie=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(zn);const u7e=zr(Aie);var Iie=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(zn);const d7e=zr(Iie);var Rie=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(zn);const f7e=zr(Rie);var Nie=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(zn);const h7e=zr(Nie);var Pie=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(zn);const p7e=zr(Pie);var $ie=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(zn);const m7e=zr($ie);var Die=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(zn);const g7e=zr(Die);var Lie=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(zn);const v7e=zr(Lie);var Oie=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(zn);const y7e=zr(Oie);var Fie=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(zn);const x7e=zr(Fie);var Uie=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(zn);const b7e=zr(Uie);var Bie=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(zn);const w7e=zr(Bie);var zie=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(zn);const S7e=zr(zie);var Wie=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(zn);const _7e=zr(Wie);var Vie=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(zn);const C7e=zr(Vie);var Gie=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(zn);const T7e=zr(Gie);var Hie=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(zn);const E7e=zr(Hie);var jie=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(zn);const M7e=zr(jie);var Xie=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(zn);const k7e=zr(Xie);function A7e(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}function GA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function BU(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function yy(){}var Cm=.7,Iv=1/Cm,rv="\\s*([+-]?\\d+)\\s*",Ub="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",I7e=/^#([0-9a-f]{3,8})$/,R7e=new RegExp("^rgb\\("+[rv,rv,rv]+"\\)$"),N7e=new RegExp("^rgb\\("+[Tu,Tu,Tu]+"\\)$"),P7e=new RegExp("^rgba\\("+[rv,rv,rv,Ub]+"\\)$"),$7e=new RegExp("^rgba\\("+[Tu,Tu,Tu,Ub]+"\\)$"),D7e=new RegExp("^hsl\\("+[Ub,Tu,Tu]+"\\)$"),L7e=new RegExp("^hsla\\("+[Ub,Tu,Tu,Ub]+"\\)$"),hj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};GA(yy,zU,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:pj,formatHex:pj,formatHsl:O7e,formatRgb:mj,toString:mj});function pj(){return this.rgb().formatHex()}function O7e(){return Kie(this).formatHsl()}function mj(){return this.rgb().formatRgb()}function zU(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=I7e.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?gj(e):n===3?new Wo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?uC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?uC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=R7e.exec(t))?new Wo(e[1],e[2],e[3],1):(e=N7e.exec(t))?new Wo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=P7e.exec(t))?uC(e[1],e[2],e[3],e[4]):(e=$7e.exec(t))?uC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=D7e.exec(t))?xj(e[1],e[2]/100,e[3]/100,1):(e=L7e.exec(t))?xj(e[1],e[2]/100,e[3]/100,e[4]):hj.hasOwnProperty(t)?gj(hj[t]):t==="transparent"?new Wo(NaN,NaN,NaN,0):null}function gj(t){return new Wo(t>>16&255,t>>8&255,t&255,1)}function uC(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wo(t,e,n,r)}function qie(t){return t instanceof yy||(t=zU(t)),t?(t=t.rgb(),new Wo(t.r,t.g,t.b,t.opacity)):new Wo}function Yie(t,e,n,r){return arguments.length===1?qie(t):new Wo(t,e,n,r??1)}function Wo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}GA(Wo,Yie,BU(yy,{brighter:function(t){return t=t==null?Iv:Math.pow(Iv,t),new Wo(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?Cm:Math.pow(Cm,t),new Wo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vj,formatHex:vj,formatRgb:yj,toString:yj}));function vj(){return"#"+cP(this.r)+cP(this.g)+cP(this.b)}function yj(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function cP(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function xj(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new pu(t,e,n,r)}function Kie(t){if(t instanceof pu)return new pu(t.h,t.s,t.l,t.opacity);if(t instanceof yy||(t=zU(t)),!t)return new pu;if(t instanceof pu)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new pu(o,a,l,t.opacity)}function F7e(t,e,n,r){return arguments.length===1?Kie(t):new pu(t,e,n,r??1)}function pu(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}GA(pu,F7e,BU(yy,{brighter:function(t){return t=t==null?Iv:Math.pow(Iv,t),new pu(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Cm:Math.pow(Cm,t),new pu(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Wo(uP(t>=240?t-240:t+120,i,r),uP(t,i,r),uP(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function uP(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const U7e=Math.PI/180,B7e=180/Math.PI;var Zie=-.14861,WU=1.78277,VU=-.29227,HA=-.90649,Bb=1.97294,bj=Bb*HA,wj=Bb*WU,Sj=WU*VU-HA*Zie;function z7e(t){if(t instanceof Jp)return new Jp(t.h,t.s,t.l,t.opacity);t instanceof Wo||(t=qie(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Sj*r+bj*e-wj*n)/(Sj+bj-wj),s=r-i,o=(Bb*(n-i)-VU*s)/HA,a=Math.sqrt(o*o+s*s)/(Bb*i*(1-i)),l=a?Math.atan2(o,s)*B7e-120:NaN;return new Jp(l<0?l+360:l,a,i,t.opacity)}function ah(t,e,n,r){return arguments.length===1?z7e(t):new Jp(t,e,n,r??1)}function Jp(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}GA(Jp,ah,BU(yy,{brighter:function(t){return t=t==null?Iv:Math.pow(Iv,t),new Jp(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Cm:Math.pow(Cm,t),new Jp(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*U7e,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Wo(255*(e+n*(Zie*r+WU*i)),255*(e+n*(VU*r+HA*i)),255*(e+n*(Bb*r)),this.opacity)}}));const W7e=UU(ah(300,.5,0),ah(-240,.5,1));var V7e=UU(ah(-100,.75,.35),ah(80,1.5,.8)),G7e=UU(ah(260,.75,.35),ah(80,1.5,.8)),dC=ah();function H7e(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return dC.h=360*t-100,dC.s=1.5-1.5*e,dC.l=.8-.9*e,dC+""}var fC=Yie(),j7e=Math.PI/3,X7e=Math.PI*2/3;function q7e(t){var e;return t=(.5-t)*Math.PI,fC.r=255*(e=Math.sin(t))*e,fC.g=255*(e=Math.sin(t+j7e))*e,fC.b=255*(e=Math.sin(t+X7e))*e,fC+""}function Y7e(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function jA(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const K7e=jA(zn("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Z7e=jA(zn("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),J7e=jA(zn("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Q7e=jA(zn("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function bM(){return bM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bM.apply(this,arguments)}function _j(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eWe(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(i,s){if(i){if(typeof i=="string")return _j(i,s);var o=Object.prototype.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(i):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_j(i,s):void 0}}(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Jie={nivo:["#e8c1a0","#f47560","#f1e15b","#e8a838","#61cdbb","#97e3d5"],category10:k8e,accent:A8e,dark2:I8e,paired:R8e,pastel1:N8e,pastel2:P8e,set1:$8e,set2:D8e,set3:L8e},tWe=Object.keys(Jie),Qie={brown_blueGreen:wie,purpleRed_green:Sie,pink_yellowGreen:_ie,purple_orange:Cie,red_blue:Tie,red_grey:Eie,red_yellow_blue:Mie,red_yellow_green:kie,spectral:Aie},nWe=Object.keys(Qie),rWe={brown_blueGreen:n7e,purpleRed_green:r7e,pink_yellowGreen:i7e,purple_orange:s7e,red_blue:o7e,red_grey:a7e,red_yellow_blue:l7e,red_yellow_green:c7e,spectral:u7e},ese={blues:Wie,greens:Vie,greys:Gie,oranges:Xie,purples:Hie,reds:jie,blue_green:Iie,blue_purple:Rie,green_blue:Nie,orange_red:Pie,purple_blue_green:$ie,purple_blue:Die,purple_red:Lie,red_purple:Oie,yellow_green_blue:Fie,yellow_green:Uie,yellow_orange_brown:Bie,yellow_orange_red:zie},iWe=Object.keys(ese),sWe={blues:_7e,greens:C7e,greys:T7e,oranges:k7e,purples:E7e,reds:M7e,turbo:Y7e,viridis:K7e,inferno:J7e,magma:Z7e,plasma:Q7e,cividis:A7e,warm:V7e,cool:G7e,cubehelixDefault:W7e,blue_green:d7e,blue_purple:f7e,green_blue:h7e,orange_red:p7e,purple_blue_green:m7e,purple_blue:g7e,purple_red:v7e,red_purple:y7e,yellow_green_blue:x7e,yellow_green:b7e,yellow_orange_brown:w7e,yellow_orange_red:S7e},ZT=bM({},Jie,Qie,ese),oWe=Object.keys(ZT),aWe=function(t){return tWe.includes(t)},lWe=function(t){return nWe.includes(t)},cWe=function(t){return iWe.includes(t)},uWe={rainbow:H7e,sinebow:q7e},GU=bM({},rWe,sWe,uWe),dWe=function(t,e){if(typeof t=="function")return t;if(S5(t)){if(function(l){return l.theme!==void 0}(t)){if(e===void 0)throw new Error("Unable to use color from theme as no theme was provided");var n=Va(e,t.theme);if(n===void 0)throw new Error("Color from theme is undefined at path: '"+t.theme+"'");return function(){return n}}if(function(l){return l.from!==void 0}(t)){var r=function(l){return Va(l,t.from)};if(Array.isArray(t.modifiers)){for(var i,s=[],o=function(){var l=i.value,c=l[0],u=l[1];if(c==="brighter")s.push(function(d){return d.brighter(u)});else if(c==="darker")s.push(function(d){return d.darker(u)});else{if(c!=="opacity")throw new Error("Invalid color modifier: '"+c+"', must be one of: 'brighter', 'darker', 'opacity'");s.push(function(d){return d.opacity=u,d})}},a=eWe(t.modifiers);!(i=a()).done;)o();return s.length===0?r:function(l){return s.reduce(function(c,u){return u(c)},Ab(r(l))).toString()}}return r}throw new Error("Invalid color spec, you should either specify 'theme' or 'from' when using a config object")}return function(){return t}},Ac=function(t,e){return N.useMemo(function(){return dWe(t,e)},[t,e])};ge.oneOfType([ge.func,ge.arrayOf(ge.string),ge.shape({scheme:ge.oneOf(oWe).isRequired,size:ge.number}),ge.shape({datum:ge.string.isRequired}),ge.string]);ge.oneOfType([ge.string,ge.func,ge.shape({theme:ge.string.isRequired}),ge.shape({from:ge.string.isRequired,modifiers:ge.arrayOf(ge.array)})]);var fWe={scheme:"turbo"},hWe=function(t,e){var n=t.minValue,r=t.maxValue,i=n!==void 0?n:e.min,s=r!==void 0?r:e.max,o=ore().domain([i,s]).clamp(!0);if("colors"in t)o.range(t.colors);else if("interpolator"in t)o.interpolator(t.interpolator);else{var a,l=(a=t.scheme)!=null?a:fWe.scheme;o.interpolator(GU[l])}return o},Cj={scheme:"red_yellow_blue",divergeAt:.5},pWe=function(t,e){var n,r=t.minValue,i=t.maxValue,s=r!==void 0?r:e.min,o=i!==void 0?i:e.max,a=[s,s+(o-s)/2,o],l=.5-((n=t.divergeAt)!=null?n:Cj.divergeAt),c=gL().domain(a).clamp(!0),u=function(h){return String(h)};if("colors"in t)u=gL().domain(a.map(function(h){return h-l*(o-s)})).range(t.colors).interpolator();else if("interpolator"in t)u=t.interpolator;else{var d,f=(d=t.scheme)!=null?d:Cj.scheme;u=GU[f]}return c.interpolator(function(h){return u(h+l)})},Tj={scheme:"turbo",steps:7},mWe=function(t,e){var n=une().domain(t.domain||[e.min,e.max]).nice();if("colors"in t)n.range(t.colors);else{var r=t.scheme||Tj.scheme,i=t.steps===void 0?Tj.steps:t.steps,s=GU[r],o=Array.from({length:i}).map(function(a,l){return s(l*(1/(i-1)))});n.range(o)}return n},gWe=function(t,e){if(function(n){return n.type==="sequential"}(t))return hWe(t,e);if(function(n){return n.type==="diverging"}(t))return pWe(t,e);if(function(n){return n.type==="quantize"}(t))return mWe(t,e);throw new Error("Invalid continuous color scale config")},vWe=function(t,e){e===void 0&&(e=16);var n=t.domain();if("thresholds"in t){var r=[],i=r2().domain(n).range([0,1]);return t.range().forEach(function(o,a){var l=t.invertExtent(o),c=l[0],u=l[1];r.push({key:a+".0",offset:i(c),stopColor:o}),r.push({key:a+".1",offset:i(u),stopColor:o})}),r}var s=t.copy();return n.length===2?s.domain([0,1]):n.length===3&&s.domain([0,.5,1]),s.ticks(e).map(function(o){return{key:""+o,offset:o,stopColor:""+s(o)}})},yWe=function(t,e){if(typeof t=="function")return t;var n=typeof e=="function"?e:function(d){return Va(d,e)};if(Array.isArray(t)){var r=Lp(t),i=function(d){return r(n(d))};return i.scale=r,i}if(S5(t)){if(function(d){return d.datum!==void 0}(t))return function(d){return Va(d,t.datum)};if(function(d){return d.scheme!==void 0}(t)){if(aWe(t.scheme)){var s=Lp(ZT[t.scheme]),o=function(d){return s(n(d))};return o.scale=s,o}if(lWe(t.scheme)){if(t.size!==void 0&&(t.size<3||t.size>11))throw new Error("Invalid size '"+t.size+"' for diverging color scheme '"+t.scheme+"', must be between 3~11");var a=Lp(ZT[t.scheme][t.size||11]),l=function(d){return a(n(d))};return l.scale=a,l}if(cWe(t.scheme)){if(t.size!==void 0&&(t.size<3||t.size>9))throw new Error("Invalid size '"+t.size+"' for sequential color scheme '"+t.scheme+"', must be between 3~9");var c=Lp(ZT[t.scheme][t.size||9]),u=function(d){return c(n(d))};return u.scale=c,u}}throw new Error("Invalid colors, when using an object, you should either pass a 'datum' or a 'scheme' property")}return function(){return t}},HU=function(t,e){return N.useMemo(function(){return yWe(t,e)},[t,e])},xWe=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,o=s===void 0?1:s,a=t.borderWidth,l=a===void 0?0:a,c=t.borderColor;return L.jsx("circle",{r:r/2,cx:e+r/2,cy:n+r/2,fill:i,opacity:o,strokeWidth:l,stroke:c===void 0?"transparent":c,style:{pointerEvents:"none"}})},bWe=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,o=s===void 0?1:s,a=t.borderWidth,l=a===void 0?0:a,c=t.borderColor;return L.jsx("g",{transform:"translate("+e+","+n+")",children:L.jsx("path",{d:`
                    M`+r/2+` 0
                    L`+.8*r+" "+r/2+`
                    L`+r/2+" "+r+`
                    L`+.2*r+" "+r/2+`
                    L`+r/2+` 0
                `,fill:i,opacity:o,strokeWidth:l,stroke:c===void 0?"transparent":c,style:{pointerEvents:"none"}})})},wWe=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,o=s===void 0?1:s,a=t.borderWidth,l=a===void 0?0:a,c=t.borderColor;return L.jsx("rect",{x:e,y:n,fill:i,opacity:o,strokeWidth:l,stroke:c===void 0?"transparent":c,width:r,height:r,style:{pointerEvents:"none"}})},SWe=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,o=s===void 0?1:s,a=t.borderWidth,l=a===void 0?0:a,c=t.borderColor;return L.jsx("g",{transform:"translate("+e+","+n+")",children:L.jsx("path",{d:`
                M`+r/2+` 0
                L`+r+" "+r+`
                L0 `+r+`
                L`+r/2+` 0
            `,fill:i,opacity:o,strokeWidth:l,stroke:c===void 0?"transparent":c,style:{pointerEvents:"none"}})})};function Md(){return Md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Md.apply(this,arguments)}var hi={length:200,thickness:16,direction:"row",tickPosition:"after",tickSize:4,tickSpacing:3,tickOverlap:!1,tickFormat:function(t){return""+t},titleAlign:"start",titleOffset:4},_We={top:0,right:0,bottom:0,left:0},jU=function(t){var e,n=t.direction,r=t.itemsSpacing,i=t.padding,s=t.itemCount,o=t.itemWidth,a=t.itemHeight;if(typeof i!="number"&&(typeof(e=i)!="object"||Array.isArray(e)||e===null))throw new Error("Invalid property padding, must be one of: number, object");var l=typeof i=="number"?{top:i,right:i,bottom:i,left:i}:Md({},_We,i),c=l.left+l.right,u=l.top+l.bottom,d=o+c,f=a+u,h=(s-1)*r;return n==="row"?d=o*s+h+c:n==="column"&&(f=a*s+h+u),{width:d,height:f,padding:l}},XU=function(t){var e=t.anchor,n=t.translateX,r=t.translateY,i=t.containerWidth,s=t.containerHeight,o=t.width,a=t.height,l=n,c=r;switch(e){case"top":l+=(i-o)/2;break;case"top-right":l+=i-o;break;case"right":l+=i-o,c+=(s-a)/2;break;case"bottom-right":l+=i-o,c+=s-a;break;case"bottom":l+=(i-o)/2,c+=s-a;break;case"bottom-left":c+=s-a;break;case"left":c+=(s-a)/2;break;case"center":l+=(i-o)/2,c+=(s-a)/2}return{x:l,y:c}},tse=function(t){var e,n,r,i,s,o,a=t.direction,l=t.justify,c=t.symbolSize,u=t.symbolSpacing,d=t.width,f=t.height;switch(a){case"left-to-right":e=0,n=(f-c)/2,i=f/2,o="central",l?(r=d,s="end"):(r=c+u,s="start");break;case"right-to-left":e=d-c,n=(f-c)/2,i=f/2,o="central",l?(r=0,s="start"):(r=d-c-u,s="end");break;case"top-to-bottom":e=(d-c)/2,n=0,r=d/2,s="middle",l?(i=f,o="alphabetic"):(i=c+u,o="text-before-edge");break;case"bottom-to-top":e=(d-c)/2,n=f-c,r=d/2,s="middle",l?(i=0,o="text-before-edge"):(i=f-c-u,o="alphabetic")}return{symbolX:e,symbolY:n,labelX:r,labelY:i,labelAnchor:s,labelAlignment:o}},CWe=function(t){var e,n=t.scale,r=t.ticks,i=t.length,s=i===void 0?hi.length:i,o=t.thickness,a=o===void 0?hi.thickness:o,l=t.direction,c=l===void 0?hi.direction:l,u=t.tickPosition,d=u===void 0?hi.tickPosition:u,f=t.tickSize,h=f===void 0?hi.tickSize:f,p=t.tickSpacing,v=p===void 0?hi.tickSpacing:p,m=t.tickOverlap,g=m===void 0?hi.tickOverlap:m,y=t.tickFormat,x=y===void 0?hi.tickFormat:y,S=t.title,_=t.titleAlign,C=_===void 0?hi.titleAlign:_,T=t.titleOffset,A=T===void 0?hi.titleOffset:T,k=c==="column"?[].concat(n.domain()).reverse():n.domain(),M=r2().domain(k);k.length===2?M.range([0,s]):k.length===3&&M.range([0,s/2,s]),e="thresholds"in n?[k[0]].concat(n.thresholds(),[k[1]]):Array.isArray(r)?r:n.ticks(r);var R,P,O,$,U,z,X=vWe(n,32),D=Xre(x),F=[],W=0,V=0;if(c==="row"){var j,J,Q;R=s,P=a,V=1;var te;U=0,O=C==="start"?0:C==="middle"?s/2:s,d==="before"?(j=-h,J=g?a:0,Q=-h-v,te="alphabetic",$=a+A,z="hanging"):(j=g?0:a,Q=(J=a+h)+v,te="hanging",$=-A,z="alphabetic"),e.forEach(function(ye){var le=M(ye);F.push({x1:le,y1:j,x2:le,y2:J,text:D(ye),textX:le,textY:Q,textHorizontalAlign:"middle",textVerticalAlign:te})})}else{var re,se,fe,ae;R=a,P=s,W=1,U=-90,$=C==="start"?s:C==="middle"?s/2:0,d==="before"?(se=g?a:0,fe=(re=-h)-v,ae="end",O=a+A,z="hanging"):(re=g?0:a,fe=(se=a+h)+v,ae="start",O=-A,z="alphabetic"),e.forEach(function(ye){var le=M(ye);F.push({x1:re,y1:le,x2:se,y2:le,text:D(ye),textX:fe,textY:le,textHorizontalAlign:ae,textVerticalAlign:"central"})})}return{width:R,height:P,gradientX1:0,gradientY1:W,gradientX2:V,gradientY2:0,colorStops:X,ticks:F,titleText:S,titleX:O,titleY:$,titleRotation:U,titleHorizontalAlign:C,titleVerticalAlign:z}},TWe=function(t){var e=t.scale,n=t.ticks,r=t.length,i=r===void 0?hi.length:r,s=t.thickness,o=s===void 0?hi.thickness:s,a=t.direction,l=a===void 0?hi.direction:a,c=t.tickPosition,u=c===void 0?hi.tickPosition:c,d=t.tickSize,f=d===void 0?hi.tickSize:d,h=t.tickSpacing,p=h===void 0?hi.tickSpacing:h,v=t.tickOverlap,m=v===void 0?hi.tickOverlap:v,g=t.tickFormat,y=g===void 0?hi.tickFormat:g,x=t.title,S=t.titleAlign,_=S===void 0?hi.titleAlign:S,C=t.titleOffset,T=CWe({scale:e,ticks:n,length:i,thickness:o,direction:l,tickPosition:u,tickSize:f,tickSpacing:p,tickOverlap:m,tickFormat:y,title:x,titleAlign:_,titleOffset:C===void 0?hi.titleOffset:C}),A=T.width,k=T.height,M=T.gradientX1,R=T.gradientY1,P=T.gradientX2,O=T.gradientY2,$=T.ticks,U=T.colorStops,z=T.titleText,X=T.titleX,D=T.titleY,F=T.titleRotation,W=T.titleVerticalAlign,V=T.titleHorizontalAlign,j=Rr(),J="ContinuousColorsLegendSvgGradient."+l+"."+U.map(function(Q){return Q.offset}).join("_");return L.jsxs("g",{children:[L.jsx("defs",{children:L.jsx("linearGradient",{id:J,x1:M,y1:R,x2:P,y2:O,children:U.map(function(Q){return L.jsx("stop",Md({},Q))})})}),z&&L.jsx("text",{transform:"translate("+X+", "+D+") rotate("+F+")",textAnchor:V,dominantBaseline:W,style:j.legends.title.text,children:z}),L.jsx("rect",{width:A,height:k,fill:"url(#"+J}),$.map(function(Q,te){return L.jsxs(N.Fragment,{children:[L.jsx("line",{x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,style:j.legends.ticks.line}),L.jsx("text",{x:Q.textX,y:Q.textY,textAnchor:Q.textHorizontalAlign,dominantBaseline:Q.textVerticalAlign,style:j.legends.ticks.text,children:Q.text})]},te)})]})},EWe=["containerWidth","containerHeight","anchor","translateX","translateY","length","thickness","direction"],MWe=function(t){var e,n,r=t.containerWidth,i=t.containerHeight,s=t.anchor,o=t.translateX,a=o===void 0?0:o,l=t.translateY,c=l===void 0?0:l,u=t.length,d=u===void 0?hi.length:u,f=t.thickness,h=f===void 0?hi.thickness:f,p=t.direction,v=p===void 0?hi.direction:p,m=function(S,_){if(S==null)return{};var C,T,A={},k=Object.keys(S);for(T=0;T<k.length;T++)C=k[T],_.indexOf(C)>=0||(A[C]=S[C]);return A}(t,EWe);v==="row"?(e=d,n=h):(e=h,n=d);var g=XU({anchor:s,translateX:a,translateY:c,containerWidth:r,containerHeight:i,width:e,height:n}),y=g.x,x=g.y;return L.jsx("g",{transform:"translate("+y+", "+x+")",children:L.jsx(TWe,Md({length:d,thickness:h,direction:v},m))})},kWe={circle:xWe,diamond:bWe,square:wWe,triangle:SWe},AWe=function(t){var e,n,r,i,s,o,a,l,c,u,d,f=t.x,h=t.y,p=t.width,v=t.height,m=t.data,g=t.direction,y=g===void 0?"left-to-right":g,x=t.justify,S=x!==void 0&&x,_=t.textColor,C=t.background,T=C===void 0?"transparent":C,A=t.opacity,k=A===void 0?1:A,M=t.symbolShape,R=M===void 0?"square":M,P=t.symbolSize,O=P===void 0?16:P,$=t.symbolSpacing,U=$===void 0?8:$,z=t.symbolBorderWidth,X=z===void 0?0:z,D=t.symbolBorderColor,F=D===void 0?"transparent":D,W=t.onClick,V=t.onMouseEnter,j=t.onMouseLeave,J=t.toggleSerie,Q=t.effects,te=N.useState({}),re=te[0],se=te[1],fe=Rr(),ae=N.useCallback(function(Y){if(Q){var oe=Q.filter(function(xe){return xe.on==="hover"}).reduce(function(xe,Se){return Md({},xe,Se.style)},{});se(oe)}V==null||V(m,Y)},[V,m,Q]),ye=N.useCallback(function(Y){if(Q){var oe=Q.filter(function(xe){return xe.on!=="hover"}).reduce(function(xe,Se){return Md({},xe,Se.style)},{});se(oe)}j==null||j(m,Y)},[j,m,Q]),le=tse({direction:y,justify:S,symbolSize:(e=re.symbolSize)!=null?e:O,symbolSpacing:U,width:p,height:v}),H=le.symbolX,Me=le.symbolY,we=le.labelX,Ee=le.labelY,me=le.labelAnchor,qe=le.labelAlignment,ke=[W,V,j,J].some(function(Y){return Y!==void 0}),ee=typeof R=="function"?R:kWe[R];return L.jsxs("g",{transform:"translate("+f+","+h+")",style:{opacity:(n=re.itemOpacity)!=null?n:k},children:[L.jsx("rect",{width:p,height:v,fill:(r=re.itemBackground)!=null?r:T,style:{cursor:ke?"pointer":"auto"},onClick:function(Y){W==null||W(m,Y),J==null||J(m.id)},onMouseEnter:ae,onMouseLeave:ye}),N.createElement(ee,Md({id:m.id,x:H,y:Me,size:(i=re.symbolSize)!=null?i:O,fill:(s=(o=m.fill)!=null?o:m.color)!=null?s:"black",borderWidth:(a=re.symbolBorderWidth)!=null?a:X,borderColor:(l=re.symbolBorderColor)!=null?l:F},m.hidden?fe.legends.hidden.symbol:void 0)),L.jsx("text",{textAnchor:me,style:Md({},fe.legends.text,{fill:(c=(u=(d=re.itemTextColor)!=null?d:_)!=null?u:fe.legends.text.fill)!=null?c:"black",dominantBaseline:qe,pointerEvents:"none",userSelect:"none"},m.hidden?fe.legends.hidden.text:void 0),x:we,y:Ee,children:m.label})]})},IWe=function(t){var e=t.data,n=t.x,r=t.y,i=t.direction,s=t.padding,o=s===void 0?0:s,a=t.justify,l=t.effects,c=t.itemWidth,u=t.itemHeight,d=t.itemDirection,f=d===void 0?"left-to-right":d,h=t.itemsSpacing,p=h===void 0?0:h,v=t.itemTextColor,m=t.itemBackground,g=m===void 0?"transparent":m,y=t.itemOpacity,x=y===void 0?1:y,S=t.symbolShape,_=t.symbolSize,C=t.symbolSpacing,T=t.symbolBorderWidth,A=t.symbolBorderColor,k=t.onClick,M=t.onMouseEnter,R=t.onMouseLeave,P=t.toggleSerie,O=jU({itemCount:e.length,itemWidth:c,itemHeight:u,itemsSpacing:p,direction:i,padding:o}).padding,$=i==="row"?c+p:0,U=i==="column"?u+p:0;return L.jsx("g",{transform:"translate("+n+","+r+")",children:e.map(function(z,X){return L.jsx(AWe,{data:z,x:X*$+O.left,y:X*U+O.top,width:c,height:u,direction:f,justify:a,effects:l,textColor:v,background:g,opacity:x,symbolShape:S,symbolSize:_,symbolSpacing:C,symbolBorderWidth:T,symbolBorderColor:A,onClick:k,onMouseEnter:M,onMouseLeave:R,toggleSerie:P},X)})})},qU=function(t){var e=t.data,n=t.containerWidth,r=t.containerHeight,i=t.translateX,s=i===void 0?0:i,o=t.translateY,a=o===void 0?0:o,l=t.anchor,c=t.direction,u=t.padding,d=u===void 0?0:u,f=t.justify,h=t.itemsSpacing,p=h===void 0?0:h,v=t.itemWidth,m=t.itemHeight,g=t.itemDirection,y=t.itemTextColor,x=t.itemBackground,S=t.itemOpacity,_=t.symbolShape,C=t.symbolSize,T=t.symbolSpacing,A=t.symbolBorderWidth,k=t.symbolBorderColor,M=t.onClick,R=t.onMouseEnter,P=t.onMouseLeave,O=t.toggleSerie,$=t.effects,U=jU({itemCount:e.length,itemsSpacing:p,itemWidth:v,itemHeight:m,direction:c,padding:d}),z=U.width,X=U.height,D=XU({anchor:l,translateX:s,translateY:a,containerWidth:n,containerHeight:r,width:z,height:X}),F=D.x,W=D.y;return L.jsx(IWe,{data:e,x:F,y:W,direction:c,padding:d,justify:f,effects:$,itemsSpacing:p,itemWidth:v,itemHeight:m,itemDirection:g,itemTextColor:y,itemBackground:x,itemOpacity:S,symbolShape:_,symbolSize:C,symbolSpacing:T,symbolBorderWidth:A,symbolBorderColor:k,onClick:M,onMouseEnter:R,onMouseLeave:P,toggleSerie:typeof O=="boolean"?void 0:O})},RWe={start:"left",middle:"center",end:"right"},NWe=function(t,e){var n=e.data,r=e.containerWidth,i=e.containerHeight,s=e.translateX,o=s===void 0?0:s,a=e.translateY,l=a===void 0?0:a,c=e.anchor,u=e.direction,d=e.padding,f=d===void 0?0:d,h=e.justify,p=h!==void 0&&h,v=e.itemsSpacing,m=v===void 0?0:v,g=e.itemWidth,y=e.itemHeight,x=e.itemDirection,S=x===void 0?"left-to-right":x,_=e.itemTextColor,C=e.symbolSize,T=C===void 0?16:C,A=e.symbolSpacing,k=A===void 0?8:A,M=e.theme,R=jU({itemCount:n.length,itemWidth:g,itemHeight:y,itemsSpacing:m,direction:u,padding:f}),P=R.width,O=R.height,$=R.padding,U=XU({anchor:c,translateX:o,translateY:l,containerWidth:r,containerHeight:i,width:P,height:O}),z=U.x,X=U.y,D=u==="row"?g+m:0,F=u==="column"?y+m:0;t.save(),t.translate(z,X),t.font=M.legends.text.fontSize+"px "+(M.legends.text.fontFamily||"sans-serif"),n.forEach(function(W,V){var j,J,Q=V*D+$.left,te=V*F+$.top,re=tse({direction:S,justify:p,symbolSize:T,symbolSpacing:k,width:g,height:y}),se=re.symbolX,fe=re.symbolY,ae=re.labelX,ye=re.labelY,le=re.labelAnchor,H=re.labelAlignment;t.fillStyle=(j=W.color)!=null?j:"black",t.fillRect(Q+se,te+fe,T,T),t.textAlign=RWe[le],H==="central"&&(t.textBaseline="middle"),t.fillStyle=(J=_??M.legends.text.fill)!=null?J:"black",t.fillText(String(W.label),Q+ae,te+ye)}),t.restore()};ge.arrayOf(ge.object),ge.oneOf(["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left","center"]).isRequired,ge.number,ge.number,ge.oneOf(["row","column"]).isRequired,ge.number,ge.number.isRequired,ge.number.isRequired,ge.oneOf(["left-to-right","right-to-left","top-to-bottom","bottom-to-top"]),ge.string,ge.string,ge.number,ge.oneOfType([ge.oneOf(["circle","diamond","square","triangle"]),ge.func]),ge.number,ge.number,ge.number,ge.string,ge.func,ge.func,ge.func,ge.arrayOf(ge.shape({on:ge.oneOfType([ge.oneOf(["hover"])]).isRequired,style:ge.shape({itemTextColor:ge.string,itemBackground:ge.string,itemOpacity:ge.number,symbolSize:ge.number,symbolBorderWidth:ge.number,symbolBorderColor:ge.string}).isRequired}));var PWe=aie;function $We(t,e){var n=[];return PWe(t,function(r,i,s){e(r,i,s)&&n.push(r)}),n}var DWe=$We,LWe=Dre,OWe=DWe,FWe=IU,UWe=Ea;function BWe(t,e){var n=UWe(t)?LWe:OWe;return n(t,FWe(e))}var zWe=BWe;const WWe=is(zWe);var VWe=_h,GWe=Bc,HWe="[object Number]";function jWe(t){return typeof t=="number"||GWe(t)&&VWe(t)==HWe}var XWe=jWe;const Ej=is(XWe);function qWe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var YWe=qWe,KWe=uy,ZWe=i2;function JWe(t,e){return t&&KWe(e,ZWe(e),t)}var QWe=JWe,eVe=uy,tVe=Zw;function nVe(t,e){return t&&eVe(e,tVe(e),t)}var rVe=nVe,iVe=uy,sVe=EU;function oVe(t,e){return iVe(t,sVe(t),e)}var aVe=oVe,lVe=CU,cVe=y5,uVe=EU,dVe=Lre,fVe=Object.getOwnPropertySymbols,hVe=fVe?function(t){for(var e=[];t;)lVe(e,uVe(t)),t=cVe(t);return e}:dVe,nse=hVe,pVe=uy,mVe=nse;function gVe(t,e){return pVe(t,mVe(t),e)}var vVe=gVe,yVe=$re,xVe=nse,bVe=Zw;function wVe(t){return yVe(t,bVe,xVe)}var rse=wVe,SVe=Object.prototype,_Ve=SVe.hasOwnProperty;function CVe(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&_Ve.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var TVe=CVe,EVe=v5;function MVe(t,e){var n=e?EVe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var kVe=MVe,AVe=/\w*$/;function IVe(t){var e=new t.constructor(t.source,AVe.exec(t));return e.lastIndex=t.lastIndex,e}var RVe=IVe,Mj=sy,kj=Mj?Mj.prototype:void 0,Aj=kj?kj.valueOf:void 0;function NVe(t){return Aj?Object(Aj.call(t)):{}}var PVe=NVe,$Ve=v5,DVe=kVe,LVe=RVe,OVe=PVe,FVe=kte,UVe="[object Boolean]",BVe="[object Date]",zVe="[object Map]",WVe="[object Number]",VVe="[object RegExp]",GVe="[object Set]",HVe="[object String]",jVe="[object Symbol]",XVe="[object ArrayBuffer]",qVe="[object DataView]",YVe="[object Float32Array]",KVe="[object Float64Array]",ZVe="[object Int8Array]",JVe="[object Int16Array]",QVe="[object Int32Array]",e9e="[object Uint8Array]",t9e="[object Uint8ClampedArray]",n9e="[object Uint16Array]",r9e="[object Uint32Array]";function i9e(t,e,n){var r=t.constructor;switch(e){case XVe:return $Ve(t);case UVe:case BVe:return new r(+t);case qVe:return DVe(t,n);case YVe:case KVe:case ZVe:case JVe:case QVe:case e9e:case t9e:case n9e:case r9e:return FVe(t,n);case zVe:return new r;case WVe:case HVe:return new r(t);case VVe:return LVe(t);case GVe:return new r;case jVe:return OVe(t)}}var s9e=i9e,o9e=UA,a9e=Bc,l9e="[object Map]";function c9e(t){return a9e(t)&&o9e(t)==l9e}var u9e=c9e,d9e=u9e,f9e=Kw,Ij=AA,Rj=Ij&&Ij.isMap,h9e=Rj?f9e(Rj):d9e,p9e=h9e,m9e=UA,g9e=Bc,v9e="[object Set]";function y9e(t){return g9e(t)&&m9e(t)==v9e}var x9e=y9e,b9e=x9e,w9e=Kw,Nj=AA,Pj=Nj&&Nj.isSet,S9e=Pj?w9e(Pj):b9e,_9e=S9e,C9e=EA,T9e=YWe,E9e=C5,M9e=QWe,k9e=rVe,A9e=Ete,I9e=Ate,R9e=aVe,N9e=vVe,P9e=Ore,$9e=rse,D9e=UA,L9e=TVe,O9e=s9e,F9e=Rte,U9e=Ea,B9e=kA,z9e=p9e,W9e=qu,V9e=_9e,G9e=i2,H9e=Zw,j9e=1,X9e=2,q9e=4,ise="[object Arguments]",Y9e="[object Array]",K9e="[object Boolean]",Z9e="[object Date]",J9e="[object Error]",sse="[object Function]",Q9e="[object GeneratorFunction]",eGe="[object Map]",tGe="[object Number]",ose="[object Object]",nGe="[object RegExp]",rGe="[object Set]",iGe="[object String]",sGe="[object Symbol]",oGe="[object WeakMap]",aGe="[object ArrayBuffer]",lGe="[object DataView]",cGe="[object Float32Array]",uGe="[object Float64Array]",dGe="[object Int8Array]",fGe="[object Int16Array]",hGe="[object Int32Array]",pGe="[object Uint8Array]",mGe="[object Uint8ClampedArray]",gGe="[object Uint16Array]",vGe="[object Uint32Array]",Wr={};Wr[ise]=Wr[Y9e]=Wr[aGe]=Wr[lGe]=Wr[K9e]=Wr[Z9e]=Wr[cGe]=Wr[uGe]=Wr[dGe]=Wr[fGe]=Wr[hGe]=Wr[eGe]=Wr[tGe]=Wr[ose]=Wr[nGe]=Wr[rGe]=Wr[iGe]=Wr[sGe]=Wr[pGe]=Wr[mGe]=Wr[gGe]=Wr[vGe]=!0;Wr[J9e]=Wr[sse]=Wr[oGe]=!1;function JT(t,e,n,r,i,s){var o,a=e&j9e,l=e&X9e,c=e&q9e;if(n&&(o=i?n(t,r,i,s):n(t)),o!==void 0)return o;if(!W9e(t))return t;var u=U9e(t);if(u){if(o=L9e(t),!a)return I9e(t,o)}else{var d=D9e(t),f=d==sse||d==Q9e;if(B9e(t))return A9e(t,a);if(d==ose||d==ise||f&&!i){if(o=l||f?{}:F9e(t),!a)return l?N9e(t,k9e(o,t)):R9e(t,M9e(o,t))}else{if(!Wr[d])return i?t:{};o=O9e(t,d,a)}}s||(s=new C9e);var h=s.get(t);if(h)return h;s.set(t,o),V9e(t)?t.forEach(function(m){o.add(JT(m,e,n,m,t,s))}):z9e(t)&&t.forEach(function(m,g){o.set(g,JT(m,e,n,g,t,s))});var p=c?l?$9e:P9e:l?H9e:G9e,v=u?void 0:p(t);return T9e(v||t,function(m,g){v&&(g=m,m=t[g]),E9e(o,g,JT(m,e,n,g,t,s))}),o}var yGe=JT;function xGe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var bGe=xGe,wGe=Jw,SGe=bGe;function _Ge(t,e){return e.length<2?t:wGe(t,SGe(e,0,-1))}var CGe=_Ge,TGe=dy,EGe=Yte,MGe=CGe,kGe=fy;function AGe(t,e){return e=TGe(e,t),t=MGe(t,e),t==null||delete t[kGe(EGe(e))]}var IGe=AGe,RGe=w5;function NGe(t){return RGe(t)?void 0:t}var PGe=NGe,$Ge=PA,DGe=yGe,LGe=IGe,OGe=dy,FGe=uy,UGe=PGe,BGe=Nre,zGe=rse,WGe=1,VGe=2,GGe=4,HGe=BGe(function(t,e){var n={};if(t==null)return n;var r=!1;e=$Ge(e,function(s){return s=OGe(s,t),r||(r=s.length>1),s}),FGe(t,zGe(t),n),r&&(n=DGe(n,WGe|VGe|GGe,UGe));for(var i=e.length;i--;)LGe(n,e[i]);return n}),jGe=HGe;const ase=is(jGe);function Fu(){return Fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fu.apply(this,arguments)}var RL={dotSize:4,noteWidth:120,noteTextOffset:8,animate:!0},XGe=function(t){var e=typeof t;return N.isValidElement(t)||e==="string"||e==="function"||e==="object"},qGe=function(t){var e=typeof t;return e==="string"||e==="function"},zb=function(t){return t.type==="circle"},NL=function(t){return t.type==="dot"},Wb=function(t){return t.type==="rect"},YGe=function(t){var e=t.data,n=t.annotations,r=t.getPosition,i=t.getDimensions;return n.reduce(function(s,o){var a=o.offset||0;return[].concat(s,WWe(e,o.match).map(function(l){var c=r(l),u=i(l);return(zb(o)||Wb(o))&&(u.size=u.size+2*a,u.width=u.width+2*a,u.height=u.height+2*a),Fu({},ase(o,["match","offset"]),c,u,{size:o.size||u.size,datum:l})}))},[])},KGe=function(t,e,n,r){var i=Math.atan2(r-e,n-t);return l6e(zA(i))},lse=function(t){var e,n,r=t.x,i=t.y,s=t.noteX,o=t.noteY,a=t.noteWidth,l=a===void 0?RL.noteWidth:a,c=t.noteTextOffset,u=c===void 0?RL.noteTextOffset:c;if(Ej(s))e=r+s;else{if(s.abs===void 0)throw new Error("noteX should be either a number or an object containing an 'abs' property");e=s.abs}if(Ej(o))n=i+o;else{if(o.abs===void 0)throw new Error("noteY should be either a number or an object containing an 'abs' property");n=o.abs}var d=r,f=i,h=KGe(r,i,e,n);if(zb(t)){var p=Kp(Fl(h),t.size/2);d+=p.x,f+=p.y}if(Wb(t)){var v=Math.round((h+90)/45)%8;v===0&&(f-=t.height/2),v===1&&(d+=t.width/2,f-=t.height/2),v===2&&(d+=t.width/2),v===3&&(d+=t.width/2,f+=t.height/2),v===4&&(f+=t.height/2),v===5&&(d-=t.width/2,f+=t.height/2),v===6&&(d-=t.width/2),v===7&&(d-=t.width/2,f-=t.height/2)}var m=e,g=e;return(h+90)%360>180?(m-=l,g-=l):g+=l,{points:[[d,f],[e,n],[g,n]],text:[m,n-u],angle:h+90}},YU=function(t){var e=t.data,n=t.annotations,r=t.getPosition,i=t.getDimensions;return N.useMemo(function(){return YGe({data:e,annotations:n,getPosition:r,getDimensions:i})},[e,n,r,i])},ZGe=function(t){var e=t.annotations;return N.useMemo(function(){return e.map(function(n){return Fu({},n,{computed:lse(Fu({},n))})})},[e])},JGe=function(t){return N.useMemo(function(){return lse(t)},[t])},QGe=function(t){var e=t.datum,n=t.x,r=t.y,i=t.note,s=Rr(),o=Ys(),a=o.animate,l=o.config,c=Uc({x:n,y:r,config:l,immediate:!a});return typeof i=="function"?N.createElement(i,{x:n,y:r,datum:e}):L.jsxs(L.Fragment,{children:[s.annotations.text.outlineWidth>0&&L.jsx(nr.text,{x:c.x,y:c.y,style:Fu({},s.annotations.text,{strokeLinejoin:"round",strokeWidth:2*s.annotations.text.outlineWidth,stroke:s.annotations.text.outlineColor}),children:i}),L.jsx(nr.text,{x:c.x,y:c.y,style:ase(s.annotations.text,["outlineWidth","outlineColor"]),children:i})]})},$j=function(t){var e=t.points,n=t.isOutline,r=n!==void 0&&n,i=Rr(),s=N.useMemo(function(){var l=e[0];return e.slice(1).reduce(function(c,u){return c+" L"+u[0]+","+u[1]},"M"+l[0]+","+l[1])},[e]),o=Vre(s);if(r&&i.annotations.link.outlineWidth<=0)return null;var a=Fu({},i.annotations.link);return r&&(a.strokeLinecap="square",a.strokeWidth=i.annotations.link.strokeWidth+2*i.annotations.link.outlineWidth,a.stroke=i.annotations.link.outlineColor,a.opacity=i.annotations.link.outlineOpacity),L.jsx(nr.path,{fill:"none",d:o,style:a})},eHe=function(t){var e=t.x,n=t.y,r=t.size,i=Rr(),s=Ys(),o=s.animate,a=s.config,l=Uc({x:e,y:n,radius:r/2,config:a,immediate:!o});return L.jsxs(L.Fragment,{children:[i.annotations.outline.outlineWidth>0&&L.jsx(nr.circle,{cx:l.x,cy:l.y,r:l.radius,style:Fu({},i.annotations.outline,{fill:"none",strokeWidth:i.annotations.outline.strokeWidth+2*i.annotations.outline.outlineWidth,stroke:i.annotations.outline.outlineColor,opacity:i.annotations.outline.outlineOpacity})}),L.jsx(nr.circle,{cx:l.x,cy:l.y,r:l.radius,style:i.annotations.outline})]})},tHe=function(t){var e=t.x,n=t.y,r=t.size,i=r===void 0?RL.dotSize:r,s=Rr(),o=Ys(),a=o.animate,l=o.config,c=Uc({x:e,y:n,radius:i/2,config:l,immediate:!a});return L.jsxs(L.Fragment,{children:[s.annotations.outline.outlineWidth>0&&L.jsx(nr.circle,{cx:c.x,cy:c.y,r:c.radius,style:Fu({},s.annotations.outline,{fill:"none",strokeWidth:2*s.annotations.outline.outlineWidth,stroke:s.annotations.outline.outlineColor,opacity:s.annotations.outline.outlineOpacity})}),L.jsx(nr.circle,{cx:c.x,cy:c.y,r:c.radius,style:s.annotations.symbol})]})},nHe=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,s=t.borderRadius,o=s===void 0?6:s,a=Rr(),l=Ys(),c=l.animate,u=l.config,d=Uc({x:e-r/2,y:n-i/2,width:r,height:i,config:u,immediate:!c});return L.jsxs(L.Fragment,{children:[a.annotations.outline.outlineWidth>0&&L.jsx(nr.rect,{x:d.x,y:d.y,rx:o,ry:o,width:d.width,height:d.height,style:Fu({},a.annotations.outline,{fill:"none",strokeWidth:a.annotations.outline.strokeWidth+2*a.annotations.outline.outlineWidth,stroke:a.annotations.outline.outlineColor,opacity:a.annotations.outline.outlineOpacity})}),L.jsx(nr.rect,{x:d.x,y:d.y,rx:o,ry:o,width:d.width,height:d.height,style:a.annotations.outline})]})},cse=function(t){var e=t.datum,n=t.x,r=t.y,i=t.note,s=JGe(t);if(!XGe(i))throw new Error("note should be a valid react element");return L.jsxs(L.Fragment,{children:[L.jsx($j,{points:s.points,isOutline:!0}),zb(t)&&L.jsx(eHe,{x:n,y:r,size:t.size}),NL(t)&&L.jsx(tHe,{x:n,y:r,size:t.size}),Wb(t)&&L.jsx(nHe,{x:n,y:r,width:t.width,height:t.height,borderRadius:t.borderRadius}),L.jsx($j,{points:s.points}),L.jsx(QGe,{datum:e,x:s.text[0],y:s.text[1],note:i})]})},Dj=function(t,e){e.forEach(function(n,r){var i=n[0],s=n[1];r===0?t.moveTo(i,s):t.lineTo(i,s)})},rHe=function(t,e){var n=e.annotations,r=e.theme;n.length!==0&&(t.save(),n.forEach(function(i){if(!qGe(i.note))throw new Error("note is invalid for canvas implementation");r.annotations.link.outlineWidth>0&&(t.lineCap="square",t.strokeStyle=r.annotations.link.outlineColor,t.lineWidth=r.annotations.link.strokeWidth+2*r.annotations.link.outlineWidth,t.beginPath(),Dj(t,i.computed.points),t.stroke(),t.lineCap="butt"),zb(i)&&r.annotations.outline.outlineWidth>0&&(t.strokeStyle=r.annotations.outline.outlineColor,t.lineWidth=r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,t.beginPath(),t.arc(i.x,i.y,i.size/2,0,2*Math.PI),t.stroke()),NL(i)&&r.annotations.symbol.outlineWidth>0&&(t.strokeStyle=r.annotations.symbol.outlineColor,t.lineWidth=2*r.annotations.symbol.outlineWidth,t.beginPath(),t.arc(i.x,i.y,i.size/2,0,2*Math.PI),t.stroke()),Wb(i)&&r.annotations.outline.outlineWidth>0&&(t.strokeStyle=r.annotations.outline.outlineColor,t.lineWidth=r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,t.beginPath(),t.rect(i.x-i.width/2,i.y-i.height/2,i.width,i.height),t.stroke()),t.strokeStyle=r.annotations.link.stroke,t.lineWidth=r.annotations.link.strokeWidth,t.beginPath(),Dj(t,i.computed.points),t.stroke(),zb(i)&&(t.strokeStyle=r.annotations.outline.stroke,t.lineWidth=r.annotations.outline.strokeWidth,t.beginPath(),t.arc(i.x,i.y,i.size/2,0,2*Math.PI),t.stroke()),NL(i)&&(t.fillStyle=r.annotations.symbol.fill,t.beginPath(),t.arc(i.x,i.y,i.size/2,0,2*Math.PI),t.fill()),Wb(i)&&(t.strokeStyle=r.annotations.outline.stroke,t.lineWidth=r.annotations.outline.strokeWidth,t.beginPath(),t.rect(i.x-i.width/2,i.y-i.height/2,i.width,i.height),t.stroke()),typeof i.note=="function"?i.note(t,{datum:i.datum,x:i.computed.text[0],y:i.computed.text[1],theme:r}):(t.font=r.annotations.text.fontSize+"px "+r.annotations.text.fontFamily,t.textAlign="left",t.textBaseline="alphabetic",t.fillStyle=r.annotations.text.fill,t.strokeStyle=r.annotations.text.outlineColor,t.lineWidth=2*r.annotations.text.outlineWidth,r.annotations.text.outlineWidth>0&&(t.lineJoin="round",t.strokeText(i.note,i.computed.text[0],i.computed.text[1]),t.lineJoin="miter"),t.fillText(i.note,i.computed.text[0],i.computed.text[1]))}),t.restore())};function Ho(){return Ho=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ho.apply(this,arguments)}function iHe(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var Ws={layers:["grid","axes","cells","legends","annotations"],forceSquare:!1,xInnerPadding:0,xOuterPadding:0,yInnerPadding:0,yOuterPadding:0,sizeVariation:!1,opacity:1,activeOpacity:1,inactiveOpacity:.15,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",.8]]},enableGridX:!1,enableGridY:!1,enableLabels:!0,label:"formattedValue",labelTextColor:{from:"color",modifiers:[["darker",2]]},colors:{type:"sequential",scheme:"brown_blueGreen"},emptyColor:"#000000",legends:[],annotations:[],isInteractive:!0,hoverTarget:"rowColumn",tooltip:N.memo(function(t){var e=t.cell;return e.formattedValue===null?null:L.jsx(bA,{id:e.serieId+" - "+e.data.x,value:e.formattedValue,enableChip:!0,color:e.color})}),animate:!0,motionConfig:"gentle"},cr=Ho({},Ws,{axisTop:{},axisRight:null,axisBottom:null,axisLeft:{},borderRadius:0,cellComponent:"rect"});Ho({},Ws,{axisTop:{},axisRight:null,axisBottom:null,axisLeft:{},renderCell:"rect",pixelRatio:typeof window<"u"&&window.devicePixelRatio||1});var sHe=function(t){var e=t.width,n=t.height,r=t.rows,i=t.columns,s=e,o=n,a=0,l=0;if(t.forceSquare){var c=Math.max(e/i,0),u=Math.max(n/r,0),d=Math.min(c,u);a=(e-(s=d*i))/2,l=(n-(o=d*r))/2}return{offsetX:a,offsetY:l,width:s,height:o}},oHe=function(t){var e=t.data,n=t.width,r=t.height,i=t.xInnerPadding,s=t.xOuterPadding,o=t.yInnerPadding,a=t.yOuterPadding,l=t.forceSquare,c=new Set,u=[],d=[],f=[];e.forEach(function(A){u.push(A.id),A.data.forEach(function(k){c.add(k.x);var M=null;k.y!==void 0&&k.y!==null&&(d.push(k.y),M=k.y),f.push({id:A.id+"."+k.x,serieId:A.id,value:M,data:k})})});var h=Array.from(c),p=sHe({width:n,height:r,columns:h.length,rows:u.length,forceSquare:l}),v=p.width,m=p.height,g=p.offsetX,y=p.offsetY,x=kL(Ib().domain(h).range([0,v]).paddingOuter(s).paddingInner(i)),S=kL(Ib().domain(u).range([0,m]).paddingOuter(a).paddingInner(o)),_=x.bandwidth(),C=S.bandwidth(),T=f.map(function(A){return Ho({},A,{x:x(A.data.x)+_/2,y:S(A.serieId)+C/2,width:_,height:C})});return{width:v,height:m,offsetX:g,offsetY:y,xScale:x,yScale:S,minValue:Math.min.apply(Math,d),maxValue:Math.max.apply(Math,d),cells:T}},aHe=function(t,e,n){if(!t)return function(){return 1};var r=r2().domain(t.values?t.values:[e,n]).range(t.sizes);return function(i){return i===null?1:r(i)}},lHe=function(t){return{x:t.x,y:t.y}},cHe=function(t){return{size:Math.max(t.width,t.height),width:t.width,height:t.height}},uHe=function(t){var e=t.data,n=t.width,r=t.height,i=t.xInnerPadding,s=t.xOuterPadding,o=t.yInnerPadding,a=t.yOuterPadding,l=t.forceSquare;return N.useMemo(function(){return oHe({data:e,width:n,height:r,xInnerPadding:i,xOuterPadding:s,yInnerPadding:o,yOuterPadding:a,forceSquare:l})},[e,n,r,i,s,o,a,l])},dHe={cell:function(t,e){return t.id===e.id},row:function(t,e){return t.serieId===e.serieId},column:function(t,e){return t.data.x===e.data.x},rowColumn:function(t,e){return t.serieId===e.serieId||t.data.x===e.data.x}},fHe=function(t){var e,n,r,i=t.cells,s=t.minValue,o=t.maxValue,a=t.sizeVariation,l=t.colors,c=t.emptyColor,u=t.opacity,d=t.activeOpacity,f=t.inactiveOpacity,h=t.borderColor,p=t.label,v=t.labelTextColor,m=t.valueFormat,g=t.activeIds,y=N.useMemo(function(){return aHe(e,n,r)},[e=a,n=s,r=o]),x=N.useMemo(function(){return typeof l=="function"?null:gWe(l,{min:s,max:o})},[l,s,o]),S=N.useCallback(function(M){if(M.value!==null){if(typeof l=="function")return l(M);if(x!==null)return x(M.value)}return c},[l,x,c]),_=Rr(),C=Ac(h,_),T=Ac(v,_),A=o2(m),k=$d(p);return{cells:N.useMemo(function(){return i.map(function(M){var R=u;g.length>0&&(R=g.includes(M.id)?d:f);var P=y(M.value),O=Ho({},M,{width:M.width*P,height:M.height*P,formattedValue:M.value!==null?A(M.value):null,opacity:R});return O.label=k(O),O.color=S(O),O.borderColor=C(O),O.labelTextColor=T(O),O})},[i,y,S,C,T,A,k,g,u,d,f]),colorScale:x}},hHe=function(t){var e=t.data,n=t.valueFormat,r=t.width,i=t.height,s=t.xOuterPadding,o=s===void 0?Ws.xOuterPadding:s,a=t.xInnerPadding,l=a===void 0?Ws.xInnerPadding:a,c=t.yOuterPadding,u=c===void 0?Ws.yOuterPadding:c,d=t.yInnerPadding,f=d===void 0?Ws.yInnerPadding:d,h=t.forceSquare,p=h===void 0?Ws.forceSquare:h,v=t.sizeVariation,m=v===void 0?Ws.sizeVariation:v,g=t.colors,y=g===void 0?Ws.colors:g,x=t.emptyColor,S=x===void 0?Ws.emptyColor:x,_=t.opacity,C=_===void 0?Ws.opacity:_,T=t.activeOpacity,A=T===void 0?Ws.activeOpacity:T,k=t.inactiveOpacity,M=k===void 0?Ws.inactiveOpacity:k,R=t.borderColor,P=R===void 0?Ws.borderColor:R,O=t.label,$=O===void 0?Ws.label:O,U=t.labelTextColor,z=U===void 0?Ws.labelTextColor:U,X=t.hoverTarget,D=X===void 0?Ws.hoverTarget:X,F=N.useState(null),W=F[0],V=F[1],j=uHe({data:e,width:r,height:i,xOuterPadding:o,xInnerPadding:l,yOuterPadding:u,yInnerPadding:f,forceSquare:p}),J=j.width,Q=j.height,te=j.offsetX,re=j.offsetY,se=j.cells,fe=j.xScale,ae=j.yScale,ye=j.minValue,le=j.maxValue,H=N.useMemo(function(){if(!W)return[];var we=dHe[D];return se.filter(function(Ee){return we(Ee,W)}).map(function(Ee){return Ee.id})},[se,W,D]),Me=fHe({cells:se,minValue:ye,maxValue:le,sizeVariation:m,colors:y,emptyColor:S,opacity:C,activeOpacity:A,inactiveOpacity:M,borderColor:P,label:$,labelTextColor:z,valueFormat:n,activeIds:H});return{width:J,height:Q,offsetX:te,offsetY:re,cells:Me.cells,xScale:fe,yScale:ae,colorScale:Me.colorScale,activeCell:W,setActiveCell:V}},pHe=function(t,e){return YU({data:t,annotations:e,getPosition:lHe,getDimensions:cHe})},mHe=N.memo(function(t){var e=t.cell,n=t.borderWidth,r=t.borderRadius,i=t.animatedProps,s=t.onMouseEnter,o=t.onMouseMove,a=t.onMouseLeave,l=t.onClick,c=t.enableLabels,u=Rr(),d=N.useMemo(function(){return{onMouseEnter:s?s(e):void 0,onMouseMove:o?o(e):void 0,onMouseLeave:a?a(e):void 0,onClick:l?l(e):void 0}},[e,s,o,a,l]);return L.jsxs(nr.g,Ho({"data-testid":"cell."+e.id,style:{cursor:"pointer"},opacity:i.opacity},d,{transform:Gl([i.x,i.y,i.scale],function(f,h,p){return"translate("+f+", "+h+") scale("+p+")"}),children:[L.jsx(nr.rect,{transform:Gl([i.width,i.height],function(f,h){return"translate("+-.5*f+", "+-.5*h+")"}),fill:i.color,width:i.width,height:i.height,stroke:i.borderColor,strokeWidth:n,rx:r,ry:r},e.id),c&&L.jsx(nr.text,{textAnchor:"middle",dominantBaseline:"central",fill:i.labelTextColor,style:Ho({},u.labels.text,{fill:void 0,userSelect:"none"}),children:e.label})]}))}),gHe=N.memo(function(t){var e=t.cell,n=t.borderWidth,r=t.animatedProps,i=t.onMouseEnter,s=t.onMouseMove,o=t.onMouseLeave,a=t.onClick,l=t.enableLabels,c=Rr(),u=N.useMemo(function(){return{onMouseEnter:i?i(e):void 0,onMouseMove:s?s(e):void 0,onMouseLeave:o?o(e):void 0,onClick:a?a(e):void 0}},[e,i,s,o,a]);return L.jsxs(nr.g,Ho({"data-testid":"cell."+e.id,style:{cursor:"pointer"},opacity:r.opacity},u,{transform:Gl([r.x,r.y],function(d,f){return"translate("+d+", "+f+")"}),children:[L.jsx(nr.circle,{r:Gl([r.width,r.height],function(d,f){return Math.min(d,f)/2}),fill:r.color,fillOpacity:r.opacity,strokeWidth:n,stroke:r.borderColor}),l&&L.jsx(nr.text,{dominantBaseline:"central",textAnchor:"middle",fill:r.labelTextColor,style:Ho({},c.labels.text,{fill:void 0}),children:e.label})]}))}),vHe=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height,color:t.color,opacity:0,borderColor:t.borderColor,labelTextColor:t.labelTextColor,scale:0}},dP=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height,color:t.color,opacity:t.opacity,borderColor:t.borderColor,labelTextColor:t.labelTextColor,scale:1}},yHe=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height,color:t.color,opacity:0,borderColor:t.borderColor,labelTextColor:t.labelTextColor,scale:0}},xHe=function(t){var e,n=t.cells,r=t.cellComponent,i=t.borderRadius,s=t.borderWidth,o=t.isInteractive,a=t.setActiveCell,l=t.onMouseEnter,c=t.onMouseMove,u=t.onMouseLeave,d=t.onClick,f=t.tooltip,h=t.enableLabels,p=Ys(),v=p.animate,m=p.config,g=jm(n,{keys:function(k){return k.id},initial:dP,from:vHe,enter:dP,update:dP,leave:yHe,config:m,immediate:!v}),y=ry(),x=y.showTooltipFromEvent,S=y.hideTooltip,_=N.useMemo(function(){if(o)return function(k){return function(M){x(N.createElement(f,{cell:k}),M),a(k),l==null||l(k,M)}}},[o,x,f,a,l]),C=N.useMemo(function(){if(o)return function(k){return function(M){x(N.createElement(f,{cell:k}),M),c==null||c(k,M)}}},[o,x,f,c]),T=N.useMemo(function(){if(o)return function(k){return function(M){S(),a(null),u==null||u(k,M)}}},[o,S,a,u]),A=N.useMemo(function(){if(o)return function(k){return function(M){d==null||d(k,M)}}},[o,d]);return e=r==="rect"?mHe:r==="circle"?gHe:r,L.jsx(L.Fragment,{children:g(function(k,M){return N.createElement(e,{cell:M,borderRadius:i,borderWidth:s,animatedProps:k,enableLabels:h,onMouseEnter:_,onMouseMove:C,onMouseLeave:T,onClick:A})})})},bHe=function(t){var e=t.cells,n=t.annotations,r=pHe(e,n);return L.jsx(L.Fragment,{children:r.map(function(i,s){return L.jsx(cse,Ho({},i),s)})})},wHe=["isInteractive","animate","motionConfig","theme","renderWrapper"],SHe=function(t){var e=t.data,n=t.layers,r=n===void 0?cr.layers:n,i=t.valueFormat,s=t.width,o=t.height,a=t.margin,l=t.forceSquare,c=l===void 0?cr.forceSquare:l,u=t.xInnerPadding,d=u===void 0?cr.xInnerPadding:u,f=t.xOuterPadding,h=f===void 0?cr.xOuterPadding:f,p=t.yInnerPadding,v=p===void 0?cr.yInnerPadding:p,m=t.yOuterPadding,g=m===void 0?cr.yOuterPadding:m,y=t.sizeVariation,x=y===void 0?cr.sizeVariation:y,S=t.cellComponent,_=S===void 0?cr.cellComponent:S,C=t.opacity,T=C===void 0?cr.opacity:C,A=t.activeOpacity,k=A===void 0?cr.activeOpacity:A,M=t.inactiveOpacity,R=M===void 0?cr.inactiveOpacity:M,P=t.borderRadius,O=P===void 0?cr.borderRadius:P,$=t.borderWidth,U=$===void 0?cr.borderWidth:$,z=t.borderColor,X=z===void 0?cr.borderColor:z,D=t.enableGridX,F=D===void 0?cr.enableGridX:D,W=t.enableGridY,V=W===void 0?cr.enableGridY:W,j=t.axisTop,J=j===void 0?cr.axisTop:j,Q=t.axisRight,te=Q===void 0?cr.axisRight:Q,re=t.axisBottom,se=re===void 0?cr.axisBottom:re,fe=t.axisLeft,ae=fe===void 0?cr.axisLeft:fe,ye=t.enableLabels,le=ye===void 0?cr.enableLabels:ye,H=t.label,Me=H===void 0?cr.label:H,we=t.labelTextColor,Ee=we===void 0?cr.labelTextColor:we,me=t.colors,qe=me===void 0?cr.colors:me,ke=t.emptyColor,ee=ke===void 0?cr.emptyColor:ke,Y=t.legends,oe=Y===void 0?cr.legends:Y,xe=t.annotations,Se=xe===void 0?cr.annotations:xe,be=t.isInteractive,Re=be===void 0?cr.isInteractive:be,Ke=t.onMouseEnter,ze=t.onMouseMove,Pe=t.onMouseLeave,De=t.onClick,We=t.hoverTarget,gt=We===void 0?cr.hoverTarget:We,ct=t.tooltip,Ye=ct===void 0?cr.tooltip:ct,Xe=t.role,Le=t.ariaLabel,he=t.ariaLabelledBy,He=t.ariaDescribedBy,ot=s2(s,o,a),et=ot.margin,Ie=ot.innerWidth,Ce=ot.innerHeight,ut=ot.outerWidth,dt=ot.outerHeight,yt=hHe({data:e,valueFormat:i,width:Ie,height:Ce,forceSquare:c,xInnerPadding:d,xOuterPadding:h,yInnerPadding:v,yOuterPadding:g,sizeVariation:x,colors:qe,emptyColor:ee,opacity:T,activeOpacity:k,inactiveOpacity:R,borderColor:X,label:Me,labelTextColor:Ee,hoverTarget:gt}),vt=yt.width,zt=yt.height,It=yt.offsetX,Qt=yt.offsetY,$t=yt.xScale,mt=yt.yScale,Ht=yt.cells,pn=yt.colorScale,dn=yt.activeCell,_t=yt.setActiveCell,Dt=N.useMemo(function(){return Ho({},et,{top:et.top+Qt,left:et.left+It})},[et,It,Qt]),Nt={grid:null,axes:null,cells:null,legends:null,annotations:null};r.includes("grid")&&(Nt.grid=L.jsx(PU,{width:vt,height:zt,xScale:F?$t:null,yScale:V?mt:null},"grid")),r.includes("axes")&&(Nt.axes=L.jsx(NU,{xScale:$t,yScale:mt,width:vt,height:zt,top:J,right:te,bottom:se,left:ae},"axes")),r.includes("cells")&&(Nt.cells=L.jsx(N.Fragment,{children:L.jsx(xHe,{cells:Ht,cellComponent:_,borderRadius:O,borderWidth:U,isInteractive:Re,setActiveCell:_t,onMouseEnter:Ke,onMouseMove:ze,onMouseLeave:Pe,onClick:De,tooltip:Ye,enableLabels:le})},"cells")),r.includes("legends")&&pn!==null&&(Nt.legends=L.jsx(N.Fragment,{children:oe.map(function(Wt,Sn){return N.createElement(MWe,Ho({},Wt,{key:Sn,containerWidth:vt,containerHeight:zt,scale:pn}))})},"legends")),r.includes("annotations")&&Se.length>0&&(Nt.annotations=L.jsx(bHe,{cells:Ht,annotations:Se},"annotations"));var bt={cells:Ht,activeCell:dn,setActiveCell:_t};return L.jsx(a2,{width:ut,height:dt,margin:Object.assign({},Dt,{top:Dt.top,left:Dt.left}),role:Xe,ariaLabel:Le,ariaLabelledBy:he,ariaDescribedBy:He,children:r.map(function(Wt,Sn){var Z;return typeof Wt=="function"?L.jsx(N.Fragment,{children:N.createElement(Wt,bt)},Sn):(Z=Nt==null?void 0:Nt[Wt])!=null?Z:null})})},_He=function(t){var e=t.isInteractive,n=e===void 0?cr.isInteractive:e,r=t.animate,i=r===void 0?cr.animate:r,s=t.motionConfig,o=s===void 0?cr.motionConfig:s,a=t.theme,l=t.renderWrapper,c=iHe(t,wHe);return L.jsx(my,{animate:i,isInteractive:n,motionConfig:o,renderWrapper:l,theme:a,children:L.jsx(SHe,Ho({isInteractive:n},c))})},CHe=function(t){return L.jsx(gy,{children:function(e){var n=e.width,r=e.height;return L.jsx(_He,Ho({width:n,height:r},t))}})},KU={},THe=Vw;Object.defineProperty(KU,"__esModule",{value:!0});var XA=KU.default=void 0,EHe=THe(Gw()),MHe=L,kHe=(0,EHe.default)((0,MHe.jsx)("path",{d:"M16.48 2.52c3.27 1.55 5.61 4.72 5.97 8.48h1.5C23.44 4.84 18.29 0 12 0l-.66.03 3.81 3.81 1.33-1.32zm-6.25-.77c-.59-.59-1.54-.59-2.12 0L1.75 8.11c-.59.59-.59 1.54 0 2.12l12.02 12.02c.59.59 1.54.59 2.12 0l6.36-6.36c.59-.59.59-1.54 0-2.12L10.23 1.75zm4.6 19.44L2.81 9.17l6.36-6.36 12.02 12.02-6.36 6.36zm-7.31.29C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32z"}),"ScreenRotation");XA=KU.default=kHe;var ZU={},AHe=Vw;Object.defineProperty(ZU,"__esModule",{value:!0});var qA=ZU.default=void 0,IHe=AHe(Gw()),RHe=L,NHe=(0,IHe.default)((0,RHe.jsx)("path",{d:"M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z"}),"AspectRatio");qA=ZU.default=NHe;const PHe=()=>{const[t,e]=N.useState(null),[n,r]=N.useState("Game of Thrones"),[i,s]=N.useState([]),[o,a]=N.useState($He),[l,c]=N.useState(!1),u=(d,f)=>{const h=Object.keys(f.Tv_Show_Name).filter(m=>f.Tv_Show_Name[m]===d).map(Number);var p=[];h.forEach(m=>{var g={},y=[],x={},S=p.findIndex(_=>_.id===`Season ${f.seasonNumber[m]}`);S>-1?(x.x=`Ep. ${f.episodeNumber[m]}`,x.y=f.averageRating[m],y=p[S].data,y.push(x),p[S].data=y):(g.id=`Season ${f.seasonNumber[m]}`,x.x=`Ep. ${f.episodeNumber[m]}`,x.y=f.averageRating[m],y.push(x),g.data=y,p.push(g))});var v=!1;p.forEach(m=>{m.data.length>35&&(v=!0,console.log("Exited"))}),!v&&(p.sort((m,g)=>{const y=m.id.toUpperCase(),x=g.id.toUpperCase(),S=y.split(" "),_=x.split(" "),C=parseInt(S.slice(-1)[0]),T=parseInt(_.slice(-1)[0]);return C<T?-1:C>T?1:0}),p.forEach(m=>{m.data.sort((g,y)=>{const x=g.x.toUpperCase(),S=y.x.toUpperCase(),_=x.split(" "),C=S.split(" "),T=parseInt(_.slice(-1)[0]),A=parseInt(C.slice(-1)[0]);return T<A?-1:T>A?1:0})}),a(p))};return N.useEffect(()=>{(async()=>await OHe(LHe).then(d=>{const f=[];Array.from(new Set(Object.values(d.Tv_Show_Name))).forEach(h=>{const p={};p.title=h,f.push(p)}),e(d),f.sort((h,p)=>{const v=h.title.toUpperCase(),m=p.title.toUpperCase();return v<m?-1:v>m?1:0}),s(f)}))()},[]),L.jsx(L.Fragment,{children:i.length>0?L.jsxs(L.Fragment,{children:[L.jsx(Qn,{sx:{bgcolor:"white",width:250,m:"auto",borderRadius:"16px"},children:L.jsx(K_e,{open:l,onInputChange:(d,f)=>{f.length===0?l&&c(!1):l||c(!0)},onClose:()=>c(!1),id:"free-solo-2-demo",onChange:(d,f)=>r(f),options:i.map(d=>d.title),renderInput:d=>L.jsx(yMe,{...d,label:"Search input",InputProps:{...d.InputProps,type:"search"}})})}),L.jsx(Qn,{sx:{p:2,bgcolor:"black",width:250,m:"auto",borderRadius:"16px"},children:L.jsx(kc,{sx:{width:250,m:"auto",borderRadius:"16px"},variant:"contained",onClick:()=>{n&&u(n,t)},children:"Create Heat Map"})}),L.jsx(Qn,{sx:{height:75,color:"#ffffff",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"none",sm:"block"}},children:L.jsxs(En,{sx:{pt:2},variant:"h4",gutterBottom:!0,children:[n," Episode Ratings"]})}),L.jsx(Qn,{sx:{height:75,color:"#ffffff",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"block",sm:"none"}},children:L.jsxs(En,{sx:{pt:2},variant:"h4",gutterBottom:!0,children:["Please Rotate Phone ",L.jsx(XA,{})," or Enlarge Screen ",L.jsx(qA,{})]})}),L.jsx(Qn,{sx:{height:800,color:"black",bgcolor:"white",mt:5,display:{xs:"none",sm:"block"}},children:L.jsx(DHe,{data:o,seriesTitle:n})})]}):L.jsx(En,{children:"LOADING..."})})},$He=[{id:"Season 1",data:[{x:"Ep. 1",y:8.9},{x:"Ep. 2",y:8.6},{x:"Ep. 3",y:8.5},{x:"Ep. 4",y:8.6},{x:"Ep. 5",y:9},{x:"Ep. 6",y:9.1},{x:"Ep. 7",y:9.1},{x:"Ep. 8",y:8.9},{x:"Ep. 9",y:9.6},{x:"Ep. 10",y:9.4}]},{id:"Season 2",data:[{x:"Ep. 1",y:8.6},{x:"Ep. 2",y:8.4},{x:"Ep. 3",y:8.7},{x:"Ep. 4",y:8.6},{x:"Ep. 5",y:8.6},{x:"Ep. 6",y:8.9},{x:"Ep. 7",y:8.8},{x:"Ep. 8",y:8.6},{x:"Ep. 9",y:9.7},{x:"Ep. 10",y:9.3}]},{id:"Season 3",data:[{x:"Ep. 1",y:8.6},{x:"Ep. 2",y:8.5},{x:"Ep. 3",y:8.7},{x:"Ep. 4",y:9.5},{x:"Ep. 5",y:8.9},{x:"Ep. 6",y:8.7},{x:"Ep. 7",y:8.6},{x:"Ep. 8",y:8.9},{x:"Ep. 9",y:9.9},{x:"Ep. 10",y:9.1}]},{id:"Season 4",data:[{x:"Ep. 1",y:9},{x:"Ep. 2",y:9.7},{x:"Ep. 3",y:8.7},{x:"Ep. 4",y:8.7},{x:"Ep. 5",y:8.6},{x:"Ep. 6",y:9.7},{x:"Ep. 7",y:9},{x:"Ep. 8",y:9.7},{x:"Ep. 9",y:9.6},{x:"Ep. 10",y:9.6}]},{id:"Season 5",data:[{x:"Ep. 1",y:8.3},{x:"Ep. 2",y:8.3},{x:"Ep. 3",y:8.4},{x:"Ep. 4",y:8.5},{x:"Ep. 5",y:8.5},{x:"Ep. 6",y:7.9},{x:"Ep. 7",y:8.8},{x:"Ep. 8",y:9.8},{x:"Ep. 9",y:9.4},{x:"Ep. 10",y:9.1}]},{id:"Season 6",data:[{x:"Ep. 1",y:8.4},{x:"Ep. 2",y:9.3},{x:"Ep. 3",y:8.6},{x:"Ep. 4",y:9},{x:"Ep. 5",y:9.7},{x:"Ep. 6",y:8.3},{x:"Ep. 7",y:8.5},{x:"Ep. 8",y:8.3},{x:"Ep. 9",y:9.9},{x:"Ep. 10",y:9.9}]},{id:"Season 7",data:[{x:"Ep. 1",y:8.5},{x:"Ep. 2",y:8.8},{x:"Ep. 3",y:9.1},{x:"Ep. 4",y:9.7},{x:"Ep. 5",y:8.7},{x:"Ep. 6",y:9},{x:"Ep. 7",y:9.4}]},{id:"Season 8",data:[{x:"Ep. 1",y:7.6},{x:"Ep. 2",y:7.9},{x:"Ep. 3",y:7.5},{x:"Ep. 4",y:5.5},{x:"Ep. 5",y:6},{x:"Ep. 6",y:4}]}],DHe=({data:t,seriesTitle:e})=>L.jsx(CHe,{data:t,theme:{background:"black",text:{fontSize:20,fill:"#85d5f5"},legends:{title:{text:{fontSize:20}}}},margin:{top:75,right:90,bottom:75,left:150},valueFormat:">-.2s",axisTop:{tickSize:5,tickPadding:5,tickRotation:-90,legend:" ",legendPosition:"left",legendOffset:-55},borderRadius:15,xInnerPadding:.05,yOuterPadding:.05,yInnerPadding:.05,forceSquare:!0,borderColor:{from:"color",modifiers:[["darker","0.5"]]},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:" ",legendPosition:"middle",legendOffset:-72},colors:{type:"diverging",scheme:"red_yellow_green",divergeAt:.55,minValue:0,maxValue:10},emptyColor:"#555555",labelTextColor:{from:"color",modifiers:[["darker","50"]]},legends:[{anchor:"bottom",translateX:0,translateY:40,length:500,thickness:15,direction:"row",tickPosition:"after",tickSize:9,tickSpacing:6,tickOverlap:!1,tickFormat:" >-.2s",title:"Ratings",titleAlign:"start",titleOffset:5}]}),LHe="https://raw.githubusercontent.com/edwin-torres/ratings/main/episodes.json";async function OHe(t){return new Promise((e,n)=>{fetch(t).then(r=>r.json()).then(r=>e(r))})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const xy="160",wp={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Sp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},use=0,PL=1,dse=2,FHe=3,fse=0,YA=1,R1=2,fc=3,Uu=0,Qi=1,Ga=2,UHe=2,Dd=0,Qp=1,$L=2,DL=3,LL=4,hse=5,kf=100,pse=101,mse=102,OL=103,FL=104,gse=200,vse=201,yse=202,xse=203,wM=204,SM=205,bse=206,wse=207,Sse=208,_se=209,Cse=210,Tse=211,Ese=212,Mse=213,kse=214,Ase=0,Ise=1,Rse=2,Vb=3,Nse=4,Pse=5,$se=6,Dse=7,l2=0,Lse=1,Ose=2,Eu=0,Fse=1,Use=2,Bse=3,JU=4,zse=5,Wse=6,UL="attached",Vse="detached",KA=300,Bu=301,lh=302,Rv=303,Gb=304,by=306,Hb=1e3,go=1001,jb=1002,Fi=1003,_M=1004,BHe=1004,N1=1005,zHe=1005,Er=1006,QU=1007,WHe=1007,ch=1008,VHe=1008,Mu=1009,Gse=1010,Hse=1011,ZA=1012,eB=1013,kd=1014,Ms=1015,xo=1016,tB=1017,nB=1018,qf=1020,jse=1021,vo=1023,Xse=1024,qse=1025,Yf=1026,Tm=1027,rB=1028,iB=1029,Yse=1030,sB=1031,oB=1033,QT=33776,eE=33777,tE=33778,nE=33779,BL=35840,zL=35841,WL=35842,VL=35843,aB=36196,GL=37492,HL=37496,jL=37808,XL=37809,qL=37810,YL=37811,KL=37812,ZL=37813,JL=37814,QL=37815,eO=37816,tO=37817,nO=37818,rO=37819,iO=37820,sO=37821,rE=36492,oO=36494,aO=36495,Kse=36283,lO=36284,cO=36285,uO=36286,Zse=2200,Jse=2201,Qse=2202,Xb=2300,qb=2301,iE=2302,Op=2400,Fp=2401,Yb=2402,JA=2500,lB=2501,GHe=0,HHe=1,jHe=2,cB=3e3,Kf=3001,eoe=3200,uB=3201,Th=0,toe=1,Ha="",us="srgb",zu="srgb-linear",QA="display-p3",c2="display-p3-linear",Kb="linear",Vr="srgb",Zb="rec709",Jb="p3",XHe=0,_p=7680,qHe=7681,YHe=7682,KHe=7683,ZHe=34055,JHe=34056,QHe=5386,eje=512,tje=513,nje=514,rje=515,ije=516,sje=517,oje=518,dO=519,noe=512,roe=513,ioe=514,dB=515,soe=516,ooe=517,aoe=518,loe=519,Qb=35044,aje=35048,lje=35040,cje=35045,uje=35049,dje=35041,fje=35046,hje=35050,pje=35042,mje="100",fO="300 es",CM=1035,Cc=2e3,Nv=2001;class Yu{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const oo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Lj=1234567;const em=Math.PI/180,Pv=180/Math.PI;function Qa(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(oo[t&255]+oo[t>>8&255]+oo[t>>16&255]+oo[t>>24&255]+"-"+oo[e&255]+oo[e>>8&255]+"-"+oo[e>>16&15|64]+oo[e>>24&255]+"-"+oo[n&63|128]+oo[n>>8&255]+"-"+oo[n>>16&255]+oo[n>>24&255]+oo[r&255]+oo[r>>8&255]+oo[r>>16&255]+oo[r>>24&255]).toLowerCase()}function Ci(t,e,n){return Math.max(e,Math.min(n,t))}function fB(t,e){return(t%e+e)%e}function gje(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function vje(t,e,n){return t!==e?(n-t)/(e-t):0}function P1(t,e,n){return(1-n)*t+n*e}function yje(t,e,n,r){return P1(t,e,1-Math.exp(-n*r))}function xje(t,e=1){return e-Math.abs(fB(t,e*2)-e)}function bje(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function wje(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function Sje(t,e){return t+Math.floor(Math.random()*(e-t+1))}function _je(t,e){return t+Math.random()*(e-t)}function Cje(t){return t*(.5-Math.random())}function Tje(t){t!==void 0&&(Lj=t);let e=Lj+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Eje(t){return t*em}function Mje(t){return t*Pv}function hO(t){return(t&t-1)===0&&t!==0}function kje(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function TM(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Aje(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),f=o((e-r)/2),h=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":t.set(a*u,l*d,l*f,a*c);break;case"YZY":t.set(l*f,a*u,l*d,a*c);break;case"ZXZ":t.set(l*d,l*f,a*u,a*c);break;case"XZX":t.set(a*u,l*p,l*h,a*c);break;case"YXY":t.set(l*h,a*u,l*p,a*c);break;case"ZYZ":t.set(l*p,l*h,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ua(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Ln(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const coe={DEG2RAD:em,RAD2DEG:Pv,generateUUID:Qa,clamp:Ci,euclideanModulo:fB,mapLinear:gje,inverseLerp:vje,lerp:P1,damp:yje,pingpong:xje,smoothstep:bje,smootherstep:wje,randInt:Sje,randFloat:_je,randFloatSpread:Cje,seededRandom:Tje,degToRad:Eje,radToDeg:Mje,isPowerOfTwo:hO,ceilPowerOfTwo:kje,floorPowerOfTwo:TM,setQuaternionFromProperEuler:Aje,normalize:Ln,denormalize:ua};class lt{constructor(e=0,n=0){lt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ci(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Dn{constructor(e,n,r,i,s,o,a,l,c){Dn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c)}set(e,n,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],f=r[2],h=r[5],p=r[8],v=i[0],m=i[3],g=i[6],y=i[1],x=i[4],S=i[7],_=i[2],C=i[5],T=i[8];return s[0]=o*v+a*y+l*_,s[3]=o*m+a*x+l*C,s[6]=o*g+a*S+l*T,s[1]=c*v+u*y+d*_,s[4]=c*m+u*x+d*C,s[7]=c*g+u*S+d*T,s[2]=f*v+h*y+p*_,s[5]=f*m+h*x+p*C,s[8]=f*g+h*S+p*T,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,f=a*l-u*s,h=c*s-o*l,p=n*d+r*f+i*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/p;return e[0]=d*v,e[1]=(i*c-u*r)*v,e[2]=(a*r-i*o)*v,e[3]=f*v,e[4]=(u*n-i*l)*v,e[5]=(i*s-a*n)*v,e[6]=h*v,e[7]=(r*l-c*n)*v,e[8]=(o*n-r*s)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(fP.makeScale(e,n)),this}rotate(e){return this.premultiply(fP.makeRotation(-e)),this}translate(e,n){return this.premultiply(fP.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const fP=new Dn;function uoe(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const Ije={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function $0(t,e){return new Ije[t](e)}function ew(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function doe(){const t=ew("canvas");return t.style.display="block",t}const Oj={};function $1(t){t in Oj||(Oj[t]=!0,console.warn(t))}const Fj=new Dn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Uj=new Dn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),hC={[zu]:{transfer:Kb,primaries:Zb,toReference:t=>t,fromReference:t=>t},[us]:{transfer:Vr,primaries:Zb,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[c2]:{transfer:Kb,primaries:Jb,toReference:t=>t.applyMatrix3(Uj),fromReference:t=>t.applyMatrix3(Fj)},[QA]:{transfer:Vr,primaries:Jb,toReference:t=>t.convertSRGBToLinear().applyMatrix3(Uj),fromReference:t=>t.applyMatrix3(Fj).convertLinearToSRGB()}},Rje=new Set([zu,c2]),Tr={enabled:!0,_workingColorSpace:zu,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!Rje.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=hC[e].toReference,i=hC[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return hC[t].primaries},getTransfer:function(t){return t===Ha?Kb:hC[t].transfer}};function iv(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function hP(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Bg;class hB{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Bg===void 0&&(Bg=ew("canvas")),Bg.width=e.width,Bg.height=e.height;const r=Bg.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Bg}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=ew("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=iv(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(iv(n[r]/255)*255):n[r]=iv(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Nje=0;class Up{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Nje++}),this.uuid=Qa(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(pP(i[o].image)):s.push(pP(i[o]))}else s=pP(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function pP(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?hB.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Pje=0;class ci extends Yu{constructor(e=ci.DEFAULT_IMAGE,n=ci.DEFAULT_MAPPING,r=go,i=go,s=Er,o=ch,a=vo,l=Mu,c=ci.DEFAULT_ANISOTROPY,u=Ha){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Pje++}),this.uuid=Qa(),this.name="",this.source=new Up(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new lt(0,0),this.repeat=new lt(1,1),this.center=new lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Dn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:($1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Kf?us:Ha),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==KA)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Hb:e.x=e.x-Math.floor(e.x);break;case go:e.x=e.x<0?0:1;break;case jb:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Hb:e.y=e.y-Math.floor(e.y);break;case go:e.y=e.y<0?0:1;break;case jb:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return $1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===us?Kf:cB}set encoding(e){$1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Kf?us:Ha}}ci.DEFAULT_IMAGE=null;ci.DEFAULT_MAPPING=KA;ci.DEFAULT_ANISOTROPY=1;class er{constructor(e=0,n=0,r=0,i=1){er.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],h=l[5],p=l[9],v=l[2],m=l[6],g=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-v)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+v)<.1&&Math.abs(p+m)<.1&&Math.abs(c+h+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(c+1)/2,S=(h+1)/2,_=(g+1)/2,C=(u+f)/4,T=(d+v)/4,A=(p+m)/4;return x>S&&x>_?x<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(x),i=C/r,s=T/r):S>_?S<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(S),r=C/i,s=A/i):_<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(_),r=T/s,i=A/s),this.set(r,i,s,n),this}let y=Math.sqrt((m-p)*(m-p)+(d-v)*(d-v)+(f-u)*(f-u));return Math.abs(y)<.001&&(y=1),this.x=(m-p)/y,this.y=(d-v)/y,this.z=(f-u)/y,this.w=Math.acos((c+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class foe extends Yu{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new er(0,0,e,n),this.scissorTest=!1,this.viewport=new er(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&($1("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Kf?us:Ha),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Er,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new ci(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Up(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Hl extends foe{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class eI extends ci{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Fi,this.minFilter=Fi,this.wrapR=go,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $je extends Hl{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new eI(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class pB extends ci{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Fi,this.minFilter=Fi,this.wrapR=go,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Dje extends Hl{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new pB(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class Lje extends Hl{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class wo{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const f=s[o+0],h=s[o+1],p=s[o+2],v=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=f,e[n+1]=h,e[n+2]=p,e[n+3]=v;return}if(d!==v||l!==f||c!==h||u!==p){let m=1-a;const g=l*f+c*h+u*p+d*v,y=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){const _=Math.sqrt(x),C=Math.atan2(_,g*y);m=Math.sin(m*C)/_,a=Math.sin(a*C)/_}const S=a*y;if(l=l*m+f*S,c=c*m+h*S,u=u*m+p*S,d=d*m+v*S,m===1-a){const _=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=_,c*=_,u*=_,d*=_}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],f=s[o+1],h=s[o+2],p=s[o+3];return e[n]=a*p+u*d+l*h-c*f,e[n+1]=l*p+u*f+c*d-a*h,e[n+2]=c*p+u*h+a*f-l*d,e[n+3]=u*p-a*d-l*f-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),f=l(r/2),h=l(i/2),p=l(s/2);switch(o){case"XYZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"YXZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"ZXY":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"ZYX":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"YZX":this._x=f*u*d+c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d-f*h*p;break;case"XZY":this._x=f*u*d-c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],f=r+a+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(u-l)*h,this._y=(s-c)*h,this._z=(o-i)*h}else if(r>a&&r>d){const h=2*Math.sqrt(1+r-a-d);this._w=(u-l)/h,this._x=.25*h,this._y=(i+o)/h,this._z=(s+c)/h}else if(a>d){const h=2*Math.sqrt(1+a-r-d);this._w=(s-c)/h,this._x=(i+o)/h,this._y=.25*h,this._z=(l+u)/h}else{const h=2*Math.sqrt(1+d-r-a);this._w=(o-i)/h,this._x=(s+c)/h,this._y=(l+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ci(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const h=1-n;return this._w=h*o+n*this._w,this._x=h*r+n*this._x,this._y=h*i+n*this._y,this._z=h*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,f=Math.sin(n*u)/c;return this._w=o*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pe{constructor(e=0,n=0,r=0){pe.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(Bj.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(Bj.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*n-s*i),d=2*(s*r-o*n);return this.x=n+l*c+o*d-a*u,this.y=r+l*u+a*c-s*d,this.z=i+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return mP.copy(this).projectOnVector(e),this.sub(mP)}reflect(e){return this.sub(mP.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ci(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const mP=new pe,Bj=new wo;class ms{constructor(e=new pe(1/0,1/0,1/0),n=new pe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(ic.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(ic.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=ic.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,ic):ic.fromBufferAttribute(s,o),ic.applyMatrix4(e.matrixWorld),this.expandByPoint(ic);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),pC.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),pC.copy(r.boundingBox)),pC.applyMatrix4(e.matrixWorld),this.union(pC)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ic),ic.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Nx),mC.subVectors(this.max,Nx),zg.subVectors(e.a,Nx),Wg.subVectors(e.b,Nx),Vg.subVectors(e.c,Nx),pf.subVectors(Wg,zg),mf.subVectors(Vg,Wg),np.subVectors(zg,Vg);let n=[0,-pf.z,pf.y,0,-mf.z,mf.y,0,-np.z,np.y,pf.z,0,-pf.x,mf.z,0,-mf.x,np.z,0,-np.x,-pf.y,pf.x,0,-mf.y,mf.x,0,-np.y,np.x,0];return!gP(n,zg,Wg,Vg,mC)||(n=[1,0,0,0,1,0,0,0,1],!gP(n,zg,Wg,Vg,mC))?!1:(gC.crossVectors(pf,mf),n=[gC.x,gC.y,gC.z],gP(n,zg,Wg,Vg,mC))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ic).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ic).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ld[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ld[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ld[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ld[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ld[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ld[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ld[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ld[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ld),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ld=[new pe,new pe,new pe,new pe,new pe,new pe,new pe,new pe],ic=new pe,pC=new ms,zg=new pe,Wg=new pe,Vg=new pe,pf=new pe,mf=new pe,np=new pe,Nx=new pe,mC=new pe,gC=new pe,rp=new pe;function gP(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){rp.fromArray(t,s);const a=i.x*Math.abs(rp.x)+i.y*Math.abs(rp.y)+i.z*Math.abs(rp.z),l=e.dot(rp),c=n.dot(rp),u=r.dot(rp);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Oje=new ms,Px=new pe,vP=new pe;class gs{constructor(e=new pe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):Oje.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Px.subVectors(e,this.center);const n=Px.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Px,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(vP.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Px.copy(e.center).add(vP)),this.expandByPoint(Px.copy(e.center).sub(vP))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const cd=new pe,yP=new pe,vC=new pe,gf=new pe,xP=new pe,yC=new pe,bP=new pe;class Jm{constructor(e=new pe,n=new pe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,cd)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=cd.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(cd.copy(this.origin).addScaledVector(this.direction,n),cd.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){yP.copy(e).add(n).multiplyScalar(.5),vC.copy(n).sub(e).normalize(),gf.copy(this.origin).sub(yP);const s=e.distanceTo(n)*.5,o=-this.direction.dot(vC),a=gf.dot(this.direction),l=-gf.dot(vC),c=gf.lengthSq(),u=Math.abs(1-o*o);let d,f,h,p;if(u>0)if(d=o*l-a,f=o*a-l,p=s*u,d>=0)if(f>=-p)if(f<=p){const v=1/u;d*=v,f*=v,h=d*(d+o*f+2*a)+f*(o*d+f+2*l)+c}else f=s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*l)+c;else f<=-p?(d=Math.max(0,-(-o*s+a)),f=d>0?-s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c):f<=p?(d=0,f=Math.min(Math.max(-s,-l),s),h=f*(f+2*l)+c):(d=Math.max(0,-(o*s+a)),f=d>0?s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c);else f=o>0?-s:s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(yP).addScaledVector(vC,f),h}intersectSphere(e,n){cd.subVectors(e.center,this.origin);const r=cd.dot(this.direction),i=cd.dot(cd)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,cd)!==null}intersectTriangle(e,n,r,i,s){xP.subVectors(n,e),yC.subVectors(r,e),bP.crossVectors(xP,yC);let o=this.direction.dot(bP),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;gf.subVectors(this.origin,e);const l=a*this.direction.dot(yC.crossVectors(gf,yC));if(l<0)return null;const c=a*this.direction.dot(xP.cross(gf));if(c<0||l+c>o)return null;const u=-a*gf.dot(bP);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class wn{constructor(e,n,r,i,s,o,a,l,c,u,d,f,h,p,v,m){wn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c,u,d,f,h,p,v,m)}set(e,n,r,i,s,o,a,l,c,u,d,f,h,p,v,m){const g=this.elements;return g[0]=e,g[4]=n,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=f,g[3]=h,g[7]=p,g[11]=v,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new wn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Gg.setFromMatrixColumn(e,0).length(),s=1/Gg.setFromMatrixColumn(e,1).length(),o=1/Gg.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=o*u,h=o*d,p=a*u,v=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=h+p*c,n[5]=f-v*c,n[9]=-a*l,n[2]=v-f*c,n[6]=p+h*c,n[10]=o*l}else if(e.order==="YXZ"){const f=l*u,h=l*d,p=c*u,v=c*d;n[0]=f+v*a,n[4]=p*a-h,n[8]=o*c,n[1]=o*d,n[5]=o*u,n[9]=-a,n[2]=h*a-p,n[6]=v+f*a,n[10]=o*l}else if(e.order==="ZXY"){const f=l*u,h=l*d,p=c*u,v=c*d;n[0]=f-v*a,n[4]=-o*d,n[8]=p+h*a,n[1]=h+p*a,n[5]=o*u,n[9]=v-f*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const f=o*u,h=o*d,p=a*u,v=a*d;n[0]=l*u,n[4]=p*c-h,n[8]=f*c+v,n[1]=l*d,n[5]=v*c+f,n[9]=h*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const f=o*l,h=o*c,p=a*l,v=a*c;n[0]=l*u,n[4]=v-f*d,n[8]=p*d+h,n[1]=d,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=h*d+p,n[10]=f-v*d}else if(e.order==="XZY"){const f=o*l,h=o*c,p=a*l,v=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=f*d+v,n[5]=o*u,n[9]=h*d-p,n[2]=p*d-h,n[6]=a*u,n[10]=v*d+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Fje,e,Uje)}lookAt(e,n,r){const i=this.elements;return Oa.subVectors(e,n),Oa.lengthSq()===0&&(Oa.z=1),Oa.normalize(),vf.crossVectors(r,Oa),vf.lengthSq()===0&&(Math.abs(r.z)===1?Oa.x+=1e-4:Oa.z+=1e-4,Oa.normalize(),vf.crossVectors(r,Oa)),vf.normalize(),xC.crossVectors(Oa,vf),i[0]=vf.x,i[4]=xC.x,i[8]=Oa.x,i[1]=vf.y,i[5]=xC.y,i[9]=Oa.y,i[2]=vf.z,i[6]=xC.z,i[10]=Oa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],f=r[9],h=r[13],p=r[2],v=r[6],m=r[10],g=r[14],y=r[3],x=r[7],S=r[11],_=r[15],C=i[0],T=i[4],A=i[8],k=i[12],M=i[1],R=i[5],P=i[9],O=i[13],$=i[2],U=i[6],z=i[10],X=i[14],D=i[3],F=i[7],W=i[11],V=i[15];return s[0]=o*C+a*M+l*$+c*D,s[4]=o*T+a*R+l*U+c*F,s[8]=o*A+a*P+l*z+c*W,s[12]=o*k+a*O+l*X+c*V,s[1]=u*C+d*M+f*$+h*D,s[5]=u*T+d*R+f*U+h*F,s[9]=u*A+d*P+f*z+h*W,s[13]=u*k+d*O+f*X+h*V,s[2]=p*C+v*M+m*$+g*D,s[6]=p*T+v*R+m*U+g*F,s[10]=p*A+v*P+m*z+g*W,s[14]=p*k+v*O+m*X+g*V,s[3]=y*C+x*M+S*$+_*D,s[7]=y*T+x*R+S*U+_*F,s[11]=y*A+x*P+S*z+_*W,s[15]=y*k+x*O+S*X+_*V,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],h=e[14],p=e[3],v=e[7],m=e[11],g=e[15];return p*(+s*l*d-i*c*d-s*a*f+r*c*f+i*a*h-r*l*h)+v*(+n*l*h-n*c*f+s*o*f-i*o*h+i*c*u-s*l*u)+m*(+n*c*d-n*a*h-s*o*d+r*o*h+s*a*u-r*c*u)+g*(-i*a*u-n*l*d+n*a*f+i*o*d-r*o*f+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],v=e[13],m=e[14],g=e[15],y=d*m*c-v*f*c+v*l*h-a*m*h-d*l*g+a*f*g,x=p*f*c-u*m*c-p*l*h+o*m*h+u*l*g-o*f*g,S=u*v*c-p*d*c+p*a*h-o*v*h-u*a*g+o*d*g,_=p*d*l-u*v*l-p*a*f+o*v*f+u*a*m-o*d*m,C=n*y+r*x+i*S+s*_;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/C;return e[0]=y*T,e[1]=(v*f*s-d*m*s-v*i*h+r*m*h+d*i*g-r*f*g)*T,e[2]=(a*m*s-v*l*s+v*i*c-r*m*c-a*i*g+r*l*g)*T,e[3]=(d*l*s-a*f*s-d*i*c+r*f*c+a*i*h-r*l*h)*T,e[4]=x*T,e[5]=(u*m*s-p*f*s+p*i*h-n*m*h-u*i*g+n*f*g)*T,e[6]=(p*l*s-o*m*s-p*i*c+n*m*c+o*i*g-n*l*g)*T,e[7]=(o*f*s-u*l*s+u*i*c-n*f*c-o*i*h+n*l*h)*T,e[8]=S*T,e[9]=(p*d*s-u*v*s-p*r*h+n*v*h+u*r*g-n*d*g)*T,e[10]=(o*v*s-p*a*s+p*r*c-n*v*c-o*r*g+n*a*g)*T,e[11]=(u*a*s-o*d*s-u*r*c+n*d*c+o*r*h-n*a*h)*T,e[12]=_*T,e[13]=(u*v*i-p*d*i+p*r*f-n*v*f-u*r*m+n*d*m)*T,e[14]=(p*a*i-o*v*i-p*r*l+n*v*l+o*r*m-n*a*m)*T,e[15]=(o*d*i-u*a*i+u*r*l-n*d*l-o*r*f+n*a*f)*T,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,d=a+a,f=s*c,h=s*u,p=s*d,v=o*u,m=o*d,g=a*d,y=l*c,x=l*u,S=l*d,_=r.x,C=r.y,T=r.z;return i[0]=(1-(v+g))*_,i[1]=(h+S)*_,i[2]=(p-x)*_,i[3]=0,i[4]=(h-S)*C,i[5]=(1-(f+g))*C,i[6]=(m+y)*C,i[7]=0,i[8]=(p+x)*T,i[9]=(m-y)*T,i[10]=(1-(f+v))*T,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=Gg.set(i[0],i[1],i[2]).length();const o=Gg.set(i[4],i[5],i[6]).length(),a=Gg.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],sc.copy(this);const c=1/s,u=1/o,d=1/a;return sc.elements[0]*=c,sc.elements[1]*=c,sc.elements[2]*=c,sc.elements[4]*=u,sc.elements[5]*=u,sc.elements[6]*=u,sc.elements[8]*=d,sc.elements[9]*=d,sc.elements[10]*=d,n.setFromRotationMatrix(sc),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=Cc){const l=this.elements,c=2*s/(n-e),u=2*s/(r-i),d=(n+e)/(n-e),f=(r+i)/(r-i);let h,p;if(a===Cc)h=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===Nv)h=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=Cc){const l=this.elements,c=1/(n-e),u=1/(r-i),d=1/(o-s),f=(n+e)*c,h=(r+i)*u;let p,v;if(a===Cc)p=(o+s)*d,v=-2*d;else if(a===Nv)p=s*d,v=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=v,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Gg=new pe,sc=new wn,Fje=new pe(0,0,0),Uje=new pe(1,1,1),vf=new pe,xC=new pe,Oa=new pe,zj=new wn,Wj=new wo;class u2{constructor(e=0,n=0,r=0,i=u2.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],f=i[6],h=i[10];switch(n){case"XYZ":this._y=Math.asin(Ci(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ci(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ci(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ci(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Ci(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-Ci(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return zj.makeRotationFromQuaternion(e),this.setFromRotationMatrix(zj,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Wj.setFromEuler(this),this.setFromQuaternion(Wj,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}u2.DEFAULT_ORDER="XYZ";class tm{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Bje=0;const Vj=new pe,Hg=new wo,ud=new wn,bC=new pe,$x=new pe,zje=new pe,Wje=new wo,Gj=new pe(1,0,0),Hj=new pe(0,1,0),jj=new pe(0,0,1),Vje={type:"added"},Gje={type:"removed"};class yr extends Yu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Bje++}),this.uuid=Qa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yr.DEFAULT_UP.clone();const e=new pe,n=new u2,r=new wo,i=new pe(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new wn},normalMatrix:{value:new Dn}}),this.matrix=new wn,this.matrixWorld=new wn,this.matrixAutoUpdate=yr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new tm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Hg.setFromAxisAngle(e,n),this.quaternion.multiply(Hg),this}rotateOnWorldAxis(e,n){return Hg.setFromAxisAngle(e,n),this.quaternion.premultiply(Hg),this}rotateX(e){return this.rotateOnAxis(Gj,e)}rotateY(e){return this.rotateOnAxis(Hj,e)}rotateZ(e){return this.rotateOnAxis(jj,e)}translateOnAxis(e,n){return Vj.copy(e).applyQuaternion(this.quaternion),this.position.add(Vj.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Gj,e)}translateY(e){return this.translateOnAxis(Hj,e)}translateZ(e){return this.translateOnAxis(jj,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ud.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?bC.copy(e):bC.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),$x.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ud.lookAt($x,bC,this.up):ud.lookAt(bC,$x,this.up),this.quaternion.setFromRotationMatrix(ud),i&&(ud.extractRotation(i.matrixWorld),Hg.setFromRotationMatrix(ud),this.quaternion.premultiply(Hg.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Vje)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Gje)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ud.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ud.multiply(e.parent.matrixWorld)),e.applyMatrix4(ud),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($x,e,zje),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($x,Wje,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),f=o(e.skeletons),h=o(e.animations),p=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),f.length>0&&(r.skeletons=f),h.length>0&&(r.animations=h),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}yr.DEFAULT_UP=new pe(0,1,0);yr.DEFAULT_MATRIX_AUTO_UPDATE=!0;yr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const oc=new pe,dd=new pe,wP=new pe,fd=new pe,jg=new pe,Xg=new pe,Xj=new pe,SP=new pe,_P=new pe,CP=new pe;let wC=!1;class ca{constructor(e=new pe,n=new pe,r=new pe){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),oc.subVectors(e,n),i.cross(oc);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){oc.subVectors(i,n),dd.subVectors(r,n),wP.subVectors(e,n);const o=oc.dot(oc),a=oc.dot(dd),l=oc.dot(wP),c=dd.dot(dd),u=dd.dot(wP),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const f=1/d,h=(c*l-a*u)*f,p=(o*u-a*l)*f;return s.set(1-h-p,p,h)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,fd)===null?!1:fd.x>=0&&fd.y>=0&&fd.x+fd.y<=1}static getUV(e,n,r,i,s,o,a,l){return wC===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),wC=!0),this.getInterpolation(e,n,r,i,s,o,a,l)}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,fd)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,fd.x),l.addScaledVector(o,fd.y),l.addScaledVector(a,fd.z),l)}static isFrontFacing(e,n,r,i){return oc.subVectors(r,n),dd.subVectors(e,n),oc.cross(dd).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return oc.subVectors(this.c,this.b),dd.subVectors(this.a,this.b),oc.cross(dd).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ca.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return ca.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return wC===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),wC=!0),ca.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}getInterpolation(e,n,r,i,s){return ca.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return ca.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ca.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;jg.subVectors(i,r),Xg.subVectors(s,r),SP.subVectors(e,r);const l=jg.dot(SP),c=Xg.dot(SP);if(l<=0&&c<=0)return n.copy(r);_P.subVectors(e,i);const u=jg.dot(_P),d=Xg.dot(_P);if(u>=0&&d<=u)return n.copy(i);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(r).addScaledVector(jg,o);CP.subVectors(e,s);const h=jg.dot(CP),p=Xg.dot(CP);if(p>=0&&h<=p)return n.copy(s);const v=h*c-l*p;if(v<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(r).addScaledVector(Xg,a);const m=u*p-h*d;if(m<=0&&d-u>=0&&h-p>=0)return Xj.subVectors(s,i),a=(d-u)/(d-u+(h-p)),n.copy(i).addScaledVector(Xj,a);const g=1/(m+v+f);return o=v*g,a=f*g,n.copy(r).addScaledVector(jg,o).addScaledVector(Xg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const hoe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},yf={h:0,s:0,l:0},SC={h:0,s:0,l:0};function TP(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Bt{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=us){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Tr.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Tr.workingColorSpace){return this.r=e,this.g=n,this.b=r,Tr.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Tr.workingColorSpace){if(e=fB(e,1),n=Ci(n,0,1),r=Ci(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=TP(o,s,e+1/3),this.g=TP(o,s,e),this.b=TP(o,s,e-1/3)}return Tr.toWorkingColorSpace(this,i),this}setStyle(e,n=us){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=us){const r=hoe[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=iv(e.r),this.g=iv(e.g),this.b=iv(e.b),this}copyLinearToSRGB(e){return this.r=hP(e.r),this.g=hP(e.g),this.b=hP(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=us){return Tr.fromWorkingColorSpace(ao.copy(this),e),Math.round(Ci(ao.r*255,0,255))*65536+Math.round(Ci(ao.g*255,0,255))*256+Math.round(Ci(ao.b*255,0,255))}getHexString(e=us){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Tr.workingColorSpace){Tr.fromWorkingColorSpace(ao.copy(this),n);const r=ao.r,i=ao.g,s=ao.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Tr.workingColorSpace){return Tr.fromWorkingColorSpace(ao.copy(this),n),e.r=ao.r,e.g=ao.g,e.b=ao.b,e}getStyle(e=us){Tr.fromWorkingColorSpace(ao.copy(this),e);const n=ao.r,r=ao.g,i=ao.b;return e!==us?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(yf),this.setHSL(yf.h+e,yf.s+n,yf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(yf),e.getHSL(SC);const r=P1(yf.h,SC.h,n),i=P1(yf.s,SC.s,n),s=P1(yf.l,SC.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ao=new Bt;Bt.NAMES=hoe;let Hje=0;class Ks extends Yu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Hje++}),this.uuid=Qa(),this.name="",this.type="Material",this.blending=Qp,this.side=Uu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=wM,this.blendDst=SM,this.blendEquation=kf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Bt(0,0,0),this.blendAlpha=0,this.depthFunc=Vb,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=dO,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_p,this.stencilZFail=_p,this.stencilZPass=_p,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Qp&&(r.blending=this.blending),this.side!==Uu&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==wM&&(r.blendSrc=this.blendSrc),this.blendDst!==SM&&(r.blendDst=this.blendDst),this.blendEquation!==kf&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Vb&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==dO&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==_p&&(r.stencilFail=this.stencilFail),this.stencilZFail!==_p&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==_p&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Kd extends Ks{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=l2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const wd=jje();function jje(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function sa(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Ci(t,-65504,65504),wd.floatView[0]=t;const e=wd.uint32View[0],n=e>>23&511;return wd.baseTable[n]+((e&8388607)>>wd.shiftTable[n])}function r1(t){const e=t>>10;return wd.uint32View[0]=wd.mantissaTable[wd.offsetTable[e]+(t&1023)]+wd.exponentTable[e],wd.floatView[0]}const Bp={toHalfFloat:sa,fromHalfFloat:r1},ji=new pe,_C=new lt;class kr{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=Qb,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Ms,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)_C.fromBufferAttribute(this,n),_C.applyMatrix3(e),this.setXY(n,_C.x,_C.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)ji.fromBufferAttribute(this,n),ji.applyMatrix3(e),this.setXYZ(n,ji.x,ji.y,ji.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)ji.fromBufferAttribute(this,n),ji.applyMatrix4(e),this.setXYZ(n,ji.x,ji.y,ji.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ji.fromBufferAttribute(this,n),ji.applyNormalMatrix(e),this.setXYZ(n,ji.x,ji.y,ji.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ji.fromBufferAttribute(this,n),ji.transformDirection(e),this.setXYZ(n,ji.x,ji.y,ji.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=ua(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Ln(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=ua(n,this.array)),n}setX(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=ua(n,this.array)),n}setY(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=ua(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=ua(n,this.array)),n}setW(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array),i=Ln(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array),i=Ln(i,this.array),s=Ln(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Qb&&(e.usage=this.usage),e}}class Xje extends kr{constructor(e,n,r){super(new Int8Array(e),n,r)}}class qje extends kr{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class Yje extends kr{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class Kje extends kr{constructor(e,n,r){super(new Int16Array(e),n,r)}}class mB extends kr{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class Zje extends kr{constructor(e,n,r){super(new Int32Array(e),n,r)}}class gB extends kr{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Jje extends kr{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=r1(this.array[e*this.itemSize]);return this.normalized&&(n=ua(n,this.array)),n}setX(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize]=sa(n),this}getY(e){let n=r1(this.array[e*this.itemSize+1]);return this.normalized&&(n=ua(n,this.array)),n}setY(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize+1]=sa(n),this}getZ(e){let n=r1(this.array[e*this.itemSize+2]);return this.normalized&&(n=ua(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize+2]=sa(n),this}getW(e){let n=r1(this.array[e*this.itemSize+3]);return this.normalized&&(n=ua(n,this.array)),n}setW(e,n){return this.normalized&&(n=Ln(n,this.array)),this.array[e*this.itemSize+3]=sa(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array)),this.array[e+0]=sa(n),this.array[e+1]=sa(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array),i=Ln(i,this.array)),this.array[e+0]=sa(n),this.array[e+1]=sa(r),this.array[e+2]=sa(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array),i=Ln(i,this.array),s=Ln(s,this.array)),this.array[e+0]=sa(n),this.array[e+1]=sa(r),this.array[e+2]=sa(i),this.array[e+3]=sa(s),this}}class Yt extends kr{constructor(e,n,r){super(new Float32Array(e),n,r)}}class Qje extends kr{constructor(e,n,r){super(new Float64Array(e),n,r)}}let eXe=0;const vl=new wn,EP=new yr,qg=new pe,Fa=new ms,Dx=new ms,Cs=new pe;class $n extends Yu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:eXe++}),this.uuid=Qa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(uoe(e)?gB:mB)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Dn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return vl.makeRotationFromQuaternion(e),this.applyMatrix4(vl),this}rotateX(e){return vl.makeRotationX(e),this.applyMatrix4(vl),this}rotateY(e){return vl.makeRotationY(e),this.applyMatrix4(vl),this}rotateZ(e){return vl.makeRotationZ(e),this.applyMatrix4(vl),this}translate(e,n,r){return vl.makeTranslation(e,n,r),this.applyMatrix4(vl),this}scale(e,n,r){return vl.makeScale(e,n,r),this.applyMatrix4(vl),this}lookAt(e){return EP.lookAt(e),EP.updateMatrix(),this.applyMatrix4(EP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(qg).negate(),this.translate(qg.x,qg.y,qg.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Yt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ms);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new pe(-1/0,-1/0,-1/0),new pe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];Fa.setFromBufferAttribute(s),this.morphTargetsRelative?(Cs.addVectors(this.boundingBox.min,Fa.min),this.boundingBox.expandByPoint(Cs),Cs.addVectors(this.boundingBox.max,Fa.max),this.boundingBox.expandByPoint(Cs)):(this.boundingBox.expandByPoint(Fa.min),this.boundingBox.expandByPoint(Fa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gs);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new pe,1/0);return}if(e){const r=this.boundingSphere.center;if(Fa.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Dx.setFromBufferAttribute(a),this.morphTargetsRelative?(Cs.addVectors(Fa.min,Dx.min),Fa.expandByPoint(Cs),Cs.addVectors(Fa.max,Dx.max),Fa.expandByPoint(Cs)):(Fa.expandByPoint(Dx.min),Fa.expandByPoint(Dx.max))}Fa.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Cs.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Cs));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Cs.fromBufferAttribute(a,c),l&&(qg.fromBufferAttribute(e,c),Cs.add(qg)),i=Math.max(i,r.distanceToSquared(Cs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,o=n.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new kr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let M=0;M<a;M++)c[M]=new pe,u[M]=new pe;const d=new pe,f=new pe,h=new pe,p=new lt,v=new lt,m=new lt,g=new pe,y=new pe;function x(M,R,P){d.fromArray(i,M*3),f.fromArray(i,R*3),h.fromArray(i,P*3),p.fromArray(o,M*2),v.fromArray(o,R*2),m.fromArray(o,P*2),f.sub(d),h.sub(d),v.sub(p),m.sub(p);const O=1/(v.x*m.y-m.x*v.y);isFinite(O)&&(g.copy(f).multiplyScalar(m.y).addScaledVector(h,-v.y).multiplyScalar(O),y.copy(h).multiplyScalar(v.x).addScaledVector(f,-m.x).multiplyScalar(O),c[M].add(g),c[R].add(g),c[P].add(g),u[M].add(y),u[R].add(y),u[P].add(y))}let S=this.groups;S.length===0&&(S=[{start:0,count:r.length}]);for(let M=0,R=S.length;M<R;++M){const P=S[M],O=P.start,$=P.count;for(let U=O,z=O+$;U<z;U+=3)x(r[U+0],r[U+1],r[U+2])}const _=new pe,C=new pe,T=new pe,A=new pe;function k(M){T.fromArray(s,M*3),A.copy(T);const R=c[M];_.copy(R),_.sub(T.multiplyScalar(T.dot(R))).normalize(),C.crossVectors(A,R);const O=C.dot(u[M])<0?-1:1;l[M*4]=_.x,l[M*4+1]=_.y,l[M*4+2]=_.z,l[M*4+3]=O}for(let M=0,R=S.length;M<R;++M){const P=S[M],O=P.start,$=P.count;for(let U=O,z=O+$;U<z;U+=3)k(r[U+0]),k(r[U+1]),k(r[U+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new kr(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let f=0,h=r.count;f<h;f++)r.setXYZ(f,0,0,0);const i=new pe,s=new pe,o=new pe,a=new pe,l=new pe,c=new pe,u=new pe,d=new pe;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),v=e.getX(f+1),m=e.getX(f+2);i.fromBufferAttribute(n,p),s.fromBufferAttribute(n,v),o.fromBufferAttribute(n,m),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,p),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,m),a.add(u),l.add(u),c.add(u),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(m,c.x,c.y,c.z)}else for(let f=0,h=n.count;f<h;f+=3)i.fromBufferAttribute(n,f+0),s.fromBufferAttribute(n,f+1),o.fromBufferAttribute(n,f+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Cs.fromBufferAttribute(e,n),Cs.normalize(),e.setXYZ(n,Cs.x,Cs.y,Cs.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let h=0,p=0;for(let v=0,m=l.length;v<m;v++){a.isInterleavedBufferAttribute?h=l[v]*a.data.stride+a.offset:h=l[v]*u;for(let g=0;g<u;g++)f[p++]=c[h++]}return new kr(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new $n,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=c[u],h=e(f,r);l.push(h)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d];u.push(h.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,h=d.length;f<h;f++)u.push(d[f].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const qj=new wn,ip=new Jm,CC=new gs,Yj=new pe,Yg=new pe,Kg=new pe,Zg=new pe,MP=new pe,TC=new pe,EC=new lt,MC=new lt,kC=new lt,Kj=new pe,Zj=new pe,Jj=new pe,AC=new pe,IC=new pe;class ai extends yr{constructor(e=new $n,n=new Kd){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){TC.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(MP.fromBufferAttribute(d,e),o?TC.addScaledVector(MP,u):TC.addScaledVector(MP.sub(n),u))}n.add(TC)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),CC.copy(r.boundingSphere),CC.applyMatrix4(s),ip.copy(e.ray).recast(e.near),!(CC.containsPoint(ip.origin)===!1&&(ip.intersectSphere(CC,Yj)===null||ip.origin.distanceToSquared(Yj)>(e.far-e.near)**2))&&(qj.copy(s).invert(),ip.copy(e.ray).applyMatrix4(qj),!(r.boundingBox!==null&&ip.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,ip)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,f=s.groups,h=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,v=f.length;p<v;p++){const m=f[p],g=o[m.materialIndex],y=Math.max(m.start,h.start),x=Math.min(a.count,Math.min(m.start+m.count,h.start+h.count));for(let S=y,_=x;S<_;S+=3){const C=a.getX(S),T=a.getX(S+1),A=a.getX(S+2);i=RC(this,g,e,r,c,u,d,C,T,A),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=m.materialIndex,n.push(i))}}else{const p=Math.max(0,h.start),v=Math.min(a.count,h.start+h.count);for(let m=p,g=v;m<g;m+=3){const y=a.getX(m),x=a.getX(m+1),S=a.getX(m+2);i=RC(this,o,e,r,c,u,d,y,x,S),i&&(i.faceIndex=Math.floor(m/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,v=f.length;p<v;p++){const m=f[p],g=o[m.materialIndex],y=Math.max(m.start,h.start),x=Math.min(l.count,Math.min(m.start+m.count,h.start+h.count));for(let S=y,_=x;S<_;S+=3){const C=S,T=S+1,A=S+2;i=RC(this,g,e,r,c,u,d,C,T,A),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=m.materialIndex,n.push(i))}}else{const p=Math.max(0,h.start),v=Math.min(l.count,h.start+h.count);for(let m=p,g=v;m<g;m+=3){const y=m,x=m+1,S=m+2;i=RC(this,o,e,r,c,u,d,y,x,S),i&&(i.faceIndex=Math.floor(m/3),n.push(i))}}}}function tXe(t,e,n,r,i,s,o,a){let l;if(e.side===Qi?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Uu,a),l===null)return null;IC.copy(a),IC.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(IC);return c<n.near||c>n.far?null:{distance:c,point:IC.clone(),object:t}}function RC(t,e,n,r,i,s,o,a,l,c){t.getVertexPosition(a,Yg),t.getVertexPosition(l,Kg),t.getVertexPosition(c,Zg);const u=tXe(t,e,n,r,Yg,Kg,Zg,AC);if(u){i&&(EC.fromBufferAttribute(i,a),MC.fromBufferAttribute(i,l),kC.fromBufferAttribute(i,c),u.uv=ca.getInterpolation(AC,Yg,Kg,Zg,EC,MC,kC,new lt)),s&&(EC.fromBufferAttribute(s,a),MC.fromBufferAttribute(s,l),kC.fromBufferAttribute(s,c),u.uv1=ca.getInterpolation(AC,Yg,Kg,Zg,EC,MC,kC,new lt),u.uv2=u.uv1),o&&(Kj.fromBufferAttribute(o,a),Zj.fromBufferAttribute(o,l),Jj.fromBufferAttribute(o,c),u.normal=ca.getInterpolation(AC,Yg,Kg,Zg,Kj,Zj,Jj,new pe),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new pe,materialIndex:0};ca.getNormal(Yg,Kg,Zg,d.normal),u.face=d}return u}class Qm extends $n{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,r,n,e,o,s,0),p("z","y","x",1,-1,r,n,-e,o,s,1),p("x","z","y",1,1,e,r,n,i,o,2),p("x","z","y",1,-1,e,r,-n,i,o,3),p("x","y","z",1,-1,e,n,r,i,s,4),p("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Yt(c,3)),this.setAttribute("normal",new Yt(u,3)),this.setAttribute("uv",new Yt(d,2));function p(v,m,g,y,x,S,_,C,T,A,k){const M=S/T,R=_/A,P=S/2,O=_/2,$=C/2,U=T+1,z=A+1;let X=0,D=0;const F=new pe;for(let W=0;W<z;W++){const V=W*R-O;for(let j=0;j<U;j++){const J=j*M-P;F[v]=J*y,F[m]=V*x,F[g]=$,c.push(F.x,F.y,F.z),F[v]=0,F[m]=0,F[g]=C>0?1:-1,u.push(F.x,F.y,F.z),d.push(j/T),d.push(1-W/A),X+=1}}for(let W=0;W<A;W++)for(let V=0;V<T;V++){const j=f+V+U*W,J=f+V+U*(W+1),Q=f+(V+1)+U*(W+1),te=f+(V+1)+U*W;l.push(j,J,te),l.push(J,Q,te),D+=6}a.addGroup(h,D,k),h+=D,f+=X}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qm(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function $v(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Do(t){const e={};for(let n=0;n<t.length;n++){const r=$v(t[n]);for(const i in r)e[i]=r[i]}return e}function nXe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function poe(t){return t.getRenderTarget()===null?t.outputColorSpace:Tr.workingColorSpace}const tw={clone:$v,merge:Do};var rXe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,iXe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class jl extends Ks{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=rXe,this.fragmentShader=iXe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=$v(e.uniforms),this.uniformsGroups=nXe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class d2 extends yr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new wn,this.projectionMatrix=new wn,this.projectionMatrixInverse=new wn,this.coordinateSystem=Cc}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let Ti=class extends d2{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Pv*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(em*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Pv*2*Math.atan(Math.tan(em*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(em*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const Jg=-90,Qg=1;class moe extends yr{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ti(Jg,Qg,e,n);i.layers=this.layers,this.add(i);const s=new Ti(Jg,Qg,e,n);s.layers=this.layers,this.add(s);const o=new Ti(Jg,Qg,e,n);o.layers=this.layers,this.add(o);const a=new Ti(Jg,Qg,e,n);a.layers=this.layers,this.add(a);const l=new Ti(Jg,Qg,e,n);l.layers=this.layers,this.add(l);const c=new Ti(Jg,Qg,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,l]=n;for(const c of n)this.remove(c);if(e===Cc)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Nv)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,o),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(d,f,h),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class f2 extends ci{constructor(e,n,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:Bu,super(e,n,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class vB extends Hl{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&($1("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Kf?us:Ha),this.texture=new f2(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Er}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Qm(5,5,5),s=new jl({name:"CubemapFromEquirect",uniforms:$v(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Qi,blending:Dd});s.uniforms.tEquirect.value=n;const o=new ai(i,s),a=n.minFilter;return n.minFilter===ch&&(n.minFilter=Er),new moe(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const kP=new pe,sXe=new pe,oXe=new Dn;class vd{constructor(e=new pe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=kP.subVectors(r,n).cross(sXe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(kP),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||oXe.getNormalMatrix(e),i=this.coplanarPoint(kP).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const sp=new gs,NC=new pe;class h2{constructor(e=new vd,n=new vd,r=new vd,i=new vd,s=new vd,o=new vd){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Cc){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],f=i[7],h=i[8],p=i[9],v=i[10],m=i[11],g=i[12],y=i[13],x=i[14],S=i[15];if(r[0].setComponents(l-s,f-c,m-h,S-g).normalize(),r[1].setComponents(l+s,f+c,m+h,S+g).normalize(),r[2].setComponents(l+o,f+u,m+p,S+y).normalize(),r[3].setComponents(l-o,f-u,m-p,S-y).normalize(),r[4].setComponents(l-a,f-d,m-v,S-x).normalize(),n===Cc)r[5].setComponents(l+a,f+d,m+v,S+x).normalize();else if(n===Nv)r[5].setComponents(a,d,v,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),sp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),sp.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(sp)}intersectsSprite(e){return sp.center.set(0,0,0),sp.radius=.7071067811865476,sp.applyMatrix4(e.matrixWorld),this.intersectsSphere(sp)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(NC.x=i.normal.x>0?e.max.x:e.min.x,NC.y=i.normal.y>0?e.max.y:e.min.y,NC.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(NC)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function goe(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function aXe(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,u){const d=c.array,f=c.usage,h=d.byteLength,p=t.createBuffer();t.bindBuffer(u,p),t.bufferData(u,d,f),c.onUploadCallback();let v;if(d instanceof Float32Array)v=t.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)v=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=t.UNSIGNED_SHORT;else if(d instanceof Int16Array)v=t.SHORT;else if(d instanceof Uint32Array)v=t.UNSIGNED_INT;else if(d instanceof Int32Array)v=t.INT;else if(d instanceof Int8Array)v=t.BYTE;else if(d instanceof Uint8Array)v=t.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)v=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:p,type:v,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:h}}function s(c,u,d){const f=u.array,h=u._updateRange,p=u.updateRanges;if(t.bindBuffer(d,c),h.count===-1&&p.length===0&&t.bufferSubData(d,0,f),p.length!==0){for(let v=0,m=p.length;v<m;v++){const g=p[v];n?t.bufferSubData(d,g.start*f.BYTES_PER_ELEMENT,f,g.start,g.count):t.bufferSubData(d,g.start*f.BYTES_PER_ELEMENT,f.subarray(g.start,g.start+g.count))}u.clearUpdateRanges()}h.count!==-1&&(n?t.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f,h.offset,h.count):t.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f.subarray(h.offset,h.offset+h.count)),h.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(t.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const f=r.get(c);(!f||f.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);if(d===void 0)r.set(c,i(c,u));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(d.buffer,c,u),d.version=c.version}}return{get:o,remove:a,update:l}}class Eh extends $n{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,f=n/l,h=[],p=[],v=[],m=[];for(let g=0;g<u;g++){const y=g*f-o;for(let x=0;x<c;x++){const S=x*d-s;p.push(S,-y,0),v.push(0,0,1),m.push(x/a),m.push(1-g/l)}}for(let g=0;g<l;g++)for(let y=0;y<a;y++){const x=y+c*g,S=y+c*(g+1),_=y+1+c*(g+1),C=y+1+c*g;h.push(x,S,C),h.push(S,_,C)}this.setIndex(h),this.setAttribute("position",new Yt(p,3)),this.setAttribute("normal",new Yt(v,3)),this.setAttribute("uv",new Yt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eh(e.width,e.height,e.widthSegments,e.heightSegments)}}var lXe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,cXe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,uXe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,dXe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,fXe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,hXe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,pXe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,mXe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,gXe=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,vXe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,yXe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,xXe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bXe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,wXe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,SXe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,_Xe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,CXe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,TXe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,EXe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,MXe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,kXe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,AXe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,IXe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,RXe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,NXe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,PXe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,$Xe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,DXe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,LXe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,OXe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,FXe="gl_FragColor = linearToOutputTexel( gl_FragColor );",UXe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,BXe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,zXe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,WXe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,VXe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,GXe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,HXe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,jXe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,XXe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,qXe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,YXe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,KXe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,ZXe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,JXe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,QXe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,eqe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,tqe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,nqe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,rqe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,iqe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sqe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,oqe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,aqe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lqe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,cqe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,uqe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,dqe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,fqe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hqe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,pqe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,mqe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,gqe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,vqe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,yqe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,xqe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,bqe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,wqe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Sqe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,_qe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Cqe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Tqe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Eqe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Mqe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kqe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Aqe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Iqe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Rqe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Nqe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Pqe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,$qe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Dqe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Lqe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Oqe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Fqe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Uqe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Bqe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,zqe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Wqe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Vqe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Gqe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Hqe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,jqe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Xqe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,qqe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Yqe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Kqe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Zqe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Jqe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Qqe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,eYe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,tYe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,nYe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,rYe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,iYe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sYe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,oYe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const aYe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,lYe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cYe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,uYe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dYe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fYe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hYe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,pYe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,mYe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,gYe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vYe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,yYe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xYe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,bYe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wYe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,SYe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_Ye=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CYe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TYe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,EYe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MYe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,kYe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,AYe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IYe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RYe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,NYe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PYe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$Ye=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DYe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,LYe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,OYe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FYe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,UYe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,BYe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Pn={alphahash_fragment:lXe,alphahash_pars_fragment:cXe,alphamap_fragment:uXe,alphamap_pars_fragment:dXe,alphatest_fragment:fXe,alphatest_pars_fragment:hXe,aomap_fragment:pXe,aomap_pars_fragment:mXe,batching_pars_vertex:gXe,batching_vertex:vXe,begin_vertex:yXe,beginnormal_vertex:xXe,bsdfs:bXe,iridescence_fragment:wXe,bumpmap_pars_fragment:SXe,clipping_planes_fragment:_Xe,clipping_planes_pars_fragment:CXe,clipping_planes_pars_vertex:TXe,clipping_planes_vertex:EXe,color_fragment:MXe,color_pars_fragment:kXe,color_pars_vertex:AXe,color_vertex:IXe,common:RXe,cube_uv_reflection_fragment:NXe,defaultnormal_vertex:PXe,displacementmap_pars_vertex:$Xe,displacementmap_vertex:DXe,emissivemap_fragment:LXe,emissivemap_pars_fragment:OXe,colorspace_fragment:FXe,colorspace_pars_fragment:UXe,envmap_fragment:BXe,envmap_common_pars_fragment:zXe,envmap_pars_fragment:WXe,envmap_pars_vertex:VXe,envmap_physical_pars_fragment:tqe,envmap_vertex:GXe,fog_vertex:HXe,fog_pars_vertex:jXe,fog_fragment:XXe,fog_pars_fragment:qXe,gradientmap_pars_fragment:YXe,lightmap_fragment:KXe,lightmap_pars_fragment:ZXe,lights_lambert_fragment:JXe,lights_lambert_pars_fragment:QXe,lights_pars_begin:eqe,lights_toon_fragment:nqe,lights_toon_pars_fragment:rqe,lights_phong_fragment:iqe,lights_phong_pars_fragment:sqe,lights_physical_fragment:oqe,lights_physical_pars_fragment:aqe,lights_fragment_begin:lqe,lights_fragment_maps:cqe,lights_fragment_end:uqe,logdepthbuf_fragment:dqe,logdepthbuf_pars_fragment:fqe,logdepthbuf_pars_vertex:hqe,logdepthbuf_vertex:pqe,map_fragment:mqe,map_pars_fragment:gqe,map_particle_fragment:vqe,map_particle_pars_fragment:yqe,metalnessmap_fragment:xqe,metalnessmap_pars_fragment:bqe,morphcolor_vertex:wqe,morphnormal_vertex:Sqe,morphtarget_pars_vertex:_qe,morphtarget_vertex:Cqe,normal_fragment_begin:Tqe,normal_fragment_maps:Eqe,normal_pars_fragment:Mqe,normal_pars_vertex:kqe,normal_vertex:Aqe,normalmap_pars_fragment:Iqe,clearcoat_normal_fragment_begin:Rqe,clearcoat_normal_fragment_maps:Nqe,clearcoat_pars_fragment:Pqe,iridescence_pars_fragment:$qe,opaque_fragment:Dqe,packing:Lqe,premultiplied_alpha_fragment:Oqe,project_vertex:Fqe,dithering_fragment:Uqe,dithering_pars_fragment:Bqe,roughnessmap_fragment:zqe,roughnessmap_pars_fragment:Wqe,shadowmap_pars_fragment:Vqe,shadowmap_pars_vertex:Gqe,shadowmap_vertex:Hqe,shadowmask_pars_fragment:jqe,skinbase_vertex:Xqe,skinning_pars_vertex:qqe,skinning_vertex:Yqe,skinnormal_vertex:Kqe,specularmap_fragment:Zqe,specularmap_pars_fragment:Jqe,tonemapping_fragment:Qqe,tonemapping_pars_fragment:eYe,transmission_fragment:tYe,transmission_pars_fragment:nYe,uv_pars_fragment:rYe,uv_pars_vertex:iYe,uv_vertex:sYe,worldpos_vertex:oYe,background_vert:aYe,background_frag:lYe,backgroundCube_vert:cYe,backgroundCube_frag:uYe,cube_vert:dYe,cube_frag:fYe,depth_vert:hYe,depth_frag:pYe,distanceRGBA_vert:mYe,distanceRGBA_frag:gYe,equirect_vert:vYe,equirect_frag:yYe,linedashed_vert:xYe,linedashed_frag:bYe,meshbasic_vert:wYe,meshbasic_frag:SYe,meshlambert_vert:_Ye,meshlambert_frag:CYe,meshmatcap_vert:TYe,meshmatcap_frag:EYe,meshnormal_vert:MYe,meshnormal_frag:kYe,meshphong_vert:AYe,meshphong_frag:IYe,meshphysical_vert:RYe,meshphysical_frag:NYe,meshtoon_vert:PYe,meshtoon_frag:$Ye,points_vert:DYe,points_frag:LYe,shadow_vert:OYe,shadow_frag:FYe,sprite_vert:UYe,sprite_frag:BYe},Mt={common:{diffuse:{value:new Bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Dn},alphaMap:{value:null},alphaMapTransform:{value:new Dn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Dn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Dn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Dn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Dn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Dn},normalScale:{value:new lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Dn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Dn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Dn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Dn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Dn},alphaTest:{value:0},uvTransform:{value:new Dn}},sprite:{diffuse:{value:new Bt(16777215)},opacity:{value:1},center:{value:new lt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Dn},alphaMap:{value:null},alphaMapTransform:{value:new Dn},alphaTest:{value:0}}},gc={basic:{uniforms:Do([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.fog]),vertexShader:Pn.meshbasic_vert,fragmentShader:Pn.meshbasic_frag},lambert:{uniforms:Do([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,Mt.lights,{emissive:{value:new Bt(0)}}]),vertexShader:Pn.meshlambert_vert,fragmentShader:Pn.meshlambert_frag},phong:{uniforms:Do([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,Mt.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:Pn.meshphong_vert,fragmentShader:Pn.meshphong_frag},standard:{uniforms:Do([Mt.common,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.roughnessmap,Mt.metalnessmap,Mt.fog,Mt.lights,{emissive:{value:new Bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Pn.meshphysical_vert,fragmentShader:Pn.meshphysical_frag},toon:{uniforms:Do([Mt.common,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.gradientmap,Mt.fog,Mt.lights,{emissive:{value:new Bt(0)}}]),vertexShader:Pn.meshtoon_vert,fragmentShader:Pn.meshtoon_frag},matcap:{uniforms:Do([Mt.common,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,{matcap:{value:null}}]),vertexShader:Pn.meshmatcap_vert,fragmentShader:Pn.meshmatcap_frag},points:{uniforms:Do([Mt.points,Mt.fog]),vertexShader:Pn.points_vert,fragmentShader:Pn.points_frag},dashed:{uniforms:Do([Mt.common,Mt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Pn.linedashed_vert,fragmentShader:Pn.linedashed_frag},depth:{uniforms:Do([Mt.common,Mt.displacementmap]),vertexShader:Pn.depth_vert,fragmentShader:Pn.depth_frag},normal:{uniforms:Do([Mt.common,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,{opacity:{value:1}}]),vertexShader:Pn.meshnormal_vert,fragmentShader:Pn.meshnormal_frag},sprite:{uniforms:Do([Mt.sprite,Mt.fog]),vertexShader:Pn.sprite_vert,fragmentShader:Pn.sprite_frag},background:{uniforms:{uvTransform:{value:new Dn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Pn.background_vert,fragmentShader:Pn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Pn.backgroundCube_vert,fragmentShader:Pn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Pn.cube_vert,fragmentShader:Pn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Pn.equirect_vert,fragmentShader:Pn.equirect_frag},distanceRGBA:{uniforms:Do([Mt.common,Mt.displacementmap,{referencePosition:{value:new pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Pn.distanceRGBA_vert,fragmentShader:Pn.distanceRGBA_frag},shadow:{uniforms:Do([Mt.lights,Mt.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:Pn.shadow_vert,fragmentShader:Pn.shadow_frag}};gc.physical={uniforms:Do([gc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Dn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Dn},clearcoatNormalScale:{value:new lt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Dn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Dn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Dn},sheen:{value:0},sheenColor:{value:new Bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Dn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Dn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Dn},transmissionSamplerSize:{value:new lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Dn},attenuationDistance:{value:0},attenuationColor:{value:new Bt(0)},specularColor:{value:new Bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Dn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Dn},anisotropyVector:{value:new lt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Dn}}]),vertexShader:Pn.meshphysical_vert,fragmentShader:Pn.meshphysical_frag};const PC={r:0,b:0,g:0};function zYe(t,e,n,r,i,s,o){const a=new Bt(0);let l=s===!0?0:1,c,u,d=null,f=0,h=null;function p(m,g){let y=!1,x=g.isScene===!0?g.background:null;x&&x.isTexture&&(x=(g.backgroundBlurriness>0?n:e).get(x)),x===null?v(a,l):x&&x.isColor&&(v(x,1),y=!0);const S=t.xr.getEnvironmentBlendMode();S==="additive"?r.buffers.color.setClear(0,0,0,1,o):S==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||y)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),x&&(x.isCubeTexture||x.mapping===by)?(u===void 0&&(u=new ai(new Qm(1,1,1),new jl({name:"BackgroundCubeMaterial",uniforms:$v(gc.backgroundCube.uniforms),vertexShader:gc.backgroundCube.vertexShader,fragmentShader:gc.backgroundCube.fragmentShader,side:Qi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(_,C,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=Tr.getTransfer(x.colorSpace)!==Vr,(d!==x||f!==x.version||h!==t.toneMapping)&&(u.material.needsUpdate=!0,d=x,f=x.version,h=t.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new ai(new Eh(2,2),new jl({name:"BackgroundMaterial",uniforms:$v(gc.background.uniforms),vertexShader:gc.background.vertexShader,fragmentShader:gc.background.fragmentShader,side:Uu,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=Tr.getTransfer(x.colorSpace)!==Vr,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(d!==x||f!==x.version||h!==t.toneMapping)&&(c.material.needsUpdate=!0,d=x,f=x.version,h=t.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null))}function v(m,g){m.getRGB(PC,poe(t)),r.buffers.color.setClear(PC.r,PC.g,PC.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(m,g=1){a.set(m),l=g,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,v(a,l)},render:p}}function WYe(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=m(null);let c=l,u=!1;function d($,U,z,X,D){let F=!1;if(o){const W=v(X,z,U);c!==W&&(c=W,h(c.object)),F=g($,X,z,D),F&&y($,X,z,D)}else{const W=U.wireframe===!0;(c.geometry!==X.id||c.program!==z.id||c.wireframe!==W)&&(c.geometry=X.id,c.program=z.id,c.wireframe=W,F=!0)}D!==null&&n.update(D,t.ELEMENT_ARRAY_BUFFER),(F||u)&&(u=!1,A($,U,z,X),D!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(D).buffer))}function f(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function h($){return r.isWebGL2?t.bindVertexArray($):s.bindVertexArrayOES($)}function p($){return r.isWebGL2?t.deleteVertexArray($):s.deleteVertexArrayOES($)}function v($,U,z){const X=z.wireframe===!0;let D=a[$.id];D===void 0&&(D={},a[$.id]=D);let F=D[U.id];F===void 0&&(F={},D[U.id]=F);let W=F[X];return W===void 0&&(W=m(f()),F[X]=W),W}function m($){const U=[],z=[],X=[];for(let D=0;D<i;D++)U[D]=0,z[D]=0,X[D]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:z,attributeDivisors:X,object:$,attributes:{},index:null}}function g($,U,z,X){const D=c.attributes,F=U.attributes;let W=0;const V=z.getAttributes();for(const j in V)if(V[j].location>=0){const Q=D[j];let te=F[j];if(te===void 0&&(j==="instanceMatrix"&&$.instanceMatrix&&(te=$.instanceMatrix),j==="instanceColor"&&$.instanceColor&&(te=$.instanceColor)),Q===void 0||Q.attribute!==te||te&&Q.data!==te.data)return!0;W++}return c.attributesNum!==W||c.index!==X}function y($,U,z,X){const D={},F=U.attributes;let W=0;const V=z.getAttributes();for(const j in V)if(V[j].location>=0){let Q=F[j];Q===void 0&&(j==="instanceMatrix"&&$.instanceMatrix&&(Q=$.instanceMatrix),j==="instanceColor"&&$.instanceColor&&(Q=$.instanceColor));const te={};te.attribute=Q,Q&&Q.data&&(te.data=Q.data),D[j]=te,W++}c.attributes=D,c.attributesNum=W,c.index=X}function x(){const $=c.newAttributes;for(let U=0,z=$.length;U<z;U++)$[U]=0}function S($){_($,0)}function _($,U){const z=c.newAttributes,X=c.enabledAttributes,D=c.attributeDivisors;z[$]=1,X[$]===0&&(t.enableVertexAttribArray($),X[$]=1),D[$]!==U&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"]($,U),D[$]=U)}function C(){const $=c.newAttributes,U=c.enabledAttributes;for(let z=0,X=U.length;z<X;z++)U[z]!==$[z]&&(t.disableVertexAttribArray(z),U[z]=0)}function T($,U,z,X,D,F,W){W===!0?t.vertexAttribIPointer($,U,z,D,F):t.vertexAttribPointer($,U,z,X,D,F)}function A($,U,z,X){if(r.isWebGL2===!1&&($.isInstancedMesh||X.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const D=X.attributes,F=z.getAttributes(),W=U.defaultAttributeValues;for(const V in F){const j=F[V];if(j.location>=0){let J=D[V];if(J===void 0&&(V==="instanceMatrix"&&$.instanceMatrix&&(J=$.instanceMatrix),V==="instanceColor"&&$.instanceColor&&(J=$.instanceColor)),J!==void 0){const Q=J.normalized,te=J.itemSize,re=n.get(J);if(re===void 0)continue;const se=re.buffer,fe=re.type,ae=re.bytesPerElement,ye=r.isWebGL2===!0&&(fe===t.INT||fe===t.UNSIGNED_INT||J.gpuType===eB);if(J.isInterleavedBufferAttribute){const le=J.data,H=le.stride,Me=J.offset;if(le.isInstancedInterleavedBuffer){for(let we=0;we<j.locationSize;we++)_(j.location+we,le.meshPerAttribute);$.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let we=0;we<j.locationSize;we++)S(j.location+we);t.bindBuffer(t.ARRAY_BUFFER,se);for(let we=0;we<j.locationSize;we++)T(j.location+we,te/j.locationSize,fe,Q,H*ae,(Me+te/j.locationSize*we)*ae,ye)}else{if(J.isInstancedBufferAttribute){for(let le=0;le<j.locationSize;le++)_(j.location+le,J.meshPerAttribute);$.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let le=0;le<j.locationSize;le++)S(j.location+le);t.bindBuffer(t.ARRAY_BUFFER,se);for(let le=0;le<j.locationSize;le++)T(j.location+le,te/j.locationSize,fe,Q,te*ae,te/j.locationSize*le*ae,ye)}}else if(W!==void 0){const Q=W[V];if(Q!==void 0)switch(Q.length){case 2:t.vertexAttrib2fv(j.location,Q);break;case 3:t.vertexAttrib3fv(j.location,Q);break;case 4:t.vertexAttrib4fv(j.location,Q);break;default:t.vertexAttrib1fv(j.location,Q)}}}}C()}function k(){P();for(const $ in a){const U=a[$];for(const z in U){const X=U[z];for(const D in X)p(X[D].object),delete X[D];delete U[z]}delete a[$]}}function M($){if(a[$.id]===void 0)return;const U=a[$.id];for(const z in U){const X=U[z];for(const D in X)p(X[D].object),delete X[D];delete U[z]}delete a[$.id]}function R($){for(const U in a){const z=a[U];if(z[$.id]===void 0)continue;const X=z[$.id];for(const D in X)p(X[D].object),delete X[D];delete z[$.id]}}function P(){O(),u=!0,c!==l&&(c=l,h(c.object))}function O(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:P,resetDefaultState:O,dispose:k,releaseStatesOfGeometry:M,releaseStatesOfProgram:R,initAttributes:x,enableAttribute:S,disableUnusedAttributes:C}}function VYe(t,e,n,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,d){t.drawArrays(s,u,d),n.update(d,s,1)}function l(u,d,f){if(f===0)return;let h,p;if(i)h=t,p="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[p](s,u,d,f),n.update(d,s,f)}function c(u,d,f){if(f===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let p=0;p<f;p++)this.render(u[p],d[p]);else{h.multiDrawArraysWEBGL(s,u,0,d,0,f);let p=0;for(let v=0;v<f;v++)p+=d[v];n.update(p,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function GYe(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(T){if(T==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return T==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),v=t.getParameter(t.MAX_VERTEX_ATTRIBS),m=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),y=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),x=f>0,S=o||e.has("OES_texture_float"),_=x&&S,C=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:v,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:S,floatVertexTextures:_,maxSamples:C}}function HYe(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new vd,a=new Dn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const h=d.length!==0||f||r!==0||i;return i=f,r=d.length,h},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){n=u(d,f,0)},this.setState=function(d,f,h){const p=d.clippingPlanes,v=d.clipIntersection,m=d.clipShadows,g=t.get(d);if(!i||p===null||p.length===0||s&&!m)s?u(null):c();else{const y=s?0:r,x=y*4;let S=g.clippingState||null;l.value=S,S=u(p,f,x,h);for(let _=0;_!==x;++_)S[_]=n[_];g.clippingState=S,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,f,h,p){const v=d!==null?d.length:0;let m=null;if(v!==0){if(m=l.value,p!==!0||m===null){const g=h+v*4,y=f.matrixWorldInverse;a.getNormalMatrix(y),(m===null||m.length<g)&&(m=new Float32Array(g));for(let x=0,S=h;x!==v;++x,S+=4)o.copy(d[x]).applyMatrix4(y,a),o.normal.toArray(m,S),m[S+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,m}}function jYe(t){let e=new WeakMap;function n(o,a){return a===Rv?o.mapping=Bu:a===Gb&&(o.mapping=lh),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===Rv||a===Gb)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new vB(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Ad extends d2{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const D0=4,Qj=[.125,.215,.35,.446,.526,.582],Ep=20,AP=new Ad,eX=new Bt;let IP=null,RP=0,NP=0;const Cp=(1+Math.sqrt(5))/2,e0=1/Cp,tX=[new pe(1,1,1),new pe(-1,1,1),new pe(1,1,-1),new pe(-1,1,-1),new pe(0,Cp,e0),new pe(0,Cp,-e0),new pe(e0,0,Cp),new pe(-e0,0,Cp),new pe(Cp,e0,0),new pe(-Cp,e0,0)];class pO{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){IP=this._renderer.getRenderTarget(),RP=this._renderer.getActiveCubeFace(),NP=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=iX(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=rX(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(IP,RP,NP),e.scissorTest=!1,$C(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Bu||e.mapping===lh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),IP=this._renderer.getRenderTarget(),RP=this._renderer.getActiveCubeFace(),NP=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Er,minFilter:Er,generateMipmaps:!1,type:xo,format:vo,colorSpace:zu,depthBuffer:!1},i=nX(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=nX(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=XYe(s)),this._blurMaterial=qYe(s,e,n)}return i}_compileMaterial(e){const n=new ai(this._lodPlanes[0],e);this._renderer.compile(n,AP)}_sceneToCubeUV(e,n,r,i){const a=new Ti(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(eX),u.toneMapping=Eu,u.autoClear=!1;const h=new Kd({name:"PMREM.Background",side:Qi,depthWrite:!1,depthTest:!1}),p=new ai(new Qm,h);let v=!1;const m=e.background;m?m.isColor&&(h.color.copy(m),e.background=null,v=!0):(h.color.copy(eX),v=!0);for(let g=0;g<6;g++){const y=g%3;y===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):y===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const x=this._cubeSize;$C(i,y*x,g>2?x:0,x,x),u.setRenderTarget(i),v&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=m}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Bu||e.mapping===lh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=iX()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=rX());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new ai(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;$C(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,AP)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=tX[(i-1)%tX.length];this._blur(e,i-1,i,s,o)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new ai(this._lodPlanes[i],c),f=c.uniforms,h=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*Ep-1),v=s/p,m=isFinite(s)?1+Math.floor(u*v):Ep;m>Ep&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Ep}`);const g=[];let y=0;for(let T=0;T<Ep;++T){const A=T/v,k=Math.exp(-A*A/2);g.push(k),T===0?y+=k:T<m&&(y+=2*k)}for(let T=0;T<g.length;T++)g[T]=g[T]/y;f.envMap.value=e.texture,f.samples.value=m,f.weights.value=g,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:x}=this;f.dTheta.value=p,f.mipInt.value=x-r;const S=this._sizeLods[i],_=3*S*(i>x-D0?i-x+D0:0),C=4*(this._cubeSize-S);$C(n,_,C,3*S,2*S),l.setRenderTarget(n),l.render(d,AP)}}function XYe(t){const e=[],n=[],r=[];let i=t;const s=t-D0+1+Qj.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-D0?l=Qj[o-t+D0-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],h=6,p=6,v=3,m=2,g=1,y=new Float32Array(v*p*h),x=new Float32Array(m*p*h),S=new Float32Array(g*p*h);for(let C=0;C<h;C++){const T=C%3*2/3-1,A=C>2?0:-1,k=[T,A,0,T+2/3,A,0,T+2/3,A+1,0,T,A,0,T+2/3,A+1,0,T,A+1,0];y.set(k,v*p*C),x.set(f,m*p*C);const M=[C,C,C,C,C,C];S.set(M,g*p*C)}const _=new $n;_.setAttribute("position",new kr(y,v)),_.setAttribute("uv",new kr(x,m)),_.setAttribute("faceIndex",new kr(S,g)),e.push(_),i>D0&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function nX(t,e,n){const r=new Hl(t,e,n);return r.texture.mapping=by,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function $C(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function qYe(t,e,n){const r=new Float32Array(Ep),i=new pe(0,1,0);return new jl({name:"SphericalGaussianBlur",defines:{n:Ep,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:yB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Dd,depthTest:!1,depthWrite:!1})}function rX(){return new jl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:yB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Dd,depthTest:!1,depthWrite:!1})}function iX(){return new jl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:yB(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Dd,depthTest:!1,depthWrite:!1})}function yB(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function YYe(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Rv||l===Gb,u=l===Bu||l===lh;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return n===null&&(n=new pO(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&i(d)){n===null&&(n=new pO(t));const f=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",s),f.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function KYe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function ZYe(t,e,n,r){const i={},s=new WeakMap;function o(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);for(const p in f.morphAttributes){const v=f.morphAttributes[p];for(let m=0,g=v.length;m<g;m++)e.remove(v[m])}f.removeEventListener("dispose",o),delete i[f.id];const h=s.get(f);h&&(e.remove(h),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function a(d,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,n.memory.geometries++),f}function l(d){const f=d.attributes;for(const p in f)e.update(f[p],t.ARRAY_BUFFER);const h=d.morphAttributes;for(const p in h){const v=h[p];for(let m=0,g=v.length;m<g;m++)e.update(v[m],t.ARRAY_BUFFER)}}function c(d){const f=[],h=d.index,p=d.attributes.position;let v=0;if(h!==null){const y=h.array;v=h.version;for(let x=0,S=y.length;x<S;x+=3){const _=y[x+0],C=y[x+1],T=y[x+2];f.push(_,C,C,T,T,_)}}else if(p!==void 0){const y=p.array;v=p.version;for(let x=0,S=y.length/3-1;x<S;x+=3){const _=x+0,C=x+1,T=x+2;f.push(_,C,C,T,T,_)}}else return;const m=new(uoe(f)?gB:mB)(f,1);m.version=v;const g=s.get(d);g&&e.remove(g),s.set(d,m)}function u(d){const f=s.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function JYe(t,e,n,r){const i=r.isWebGL2;let s;function o(h){s=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function u(h,p){t.drawElements(s,p,a,h*l),n.update(p,s,1)}function d(h,p,v){if(v===0)return;let m,g;if(i)m=t,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,p,a,h*l,v),n.update(p,s,v)}function f(h,p,v){if(v===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<v;g++)this.render(h[g]/l,p[g]);else{m.multiDrawElementsWEBGL(s,p,0,a,h,0,v);let g=0;for(let y=0;y<v;y++)g+=p[y];n.update(g,s,1)}}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=d,this.renderMultiDraw=f}function QYe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function eKe(t,e){return t[0]-e[0]}function tKe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function nKe(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new er,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,d){const f=c.morphTargetInfluences;if(e.isWebGL2===!0){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,v=p!==void 0?p.length:0;let m=s.get(u);if(m===void 0||m.count!==v){let U=function(){O.dispose(),s.delete(u),u.removeEventListener("dispose",U)};var h=U;m!==void 0&&m.texture.dispose();const x=u.morphAttributes.position!==void 0,S=u.morphAttributes.normal!==void 0,_=u.morphAttributes.color!==void 0,C=u.morphAttributes.position||[],T=u.morphAttributes.normal||[],A=u.morphAttributes.color||[];let k=0;x===!0&&(k=1),S===!0&&(k=2),_===!0&&(k=3);let M=u.attributes.position.count*k,R=1;M>e.maxTextureSize&&(R=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const P=new Float32Array(M*R*4*v),O=new eI(P,M,R,v);O.type=Ms,O.needsUpdate=!0;const $=k*4;for(let z=0;z<v;z++){const X=C[z],D=T[z],F=A[z],W=M*R*4*z;for(let V=0;V<X.count;V++){const j=V*$;x===!0&&(o.fromBufferAttribute(X,V),P[W+j+0]=o.x,P[W+j+1]=o.y,P[W+j+2]=o.z,P[W+j+3]=0),S===!0&&(o.fromBufferAttribute(D,V),P[W+j+4]=o.x,P[W+j+5]=o.y,P[W+j+6]=o.z,P[W+j+7]=0),_===!0&&(o.fromBufferAttribute(F,V),P[W+j+8]=o.x,P[W+j+9]=o.y,P[W+j+10]=o.z,P[W+j+11]=F.itemSize===4?o.w:1)}}m={count:v,texture:O,size:new lt(M,R)},s.set(u,m),u.addEventListener("dispose",U)}let g=0;for(let x=0;x<f.length;x++)g+=f[x];const y=u.morphTargetsRelative?1:1-g;d.getUniforms().setValue(t,"morphTargetBaseInfluence",y),d.getUniforms().setValue(t,"morphTargetInfluences",f),d.getUniforms().setValue(t,"morphTargetsTexture",m.texture,n),d.getUniforms().setValue(t,"morphTargetsTextureSize",m.size)}else{const p=f===void 0?0:f.length;let v=r[u.id];if(v===void 0||v.length!==p){v=[];for(let S=0;S<p;S++)v[S]=[S,0];r[u.id]=v}for(let S=0;S<p;S++){const _=v[S];_[0]=S,_[1]=f[S]}v.sort(tKe);for(let S=0;S<8;S++)S<p&&v[S][1]?(a[S][0]=v[S][0],a[S][1]=v[S][1]):(a[S][0]=Number.MAX_SAFE_INTEGER,a[S][1]=0);a.sort(eKe);const m=u.morphAttributes.position,g=u.morphAttributes.normal;let y=0;for(let S=0;S<8;S++){const _=a[S],C=_[0],T=_[1];C!==Number.MAX_SAFE_INTEGER&&T?(m&&u.getAttribute("morphTarget"+S)!==m[C]&&u.setAttribute("morphTarget"+S,m[C]),g&&u.getAttribute("morphNormal"+S)!==g[C]&&u.setAttribute("morphNormal"+S,g[C]),i[S]=T,y+=T):(m&&u.hasAttribute("morphTarget"+S)===!0&&u.deleteAttribute("morphTarget"+S),g&&u.hasAttribute("morphNormal"+S)===!0&&u.deleteAttribute("morphNormal"+S),i[S]=0)}const x=u.morphTargetsRelative?1:1-y;d.getUniforms().setValue(t,"morphTargetBaseInfluence",x),d.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function rKe(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==c&&(f.update(),i.set(f,c))}return d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}class tI extends ci{constructor(e,n,r,i,s,o,a,l,c,u){if(u=u!==void 0?u:Yf,u!==Yf&&u!==Tm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Yf&&(r=kd),r===void 0&&u===Tm&&(r=qf),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Fi,this.minFilter=l!==void 0?l:Fi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const voe=new ci,yoe=new tI(1,1);yoe.compareFunction=dB;const xoe=new eI,boe=new pB,woe=new f2,sX=[],oX=[],aX=new Float32Array(16),lX=new Float32Array(9),cX=new Float32Array(4);function wy(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=sX[i];if(s===void 0&&(s=new Float32Array(i),sX[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function vs(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ys(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function nI(t,e){let n=oX[e];n===void 0&&(n=new Int32Array(e),oX[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function iKe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function sKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(vs(n,e))return;t.uniform2fv(this.addr,e),ys(n,e)}}function oKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(vs(n,e))return;t.uniform3fv(this.addr,e),ys(n,e)}}function aKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(vs(n,e))return;t.uniform4fv(this.addr,e),ys(n,e)}}function lKe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(vs(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ys(n,e)}else{if(vs(n,r))return;cX.set(r),t.uniformMatrix2fv(this.addr,!1,cX),ys(n,r)}}function cKe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(vs(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ys(n,e)}else{if(vs(n,r))return;lX.set(r),t.uniformMatrix3fv(this.addr,!1,lX),ys(n,r)}}function uKe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(vs(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ys(n,e)}else{if(vs(n,r))return;aX.set(r),t.uniformMatrix4fv(this.addr,!1,aX),ys(n,r)}}function dKe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function fKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(vs(n,e))return;t.uniform2iv(this.addr,e),ys(n,e)}}function hKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(vs(n,e))return;t.uniform3iv(this.addr,e),ys(n,e)}}function pKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(vs(n,e))return;t.uniform4iv(this.addr,e),ys(n,e)}}function mKe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function gKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(vs(n,e))return;t.uniform2uiv(this.addr,e),ys(n,e)}}function vKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(vs(n,e))return;t.uniform3uiv(this.addr,e),ys(n,e)}}function yKe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(vs(n,e))return;t.uniform4uiv(this.addr,e),ys(n,e)}}function xKe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const s=this.type===t.SAMPLER_2D_SHADOW?yoe:voe;n.setTexture2D(e||s,i)}function bKe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||boe,i)}function wKe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||woe,i)}function SKe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||xoe,i)}function _Ke(t){switch(t){case 5126:return iKe;case 35664:return sKe;case 35665:return oKe;case 35666:return aKe;case 35674:return lKe;case 35675:return cKe;case 35676:return uKe;case 5124:case 35670:return dKe;case 35667:case 35671:return fKe;case 35668:case 35672:return hKe;case 35669:case 35673:return pKe;case 5125:return mKe;case 36294:return gKe;case 36295:return vKe;case 36296:return yKe;case 35678:case 36198:case 36298:case 36306:case 35682:return xKe;case 35679:case 36299:case 36307:return bKe;case 35680:case 36300:case 36308:case 36293:return wKe;case 36289:case 36303:case 36311:case 36292:return SKe}}function CKe(t,e){t.uniform1fv(this.addr,e)}function TKe(t,e){const n=wy(e,this.size,2);t.uniform2fv(this.addr,n)}function EKe(t,e){const n=wy(e,this.size,3);t.uniform3fv(this.addr,n)}function MKe(t,e){const n=wy(e,this.size,4);t.uniform4fv(this.addr,n)}function kKe(t,e){const n=wy(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function AKe(t,e){const n=wy(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function IKe(t,e){const n=wy(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function RKe(t,e){t.uniform1iv(this.addr,e)}function NKe(t,e){t.uniform2iv(this.addr,e)}function PKe(t,e){t.uniform3iv(this.addr,e)}function $Ke(t,e){t.uniform4iv(this.addr,e)}function DKe(t,e){t.uniform1uiv(this.addr,e)}function LKe(t,e){t.uniform2uiv(this.addr,e)}function OKe(t,e){t.uniform3uiv(this.addr,e)}function FKe(t,e){t.uniform4uiv(this.addr,e)}function UKe(t,e,n){const r=this.cache,i=e.length,s=nI(n,i);vs(r,s)||(t.uniform1iv(this.addr,s),ys(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||voe,s[o])}function BKe(t,e,n){const r=this.cache,i=e.length,s=nI(n,i);vs(r,s)||(t.uniform1iv(this.addr,s),ys(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||boe,s[o])}function zKe(t,e,n){const r=this.cache,i=e.length,s=nI(n,i);vs(r,s)||(t.uniform1iv(this.addr,s),ys(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||woe,s[o])}function WKe(t,e,n){const r=this.cache,i=e.length,s=nI(n,i);vs(r,s)||(t.uniform1iv(this.addr,s),ys(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||xoe,s[o])}function VKe(t){switch(t){case 5126:return CKe;case 35664:return TKe;case 35665:return EKe;case 35666:return MKe;case 35674:return kKe;case 35675:return AKe;case 35676:return IKe;case 5124:case 35670:return RKe;case 35667:case 35671:return NKe;case 35668:case 35672:return PKe;case 35669:case 35673:return $Ke;case 5125:return DKe;case 36294:return LKe;case 36295:return OKe;case 36296:return FKe;case 35678:case 36198:case 36298:case 36306:case 35682:return UKe;case 35679:case 36299:case 36307:return BKe;case 35680:case 36300:case 36308:case 36293:return zKe;case 36289:case 36303:case 36311:case 36292:return WKe}}class GKe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=_Ke(n.type)}}class HKe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=VKe(n.type)}}class jKe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const PP=/(\w+)(\])?(\[|\.)?/g;function uX(t,e){t.seq.push(e),t.map[e.id]=e}function XKe(t,e,n){const r=t.name,i=r.length;for(PP.lastIndex=0;;){const s=PP.exec(r),o=PP.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){uX(n,c===void 0?new GKe(a,t,e):new HKe(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new jKe(a),uX(n,d)),n=d}}}class sE{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);XKe(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function dX(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const qKe=37297;let YKe=0;function KKe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}function ZKe(t){const e=Tr.getPrimaries(Tr.workingColorSpace),n=Tr.getPrimaries(t);let r;switch(e===n?r="":e===Jb&&n===Zb?r="LinearDisplayP3ToLinearSRGB":e===Zb&&n===Jb&&(r="LinearSRGBToLinearDisplayP3"),t){case zu:case c2:return[r,"LinearTransferOETF"];case us:case QA:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function fX(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+KKe(t.getShaderSource(e),o)}else return i}function JKe(t,e){const n=ZKe(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function QKe(t,e){let n;switch(e){case Fse:n="Linear";break;case Use:n="Reinhard";break;case Bse:n="OptimizedCineon";break;case JU:n="ACESFilmic";break;case Wse:n="AgX";break;case zse:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function eZe(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(L0).join(`
`)}function tZe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(L0).join(`
`)}function nZe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function rZe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function L0(t){return t!==""}function hX(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function pX(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const iZe=/^[ \t]*#include +<([\w\d./]+)>/gm;function mO(t){return t.replace(iZe,oZe)}const sZe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function oZe(t,e){let n=Pn[e];if(n===void 0){const r=sZe.get(e);if(r!==void 0)n=Pn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return mO(n)}const aZe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function mX(t){return t.replace(aZe,lZe)}function lZe(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function gX(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function cZe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===YA?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===R1?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===fc&&(e="SHADOWMAP_TYPE_VSM"),e}function uZe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Bu:case lh:e="ENVMAP_TYPE_CUBE";break;case by:e="ENVMAP_TYPE_CUBE_UV";break}return e}function dZe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case lh:e="ENVMAP_MODE_REFRACTION";break}return e}function fZe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case l2:e="ENVMAP_BLENDING_MULTIPLY";break;case Lse:e="ENVMAP_BLENDING_MIX";break;case Ose:e="ENVMAP_BLENDING_ADD";break}return e}function hZe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function pZe(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=cZe(n),c=uZe(n),u=dZe(n),d=fZe(n),f=hZe(n),h=n.isWebGL2?"":eZe(n),p=tZe(n),v=nZe(s),m=i.createProgram();let g,y,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(L0).join(`
`),g.length>0&&(g+=`
`),y=[h,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(L0).join(`
`),y.length>0&&(y+=`
`)):(g=[gX(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(L0).join(`
`),y=[h,gX(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Eu?"#define TONE_MAPPING":"",n.toneMapping!==Eu?Pn.tonemapping_pars_fragment:"",n.toneMapping!==Eu?QKe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Pn.colorspace_pars_fragment,JKe("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(L0).join(`
`)),o=mO(o),o=hX(o,n),o=pX(o,n),a=mO(a),a=hX(a,n),a=pX(a,n),o=mX(o),a=mX(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=[p,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,y=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===fO?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===fO?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const S=x+g+o,_=x+y+a,C=dX(i,i.VERTEX_SHADER,S),T=dX(i,i.FRAGMENT_SHADER,_);i.attachShader(m,C),i.attachShader(m,T),n.index0AttributeName!==void 0?i.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m);function A(P){if(t.debug.checkShaderErrors){const O=i.getProgramInfoLog(m).trim(),$=i.getShaderInfoLog(C).trim(),U=i.getShaderInfoLog(T).trim();let z=!0,X=!0;if(i.getProgramParameter(m,i.LINK_STATUS)===!1)if(z=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,m,C,T);else{const D=fX(i,C,"vertex"),F=fX(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+`

Program Info Log: `+O+`
`+D+`
`+F)}else O!==""?console.warn("THREE.WebGLProgram: Program Info Log:",O):($===""||U==="")&&(X=!1);X&&(P.diagnostics={runnable:z,programLog:O,vertexShader:{log:$,prefix:g},fragmentShader:{log:U,prefix:y}})}i.deleteShader(C),i.deleteShader(T),k=new sE(i,m),M=rZe(i,m)}let k;this.getUniforms=function(){return k===void 0&&A(this),k};let M;this.getAttributes=function(){return M===void 0&&A(this),M};let R=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=i.getProgramParameter(m,qKe)),R},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=YKe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=C,this.fragmentShader=T,this}let mZe=0;class gZe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new vZe(e),n.set(e,r)),r}}class vZe{constructor(e){this.id=mZe++,this.code=e,this.usedTimes=0}}function yZe(t,e,n,r,i,s,o){const a=new tm,l=new gZe,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,f=i.vertexTextures;let h=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(k){return k===0?"uv":`uv${k}`}function m(k,M,R,P,O){const $=P.fog,U=O.geometry,z=k.isMeshStandardMaterial?P.environment:null,X=(k.isMeshStandardMaterial?n:e).get(k.envMap||z),D=X&&X.mapping===by?X.image.height:null,F=p[k.type];k.precision!==null&&(h=i.getMaxPrecision(k.precision),h!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",h,"instead."));const W=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,V=W!==void 0?W.length:0;let j=0;U.morphAttributes.position!==void 0&&(j=1),U.morphAttributes.normal!==void 0&&(j=2),U.morphAttributes.color!==void 0&&(j=3);let J,Q,te,re;if(F){const $t=gc[F];J=$t.vertexShader,Q=$t.fragmentShader}else J=k.vertexShader,Q=k.fragmentShader,l.update(k),te=l.getVertexShaderID(k),re=l.getFragmentShaderID(k);const se=t.getRenderTarget(),fe=O.isInstancedMesh===!0,ae=O.isBatchedMesh===!0,ye=!!k.map,le=!!k.matcap,H=!!X,Me=!!k.aoMap,we=!!k.lightMap,Ee=!!k.bumpMap,me=!!k.normalMap,qe=!!k.displacementMap,ke=!!k.emissiveMap,ee=!!k.metalnessMap,Y=!!k.roughnessMap,oe=k.anisotropy>0,xe=k.clearcoat>0,Se=k.iridescence>0,be=k.sheen>0,Re=k.transmission>0,Ke=oe&&!!k.anisotropyMap,ze=xe&&!!k.clearcoatMap,Pe=xe&&!!k.clearcoatNormalMap,De=xe&&!!k.clearcoatRoughnessMap,We=Se&&!!k.iridescenceMap,gt=Se&&!!k.iridescenceThicknessMap,ct=be&&!!k.sheenColorMap,Ye=be&&!!k.sheenRoughnessMap,Xe=!!k.specularMap,Le=!!k.specularColorMap,he=!!k.specularIntensityMap,He=Re&&!!k.transmissionMap,ot=Re&&!!k.thicknessMap,et=!!k.gradientMap,Ie=!!k.alphaMap,Ce=k.alphaTest>0,ut=!!k.alphaHash,dt=!!k.extensions,yt=!!U.attributes.uv1,vt=!!U.attributes.uv2,zt=!!U.attributes.uv3;let It=Eu;return k.toneMapped&&(se===null||se.isXRRenderTarget===!0)&&(It=t.toneMapping),{isWebGL2:u,shaderID:F,shaderType:k.type,shaderName:k.name,vertexShader:J,fragmentShader:Q,defines:k.defines,customVertexShaderID:te,customFragmentShaderID:re,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:h,batching:ae,instancing:fe,instancingColor:fe&&O.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:se===null?t.outputColorSpace:se.isXRRenderTarget===!0?se.texture.colorSpace:zu,map:ye,matcap:le,envMap:H,envMapMode:H&&X.mapping,envMapCubeUVHeight:D,aoMap:Me,lightMap:we,bumpMap:Ee,normalMap:me,displacementMap:f&&qe,emissiveMap:ke,normalMapObjectSpace:me&&k.normalMapType===toe,normalMapTangentSpace:me&&k.normalMapType===Th,metalnessMap:ee,roughnessMap:Y,anisotropy:oe,anisotropyMap:Ke,clearcoat:xe,clearcoatMap:ze,clearcoatNormalMap:Pe,clearcoatRoughnessMap:De,iridescence:Se,iridescenceMap:We,iridescenceThicknessMap:gt,sheen:be,sheenColorMap:ct,sheenRoughnessMap:Ye,specularMap:Xe,specularColorMap:Le,specularIntensityMap:he,transmission:Re,transmissionMap:He,thicknessMap:ot,gradientMap:et,opaque:k.transparent===!1&&k.blending===Qp,alphaMap:Ie,alphaTest:Ce,alphaHash:ut,combine:k.combine,mapUv:ye&&v(k.map.channel),aoMapUv:Me&&v(k.aoMap.channel),lightMapUv:we&&v(k.lightMap.channel),bumpMapUv:Ee&&v(k.bumpMap.channel),normalMapUv:me&&v(k.normalMap.channel),displacementMapUv:qe&&v(k.displacementMap.channel),emissiveMapUv:ke&&v(k.emissiveMap.channel),metalnessMapUv:ee&&v(k.metalnessMap.channel),roughnessMapUv:Y&&v(k.roughnessMap.channel),anisotropyMapUv:Ke&&v(k.anisotropyMap.channel),clearcoatMapUv:ze&&v(k.clearcoatMap.channel),clearcoatNormalMapUv:Pe&&v(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:De&&v(k.clearcoatRoughnessMap.channel),iridescenceMapUv:We&&v(k.iridescenceMap.channel),iridescenceThicknessMapUv:gt&&v(k.iridescenceThicknessMap.channel),sheenColorMapUv:ct&&v(k.sheenColorMap.channel),sheenRoughnessMapUv:Ye&&v(k.sheenRoughnessMap.channel),specularMapUv:Xe&&v(k.specularMap.channel),specularColorMapUv:Le&&v(k.specularColorMap.channel),specularIntensityMapUv:he&&v(k.specularIntensityMap.channel),transmissionMapUv:He&&v(k.transmissionMap.channel),thicknessMapUv:ot&&v(k.thicknessMap.channel),alphaMapUv:Ie&&v(k.alphaMap.channel),vertexTangents:!!U.attributes.tangent&&(me||oe),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,vertexUv1s:yt,vertexUv2s:vt,vertexUv3s:zt,pointsUvs:O.isPoints===!0&&!!U.attributes.uv&&(ye||Ie),fog:!!$,useFog:k.fog===!0,fogExp2:$&&$.isFogExp2,flatShading:k.flatShading===!0,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:O.isSkinnedMesh===!0,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:V,morphTextureStride:j,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:k.dithering,shadowMapEnabled:t.shadowMap.enabled&&R.length>0,shadowMapType:t.shadowMap.type,toneMapping:It,useLegacyLights:t._useLegacyLights,decodeVideoTexture:ye&&k.map.isVideoTexture===!0&&Tr.getTransfer(k.map.colorSpace)===Vr,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===Ga,flipSided:k.side===Qi,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionDerivatives:dt&&k.extensions.derivatives===!0,extensionFragDepth:dt&&k.extensions.fragDepth===!0,extensionDrawBuffers:dt&&k.extensions.drawBuffers===!0,extensionShaderTextureLOD:dt&&k.extensions.shaderTextureLOD===!0,extensionClipCullDistance:dt&&k.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()}}function g(k){const M=[];if(k.shaderID?M.push(k.shaderID):(M.push(k.customVertexShaderID),M.push(k.customFragmentShaderID)),k.defines!==void 0)for(const R in k.defines)M.push(R),M.push(k.defines[R]);return k.isRawShaderMaterial===!1&&(y(M,k),x(M,k),M.push(t.outputColorSpace)),M.push(k.customProgramCacheKey),M.join()}function y(k,M){k.push(M.precision),k.push(M.outputColorSpace),k.push(M.envMapMode),k.push(M.envMapCubeUVHeight),k.push(M.mapUv),k.push(M.alphaMapUv),k.push(M.lightMapUv),k.push(M.aoMapUv),k.push(M.bumpMapUv),k.push(M.normalMapUv),k.push(M.displacementMapUv),k.push(M.emissiveMapUv),k.push(M.metalnessMapUv),k.push(M.roughnessMapUv),k.push(M.anisotropyMapUv),k.push(M.clearcoatMapUv),k.push(M.clearcoatNormalMapUv),k.push(M.clearcoatRoughnessMapUv),k.push(M.iridescenceMapUv),k.push(M.iridescenceThicknessMapUv),k.push(M.sheenColorMapUv),k.push(M.sheenRoughnessMapUv),k.push(M.specularMapUv),k.push(M.specularColorMapUv),k.push(M.specularIntensityMapUv),k.push(M.transmissionMapUv),k.push(M.thicknessMapUv),k.push(M.combine),k.push(M.fogExp2),k.push(M.sizeAttenuation),k.push(M.morphTargetsCount),k.push(M.morphAttributeCount),k.push(M.numDirLights),k.push(M.numPointLights),k.push(M.numSpotLights),k.push(M.numSpotLightMaps),k.push(M.numHemiLights),k.push(M.numRectAreaLights),k.push(M.numDirLightShadows),k.push(M.numPointLightShadows),k.push(M.numSpotLightShadows),k.push(M.numSpotLightShadowsWithMaps),k.push(M.numLightProbes),k.push(M.shadowMapType),k.push(M.toneMapping),k.push(M.numClippingPlanes),k.push(M.numClipIntersection),k.push(M.depthPacking)}function x(k,M){a.disableAll(),M.isWebGL2&&a.enable(0),M.supportsVertexTextures&&a.enable(1),M.instancing&&a.enable(2),M.instancingColor&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),k.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.skinning&&a.enable(4),M.morphTargets&&a.enable(5),M.morphNormals&&a.enable(6),M.morphColors&&a.enable(7),M.premultipliedAlpha&&a.enable(8),M.shadowMapEnabled&&a.enable(9),M.useLegacyLights&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.transmission&&a.enable(15),M.sheen&&a.enable(16),M.opaque&&a.enable(17),M.pointsUvs&&a.enable(18),M.decodeVideoTexture&&a.enable(19),k.push(a.mask)}function S(k){const M=p[k.type];let R;if(M){const P=gc[M];R=tw.clone(P.uniforms)}else R=k.uniforms;return R}function _(k,M){let R;for(let P=0,O=c.length;P<O;P++){const $=c[P];if($.cacheKey===M){R=$,++R.usedTimes;break}}return R===void 0&&(R=new pZe(t,M,k,s),c.push(R)),R}function C(k){if(--k.usedTimes===0){const M=c.indexOf(k);c[M]=c[c.length-1],c.pop(),k.destroy()}}function T(k){l.remove(k)}function A(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:S,acquireProgram:_,releaseProgram:C,releaseShaderCache:T,programs:c,dispose:A}}function xZe(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function bZe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function vX(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function yX(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(d,f,h,p,v,m){let g=t[e];return g===void 0?(g={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:v,group:m},t[e]=g):(g.id=d.id,g.object=d,g.geometry=f,g.material=h,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=v,g.group=m),e++,g}function a(d,f,h,p,v,m){const g=o(d,f,h,p,v,m);h.transmission>0?r.push(g):h.transparent===!0?i.push(g):n.push(g)}function l(d,f,h,p,v,m){const g=o(d,f,h,p,v,m);h.transmission>0?r.unshift(g):h.transparent===!0?i.unshift(g):n.unshift(g)}function c(d,f){n.length>1&&n.sort(d||bZe),r.length>1&&r.sort(f||vX),i.length>1&&i.sort(f||vX)}function u(){for(let d=e,f=t.length;d<f;d++){const h=t[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function wZe(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new yX,t.set(r,[o])):i>=s.length?(o=new yX,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function SZe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new pe,color:new Bt};break;case"SpotLight":n={position:new pe,direction:new pe,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new pe,color:new Bt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new pe,skyColor:new Bt,groundColor:new Bt};break;case"RectAreaLight":n={color:new Bt,position:new pe,halfWidth:new pe,halfHeight:new pe};break}return t[e.id]=n,n}}}function _Ze(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let CZe=0;function TZe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function EZe(t,e){const n=new SZe,r=_Ze(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new pe);const s=new pe,o=new wn,a=new wn;function l(u,d){let f=0,h=0,p=0;for(let P=0;P<9;P++)i.probe[P].set(0,0,0);let v=0,m=0,g=0,y=0,x=0,S=0,_=0,C=0,T=0,A=0,k=0;u.sort(TZe);const M=d===!0?Math.PI:1;for(let P=0,O=u.length;P<O;P++){const $=u[P],U=$.color,z=$.intensity,X=$.distance,D=$.shadow&&$.shadow.map?$.shadow.map.texture:null;if($.isAmbientLight)f+=U.r*z*M,h+=U.g*z*M,p+=U.b*z*M;else if($.isLightProbe){for(let F=0;F<9;F++)i.probe[F].addScaledVector($.sh.coefficients[F],z);k++}else if($.isDirectionalLight){const F=n.get($);if(F.color.copy($.color).multiplyScalar($.intensity*M),$.castShadow){const W=$.shadow,V=r.get($);V.shadowBias=W.bias,V.shadowNormalBias=W.normalBias,V.shadowRadius=W.radius,V.shadowMapSize=W.mapSize,i.directionalShadow[v]=V,i.directionalShadowMap[v]=D,i.directionalShadowMatrix[v]=$.shadow.matrix,S++}i.directional[v]=F,v++}else if($.isSpotLight){const F=n.get($);F.position.setFromMatrixPosition($.matrixWorld),F.color.copy(U).multiplyScalar(z*M),F.distance=X,F.coneCos=Math.cos($.angle),F.penumbraCos=Math.cos($.angle*(1-$.penumbra)),F.decay=$.decay,i.spot[g]=F;const W=$.shadow;if($.map&&(i.spotLightMap[T]=$.map,T++,W.updateMatrices($),$.castShadow&&A++),i.spotLightMatrix[g]=W.matrix,$.castShadow){const V=r.get($);V.shadowBias=W.bias,V.shadowNormalBias=W.normalBias,V.shadowRadius=W.radius,V.shadowMapSize=W.mapSize,i.spotShadow[g]=V,i.spotShadowMap[g]=D,C++}g++}else if($.isRectAreaLight){const F=n.get($);F.color.copy(U).multiplyScalar(z),F.halfWidth.set($.width*.5,0,0),F.halfHeight.set(0,$.height*.5,0),i.rectArea[y]=F,y++}else if($.isPointLight){const F=n.get($);if(F.color.copy($.color).multiplyScalar($.intensity*M),F.distance=$.distance,F.decay=$.decay,$.castShadow){const W=$.shadow,V=r.get($);V.shadowBias=W.bias,V.shadowNormalBias=W.normalBias,V.shadowRadius=W.radius,V.shadowMapSize=W.mapSize,V.shadowCameraNear=W.camera.near,V.shadowCameraFar=W.camera.far,i.pointShadow[m]=V,i.pointShadowMap[m]=D,i.pointShadowMatrix[m]=$.shadow.matrix,_++}i.point[m]=F,m++}else if($.isHemisphereLight){const F=n.get($);F.skyColor.copy($.color).multiplyScalar(z*M),F.groundColor.copy($.groundColor).multiplyScalar(z*M),i.hemi[x]=F,x++}}y>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Mt.LTC_FLOAT_1,i.rectAreaLTC2=Mt.LTC_FLOAT_2):(i.rectAreaLTC1=Mt.LTC_HALF_1,i.rectAreaLTC2=Mt.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Mt.LTC_FLOAT_1,i.rectAreaLTC2=Mt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Mt.LTC_HALF_1,i.rectAreaLTC2=Mt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=p;const R=i.hash;(R.directionalLength!==v||R.pointLength!==m||R.spotLength!==g||R.rectAreaLength!==y||R.hemiLength!==x||R.numDirectionalShadows!==S||R.numPointShadows!==_||R.numSpotShadows!==C||R.numSpotMaps!==T||R.numLightProbes!==k)&&(i.directional.length=v,i.spot.length=g,i.rectArea.length=y,i.point.length=m,i.hemi.length=x,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=C+T-A,i.spotLightMap.length=T,i.numSpotLightShadowsWithMaps=A,i.numLightProbes=k,R.directionalLength=v,R.pointLength=m,R.spotLength=g,R.rectAreaLength=y,R.hemiLength=x,R.numDirectionalShadows=S,R.numPointShadows=_,R.numSpotShadows=C,R.numSpotMaps=T,R.numLightProbes=k,i.version=CZe++)}function c(u,d){let f=0,h=0,p=0,v=0,m=0;const g=d.matrixWorldInverse;for(let y=0,x=u.length;y<x;y++){const S=u[y];if(S.isDirectionalLight){const _=i.directional[f];_.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(g),f++}else if(S.isSpotLight){const _=i.spot[p];_.position.setFromMatrixPosition(S.matrixWorld),_.position.applyMatrix4(g),_.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(g),p++}else if(S.isRectAreaLight){const _=i.rectArea[v];_.position.setFromMatrixPosition(S.matrixWorld),_.position.applyMatrix4(g),a.identity(),o.copy(S.matrixWorld),o.premultiply(g),a.extractRotation(o),_.halfWidth.set(S.width*.5,0,0),_.halfHeight.set(0,S.height*.5,0),_.halfWidth.applyMatrix4(a),_.halfHeight.applyMatrix4(a),v++}else if(S.isPointLight){const _=i.point[h];_.position.setFromMatrixPosition(S.matrixWorld),_.position.applyMatrix4(g),h++}else if(S.isHemisphereLight){const _=i.hemi[m];_.direction.setFromMatrixPosition(S.matrixWorld),_.direction.transformDirection(g),m++}}}return{setup:l,setupView:c,state:i}}function xX(t,e){const n=new EZe(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(d){r.push(d)}function a(d){i.push(d)}function l(d){n.setup(r,d)}function c(d){n.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function MZe(t,e){let n=new WeakMap;function r(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new xX(t,e),n.set(s,[l])):o>=a.length?(l=new xX(t,e),a.push(l)):l=a[o],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class rI extends Ks{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=eoe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class iI extends Ks{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const kZe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,AZe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function IZe(t,e,n){let r=new h2;const i=new lt,s=new lt,o=new er,a=new rI({depthPacking:uB}),l=new iI,c={},u=n.maxTextureSize,d={[Uu]:Qi,[Qi]:Uu,[Ga]:Ga},f=new jl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new lt},radius:{value:4}},vertexShader:kZe,fragmentShader:AZe}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new $n;p.setAttribute("position",new kr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new ai(p,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=YA;let g=this.type;this.render=function(C,T,A){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||C.length===0)return;const k=t.getRenderTarget(),M=t.getActiveCubeFace(),R=t.getActiveMipmapLevel(),P=t.state;P.setBlending(Dd),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);const O=g!==fc&&this.type===fc,$=g===fc&&this.type!==fc;for(let U=0,z=C.length;U<z;U++){const X=C[U],D=X.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",X,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;i.copy(D.mapSize);const F=D.getFrameExtents();if(i.multiply(F),s.copy(D.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/F.x),i.x=s.x*F.x,D.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/F.y),i.y=s.y*F.y,D.mapSize.y=s.y)),D.map===null||O===!0||$===!0){const V=this.type!==fc?{minFilter:Fi,magFilter:Fi}:{};D.map!==null&&D.map.dispose(),D.map=new Hl(i.x,i.y,V),D.map.texture.name=X.name+".shadowMap",D.camera.updateProjectionMatrix()}t.setRenderTarget(D.map),t.clear();const W=D.getViewportCount();for(let V=0;V<W;V++){const j=D.getViewport(V);o.set(s.x*j.x,s.y*j.y,s.x*j.z,s.y*j.w),P.viewport(o),D.updateMatrices(X,V),r=D.getFrustum(),S(T,A,D.camera,X,this.type)}D.isPointLightShadow!==!0&&this.type===fc&&y(D,A),D.needsUpdate=!1}g=this.type,m.needsUpdate=!1,t.setRenderTarget(k,M,R)};function y(C,T){const A=e.update(v);f.defines.VSM_SAMPLES!==C.blurSamples&&(f.defines.VSM_SAMPLES=C.blurSamples,h.defines.VSM_SAMPLES=C.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new Hl(i.x,i.y)),f.uniforms.shadow_pass.value=C.map.texture,f.uniforms.resolution.value=C.mapSize,f.uniforms.radius.value=C.radius,t.setRenderTarget(C.mapPass),t.clear(),t.renderBufferDirect(T,null,A,f,v,null),h.uniforms.shadow_pass.value=C.mapPass.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,t.setRenderTarget(C.map),t.clear(),t.renderBufferDirect(T,null,A,h,v,null)}function x(C,T,A,k){let M=null;const R=A.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(R!==void 0)M=R;else if(M=A.isPointLight===!0?l:a,t.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const P=M.uuid,O=T.uuid;let $=c[P];$===void 0&&($={},c[P]=$);let U=$[O];U===void 0&&(U=M.clone(),$[O]=U,T.addEventListener("dispose",_)),M=U}if(M.visible=T.visible,M.wireframe=T.wireframe,k===fc?M.side=T.shadowSide!==null?T.shadowSide:T.side:M.side=T.shadowSide!==null?T.shadowSide:d[T.side],M.alphaMap=T.alphaMap,M.alphaTest=T.alphaTest,M.map=T.map,M.clipShadows=T.clipShadows,M.clippingPlanes=T.clippingPlanes,M.clipIntersection=T.clipIntersection,M.displacementMap=T.displacementMap,M.displacementScale=T.displacementScale,M.displacementBias=T.displacementBias,M.wireframeLinewidth=T.wireframeLinewidth,M.linewidth=T.linewidth,A.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const P=t.properties.get(M);P.light=A}return M}function S(C,T,A,k,M){if(C.visible===!1)return;if(C.layers.test(T.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&M===fc)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,C.matrixWorld);const O=e.update(C),$=C.material;if(Array.isArray($)){const U=O.groups;for(let z=0,X=U.length;z<X;z++){const D=U[z],F=$[D.materialIndex];if(F&&F.visible){const W=x(C,F,k,M);C.onBeforeShadow(t,C,T,A,O,W,D),t.renderBufferDirect(A,null,O,W,C,D),C.onAfterShadow(t,C,T,A,O,W,D)}}}else if($.visible){const U=x(C,$,k,M);C.onBeforeShadow(t,C,T,A,O,U,null),t.renderBufferDirect(A,null,O,U,C,null),C.onAfterShadow(t,C,T,A,O,U,null)}}const P=C.children;for(let O=0,$=P.length;O<$;O++)S(P[O],T,A,k,M)}function _(C){C.target.removeEventListener("dispose",_);for(const A in c){const k=c[A],M=C.target.uuid;M in k&&(k[M].dispose(),delete k[M])}}}function RZe(t,e,n){const r=n.isWebGL2;function i(){let Ce=!1;const ut=new er;let dt=null;const yt=new er(0,0,0,0);return{setMask:function(vt){dt!==vt&&!Ce&&(t.colorMask(vt,vt,vt,vt),dt=vt)},setLocked:function(vt){Ce=vt},setClear:function(vt,zt,It,Qt,$t){$t===!0&&(vt*=Qt,zt*=Qt,It*=Qt),ut.set(vt,zt,It,Qt),yt.equals(ut)===!1&&(t.clearColor(vt,zt,It,Qt),yt.copy(ut))},reset:function(){Ce=!1,dt=null,yt.set(-1,0,0,0)}}}function s(){let Ce=!1,ut=null,dt=null,yt=null;return{setTest:function(vt){vt?ae(t.DEPTH_TEST):ye(t.DEPTH_TEST)},setMask:function(vt){ut!==vt&&!Ce&&(t.depthMask(vt),ut=vt)},setFunc:function(vt){if(dt!==vt){switch(vt){case Ase:t.depthFunc(t.NEVER);break;case Ise:t.depthFunc(t.ALWAYS);break;case Rse:t.depthFunc(t.LESS);break;case Vb:t.depthFunc(t.LEQUAL);break;case Nse:t.depthFunc(t.EQUAL);break;case Pse:t.depthFunc(t.GEQUAL);break;case $se:t.depthFunc(t.GREATER);break;case Dse:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}dt=vt}},setLocked:function(vt){Ce=vt},setClear:function(vt){yt!==vt&&(t.clearDepth(vt),yt=vt)},reset:function(){Ce=!1,ut=null,dt=null,yt=null}}}function o(){let Ce=!1,ut=null,dt=null,yt=null,vt=null,zt=null,It=null,Qt=null,$t=null;return{setTest:function(mt){Ce||(mt?ae(t.STENCIL_TEST):ye(t.STENCIL_TEST))},setMask:function(mt){ut!==mt&&!Ce&&(t.stencilMask(mt),ut=mt)},setFunc:function(mt,Ht,pn){(dt!==mt||yt!==Ht||vt!==pn)&&(t.stencilFunc(mt,Ht,pn),dt=mt,yt=Ht,vt=pn)},setOp:function(mt,Ht,pn){(zt!==mt||It!==Ht||Qt!==pn)&&(t.stencilOp(mt,Ht,pn),zt=mt,It=Ht,Qt=pn)},setLocked:function(mt){Ce=mt},setClear:function(mt){$t!==mt&&(t.clearStencil(mt),$t=mt)},reset:function(){Ce=!1,ut=null,dt=null,yt=null,vt=null,zt=null,It=null,Qt=null,$t=null}}}const a=new i,l=new s,c=new o,u=new WeakMap,d=new WeakMap;let f={},h={},p=new WeakMap,v=[],m=null,g=!1,y=null,x=null,S=null,_=null,C=null,T=null,A=null,k=new Bt(0,0,0),M=0,R=!1,P=null,O=null,$=null,U=null,z=null;const X=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let D=!1,F=0;const W=t.getParameter(t.VERSION);W.indexOf("WebGL")!==-1?(F=parseFloat(/^WebGL (\d)/.exec(W)[1]),D=F>=1):W.indexOf("OpenGL ES")!==-1&&(F=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),D=F>=2);let V=null,j={};const J=t.getParameter(t.SCISSOR_BOX),Q=t.getParameter(t.VIEWPORT),te=new er().fromArray(J),re=new er().fromArray(Q);function se(Ce,ut,dt,yt){const vt=new Uint8Array(4),zt=t.createTexture();t.bindTexture(Ce,zt),t.texParameteri(Ce,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Ce,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let It=0;It<dt;It++)r&&(Ce===t.TEXTURE_3D||Ce===t.TEXTURE_2D_ARRAY)?t.texImage3D(ut,0,t.RGBA,1,1,yt,0,t.RGBA,t.UNSIGNED_BYTE,vt):t.texImage2D(ut+It,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,vt);return zt}const fe={};fe[t.TEXTURE_2D]=se(t.TEXTURE_2D,t.TEXTURE_2D,1),fe[t.TEXTURE_CUBE_MAP]=se(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(fe[t.TEXTURE_2D_ARRAY]=se(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),fe[t.TEXTURE_3D]=se(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ae(t.DEPTH_TEST),l.setFunc(Vb),ke(!1),ee(PL),ae(t.CULL_FACE),me(Dd);function ae(Ce){f[Ce]!==!0&&(t.enable(Ce),f[Ce]=!0)}function ye(Ce){f[Ce]!==!1&&(t.disable(Ce),f[Ce]=!1)}function le(Ce,ut){return h[Ce]!==ut?(t.bindFramebuffer(Ce,ut),h[Ce]=ut,r&&(Ce===t.DRAW_FRAMEBUFFER&&(h[t.FRAMEBUFFER]=ut),Ce===t.FRAMEBUFFER&&(h[t.DRAW_FRAMEBUFFER]=ut)),!0):!1}function H(Ce,ut){let dt=v,yt=!1;if(Ce)if(dt=p.get(ut),dt===void 0&&(dt=[],p.set(ut,dt)),Ce.isWebGLMultipleRenderTargets){const vt=Ce.texture;if(dt.length!==vt.length||dt[0]!==t.COLOR_ATTACHMENT0){for(let zt=0,It=vt.length;zt<It;zt++)dt[zt]=t.COLOR_ATTACHMENT0+zt;dt.length=vt.length,yt=!0}}else dt[0]!==t.COLOR_ATTACHMENT0&&(dt[0]=t.COLOR_ATTACHMENT0,yt=!0);else dt[0]!==t.BACK&&(dt[0]=t.BACK,yt=!0);yt&&(n.isWebGL2?t.drawBuffers(dt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(dt))}function Me(Ce){return m!==Ce?(t.useProgram(Ce),m=Ce,!0):!1}const we={[kf]:t.FUNC_ADD,[pse]:t.FUNC_SUBTRACT,[mse]:t.FUNC_REVERSE_SUBTRACT};if(r)we[OL]=t.MIN,we[FL]=t.MAX;else{const Ce=e.get("EXT_blend_minmax");Ce!==null&&(we[OL]=Ce.MIN_EXT,we[FL]=Ce.MAX_EXT)}const Ee={[gse]:t.ZERO,[vse]:t.ONE,[yse]:t.SRC_COLOR,[wM]:t.SRC_ALPHA,[Cse]:t.SRC_ALPHA_SATURATE,[Sse]:t.DST_COLOR,[bse]:t.DST_ALPHA,[xse]:t.ONE_MINUS_SRC_COLOR,[SM]:t.ONE_MINUS_SRC_ALPHA,[_se]:t.ONE_MINUS_DST_COLOR,[wse]:t.ONE_MINUS_DST_ALPHA,[Tse]:t.CONSTANT_COLOR,[Ese]:t.ONE_MINUS_CONSTANT_COLOR,[Mse]:t.CONSTANT_ALPHA,[kse]:t.ONE_MINUS_CONSTANT_ALPHA};function me(Ce,ut,dt,yt,vt,zt,It,Qt,$t,mt){if(Ce===Dd){g===!0&&(ye(t.BLEND),g=!1);return}if(g===!1&&(ae(t.BLEND),g=!0),Ce!==hse){if(Ce!==y||mt!==R){if((x!==kf||C!==kf)&&(t.blendEquation(t.FUNC_ADD),x=kf,C=kf),mt)switch(Ce){case Qp:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case $L:t.blendFunc(t.ONE,t.ONE);break;case DL:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case LL:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}else switch(Ce){case Qp:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case $L:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case DL:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case LL:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}S=null,_=null,T=null,A=null,k.set(0,0,0),M=0,y=Ce,R=mt}return}vt=vt||ut,zt=zt||dt,It=It||yt,(ut!==x||vt!==C)&&(t.blendEquationSeparate(we[ut],we[vt]),x=ut,C=vt),(dt!==S||yt!==_||zt!==T||It!==A)&&(t.blendFuncSeparate(Ee[dt],Ee[yt],Ee[zt],Ee[It]),S=dt,_=yt,T=zt,A=It),(Qt.equals(k)===!1||$t!==M)&&(t.blendColor(Qt.r,Qt.g,Qt.b,$t),k.copy(Qt),M=$t),y=Ce,R=!1}function qe(Ce,ut){Ce.side===Ga?ye(t.CULL_FACE):ae(t.CULL_FACE);let dt=Ce.side===Qi;ut&&(dt=!dt),ke(dt),Ce.blending===Qp&&Ce.transparent===!1?me(Dd):me(Ce.blending,Ce.blendEquation,Ce.blendSrc,Ce.blendDst,Ce.blendEquationAlpha,Ce.blendSrcAlpha,Ce.blendDstAlpha,Ce.blendColor,Ce.blendAlpha,Ce.premultipliedAlpha),l.setFunc(Ce.depthFunc),l.setTest(Ce.depthTest),l.setMask(Ce.depthWrite),a.setMask(Ce.colorWrite);const yt=Ce.stencilWrite;c.setTest(yt),yt&&(c.setMask(Ce.stencilWriteMask),c.setFunc(Ce.stencilFunc,Ce.stencilRef,Ce.stencilFuncMask),c.setOp(Ce.stencilFail,Ce.stencilZFail,Ce.stencilZPass)),oe(Ce.polygonOffset,Ce.polygonOffsetFactor,Ce.polygonOffsetUnits),Ce.alphaToCoverage===!0?ae(t.SAMPLE_ALPHA_TO_COVERAGE):ye(t.SAMPLE_ALPHA_TO_COVERAGE)}function ke(Ce){P!==Ce&&(Ce?t.frontFace(t.CW):t.frontFace(t.CCW),P=Ce)}function ee(Ce){Ce!==use?(ae(t.CULL_FACE),Ce!==O&&(Ce===PL?t.cullFace(t.BACK):Ce===dse?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):ye(t.CULL_FACE),O=Ce}function Y(Ce){Ce!==$&&(D&&t.lineWidth(Ce),$=Ce)}function oe(Ce,ut,dt){Ce?(ae(t.POLYGON_OFFSET_FILL),(U!==ut||z!==dt)&&(t.polygonOffset(ut,dt),U=ut,z=dt)):ye(t.POLYGON_OFFSET_FILL)}function xe(Ce){Ce?ae(t.SCISSOR_TEST):ye(t.SCISSOR_TEST)}function Se(Ce){Ce===void 0&&(Ce=t.TEXTURE0+X-1),V!==Ce&&(t.activeTexture(Ce),V=Ce)}function be(Ce,ut,dt){dt===void 0&&(V===null?dt=t.TEXTURE0+X-1:dt=V);let yt=j[dt];yt===void 0&&(yt={type:void 0,texture:void 0},j[dt]=yt),(yt.type!==Ce||yt.texture!==ut)&&(V!==dt&&(t.activeTexture(dt),V=dt),t.bindTexture(Ce,ut||fe[Ce]),yt.type=Ce,yt.texture=ut)}function Re(){const Ce=j[V];Ce!==void 0&&Ce.type!==void 0&&(t.bindTexture(Ce.type,null),Ce.type=void 0,Ce.texture=void 0)}function Ke(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ze(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Pe(){try{t.texSubImage2D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function De(){try{t.texSubImage3D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function We(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function gt(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ct(){try{t.texStorage2D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Ye(){try{t.texStorage3D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Xe(){try{t.texImage2D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Le(){try{t.texImage3D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function he(Ce){te.equals(Ce)===!1&&(t.scissor(Ce.x,Ce.y,Ce.z,Ce.w),te.copy(Ce))}function He(Ce){re.equals(Ce)===!1&&(t.viewport(Ce.x,Ce.y,Ce.z,Ce.w),re.copy(Ce))}function ot(Ce,ut){let dt=d.get(ut);dt===void 0&&(dt=new WeakMap,d.set(ut,dt));let yt=dt.get(Ce);yt===void 0&&(yt=t.getUniformBlockIndex(ut,Ce.name),dt.set(Ce,yt))}function et(Ce,ut){const yt=d.get(ut).get(Ce);u.get(ut)!==yt&&(t.uniformBlockBinding(ut,yt,Ce.__bindingPointIndex),u.set(ut,yt))}function Ie(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),f={},V=null,j={},h={},p=new WeakMap,v=[],m=null,g=!1,y=null,x=null,S=null,_=null,C=null,T=null,A=null,k=new Bt(0,0,0),M=0,R=!1,P=null,O=null,$=null,U=null,z=null,te.set(0,0,t.canvas.width,t.canvas.height),re.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ae,disable:ye,bindFramebuffer:le,drawBuffers:H,useProgram:Me,setBlending:me,setMaterial:qe,setFlipSided:ke,setCullFace:ee,setLineWidth:Y,setPolygonOffset:oe,setScissorTest:xe,activeTexture:Se,bindTexture:be,unbindTexture:Re,compressedTexImage2D:Ke,compressedTexImage3D:ze,texImage2D:Xe,texImage3D:Le,updateUBOMapping:ot,uniformBlockBinding:et,texStorage2D:ct,texStorage3D:Ye,texSubImage2D:Pe,texSubImage3D:De,compressedTexSubImage2D:We,compressedTexSubImage3D:gt,scissor:he,viewport:He,reset:Ie}}function NZe(t,e,n,r,i,s,o){const a=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let d;const f=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(ee,Y){return h?new OffscreenCanvas(ee,Y):ew("canvas")}function v(ee,Y,oe,xe){let Se=1;if((ee.width>xe||ee.height>xe)&&(Se=xe/Math.max(ee.width,ee.height)),Se<1||Y===!0)if(typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ee instanceof ImageBitmap){const be=Y?TM:Math.floor,Re=be(Se*ee.width),Ke=be(Se*ee.height);d===void 0&&(d=p(Re,Ke));const ze=oe?p(Re,Ke):d;return ze.width=Re,ze.height=Ke,ze.getContext("2d").drawImage(ee,0,0,Re,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ee.width+"x"+ee.height+") to ("+Re+"x"+Ke+")."),ze}else return"data"in ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ee.width+"x"+ee.height+")."),ee;return ee}function m(ee){return hO(ee.width)&&hO(ee.height)}function g(ee){return a?!1:ee.wrapS!==go||ee.wrapT!==go||ee.minFilter!==Fi&&ee.minFilter!==Er}function y(ee,Y){return ee.generateMipmaps&&Y&&ee.minFilter!==Fi&&ee.minFilter!==Er}function x(ee){t.generateMipmap(ee)}function S(ee,Y,oe,xe,Se=!1){if(a===!1)return Y;if(ee!==null){if(t[ee]!==void 0)return t[ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ee+"'")}let be=Y;if(Y===t.RED&&(oe===t.FLOAT&&(be=t.R32F),oe===t.HALF_FLOAT&&(be=t.R16F),oe===t.UNSIGNED_BYTE&&(be=t.R8)),Y===t.RED_INTEGER&&(oe===t.UNSIGNED_BYTE&&(be=t.R8UI),oe===t.UNSIGNED_SHORT&&(be=t.R16UI),oe===t.UNSIGNED_INT&&(be=t.R32UI),oe===t.BYTE&&(be=t.R8I),oe===t.SHORT&&(be=t.R16I),oe===t.INT&&(be=t.R32I)),Y===t.RG&&(oe===t.FLOAT&&(be=t.RG32F),oe===t.HALF_FLOAT&&(be=t.RG16F),oe===t.UNSIGNED_BYTE&&(be=t.RG8)),Y===t.RGBA){const Re=Se?Kb:Tr.getTransfer(xe);oe===t.FLOAT&&(be=t.RGBA32F),oe===t.HALF_FLOAT&&(be=t.RGBA16F),oe===t.UNSIGNED_BYTE&&(be=Re===Vr?t.SRGB8_ALPHA8:t.RGBA8),oe===t.UNSIGNED_SHORT_4_4_4_4&&(be=t.RGBA4),oe===t.UNSIGNED_SHORT_5_5_5_1&&(be=t.RGB5_A1)}return(be===t.R16F||be===t.R32F||be===t.RG16F||be===t.RG32F||be===t.RGBA16F||be===t.RGBA32F)&&e.get("EXT_color_buffer_float"),be}function _(ee,Y,oe){return y(ee,oe)===!0||ee.isFramebufferTexture&&ee.minFilter!==Fi&&ee.minFilter!==Er?Math.log2(Math.max(Y.width,Y.height))+1:ee.mipmaps!==void 0&&ee.mipmaps.length>0?ee.mipmaps.length:ee.isCompressedTexture&&Array.isArray(ee.image)?Y.mipmaps.length:1}function C(ee){return ee===Fi||ee===_M||ee===N1?t.NEAREST:t.LINEAR}function T(ee){const Y=ee.target;Y.removeEventListener("dispose",T),k(Y),Y.isVideoTexture&&u.delete(Y)}function A(ee){const Y=ee.target;Y.removeEventListener("dispose",A),R(Y)}function k(ee){const Y=r.get(ee);if(Y.__webglInit===void 0)return;const oe=ee.source,xe=f.get(oe);if(xe){const Se=xe[Y.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&M(ee),Object.keys(xe).length===0&&f.delete(oe)}r.remove(ee)}function M(ee){const Y=r.get(ee);t.deleteTexture(Y.__webglTexture);const oe=ee.source,xe=f.get(oe);delete xe[Y.__cacheKey],o.memory.textures--}function R(ee){const Y=ee.texture,oe=r.get(ee),xe=r.get(Y);if(xe.__webglTexture!==void 0&&(t.deleteTexture(xe.__webglTexture),o.memory.textures--),ee.depthTexture&&ee.depthTexture.dispose(),ee.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(oe.__webglFramebuffer[Se]))for(let be=0;be<oe.__webglFramebuffer[Se].length;be++)t.deleteFramebuffer(oe.__webglFramebuffer[Se][be]);else t.deleteFramebuffer(oe.__webglFramebuffer[Se]);oe.__webglDepthbuffer&&t.deleteRenderbuffer(oe.__webglDepthbuffer[Se])}else{if(Array.isArray(oe.__webglFramebuffer))for(let Se=0;Se<oe.__webglFramebuffer.length;Se++)t.deleteFramebuffer(oe.__webglFramebuffer[Se]);else t.deleteFramebuffer(oe.__webglFramebuffer);if(oe.__webglDepthbuffer&&t.deleteRenderbuffer(oe.__webglDepthbuffer),oe.__webglMultisampledFramebuffer&&t.deleteFramebuffer(oe.__webglMultisampledFramebuffer),oe.__webglColorRenderbuffer)for(let Se=0;Se<oe.__webglColorRenderbuffer.length;Se++)oe.__webglColorRenderbuffer[Se]&&t.deleteRenderbuffer(oe.__webglColorRenderbuffer[Se]);oe.__webglDepthRenderbuffer&&t.deleteRenderbuffer(oe.__webglDepthRenderbuffer)}if(ee.isWebGLMultipleRenderTargets)for(let Se=0,be=Y.length;Se<be;Se++){const Re=r.get(Y[Se]);Re.__webglTexture&&(t.deleteTexture(Re.__webglTexture),o.memory.textures--),r.remove(Y[Se])}r.remove(Y),r.remove(ee)}let P=0;function O(){P=0}function $(){const ee=P;return ee>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ee+" texture units while this GPU supports only "+i.maxTextures),P+=1,ee}function U(ee){const Y=[];return Y.push(ee.wrapS),Y.push(ee.wrapT),Y.push(ee.wrapR||0),Y.push(ee.magFilter),Y.push(ee.minFilter),Y.push(ee.anisotropy),Y.push(ee.internalFormat),Y.push(ee.format),Y.push(ee.type),Y.push(ee.generateMipmaps),Y.push(ee.premultiplyAlpha),Y.push(ee.flipY),Y.push(ee.unpackAlignment),Y.push(ee.colorSpace),Y.join()}function z(ee,Y){const oe=r.get(ee);if(ee.isVideoTexture&&qe(ee),ee.isRenderTargetTexture===!1&&ee.version>0&&oe.__version!==ee.version){const xe=ee.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{te(oe,ee,Y);return}}n.bindTexture(t.TEXTURE_2D,oe.__webglTexture,t.TEXTURE0+Y)}function X(ee,Y){const oe=r.get(ee);if(ee.version>0&&oe.__version!==ee.version){te(oe,ee,Y);return}n.bindTexture(t.TEXTURE_2D_ARRAY,oe.__webglTexture,t.TEXTURE0+Y)}function D(ee,Y){const oe=r.get(ee);if(ee.version>0&&oe.__version!==ee.version){te(oe,ee,Y);return}n.bindTexture(t.TEXTURE_3D,oe.__webglTexture,t.TEXTURE0+Y)}function F(ee,Y){const oe=r.get(ee);if(ee.version>0&&oe.__version!==ee.version){re(oe,ee,Y);return}n.bindTexture(t.TEXTURE_CUBE_MAP,oe.__webglTexture,t.TEXTURE0+Y)}const W={[Hb]:t.REPEAT,[go]:t.CLAMP_TO_EDGE,[jb]:t.MIRRORED_REPEAT},V={[Fi]:t.NEAREST,[_M]:t.NEAREST_MIPMAP_NEAREST,[N1]:t.NEAREST_MIPMAP_LINEAR,[Er]:t.LINEAR,[QU]:t.LINEAR_MIPMAP_NEAREST,[ch]:t.LINEAR_MIPMAP_LINEAR},j={[noe]:t.NEVER,[loe]:t.ALWAYS,[roe]:t.LESS,[dB]:t.LEQUAL,[ioe]:t.EQUAL,[aoe]:t.GEQUAL,[soe]:t.GREATER,[ooe]:t.NOTEQUAL};function J(ee,Y,oe){if(oe?(t.texParameteri(ee,t.TEXTURE_WRAP_S,W[Y.wrapS]),t.texParameteri(ee,t.TEXTURE_WRAP_T,W[Y.wrapT]),(ee===t.TEXTURE_3D||ee===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ee,t.TEXTURE_WRAP_R,W[Y.wrapR]),t.texParameteri(ee,t.TEXTURE_MAG_FILTER,V[Y.magFilter]),t.texParameteri(ee,t.TEXTURE_MIN_FILTER,V[Y.minFilter])):(t.texParameteri(ee,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(ee,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(ee===t.TEXTURE_3D||ee===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ee,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(Y.wrapS!==go||Y.wrapT!==go)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(ee,t.TEXTURE_MAG_FILTER,C(Y.magFilter)),t.texParameteri(ee,t.TEXTURE_MIN_FILTER,C(Y.minFilter)),Y.minFilter!==Fi&&Y.minFilter!==Er&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Y.compareFunction&&(t.texParameteri(ee,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(ee,t.TEXTURE_COMPARE_FUNC,j[Y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const xe=e.get("EXT_texture_filter_anisotropic");if(Y.magFilter===Fi||Y.minFilter!==N1&&Y.minFilter!==ch||Y.type===Ms&&e.has("OES_texture_float_linear")===!1||a===!1&&Y.type===xo&&e.has("OES_texture_half_float_linear")===!1)return;(Y.anisotropy>1||r.get(Y).__currentAnisotropy)&&(t.texParameterf(ee,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,i.getMaxAnisotropy())),r.get(Y).__currentAnisotropy=Y.anisotropy)}}function Q(ee,Y){let oe=!1;ee.__webglInit===void 0&&(ee.__webglInit=!0,Y.addEventListener("dispose",T));const xe=Y.source;let Se=f.get(xe);Se===void 0&&(Se={},f.set(xe,Se));const be=U(Y);if(be!==ee.__cacheKey){Se[be]===void 0&&(Se[be]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,oe=!0),Se[be].usedTimes++;const Re=Se[ee.__cacheKey];Re!==void 0&&(Se[ee.__cacheKey].usedTimes--,Re.usedTimes===0&&M(Y)),ee.__cacheKey=be,ee.__webglTexture=Se[be].texture}return oe}function te(ee,Y,oe){let xe=t.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(xe=t.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(xe=t.TEXTURE_3D);const Se=Q(ee,Y),be=Y.source;n.bindTexture(xe,ee.__webglTexture,t.TEXTURE0+oe);const Re=r.get(be);if(be.version!==Re.__version||Se===!0){n.activeTexture(t.TEXTURE0+oe);const Ke=Tr.getPrimaries(Tr.workingColorSpace),ze=Y.colorSpace===Ha?null:Tr.getPrimaries(Y.colorSpace),Pe=Y.colorSpace===Ha||Ke===ze?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Y.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Y.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Pe);const De=g(Y)&&m(Y.image)===!1;let We=v(Y.image,De,!1,i.maxTextureSize);We=ke(Y,We);const gt=m(We)||a,ct=s.convert(Y.format,Y.colorSpace);let Ye=s.convert(Y.type),Xe=S(Y.internalFormat,ct,Ye,Y.colorSpace,Y.isVideoTexture);J(xe,Y,gt);let Le;const he=Y.mipmaps,He=a&&Y.isVideoTexture!==!0&&Xe!==aB,ot=Re.__version===void 0||Se===!0,et=_(Y,We,gt);if(Y.isDepthTexture)Xe=t.DEPTH_COMPONENT,a?Y.type===Ms?Xe=t.DEPTH_COMPONENT32F:Y.type===kd?Xe=t.DEPTH_COMPONENT24:Y.type===qf?Xe=t.DEPTH24_STENCIL8:Xe=t.DEPTH_COMPONENT16:Y.type===Ms&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Y.format===Yf&&Xe===t.DEPTH_COMPONENT&&Y.type!==ZA&&Y.type!==kd&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Y.type=kd,Ye=s.convert(Y.type)),Y.format===Tm&&Xe===t.DEPTH_COMPONENT&&(Xe=t.DEPTH_STENCIL,Y.type!==qf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Y.type=qf,Ye=s.convert(Y.type))),ot&&(He?n.texStorage2D(t.TEXTURE_2D,1,Xe,We.width,We.height):n.texImage2D(t.TEXTURE_2D,0,Xe,We.width,We.height,0,ct,Ye,null));else if(Y.isDataTexture)if(he.length>0&&gt){He&&ot&&n.texStorage2D(t.TEXTURE_2D,et,Xe,he[0].width,he[0].height);for(let Ie=0,Ce=he.length;Ie<Ce;Ie++)Le=he[Ie],He?n.texSubImage2D(t.TEXTURE_2D,Ie,0,0,Le.width,Le.height,ct,Ye,Le.data):n.texImage2D(t.TEXTURE_2D,Ie,Xe,Le.width,Le.height,0,ct,Ye,Le.data);Y.generateMipmaps=!1}else He?(ot&&n.texStorage2D(t.TEXTURE_2D,et,Xe,We.width,We.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,We.width,We.height,ct,Ye,We.data)):n.texImage2D(t.TEXTURE_2D,0,Xe,We.width,We.height,0,ct,Ye,We.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){He&&ot&&n.texStorage3D(t.TEXTURE_2D_ARRAY,et,Xe,he[0].width,he[0].height,We.depth);for(let Ie=0,Ce=he.length;Ie<Ce;Ie++)Le=he[Ie],Y.format!==vo?ct!==null?He?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ie,0,0,0,Le.width,Le.height,We.depth,ct,Le.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ie,Xe,Le.width,Le.height,We.depth,0,Le.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ie,0,0,0,Le.width,Le.height,We.depth,ct,Ye,Le.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ie,Xe,Le.width,Le.height,We.depth,0,ct,Ye,Le.data)}else{He&&ot&&n.texStorage2D(t.TEXTURE_2D,et,Xe,he[0].width,he[0].height);for(let Ie=0,Ce=he.length;Ie<Ce;Ie++)Le=he[Ie],Y.format!==vo?ct!==null?He?n.compressedTexSubImage2D(t.TEXTURE_2D,Ie,0,0,Le.width,Le.height,ct,Le.data):n.compressedTexImage2D(t.TEXTURE_2D,Ie,Xe,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?n.texSubImage2D(t.TEXTURE_2D,Ie,0,0,Le.width,Le.height,ct,Ye,Le.data):n.texImage2D(t.TEXTURE_2D,Ie,Xe,Le.width,Le.height,0,ct,Ye,Le.data)}else if(Y.isDataArrayTexture)He?(ot&&n.texStorage3D(t.TEXTURE_2D_ARRAY,et,Xe,We.width,We.height,We.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,We.width,We.height,We.depth,ct,Ye,We.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Xe,We.width,We.height,We.depth,0,ct,Ye,We.data);else if(Y.isData3DTexture)He?(ot&&n.texStorage3D(t.TEXTURE_3D,et,Xe,We.width,We.height,We.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,We.width,We.height,We.depth,ct,Ye,We.data)):n.texImage3D(t.TEXTURE_3D,0,Xe,We.width,We.height,We.depth,0,ct,Ye,We.data);else if(Y.isFramebufferTexture){if(ot)if(He)n.texStorage2D(t.TEXTURE_2D,et,Xe,We.width,We.height);else{let Ie=We.width,Ce=We.height;for(let ut=0;ut<et;ut++)n.texImage2D(t.TEXTURE_2D,ut,Xe,Ie,Ce,0,ct,Ye,null),Ie>>=1,Ce>>=1}}else if(he.length>0&&gt){He&&ot&&n.texStorage2D(t.TEXTURE_2D,et,Xe,he[0].width,he[0].height);for(let Ie=0,Ce=he.length;Ie<Ce;Ie++)Le=he[Ie],He?n.texSubImage2D(t.TEXTURE_2D,Ie,0,0,ct,Ye,Le):n.texImage2D(t.TEXTURE_2D,Ie,Xe,ct,Ye,Le);Y.generateMipmaps=!1}else He?(ot&&n.texStorage2D(t.TEXTURE_2D,et,Xe,We.width,We.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,ct,Ye,We)):n.texImage2D(t.TEXTURE_2D,0,Xe,ct,Ye,We);y(Y,gt)&&x(xe),Re.__version=be.version,Y.onUpdate&&Y.onUpdate(Y)}ee.__version=Y.version}function re(ee,Y,oe){if(Y.image.length!==6)return;const xe=Q(ee,Y),Se=Y.source;n.bindTexture(t.TEXTURE_CUBE_MAP,ee.__webglTexture,t.TEXTURE0+oe);const be=r.get(Se);if(Se.version!==be.__version||xe===!0){n.activeTexture(t.TEXTURE0+oe);const Re=Tr.getPrimaries(Tr.workingColorSpace),Ke=Y.colorSpace===Ha?null:Tr.getPrimaries(Y.colorSpace),ze=Y.colorSpace===Ha||Re===Ke?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Y.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Y.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);const Pe=Y.isCompressedTexture||Y.image[0].isCompressedTexture,De=Y.image[0]&&Y.image[0].isDataTexture,We=[];for(let Ie=0;Ie<6;Ie++)!Pe&&!De?We[Ie]=v(Y.image[Ie],!1,!0,i.maxCubemapSize):We[Ie]=De?Y.image[Ie].image:Y.image[Ie],We[Ie]=ke(Y,We[Ie]);const gt=We[0],ct=m(gt)||a,Ye=s.convert(Y.format,Y.colorSpace),Xe=s.convert(Y.type),Le=S(Y.internalFormat,Ye,Xe,Y.colorSpace),he=a&&Y.isVideoTexture!==!0,He=be.__version===void 0||xe===!0;let ot=_(Y,gt,ct);J(t.TEXTURE_CUBE_MAP,Y,ct);let et;if(Pe){he&&He&&n.texStorage2D(t.TEXTURE_CUBE_MAP,ot,Le,gt.width,gt.height);for(let Ie=0;Ie<6;Ie++){et=We[Ie].mipmaps;for(let Ce=0;Ce<et.length;Ce++){const ut=et[Ce];Y.format!==vo?Ye!==null?he?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce,0,0,ut.width,ut.height,Ye,ut.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce,Le,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce,0,0,ut.width,ut.height,Ye,Xe,ut.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce,Le,ut.width,ut.height,0,Ye,Xe,ut.data)}}}else{et=Y.mipmaps,he&&He&&(et.length>0&&ot++,n.texStorage2D(t.TEXTURE_CUBE_MAP,ot,Le,We[0].width,We[0].height));for(let Ie=0;Ie<6;Ie++)if(De){he?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,We[Ie].width,We[Ie].height,Ye,Xe,We[Ie].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,Le,We[Ie].width,We[Ie].height,0,Ye,Xe,We[Ie].data);for(let Ce=0;Ce<et.length;Ce++){const dt=et[Ce].image[Ie].image;he?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce+1,0,0,dt.width,dt.height,Ye,Xe,dt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce+1,Le,dt.width,dt.height,0,Ye,Xe,dt.data)}}else{he?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,Ye,Xe,We[Ie]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,Le,Ye,Xe,We[Ie]);for(let Ce=0;Ce<et.length;Ce++){const ut=et[Ce];he?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce+1,0,0,Ye,Xe,ut.image[Ie]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce+1,Le,Ye,Xe,ut.image[Ie])}}}y(Y,ct)&&x(t.TEXTURE_CUBE_MAP),be.__version=Se.version,Y.onUpdate&&Y.onUpdate(Y)}ee.__version=Y.version}function se(ee,Y,oe,xe,Se,be){const Re=s.convert(oe.format,oe.colorSpace),Ke=s.convert(oe.type),ze=S(oe.internalFormat,Re,Ke,oe.colorSpace);if(!r.get(Y).__hasExternalTextures){const De=Math.max(1,Y.width>>be),We=Math.max(1,Y.height>>be);Se===t.TEXTURE_3D||Se===t.TEXTURE_2D_ARRAY?n.texImage3D(Se,be,ze,De,We,Y.depth,0,Re,Ke,null):n.texImage2D(Se,be,ze,De,We,0,Re,Ke,null)}n.bindFramebuffer(t.FRAMEBUFFER,ee),me(Y)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,xe,Se,r.get(oe).__webglTexture,0,Ee(Y)):(Se===t.TEXTURE_2D||Se>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Se<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,xe,Se,r.get(oe).__webglTexture,be),n.bindFramebuffer(t.FRAMEBUFFER,null)}function fe(ee,Y,oe){if(t.bindRenderbuffer(t.RENDERBUFFER,ee),Y.depthBuffer&&!Y.stencilBuffer){let xe=a===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(oe||me(Y)){const Se=Y.depthTexture;Se&&Se.isDepthTexture&&(Se.type===Ms?xe=t.DEPTH_COMPONENT32F:Se.type===kd&&(xe=t.DEPTH_COMPONENT24));const be=Ee(Y);me(Y)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,be,xe,Y.width,Y.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,be,xe,Y.width,Y.height)}else t.renderbufferStorage(t.RENDERBUFFER,xe,Y.width,Y.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,ee)}else if(Y.depthBuffer&&Y.stencilBuffer){const xe=Ee(Y);oe&&me(Y)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,xe,t.DEPTH24_STENCIL8,Y.width,Y.height):me(Y)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,xe,t.DEPTH24_STENCIL8,Y.width,Y.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,Y.width,Y.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,ee)}else{const xe=Y.isWebGLMultipleRenderTargets===!0?Y.texture:[Y.texture];for(let Se=0;Se<xe.length;Se++){const be=xe[Se],Re=s.convert(be.format,be.colorSpace),Ke=s.convert(be.type),ze=S(be.internalFormat,Re,Ke,be.colorSpace),Pe=Ee(Y);oe&&me(Y)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Pe,ze,Y.width,Y.height):me(Y)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Pe,ze,Y.width,Y.height):t.renderbufferStorage(t.RENDERBUFFER,ze,Y.width,Y.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ae(ee,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,ee),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Y.depthTexture).__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),z(Y.depthTexture,0);const xe=r.get(Y.depthTexture).__webglTexture,Se=Ee(Y);if(Y.depthTexture.format===Yf)me(Y)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,xe,0,Se):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,xe,0);else if(Y.depthTexture.format===Tm)me(Y)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,xe,0,Se):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function ye(ee){const Y=r.get(ee),oe=ee.isWebGLCubeRenderTarget===!0;if(ee.depthTexture&&!Y.__autoAllocateDepthBuffer){if(oe)throw new Error("target.depthTexture not supported in Cube render targets");ae(Y.__webglFramebuffer,ee)}else if(oe){Y.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)n.bindFramebuffer(t.FRAMEBUFFER,Y.__webglFramebuffer[xe]),Y.__webglDepthbuffer[xe]=t.createRenderbuffer(),fe(Y.__webglDepthbuffer[xe],ee,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer=t.createRenderbuffer(),fe(Y.__webglDepthbuffer,ee,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function le(ee,Y,oe){const xe=r.get(ee);Y!==void 0&&se(xe.__webglFramebuffer,ee,ee.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),oe!==void 0&&ye(ee)}function H(ee){const Y=ee.texture,oe=r.get(ee),xe=r.get(Y);ee.addEventListener("dispose",A),ee.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=t.createTexture()),xe.__version=Y.version,o.memory.textures++);const Se=ee.isWebGLCubeRenderTarget===!0,be=ee.isWebGLMultipleRenderTargets===!0,Re=m(ee)||a;if(Se){oe.__webglFramebuffer=[];for(let Ke=0;Ke<6;Ke++)if(a&&Y.mipmaps&&Y.mipmaps.length>0){oe.__webglFramebuffer[Ke]=[];for(let ze=0;ze<Y.mipmaps.length;ze++)oe.__webglFramebuffer[Ke][ze]=t.createFramebuffer()}else oe.__webglFramebuffer[Ke]=t.createFramebuffer()}else{if(a&&Y.mipmaps&&Y.mipmaps.length>0){oe.__webglFramebuffer=[];for(let Ke=0;Ke<Y.mipmaps.length;Ke++)oe.__webglFramebuffer[Ke]=t.createFramebuffer()}else oe.__webglFramebuffer=t.createFramebuffer();if(be)if(i.drawBuffers){const Ke=ee.texture;for(let ze=0,Pe=Ke.length;ze<Pe;ze++){const De=r.get(Ke[ze]);De.__webglTexture===void 0&&(De.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&ee.samples>0&&me(ee)===!1){const Ke=be?Y:[Y];oe.__webglMultisampledFramebuffer=t.createFramebuffer(),oe.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,oe.__webglMultisampledFramebuffer);for(let ze=0;ze<Ke.length;ze++){const Pe=Ke[ze];oe.__webglColorRenderbuffer[ze]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,oe.__webglColorRenderbuffer[ze]);const De=s.convert(Pe.format,Pe.colorSpace),We=s.convert(Pe.type),gt=S(Pe.internalFormat,De,We,Pe.colorSpace,ee.isXRRenderTarget===!0),ct=Ee(ee);t.renderbufferStorageMultisample(t.RENDERBUFFER,ct,gt,ee.width,ee.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ze,t.RENDERBUFFER,oe.__webglColorRenderbuffer[ze])}t.bindRenderbuffer(t.RENDERBUFFER,null),ee.depthBuffer&&(oe.__webglDepthRenderbuffer=t.createRenderbuffer(),fe(oe.__webglDepthRenderbuffer,ee,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Se){n.bindTexture(t.TEXTURE_CUBE_MAP,xe.__webglTexture),J(t.TEXTURE_CUBE_MAP,Y,Re);for(let Ke=0;Ke<6;Ke++)if(a&&Y.mipmaps&&Y.mipmaps.length>0)for(let ze=0;ze<Y.mipmaps.length;ze++)se(oe.__webglFramebuffer[Ke][ze],ee,Y,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,ze);else se(oe.__webglFramebuffer[Ke],ee,Y,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0);y(Y,Re)&&x(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(be){const Ke=ee.texture;for(let ze=0,Pe=Ke.length;ze<Pe;ze++){const De=Ke[ze],We=r.get(De);n.bindTexture(t.TEXTURE_2D,We.__webglTexture),J(t.TEXTURE_2D,De,Re),se(oe.__webglFramebuffer,ee,De,t.COLOR_ATTACHMENT0+ze,t.TEXTURE_2D,0),y(De,Re)&&x(t.TEXTURE_2D)}n.unbindTexture()}else{let Ke=t.TEXTURE_2D;if((ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(a?Ke=ee.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ke,xe.__webglTexture),J(Ke,Y,Re),a&&Y.mipmaps&&Y.mipmaps.length>0)for(let ze=0;ze<Y.mipmaps.length;ze++)se(oe.__webglFramebuffer[ze],ee,Y,t.COLOR_ATTACHMENT0,Ke,ze);else se(oe.__webglFramebuffer,ee,Y,t.COLOR_ATTACHMENT0,Ke,0);y(Y,Re)&&x(Ke),n.unbindTexture()}ee.depthBuffer&&ye(ee)}function Me(ee){const Y=m(ee)||a,oe=ee.isWebGLMultipleRenderTargets===!0?ee.texture:[ee.texture];for(let xe=0,Se=oe.length;xe<Se;xe++){const be=oe[xe];if(y(be,Y)){const Re=ee.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Ke=r.get(be).__webglTexture;n.bindTexture(Re,Ke),x(Re),n.unbindTexture()}}}function we(ee){if(a&&ee.samples>0&&me(ee)===!1){const Y=ee.isWebGLMultipleRenderTargets?ee.texture:[ee.texture],oe=ee.width,xe=ee.height;let Se=t.COLOR_BUFFER_BIT;const be=[],Re=ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ke=r.get(ee),ze=ee.isWebGLMultipleRenderTargets===!0;if(ze)for(let Pe=0;Pe<Y.length;Pe++)n.bindFramebuffer(t.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Pe,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ke.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Pe,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ke.__webglFramebuffer);for(let Pe=0;Pe<Y.length;Pe++){be.push(t.COLOR_ATTACHMENT0+Pe),ee.depthBuffer&&be.push(Re);const De=Ke.__ignoreDepthValues!==void 0?Ke.__ignoreDepthValues:!1;if(De===!1&&(ee.depthBuffer&&(Se|=t.DEPTH_BUFFER_BIT),ee.stencilBuffer&&(Se|=t.STENCIL_BUFFER_BIT)),ze&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ke.__webglColorRenderbuffer[Pe]),De===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Re]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Re])),ze){const We=r.get(Y[Pe]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,We,0)}t.blitFramebuffer(0,0,oe,xe,0,0,oe,xe,Se,t.NEAREST),c&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,be)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),ze)for(let Pe=0;Pe<Y.length;Pe++){n.bindFramebuffer(t.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Pe,t.RENDERBUFFER,Ke.__webglColorRenderbuffer[Pe]);const De=r.get(Y[Pe]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ke.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Pe,t.TEXTURE_2D,De,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ke.__webglMultisampledFramebuffer)}}function Ee(ee){return Math.min(i.maxSamples,ee.samples)}function me(ee){const Y=r.get(ee);return a&&ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function qe(ee){const Y=o.render.frame;u.get(ee)!==Y&&(u.set(ee,Y),ee.update())}function ke(ee,Y){const oe=ee.colorSpace,xe=ee.format,Se=ee.type;return ee.isCompressedTexture===!0||ee.isVideoTexture===!0||ee.format===CM||oe!==zu&&oe!==Ha&&(Tr.getTransfer(oe)===Vr?a===!1?e.has("EXT_sRGB")===!0&&xe===vo?(ee.format=CM,ee.minFilter=Er,ee.generateMipmaps=!1):Y=hB.sRGBToLinear(Y):(xe!==vo||Se!==Mu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",oe)),Y}this.allocateTextureUnit=$,this.resetTextureUnits=O,this.setTexture2D=z,this.setTexture2DArray=X,this.setTexture3D=D,this.setTextureCube=F,this.rebindTextures=le,this.setupRenderTarget=H,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=we,this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=se,this.useMultisampledRTT=me}function Soe(t,e,n){const r=n.isWebGL2;function i(s,o=Ha){let a;const l=Tr.getTransfer(o);if(s===Mu)return t.UNSIGNED_BYTE;if(s===tB)return t.UNSIGNED_SHORT_4_4_4_4;if(s===nB)return t.UNSIGNED_SHORT_5_5_5_1;if(s===Gse)return t.BYTE;if(s===Hse)return t.SHORT;if(s===ZA)return t.UNSIGNED_SHORT;if(s===eB)return t.INT;if(s===kd)return t.UNSIGNED_INT;if(s===Ms)return t.FLOAT;if(s===xo)return r?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===jse)return t.ALPHA;if(s===vo)return t.RGBA;if(s===Xse)return t.LUMINANCE;if(s===qse)return t.LUMINANCE_ALPHA;if(s===Yf)return t.DEPTH_COMPONENT;if(s===Tm)return t.DEPTH_STENCIL;if(s===CM)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===rB)return t.RED;if(s===iB)return t.RED_INTEGER;if(s===Yse)return t.RG;if(s===sB)return t.RG_INTEGER;if(s===oB)return t.RGBA_INTEGER;if(s===QT||s===eE||s===tE||s===nE)if(l===Vr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===QT)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===eE)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===tE)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===nE)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===QT)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===eE)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===tE)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===nE)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===BL||s===zL||s===WL||s===VL)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===BL)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===zL)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===WL)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===VL)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===aB)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===GL||s===HL)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===GL)return l===Vr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===HL)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===jL||s===XL||s===qL||s===YL||s===KL||s===ZL||s===JL||s===QL||s===eO||s===tO||s===nO||s===rO||s===iO||s===sO)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===jL)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===XL)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===qL)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===YL)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===KL)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===ZL)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===JL)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===QL)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===eO)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===tO)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===nO)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===rO)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===iO)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===sO)return l===Vr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===rE||s===oO||s===aO)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===rE)return l===Vr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===oO)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===aO)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===Kse||s===lO||s===cO||s===uO)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===rE)return a.COMPRESSED_RED_RGTC1_EXT;if(s===lO)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===cO)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===uO)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===qf?r?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class _oe extends Ti{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class O0 extends yr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const PZe={type:"move"};class $P{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new O0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new O0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new O0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const m=n.getJointPose(v,r),g=this._getHandJoint(c,v);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=m.radius),g.visible=m!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),h=.02,p=.005;c.inputState.pinching&&f>h+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=h-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(PZe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new O0;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class $Ze extends Yu{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,h=null,p=null;const v=n.getContextAttributes();let m=null,g=null;const y=[],x=[],S=new lt;let _=null;const C=new Ti;C.layers.enable(1),C.viewport=new er;const T=new Ti;T.layers.enable(2),T.viewport=new er;const A=[C,T],k=new _oe;k.layers.enable(1),k.layers.enable(2);let M=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let Q=y[J];return Q===void 0&&(Q=new $P,y[J]=Q),Q.getTargetRaySpace()},this.getControllerGrip=function(J){let Q=y[J];return Q===void 0&&(Q=new $P,y[J]=Q),Q.getGripSpace()},this.getHand=function(J){let Q=y[J];return Q===void 0&&(Q=new $P,y[J]=Q),Q.getHandSpace()};function P(J){const Q=x.indexOf(J.inputSource);if(Q===-1)return;const te=y[Q];te!==void 0&&(te.update(J.inputSource,J.frame,c||o),te.dispatchEvent({type:J.type,data:J.inputSource}))}function O(){i.removeEventListener("select",P),i.removeEventListener("selectstart",P),i.removeEventListener("selectend",P),i.removeEventListener("squeeze",P),i.removeEventListener("squeezestart",P),i.removeEventListener("squeezeend",P),i.removeEventListener("end",O),i.removeEventListener("inputsourceschange",$);for(let J=0;J<y.length;J++){const Q=x[J];Q!==null&&(x[J]=null,y[J].disconnect(Q))}M=null,R=null,e.setRenderTarget(m),h=null,f=null,d=null,i=null,g=null,j.stop(),r.isPresenting=!1,e.setPixelRatio(_),e.setSize(S.width,S.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(J){s=J,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){a=J,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(J){c=J},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(J){if(i=J,i!==null){if(m=e.getRenderTarget(),i.addEventListener("select",P),i.addEventListener("selectstart",P),i.addEventListener("selectend",P),i.addEventListener("squeeze",P),i.addEventListener("squeezestart",P),i.addEventListener("squeezeend",P),i.addEventListener("end",O),i.addEventListener("inputsourceschange",$),v.xrCompatible!==!0&&await n.makeXRCompatible(),_=e.getPixelRatio(),e.getSize(S),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Q={antialias:i.renderState.layers===void 0?v.antialias:!0,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(i,n,Q),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),g=new Hl(h.framebufferWidth,h.framebufferHeight,{format:vo,type:Mu,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let Q=null,te=null,re=null;v.depth&&(re=v.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Q=v.stencil?Tm:Yf,te=v.stencil?qf:kd);const se={colorFormat:n.RGBA8,depthFormat:re,scaleFactor:s};d=new XRWebGLBinding(i,n),f=d.createProjectionLayer(se),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),g=new Hl(f.textureWidth,f.textureHeight,{format:vo,type:Mu,depthTexture:new tI(f.textureWidth,f.textureHeight,te,void 0,void 0,void 0,void 0,void 0,void 0,Q),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0});const fe=e.properties.get(g);fe.__ignoreDepthValues=f.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),j.setContext(i),j.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function $(J){for(let Q=0;Q<J.removed.length;Q++){const te=J.removed[Q],re=x.indexOf(te);re>=0&&(x[re]=null,y[re].disconnect(te))}for(let Q=0;Q<J.added.length;Q++){const te=J.added[Q];let re=x.indexOf(te);if(re===-1){for(let fe=0;fe<y.length;fe++)if(fe>=x.length){x.push(te),re=fe;break}else if(x[fe]===null){x[fe]=te,re=fe;break}if(re===-1)break}const se=y[re];se&&se.connect(te)}}const U=new pe,z=new pe;function X(J,Q,te){U.setFromMatrixPosition(Q.matrixWorld),z.setFromMatrixPosition(te.matrixWorld);const re=U.distanceTo(z),se=Q.projectionMatrix.elements,fe=te.projectionMatrix.elements,ae=se[14]/(se[10]-1),ye=se[14]/(se[10]+1),le=(se[9]+1)/se[5],H=(se[9]-1)/se[5],Me=(se[8]-1)/se[0],we=(fe[8]+1)/fe[0],Ee=ae*Me,me=ae*we,qe=re/(-Me+we),ke=qe*-Me;Q.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(ke),J.translateZ(qe),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert();const ee=ae+qe,Y=ye+qe,oe=Ee-ke,xe=me+(re-ke),Se=le*ye/Y*ee,be=H*ye/Y*ee;J.projectionMatrix.makePerspective(oe,xe,Se,be,ee,Y),J.projectionMatrixInverse.copy(J.projectionMatrix).invert()}function D(J,Q){Q===null?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(Q.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(i===null)return;k.near=T.near=C.near=J.near,k.far=T.far=C.far=J.far,(M!==k.near||R!==k.far)&&(i.updateRenderState({depthNear:k.near,depthFar:k.far}),M=k.near,R=k.far);const Q=J.parent,te=k.cameras;D(k,Q);for(let re=0;re<te.length;re++)D(te[re],Q);te.length===2?X(k,C,T):k.projectionMatrix.copy(C.projectionMatrix),F(J,k,Q)};function F(J,Q,te){te===null?J.matrix.copy(Q.matrixWorld):(J.matrix.copy(te.matrixWorld),J.matrix.invert(),J.matrix.multiply(Q.matrixWorld)),J.matrix.decompose(J.position,J.quaternion,J.scale),J.updateMatrixWorld(!0),J.projectionMatrix.copy(Q.projectionMatrix),J.projectionMatrixInverse.copy(Q.projectionMatrixInverse),J.isPerspectiveCamera&&(J.fov=Pv*2*Math.atan(1/J.projectionMatrix.elements[5]),J.zoom=1)}this.getCamera=function(){return k},this.getFoveation=function(){if(!(f===null&&h===null))return l},this.setFoveation=function(J){l=J,f!==null&&(f.fixedFoveation=J),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=J)};let W=null;function V(J,Q){if(u=Q.getViewerPose(c||o),p=Q,u!==null){const te=u.views;h!==null&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let re=!1;te.length!==k.cameras.length&&(k.cameras.length=0,re=!0);for(let se=0;se<te.length;se++){const fe=te[se];let ae=null;if(h!==null)ae=h.getViewport(fe);else{const le=d.getViewSubImage(f,fe);ae=le.viewport,se===0&&(e.setRenderTargetTextures(g,le.colorTexture,f.ignoreDepthValues?void 0:le.depthStencilTexture),e.setRenderTarget(g))}let ye=A[se];ye===void 0&&(ye=new Ti,ye.layers.enable(se),ye.viewport=new er,A[se]=ye),ye.matrix.fromArray(fe.transform.matrix),ye.matrix.decompose(ye.position,ye.quaternion,ye.scale),ye.projectionMatrix.fromArray(fe.projectionMatrix),ye.projectionMatrixInverse.copy(ye.projectionMatrix).invert(),ye.viewport.set(ae.x,ae.y,ae.width,ae.height),se===0&&(k.matrix.copy(ye.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale)),re===!0&&k.cameras.push(ye)}}for(let te=0;te<y.length;te++){const re=x[te],se=y[te];re!==null&&se!==void 0&&se.update(re,Q,c||o)}W&&W(J,Q),Q.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Q}),p=null}const j=new goe;j.setAnimationLoop(V),this.setAnimationLoop=function(J){W=J},this.dispose=function(){}}}function DZe(t,e){function n(m,g){m.matrixAutoUpdate===!0&&m.updateMatrix(),g.value.copy(m.matrix)}function r(m,g){g.color.getRGB(m.fogColor.value,poe(t)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function i(m,g,y,x,S){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(m,g):g.isMeshToonMaterial?(s(m,g),d(m,g)):g.isMeshPhongMaterial?(s(m,g),u(m,g)):g.isMeshStandardMaterial?(s(m,g),f(m,g),g.isMeshPhysicalMaterial&&h(m,g,S)):g.isMeshMatcapMaterial?(s(m,g),p(m,g)):g.isMeshDepthMaterial?s(m,g):g.isMeshDistanceMaterial?(s(m,g),v(m,g)):g.isMeshNormalMaterial?s(m,g):g.isLineBasicMaterial?(o(m,g),g.isLineDashedMaterial&&a(m,g)):g.isPointsMaterial?l(m,g,y,x):g.isSpriteMaterial?c(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map,n(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,n(g.alphaMap,m.alphaMapTransform)),g.bumpMap&&(m.bumpMap.value=g.bumpMap,n(g.bumpMap,m.bumpMapTransform),m.bumpScale.value=g.bumpScale,g.side===Qi&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,n(g.normalMap,m.normalMapTransform),m.normalScale.value.copy(g.normalScale),g.side===Qi&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,n(g.displacementMap,m.displacementMapTransform),m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,m.emissiveMapTransform)),g.specularMap&&(m.specularMap.value=g.specularMap,n(g.specularMap,m.specularMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const y=e.get(g).envMap;if(y&&(m.envMap.value=y,m.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const x=t._useLegacyLights===!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*x,n(g.lightMap,m.lightMapTransform)}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,m.aoMapTransform))}function o(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,g.map&&(m.map.value=g.map,n(g.map,m.mapTransform))}function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function l(m,g,y,x){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*y,m.scale.value=x*.5,g.map&&(m.map.value=g.map,n(g.map,m.uvTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,n(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}function c(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map,n(g.map,m.mapTransform)),g.alphaMap&&(m.alphaMap.value=g.alphaMap,n(g.alphaMap,m.alphaMapTransform)),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest)}function u(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function d(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function f(m,g){m.metalness.value=g.metalness,g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,m.metalnessMapTransform)),m.roughness.value=g.roughness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,m.roughnessMapTransform)),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function h(m,g,y){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,m.sheenColorMapTransform)),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,m.sheenRoughnessMapTransform))),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,m.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(m.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Qi&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,m.iridescenceMapTransform)),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=y.texture,m.transmissionSamplerSize.value.set(y.width,y.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,m.transmissionMapTransform)),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(m.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(m.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,m.specularColorMapTransform)),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,m.specularIntensityMapTransform))}function p(m,g){g.matcap&&(m.matcap.value=g.matcap)}function v(m,g){const y=e.get(g).light;m.referencePosition.value.setFromMatrixPosition(y.matrixWorld),m.nearDistance.value=y.shadow.camera.near,m.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function LZe(t,e,n,r){let i={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(y,x){const S=x.program;r.uniformBlockBinding(y,S)}function c(y,x){let S=i[y.id];S===void 0&&(p(y),S=u(y),i[y.id]=S,y.addEventListener("dispose",m));const _=x.program;r.updateUBOMapping(y,_);const C=e.render.frame;s[y.id]!==C&&(f(y),s[y.id]=C)}function u(y){const x=d();y.__bindingPointIndex=x;const S=t.createBuffer(),_=y.__size,C=y.usage;return t.bindBuffer(t.UNIFORM_BUFFER,S),t.bufferData(t.UNIFORM_BUFFER,_,C),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,x,S),S}function d(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const x=i[y.id],S=y.uniforms,_=y.__cache;t.bindBuffer(t.UNIFORM_BUFFER,x);for(let C=0,T=S.length;C<T;C++){const A=Array.isArray(S[C])?S[C]:[S[C]];for(let k=0,M=A.length;k<M;k++){const R=A[k];if(h(R,C,k,_)===!0){const P=R.__offset,O=Array.isArray(R.value)?R.value:[R.value];let $=0;for(let U=0;U<O.length;U++){const z=O[U],X=v(z);typeof z=="number"||typeof z=="boolean"?(R.__data[0]=z,t.bufferSubData(t.UNIFORM_BUFFER,P+$,R.__data)):z.isMatrix3?(R.__data[0]=z.elements[0],R.__data[1]=z.elements[1],R.__data[2]=z.elements[2],R.__data[3]=0,R.__data[4]=z.elements[3],R.__data[5]=z.elements[4],R.__data[6]=z.elements[5],R.__data[7]=0,R.__data[8]=z.elements[6],R.__data[9]=z.elements[7],R.__data[10]=z.elements[8],R.__data[11]=0):(z.toArray(R.__data,$),$+=X.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,P,R.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function h(y,x,S,_){const C=y.value,T=x+"_"+S;if(_[T]===void 0)return typeof C=="number"||typeof C=="boolean"?_[T]=C:_[T]=C.clone(),!0;{const A=_[T];if(typeof C=="number"||typeof C=="boolean"){if(A!==C)return _[T]=C,!0}else if(A.equals(C)===!1)return A.copy(C),!0}return!1}function p(y){const x=y.uniforms;let S=0;const _=16;for(let T=0,A=x.length;T<A;T++){const k=Array.isArray(x[T])?x[T]:[x[T]];for(let M=0,R=k.length;M<R;M++){const P=k[M],O=Array.isArray(P.value)?P.value:[P.value];for(let $=0,U=O.length;$<U;$++){const z=O[$],X=v(z),D=S%_;D!==0&&_-D<X.boundary&&(S+=_-D),P.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=S,S+=X.storage}}}const C=S%_;return C>0&&(S+=_-C),y.__size=S,y.__cache={},this}function v(y){const x={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function m(y){const x=y.target;x.removeEventListener("dispose",m);const S=o.indexOf(x.__bindingPointIndex);o.splice(S,1),t.deleteBuffer(i[x.id]),delete i[x.id],delete s[x.id]}function g(){for(const y in i)t.deleteBuffer(i[y]);o=[],i={},s={}}return{bind:l,update:c,dispose:g}}class xB{constructor(e={}){const{canvas:n=doe(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let f;r!==null?f=r.getContextAttributes().alpha:f=o;const h=new Uint32Array(4),p=new Int32Array(4);let v=null,m=null;const g=[],y=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=us,this._useLegacyLights=!1,this.toneMapping=Eu,this.toneMappingExposure=1;const x=this;let S=!1,_=0,C=0,T=null,A=-1,k=null;const M=new er,R=new er;let P=null;const O=new Bt(0);let $=0,U=n.width,z=n.height,X=1,D=null,F=null;const W=new er(0,0,U,z),V=new er(0,0,U,z);let j=!1;const J=new h2;let Q=!1,te=!1,re=null;const se=new wn,fe=new lt,ae=new pe,ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function le(){return T===null?X:1}let H=r;function Me(G,ie){for(let ce=0;ce<G.length;ce++){const Te=G[ce],de=n.getContext(Te,ie);if(de!==null)return de}return null}try{const G={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${xy}`),n.addEventListener("webglcontextlost",Ie,!1),n.addEventListener("webglcontextrestored",Ce,!1),n.addEventListener("webglcontextcreationerror",ut,!1),H===null){const ie=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&ie.shift(),H=Me(ie,G),H===null)throw Me(ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&H instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),H.getShaderPrecisionFormat===void 0&&(H.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let we,Ee,me,qe,ke,ee,Y,oe,xe,Se,be,Re,Ke,ze,Pe,De,We,gt,ct,Ye,Xe,Le,he,He;function ot(){we=new KYe(H),Ee=new GYe(H,we,e),we.init(Ee),Le=new Soe(H,we,Ee),me=new RZe(H,we,Ee),qe=new QYe(H),ke=new xZe,ee=new NZe(H,we,me,ke,Ee,Le,qe),Y=new jYe(x),oe=new YYe(x),xe=new aXe(H,Ee),he=new WYe(H,we,xe,Ee),Se=new ZYe(H,xe,qe,he),be=new rKe(H,Se,xe,qe),ct=new nKe(H,Ee,ee),De=new HYe(ke),Re=new yZe(x,Y,oe,we,Ee,he,De),Ke=new DZe(x,ke),ze=new wZe,Pe=new MZe(we,Ee),gt=new zYe(x,Y,oe,me,be,f,l),We=new IZe(x,be,Ee),He=new LZe(H,qe,Ee,me),Ye=new VYe(H,we,qe,Ee),Xe=new JYe(H,we,qe,Ee),qe.programs=Re.programs,x.capabilities=Ee,x.extensions=we,x.properties=ke,x.renderLists=ze,x.shadowMap=We,x.state=me,x.info=qe}ot();const et=new $Ze(x,H);this.xr=et,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){const G=we.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=we.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(G){G!==void 0&&(X=G,this.setSize(U,z,!1))},this.getSize=function(G){return G.set(U,z)},this.setSize=function(G,ie,ce=!0){if(et.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=G,z=ie,n.width=Math.floor(G*X),n.height=Math.floor(ie*X),ce===!0&&(n.style.width=G+"px",n.style.height=ie+"px"),this.setViewport(0,0,G,ie)},this.getDrawingBufferSize=function(G){return G.set(U*X,z*X).floor()},this.setDrawingBufferSize=function(G,ie,ce){U=G,z=ie,X=ce,n.width=Math.floor(G*ce),n.height=Math.floor(ie*ce),this.setViewport(0,0,G,ie)},this.getCurrentViewport=function(G){return G.copy(M)},this.getViewport=function(G){return G.copy(W)},this.setViewport=function(G,ie,ce,Te){G.isVector4?W.set(G.x,G.y,G.z,G.w):W.set(G,ie,ce,Te),me.viewport(M.copy(W).multiplyScalar(X).floor())},this.getScissor=function(G){return G.copy(V)},this.setScissor=function(G,ie,ce,Te){G.isVector4?V.set(G.x,G.y,G.z,G.w):V.set(G,ie,ce,Te),me.scissor(R.copy(V).multiplyScalar(X).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(G){me.setScissorTest(j=G)},this.setOpaqueSort=function(G){D=G},this.setTransparentSort=function(G){F=G},this.getClearColor=function(G){return G.copy(gt.getClearColor())},this.setClearColor=function(){gt.setClearColor.apply(gt,arguments)},this.getClearAlpha=function(){return gt.getClearAlpha()},this.setClearAlpha=function(){gt.setClearAlpha.apply(gt,arguments)},this.clear=function(G=!0,ie=!0,ce=!0){let Te=0;if(G){let de=!1;if(T!==null){const Ue=T.texture.format;de=Ue===oB||Ue===sB||Ue===iB}if(de){const Ue=T.texture.type,Je=Ue===Mu||Ue===kd||Ue===ZA||Ue===qf||Ue===tB||Ue===nB,nt=gt.getClearColor(),$e=gt.getClearAlpha(),Ct=nt.r,ht=nt.g,ft=nt.b;Je?(h[0]=Ct,h[1]=ht,h[2]=ft,h[3]=$e,H.clearBufferuiv(H.COLOR,0,h)):(p[0]=Ct,p[1]=ht,p[2]=ft,p[3]=$e,H.clearBufferiv(H.COLOR,0,p))}else Te|=H.COLOR_BUFFER_BIT}ie&&(Te|=H.DEPTH_BUFFER_BIT),ce&&(Te|=H.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),H.clear(Te)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ie,!1),n.removeEventListener("webglcontextrestored",Ce,!1),n.removeEventListener("webglcontextcreationerror",ut,!1),ze.dispose(),Pe.dispose(),ke.dispose(),Y.dispose(),oe.dispose(),be.dispose(),he.dispose(),He.dispose(),Re.dispose(),et.dispose(),et.removeEventListener("sessionstart",$t),et.removeEventListener("sessionend",mt),re&&(re.dispose(),re=null),Ht.stop()};function Ie(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Ce(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const G=qe.autoReset,ie=We.enabled,ce=We.autoUpdate,Te=We.needsUpdate,de=We.type;ot(),qe.autoReset=G,We.enabled=ie,We.autoUpdate=ce,We.needsUpdate=Te,We.type=de}function ut(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function dt(G){const ie=G.target;ie.removeEventListener("dispose",dt),yt(ie)}function yt(G){vt(G),ke.remove(G)}function vt(G){const ie=ke.get(G).programs;ie!==void 0&&(ie.forEach(function(ce){Re.releaseProgram(ce)}),G.isShaderMaterial&&Re.releaseShaderCache(G))}this.renderBufferDirect=function(G,ie,ce,Te,de,Ue){ie===null&&(ie=ye);const Je=de.isMesh&&de.matrixWorld.determinant()<0,nt=Z(G,ie,ce,Te,de);me.setMaterial(Te,Je);let $e=ce.index,Ct=1;if(Te.wireframe===!0){if($e=Se.getWireframeAttribute(ce),$e===void 0)return;Ct=2}const ht=ce.drawRange,ft=ce.attributes.position;let Lt=ht.start*Ct,Jt=(ht.start+ht.count)*Ct;Ue!==null&&(Lt=Math.max(Lt,Ue.start*Ct),Jt=Math.min(Jt,(Ue.start+Ue.count)*Ct)),$e!==null?(Lt=Math.max(Lt,0),Jt=Math.min(Jt,$e.count)):ft!=null&&(Lt=Math.max(Lt,0),Jt=Math.min(Jt,ft.count));const tn=Jt-Lt;if(tn<0||tn===1/0)return;he.setup(de,Te,nt,ce,$e);let gn,Pt=Ye;if($e!==null&&(gn=xe.get($e),Pt=Xe,Pt.setIndex(gn)),de.isMesh)Te.wireframe===!0?(me.setLineWidth(Te.wireframeLinewidth*le()),Pt.setMode(H.LINES)):Pt.setMode(H.TRIANGLES);else if(de.isLine){let Et=Te.linewidth;Et===void 0&&(Et=1),me.setLineWidth(Et*le()),de.isLineSegments?Pt.setMode(H.LINES):de.isLineLoop?Pt.setMode(H.LINE_LOOP):Pt.setMode(H.LINE_STRIP)}else de.isPoints?Pt.setMode(H.POINTS):de.isSprite&&Pt.setMode(H.TRIANGLES);if(de.isBatchedMesh)Pt.renderMultiDraw(de._multiDrawStarts,de._multiDrawCounts,de._multiDrawCount);else if(de.isInstancedMesh)Pt.renderInstances(Lt,tn,de.count);else if(ce.isInstancedBufferGeometry){const Et=ce._maxInstanceCount!==void 0?ce._maxInstanceCount:1/0,Cn=Math.min(ce.instanceCount,Et);Pt.renderInstances(Lt,tn,Cn)}else Pt.render(Lt,tn)};function zt(G,ie,ce){G.transparent===!0&&G.side===Ga&&G.forceSinglePass===!1?(G.side=Qi,G.needsUpdate=!0,bt(G,ie,ce),G.side=Uu,G.needsUpdate=!0,bt(G,ie,ce),G.side=Ga):bt(G,ie,ce)}this.compile=function(G,ie,ce=null){ce===null&&(ce=G),m=Pe.get(ce),m.init(),y.push(m),ce.traverseVisible(function(de){de.isLight&&de.layers.test(ie.layers)&&(m.pushLight(de),de.castShadow&&m.pushShadow(de))}),G!==ce&&G.traverseVisible(function(de){de.isLight&&de.layers.test(ie.layers)&&(m.pushLight(de),de.castShadow&&m.pushShadow(de))}),m.setupLights(x._useLegacyLights);const Te=new Set;return G.traverse(function(de){const Ue=de.material;if(Ue)if(Array.isArray(Ue))for(let Je=0;Je<Ue.length;Je++){const nt=Ue[Je];zt(nt,ce,de),Te.add(nt)}else zt(Ue,ce,de),Te.add(Ue)}),y.pop(),m=null,Te},this.compileAsync=function(G,ie,ce=null){const Te=this.compile(G,ie,ce);return new Promise(de=>{function Ue(){if(Te.forEach(function(Je){ke.get(Je).currentProgram.isReady()&&Te.delete(Je)}),Te.size===0){de(G);return}setTimeout(Ue,10)}we.get("KHR_parallel_shader_compile")!==null?Ue():setTimeout(Ue,10)})};let It=null;function Qt(G){It&&It(G)}function $t(){Ht.stop()}function mt(){Ht.start()}const Ht=new goe;Ht.setAnimationLoop(Qt),typeof self<"u"&&Ht.setContext(self),this.setAnimationLoop=function(G){It=G,et.setAnimationLoop(G),G===null?Ht.stop():Ht.start()},et.addEventListener("sessionstart",$t),et.addEventListener("sessionend",mt),this.render=function(G,ie){if(ie!==void 0&&ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),ie.parent===null&&ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),et.enabled===!0&&et.isPresenting===!0&&(et.cameraAutoUpdate===!0&&et.updateCamera(ie),ie=et.getCamera()),G.isScene===!0&&G.onBeforeRender(x,G,ie,T),m=Pe.get(G,y.length),m.init(),y.push(m),se.multiplyMatrices(ie.projectionMatrix,ie.matrixWorldInverse),J.setFromProjectionMatrix(se),te=this.localClippingEnabled,Q=De.init(this.clippingPlanes,te),v=ze.get(G,g.length),v.init(),g.push(v),pn(G,ie,0,x.sortObjects),v.finish(),x.sortObjects===!0&&v.sort(D,F),this.info.render.frame++,Q===!0&&De.beginShadows();const ce=m.state.shadowsArray;if(We.render(ce,G,ie),Q===!0&&De.endShadows(),this.info.autoReset===!0&&this.info.reset(),gt.render(v,G),m.setupLights(x._useLegacyLights),ie.isArrayCamera){const Te=ie.cameras;for(let de=0,Ue=Te.length;de<Ue;de++){const Je=Te[de];dn(v,G,Je,Je.viewport)}}else dn(v,G,ie);T!==null&&(ee.updateMultisampleRenderTarget(T),ee.updateRenderTargetMipmap(T)),G.isScene===!0&&G.onAfterRender(x,G,ie),he.resetDefaultState(),A=-1,k=null,y.pop(),y.length>0?m=y[y.length-1]:m=null,g.pop(),g.length>0?v=g[g.length-1]:v=null};function pn(G,ie,ce,Te){if(G.visible===!1)return;if(G.layers.test(ie.layers)){if(G.isGroup)ce=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(ie);else if(G.isLight)m.pushLight(G),G.castShadow&&m.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||J.intersectsSprite(G)){Te&&ae.setFromMatrixPosition(G.matrixWorld).applyMatrix4(se);const Je=be.update(G),nt=G.material;nt.visible&&v.push(G,Je,nt,ce,ae.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||J.intersectsObject(G))){const Je=be.update(G),nt=G.material;if(Te&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),ae.copy(G.boundingSphere.center)):(Je.boundingSphere===null&&Je.computeBoundingSphere(),ae.copy(Je.boundingSphere.center)),ae.applyMatrix4(G.matrixWorld).applyMatrix4(se)),Array.isArray(nt)){const $e=Je.groups;for(let Ct=0,ht=$e.length;Ct<ht;Ct++){const ft=$e[Ct],Lt=nt[ft.materialIndex];Lt&&Lt.visible&&v.push(G,Je,Lt,ce,ae.z,ft)}}else nt.visible&&v.push(G,Je,nt,ce,ae.z,null)}}const Ue=G.children;for(let Je=0,nt=Ue.length;Je<nt;Je++)pn(Ue[Je],ie,ce,Te)}function dn(G,ie,ce,Te){const de=G.opaque,Ue=G.transmissive,Je=G.transparent;m.setupLightsView(ce),Q===!0&&De.setGlobalState(x.clippingPlanes,ce),Ue.length>0&&_t(de,Ue,ie,ce),Te&&me.viewport(M.copy(Te)),de.length>0&&Dt(de,ie,ce),Ue.length>0&&Dt(Ue,ie,ce),Je.length>0&&Dt(Je,ie,ce),me.buffers.depth.setTest(!0),me.buffers.depth.setMask(!0),me.buffers.color.setMask(!0),me.setPolygonOffset(!1)}function _t(G,ie,ce,Te){if((ce.isScene===!0?ce.overrideMaterial:null)!==null)return;const Ue=Ee.isWebGL2;re===null&&(re=new Hl(1,1,{generateMipmaps:!0,type:we.has("EXT_color_buffer_half_float")?xo:Mu,minFilter:ch,samples:Ue?4:0})),x.getDrawingBufferSize(fe),Ue?re.setSize(fe.x,fe.y):re.setSize(TM(fe.x),TM(fe.y));const Je=x.getRenderTarget();x.setRenderTarget(re),x.getClearColor(O),$=x.getClearAlpha(),$<1&&x.setClearColor(16777215,.5),x.clear();const nt=x.toneMapping;x.toneMapping=Eu,Dt(G,ce,Te),ee.updateMultisampleRenderTarget(re),ee.updateRenderTargetMipmap(re);let $e=!1;for(let Ct=0,ht=ie.length;Ct<ht;Ct++){const ft=ie[Ct],Lt=ft.object,Jt=ft.geometry,tn=ft.material,gn=ft.group;if(tn.side===Ga&&Lt.layers.test(Te.layers)){const Pt=tn.side;tn.side=Qi,tn.needsUpdate=!0,Nt(Lt,ce,Te,Jt,tn,gn),tn.side=Pt,tn.needsUpdate=!0,$e=!0}}$e===!0&&(ee.updateMultisampleRenderTarget(re),ee.updateRenderTargetMipmap(re)),x.setRenderTarget(Je),x.setClearColor(O,$),x.toneMapping=nt}function Dt(G,ie,ce){const Te=ie.isScene===!0?ie.overrideMaterial:null;for(let de=0,Ue=G.length;de<Ue;de++){const Je=G[de],nt=Je.object,$e=Je.geometry,Ct=Te===null?Je.material:Te,ht=Je.group;nt.layers.test(ce.layers)&&Nt(nt,ie,ce,$e,Ct,ht)}}function Nt(G,ie,ce,Te,de,Ue){G.onBeforeRender(x,ie,ce,Te,de,Ue),G.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),de.onBeforeRender(x,ie,ce,Te,G,Ue),de.transparent===!0&&de.side===Ga&&de.forceSinglePass===!1?(de.side=Qi,de.needsUpdate=!0,x.renderBufferDirect(ce,ie,Te,de,G,Ue),de.side=Uu,de.needsUpdate=!0,x.renderBufferDirect(ce,ie,Te,de,G,Ue),de.side=Ga):x.renderBufferDirect(ce,ie,Te,de,G,Ue),G.onAfterRender(x,ie,ce,Te,de,Ue)}function bt(G,ie,ce){ie.isScene!==!0&&(ie=ye);const Te=ke.get(G),de=m.state.lights,Ue=m.state.shadowsArray,Je=de.state.version,nt=Re.getParameters(G,de.state,Ue,ie,ce),$e=Re.getProgramCacheKey(nt);let Ct=Te.programs;Te.environment=G.isMeshStandardMaterial?ie.environment:null,Te.fog=ie.fog,Te.envMap=(G.isMeshStandardMaterial?oe:Y).get(G.envMap||Te.environment),Ct===void 0&&(G.addEventListener("dispose",dt),Ct=new Map,Te.programs=Ct);let ht=Ct.get($e);if(ht!==void 0){if(Te.currentProgram===ht&&Te.lightsStateVersion===Je)return Sn(G,nt),ht}else nt.uniforms=Re.getUniforms(G),G.onBuild(ce,nt,x),G.onBeforeCompile(nt,x),ht=Re.acquireProgram(nt,$e),Ct.set($e,ht),Te.uniforms=nt.uniforms;const ft=Te.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(ft.clippingPlanes=De.uniform),Sn(G,nt),Te.needsLights=ne(G),Te.lightsStateVersion=Je,Te.needsLights&&(ft.ambientLightColor.value=de.state.ambient,ft.lightProbe.value=de.state.probe,ft.directionalLights.value=de.state.directional,ft.directionalLightShadows.value=de.state.directionalShadow,ft.spotLights.value=de.state.spot,ft.spotLightShadows.value=de.state.spotShadow,ft.rectAreaLights.value=de.state.rectArea,ft.ltc_1.value=de.state.rectAreaLTC1,ft.ltc_2.value=de.state.rectAreaLTC2,ft.pointLights.value=de.state.point,ft.pointLightShadows.value=de.state.pointShadow,ft.hemisphereLights.value=de.state.hemi,ft.directionalShadowMap.value=de.state.directionalShadowMap,ft.directionalShadowMatrix.value=de.state.directionalShadowMatrix,ft.spotShadowMap.value=de.state.spotShadowMap,ft.spotLightMatrix.value=de.state.spotLightMatrix,ft.spotLightMap.value=de.state.spotLightMap,ft.pointShadowMap.value=de.state.pointShadowMap,ft.pointShadowMatrix.value=de.state.pointShadowMatrix),Te.currentProgram=ht,Te.uniformsList=null,ht}function Wt(G){if(G.uniformsList===null){const ie=G.currentProgram.getUniforms();G.uniformsList=sE.seqWithValue(ie.seq,G.uniforms)}return G.uniformsList}function Sn(G,ie){const ce=ke.get(G);ce.outputColorSpace=ie.outputColorSpace,ce.batching=ie.batching,ce.instancing=ie.instancing,ce.instancingColor=ie.instancingColor,ce.skinning=ie.skinning,ce.morphTargets=ie.morphTargets,ce.morphNormals=ie.morphNormals,ce.morphColors=ie.morphColors,ce.morphTargetsCount=ie.morphTargetsCount,ce.numClippingPlanes=ie.numClippingPlanes,ce.numIntersection=ie.numClipIntersection,ce.vertexAlphas=ie.vertexAlphas,ce.vertexTangents=ie.vertexTangents,ce.toneMapping=ie.toneMapping}function Z(G,ie,ce,Te,de){ie.isScene!==!0&&(ie=ye),ee.resetTextureUnits();const Ue=ie.fog,Je=Te.isMeshStandardMaterial?ie.environment:null,nt=T===null?x.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:zu,$e=(Te.isMeshStandardMaterial?oe:Y).get(Te.envMap||Je),Ct=Te.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,ht=!!ce.attributes.tangent&&(!!Te.normalMap||Te.anisotropy>0),ft=!!ce.morphAttributes.position,Lt=!!ce.morphAttributes.normal,Jt=!!ce.morphAttributes.color;let tn=Eu;Te.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(tn=x.toneMapping);const gn=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,Pt=gn!==void 0?gn.length:0,Et=ke.get(Te),Cn=m.state.lights;if(Q===!0&&(te===!0||G!==k)){const nn=G===k&&Te.id===A;De.setState(Te,G,nn)}let en=!1;Te.version===Et.__version?(Et.needsLights&&Et.lightsStateVersion!==Cn.state.version||Et.outputColorSpace!==nt||de.isBatchedMesh&&Et.batching===!1||!de.isBatchedMesh&&Et.batching===!0||de.isInstancedMesh&&Et.instancing===!1||!de.isInstancedMesh&&Et.instancing===!0||de.isSkinnedMesh&&Et.skinning===!1||!de.isSkinnedMesh&&Et.skinning===!0||de.isInstancedMesh&&Et.instancingColor===!0&&de.instanceColor===null||de.isInstancedMesh&&Et.instancingColor===!1&&de.instanceColor!==null||Et.envMap!==$e||Te.fog===!0&&Et.fog!==Ue||Et.numClippingPlanes!==void 0&&(Et.numClippingPlanes!==De.numPlanes||Et.numIntersection!==De.numIntersection)||Et.vertexAlphas!==Ct||Et.vertexTangents!==ht||Et.morphTargets!==ft||Et.morphNormals!==Lt||Et.morphColors!==Jt||Et.toneMapping!==tn||Ee.isWebGL2===!0&&Et.morphTargetsCount!==Pt)&&(en=!0):(en=!0,Et.__version=Te.version);let cn=Et.currentProgram;en===!0&&(cn=bt(Te,ie,de));let ar=!1,Fn=!1,Hn=!1;const _n=cn.getUniforms(),fn=Et.uniforms;if(me.useProgram(cn.program)&&(ar=!0,Fn=!0,Hn=!0),Te.id!==A&&(A=Te.id,Fn=!0),ar||k!==G){_n.setValue(H,"projectionMatrix",G.projectionMatrix),_n.setValue(H,"viewMatrix",G.matrixWorldInverse);const nn=_n.map.cameraPosition;nn!==void 0&&nn.setValue(H,ae.setFromMatrixPosition(G.matrixWorld)),Ee.logarithmicDepthBuffer&&_n.setValue(H,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(Te.isMeshPhongMaterial||Te.isMeshToonMaterial||Te.isMeshLambertMaterial||Te.isMeshBasicMaterial||Te.isMeshStandardMaterial||Te.isShaderMaterial)&&_n.setValue(H,"isOrthographic",G.isOrthographicCamera===!0),k!==G&&(k=G,Fn=!0,Hn=!0)}if(de.isSkinnedMesh){_n.setOptional(H,de,"bindMatrix"),_n.setOptional(H,de,"bindMatrixInverse");const nn=de.skeleton;nn&&(Ee.floatVertexTextures?(nn.boneTexture===null&&nn.computeBoneTexture(),_n.setValue(H,"boneTexture",nn.boneTexture,ee)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}de.isBatchedMesh&&(_n.setOptional(H,de,"batchingTexture"),_n.setValue(H,"batchingTexture",de._matricesTexture,ee));const Yn=ce.morphAttributes;if((Yn.position!==void 0||Yn.normal!==void 0||Yn.color!==void 0&&Ee.isWebGL2===!0)&&ct.update(de,ce,cn),(Fn||Et.receiveShadow!==de.receiveShadow)&&(Et.receiveShadow=de.receiveShadow,_n.setValue(H,"receiveShadow",de.receiveShadow)),Te.isMeshGouraudMaterial&&Te.envMap!==null&&(fn.envMap.value=$e,fn.flipEnvMap.value=$e.isCubeTexture&&$e.isRenderTargetTexture===!1?-1:1),Fn&&(_n.setValue(H,"toneMappingExposure",x.toneMappingExposure),Et.needsLights&&K(fn,Hn),Ue&&Te.fog===!0&&Ke.refreshFogUniforms(fn,Ue),Ke.refreshMaterialUniforms(fn,Te,X,z,re),sE.upload(H,Wt(Et),fn,ee)),Te.isShaderMaterial&&Te.uniformsNeedUpdate===!0&&(sE.upload(H,Wt(Et),fn,ee),Te.uniformsNeedUpdate=!1),Te.isSpriteMaterial&&_n.setValue(H,"center",de.center),_n.setValue(H,"modelViewMatrix",de.modelViewMatrix),_n.setValue(H,"normalMatrix",de.normalMatrix),_n.setValue(H,"modelMatrix",de.matrixWorld),Te.isShaderMaterial||Te.isRawShaderMaterial){const nn=Te.uniformsGroups;for(let an=0,Nr=nn.length;an<Nr;an++)if(Ee.isWebGL2){const Os=nn[an];He.update(Os,cn),He.bind(Os,cn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return cn}function K(G,ie){G.ambientLightColor.needsUpdate=ie,G.lightProbe.needsUpdate=ie,G.directionalLights.needsUpdate=ie,G.directionalLightShadows.needsUpdate=ie,G.pointLights.needsUpdate=ie,G.pointLightShadows.needsUpdate=ie,G.spotLights.needsUpdate=ie,G.spotLightShadows.needsUpdate=ie,G.rectAreaLights.needsUpdate=ie,G.hemisphereLights.needsUpdate=ie}function ne(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(G,ie,ce){ke.get(G.texture).__webglTexture=ie,ke.get(G.depthTexture).__webglTexture=ce;const Te=ke.get(G);Te.__hasExternalTextures=!0,Te.__hasExternalTextures&&(Te.__autoAllocateDepthBuffer=ce===void 0,Te.__autoAllocateDepthBuffer||we.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Te.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(G,ie){const ce=ke.get(G);ce.__webglFramebuffer=ie,ce.__useDefaultFramebuffer=ie===void 0},this.setRenderTarget=function(G,ie=0,ce=0){T=G,_=ie,C=ce;let Te=!0,de=null,Ue=!1,Je=!1;if(G){const $e=ke.get(G);$e.__useDefaultFramebuffer!==void 0?(me.bindFramebuffer(H.FRAMEBUFFER,null),Te=!1):$e.__webglFramebuffer===void 0?ee.setupRenderTarget(G):$e.__hasExternalTextures&&ee.rebindTextures(G,ke.get(G.texture).__webglTexture,ke.get(G.depthTexture).__webglTexture);const Ct=G.texture;(Ct.isData3DTexture||Ct.isDataArrayTexture||Ct.isCompressedArrayTexture)&&(Je=!0);const ht=ke.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(ht[ie])?de=ht[ie][ce]:de=ht[ie],Ue=!0):Ee.isWebGL2&&G.samples>0&&ee.useMultisampledRTT(G)===!1?de=ke.get(G).__webglMultisampledFramebuffer:Array.isArray(ht)?de=ht[ce]:de=ht,M.copy(G.viewport),R.copy(G.scissor),P=G.scissorTest}else M.copy(W).multiplyScalar(X).floor(),R.copy(V).multiplyScalar(X).floor(),P=j;if(me.bindFramebuffer(H.FRAMEBUFFER,de)&&Ee.drawBuffers&&Te&&me.drawBuffers(G,de),me.viewport(M),me.scissor(R),me.setScissorTest(P),Ue){const $e=ke.get(G.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_CUBE_MAP_POSITIVE_X+ie,$e.__webglTexture,ce)}else if(Je){const $e=ke.get(G.texture),Ct=ie||0;H.framebufferTextureLayer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,$e.__webglTexture,ce||0,Ct)}A=-1},this.readRenderTargetPixels=function(G,ie,ce,Te,de,Ue,Je){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let nt=ke.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&Je!==void 0&&(nt=nt[Je]),nt){me.bindFramebuffer(H.FRAMEBUFFER,nt);try{const $e=G.texture,Ct=$e.format,ht=$e.type;if(Ct!==vo&&Le.convert(Ct)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ft=ht===xo&&(we.has("EXT_color_buffer_half_float")||Ee.isWebGL2&&we.has("EXT_color_buffer_float"));if(ht!==Mu&&Le.convert(ht)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ht===Ms&&(Ee.isWebGL2||we.has("OES_texture_float")||we.has("WEBGL_color_buffer_float")))&&!ft){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ie>=0&&ie<=G.width-Te&&ce>=0&&ce<=G.height-de&&H.readPixels(ie,ce,Te,de,Le.convert(Ct),Le.convert(ht),Ue)}finally{const $e=T!==null?ke.get(T).__webglFramebuffer:null;me.bindFramebuffer(H.FRAMEBUFFER,$e)}}},this.copyFramebufferToTexture=function(G,ie,ce=0){const Te=Math.pow(2,-ce),de=Math.floor(ie.image.width*Te),Ue=Math.floor(ie.image.height*Te);ee.setTexture2D(ie,0),H.copyTexSubImage2D(H.TEXTURE_2D,ce,0,0,G.x,G.y,de,Ue),me.unbindTexture()},this.copyTextureToTexture=function(G,ie,ce,Te=0){const de=ie.image.width,Ue=ie.image.height,Je=Le.convert(ce.format),nt=Le.convert(ce.type);ee.setTexture2D(ce,0),H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,ce.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,ce.unpackAlignment),ie.isDataTexture?H.texSubImage2D(H.TEXTURE_2D,Te,G.x,G.y,de,Ue,Je,nt,ie.image.data):ie.isCompressedTexture?H.compressedTexSubImage2D(H.TEXTURE_2D,Te,G.x,G.y,ie.mipmaps[0].width,ie.mipmaps[0].height,Je,ie.mipmaps[0].data):H.texSubImage2D(H.TEXTURE_2D,Te,G.x,G.y,Je,nt,ie.image),Te===0&&ce.generateMipmaps&&H.generateMipmap(H.TEXTURE_2D),me.unbindTexture()},this.copyTextureToTexture3D=function(G,ie,ce,Te,de=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ue=G.max.x-G.min.x+1,Je=G.max.y-G.min.y+1,nt=G.max.z-G.min.z+1,$e=Le.convert(Te.format),Ct=Le.convert(Te.type);let ht;if(Te.isData3DTexture)ee.setTexture3D(Te,0),ht=H.TEXTURE_3D;else if(Te.isDataArrayTexture||Te.isCompressedArrayTexture)ee.setTexture2DArray(Te,0),ht=H.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,Te.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Te.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,Te.unpackAlignment);const ft=H.getParameter(H.UNPACK_ROW_LENGTH),Lt=H.getParameter(H.UNPACK_IMAGE_HEIGHT),Jt=H.getParameter(H.UNPACK_SKIP_PIXELS),tn=H.getParameter(H.UNPACK_SKIP_ROWS),gn=H.getParameter(H.UNPACK_SKIP_IMAGES),Pt=ce.isCompressedTexture?ce.mipmaps[de]:ce.image;H.pixelStorei(H.UNPACK_ROW_LENGTH,Pt.width),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Pt.height),H.pixelStorei(H.UNPACK_SKIP_PIXELS,G.min.x),H.pixelStorei(H.UNPACK_SKIP_ROWS,G.min.y),H.pixelStorei(H.UNPACK_SKIP_IMAGES,G.min.z),ce.isDataTexture||ce.isData3DTexture?H.texSubImage3D(ht,de,ie.x,ie.y,ie.z,Ue,Je,nt,$e,Ct,Pt.data):ce.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),H.compressedTexSubImage3D(ht,de,ie.x,ie.y,ie.z,Ue,Je,nt,$e,Pt.data)):H.texSubImage3D(ht,de,ie.x,ie.y,ie.z,Ue,Je,nt,$e,Ct,Pt),H.pixelStorei(H.UNPACK_ROW_LENGTH,ft),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Lt),H.pixelStorei(H.UNPACK_SKIP_PIXELS,Jt),H.pixelStorei(H.UNPACK_SKIP_ROWS,tn),H.pixelStorei(H.UNPACK_SKIP_IMAGES,gn),de===0&&Te.generateMipmaps&&H.generateMipmap(ht),me.unbindTexture()},this.initTexture=function(G){G.isCubeTexture?ee.setTextureCube(G,0):G.isData3DTexture?ee.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?ee.setTexture2DArray(G,0):ee.setTexture2D(G,0),me.unbindTexture()},this.resetState=function(){_=0,C=0,T=null,me.reset(),he.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Cc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===QA?"display-p3":"srgb",n.unpackColorSpace=Tr.workingColorSpace===c2?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===us?Kf:cB}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Kf?us:zu}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Coe extends xB{}Coe.prototype.isWebGL1Renderer=!0;class sI{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Bt(e),this.density=n}clone(){return new sI(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class oI{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Bt(e),this.near=n,this.far=r}clone(){return new oI(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class nw extends yr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class aI{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Qb,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Qa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Po=new pe;class Ya{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Po.fromBufferAttribute(this,n),Po.applyMatrix4(e),this.setXYZ(n,Po.x,Po.y,Po.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Po.fromBufferAttribute(this,n),Po.applyNormalMatrix(e),this.setXYZ(n,Po.x,Po.y,Po.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Po.fromBufferAttribute(this,n),Po.transformDirection(e),this.setXYZ(n,Po.x,Po.y,Po.z);return this}setX(e,n){return this.normalized&&(n=Ln(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Ln(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Ln(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Ln(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=ua(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=ua(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=ua(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=ua(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array),i=Ln(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Ln(n,this.array),r=Ln(r,this.array),i=Ln(i,this.array),s=Ln(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new kr(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ya(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class bB extends Ks{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let t0;const Lx=new pe,n0=new pe,r0=new pe,i0=new lt,Ox=new lt,Toe=new wn,DC=new pe,Fx=new pe,LC=new pe,bX=new lt,DP=new lt,wX=new lt;class Eoe extends yr{constructor(e=new bB){if(super(),this.isSprite=!0,this.type="Sprite",t0===void 0){t0=new $n;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new aI(n,5);t0.setIndex([0,1,2,0,2,3]),t0.setAttribute("position",new Ya(r,3,0,!1)),t0.setAttribute("uv",new Ya(r,2,3,!1))}this.geometry=t0,this.material=e,this.center=new lt(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),n0.setFromMatrixScale(this.matrixWorld),Toe.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),r0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&n0.multiplyScalar(-r0.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;OC(DC.set(-.5,-.5,0),r0,o,n0,i,s),OC(Fx.set(.5,-.5,0),r0,o,n0,i,s),OC(LC.set(.5,.5,0),r0,o,n0,i,s),bX.set(0,0),DP.set(1,0),wX.set(1,1);let a=e.ray.intersectTriangle(DC,Fx,LC,!1,Lx);if(a===null&&(OC(Fx.set(-.5,.5,0),r0,o,n0,i,s),DP.set(0,1),a=e.ray.intersectTriangle(DC,LC,Fx,!1,Lx),a===null))return;const l=e.ray.origin.distanceTo(Lx);l<e.near||l>e.far||n.push({distance:l,point:Lx.clone(),uv:ca.getInterpolation(Lx,DC,Fx,LC,bX,DP,wX,new lt),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function OC(t,e,n,r,i,s){i0.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(Ox.x=s*i0.x-i*i0.y,Ox.y=i*i0.x+s*i0.y):Ox.copy(i0),t.copy(e),t.x+=Ox.x,t.y+=Ox.y,t.applyMatrix4(Toe)}const FC=new pe,SX=new pe;class Moe extends yr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){FC.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(FC);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){FC.setFromMatrixPosition(e.matrixWorld),SX.setFromMatrixPosition(this.matrixWorld);const r=FC.distanceTo(SX)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const _X=new pe,CX=new er,TX=new er,OZe=new pe,EX=new wn,UC=new pe,LP=new gs,MX=new wn,OP=new Jm;class koe extends ai{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=UL,this.bindMatrix=new wn,this.bindMatrixInverse=new wn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ms),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,UC),this.boundingBox.expandByPoint(UC)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new gs),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,UC),this.boundingSphere.expandByPoint(UC)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),LP.copy(this.boundingSphere),LP.applyMatrix4(i),e.ray.intersectsSphere(LP)!==!1&&(MX.copy(i).invert(),OP.copy(e.ray).applyMatrix4(MX),!(this.boundingBox!==null&&OP.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,OP)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new er,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===UL?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Vse?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;CX.fromBufferAttribute(i.attributes.skinIndex,e),TX.fromBufferAttribute(i.attributes.skinWeight,e),_X.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=TX.getComponent(s);if(o!==0){const a=CX.getComponent(s);EX.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(OZe.copy(_X).applyMatrix4(EX),o)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class wB extends yr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class nm extends ci{constructor(e=null,n=1,r=1,i,s,o,a,l,c=Fi,u=Fi,d,f){super(null,o,a,l,c,u,i,s,d,f),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const kX=new wn,FZe=new wn;class lI{constructor(e=[],n=[]){this.uuid=Qa(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new wn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new wn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:FZe;kX.multiplyMatrices(a,n[s]),kX.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new lI(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new nm(n,e,e,vo,Ms);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new wB),this.bones.push(o),this.boneInverses.push(new wn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Em extends kr{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const s0=new wn,AX=new wn,BC=[],IX=new ms,UZe=new wn,Ux=new ai,Bx=new gs;class Aoe extends ai{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Em(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,UZe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new ms),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,s0),IX.copy(e.boundingBox).applyMatrix4(s0),this.boundingBox.union(IX)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new gs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,s0),Bx.copy(e.boundingSphere).applyMatrix4(s0),this.boundingSphere.union(Bx)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(Ux.geometry=this.geometry,Ux.material=this.material,Ux.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Bx.copy(this.boundingSphere),Bx.applyMatrix4(r),e.ray.intersectsSphere(Bx)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,s0),AX.multiplyMatrices(r,s0),Ux.matrixWorld=AX,Ux.raycast(e,BC);for(let o=0,a=BC.length;o<a;o++){const l=BC[o];l.instanceId=s,l.object=this,n.push(l)}BC.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Em(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function BZe(t,e){return t.z-e.z}function zZe(t,e){return e.z-t.z}class WZe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=n}reset(){this.list.length=0,this.index=0}}const o0="batchId",xf=new wn,RX=new wn,VZe=new wn,NX=new wn,FP=new h2,zC=new ms,op=new gs,zx=new pe,UP=new WZe,lo=new ai,WC=[];function GZe(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class Ioe extends ai{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new $n,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new nm(n,e,e,vo,Ms);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:d}=l,f=new c.constructor(r*u),h=new l.constructor(f,u,d);h.setUsage(l.usage),n.setAttribute(a,h)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);n.setIndex(new kr(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(o0,new kr(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(o0))throw new Error(`BatchedMesh: Geometry cannot use attribute "${o0}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===o0)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=n.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ms);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,xf),this.getBoundingBoxAt(i,zC).applyMatrix4(xf),n.union(zC))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gs);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,xf),this.getBoundingSphereAt(i,op).applyMatrix4(xf),n.union(op))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,f=this._active,h=this._matricesTexture,p=this._matricesTexture.image.data;d.push(!0),f.push(!0);const v=this._geometryCount;this._geometryCount++,VZe.toArray(p,v*16),h.needsUpdate=!0,o.push(i),a.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new ms,sphereInitialized:!1,sphere:new gs});const m=this.geometry.getAttribute(o0);for(let g=0;g<i.vertexCount;g++)m.setX(i.vertexStart+g,v);return m.needsUpdate=!0,this.setGeometryAt(v,e),v}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=n.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||n.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const h in r.attributes){if(h===o0)continue;const p=n.getAttribute(h),v=r.getAttribute(h);GZe(p,v,l);const m=p.itemSize;for(let g=p.count,y=c;g<y;g++){const x=l+g;for(let S=0;S<m;S++)v.setComponent(x,S,0)}v.needsUpdate=!0}if(i){const h=a.indexStart;for(let p=0;p<o.count;p++)s.setX(h+p,l+o.getX(p));for(let p=o.count,v=a.indexCount;p<v;p++)s.setX(h+p,l);s.needsUpdate=!0}const u=this._bounds[e];n.boundingBox!==null?(u.box.copy(n.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,n.boundingSphere!==null?(u.sphere.copy(n.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const d=this._drawRanges[e],f=n.getAttribute("position");return d.count=i?o.count:f.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,d=c.start+c.count;u<d;u++){let f=u;a&&(f=a.getX(f)),s.expandByPoint(zx.fromBufferAttribute(l,f))}i.boxInitialized=!0}return n.copy(s),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,zC),zC.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let d=c.start,f=c.start+c.count;d<f;d++){let h=d;a&&(h=a.getX(h)),zx.fromBufferAttribute(l,h),u=Math.max(u,s.center.distanceToSquared(zx))}s.radius=Math.sqrt(u),i.sphereInitialized=!0}return n.copy(s),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(n.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;lo.material=this.material,lo.geometry.index=l.index,lo.geometry.attributes=l.attributes,lo.geometry.boundingBox===null&&(lo.geometry.boundingBox=new ms),lo.geometry.boundingSphere===null&&(lo.geometry.boundingSphere=new gs);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const u=s[c];lo.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,lo.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,lo.geometry.boundingBox),this.getBoundingSphereAt(c,lo.geometry.boundingSphere),lo.raycast(e,WC);for(let d=0,f=WC.length;d<f;d++){const h=WC[d];h.object=this,h.batchId=c,n.push(h)}WC.length=0}lo.material=null,lo.geometry.index=null,lo.geometry.attributes={},lo.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,u=this._multiDrawCounts,d=this._drawRanges,f=this.perObjectFrustumCulled;f&&(NX.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),FP.setFromProjectionMatrix(NX,e.isWebGPURenderer?Nv:Cc));let h=0;if(this.sortObjects){RX.copy(this.matrixWorld).invert(),zx.setFromMatrixPosition(r.matrixWorld).applyMatrix4(RX);for(let m=0,g=l.length;m<g;m++)if(l[m]){this.getMatrixAt(m,xf),this.getBoundingSphereAt(m,op).applyMatrix4(xf);let y=!1;if(f&&(y=!FP.intersectsSphere(op)),!y){const x=zx.distanceTo(op.center);UP.push(d[m],x)}}const p=UP.list,v=this.customSort;v===null?p.sort(s.transparent?zZe:BZe):v.call(this,p,r);for(let m=0,g=p.length;m<g;m++){const y=p[m];c[h]=y.start*a,u[h]=y.count,h++}UP.reset()}else for(let p=0,v=l.length;p<v;p++)if(l[p]){let m=!1;if(f&&(this.getMatrixAt(p,xf),this.getBoundingSphereAt(p,op).applyMatrix4(xf),m=!FP.intersectsSphere(op)),!m){const g=d[p];c[h]=g.start*a,u[h]=g.count,h++}}this._multiDrawCount=h,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Ko extends Ks{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const PX=new pe,$X=new pe,DX=new wn,BP=new Jm,VC=new gs;let uh=class extends yr{constructor(e=new $n,n=new Ko){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)PX.fromBufferAttribute(n,i-1),$X.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=PX.distanceTo($X);e.setAttribute("lineDistance",new Yt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),VC.copy(r.boundingSphere),VC.applyMatrix4(i),VC.radius+=s,e.ray.intersectsSphere(VC)===!1)return;DX.copy(i).invert(),BP.copy(e.ray).applyMatrix4(DX);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new pe,u=new pe,d=new pe,f=new pe,h=this.isLineSegments?2:1,p=r.index,m=r.attributes.position;if(p!==null){const g=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let x=g,S=y-1;x<S;x+=h){const _=p.getX(x),C=p.getX(x+1);if(c.fromBufferAttribute(m,_),u.fromBufferAttribute(m,C),BP.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(f);A<e.near||A>e.far||n.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count);for(let x=g,S=y-1;x<S;x+=h){if(c.fromBufferAttribute(m,x),u.fromBufferAttribute(m,x+1),BP.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(f);C<e.near||C>e.far||n.push({distance:C,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const LX=new pe,OX=new pe;class Ku extends uh{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)LX.fromBufferAttribute(n,i),OX.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+LX.distanceTo(OX);e.setAttribute("lineDistance",new Yt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Roe extends uh{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class SB extends Ks{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const FX=new wn,gO=new Jm,GC=new gs,HC=new pe;class Noe extends yr{constructor(e=new $n,n=new SB){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),GC.copy(r.boundingSphere),GC.applyMatrix4(i),GC.radius+=s,e.ray.intersectsSphere(GC)===!1)return;FX.copy(i).invert(),gO.copy(e.ray).applyMatrix4(FX);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const f=Math.max(0,o.start),h=Math.min(c.count,o.start+o.count);for(let p=f,v=h;p<v;p++){const m=c.getX(p);HC.fromBufferAttribute(d,m),UX(HC,m,l,i,e,n,this)}}else{const f=Math.max(0,o.start),h=Math.min(d.count,o.start+o.count);for(let p=f,v=h;p<v;p++)HC.fromBufferAttribute(d,p),UX(HC,p,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function UX(t,e,n,r,i,s,o){const a=gO.distanceSqToPoint(t);if(a<n){const l=new pe;gO.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class HZe extends ci{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Er,this.magFilter=s!==void 0?s:Er,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class jZe extends ci{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Fi,this.minFilter=Fi,this.generateMipmaps=!1,this.needsUpdate=!0}}class cI extends ci{constructor(e,n,r,i,s,o,a,l,c,u,d,f){super(null,o,a,l,c,u,i,s,d,f),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class XZe extends cI{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=go}}class qZe extends cI{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,Bu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class YZe extends ci{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class zc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],f=r[i+1]-u,h=(o-u)/f;return(i+h)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new lt:new pe);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new pe,i=[],s=[],o=[],a=new pe,l=new wn;for(let h=0;h<=e;h++){const p=h/e;i[h]=this.getTangentAt(p,new pe)}s[0]=new pe,o[0]=new pe;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),f=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),f<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),o[h]=o[h-1].clone(),a.crossVectors(i[h-1],i[h]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Ci(i[h-1].dot(i[h]),-1,1));s[h].applyMatrix4(l.makeRotationAxis(a,p))}o[h].crossVectors(i[h],s[h])}if(n===!0){let h=Math.acos(Ci(s[0].dot(s[e]),-1,1));h/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(h=-h);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(i[p],h*p)),o[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class uI extends zc{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const r=n||new lt,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,h=c-this.aY;l=f*u-h*d+this.aX,c=f*d+h*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Poe extends uI{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function _B(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let f=(o-s)/c-(a-s)/(c+u)+(a-o)/u,h=(a-o)/u-(l-o)/(u+d)+(l-a)/d;f*=u,h*=u,i(o,a,f,h)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const jC=new pe,zP=new _B,WP=new _B,VP=new _B;class $oe extends zc{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new pe){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(jC.subVectors(i[0],i[1]).add(i[0]),c=jC);const d=i[a%s],f=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(jC.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=jC),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(d),h),v=Math.pow(d.distanceToSquared(f),h),m=Math.pow(f.distanceToSquared(u),h);v<1e-4&&(v=1),p<1e-4&&(p=v),m<1e-4&&(m=v),zP.initNonuniformCatmullRom(c.x,d.x,f.x,u.x,p,v,m),WP.initNonuniformCatmullRom(c.y,d.y,f.y,u.y,p,v,m),VP.initNonuniformCatmullRom(c.z,d.z,f.z,u.z,p,v,m)}else this.curveType==="catmullrom"&&(zP.initCatmullRom(c.x,d.x,f.x,u.x,this.tension),WP.initCatmullRom(c.y,d.y,f.y,u.y,this.tension),VP.initCatmullRom(c.z,d.z,f.z,u.z,this.tension));return r.set(zP.calc(l),WP.calc(l),VP.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new pe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function BX(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function KZe(t,e){const n=1-t;return n*n*e}function ZZe(t,e){return 2*(1-t)*t*e}function JZe(t,e){return t*t*e}function D1(t,e,n,r){return KZe(t,e)+ZZe(t,n)+JZe(t,r)}function QZe(t,e){const n=1-t;return n*n*n*e}function eJe(t,e){const n=1-t;return 3*n*n*t*e}function tJe(t,e){return 3*(1-t)*t*t*e}function nJe(t,e){return t*t*t*e}function L1(t,e,n,r,i){return QZe(t,e)+eJe(t,n)+tJe(t,r)+nJe(t,i)}class CB extends zc{constructor(e=new lt,n=new lt,r=new lt,i=new lt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new lt){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(L1(e,i.x,s.x,o.x,a.x),L1(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Doe extends zc{constructor(e=new pe,n=new pe,r=new pe,i=new pe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new pe){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(L1(e,i.x,s.x,o.x,a.x),L1(e,i.y,s.y,o.y,a.y),L1(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class TB extends zc{constructor(e=new lt,n=new lt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new lt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new lt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Loe extends zc{constructor(e=new pe,n=new pe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new pe){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new pe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class EB extends zc{constructor(e=new lt,n=new lt,r=new lt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new lt){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(D1(e,i.x,s.x,o.x),D1(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class MB extends zc{constructor(e=new pe,n=new pe,r=new pe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new pe){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(D1(e,i.x,s.x,o.x),D1(e,i.y,s.y,o.y),D1(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kB extends zc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new lt){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(BX(a,l.x,c.x,u.x,d.x),BX(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new lt().fromArray(i))}return this}}var EM=Object.freeze({__proto__:null,ArcCurve:Poe,CatmullRomCurve3:$oe,CubicBezierCurve:CB,CubicBezierCurve3:Doe,EllipseCurve:uI,LineCurve:TB,LineCurve3:Loe,QuadraticBezierCurve:EB,QuadraticBezierCurve3:MB,SplineCurve:kB});class Ooe extends zc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new EM[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new EM[i.type]().fromJSON(i))}return this}}class rw extends Ooe{constructor(e){super(),this.type="Path",this.currentPoint=new lt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new TB(this.currentPoint.clone(),new lt(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new EB(this.currentPoint.clone(),new lt(e,n),new lt(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new CB(this.currentPoint.clone(),new lt(e,n),new lt(r,i),new lt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new kB(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const c=new uI(e,n,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class p2 extends $n{constructor(e=[new lt(0,-.5),new lt(.5,0),new lt(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Ci(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/n,d=new pe,f=new lt,h=new pe,p=new pe,v=new pe;let m=0,g=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:m=e[y+1].x-e[y].x,g=e[y+1].y-e[y].y,h.x=g*1,h.y=-m,h.z=g*0,v.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:m=e[y+1].x-e[y].x,g=e[y+1].y-e[y].y,h.x=g*1,h.y=-m,h.z=g*0,p.copy(h),h.x+=v.x,h.y+=v.y,h.z+=v.z,h.normalize(),l.push(h.x,h.y,h.z),v.copy(p)}for(let y=0;y<=n;y++){const x=r+y*u*i,S=Math.sin(x),_=Math.cos(x);for(let C=0;C<=e.length-1;C++){d.x=e[C].x*S,d.y=e[C].y,d.z=e[C].x*_,o.push(d.x,d.y,d.z),f.x=y/n,f.y=C/(e.length-1),a.push(f.x,f.y);const T=l[3*C+0]*S,A=l[3*C+1],k=l[3*C+0]*_;c.push(T,A,k)}}for(let y=0;y<n;y++)for(let x=0;x<e.length-1;x++){const S=x+y*e.length,_=S,C=S+e.length,T=S+e.length+1,A=S+1;s.push(_,C,A),s.push(T,A,C)}this.setIndex(s),this.setAttribute("position",new Yt(o,3)),this.setAttribute("uv",new Yt(a,2)),this.setAttribute("normal",new Yt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new p2(e.points,e.segments,e.phiStart,e.phiLength)}}class dI extends p2{constructor(e=1,n=1,r=4,i=8){const s=new rw;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new dI(e.radius,e.length,e.capSegments,e.radialSegments)}}class fI extends $n{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new pe,u=new lt;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=n;d++,f+=3){const h=r+d/n*i;c.x=e*Math.cos(h),c.y=e*Math.sin(h),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[f]/e+1)/2,u.y=(o[f+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Yt(o,3)),this.setAttribute("normal",new Yt(a,3)),this.setAttribute("uv",new Yt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fI(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Sy extends $n{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],f=[],h=[];let p=0;const v=[],m=r/2;let g=0;y(),o===!1&&(e>0&&x(!0),n>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new Yt(d,3)),this.setAttribute("normal",new Yt(f,3)),this.setAttribute("uv",new Yt(h,2));function y(){const S=new pe,_=new pe;let C=0;const T=(n-e)/r;for(let A=0;A<=s;A++){const k=[],M=A/s,R=M*(n-e)+e;for(let P=0;P<=i;P++){const O=P/i,$=O*l+a,U=Math.sin($),z=Math.cos($);_.x=R*U,_.y=-M*r+m,_.z=R*z,d.push(_.x,_.y,_.z),S.set(U,T,z).normalize(),f.push(S.x,S.y,S.z),h.push(O,1-M),k.push(p++)}v.push(k)}for(let A=0;A<i;A++)for(let k=0;k<s;k++){const M=v[k][A],R=v[k+1][A],P=v[k+1][A+1],O=v[k][A+1];u.push(M,R,O),u.push(R,P,O),C+=6}c.addGroup(g,C,0),g+=C}function x(S){const _=p,C=new lt,T=new pe;let A=0;const k=S===!0?e:n,M=S===!0?1:-1;for(let P=1;P<=i;P++)d.push(0,m*M,0),f.push(0,M,0),h.push(.5,.5),p++;const R=p;for(let P=0;P<=i;P++){const $=P/i*l+a,U=Math.cos($),z=Math.sin($);T.x=k*z,T.y=m*M,T.z=k*U,d.push(T.x,T.y,T.z),f.push(0,M,0),C.x=U*.5+.5,C.y=z*.5*M+.5,h.push(C.x,C.y),p++}for(let P=0;P<i;P++){const O=_+P,$=R+P;S===!0?u.push($,$+1,O):u.push($+1,$,O),A+=3}c.addGroup(g,A,S===!0?1:2),g+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sy(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class hI extends Sy{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new hI(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Mh extends $n{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new Yt(s,3)),this.setAttribute("normal",new Yt(s.slice(),3)),this.setAttribute("uv",new Yt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(y){const x=new pe,S=new pe,_=new pe;for(let C=0;C<n.length;C+=3)h(n[C+0],x),h(n[C+1],S),h(n[C+2],_),l(x,S,_,y)}function l(y,x,S,_){const C=_+1,T=[];for(let A=0;A<=C;A++){T[A]=[];const k=y.clone().lerp(S,A/C),M=x.clone().lerp(S,A/C),R=C-A;for(let P=0;P<=R;P++)P===0&&A===C?T[A][P]=k:T[A][P]=k.clone().lerp(M,P/R)}for(let A=0;A<C;A++)for(let k=0;k<2*(C-A)-1;k++){const M=Math.floor(k/2);k%2===0?(f(T[A][M+1]),f(T[A+1][M]),f(T[A][M])):(f(T[A][M+1]),f(T[A+1][M+1]),f(T[A+1][M]))}}function c(y){const x=new pe;for(let S=0;S<s.length;S+=3)x.x=s[S+0],x.y=s[S+1],x.z=s[S+2],x.normalize().multiplyScalar(y),s[S+0]=x.x,s[S+1]=x.y,s[S+2]=x.z}function u(){const y=new pe;for(let x=0;x<s.length;x+=3){y.x=s[x+0],y.y=s[x+1],y.z=s[x+2];const S=m(y)/2/Math.PI+.5,_=g(y)/Math.PI+.5;o.push(S,1-_)}p(),d()}function d(){for(let y=0;y<o.length;y+=6){const x=o[y+0],S=o[y+2],_=o[y+4],C=Math.max(x,S,_),T=Math.min(x,S,_);C>.9&&T<.1&&(x<.2&&(o[y+0]+=1),S<.2&&(o[y+2]+=1),_<.2&&(o[y+4]+=1))}}function f(y){s.push(y.x,y.y,y.z)}function h(y,x){const S=y*3;x.x=e[S+0],x.y=e[S+1],x.z=e[S+2]}function p(){const y=new pe,x=new pe,S=new pe,_=new pe,C=new lt,T=new lt,A=new lt;for(let k=0,M=0;k<s.length;k+=9,M+=6){y.set(s[k+0],s[k+1],s[k+2]),x.set(s[k+3],s[k+4],s[k+5]),S.set(s[k+6],s[k+7],s[k+8]),C.set(o[M+0],o[M+1]),T.set(o[M+2],o[M+3]),A.set(o[M+4],o[M+5]),_.copy(y).add(x).add(S).divideScalar(3);const R=m(_);v(C,M+0,y,R),v(T,M+2,x,R),v(A,M+4,S,R)}}function v(y,x,S,_){_<0&&y.x===1&&(o[x]=y.x-1),S.x===0&&S.z===0&&(o[x]=_/2/Math.PI+.5)}function m(y){return Math.atan2(y.z,-y.x)}function g(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mh(e.vertices,e.indices,e.radius,e.details)}}class pI extends Mh{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new pI(e.radius,e.detail)}}const XC=new pe,qC=new pe,GP=new pe,YC=new ca;class Foe extends $n{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(em*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),f={},h=[];for(let p=0;p<l;p+=3){o?(c[0]=o.getX(p),c[1]=o.getX(p+1),c[2]=o.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:v,b:m,c:g}=YC;if(v.fromBufferAttribute(a,c[0]),m.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),YC.getNormal(GP),d[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,d[1]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,d[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let y=0;y<3;y++){const x=(y+1)%3,S=d[y],_=d[x],C=YC[u[y]],T=YC[u[x]],A=`${S}_${_}`,k=`${_}_${S}`;k in f&&f[k]?(GP.dot(f[k].normal)<=s&&(h.push(C.x,C.y,C.z),h.push(T.x,T.y,T.z)),f[k]=null):A in f||(f[A]={index0:c[y],index1:c[x],normal:GP.clone()})}}for(const p in f)if(f[p]){const{index0:v,index1:m}=f[p];XC.fromBufferAttribute(a,v),qC.fromBufferAttribute(a,m),h.push(XC.x,XC.y,XC.z),h.push(qC.x,qC.y,qC.z)}this.setAttribute("position",new Yt(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class rm extends rw{constructor(e){super(e),this.uuid=Qa(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new rw().fromJSON(i))}return this}}const rJe={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=Uoe(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,f,h;if(r&&(s=lJe(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let p=n;p<i;p+=n)d=t[p],f=t[p+1],d<a&&(a=d),f<l&&(l=f),d>c&&(c=d),f>u&&(u=f);h=Math.max(c-a,u-l),h=h!==0?32767/h:0}return iw(s,o,n,a,l,h,0),o}};function Uoe(t,e,n,r,i){let s,o;if(i===xJe(t,e,n,r)>0)for(s=e;s<n;s+=r)o=zX(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=zX(s,t[s],t[s+1],o);return o&&mI(o,o.next)&&(ow(o),o=o.next),o}function Mm(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(mI(n,n.next)||mi(n.prev,n,n.next)===0)){if(ow(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function iw(t,e,n,r,i,s,o){if(!t)return;!o&&s&&hJe(t,r,i,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?sJe(t,r,i,s):iJe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),ow(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=oJe(Mm(t),e,n),iw(t,e,n,r,i,s,2)):o===2&&aJe(t,e,n,r,i,s):iw(Mm(t),e,n,r,i,s,1);break}}}function iJe(t){const e=t.prev,n=t,r=t.next;if(mi(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,f=i>s?i>o?i:o:s>o?s:o,h=a>l?a>c?a:c:l>c?l:c;let p=r.next;for(;p!==e;){if(p.x>=u&&p.x<=f&&p.y>=d&&p.y<=h&&F0(i,a,s,l,o,c,p.x,p.y)&&mi(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function sJe(t,e,n,r){const i=t.prev,s=t,o=t.next;if(mi(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,f=o.y,h=a<l?a<c?a:c:l<c?l:c,p=u<d?u<f?u:f:d<f?d:f,v=a>l?a>c?a:c:l>c?l:c,m=u>d?u>f?u:f:d>f?d:f,g=vO(h,p,e,n,r),y=vO(v,m,e,n,r);let x=t.prevZ,S=t.nextZ;for(;x&&x.z>=g&&S&&S.z<=y;){if(x.x>=h&&x.x<=v&&x.y>=p&&x.y<=m&&x!==i&&x!==o&&F0(a,u,l,d,c,f,x.x,x.y)&&mi(x.prev,x,x.next)>=0||(x=x.prevZ,S.x>=h&&S.x<=v&&S.y>=p&&S.y<=m&&S!==i&&S!==o&&F0(a,u,l,d,c,f,S.x,S.y)&&mi(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;x&&x.z>=g;){if(x.x>=h&&x.x<=v&&x.y>=p&&x.y<=m&&x!==i&&x!==o&&F0(a,u,l,d,c,f,x.x,x.y)&&mi(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;S&&S.z<=y;){if(S.x>=h&&S.x<=v&&S.y>=p&&S.y<=m&&S!==i&&S!==o&&F0(a,u,l,d,c,f,S.x,S.y)&&mi(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function oJe(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!mI(i,s)&&Boe(i,r,r.next,s)&&sw(i,s)&&sw(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),ow(r),ow(r.next),r=t=s),r=r.next}while(r!==t);return Mm(r)}function aJe(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&gJe(o,a)){let l=zoe(o,a);o=Mm(o,o.next),l=Mm(l,l.next),iw(o,e,n,r,i,s,0),iw(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function lJe(t,e,n,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=Uoe(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(mJe(c));for(i.sort(cJe),s=0;s<i.length;s++)n=uJe(i[s],n);return n}function cJe(t,e){return t.x-e.x}function uJe(t,e){const n=dJe(t,e);if(!n)return e;const r=zoe(n,t);return Mm(r,r.next),Mm(n,n.next)}function dJe(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const f=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=s&&f>r&&(r=f,i=n.x<n.next.x?n:n.next,f===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,d;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&F0(o<c?s:r,o,l,c,o<c?r:s,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(s-n.x),sw(n,t)&&(d<u||d===u&&(n.x>i.x||n.x===i.x&&fJe(i,n)))&&(i=n,u=d)),n=n.next;while(n!==a);return i}function fJe(t,e){return mi(t.prev,t,e.prev)<0&&mi(e.next,t,t.next)<0}function hJe(t,e,n,r){let i=t;do i.z===0&&(i.z=vO(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,pJe(i)}function pJe(t){let e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function vO(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function mJe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function F0(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function gJe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!vJe(t,e)&&(sw(t,e)&&sw(e,t)&&yJe(t,e)&&(mi(t.prev,t,e.prev)||mi(t,e.prev,e))||mI(t,e)&&mi(t.prev,t,t.next)>0&&mi(e.prev,e,e.next)>0)}function mi(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function mI(t,e){return t.x===e.x&&t.y===e.y}function Boe(t,e,n,r){const i=ZC(mi(t,e,n)),s=ZC(mi(t,e,r)),o=ZC(mi(n,r,t)),a=ZC(mi(n,r,e));return!!(i!==s&&o!==a||i===0&&KC(t,n,e)||s===0&&KC(t,r,e)||o===0&&KC(n,t,r)||a===0&&KC(n,e,r))}function KC(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function ZC(t){return t>0?1:t<0?-1:0}function vJe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Boe(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function sw(t,e){return mi(t.prev,t,t.next)<0?mi(t,e,t.next)>=0&&mi(t,t.prev,e)>=0:mi(t,e,t.prev)<0||mi(t,t.next,e)<0}function yJe(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function zoe(t,e){const n=new yO(t.i,t.x,t.y),r=new yO(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function zX(t,e,n,r){const i=new yO(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ow(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function yO(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xJe(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class ku{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return ku.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];WX(e),VX(r,e);let o=e.length;n.forEach(WX);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,VX(r,n[l]);const a=rJe.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function WX(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function VX(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class gI extends $n{constructor(e=new rm([new lt(.5,.5),new lt(-.5,.5),new lt(-.5,-.5),new lt(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Yt(i,3)),this.setAttribute("uv",new Yt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let f=n.bevelEnabled!==void 0?n.bevelEnabled:!0,h=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:h-.1,v=n.bevelOffset!==void 0?n.bevelOffset:0,m=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,y=n.UVGenerator!==void 0?n.UVGenerator:bJe;let x,S=!1,_,C,T,A;g&&(x=g.getSpacedPoints(u),S=!0,f=!1,_=g.computeFrenetFrames(u,!1),C=new pe,T=new pe,A=new pe),f||(m=0,h=0,p=0,v=0);const k=a.extractPoints(c);let M=k.shape;const R=k.holes;if(!ku.isClockWise(M)){M=M.reverse();for(let H=0,Me=R.length;H<Me;H++){const we=R[H];ku.isClockWise(we)&&(R[H]=we.reverse())}}const O=ku.triangulateShape(M,R),$=M;for(let H=0,Me=R.length;H<Me;H++){const we=R[H];M=M.concat(we)}function U(H,Me,we){return Me||console.error("THREE.ExtrudeGeometry: vec does not exist"),H.clone().addScaledVector(Me,we)}const z=M.length,X=O.length;function D(H,Me,we){let Ee,me,qe;const ke=H.x-Me.x,ee=H.y-Me.y,Y=we.x-H.x,oe=we.y-H.y,xe=ke*ke+ee*ee,Se=ke*oe-ee*Y;if(Math.abs(Se)>Number.EPSILON){const be=Math.sqrt(xe),Re=Math.sqrt(Y*Y+oe*oe),Ke=Me.x-ee/be,ze=Me.y+ke/be,Pe=we.x-oe/Re,De=we.y+Y/Re,We=((Pe-Ke)*oe-(De-ze)*Y)/(ke*oe-ee*Y);Ee=Ke+ke*We-H.x,me=ze+ee*We-H.y;const gt=Ee*Ee+me*me;if(gt<=2)return new lt(Ee,me);qe=Math.sqrt(gt/2)}else{let be=!1;ke>Number.EPSILON?Y>Number.EPSILON&&(be=!0):ke<-Number.EPSILON?Y<-Number.EPSILON&&(be=!0):Math.sign(ee)===Math.sign(oe)&&(be=!0),be?(Ee=-ee,me=ke,qe=Math.sqrt(xe)):(Ee=ke,me=ee,qe=Math.sqrt(xe/2))}return new lt(Ee/qe,me/qe)}const F=[];for(let H=0,Me=$.length,we=Me-1,Ee=H+1;H<Me;H++,we++,Ee++)we===Me&&(we=0),Ee===Me&&(Ee=0),F[H]=D($[H],$[we],$[Ee]);const W=[];let V,j=F.concat();for(let H=0,Me=R.length;H<Me;H++){const we=R[H];V=[];for(let Ee=0,me=we.length,qe=me-1,ke=Ee+1;Ee<me;Ee++,qe++,ke++)qe===me&&(qe=0),ke===me&&(ke=0),V[Ee]=D(we[Ee],we[qe],we[ke]);W.push(V),j=j.concat(V)}for(let H=0;H<m;H++){const Me=H/m,we=h*Math.cos(Me*Math.PI/2),Ee=p*Math.sin(Me*Math.PI/2)+v;for(let me=0,qe=$.length;me<qe;me++){const ke=U($[me],F[me],Ee);se(ke.x,ke.y,-we)}for(let me=0,qe=R.length;me<qe;me++){const ke=R[me];V=W[me];for(let ee=0,Y=ke.length;ee<Y;ee++){const oe=U(ke[ee],V[ee],Ee);se(oe.x,oe.y,-we)}}}const J=p+v;for(let H=0;H<z;H++){const Me=f?U(M[H],j[H],J):M[H];S?(T.copy(_.normals[0]).multiplyScalar(Me.x),C.copy(_.binormals[0]).multiplyScalar(Me.y),A.copy(x[0]).add(T).add(C),se(A.x,A.y,A.z)):se(Me.x,Me.y,0)}for(let H=1;H<=u;H++)for(let Me=0;Me<z;Me++){const we=f?U(M[Me],j[Me],J):M[Me];S?(T.copy(_.normals[H]).multiplyScalar(we.x),C.copy(_.binormals[H]).multiplyScalar(we.y),A.copy(x[H]).add(T).add(C),se(A.x,A.y,A.z)):se(we.x,we.y,d/u*H)}for(let H=m-1;H>=0;H--){const Me=H/m,we=h*Math.cos(Me*Math.PI/2),Ee=p*Math.sin(Me*Math.PI/2)+v;for(let me=0,qe=$.length;me<qe;me++){const ke=U($[me],F[me],Ee);se(ke.x,ke.y,d+we)}for(let me=0,qe=R.length;me<qe;me++){const ke=R[me];V=W[me];for(let ee=0,Y=ke.length;ee<Y;ee++){const oe=U(ke[ee],V[ee],Ee);S?se(oe.x,oe.y+x[u-1].y,x[u-1].x+we):se(oe.x,oe.y,d+we)}}}Q(),te();function Q(){const H=i.length/3;if(f){let Me=0,we=z*Me;for(let Ee=0;Ee<X;Ee++){const me=O[Ee];fe(me[2]+we,me[1]+we,me[0]+we)}Me=u+m*2,we=z*Me;for(let Ee=0;Ee<X;Ee++){const me=O[Ee];fe(me[0]+we,me[1]+we,me[2]+we)}}else{for(let Me=0;Me<X;Me++){const we=O[Me];fe(we[2],we[1],we[0])}for(let Me=0;Me<X;Me++){const we=O[Me];fe(we[0]+z*u,we[1]+z*u,we[2]+z*u)}}r.addGroup(H,i.length/3-H,0)}function te(){const H=i.length/3;let Me=0;re($,Me),Me+=$.length;for(let we=0,Ee=R.length;we<Ee;we++){const me=R[we];re(me,Me),Me+=me.length}r.addGroup(H,i.length/3-H,1)}function re(H,Me){let we=H.length;for(;--we>=0;){const Ee=we;let me=we-1;me<0&&(me=H.length-1);for(let qe=0,ke=u+m*2;qe<ke;qe++){const ee=z*qe,Y=z*(qe+1),oe=Me+Ee+ee,xe=Me+me+ee,Se=Me+me+Y,be=Me+Ee+Y;ae(oe,xe,Se,be)}}}function se(H,Me,we){l.push(H),l.push(Me),l.push(we)}function fe(H,Me,we){ye(H),ye(Me),ye(we);const Ee=i.length/3,me=y.generateTopUV(r,i,Ee-3,Ee-2,Ee-1);le(me[0]),le(me[1]),le(me[2])}function ae(H,Me,we,Ee){ye(H),ye(Me),ye(Ee),ye(Me),ye(we),ye(Ee);const me=i.length/3,qe=y.generateSideWallUV(r,i,me-6,me-3,me-2,me-1);le(qe[0]),le(qe[1]),le(qe[3]),le(qe[1]),le(qe[2]),le(qe[3])}function ye(H){i.push(l[H*3+0]),i.push(l[H*3+1]),i.push(l[H*3+2])}function le(H){s.push(H.x),s.push(H.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return wJe(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new EM[i.type]().fromJSON(i)),new gI(r,e.options)}}const bJe={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new lt(s,o),new lt(a,l),new lt(c,u)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],f=e[i*3],h=e[i*3+1],p=e[i*3+2],v=e[s*3],m=e[s*3+1],g=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new lt(o,1-l),new lt(c,1-d),new lt(f,1-p),new lt(v,1-g)]:[new lt(a,1-l),new lt(u,1-d),new lt(h,1-p),new lt(m,1-g)]}};function wJe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class m2 extends Mh{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new m2(e.radius,e.detail)}}class g2 extends Mh{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new g2(e.radius,e.detail)}}class vI extends $n{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let d=e;const f=(n-e)/i,h=new pe,p=new lt;for(let v=0;v<=i;v++){for(let m=0;m<=r;m++){const g=s+m/r*o;h.x=d*Math.cos(g),h.y=d*Math.sin(g),l.push(h.x,h.y,h.z),c.push(0,0,1),p.x=(h.x/n+1)/2,p.y=(h.y/n+1)/2,u.push(p.x,p.y)}d+=f}for(let v=0;v<i;v++){const m=v*(r+1);for(let g=0;g<r;g++){const y=g+m,x=y,S=y+r+1,_=y+r+2,C=y+1;a.push(x,S,C),a.push(S,_,C)}}this.setIndex(a),this.setAttribute("position",new Yt(l,3)),this.setAttribute("normal",new Yt(c,3)),this.setAttribute("uv",new Yt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vI(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class yI extends $n{constructor(e=new rm([new lt(0,.5),new lt(-.5,-.5),new lt(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Yt(i,3)),this.setAttribute("normal",new Yt(s,3)),this.setAttribute("uv",new Yt(o,2));function c(u){const d=i.length/3,f=u.extractPoints(n);let h=f.shape;const p=f.holes;ku.isClockWise(h)===!1&&(h=h.reverse());for(let m=0,g=p.length;m<g;m++){const y=p[m];ku.isClockWise(y)===!0&&(p[m]=y.reverse())}const v=ku.triangulateShape(h,p);for(let m=0,g=p.length;m<g;m++){const y=p[m];h=h.concat(y)}for(let m=0,g=h.length;m<g;m++){const y=h[m];i.push(y.x,y.y,0),s.push(0,0,1),o.push(y.x,y.y)}for(let m=0,g=v.length;m<g;m++){const y=v[m],x=y[0]+d,S=y[1]+d,_=y[2]+d;r.push(x,S,_),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return SJe(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new yI(r,e.curveSegments)}}function SJe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class v2 extends $n{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new pe,f=new pe,h=[],p=[],v=[],m=[];for(let g=0;g<=r;g++){const y=[],x=g/r;let S=0;g===0&&o===0?S=.5/n:g===r&&l===Math.PI&&(S=-.5/n);for(let _=0;_<=n;_++){const C=_/n;d.x=-e*Math.cos(i+C*s)*Math.sin(o+x*a),d.y=e*Math.cos(o+x*a),d.z=e*Math.sin(i+C*s)*Math.sin(o+x*a),p.push(d.x,d.y,d.z),f.copy(d).normalize(),v.push(f.x,f.y,f.z),m.push(C+S,1-x),y.push(c++)}u.push(y)}for(let g=0;g<r;g++)for(let y=0;y<n;y++){const x=u[g][y+1],S=u[g][y],_=u[g+1][y],C=u[g+1][y+1];(g!==0||o>0)&&h.push(x,S,C),(g!==r-1||l<Math.PI)&&h.push(S,_,C)}this.setIndex(h),this.setAttribute("position",new Yt(p,3)),this.setAttribute("normal",new Yt(v,3)),this.setAttribute("uv",new Yt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new v2(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class xI extends Mh{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new xI(e.radius,e.detail)}}class bI extends $n{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new pe,d=new pe,f=new pe;for(let h=0;h<=r;h++)for(let p=0;p<=i;p++){const v=p/i*s,m=h/r*Math.PI*2;d.x=(e+n*Math.cos(m))*Math.cos(v),d.y=(e+n*Math.cos(m))*Math.sin(v),d.z=n*Math.sin(m),a.push(d.x,d.y,d.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(p/i),c.push(h/r)}for(let h=1;h<=r;h++)for(let p=1;p<=i;p++){const v=(i+1)*h+p-1,m=(i+1)*(h-1)+p-1,g=(i+1)*(h-1)+p,y=(i+1)*h+p;o.push(v,m,y),o.push(m,g,y)}this.setIndex(o),this.setAttribute("position",new Yt(a,3)),this.setAttribute("normal",new Yt(l,3)),this.setAttribute("uv",new Yt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bI(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class wI extends $n{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],d=new pe,f=new pe,h=new pe,p=new pe,v=new pe,m=new pe,g=new pe;for(let x=0;x<=r;++x){const S=x/r*s*Math.PI*2;y(S,s,o,e,h),y(S+.01,s,o,e,p),m.subVectors(p,h),g.addVectors(p,h),v.crossVectors(m,g),g.crossVectors(v,m),v.normalize(),g.normalize();for(let _=0;_<=i;++_){const C=_/i*Math.PI*2,T=-n*Math.cos(C),A=n*Math.sin(C);d.x=h.x+(T*g.x+A*v.x),d.y=h.y+(T*g.y+A*v.y),d.z=h.z+(T*g.z+A*v.z),l.push(d.x,d.y,d.z),f.subVectors(d,h).normalize(),c.push(f.x,f.y,f.z),u.push(x/r),u.push(_/i)}}for(let x=1;x<=r;x++)for(let S=1;S<=i;S++){const _=(i+1)*(x-1)+(S-1),C=(i+1)*x+(S-1),T=(i+1)*x+S,A=(i+1)*(x-1)+S;a.push(_,C,A),a.push(C,T,A)}this.setIndex(a),this.setAttribute("position",new Yt(l,3)),this.setAttribute("normal",new Yt(c,3)),this.setAttribute("uv",new Yt(u,2));function y(x,S,_,C,T){const A=Math.cos(x),k=Math.sin(x),M=_/S*x,R=Math.cos(M);T.x=C*(2+R)*.5*A,T.y=C*(2+R)*k*.5,T.z=C*Math.sin(M)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wI(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class SI extends $n{constructor(e=new MB(new pe(-1,-1,0),new pe(-1,1,0),new pe(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new pe,l=new pe,c=new lt;let u=new pe;const d=[],f=[],h=[],p=[];v(),this.setIndex(p),this.setAttribute("position",new Yt(d,3)),this.setAttribute("normal",new Yt(f,3)),this.setAttribute("uv",new Yt(h,2));function v(){for(let x=0;x<n;x++)m(x);m(s===!1?n:0),y(),g()}function m(x){u=e.getPointAt(x/n,u);const S=o.normals[x],_=o.binormals[x];for(let C=0;C<=i;C++){const T=C/i*Math.PI*2,A=Math.sin(T),k=-Math.cos(T);l.x=k*S.x+A*_.x,l.y=k*S.y+A*_.y,l.z=k*S.z+A*_.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,d.push(a.x,a.y,a.z)}}function g(){for(let x=1;x<=n;x++)for(let S=1;S<=i;S++){const _=(i+1)*(x-1)+(S-1),C=(i+1)*x+(S-1),T=(i+1)*x+S,A=(i+1)*(x-1)+S;p.push(_,C,A),p.push(C,T,A)}}function y(){for(let x=0;x<=n;x++)for(let S=0;S<=i;S++)c.x=x/n,c.y=S/i,h.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new SI(new EM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class AB extends $n{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new pe,s=new pe;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],f=d.start,h=d.count;for(let p=f,v=f+h;p<v;p+=3)for(let m=0;m<3;m++){const g=a.getX(p+m),y=a.getX(p+(m+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,y),GX(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),GX(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Yt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function GX(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var HX=Object.freeze({__proto__:null,BoxGeometry:Qm,CapsuleGeometry:dI,CircleGeometry:fI,ConeGeometry:hI,CylinderGeometry:Sy,DodecahedronGeometry:pI,EdgesGeometry:Foe,ExtrudeGeometry:gI,IcosahedronGeometry:m2,LatheGeometry:p2,OctahedronGeometry:g2,PlaneGeometry:Eh,PolyhedronGeometry:Mh,RingGeometry:vI,ShapeGeometry:yI,SphereGeometry:v2,TetrahedronGeometry:xI,TorusGeometry:bI,TorusKnotGeometry:wI,TubeGeometry:SI,WireframeGeometry:AB});class Woe extends Ks{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Bt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Voe extends jl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class IB extends Ks{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Th,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Goe extends IB{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new lt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ci(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Hoe extends Ks{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Bt(16777215),this.specular=new Bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Th,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=l2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class joe extends Ks{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Th,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Xoe extends Ks{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Th,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class qoe extends Ks{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Th,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=l2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Yoe extends Ks{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Th,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Koe extends Ko{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function zp(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function Zoe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Joe(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function xO(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function RB(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function _Je(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],f=[];for(let h=0;h<c.times.length;++h){const p=c.times[h]*i;if(!(p<n||p>=r)){d.push(c.times[h]);for(let v=0;v<u;++v)f.push(c.values[h*u+v])}}d.length!==0&&(c.times=zp(d,c.times.constructor),c.values=zp(f,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function CJe(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let f=0;const h=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=h/3);const p=a.times.length-1;let v;if(s<=a.times[0]){const g=u,y=d-u;v=a.values.slice(g,y)}else if(s>=a.times[p]){const g=p*d+u,y=g+d-u;v=a.values.slice(g,y)}else{const g=a.createInterpolant(),y=u,x=d-u;g.evaluate(s),v=g.resultBuffer.slice(y,x)}l==="quaternion"&&new wo().fromArray(v).normalize().conjugate().toArray(v);const m=c.times.length;for(let g=0;g<m;++g){const y=g*h+f;if(l==="quaternion")wo.multiplyQuaternionsFlat(c.values,y,v,0,c.values,y);else{const x=h-f*2;for(let S=0;S<x;++S)c.values[y+S]-=v[S]}}}return t.blendMode=lB,t}const TJe={convertArray:zp,isTypedArray:Zoe,getKeyframeOrder:Joe,sortedArray:xO,flattenJSON:RB,subclip:_Je,makeClipAdditive:CJe};class y2{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Qoe extends y2{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Op,endingEnd:Op}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Fp:s=e,a=2*n-r;break;case Yb:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Fp:o=e,l=2*r-n;break;case Yb:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const c=(r-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(r-n)/(i-n),v=p*p,m=v*p,g=-f*m+2*f*v-f*p,y=(1+f)*m+(-1.5-2*f)*v+(-.5+f)*p+1,x=(-1-h)*m+(1.5+h)*v+.5*p,S=h*m-h*v;for(let _=0;_!==a;++_)s[_]=g*o[u+_]+y*o[c+_]+x*o[l+_]+S*o[d+_];return s}}class NB extends y2{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-n)/(i-n),d=1-u;for(let f=0;f!==a;++f)s[f]=o[c+f]*d+o[l+f]*u;return s}}class eae extends y2{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Wc{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=zp(n,this.TimeBufferType),this.values=zp(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:zp(e.times,Array),values:zp(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new eae(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new NB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Qoe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Xb:n=this.InterpolantFactoryMethodDiscrete;break;case qb:n=this.InterpolantFactoryMethodLinear;break;case iE:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Xb;case this.InterpolantFactoryMethodLinear:return qb;case this.InterpolantFactoryMethodSmooth:return iE}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&Zoe(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===iE,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,f=d-r,h=d+r;for(let p=0;p!==r;++p){const v=n[d+p];if(v!==n[f+p]||v!==n[h+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,f=o*r;for(let h=0;h!==r;++h)n[f+h]=n[d+h]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Wc.prototype.TimeBufferType=Float32Array;Wc.prototype.ValueBufferType=Float32Array;Wc.prototype.DefaultInterpolation=qb;class eg extends Wc{}eg.prototype.ValueTypeName="bool";eg.prototype.ValueBufferType=Array;eg.prototype.DefaultInterpolation=Xb;eg.prototype.InterpolantFactoryMethodLinear=void 0;eg.prototype.InterpolantFactoryMethodSmooth=void 0;class PB extends Wc{}PB.prototype.ValueTypeName="color";class aw extends Wc{}aw.prototype.ValueTypeName="number";class tae extends y2{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let c=e*a;for(let u=c+a;c!==u;c+=4)wo.slerpFlat(s,0,o,c-a,o,c,l);return s}}class _y extends Wc{InterpolantFactoryMethodLinear(e){return new tae(this.times,this.values,this.getValueSize(),e)}}_y.prototype.ValueTypeName="quaternion";_y.prototype.DefaultInterpolation=qb;_y.prototype.InterpolantFactoryMethodSmooth=void 0;class tg extends Wc{}tg.prototype.ValueTypeName="string";tg.prototype.ValueBufferType=Array;tg.prototype.DefaultInterpolation=Xb;tg.prototype.InterpolantFactoryMethodLinear=void 0;tg.prototype.InterpolantFactoryMethodSmooth=void 0;class lw extends Wc{}lw.prototype.ValueTypeName="vector";class cw{constructor(e,n=-1,r,i=JA){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Qa(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(MJe(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(Wc.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=Joe(l);l=xO(l,1,u),c=xO(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new aw(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let f=i[d];f||(i[d]=f=[]),f.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,f,h,p,v){if(h.length!==0){const m=[],g=[];RB(h,m,g,p),m.length!==0&&v.push(new d(f,m,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const h={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let v=0;v<f[p].morphTargets.length;v++)h[f[p].morphTargets[v]]=-1;for(const v in h){const m=[],g=[];for(let y=0;y!==f[p].morphTargets.length;++y){const x=f[p];m.push(x.time),g.push(x.morphTarget===v?1:0)}i.push(new aw(".morphTargetInfluence["+v+"]",m,g))}l=h.length*o}else{const h=".bones["+n[d].name+"]";r(lw,h+".position",f,"pos",i),r(_y,h+".quaternion",f,"rot",i),r(lw,h+".scale",f,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function EJe(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return aw;case"vector":case"vector2":case"vector3":case"vector4":return lw;case"color":return PB;case"quaternion":return _y;case"bool":case"boolean":return eg;case"string":return tg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function MJe(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=EJe(t.type);if(t.times===void 0){const n=[],r=[];RB(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Id={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class $B{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const h=c[d],p=c[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return p}return null}}}const nae=new $B;class Ma{constructor(e){this.manager=e!==void 0?e:nae,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ma.DEFAULT_MATERIAL_NAME="__DEFAULT";const hd={};class kJe extends Error{constructor(e,n){super(e),this.response=n}}class Vd extends Ma{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Id.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(hd[e]!==void 0){hd[e].push({onLoad:n,onProgress:r,onError:i});return}hd[e]=[],hd[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=hd[e],d=c.body.getReader(),f=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),h=f?parseInt(f):0,p=h!==0;let v=0;const m=new ReadableStream({start(g){y();function y(){d.read().then(({done:x,value:S})=>{if(x)g.close();else{v+=S.byteLength;const _=new ProgressEvent("progress",{lengthComputable:p,loaded:v,total:h});for(let C=0,T=u.length;C<T;C++){const A=u[C];A.onProgress&&A.onProgress(_)}g.enqueue(S),y()}})}}});return new Response(m)}else throw new kJe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),f=d&&d[1]?d[1].toLowerCase():void 0,h=new TextDecoder(f);return c.arrayBuffer().then(p=>h.decode(p))}}}).then(c=>{Id.add(e,c);const u=hd[e];delete hd[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onLoad&&h.onLoad(c)}}).catch(c=>{const u=hd[e];if(u===void 0)throw this.manager.itemError(e),c;delete hd[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onError&&h.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class AJe extends Ma{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Vd(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=cw.parse(e[r]);n.push(i)}return n}}class IJe extends Ma{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new cI,l=new Vd(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(f){const h=s.parse(f,!0);o[d]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},c+=1,c===6&&(h.mipmapCount===1&&(a.minFilter=Er),a.image=o,a.format=h.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)u(d);else l.load(e,function(d){const f=s.parse(d,!0);if(f.isCubemap){const h=f.mipmaps.length/f.mipmapCount;for(let p=0;p<h;p++){o[p]={mipmaps:[]};for(let v=0;v<f.mipmapCount;v++)o[p].mipmaps.push(f.mipmaps[p*f.mipmapCount+v]),o[p].format=f.format,o[p].width=f.width,o[p].height=f.height}a.image=o}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=Er),a.format=f.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class uw extends Ma{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Id.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=ew("img");function l(){u(),Id.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class rae extends Ma{constructor(e){super(e)}load(e,n,r,i){const s=new f2;s.colorSpace=us;const o=new uw(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class DB extends Ma{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new nm,a=new Vd(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:go,o.wrapT=c.wrapT!==void 0?c.wrapT:go,o.magFilter=c.magFilter!==void 0?c.magFilter:Er,o.minFilter=c.minFilter!==void 0?c.minFilter:Er,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=ch),c.mipmapCount===1&&(o.minFilter=Er),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c)},r,i),o}}class RJe extends Ma{constructor(e){super(e)}load(e,n,r,i){const s=new ci,o=new uw(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class kh extends yr{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Bt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class iae extends kh{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Bt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const HP=new wn,jX=new pe,XX=new pe;class LB{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new lt(512,512),this.map=null,this.mapPass=null,this.matrix=new wn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new h2,this._frameExtents=new lt(1,1),this._viewportCount=1,this._viewports=[new er(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;jX.setFromMatrixPosition(e.matrixWorld),n.position.copy(jX),XX.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(XX),n.updateMatrixWorld(),HP.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(HP),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(HP)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class NJe extends LB{constructor(){super(new Ti(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Pv*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class sae extends kh{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yr.DEFAULT_UP),this.updateMatrix(),this.target=new yr,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new NJe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const qX=new wn,Wx=new pe,jP=new pe;class PJe extends LB{constructor(){super(new Ti(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new lt(4,2),this._viewportCount=6,this._viewports=[new er(2,1,1,1),new er(0,1,1,1),new er(3,1,1,1),new er(1,1,1,1),new er(3,0,1,1),new er(1,0,1,1)],this._cubeDirections=[new pe(1,0,0),new pe(-1,0,0),new pe(0,0,1),new pe(0,0,-1),new pe(0,1,0),new pe(0,-1,0)],this._cubeUps=[new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,0,1),new pe(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Wx.setFromMatrixPosition(e.matrixWorld),r.position.copy(Wx),jP.copy(r.position),jP.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(jP),r.updateMatrixWorld(),i.makeTranslation(-Wx.x,-Wx.y,-Wx.z),qX.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qX)}}class oae extends kh{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new PJe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class $Je extends LB{constructor(){super(new Ad(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class aae extends kh{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yr.DEFAULT_UP),this.updateMatrix(),this.target=new yr,this.shadow=new $Je}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class lae extends kh{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class cae extends kh{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class uae{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new pe)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class dae extends kh{constructor(e=new uae,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class _I extends Ma{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new Vd(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=_I.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Bt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Bt().setHex(o.value);break;case"v2":i.uniforms[s].value=new lt().fromArray(o.value);break;case"v3":i.uniforms[s].value=new pe().fromArray(o.value);break;case"v4":i.uniforms[s].value=new er().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Dn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new wn().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new lt().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new lt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:Woe,SpriteMaterial:bB,RawShaderMaterial:Voe,ShaderMaterial:jl,PointsMaterial:SB,MeshPhysicalMaterial:Goe,MeshStandardMaterial:IB,MeshPhongMaterial:Hoe,MeshToonMaterial:joe,MeshNormalMaterial:Xoe,MeshLambertMaterial:qoe,MeshDepthMaterial:rI,MeshDistanceMaterial:iI,MeshBasicMaterial:Kd,MeshMatcapMaterial:Yoe,LineDashedMaterial:Koe,LineBasicMaterial:Ko,Material:Ks};return new n[e]}}class bO{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class CI extends $n{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class fae extends Ma{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Vd(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(h,p){if(n[p]!==void 0)return n[p];const m=h.interleavedBuffers[p],g=s(h,m.buffer),y=$0(m.type,g),x=new aI(y,m.stride);return x.uuid=m.uuid,n[p]=x,x}function s(h,p){if(r[p]!==void 0)return r[p];const m=h.arrayBuffers[p],g=new Uint32Array(m).buffer;return r[p]=g,g}const o=e.isInstancedBufferGeometry?new CI:new $n,a=e.data.index;if(a!==void 0){const h=$0(a.type,a.array);o.setIndex(new kr(h,1))}const l=e.data.attributes;for(const h in l){const p=l[h];let v;if(p.isInterleavedBufferAttribute){const m=i(e.data,p.data);v=new Ya(m,p.itemSize,p.offset,p.normalized)}else{const m=$0(p.type,p.array),g=p.isInstancedBufferAttribute?Em:kr;v=new g(m,p.itemSize,p.normalized)}p.name!==void 0&&(v.name=p.name),p.usage!==void 0&&v.setUsage(p.usage),o.setAttribute(h,v)}const c=e.data.morphAttributes;if(c)for(const h in c){const p=c[h],v=[];for(let m=0,g=p.length;m<g;m++){const y=p[m];let x;if(y.isInterleavedBufferAttribute){const S=i(e.data,y.data);x=new Ya(S,y.itemSize,y.offset,y.normalized)}else{const S=$0(y.type,y.array);x=new kr(S,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),v.push(x)}o.morphAttributes[h]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let h=0,p=d.length;h!==p;++h){const v=d[h];o.addGroup(v.start,v.count,v.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const h=new pe;f.center!==void 0&&h.fromArray(f.center),o.boundingSphere=new gs(h,f.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class DJe extends Ma{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?bO.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Vd(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?bO.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new Vd(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),n!==void 0){let d=!1;for(const f in o)if(o[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new rm().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new lI().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new fae;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in HX?a=HX[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new _I;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=cw.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:$0(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new $B(n);s=new uw(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],f=d.url;if(Array.isArray(f)){const h=[];for(let p=0,v=f.length;p<v;p++){const m=f[p],g=a(m);g!==null&&(g instanceof HTMLImageElement?h.push(g):h.push(new nm(g.data,g.width,g.height)))}i[d.uuid]=new Up(h)}else{const h=a(d.url);i[d.uuid]=new Up(h)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:$0(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new uw(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d],p=await s(h);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new nm(p.data,p.width,p.height)))}r[l.uuid]=new Up(u)}else{const u=await s(l.url);r[l.uuid]=new Up(u)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new f2,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new nm:u=new ci,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,LJe)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],YX),u.wrapT=r(a.wrap[1],YX)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,KX)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,KX)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,n,r,i,s){let o;function a(f){return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),n[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const h=[];for(let p=0,v=f.length;p<v;p++){const m=f[p];r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),h.push(r[m])}return h}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function c(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let u,d;switch(e.type){case"Scene":o=new nw,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Bt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new oI(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new sI(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Ti(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ad(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new lae(e.color,e.intensity);break;case"DirectionalLight":o=new aae(e.color,e.intensity);break;case"PointLight":o=new oae(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new cae(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new sae(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new iae(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new dae().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new koe(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new ai(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const f=e.count,h=e.instanceMatrix,p=e.instanceColor;o=new Aoe(u,d,f),o.instanceMatrix=new Em(new Float32Array(h.array),16),p!==void 0&&(o.instanceColor=new Em(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":u=a(e.geometry),d=l(e.material),o=new Ioe(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(v=>{const m=new ms;m.min.fromArray(v.boxMin),m.max.fromArray(v.boxMax);const g=new gs;return g.radius=v.sphereRadius,g.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:m,sphereInitialized:v.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new Moe;break;case"Line":o=new uh(a(e.geometry),l(e.material));break;case"LineLoop":o=new Roe(a(e.geometry),l(e.material));break;case"LineSegments":o=new Ku(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Noe(a(e.geometry),l(e.material));break;case"Sprite":o=new Eoe(l(e.material));break;case"Group":o=new O0;break;case"Bone":o=new wB;break;default:o=new yr}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let h=0;h<f.length;h++)o.add(this.parseObject(f[h],n,r,i,s))}if(e.animations!==void 0){const f=e.animations;for(let h=0;h<f.length;h++){const p=f[h];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const f=e.levels;for(let h=0;h<f.length;h++){const p=f[h],v=o.getObjectByProperty("uuid",p.object);v!==void 0&&o.addLevel(v,p.distance,p.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const LJe={UVMapping:KA,CubeReflectionMapping:Bu,CubeRefractionMapping:lh,EquirectangularReflectionMapping:Rv,EquirectangularRefractionMapping:Gb,CubeUVReflectionMapping:by},YX={RepeatWrapping:Hb,ClampToEdgeWrapping:go,MirroredRepeatWrapping:jb},KX={NearestFilter:Fi,NearestMipmapNearestFilter:_M,NearestMipmapLinearFilter:N1,LinearFilter:Er,LinearMipmapNearestFilter:QU,LinearMipmapLinearFilter:ch};class OJe extends Ma{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Id.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{n&&n(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Id.add(e,c),n&&n(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),Id.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Id.add(e,l),s.manager.itemStart(e)}}let JC;class OB{static getContext(){return JC===void 0&&(JC=new(window.AudioContext||window.webkitAudioContext)),JC}static setContext(e){JC=e}}class FJe extends Ma{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Vd(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);OB.getContext().decodeAudioData(c,function(d){n(d)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const ZX=new wn,JX=new wn,ap=new wn;class UJe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ti,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ti,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,ap.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(em*n.fov*.5)/n.zoom;let a,l;JX.elements[12]=-i,ZX.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,ap.elements[0]=2*n.near/(l-a),ap.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(ap),a=-o*n.aspect-s,l=o*n.aspect-s,ap.elements[0]=2*n.near/(l-a),ap.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(ap)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(JX),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ZX)}}class FB{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=QX(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=QX();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function QX(){return(typeof performance>"u"?Date:performance).now()}const lp=new pe,eq=new wo,BJe=new pe,cp=new pe;class zJe extends yr{constructor(){super(),this.type="AudioListener",this.context=OB.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new FB}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(lp,eq,BJe),cp.set(0,0,-1).applyQuaternion(eq),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(lp.x,i),n.positionY.linearRampToValueAtTime(lp.y,i),n.positionZ.linearRampToValueAtTime(lp.z,i),n.forwardX.linearRampToValueAtTime(cp.x,i),n.forwardY.linearRampToValueAtTime(cp.y,i),n.forwardZ.linearRampToValueAtTime(cp.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(lp.x,lp.y,lp.z),n.setOrientation(cp.x,cp.y,cp.z,r.x,r.y,r.z)}}class hae extends yr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const up=new pe,tq=new wo,WJe=new pe,dp=new pe;class VJe extends hae{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(up,tq,WJe),dp.set(0,0,1).applyQuaternion(tq);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(up.x,r),n.positionY.linearRampToValueAtTime(up.y,r),n.positionZ.linearRampToValueAtTime(up.z,r),n.orientationX.linearRampToValueAtTime(dp.x,r),n.orientationY.linearRampToValueAtTime(dp.y,r),n.orientationZ.linearRampToValueAtTime(dp.z,r)}else n.setPosition(up.x,up.y,up.z),n.setOrientation(dp.x,dp.y,dp.z)}}class GJe{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class pae{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){wo.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;wo.multiplyQuaternionsFlat(e,o,e,n,e,r),wo.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const UB="\\[\\]\\.:\\/",HJe=new RegExp("["+UB+"]","g"),BB="[^"+UB+"]",jJe="[^"+UB.replace("\\.","")+"]",XJe=/((?:WC+[\/:])*)/.source.replace("WC",BB),qJe=/(WCOD+)?/.source.replace("WCOD",jJe),YJe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",BB),KJe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",BB),ZJe=new RegExp("^"+XJe+qJe+YJe+KJe+"$"),JJe=["material","materials","bones","map"];class QJe{constructor(e,n,r){const i=r||ur.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class ur{constructor(e,n,r){this.path=n,this.parsedPath=r||ur.parseTrackName(n),this.node=ur.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new ur.Composite(e,n,r):new ur(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(HJe,"")}static parseTrackName(e){const n=ZJe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);JJe.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=ur.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ur.Composite=QJe;ur.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ur.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ur.prototype.GetterByBindingType=[ur.prototype._getValue_direct,ur.prototype._getValue_array,ur.prototype._getValue_arrayElement,ur.prototype._getValue_toArray];ur.prototype.SetterByBindingTypeAndVersioning=[[ur.prototype._setValue_direct,ur.prototype._setValue_direct_setNeedsUpdate,ur.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ur.prototype._setValue_array,ur.prototype._setValue_array_setNeedsUpdate,ur.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ur.prototype._setValue_arrayElement,ur.prototype._setValue_arrayElement_setNeedsUpdate,ur.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ur.prototype._setValue_fromArray,ur.prototype._setValue_fromArray_setNeedsUpdate,ur.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class eQe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Qa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const f=arguments[u],h=f.uuid;let p=n[h];if(p===void 0){p=l++,n[h]=p,e.push(f);for(let v=0,m=o;v!==m;++v)s[v].push(new ur(f,r[v],i[v]))}else if(p<c){a=e[p];const v=--c,m=e[v];n[m.uuid]=p,e[p]=m,n[h]=v,e[v]=f;for(let g=0,y=o;g!==y;++g){const x=s[g],S=x[v];let _=x[p];x[p]=S,_===void 0&&(_=new ur(f,r[g],i[g])),x[v]=_}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const d=s++,f=e[d];n[f.uuid]=u,e[u]=f,n[c]=d,e[d]=l;for(let h=0,p=i;h!==p;++h){const v=r[h],m=v[d],g=v[u];v[u]=m,v[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=n[u];if(d!==void 0)if(delete n[u],d<s){const f=--s,h=e[f],p=--o,v=e[p];n[h.uuid]=d,e[d]=h,n[v.uuid]=f,e[f]=v,e.pop();for(let m=0,g=i;m!==g;++m){const y=r[m],x=y[f],S=y[p];y[d]=x,y[f]=S,y.pop()}}else{const f=--o,h=e[f];f>0&&(n[h.uuid]=d),e[d]=h,e.pop();for(let p=0,v=i;p!==v;++p){const m=r[p];m[d]=m[f],m.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(d);for(let f=u,h=l.length;f!==h;++f){const p=l[f];d[f]=new ur(p,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class mae{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:Op,endingEnd:Op};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Jse,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case lB:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case JA:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===Qse;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===Zse){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Fp,i.endingEnd=Fp):(e?i.endingStart=this.zeroSlopeAtStart?Fp:Op:i.endingStart=Yb,n?i.endingEnd=this.zeroSlopeAtEnd?Fp:Op:i.endingEnd=Yb)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const tQe=new Float32Array(1);class nQe extends Yu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const f=i[d],h=f.name;let p=u[h];if(p!==void 0)++p.referenceCount,o[d]=p;else{if(p=o[d],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,h));continue}const v=n&&n._propertyBindings[d].binding.parsedPath;p=new pae(ur.create(r,h,v),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,h),o[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new NB(new Float32Array(2),new Float32Array(2),1,tQe),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?cw.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=JA),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new mae(this,o,n,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?cw.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,n[u]=d,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class zB{constructor(e){this.value=e}clone(){return new zB(this.value.clone===void 0?this.value:this.value.clone())}}let rQe=0;class iQe extends Yu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:rQe++}),this.name="",this.usage=Qb,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const s=Array.isArray(n[r])?n[r]:[n[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class MM extends aI{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class sQe{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class WB{constructor(e,n,r=0,i=1/0){this.ray=new Jm(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new tm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return wO(e,this,r,n),r.sort(nq),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)wO(e[i],this,r,n);return r.sort(nq),r}}function nq(t,e){return t.distance-e.distance}function wO(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)wO(i[s],e,n,!0)}}class SO{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ci(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class oQe{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const rq=new lt;class aQe{constructor(e=new lt(1/0,1/0),n=new lt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=rq.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,rq).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const iq=new pe,QC=new pe;class gae{constructor(e=new pe,n=new pe){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){iq.subVectors(e,this.start),QC.subVectors(this.end,this.start);const r=QC.dot(QC);let s=QC.dot(iq)/r;return n&&(s=Ci(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const sq=new pe;class lQe extends yr{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new $n,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new Yt(i,3));const s=new Ko({fog:!1,toneMapped:!1});this.cone=new Ku(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),sq.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(sq),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const bf=new pe,eT=new wn,XP=new wn;class cQe extends Ku{constructor(e){const n=vae(e),r=new $n,i=[],s=[],o=new Bt(0,0,1),a=new Bt(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Yt(i,3)),r.setAttribute("color",new Yt(s,3));const l=new Ko({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");XP.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(eT.multiplyMatrices(XP,a.matrixWorld),bf.setFromMatrixPosition(eT),i.setXYZ(o,bf.x,bf.y,bf.z),eT.multiplyMatrices(XP,a.parent.matrixWorld),bf.setFromMatrixPosition(eT),i.setXYZ(o+1,bf.x,bf.y,bf.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function vae(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,vae(t.children[n]));return e}class uQe extends ai{constructor(e,n,r){const i=new v2(n,4,2),s=new Kd({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const dQe=new pe,oq=new Bt,aq=new Bt;class fQe extends yr{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new g2(n);i.rotateY(Math.PI*.5),this.material=new Kd({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new kr(o,3)),this.add(new ai(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");oq.copy(this.light.color),aq.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?oq:aq;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(dQe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class hQe extends Ku{constructor(e=10,n=10,r=4473924,i=8947848){r=new Bt(r),i=new Bt(i);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let f=0,h=0,p=-a;f<=n;f++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const v=f===s?r:i;v.toArray(c,h),h+=3,v.toArray(c,h),h+=3,v.toArray(c,h),h+=3,v.toArray(c,h),h+=3}const u=new $n;u.setAttribute("position",new Yt(l,3)),u.setAttribute("color",new Yt(c,3));const d=new Ko({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class pQe extends Ku{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new Bt(s),o=new Bt(o);const a=[],l=[];if(n>1)for(let d=0;d<n;d++){const f=d/n*(Math.PI*2),h=Math.sin(f)*e,p=Math.cos(f)*e;a.push(0,0,0),a.push(h,0,p);const v=d&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let d=0;d<r;d++){const f=d&1?s:o,h=e-e/r*d;for(let p=0;p<i;p++){let v=p/i*(Math.PI*2),m=Math.sin(v)*h,g=Math.cos(v)*h;a.push(m,0,g),l.push(f.r,f.g,f.b),v=(p+1)/i*(Math.PI*2),m=Math.sin(v)*h,g=Math.cos(v)*h,a.push(m,0,g),l.push(f.r,f.g,f.b)}}const c=new $n;c.setAttribute("position",new Yt(a,3)),c.setAttribute("color",new Yt(l,3));const u=new Ko({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const lq=new pe,tT=new pe,cq=new pe;class mQe extends yr{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new $n;i.setAttribute("position",new Yt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Ko({fog:!1,toneMapped:!1});this.lightPlane=new uh(i,s),this.add(this.lightPlane),i=new $n,i.setAttribute("position",new Yt([0,0,0,0,0,1],3)),this.targetLine=new uh(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),lq.setFromMatrixPosition(this.light.matrixWorld),tT.setFromMatrixPosition(this.light.target.matrixWorld),cq.subVectors(tT,lq),this.lightPlane.lookAt(tT),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(tT),this.targetLine.scale.z=cq.length()}}const nT=new pe,xi=new d2;class gQe extends Ku{constructor(e){const n=new $n,r=new Ko({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,v){l(p),l(v)}function l(p){i.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(i.length/3-1)}n.setAttribute("position",new Yt(i,3)),n.setAttribute("color",new Yt(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Bt(16755200),u=new Bt(16711680),d=new Bt(43775),f=new Bt(16777215),h=new Bt(3355443);this.setColors(c,u,d,f,h)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;xi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Oi("c",n,e,xi,0,0,-1),Oi("t",n,e,xi,0,0,1),Oi("n1",n,e,xi,-r,-i,-1),Oi("n2",n,e,xi,r,-i,-1),Oi("n3",n,e,xi,-r,i,-1),Oi("n4",n,e,xi,r,i,-1),Oi("f1",n,e,xi,-r,-i,1),Oi("f2",n,e,xi,r,-i,1),Oi("f3",n,e,xi,-r,i,1),Oi("f4",n,e,xi,r,i,1),Oi("u1",n,e,xi,r*.7,i*1.1,-1),Oi("u2",n,e,xi,-r*.7,i*1.1,-1),Oi("u3",n,e,xi,0,i*2,-1),Oi("cf1",n,e,xi,-r,0,1),Oi("cf2",n,e,xi,r,0,1),Oi("cf3",n,e,xi,0,-i,1),Oi("cf4",n,e,xi,0,i,1),Oi("cn1",n,e,xi,-r,0,-1),Oi("cn2",n,e,xi,r,0,-1),Oi("cn3",n,e,xi,0,-i,-1),Oi("cn4",n,e,xi,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Oi(t,e,n,r,i,s,o){nT.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],nT.x,nT.y,nT.z)}}const rT=new ms;class vQe extends Ku{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new $n;s.setIndex(new kr(r,1)),s.setAttribute("position",new kr(i,3)),super(s,new Ko({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&rT.setFromObject(this.object),rT.isEmpty())return;const n=rT.min,r=rT.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class yQe extends Ku{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new $n;s.setIndex(new kr(r,1)),s.setAttribute("position",new Yt(i,3)),super(s,new Ko({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class xQe extends uh{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new $n;o.setAttribute("position",new Yt(s,3)),o.computeBoundingSphere(),super(o,new Ko({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new $n;l.setAttribute("position",new Yt(a,3)),l.computeBoundingSphere(),this.add(new ai(l,new Kd({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const uq=new pe;let iT,qP;class bQe extends yr{constructor(e=new pe(0,0,1),n=new pe(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",iT===void 0&&(iT=new $n,iT.setAttribute("position",new Yt([0,0,0,0,1,0],3)),qP=new Sy(0,.5,1,5,1),qP.translate(0,-.5,0)),this.position.copy(n),this.line=new uh(iT,new Ko({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ai(qP,new Kd({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{uq.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(uq,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class wQe extends Ku{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new $n;i.setAttribute("position",new Yt(n,3)),i.setAttribute("color",new Yt(r,3));const s=new Ko({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new Bt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class SQe{constructor(){this.type="ShapePath",this.color=new Bt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new rw,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(g){const y=[];for(let x=0,S=g.length;x<S;x++){const _=g[x],C=new rm;C.curves=_.curves,y.push(C)}return y}function r(g,y){const x=y.length;let S=!1;for(let _=x-1,C=0;C<x;_=C++){let T=y[_],A=y[C],k=A.x-T.x,M=A.y-T.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(T=y[C],k=-k,A=y[_],M=-M),g.y<T.y||g.y>A.y)continue;if(g.y===T.y){if(g.x===T.x)return!0}else{const R=M*(g.x-T.x)-k*(g.y-T.y);if(R===0)return!0;if(R<0)continue;S=!S}}else{if(g.y!==T.y)continue;if(A.x<=g.x&&g.x<=T.x||T.x<=g.x&&g.x<=A.x)return!0}}return S}const i=ku.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new rm,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],f=[];let h=[],p=0,v;f[p]=void 0,h[p]=[];for(let g=0,y=s.length;g<y;g++)a=s[g],v=a.getPoints(),o=i(v),o=e?!o:o,o?(!u&&f[p]&&p++,f[p]={s:new rm,p:v},f[p].s.curves=a.curves,u&&p++,h[p]=[]):h[p].push({h:a,p:v[0]});if(!f[0])return n(s);if(f.length>1){let g=!1,y=0;for(let x=0,S=f.length;x<S;x++)d[x]=[];for(let x=0,S=f.length;x<S;x++){const _=h[x];for(let C=0;C<_.length;C++){const T=_[C];let A=!0;for(let k=0;k<f.length;k++)r(T.p,f[k].p)&&(x!==k&&y++,A?(A=!1,d[k].push(T)):g=!0);A&&d[x].push(T)}}y>0&&g===!1&&(h=d)}let m;for(let g=0,y=f.length;g<y;g++){l=f[g].s,c.push(l),m=h[g];for(let x=0,S=m.length;x<S;x++)l.holes.push(m[x].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:xy}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=xy);const _Qe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:JU,AddEquation:kf,AddOperation:Ose,AdditiveAnimationBlendMode:lB,AdditiveBlending:$L,AgXToneMapping:Wse,AlphaFormat:jse,AlwaysCompare:loe,AlwaysDepth:Ise,AlwaysStencilFunc:dO,AmbientLight:lae,AnimationAction:mae,AnimationClip:cw,AnimationLoader:AJe,AnimationMixer:nQe,AnimationObjectGroup:eQe,AnimationUtils:TJe,ArcCurve:Poe,ArrayCamera:_oe,ArrowHelper:bQe,AttachedBindMode:UL,Audio:hae,AudioAnalyser:GJe,AudioContext:OB,AudioListener:zJe,AudioLoader:FJe,AxesHelper:wQe,BackSide:Qi,BasicDepthPacking:eoe,BasicShadowMap:fse,BatchedMesh:Ioe,Bone:wB,BooleanKeyframeTrack:eg,Box2:aQe,Box3:ms,Box3Helper:yQe,BoxGeometry:Qm,BoxHelper:vQe,BufferAttribute:kr,BufferGeometry:$n,BufferGeometryLoader:fae,ByteType:Gse,Cache:Id,Camera:d2,CameraHelper:gQe,CanvasTexture:YZe,CapsuleGeometry:dI,CatmullRomCurve3:$oe,CineonToneMapping:Bse,CircleGeometry:fI,ClampToEdgeWrapping:go,Clock:FB,Color:Bt,ColorKeyframeTrack:PB,ColorManagement:Tr,CompressedArrayTexture:XZe,CompressedCubeTexture:qZe,CompressedTexture:cI,CompressedTextureLoader:IJe,ConeGeometry:hI,ConstantAlphaFactor:Mse,ConstantColorFactor:Tse,CubeCamera:moe,CubeReflectionMapping:Bu,CubeRefractionMapping:lh,CubeTexture:f2,CubeTextureLoader:rae,CubeUVReflectionMapping:by,CubicBezierCurve:CB,CubicBezierCurve3:Doe,CubicInterpolant:Qoe,CullFaceBack:PL,CullFaceFront:dse,CullFaceFrontBack:FHe,CullFaceNone:use,Curve:zc,CurvePath:Ooe,CustomBlending:hse,CustomToneMapping:zse,CylinderGeometry:Sy,Cylindrical:oQe,Data3DTexture:pB,DataArrayTexture:eI,DataTexture:nm,DataTextureLoader:DB,DataUtils:Bp,DecrementStencilOp:KHe,DecrementWrapStencilOp:JHe,DefaultLoadingManager:nae,DepthFormat:Yf,DepthStencilFormat:Tm,DepthTexture:tI,DetachedBindMode:Vse,DirectionalLight:aae,DirectionalLightHelper:mQe,DiscreteInterpolant:eae,DisplayP3ColorSpace:QA,DodecahedronGeometry:pI,DoubleSide:Ga,DstAlphaFactor:bse,DstColorFactor:Sse,DynamicCopyUsage:hje,DynamicDrawUsage:aje,DynamicReadUsage:uje,EdgesGeometry:Foe,EllipseCurve:uI,EqualCompare:ioe,EqualDepth:Nse,EqualStencilFunc:nje,EquirectangularReflectionMapping:Rv,EquirectangularRefractionMapping:Gb,Euler:u2,EventDispatcher:Yu,ExtrudeGeometry:gI,FileLoader:Vd,Float16BufferAttribute:Jje,Float32BufferAttribute:Yt,Float64BufferAttribute:Qje,FloatType:Ms,Fog:oI,FogExp2:sI,FramebufferTexture:jZe,FrontSide:Uu,Frustum:h2,GLBufferAttribute:sQe,GLSL1:mje,GLSL3:fO,GreaterCompare:soe,GreaterDepth:$se,GreaterEqualCompare:aoe,GreaterEqualDepth:Pse,GreaterEqualStencilFunc:oje,GreaterStencilFunc:ije,GridHelper:hQe,Group:O0,HalfFloatType:xo,HemisphereLight:iae,HemisphereLightHelper:fQe,IcosahedronGeometry:m2,ImageBitmapLoader:OJe,ImageLoader:uw,ImageUtils:hB,IncrementStencilOp:YHe,IncrementWrapStencilOp:ZHe,InstancedBufferAttribute:Em,InstancedBufferGeometry:CI,InstancedInterleavedBuffer:MM,InstancedMesh:Aoe,Int16BufferAttribute:Kje,Int32BufferAttribute:Zje,Int8BufferAttribute:Xje,IntType:eB,InterleavedBuffer:aI,InterleavedBufferAttribute:Ya,Interpolant:y2,InterpolateDiscrete:Xb,InterpolateLinear:qb,InterpolateSmooth:iE,InvertStencilOp:QHe,KeepStencilOp:_p,KeyframeTrack:Wc,LOD:Moe,LatheGeometry:p2,Layers:tm,LessCompare:roe,LessDepth:Rse,LessEqualCompare:dB,LessEqualDepth:Vb,LessEqualStencilFunc:rje,LessStencilFunc:tje,Light:kh,LightProbe:dae,Line:uh,Line3:gae,LineBasicMaterial:Ko,LineCurve:TB,LineCurve3:Loe,LineDashedMaterial:Koe,LineLoop:Roe,LineSegments:Ku,LinearDisplayP3ColorSpace:c2,LinearEncoding:cB,LinearFilter:Er,LinearInterpolant:NB,LinearMipMapLinearFilter:VHe,LinearMipMapNearestFilter:WHe,LinearMipmapLinearFilter:ch,LinearMipmapNearestFilter:QU,LinearSRGBColorSpace:zu,LinearToneMapping:Fse,LinearTransfer:Kb,Loader:Ma,LoaderUtils:bO,LoadingManager:$B,LoopOnce:Zse,LoopPingPong:Qse,LoopRepeat:Jse,LuminanceAlphaFormat:qse,LuminanceFormat:Xse,MOUSE:wp,Material:Ks,MaterialLoader:_I,MathUtils:coe,Matrix3:Dn,Matrix4:wn,MaxEquation:FL,Mesh:ai,MeshBasicMaterial:Kd,MeshDepthMaterial:rI,MeshDistanceMaterial:iI,MeshLambertMaterial:qoe,MeshMatcapMaterial:Yoe,MeshNormalMaterial:Xoe,MeshPhongMaterial:Hoe,MeshPhysicalMaterial:Goe,MeshStandardMaterial:IB,MeshToonMaterial:joe,MinEquation:OL,MirroredRepeatWrapping:jb,MixOperation:Lse,MultiplyBlending:LL,MultiplyOperation:l2,NearestFilter:Fi,NearestMipMapLinearFilter:zHe,NearestMipMapNearestFilter:BHe,NearestMipmapLinearFilter:N1,NearestMipmapNearestFilter:_M,NeverCompare:noe,NeverDepth:Ase,NeverStencilFunc:eje,NoBlending:Dd,NoColorSpace:Ha,NoToneMapping:Eu,NormalAnimationBlendMode:JA,NormalBlending:Qp,NotEqualCompare:ooe,NotEqualDepth:Dse,NotEqualStencilFunc:sje,NumberKeyframeTrack:aw,Object3D:yr,ObjectLoader:DJe,ObjectSpaceNormalMap:toe,OctahedronGeometry:g2,OneFactor:vse,OneMinusConstantAlphaFactor:kse,OneMinusConstantColorFactor:Ese,OneMinusDstAlphaFactor:wse,OneMinusDstColorFactor:_se,OneMinusSrcAlphaFactor:SM,OneMinusSrcColorFactor:xse,OrthographicCamera:Ad,P3Primaries:Jb,PCFShadowMap:YA,PCFSoftShadowMap:R1,PMREMGenerator:pO,Path:rw,PerspectiveCamera:Ti,Plane:vd,PlaneGeometry:Eh,PlaneHelper:xQe,PointLight:oae,PointLightHelper:uQe,Points:Noe,PointsMaterial:SB,PolarGridHelper:pQe,PolyhedronGeometry:Mh,PositionalAudio:VJe,PropertyBinding:ur,PropertyMixer:pae,QuadraticBezierCurve:EB,QuadraticBezierCurve3:MB,Quaternion:wo,QuaternionKeyframeTrack:_y,QuaternionLinearInterpolant:tae,RED_GREEN_RGTC2_Format:cO,RED_RGTC1_Format:Kse,REVISION:xy,RGBADepthPacking:uB,RGBAFormat:vo,RGBAIntegerFormat:oB,RGBA_ASTC_10x10_Format:rO,RGBA_ASTC_10x5_Format:eO,RGBA_ASTC_10x6_Format:tO,RGBA_ASTC_10x8_Format:nO,RGBA_ASTC_12x10_Format:iO,RGBA_ASTC_12x12_Format:sO,RGBA_ASTC_4x4_Format:jL,RGBA_ASTC_5x4_Format:XL,RGBA_ASTC_5x5_Format:qL,RGBA_ASTC_6x5_Format:YL,RGBA_ASTC_6x6_Format:KL,RGBA_ASTC_8x5_Format:ZL,RGBA_ASTC_8x6_Format:JL,RGBA_ASTC_8x8_Format:QL,RGBA_BPTC_Format:rE,RGBA_ETC2_EAC_Format:HL,RGBA_PVRTC_2BPPV1_Format:VL,RGBA_PVRTC_4BPPV1_Format:WL,RGBA_S3TC_DXT1_Format:eE,RGBA_S3TC_DXT3_Format:tE,RGBA_S3TC_DXT5_Format:nE,RGB_BPTC_SIGNED_Format:oO,RGB_BPTC_UNSIGNED_Format:aO,RGB_ETC1_Format:aB,RGB_ETC2_Format:GL,RGB_PVRTC_2BPPV1_Format:zL,RGB_PVRTC_4BPPV1_Format:BL,RGB_S3TC_DXT1_Format:QT,RGFormat:Yse,RGIntegerFormat:sB,RawShaderMaterial:Voe,Ray:Jm,Raycaster:WB,Rec709Primaries:Zb,RectAreaLight:cae,RedFormat:rB,RedIntegerFormat:iB,ReinhardToneMapping:Use,RenderTarget:foe,RepeatWrapping:Hb,ReplaceStencilOp:qHe,ReverseSubtractEquation:mse,RingGeometry:vI,SIGNED_RED_GREEN_RGTC2_Format:uO,SIGNED_RED_RGTC1_Format:lO,SRGBColorSpace:us,SRGBTransfer:Vr,Scene:nw,ShaderChunk:Pn,ShaderLib:gc,ShaderMaterial:jl,ShadowMaterial:Woe,Shape:rm,ShapeGeometry:yI,ShapePath:SQe,ShapeUtils:ku,ShortType:Hse,Skeleton:lI,SkeletonHelper:cQe,SkinnedMesh:koe,Source:Up,Sphere:gs,SphereGeometry:v2,Spherical:SO,SphericalHarmonics3:uae,SplineCurve:kB,SpotLight:sae,SpotLightHelper:lQe,Sprite:Eoe,SpriteMaterial:bB,SrcAlphaFactor:wM,SrcAlphaSaturateFactor:Cse,SrcColorFactor:yse,StaticCopyUsage:fje,StaticDrawUsage:Qb,StaticReadUsage:cje,StereoCamera:UJe,StreamCopyUsage:pje,StreamDrawUsage:lje,StreamReadUsage:dje,StringKeyframeTrack:tg,SubtractEquation:pse,SubtractiveBlending:DL,TOUCH:Sp,TangentSpaceNormalMap:Th,TetrahedronGeometry:xI,Texture:ci,TextureLoader:RJe,TorusGeometry:bI,TorusKnotGeometry:wI,Triangle:ca,TriangleFanDrawMode:jHe,TriangleStripDrawMode:HHe,TrianglesDrawMode:GHe,TubeGeometry:SI,TwoPassDoubleSide:UHe,UVMapping:KA,Uint16BufferAttribute:mB,Uint32BufferAttribute:gB,Uint8BufferAttribute:qje,Uint8ClampedBufferAttribute:Yje,Uniform:zB,UniformsGroup:iQe,UniformsLib:Mt,UniformsUtils:tw,UnsignedByteType:Mu,UnsignedInt248Type:qf,UnsignedIntType:kd,UnsignedShort4444Type:tB,UnsignedShort5551Type:nB,UnsignedShortType:ZA,VSMShadowMap:fc,Vector2:lt,Vector3:pe,Vector4:er,VectorKeyframeTrack:lw,VideoTexture:HZe,WebGL1Renderer:Coe,WebGL3DRenderTarget:Dje,WebGLArrayRenderTarget:$je,WebGLCoordinateSystem:Cc,WebGLCubeRenderTarget:vB,WebGLMultipleRenderTargets:Lje,WebGLRenderTarget:Hl,WebGLRenderer:xB,WebGLUtils:Soe,WebGPUCoordinateSystem:Nv,WireframeGeometry:AB,WrapAroundEnding:Yb,ZeroCurvatureEnding:Op,ZeroFactor:gse,ZeroSlopeEnding:Fp,ZeroStencilOp:XHe,_SRGBAFormat:CM,createCanvasElement:doe,sRGBEncoding:Kf},Symbol.toStringTag,{value:"Module"}));var yae={exports:{}},ng={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ng.ConcurrentRoot=1;ng.ContinuousEventPriority=4;ng.DefaultEventPriority=16;ng.DiscreteEventPriority=1;ng.IdleEventPriority=536870912;ng.LegacyRoot=0;yae.exports=ng;var U0=yae.exports;function CQe(t){let e;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const f=e;e=u?d:Object.assign({},e,d),n.forEach(h=>h(e,f))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(e);function h(){const p=u(e);if(!d(f,p)){const v=f;c(f=p,v)}}return n.add(h),()=>n.delete(h)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const TQe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),dq=TQe?N.useEffect:N.useLayoutEffect;function xae(t){const e=typeof t=="function"?CQe(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=N.useReducer(m=>m+1,0),o=e.getState(),a=N.useRef(o),l=N.useRef(r),c=N.useRef(i),u=N.useRef(!1),d=N.useRef();d.current===void 0&&(d.current=r(o));let f,h=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(f=r(o),h=!i(d.current,f)),dq(()=>{h&&(d.current=f),a.current=o,l.current=r,c.current=i,u.current=!1});const p=N.useRef(o);dq(()=>{const m=()=>{try{const y=e.getState(),x=l.current(y);c.current(d.current,x)||(a.current=y,d.current=x,s())}catch{u.current=!0,s()}},g=e.subscribe(m);return e.getState()!==p.current&&m(),g},[]);const v=h?f:d.current;return N.useDebugValue(v),v};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var bae={exports:{}},YP={exports:{}},KP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fq;function EQe(){return fq||(fq=1,function(t){function e(D,F){var W=D.length;D.push(F);e:for(;0<W;){var V=W-1>>>1,j=D[V];if(0<i(j,F))D[V]=F,D[W]=j,W=V;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var F=D[0],W=D.pop();if(W!==F){D[0]=W;e:for(var V=0,j=D.length,J=j>>>1;V<J;){var Q=2*(V+1)-1,te=D[Q],re=Q+1,se=D[re];if(0>i(te,W))re<j&&0>i(se,te)?(D[V]=se,D[re]=W,V=re):(D[V]=te,D[Q]=W,V=Q);else if(re<j&&0>i(se,W))D[V]=se,D[re]=W,V=re;else break e}}return F}function i(D,F){var W=D.sortIndex-F.sortIndex;return W!==0?W:D.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=D)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function S(D){if(v=!1,x(D),!p)if(n(l)!==null)p=!0,z(_);else{var F=n(c);F!==null&&X(S,F.startTime-D)}}function _(D,F){p=!1,v&&(v=!1,g(A),A=-1),h=!0;var W=f;try{for(x(F),d=n(l);d!==null&&(!(d.expirationTime>F)||D&&!R());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var j=V(d.expirationTime<=F);F=t.unstable_now(),typeof j=="function"?d.callback=j:d===n(l)&&r(l),x(F)}else r(l);d=n(l)}if(d!==null)var J=!0;else{var Q=n(c);Q!==null&&X(S,Q.startTime-F),J=!1}return J}finally{d=null,f=W,h=!1}}var C=!1,T=null,A=-1,k=5,M=-1;function R(){return!(t.unstable_now()-M<k)}function P(){if(T!==null){var D=t.unstable_now();M=D;var F=!0;try{F=T(!0,D)}finally{F?O():(C=!1,T=null)}}else C=!1}var O;if(typeof y=="function")O=function(){y(P)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,U=$.port2;$.port1.onmessage=P,O=function(){U.postMessage(null)}}else O=function(){m(P,0)};function z(D){T=D,C||(C=!0,O())}function X(D,F){A=m(function(){D(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,z(_))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var W=f;f=F;try{return D()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=f;f=D;try{return F()}finally{f=W}},t.unstable_scheduleCallback=function(D,F,W){var V=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?V+W:V):W=V,D){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=W+j,D={id:u++,callback:F,priorityLevel:D,startTime:W,expirationTime:j,sortIndex:-1},W>V?(D.sortIndex=W,e(c,D),n(l)===null&&D===n(c)&&(v?(g(A),A=-1):v=!0,X(S,W-V))):(D.sortIndex=j,e(l,D),p||h||(p=!0,z(_))),D},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(D){var F=f;return function(){var W=f;f=F;try{return D.apply(this,arguments)}finally{f=W}}}}(KP)),KP}var hq;function MQe(){return hq||(hq=1,YP.exports=EQe()),YP.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kQe=function(e){var n={},r=N,i=MQe(),s=Object.assign;function o(b){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+b,E=1;E<arguments.length;E++)w+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+b+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),p=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),_=Symbol.iterator;function C(b){return b===null||typeof b!="object"?null:(b=_&&b[_]||b["@@iterator"],typeof b=="function"?b:null)}function T(b){if(b==null)return null;if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case u:return"Fragment";case c:return"Portal";case f:return"Profiler";case d:return"StrictMode";case m:return"Suspense";case g:return"SuspenseList"}if(typeof b=="object")switch(b.$$typeof){case p:return(b.displayName||"Context")+".Consumer";case h:return(b._context.displayName||"Context")+".Provider";case v:var w=b.render;return b=b.displayName,b||(b=w.displayName||w.name||"",b=b!==""?"ForwardRef("+b+")":"ForwardRef"),b;case y:return w=b.displayName||null,w!==null?w:T(b.type)||"Memo";case x:w=b._payload,b=b._init;try{return T(b(w))}catch{}}return null}function A(b){var w=b.type;switch(b.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return b=w.render,b=b.displayName||b.name||"",w.displayName||(b!==""?"ForwardRef("+b+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return T(w);case 8:return w===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function k(b){var w=b,E=b;if(b.alternate)for(;w.return;)w=w.return;else{b=w;do w=b,w.flags&4098&&(E=w.return),b=w.return;while(b)}return w.tag===3?E:null}function M(b){if(k(b)!==b)throw Error(o(188))}function R(b){var w=b.alternate;if(!w){if(w=k(b),w===null)throw Error(o(188));return w!==b?null:b}for(var E=b,I=w;;){var B=E.return;if(B===null)break;var q=B.alternate;if(q===null){if(I=B.return,I!==null){E=I;continue}break}if(B.child===q.child){for(q=B.child;q;){if(q===E)return M(B),b;if(q===I)return M(B),w;q=q.sibling}throw Error(o(188))}if(E.return!==I.return)E=B,I=q;else{for(var _e=!1,Be=B.child;Be;){if(Be===E){_e=!0,E=B,I=q;break}if(Be===I){_e=!0,I=B,E=q;break}Be=Be.sibling}if(!_e){for(Be=q.child;Be;){if(Be===E){_e=!0,E=q,I=B;break}if(Be===I){_e=!0,I=q,E=B;break}Be=Be.sibling}if(!_e)throw Error(o(189))}}if(E.alternate!==I)throw Error(o(190))}if(E.tag!==3)throw Error(o(188));return E.stateNode.current===E?b:w}function P(b){return b=R(b),b!==null?O(b):null}function O(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){var w=O(b);if(w!==null)return w;b=b.sibling}return null}function $(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){if(b.tag!==4){var w=$(b);if(w!==null)return w}b=b.sibling}return null}var U=Array.isArray,z=e.getPublicInstance,X=e.getRootHostContext,D=e.getChildHostContext,F=e.prepareForCommit,W=e.resetAfterCommit,V=e.createInstance,j=e.appendInitialChild,J=e.finalizeInitialChildren,Q=e.prepareUpdate,te=e.shouldSetTextContent,re=e.createTextInstance,se=e.scheduleTimeout,fe=e.cancelTimeout,ae=e.noTimeout,ye=e.isPrimaryRenderer,le=e.supportsMutation,H=e.supportsPersistence,Me=e.supportsHydration,we=e.getInstanceFromNode,Ee=e.preparePortalMount,me=e.getCurrentEventPriority,qe=e.detachDeletedInstance,ke=e.supportsMicrotasks,ee=e.scheduleMicrotask,Y=e.supportsTestSelectors,oe=e.findFiberRoot,xe=e.getBoundingRect,Se=e.getTextContent,be=e.isHiddenSubtree,Re=e.matchAccessibilityRole,Ke=e.setFocusIfFocusable,ze=e.setupIntersectionObserver,Pe=e.appendChild,De=e.appendChildToContainer,We=e.commitTextUpdate,gt=e.commitMount,ct=e.commitUpdate,Ye=e.insertBefore,Xe=e.insertInContainerBefore,Le=e.removeChild,he=e.removeChildFromContainer,He=e.resetTextContent,ot=e.hideInstance,et=e.hideTextInstance,Ie=e.unhideInstance,Ce=e.unhideTextInstance,ut=e.clearContainer,dt=e.cloneInstance,yt=e.createContainerChildSet,vt=e.appendChildToContainerChildSet,zt=e.finalizeContainerChildren,It=e.replaceContainerChildren,Qt=e.cloneHiddenInstance,$t=e.cloneHiddenTextInstance,mt=e.canHydrateInstance,Ht=e.canHydrateTextInstance,pn=e.canHydrateSuspenseInstance,dn=e.isSuspenseInstancePending,_t=e.isSuspenseInstanceFallback,Dt=e.registerSuspenseInstanceRetry,Nt=e.getNextHydratableSibling,bt=e.getFirstHydratableChild,Wt=e.getFirstHydratableChildWithinContainer,Sn=e.getFirstHydratableChildWithinSuspenseInstance,Z=e.hydrateInstance,K=e.hydrateTextInstance,ne=e.hydrateSuspenseInstance,G=e.getNextHydratableInstanceAfterSuspenseInstance,ie=e.commitHydratedContainer,ce=e.commitHydratedSuspenseInstance,Te=e.clearSuspenseBoundary,de=e.clearSuspenseBoundaryFromContainer,Ue=e.shouldDeleteUnhydratedTailInstances,Je=e.didNotMatchHydratedContainerTextInstance,nt=e.didNotMatchHydratedTextInstance,$e;function Ct(b){if($e===void 0)try{throw Error()}catch(E){var w=E.stack.trim().match(/\n( *(at )?)/);$e=w&&w[1]||""}return`
`+$e+b}var ht=!1;function ft(b,w){if(!b||ht)return"";ht=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(Tt){var I=Tt}Reflect.construct(b,[],w)}else{try{w.call()}catch(Tt){I=Tt}b.call(w.prototype)}else{try{throw Error()}catch(Tt){I=Tt}b()}}catch(Tt){if(Tt&&I&&typeof Tt.stack=="string"){for(var B=Tt.stack.split(`
`),q=I.stack.split(`
`),_e=B.length-1,Be=q.length-1;1<=_e&&0<=Be&&B[_e]!==q[Be];)Be--;for(;1<=_e&&0<=Be;_e--,Be--)if(B[_e]!==q[Be]){if(_e!==1||Be!==1)do if(_e--,Be--,0>Be||B[_e]!==q[Be]){var at=`
`+B[_e].replace(" at new "," at ");return b.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",b.displayName)),at}while(1<=_e&&0<=Be);break}}}finally{ht=!1,Error.prepareStackTrace=E}return(b=b?b.displayName||b.name:"")?Ct(b):""}var Lt=Object.prototype.hasOwnProperty,Jt=[],tn=-1;function gn(b){return{current:b}}function Pt(b){0>tn||(b.current=Jt[tn],Jt[tn]=null,tn--)}function Et(b,w){tn++,Jt[tn]=b.current,b.current=w}var Cn={},en=gn(Cn),cn=gn(!1),ar=Cn;function Fn(b,w){var E=b.type.contextTypes;if(!E)return Cn;var I=b.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===w)return I.__reactInternalMemoizedMaskedChildContext;var B={},q;for(q in E)B[q]=w[q];return I&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=w,b.__reactInternalMemoizedMaskedChildContext=B),B}function Hn(b){return b=b.childContextTypes,b!=null}function _n(){Pt(cn),Pt(en)}function fn(b,w,E){if(en.current!==Cn)throw Error(o(168));Et(en,w),Et(cn,E)}function Yn(b,w,E){var I=b.stateNode;if(w=w.childContextTypes,typeof I.getChildContext!="function")return E;I=I.getChildContext();for(var B in I)if(!(B in w))throw Error(o(108,A(b)||"Unknown",B));return s({},E,I)}function nn(b){return b=(b=b.stateNode)&&b.__reactInternalMemoizedMergedChildContext||Cn,ar=en.current,Et(en,b),Et(cn,cn.current),!0}function an(b,w,E){var I=b.stateNode;if(!I)throw Error(o(169));E?(b=Yn(b,w,ar),I.__reactInternalMemoizedMergedChildContext=b,Pt(cn),Pt(en),Et(en,b)):Pt(cn),Et(cn,E)}var Nr=Math.clz32?Math.clz32:Aa,Os=Math.log,Pi=Math.LN2;function Aa(b){return b>>>=0,b===0?32:31-(Os(b)/Pi|0)|0}var Ju=64,Qu=4194304;function ed(b){switch(b&-b){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return b&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return b}}function Bh(b,w){var E=b.pendingLanes;if(E===0)return 0;var I=0,B=b.suspendedLanes,q=b.pingedLanes,_e=E&268435455;if(_e!==0){var Be=_e&~B;Be!==0?I=ed(Be):(q&=_e,q!==0&&(I=ed(q)))}else _e=E&~B,_e!==0?I=ed(_e):q!==0&&(I=ed(q));if(I===0)return 0;if(w!==0&&w!==I&&!(w&B)&&(B=I&-I,q=w&-w,B>=q||B===16&&(q&4194240)!==0))return w;if(I&4&&(I|=E&16),w=b.entangledLanes,w!==0)for(b=b.entanglements,w&=I;0<w;)E=31-Nr(w),B=1<<E,I|=b[E],w&=~B;return I}function WS(b,w){switch(b){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zy(b,w){for(var E=b.suspendedLanes,I=b.pingedLanes,B=b.expirationTimes,q=b.pendingLanes;0<q;){var _e=31-Nr(q),Be=1<<_e,at=B[_e];at===-1?(!(Be&E)||Be&I)&&(B[_e]=WS(Be,w)):at<=w&&(b.expiredLanes|=Be),q&=~Be}}function td(b){return b=b.pendingLanes&-1073741825,b!==0?b:b&1073741824?1073741824:0}function gg(b){for(var w=[],E=0;31>E;E++)w.push(b);return w}function Hc(b,w,E){b.pendingLanes|=w,w!==536870912&&(b.suspendedLanes=0,b.pingedLanes=0),b=b.eventTimes,w=31-Nr(w),b[w]=E}function tf(b,w){var E=b.pendingLanes&~w;b.pendingLanes=w,b.suspendedLanes=0,b.pingedLanes=0,b.expiredLanes&=w,b.mutableReadLanes&=w,b.entangledLanes&=w,w=b.entanglements;var I=b.eventTimes;for(b=b.expirationTimes;0<E;){var B=31-Nr(E),q=1<<B;w[B]=0,I[B]=-1,b[B]=-1,E&=~q}}function jc(b,w){var E=b.entangledLanes|=w;for(b=b.entanglements;E;){var I=31-Nr(E),B=1<<I;B&w|b[I]&w&&(b[I]|=w),E&=~B}}var jn=0;function Wy(b){return b&=-b,1<b?4<b?b&268435455?16:536870912:4:1}var nd=i.unstable_scheduleCallback,vg=i.unstable_cancelCallback,Vy=i.unstable_shouldYield,VS=i.unstable_requestPaint,di=i.unstable_now,zh=i.unstable_ImmediatePriority,GS=i.unstable_UserBlockingPriority,Mo=i.unstable_NormalPriority,Gy=i.unstable_IdlePriority,Wh=null,Ia=null;function Hy(b){if(Ia&&typeof Ia.onCommitFiberRoot=="function")try{Ia.onCommitFiberRoot(Wh,b,void 0,(b.current.flags&128)===128)}catch{}}function HS(b,w){return b===w&&(b!==0||1/b===1/w)||b!==b&&w!==w}var Ra=typeof Object.is=="function"?Object.is:HS,ko=null,Xc=!1,cl=!1;function jy(b){ko===null?ko=[b]:ko.push(b)}function Xy(b){Xc=!0,jy(b)}function Qo(){if(!cl&&ko!==null){cl=!0;var b=0,w=jn;try{var E=ko;for(jn=1;b<E.length;b++){var I=E[b];do I=I(!0);while(I!==null)}ko=null,Xc=!1}catch(B){throw ko!==null&&(ko=ko.slice(b+1)),nd(zh,Qo),B}finally{jn=w,cl=!1}}return null}var Vh=a.ReactCurrentBatchConfig;function Gh(b,w){if(Ra(b,w))return!0;if(typeof b!="object"||b===null||typeof w!="object"||w===null)return!1;var E=Object.keys(b),I=Object.keys(w);if(E.length!==I.length)return!1;for(I=0;I<E.length;I++){var B=E[I];if(!Lt.call(w,B)||!Ra(b[B],w[B]))return!1}return!0}function Hh(b){switch(b.tag){case 5:return Ct(b.type);case 16:return Ct("Lazy");case 13:return Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 2:case 15:return b=ft(b.type,!1),b;case 11:return b=ft(b.type.render,!1),b;case 1:return b=ft(b.type,!0),b;default:return""}}function Ao(b,w){if(b&&b.defaultProps){w=s({},w),b=b.defaultProps;for(var E in b)w[E]===void 0&&(w[E]=b[E]);return w}return w}var bs=gn(null),yg=null,tc=null,nf=null;function xg(){nf=tc=yg=null}function jS(b,w,E){ye?(Et(bs,w._currentValue),w._currentValue=E):(Et(bs,w._currentValue2),w._currentValue2=E)}function ws(b){var w=bs.current;Pt(bs),ye?b._currentValue=w:b._currentValue2=w}function Io(b,w,E){for(;b!==null;){var I=b.alternate;if((b.childLanes&w)!==w?(b.childLanes|=w,I!==null&&(I.childLanes|=w)):I!==null&&(I.childLanes&w)!==w&&(I.childLanes|=w),b===E)break;b=b.return}}function $i(b,w){yg=b,nf=tc=null,b=b.dependencies,b!==null&&b.firstContext!==null&&(b.lanes&w&&(Da=!0),b.firstContext=null)}function Di(b){var w=ye?b._currentValue:b._currentValue2;if(nf!==b)if(b={context:b,memoizedValue:w,next:null},tc===null){if(yg===null)throw Error(o(308));tc=b,yg.dependencies={lanes:0,firstContext:b}}else tc=tc.next=b;return w}var Na=null,rf=!1;function s3(b){b.updateQueue={baseState:b.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X8(b,w){b=b.updateQueue,w.updateQueue===b&&(w.updateQueue={baseState:b.baseState,firstBaseUpdate:b.firstBaseUpdate,lastBaseUpdate:b.lastBaseUpdate,shared:b.shared,effects:b.effects})}function rd(b,w){return{eventTime:b,lane:w,tag:0,payload:null,callback:null,next:null}}function sf(b,w){var E=b.updateQueue;E!==null&&(E=E.shared,Gi!==null&&b.mode&1&&!(Gn&2)?(b=E.interleaved,b===null?(w.next=w,Na===null?Na=[E]:Na.push(E)):(w.next=b.next,b.next=w),E.interleaved=w):(b=E.pending,b===null?w.next=w:(w.next=b.next,b.next=w),E.pending=w))}function XS(b,w,E){if(w=w.updateQueue,w!==null&&(w=w.shared,(E&4194240)!==0)){var I=w.lanes;I&=b.pendingLanes,E|=I,w.lanes=E,jc(b,E)}}function q8(b,w){var E=b.updateQueue,I=b.alternate;if(I!==null&&(I=I.updateQueue,E===I)){var B=null,q=null;if(E=E.firstBaseUpdate,E!==null){do{var _e={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};q===null?B=q=_e:q=q.next=_e,E=E.next}while(E!==null);q===null?B=q=w:q=q.next=w}else B=q=w;E={baseState:I.baseState,firstBaseUpdate:B,lastBaseUpdate:q,shared:I.shared,effects:I.effects},b.updateQueue=E;return}b=E.lastBaseUpdate,b===null?E.firstBaseUpdate=w:b.next=w,E.lastBaseUpdate=w}function qS(b,w,E,I){var B=b.updateQueue;rf=!1;var q=B.firstBaseUpdate,_e=B.lastBaseUpdate,Be=B.shared.pending;if(Be!==null){B.shared.pending=null;var at=Be,Tt=at.next;at.next=null,_e===null?q=Tt:_e.next=Tt,_e=at;var Xt=b.alternate;Xt!==null&&(Xt=Xt.updateQueue,Be=Xt.lastBaseUpdate,Be!==_e&&(Be===null?Xt.firstBaseUpdate=Tt:Be.next=Tt,Xt.lastBaseUpdate=at))}if(q!==null){var An=B.baseState;_e=0,Xt=Tt=at=null,Be=q;do{var vn=Be.lane,Lr=Be.eventTime;if((I&vn)===vn){Xt!==null&&(Xt=Xt.next={eventTime:Lr,lane:0,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null});e:{var ln=b,no=Be;switch(vn=w,Lr=E,no.tag){case 1:if(ln=no.payload,typeof ln=="function"){An=ln.call(Lr,An,vn);break e}An=ln;break e;case 3:ln.flags=ln.flags&-65537|128;case 0:if(ln=no.payload,vn=typeof ln=="function"?ln.call(Lr,An,vn):ln,vn==null)break e;An=s({},An,vn);break e;case 2:rf=!0}}Be.callback!==null&&Be.lane!==0&&(b.flags|=64,vn=B.effects,vn===null?B.effects=[Be]:vn.push(Be))}else Lr={eventTime:Lr,lane:vn,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},Xt===null?(Tt=Xt=Lr,at=An):Xt=Xt.next=Lr,_e|=vn;if(Be=Be.next,Be===null){if(Be=B.shared.pending,Be===null)break;vn=Be,Be=vn.next,vn.next=null,B.lastBaseUpdate=vn,B.shared.pending=null}}while(!0);if(Xt===null&&(at=An),B.baseState=at,B.firstBaseUpdate=Tt,B.lastBaseUpdate=Xt,w=B.shared.interleaved,w!==null){B=w;do _e|=B.lane,B=B.next;while(B!==w)}else q===null&&(B.shared.lanes=0);kg|=_e,b.lanes=_e,b.memoizedState=An}}function Y8(b,w,E){if(b=w.effects,w.effects=null,b!==null)for(w=0;w<b.length;w++){var I=b[w],B=I.callback;if(B!==null){if(I.callback=null,I=E,typeof B!="function")throw Error(o(191,B));B.call(I)}}}var K8=new r.Component().refs;function o3(b,w,E,I){w=b.memoizedState,E=E(I,w),E=E==null?w:s({},w,E),b.memoizedState=E,b.lanes===0&&(b.updateQueue.baseState=E)}var YS={isMounted:function(b){return(b=b._reactInternals)?k(b)===b:!1},enqueueSetState:function(b,w,E){b=b._reactInternals;var I=No(),B=lf(b),q=rd(I,B);q.payload=w,E!=null&&(q.callback=E),sf(b,q),w=pl(b,B,I),w!==null&&XS(w,b,B)},enqueueReplaceState:function(b,w,E){b=b._reactInternals;var I=No(),B=lf(b),q=rd(I,B);q.tag=1,q.payload=w,E!=null&&(q.callback=E),sf(b,q),w=pl(b,B,I),w!==null&&XS(w,b,B)},enqueueForceUpdate:function(b,w){b=b._reactInternals;var E=No(),I=lf(b),B=rd(E,I);B.tag=2,w!=null&&(B.callback=w),sf(b,B),w=pl(b,I,E),w!==null&&XS(w,b,I)}};function Z8(b,w,E,I,B,q,_e){return b=b.stateNode,typeof b.shouldComponentUpdate=="function"?b.shouldComponentUpdate(I,q,_e):w.prototype&&w.prototype.isPureReactComponent?!Gh(E,I)||!Gh(B,q):!0}function J8(b,w,E){var I=!1,B=Cn,q=w.contextType;return typeof q=="object"&&q!==null?q=Di(q):(B=Hn(w)?ar:en.current,I=w.contextTypes,q=(I=I!=null)?Fn(b,B):Cn),w=new w(E,q),b.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=YS,b.stateNode=w,w._reactInternals=b,I&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=B,b.__reactInternalMemoizedMaskedChildContext=q),w}function Q8(b,w,E,I){b=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(E,I),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(E,I),w.state!==b&&YS.enqueueReplaceState(w,w.state,null)}function a3(b,w,E,I){var B=b.stateNode;B.props=E,B.state=b.memoizedState,B.refs=K8,s3(b);var q=w.contextType;typeof q=="object"&&q!==null?B.context=Di(q):(q=Hn(w)?ar:en.current,B.context=Fn(b,q)),B.state=b.memoizedState,q=w.getDerivedStateFromProps,typeof q=="function"&&(o3(b,w,q,E),B.state=b.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(w=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),w!==B.state&&YS.enqueueReplaceState(B,B.state,null),qS(b,E,B,I),B.state=b.memoizedState),typeof B.componentDidMount=="function"&&(b.flags|=4194308)}var bg=[],wg=0,KS=null,ZS=0,ul=[],dl=0,jh=null,id=1,sd="";function Xh(b,w){bg[wg++]=ZS,bg[wg++]=KS,KS=b,ZS=w}function e7(b,w,E){ul[dl++]=id,ul[dl++]=sd,ul[dl++]=jh,jh=b;var I=id;b=sd;var B=32-Nr(I)-1;I&=~(1<<B),E+=1;var q=32-Nr(w)+B;if(30<q){var _e=B-B%5;q=(I&(1<<_e)-1).toString(32),I>>=_e,B-=_e,id=1<<32-Nr(w)+B|E<<B|I,sd=q+b}else id=1<<q|E<<B|I,sd=b}function l3(b){b.return!==null&&(Xh(b,1),e7(b,1,0))}function c3(b){for(;b===KS;)KS=bg[--wg],bg[wg]=null,ZS=bg[--wg],bg[wg]=null;for(;b===jh;)jh=ul[--dl],ul[dl]=null,sd=ul[--dl],ul[dl]=null,id=ul[--dl],ul[dl]=null}var Pa=null,$a=null,ri=!1,qy=!1,nc=null;function t7(b,w){var E=ml(5,null,null,0);E.elementType="DELETED",E.stateNode=w,E.return=b,w=b.deletions,w===null?(b.deletions=[E],b.flags|=16):w.push(E)}function n7(b,w){switch(b.tag){case 5:return w=mt(w,b.type,b.pendingProps),w!==null?(b.stateNode=w,Pa=b,$a=bt(w),!0):!1;case 6:return w=Ht(w,b.pendingProps),w!==null?(b.stateNode=w,Pa=b,$a=null,!0):!1;case 13:if(w=pn(w),w!==null){var E=jh!==null?{id,overflow:sd}:null;return b.memoizedState={dehydrated:w,treeContext:E,retryLane:1073741824},E=ml(18,null,null,0),E.stateNode=w,E.return=b,b.child=E,Pa=b,$a=null,!0}return!1;default:return!1}}function u3(b){return(b.mode&1)!==0&&(b.flags&128)===0}function d3(b){if(ri){var w=$a;if(w){var E=w;if(!n7(b,w)){if(u3(b))throw Error(o(418));w=Nt(E);var I=Pa;w&&n7(b,w)?t7(I,E):(b.flags=b.flags&-4097|2,ri=!1,Pa=b)}}else{if(u3(b))throw Error(o(418));b.flags=b.flags&-4097|2,ri=!1,Pa=b}}}function r7(b){for(b=b.return;b!==null&&b.tag!==5&&b.tag!==3&&b.tag!==13;)b=b.return;Pa=b}function Yy(b){if(!Me||b!==Pa)return!1;if(!ri)return r7(b),ri=!0,!1;if(b.tag!==3&&(b.tag!==5||Ue(b.type)&&!te(b.type,b.memoizedProps))){var w=$a;if(w){if(u3(b)){for(b=$a;b;)b=Nt(b);throw Error(o(418))}for(;w;)t7(b,w),w=Nt(w)}}if(r7(b),b.tag===13){if(!Me)throw Error(o(316));if(b=b.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(o(317));$a=G(b)}else $a=Pa?Nt(b.stateNode):null;return!0}function Sg(){Me&&($a=Pa=null,qy=ri=!1)}function f3(b){nc===null?nc=[b]:nc.push(b)}function Ky(b,w,E){if(b=E.ref,b!==null&&typeof b!="function"&&typeof b!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(o(309));var I=E.stateNode}if(!I)throw Error(o(147,b));var B=I,q=""+b;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===q?w.ref:(w=function(_e){var Be=B.refs;Be===K8&&(Be=B.refs={}),_e===null?delete Be[q]:Be[q]=_e},w._stringRef=q,w)}if(typeof b!="string")throw Error(o(284));if(!E._owner)throw Error(o(290,b))}return b}function JS(b,w){throw b=Object.prototype.toString.call(w),Error(o(31,b==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":b))}function i7(b){var w=b._init;return w(b._payload)}function s7(b){function w(tt,je){if(b){var st=tt.deletions;st===null?(tt.deletions=[je],tt.flags|=16):st.push(je)}}function E(tt,je){if(!b)return null;for(;je!==null;)w(tt,je),je=je.sibling;return null}function I(tt,je){for(tt=new Map;je!==null;)je.key!==null?tt.set(je.key,je):tt.set(je.index,je),je=je.sibling;return tt}function B(tt,je){return tt=uf(tt,je),tt.index=0,tt.sibling=null,tt}function q(tt,je,st){return tt.index=st,b?(st=tt.alternate,st!==null?(st=st.index,st<je?(tt.flags|=2,je):st):(tt.flags|=2,je)):(tt.flags|=1048576,je)}function _e(tt){return b&&tt.alternate===null&&(tt.flags|=2),tt}function Be(tt,je,st,Vt){return je===null||je.tag!==6?(je=Y3(st,tt.mode,Vt),je.return=tt,je):(je=B(je,st),je.return=tt,je)}function at(tt,je,st,Vt){var rn=st.type;return rn===u?Xt(tt,je,st.props.children,Vt,st.key):je!==null&&(je.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===x&&i7(rn)===je.type)?(Vt=B(je,st.props),Vt.ref=Ky(tt,je,st),Vt.return=tt,Vt):(Vt=A_(st.type,st.key,st.props,null,tt.mode,Vt),Vt.ref=Ky(tt,je,st),Vt.return=tt,Vt)}function Tt(tt,je,st,Vt){return je===null||je.tag!==4||je.stateNode.containerInfo!==st.containerInfo||je.stateNode.implementation!==st.implementation?(je=K3(st,tt.mode,Vt),je.return=tt,je):(je=B(je,st.children||[]),je.return=tt,je)}function Xt(tt,je,st,Vt,rn){return je===null||je.tag!==7?(je=ep(st,tt.mode,Vt,rn),je.return=tt,je):(je=B(je,st),je.return=tt,je)}function An(tt,je,st){if(typeof je=="string"&&je!==""||typeof je=="number")return je=Y3(""+je,tt.mode,st),je.return=tt,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case l:return st=A_(je.type,je.key,je.props,null,tt.mode,st),st.ref=Ky(tt,null,je),st.return=tt,st;case c:return je=K3(je,tt.mode,st),je.return=tt,je;case x:var Vt=je._init;return An(tt,Vt(je._payload),st)}if(U(je)||C(je))return je=ep(je,tt.mode,st,null),je.return=tt,je;JS(tt,je)}return null}function vn(tt,je,st,Vt){var rn=je!==null?je.key:null;if(typeof st=="string"&&st!==""||typeof st=="number")return rn!==null?null:Be(tt,je,""+st,Vt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case l:return st.key===rn?at(tt,je,st,Vt):null;case c:return st.key===rn?Tt(tt,je,st,Vt):null;case x:return rn=st._init,vn(tt,je,rn(st._payload),Vt)}if(U(st)||C(st))return rn!==null?null:Xt(tt,je,st,Vt,null);JS(tt,st)}return null}function Lr(tt,je,st,Vt,rn){if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number")return tt=tt.get(st)||null,Be(je,tt,""+Vt,rn);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case l:return tt=tt.get(Vt.key===null?st:Vt.key)||null,at(je,tt,Vt,rn);case c:return tt=tt.get(Vt.key===null?st:Vt.key)||null,Tt(je,tt,Vt,rn);case x:var Un=Vt._init;return Lr(tt,je,st,Un(Vt._payload),rn)}if(U(Vt)||C(Vt))return tt=tt.get(st)||null,Xt(je,tt,Vt,rn,null);JS(je,Vt)}return null}function ln(tt,je,st,Vt){for(var rn=null,Un=null,In=je,fr=je=0,_s=null;In!==null&&fr<st.length;fr++){In.index>fr?(_s=In,In=null):_s=In.sibling;var hr=vn(tt,In,st[fr],Vt);if(hr===null){In===null&&(In=_s);break}b&&In&&hr.alternate===null&&w(tt,In),je=q(hr,je,fr),Un===null?rn=hr:Un.sibling=hr,Un=hr,In=_s}if(fr===st.length)return E(tt,In),ri&&Xh(tt,fr),rn;if(In===null){for(;fr<st.length;fr++)In=An(tt,st[fr],Vt),In!==null&&(je=q(In,je,fr),Un===null?rn=In:Un.sibling=In,Un=In);return ri&&Xh(tt,fr),rn}for(In=I(tt,In);fr<st.length;fr++)_s=Lr(In,tt,fr,st[fr],Vt),_s!==null&&(b&&_s.alternate!==null&&In.delete(_s.key===null?fr:_s.key),je=q(_s,je,fr),Un===null?rn=_s:Un.sibling=_s,Un=_s);return b&&In.forEach(function(df){return w(tt,df)}),ri&&Xh(tt,fr),rn}function no(tt,je,st,Vt){var rn=C(st);if(typeof rn!="function")throw Error(o(150));if(st=rn.call(st),st==null)throw Error(o(151));for(var Un=rn=null,In=je,fr=je=0,_s=null,hr=st.next();In!==null&&!hr.done;fr++,hr=st.next()){In.index>fr?(_s=In,In=null):_s=In.sibling;var df=vn(tt,In,hr.value,Vt);if(df===null){In===null&&(In=_s);break}b&&In&&df.alternate===null&&w(tt,In),je=q(df,je,fr),Un===null?rn=df:Un.sibling=df,Un=df,In=_s}if(hr.done)return E(tt,In),ri&&Xh(tt,fr),rn;if(In===null){for(;!hr.done;fr++,hr=st.next())hr=An(tt,hr.value,Vt),hr!==null&&(je=q(hr,je,fr),Un===null?rn=hr:Un.sibling=hr,Un=hr);return ri&&Xh(tt,fr),rn}for(In=I(tt,In);!hr.done;fr++,hr=st.next())hr=Lr(In,tt,fr,hr.value,Vt),hr!==null&&(b&&hr.alternate!==null&&In.delete(hr.key===null?fr:hr.key),je=q(hr,je,fr),Un===null?rn=hr:Un.sibling=hr,Un=hr);return b&&In.forEach(function(Pme){return w(tt,Pme)}),ri&&Xh(tt,fr),rn}function gl(tt,je,st,Vt){if(typeof st=="object"&&st!==null&&st.type===u&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case l:e:{for(var rn=st.key,Un=je;Un!==null;){if(Un.key===rn){if(rn=st.type,rn===u){if(Un.tag===7){E(tt,Un.sibling),je=B(Un,st.props.children),je.return=tt,tt=je;break e}}else if(Un.elementType===rn||typeof rn=="object"&&rn!==null&&rn.$$typeof===x&&i7(rn)===Un.type){E(tt,Un.sibling),je=B(Un,st.props),je.ref=Ky(tt,Un,st),je.return=tt,tt=je;break e}E(tt,Un);break}else w(tt,Un);Un=Un.sibling}st.type===u?(je=ep(st.props.children,tt.mode,Vt,st.key),je.return=tt,tt=je):(Vt=A_(st.type,st.key,st.props,null,tt.mode,Vt),Vt.ref=Ky(tt,je,st),Vt.return=tt,tt=Vt)}return _e(tt);case c:e:{for(Un=st.key;je!==null;){if(je.key===Un)if(je.tag===4&&je.stateNode.containerInfo===st.containerInfo&&je.stateNode.implementation===st.implementation){E(tt,je.sibling),je=B(je,st.children||[]),je.return=tt,tt=je;break e}else{E(tt,je);break}else w(tt,je);je=je.sibling}je=K3(st,tt.mode,Vt),je.return=tt,tt=je}return _e(tt);case x:return Un=st._init,gl(tt,je,Un(st._payload),Vt)}if(U(st))return ln(tt,je,st,Vt);if(C(st))return no(tt,je,st,Vt);JS(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"?(st=""+st,je!==null&&je.tag===6?(E(tt,je.sibling),je=B(je,st),je.return=tt,tt=je):(E(tt,je),je=Y3(st,tt.mode,Vt),je.return=tt,tt=je),_e(tt)):E(tt,je)}return gl}var _g=s7(!0),o7=s7(!1),Zy={},fl=gn(Zy),Jy=gn(Zy),Cg=gn(Zy);function qc(b){if(b===Zy)throw Error(o(174));return b}function h3(b,w){Et(Cg,w),Et(Jy,b),Et(fl,Zy),b=X(w),Pt(fl),Et(fl,b)}function Tg(){Pt(fl),Pt(Jy),Pt(Cg)}function a7(b){var w=qc(Cg.current),E=qc(fl.current);w=D(E,b.type,w),E!==w&&(Et(Jy,b),Et(fl,w))}function p3(b){Jy.current===b&&(Pt(fl),Pt(Jy))}var fi=gn(0);function QS(b){for(var w=b;w!==null;){if(w.tag===13){var E=w.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||dn(E)||_t(E)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if(w.flags&128)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===b)break;for(;w.sibling===null;){if(w.return===null||w.return===b)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var m3=[];function g3(){for(var b=0;b<m3.length;b++){var w=m3[b];ye?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}m3.length=0}var e_=a.ReactCurrentDispatcher,hl=a.ReactCurrentBatchConfig,Eg=0,yi=null,Qs=null,Ss=null,t_=!1,Qy=!1,ex=0,ime=0;function eo(){throw Error(o(321))}function v3(b,w){if(w===null)return!1;for(var E=0;E<w.length&&E<b.length;E++)if(!Ra(b[E],w[E]))return!1;return!0}function y3(b,w,E,I,B,q){if(Eg=q,yi=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,e_.current=b===null||b.memoizedState===null?lme:cme,b=E(I,B),Qy){q=0;do{if(Qy=!1,ex=0,25<=q)throw Error(o(301));q+=1,Ss=Qs=null,w.updateQueue=null,e_.current=ume,b=E(I,B)}while(Qy)}if(e_.current=o_,w=Qs!==null&&Qs.next!==null,Eg=0,Ss=Qs=yi=null,t_=!1,w)throw Error(o(300));return b}function x3(){var b=ex!==0;return ex=0,b}function od(){var b={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ss===null?yi.memoizedState=Ss=b:Ss=Ss.next=b,Ss}function Yc(){if(Qs===null){var b=yi.alternate;b=b!==null?b.memoizedState:null}else b=Qs.next;var w=Ss===null?yi.memoizedState:Ss.next;if(w!==null)Ss=w,Qs=b;else{if(b===null)throw Error(o(310));Qs=b,b={memoizedState:Qs.memoizedState,baseState:Qs.baseState,baseQueue:Qs.baseQueue,queue:Qs.queue,next:null},Ss===null?yi.memoizedState=Ss=b:Ss=Ss.next=b}return Ss}function qh(b,w){return typeof w=="function"?w(b):w}function n_(b){var w=Yc(),E=w.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=b;var I=Qs,B=I.baseQueue,q=E.pending;if(q!==null){if(B!==null){var _e=B.next;B.next=q.next,q.next=_e}I.baseQueue=B=q,E.pending=null}if(B!==null){q=B.next,I=I.baseState;var Be=_e=null,at=null,Tt=q;do{var Xt=Tt.lane;if((Eg&Xt)===Xt)at!==null&&(at=at.next={lane:0,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null}),I=Tt.hasEagerState?Tt.eagerState:b(I,Tt.action);else{var An={lane:Xt,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null};at===null?(Be=at=An,_e=I):at=at.next=An,yi.lanes|=Xt,kg|=Xt}Tt=Tt.next}while(Tt!==null&&Tt!==q);at===null?_e=I:at.next=Be,Ra(I,w.memoizedState)||(Da=!0),w.memoizedState=I,w.baseState=_e,w.baseQueue=at,E.lastRenderedState=I}if(b=E.interleaved,b!==null){B=b;do q=B.lane,yi.lanes|=q,kg|=q,B=B.next;while(B!==b)}else B===null&&(E.lanes=0);return[w.memoizedState,E.dispatch]}function r_(b){var w=Yc(),E=w.queue;if(E===null)throw Error(o(311));E.lastRenderedReducer=b;var I=E.dispatch,B=E.pending,q=w.memoizedState;if(B!==null){E.pending=null;var _e=B=B.next;do q=b(q,_e.action),_e=_e.next;while(_e!==B);Ra(q,w.memoizedState)||(Da=!0),w.memoizedState=q,w.baseQueue===null&&(w.baseState=q),E.lastRenderedState=q}return[q,I]}function l7(){}function c7(b,w){var E=yi,I=Yc(),B=w(),q=!Ra(I.memoizedState,B);if(q&&(I.memoizedState=B,Da=!0),I=I.queue,nx(f7.bind(null,E,I,b),[b]),I.getSnapshot!==w||q||Ss!==null&&Ss.memoizedState.tag&1){if(E.flags|=2048,tx(9,d7.bind(null,E,I,B,w),void 0,null),Gi===null)throw Error(o(349));Eg&30||u7(E,w,B)}return B}function u7(b,w,E){b.flags|=16384,b={getSnapshot:w,value:E},w=yi.updateQueue,w===null?(w={lastEffect:null,stores:null},yi.updateQueue=w,w.stores=[b]):(E=w.stores,E===null?w.stores=[b]:E.push(b))}function d7(b,w,E,I){w.value=E,w.getSnapshot=I,h7(w)&&pl(b,1,-1)}function f7(b,w,E){return E(function(){h7(w)&&pl(b,1,-1)})}function h7(b){var w=b.getSnapshot;b=b.value;try{var E=w();return!Ra(b,E)}catch{return!0}}function b3(b){var w=od();return typeof b=="function"&&(b=b()),w.memoizedState=w.baseState=b,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qh,lastRenderedState:b},w.queue=b,b=b.dispatch=ame.bind(null,yi,b),[w.memoizedState,b]}function tx(b,w,E,I){return b={tag:b,create:w,destroy:E,deps:I,next:null},w=yi.updateQueue,w===null?(w={lastEffect:null,stores:null},yi.updateQueue=w,w.lastEffect=b.next=b):(E=w.lastEffect,E===null?w.lastEffect=b.next=b:(I=E.next,E.next=b,b.next=I,w.lastEffect=b)),b}function p7(){return Yc().memoizedState}function i_(b,w,E,I){var B=od();yi.flags|=b,B.memoizedState=tx(1|w,E,void 0,I===void 0?null:I)}function s_(b,w,E,I){var B=Yc();I=I===void 0?null:I;var q=void 0;if(Qs!==null){var _e=Qs.memoizedState;if(q=_e.destroy,I!==null&&v3(I,_e.deps)){B.memoizedState=tx(w,E,q,I);return}}yi.flags|=b,B.memoizedState=tx(1|w,E,q,I)}function w3(b,w){return i_(8390656,8,b,w)}function nx(b,w){return s_(2048,8,b,w)}function m7(b,w){return s_(4,2,b,w)}function g7(b,w){return s_(4,4,b,w)}function v7(b,w){if(typeof w=="function")return b=b(),w(b),function(){w(null)};if(w!=null)return b=b(),w.current=b,function(){w.current=null}}function y7(b,w,E){return E=E!=null?E.concat([b]):null,s_(4,4,v7.bind(null,w,b),E)}function S3(){}function x7(b,w){var E=Yc();w=w===void 0?null:w;var I=E.memoizedState;return I!==null&&w!==null&&v3(w,I[1])?I[0]:(E.memoizedState=[b,w],b)}function b7(b,w){var E=Yc();w=w===void 0?null:w;var I=E.memoizedState;return I!==null&&w!==null&&v3(w,I[1])?I[0]:(b=b(),E.memoizedState=[b,w],b)}function sme(b,w){var E=jn;jn=E!==0&&4>E?E:4,b(!0);var I=hl.transition;hl.transition={};try{b(!1),w()}finally{jn=E,hl.transition=I}}function w7(){return Yc().memoizedState}function ome(b,w,E){var I=lf(b);E={lane:I,action:E,hasEagerState:!1,eagerState:null,next:null},S7(b)?_7(w,E):(C7(b,w,E),E=No(),b=pl(b,I,E),b!==null&&T7(b,w,I))}function ame(b,w,E){var I=lf(b),B={lane:I,action:E,hasEagerState:!1,eagerState:null,next:null};if(S7(b))_7(w,B);else{C7(b,w,B);var q=b.alternate;if(b.lanes===0&&(q===null||q.lanes===0)&&(q=w.lastRenderedReducer,q!==null))try{var _e=w.lastRenderedState,Be=q(_e,E);if(B.hasEagerState=!0,B.eagerState=Be,Ra(Be,_e))return}catch{}finally{}E=No(),b=pl(b,I,E),b!==null&&T7(b,w,I)}}function S7(b){var w=b.alternate;return b===yi||w!==null&&w===yi}function _7(b,w){Qy=t_=!0;var E=b.pending;E===null?w.next=w:(w.next=E.next,E.next=w),b.pending=w}function C7(b,w,E){Gi!==null&&b.mode&1&&!(Gn&2)?(b=w.interleaved,b===null?(E.next=E,Na===null?Na=[w]:Na.push(w)):(E.next=b.next,b.next=E),w.interleaved=E):(b=w.pending,b===null?E.next=E:(E.next=b.next,b.next=E),w.pending=E)}function T7(b,w,E){if(E&4194240){var I=w.lanes;I&=b.pendingLanes,E|=I,w.lanes=E,jc(b,E)}}var o_={readContext:Di,useCallback:eo,useContext:eo,useEffect:eo,useImperativeHandle:eo,useInsertionEffect:eo,useLayoutEffect:eo,useMemo:eo,useReducer:eo,useRef:eo,useState:eo,useDebugValue:eo,useDeferredValue:eo,useTransition:eo,useMutableSource:eo,useSyncExternalStore:eo,useId:eo,unstable_isNewReconciler:!1},lme={readContext:Di,useCallback:function(b,w){return od().memoizedState=[b,w===void 0?null:w],b},useContext:Di,useEffect:w3,useImperativeHandle:function(b,w,E){return E=E!=null?E.concat([b]):null,i_(4194308,4,v7.bind(null,w,b),E)},useLayoutEffect:function(b,w){return i_(4194308,4,b,w)},useInsertionEffect:function(b,w){return i_(4,2,b,w)},useMemo:function(b,w){var E=od();return w=w===void 0?null:w,b=b(),E.memoizedState=[b,w],b},useReducer:function(b,w,E){var I=od();return w=E!==void 0?E(w):w,I.memoizedState=I.baseState=w,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:w},I.queue=b,b=b.dispatch=ome.bind(null,yi,b),[I.memoizedState,b]},useRef:function(b){var w=od();return b={current:b},w.memoizedState=b},useState:b3,useDebugValue:S3,useDeferredValue:function(b){var w=b3(b),E=w[0],I=w[1];return w3(function(){var B=hl.transition;hl.transition={};try{I(b)}finally{hl.transition=B}},[b]),E},useTransition:function(){var b=b3(!1),w=b[0];return b=sme.bind(null,b[1]),od().memoizedState=b,[w,b]},useMutableSource:function(){},useSyncExternalStore:function(b,w,E){var I=yi,B=od();if(ri){if(E===void 0)throw Error(o(407));E=E()}else{if(E=w(),Gi===null)throw Error(o(349));Eg&30||u7(I,w,E)}B.memoizedState=E;var q={value:E,getSnapshot:w};return B.queue=q,w3(f7.bind(null,I,q,b),[b]),I.flags|=2048,tx(9,d7.bind(null,I,q,E,w),void 0,null),E},useId:function(){var b=od(),w=Gi.identifierPrefix;if(ri){var E=sd,I=id;E=(I&~(1<<32-Nr(I)-1)).toString(32)+E,w=":"+w+"R"+E,E=ex++,0<E&&(w+="H"+E.toString(32)),w+=":"}else E=ime++,w=":"+w+"r"+E.toString(32)+":";return b.memoizedState=w},unstable_isNewReconciler:!1},cme={readContext:Di,useCallback:x7,useContext:Di,useEffect:nx,useImperativeHandle:y7,useInsertionEffect:m7,useLayoutEffect:g7,useMemo:b7,useReducer:n_,useRef:p7,useState:function(){return n_(qh)},useDebugValue:S3,useDeferredValue:function(b){var w=n_(qh),E=w[0],I=w[1];return nx(function(){var B=hl.transition;hl.transition={};try{I(b)}finally{hl.transition=B}},[b]),E},useTransition:function(){var b=n_(qh)[0],w=Yc().memoizedState;return[b,w]},useMutableSource:l7,useSyncExternalStore:c7,useId:w7,unstable_isNewReconciler:!1},ume={readContext:Di,useCallback:x7,useContext:Di,useEffect:nx,useImperativeHandle:y7,useInsertionEffect:m7,useLayoutEffect:g7,useMemo:b7,useReducer:r_,useRef:p7,useState:function(){return r_(qh)},useDebugValue:S3,useDeferredValue:function(b){var w=r_(qh),E=w[0],I=w[1];return nx(function(){var B=hl.transition;hl.transition={};try{I(b)}finally{hl.transition=B}},[b]),E},useTransition:function(){var b=r_(qh)[0],w=Yc().memoizedState;return[b,w]},useMutableSource:l7,useSyncExternalStore:c7,useId:w7,unstable_isNewReconciler:!1};function _3(b,w){try{var E="",I=w;do E+=Hh(I),I=I.return;while(I);var B=E}catch(q){B=`
Error generating stack: `+q.message+`
`+q.stack}return{value:b,source:w,stack:B}}function C3(b,w){try{console.error(w.value)}catch(E){setTimeout(function(){throw E})}}var dme=typeof WeakMap=="function"?WeakMap:Map;function E7(b,w,E){E=rd(-1,E),E.tag=3,E.payload={element:null};var I=w.value;return E.callback=function(){S_||(S_=!0,W3=I),C3(b,w)},E}function M7(b,w,E){E=rd(-1,E),E.tag=3;var I=b.type.getDerivedStateFromError;if(typeof I=="function"){var B=w.value;E.payload=function(){return I(B)},E.callback=function(){C3(b,w)}}var q=b.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(E.callback=function(){C3(b,w),typeof I!="function"&&(of===null?of=new Set([this]):of.add(this));var _e=w.stack;this.componentDidCatch(w.value,{componentStack:_e!==null?_e:""})}),E}function k7(b,w,E){var I=b.pingCache;if(I===null){I=b.pingCache=new dme;var B=new Set;I.set(w,B)}else B=I.get(w),B===void 0&&(B=new Set,I.set(w,B));B.has(E)||(B.add(E),b=Tme.bind(null,b,w,E),w.then(b,b))}function A7(b){do{var w;if((w=b.tag===13)&&(w=b.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return b;b=b.return}while(b!==null);return null}function I7(b,w,E,I,B){return b.mode&1?(b.flags|=65536,b.lanes=B,b):(b===w?b.flags|=65536:(b.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(w=rd(-1,1),w.tag=2,sf(E,w))),E.lanes|=1),b)}function Kc(b){b.flags|=4}function R7(b,w){if(b!==null&&b.child===w.child)return!0;if(w.flags&16)return!1;for(b=w.child;b!==null;){if(b.flags&12854||b.subtreeFlags&12854)return!1;b=b.sibling}return!0}var rx,ix,a_,l_;if(le)rx=function(b,w){for(var E=w.child;E!==null;){if(E.tag===5||E.tag===6)j(b,E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===w)break;for(;E.sibling===null;){if(E.return===null||E.return===w)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},ix=function(){},a_=function(b,w,E,I,B){if(b=b.memoizedProps,b!==I){var q=w.stateNode,_e=qc(fl.current);E=Q(q,E,b,I,B,_e),(w.updateQueue=E)&&Kc(w)}},l_=function(b,w,E,I){E!==I&&Kc(w)};else if(H){rx=function(b,w,E,I){for(var B=w.child;B!==null;){if(B.tag===5){var q=B.stateNode;E&&I&&(q=Qt(q,B.type,B.memoizedProps,B)),j(b,q)}else if(B.tag===6)q=B.stateNode,E&&I&&(q=$t(q,B.memoizedProps,B)),j(b,q);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)q=B.child,q!==null&&(q.return=B),rx(b,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===w)break;for(;B.sibling===null;){if(B.return===null||B.return===w)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};var N7=function(b,w,E,I){for(var B=w.child;B!==null;){if(B.tag===5){var q=B.stateNode;E&&I&&(q=Qt(q,B.type,B.memoizedProps,B)),vt(b,q)}else if(B.tag===6)q=B.stateNode,E&&I&&(q=$t(q,B.memoizedProps,B)),vt(b,q);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)q=B.child,q!==null&&(q.return=B),N7(b,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===w)break;for(;B.sibling===null;){if(B.return===null||B.return===w)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};ix=function(b,w){var E=w.stateNode;if(!R7(b,w)){b=E.containerInfo;var I=yt(b);N7(I,w,!1,!1),E.pendingChildren=I,Kc(w),zt(b,I)}},a_=function(b,w,E,I,B){var q=b.stateNode,_e=b.memoizedProps;if((b=R7(b,w))&&_e===I)w.stateNode=q;else{var Be=w.stateNode,at=qc(fl.current),Tt=null;_e!==I&&(Tt=Q(Be,E,_e,I,B,at)),b&&Tt===null?w.stateNode=q:(q=dt(q,Tt,E,_e,I,w,b,Be),J(q,E,I,B,at)&&Kc(w),w.stateNode=q,b?Kc(w):rx(q,w,!1,!1))}},l_=function(b,w,E,I){E!==I?(b=qc(Cg.current),E=qc(fl.current),w.stateNode=re(I,b,E,w),Kc(w)):w.stateNode=b.stateNode}}else ix=function(){},a_=function(){},l_=function(){};function sx(b,w){if(!ri)switch(b.tailMode){case"hidden":w=b.tail;for(var E=null;w!==null;)w.alternate!==null&&(E=w),w=w.sibling;E===null?b.tail=null:E.sibling=null;break;case"collapsed":E=b.tail;for(var I=null;E!==null;)E.alternate!==null&&(I=E),E=E.sibling;I===null?w||b.tail===null?b.tail=null:b.tail.sibling=null:I.sibling=null}}function to(b){var w=b.alternate!==null&&b.alternate.child===b.child,E=0,I=0;if(w)for(var B=b.child;B!==null;)E|=B.lanes|B.childLanes,I|=B.subtreeFlags&14680064,I|=B.flags&14680064,B.return=b,B=B.sibling;else for(B=b.child;B!==null;)E|=B.lanes|B.childLanes,I|=B.subtreeFlags,I|=B.flags,B.return=b,B=B.sibling;return b.subtreeFlags|=I,b.childLanes=E,w}function fme(b,w,E){var I=w.pendingProps;switch(c3(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return to(w),null;case 1:return Hn(w.type)&&_n(),to(w),null;case 3:return I=w.stateNode,Tg(),Pt(cn),Pt(en),g3(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(b===null||b.child===null)&&(Yy(w)?Kc(w):b===null||b.memoizedState.isDehydrated&&!(w.flags&256)||(w.flags|=1024,nc!==null&&(H3(nc),nc=null))),ix(b,w),to(w),null;case 5:p3(w),E=qc(Cg.current);var B=w.type;if(b!==null&&w.stateNode!=null)a_(b,w,B,I,E),b.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!I){if(w.stateNode===null)throw Error(o(166));return to(w),null}if(b=qc(fl.current),Yy(w)){if(!Me)throw Error(o(175));b=Z(w.stateNode,w.type,w.memoizedProps,E,b,w,!qy),w.updateQueue=b,b!==null&&Kc(w)}else{var q=V(B,I,E,b,w);rx(q,w,!1,!1),w.stateNode=q,J(q,B,I,E,b)&&Kc(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return to(w),null;case 6:if(b&&w.stateNode!=null)l_(b,w,b.memoizedProps,I);else{if(typeof I!="string"&&w.stateNode===null)throw Error(o(166));if(b=qc(Cg.current),E=qc(fl.current),Yy(w)){if(!Me)throw Error(o(176));if(b=w.stateNode,I=w.memoizedProps,(E=K(b,I,w,!qy))&&(B=Pa,B!==null))switch(q=(B.mode&1)!==0,B.tag){case 3:Je(B.stateNode.containerInfo,b,I,q);break;case 5:nt(B.type,B.memoizedProps,B.stateNode,b,I,q)}E&&Kc(w)}else w.stateNode=re(I,b,E,w)}return to(w),null;case 13:if(Pt(fi),I=w.memoizedState,ri&&$a!==null&&w.mode&1&&!(w.flags&128)){for(b=$a;b;)b=Nt(b);return Sg(),w.flags|=98560,w}if(I!==null&&I.dehydrated!==null){if(I=Yy(w),b===null){if(!I)throw Error(o(318));if(!Me)throw Error(o(344));if(b=w.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(o(317));ne(b,w)}else Sg(),!(w.flags&128)&&(w.memoizedState=null),w.flags|=4;return to(w),null}return nc!==null&&(H3(nc),nc=null),w.flags&128?(w.lanes=E,w):(I=I!==null,E=!1,b===null?Yy(w):E=b.memoizedState!==null,I&&!E&&(w.child.flags|=8192,w.mode&1&&(b===null||fi.current&1?os===0&&(os=3):X3())),w.updateQueue!==null&&(w.flags|=4),to(w),null);case 4:return Tg(),ix(b,w),b===null&&Ee(w.stateNode.containerInfo),to(w),null;case 10:return ws(w.type._context),to(w),null;case 17:return Hn(w.type)&&_n(),to(w),null;case 19:if(Pt(fi),B=w.memoizedState,B===null)return to(w),null;if(I=(w.flags&128)!==0,q=B.rendering,q===null)if(I)sx(B,!1);else{if(os!==0||b!==null&&b.flags&128)for(b=w.child;b!==null;){if(q=QS(b),q!==null){for(w.flags|=128,sx(B,!1),b=q.updateQueue,b!==null&&(w.updateQueue=b,w.flags|=4),w.subtreeFlags=0,b=E,I=w.child;I!==null;)E=I,B=b,E.flags&=14680066,q=E.alternate,q===null?(E.childLanes=0,E.lanes=B,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=q.childLanes,E.lanes=q.lanes,E.child=q.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=q.memoizedProps,E.memoizedState=q.memoizedState,E.updateQueue=q.updateQueue,E.type=q.type,B=q.dependencies,E.dependencies=B===null?null:{lanes:B.lanes,firstContext:B.firstContext}),I=I.sibling;return Et(fi,fi.current&1|2),w.child}b=b.sibling}B.tail!==null&&di()>z3&&(w.flags|=128,I=!0,sx(B,!1),w.lanes=4194304)}else{if(!I)if(b=QS(q),b!==null){if(w.flags|=128,I=!0,b=b.updateQueue,b!==null&&(w.updateQueue=b,w.flags|=4),sx(B,!0),B.tail===null&&B.tailMode==="hidden"&&!q.alternate&&!ri)return to(w),null}else 2*di()-B.renderingStartTime>z3&&E!==1073741824&&(w.flags|=128,I=!0,sx(B,!1),w.lanes=4194304);B.isBackwards?(q.sibling=w.child,w.child=q):(b=B.last,b!==null?b.sibling=q:w.child=q,B.last=q)}return B.tail!==null?(w=B.tail,B.rendering=w,B.tail=w.sibling,B.renderingStartTime=di(),w.sibling=null,b=fi.current,Et(fi,I?b&1|2:b&1),w):(to(w),null);case 22:case 23:return j3(),I=w.memoizedState!==null,b!==null&&b.memoizedState!==null!==I&&(w.flags|=8192),I&&w.mode&1?La&1073741824&&(to(w),le&&w.subtreeFlags&6&&(w.flags|=8192)):to(w),null;case 24:return null;case 25:return null}throw Error(o(156,w.tag))}var hme=a.ReactCurrentOwner,Da=!1;function Ro(b,w,E,I){w.child=b===null?o7(w,null,E,I):_g(w,b.child,E,I)}function P7(b,w,E,I,B){E=E.render;var q=w.ref;return $i(w,B),I=y3(b,w,E,I,q,B),E=x3(),b!==null&&!Da?(w.updateQueue=b.updateQueue,w.flags&=-2053,b.lanes&=~B,ad(b,w,B)):(ri&&E&&l3(w),w.flags|=1,Ro(b,w,I,B),w.child)}function $7(b,w,E,I,B){if(b===null){var q=E.type;return typeof q=="function"&&!q3(q)&&q.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(w.tag=15,w.type=q,D7(b,w,q,I,B)):(b=A_(E.type,null,I,w,w.mode,B),b.ref=w.ref,b.return=w,w.child=b)}if(q=b.child,!(b.lanes&B)){var _e=q.memoizedProps;if(E=E.compare,E=E!==null?E:Gh,E(_e,I)&&b.ref===w.ref)return ad(b,w,B)}return w.flags|=1,b=uf(q,I),b.ref=w.ref,b.return=w,w.child=b}function D7(b,w,E,I,B){if(b!==null&&Gh(b.memoizedProps,I)&&b.ref===w.ref)if(Da=!1,(b.lanes&B)!==0)b.flags&131072&&(Da=!0);else return w.lanes=b.lanes,ad(b,w,B);return T3(b,w,E,I,B)}function L7(b,w,E){var I=w.pendingProps,B=I.children,q=b!==null?b.memoizedState:null;if(I.mode==="hidden")if(!(w.mode&1))w.memoizedState={baseLanes:0,cachePool:null},Et(Mg,La),La|=E;else if(E&1073741824)w.memoizedState={baseLanes:0,cachePool:null},I=q!==null?q.baseLanes:E,Et(Mg,La),La|=I;else return b=q!==null?q.baseLanes|E:E,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:b,cachePool:null},w.updateQueue=null,Et(Mg,La),La|=b,null;else q!==null?(I=q.baseLanes|E,w.memoizedState=null):I=E,Et(Mg,La),La|=I;return Ro(b,w,B,E),w.child}function O7(b,w){var E=w.ref;(b===null&&E!==null||b!==null&&b.ref!==E)&&(w.flags|=512,w.flags|=2097152)}function T3(b,w,E,I,B){var q=Hn(E)?ar:en.current;return q=Fn(w,q),$i(w,B),E=y3(b,w,E,I,q,B),I=x3(),b!==null&&!Da?(w.updateQueue=b.updateQueue,w.flags&=-2053,b.lanes&=~B,ad(b,w,B)):(ri&&I&&l3(w),w.flags|=1,Ro(b,w,E,B),w.child)}function F7(b,w,E,I,B){if(Hn(E)){var q=!0;nn(w)}else q=!1;if($i(w,B),w.stateNode===null)b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),J8(w,E,I),a3(w,E,I,B),I=!0;else if(b===null){var _e=w.stateNode,Be=w.memoizedProps;_e.props=Be;var at=_e.context,Tt=E.contextType;typeof Tt=="object"&&Tt!==null?Tt=Di(Tt):(Tt=Hn(E)?ar:en.current,Tt=Fn(w,Tt));var Xt=E.getDerivedStateFromProps,An=typeof Xt=="function"||typeof _e.getSnapshotBeforeUpdate=="function";An||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(Be!==I||at!==Tt)&&Q8(w,_e,I,Tt),rf=!1;var vn=w.memoizedState;_e.state=vn,qS(w,I,_e,B),at=w.memoizedState,Be!==I||vn!==at||cn.current||rf?(typeof Xt=="function"&&(o3(w,E,Xt,I),at=w.memoizedState),(Be=rf||Z8(w,E,Be,I,vn,at,Tt))?(An||typeof _e.UNSAFE_componentWillMount!="function"&&typeof _e.componentWillMount!="function"||(typeof _e.componentWillMount=="function"&&_e.componentWillMount(),typeof _e.UNSAFE_componentWillMount=="function"&&_e.UNSAFE_componentWillMount()),typeof _e.componentDidMount=="function"&&(w.flags|=4194308)):(typeof _e.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=I,w.memoizedState=at),_e.props=I,_e.state=at,_e.context=Tt,I=Be):(typeof _e.componentDidMount=="function"&&(w.flags|=4194308),I=!1)}else{_e=w.stateNode,X8(b,w),Be=w.memoizedProps,Tt=w.type===w.elementType?Be:Ao(w.type,Be),_e.props=Tt,An=w.pendingProps,vn=_e.context,at=E.contextType,typeof at=="object"&&at!==null?at=Di(at):(at=Hn(E)?ar:en.current,at=Fn(w,at));var Lr=E.getDerivedStateFromProps;(Xt=typeof Lr=="function"||typeof _e.getSnapshotBeforeUpdate=="function")||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(Be!==An||vn!==at)&&Q8(w,_e,I,at),rf=!1,vn=w.memoizedState,_e.state=vn,qS(w,I,_e,B);var ln=w.memoizedState;Be!==An||vn!==ln||cn.current||rf?(typeof Lr=="function"&&(o3(w,E,Lr,I),ln=w.memoizedState),(Tt=rf||Z8(w,E,Tt,I,vn,ln,at)||!1)?(Xt||typeof _e.UNSAFE_componentWillUpdate!="function"&&typeof _e.componentWillUpdate!="function"||(typeof _e.componentWillUpdate=="function"&&_e.componentWillUpdate(I,ln,at),typeof _e.UNSAFE_componentWillUpdate=="function"&&_e.UNSAFE_componentWillUpdate(I,ln,at)),typeof _e.componentDidUpdate=="function"&&(w.flags|=4),typeof _e.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof _e.componentDidUpdate!="function"||Be===b.memoizedProps&&vn===b.memoizedState||(w.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||Be===b.memoizedProps&&vn===b.memoizedState||(w.flags|=1024),w.memoizedProps=I,w.memoizedState=ln),_e.props=I,_e.state=ln,_e.context=at,I=Tt):(typeof _e.componentDidUpdate!="function"||Be===b.memoizedProps&&vn===b.memoizedState||(w.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||Be===b.memoizedProps&&vn===b.memoizedState||(w.flags|=1024),I=!1)}return E3(b,w,E,I,q,B)}function E3(b,w,E,I,B,q){O7(b,w);var _e=(w.flags&128)!==0;if(!I&&!_e)return B&&an(w,E,!1),ad(b,w,q);I=w.stateNode,hme.current=w;var Be=_e&&typeof E.getDerivedStateFromError!="function"?null:I.render();return w.flags|=1,b!==null&&_e?(w.child=_g(w,b.child,null,q),w.child=_g(w,null,Be,q)):Ro(b,w,Be,q),w.memoizedState=I.state,B&&an(w,E,!0),w.child}function U7(b){var w=b.stateNode;w.pendingContext?fn(b,w.pendingContext,w.pendingContext!==w.context):w.context&&fn(b,w.context,!1),h3(b,w.containerInfo)}function B7(b,w,E,I,B){return Sg(),f3(B),w.flags|=256,Ro(b,w,E,I),w.child}var c_={dehydrated:null,treeContext:null,retryLane:0};function u_(b){return{baseLanes:b,cachePool:null}}function z7(b,w,E){var I=w.pendingProps,B=fi.current,q=!1,_e=(w.flags&128)!==0,Be;if((Be=_e)||(Be=b!==null&&b.memoizedState===null?!1:(B&2)!==0),Be?(q=!0,w.flags&=-129):(b===null||b.memoizedState!==null)&&(B|=1),Et(fi,B&1),b===null)return d3(w),b=w.memoizedState,b!==null&&(b=b.dehydrated,b!==null)?(w.mode&1?_t(b)?w.lanes=8:w.lanes=1073741824:w.lanes=1,null):(B=I.children,b=I.fallback,q?(I=w.mode,q=w.child,B={mode:"hidden",children:B},!(I&1)&&q!==null?(q.childLanes=0,q.pendingProps=B):q=I_(B,I,0,null),b=ep(b,I,E,null),q.return=w,b.return=w,q.sibling=b,w.child=q,w.child.memoizedState=u_(E),w.memoizedState=c_,b):M3(w,B));if(B=b.memoizedState,B!==null){if(Be=B.dehydrated,Be!==null){if(_e)return w.flags&256?(w.flags&=-257,d_(b,w,E,Error(o(422)))):w.memoizedState!==null?(w.child=b.child,w.flags|=128,null):(q=I.fallback,B=w.mode,I=I_({mode:"visible",children:I.children},B,0,null),q=ep(q,B,E,null),q.flags|=2,I.return=w,q.return=w,I.sibling=q,w.child=I,w.mode&1&&_g(w,b.child,null,E),w.child.memoizedState=u_(E),w.memoizedState=c_,q);if(!(w.mode&1))w=d_(b,w,E,null);else if(_t(Be))w=d_(b,w,E,Error(o(419)));else if(I=(E&b.childLanes)!==0,Da||I){if(I=Gi,I!==null){switch(E&-E){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}I=q&(I.suspendedLanes|E)?0:q,I!==0&&I!==B.retryLane&&(B.retryLane=I,pl(b,I,-1))}X3(),w=d_(b,w,E,Error(o(421)))}else dn(Be)?(w.flags|=128,w.child=b.child,w=Eme.bind(null,b),Dt(Be,w),w=null):(E=B.treeContext,Me&&($a=Sn(Be),Pa=w,ri=!0,nc=null,qy=!1,E!==null&&(ul[dl++]=id,ul[dl++]=sd,ul[dl++]=jh,id=E.id,sd=E.overflow,jh=w)),w=M3(w,w.pendingProps.children),w.flags|=4096);return w}return q?(I=V7(b,w,I.children,I.fallback,E),q=w.child,B=b.child.memoizedState,q.memoizedState=B===null?u_(E):{baseLanes:B.baseLanes|E,cachePool:null},q.childLanes=b.childLanes&~E,w.memoizedState=c_,I):(E=W7(b,w,I.children,E),w.memoizedState=null,E)}return q?(I=V7(b,w,I.children,I.fallback,E),q=w.child,B=b.child.memoizedState,q.memoizedState=B===null?u_(E):{baseLanes:B.baseLanes|E,cachePool:null},q.childLanes=b.childLanes&~E,w.memoizedState=c_,I):(E=W7(b,w,I.children,E),w.memoizedState=null,E)}function M3(b,w){return w=I_({mode:"visible",children:w},b.mode,0,null),w.return=b,b.child=w}function W7(b,w,E,I){var B=b.child;return b=B.sibling,E=uf(B,{mode:"visible",children:E}),!(w.mode&1)&&(E.lanes=I),E.return=w,E.sibling=null,b!==null&&(I=w.deletions,I===null?(w.deletions=[b],w.flags|=16):I.push(b)),w.child=E}function V7(b,w,E,I,B){var q=w.mode;b=b.child;var _e=b.sibling,Be={mode:"hidden",children:E};return!(q&1)&&w.child!==b?(E=w.child,E.childLanes=0,E.pendingProps=Be,w.deletions=null):(E=uf(b,Be),E.subtreeFlags=b.subtreeFlags&14680064),_e!==null?I=uf(_e,I):(I=ep(I,q,B,null),I.flags|=2),I.return=w,E.return=w,E.sibling=I,w.child=E,I}function d_(b,w,E,I){return I!==null&&f3(I),_g(w,b.child,null,E),b=M3(w,w.pendingProps.children),b.flags|=2,w.memoizedState=null,b}function G7(b,w,E){b.lanes|=w;var I=b.alternate;I!==null&&(I.lanes|=w),Io(b.return,w,E)}function k3(b,w,E,I,B){var q=b.memoizedState;q===null?b.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:I,tail:E,tailMode:B}:(q.isBackwards=w,q.rendering=null,q.renderingStartTime=0,q.last=I,q.tail=E,q.tailMode=B)}function H7(b,w,E){var I=w.pendingProps,B=I.revealOrder,q=I.tail;if(Ro(b,w,I.children,E),I=fi.current,I&2)I=I&1|2,w.flags|=128;else{if(b!==null&&b.flags&128)e:for(b=w.child;b!==null;){if(b.tag===13)b.memoizedState!==null&&G7(b,E,w);else if(b.tag===19)G7(b,E,w);else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===w)break e;for(;b.sibling===null;){if(b.return===null||b.return===w)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}I&=1}if(Et(fi,I),!(w.mode&1))w.memoizedState=null;else switch(B){case"forwards":for(E=w.child,B=null;E!==null;)b=E.alternate,b!==null&&QS(b)===null&&(B=E),E=E.sibling;E=B,E===null?(B=w.child,w.child=null):(B=E.sibling,E.sibling=null),k3(w,!1,B,E,q);break;case"backwards":for(E=null,B=w.child,w.child=null;B!==null;){if(b=B.alternate,b!==null&&QS(b)===null){w.child=B;break}b=B.sibling,B.sibling=E,E=B,B=b}k3(w,!0,E,null,q);break;case"together":k3(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function ad(b,w,E){if(b!==null&&(w.dependencies=b.dependencies),kg|=w.lanes,!(E&w.childLanes))return null;if(b!==null&&w.child!==b.child)throw Error(o(153));if(w.child!==null){for(b=w.child,E=uf(b,b.pendingProps),w.child=E,E.return=w;b.sibling!==null;)b=b.sibling,E=E.sibling=uf(b,b.pendingProps),E.return=w;E.sibling=null}return w.child}function pme(b,w,E){switch(w.tag){case 3:U7(w),Sg();break;case 5:a7(w);break;case 1:Hn(w.type)&&nn(w);break;case 4:h3(w,w.stateNode.containerInfo);break;case 10:jS(w,w.type._context,w.memoizedProps.value);break;case 13:var I=w.memoizedState;if(I!==null)return I.dehydrated!==null?(Et(fi,fi.current&1),w.flags|=128,null):E&w.child.childLanes?z7(b,w,E):(Et(fi,fi.current&1),b=ad(b,w,E),b!==null?b.sibling:null);Et(fi,fi.current&1);break;case 19:if(I=(E&w.childLanes)!==0,b.flags&128){if(I)return H7(b,w,E);w.flags|=128}var B=w.memoizedState;if(B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),Et(fi,fi.current),I)break;return null;case 22:case 23:return w.lanes=0,L7(b,w,E)}return ad(b,w,E)}function mme(b,w){switch(c3(w),w.tag){case 1:return Hn(w.type)&&_n(),b=w.flags,b&65536?(w.flags=b&-65537|128,w):null;case 3:return Tg(),Pt(cn),Pt(en),g3(),b=w.flags,b&65536&&!(b&128)?(w.flags=b&-65537|128,w):null;case 5:return p3(w),null;case 13:if(Pt(fi),b=w.memoizedState,b!==null&&b.dehydrated!==null){if(w.alternate===null)throw Error(o(340));Sg()}return b=w.flags,b&65536?(w.flags=b&-65537|128,w):null;case 19:return Pt(fi),null;case 4:return Tg(),null;case 10:return ws(w.type._context),null;case 22:case 23:return j3(),null;case 24:return null;default:return null}}var f_=!1,Yh=!1,gme=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function h_(b,w){var E=b.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(I){na(b,w,I)}else E.current=null}function A3(b,w,E){try{E()}catch(I){na(b,w,I)}}var j7=!1;function vme(b,w){for(F(b.containerInfo),Ot=w;Ot!==null;)if(b=Ot,w=b.child,(b.subtreeFlags&1028)!==0&&w!==null)w.return=b,Ot=w;else for(;Ot!==null;){b=Ot;try{var E=b.alternate;if(b.flags&1024)switch(b.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var I=E.memoizedProps,B=E.memoizedState,q=b.stateNode,_e=q.getSnapshotBeforeUpdate(b.elementType===b.type?I:Ao(b.type,I),B);q.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:le&&ut(b.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Be){na(b,b.return,Be)}if(w=b.sibling,w!==null){w.return=b.return,Ot=w;break}Ot=b.return}return E=j7,j7=!1,E}function Kh(b,w,E){var I=w.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var B=I=I.next;do{if((B.tag&b)===b){var q=B.destroy;B.destroy=void 0,q!==void 0&&A3(w,E,q)}B=B.next}while(B!==I)}}function ox(b,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var E=w=w.next;do{if((E.tag&b)===b){var I=E.create;E.destroy=I()}E=E.next}while(E!==w)}}function I3(b){var w=b.ref;if(w!==null){var E=b.stateNode;switch(b.tag){case 5:b=z(E);break;default:b=E}typeof w=="function"?w(b):w.current=b}}function X7(b,w,E){if(Ia&&typeof Ia.onCommitFiberUnmount=="function")try{Ia.onCommitFiberUnmount(Wh,w)}catch{}switch(w.tag){case 0:case 11:case 14:case 15:if(b=w.updateQueue,b!==null&&(b=b.lastEffect,b!==null)){var I=b=b.next;do{var B=I,q=B.destroy;B=B.tag,q!==void 0&&(B&2||B&4)&&A3(w,E,q),I=I.next}while(I!==b)}break;case 1:if(h_(w,E),b=w.stateNode,typeof b.componentWillUnmount=="function")try{b.props=w.memoizedProps,b.state=w.memoizedState,b.componentWillUnmount()}catch(_e){na(w,E,_e)}break;case 5:h_(w,E);break;case 4:le?Q7(b,w,E):H&&H&&(w=w.stateNode.containerInfo,E=yt(w),It(w,E))}}function q7(b,w,E){for(var I=w;;)if(X7(b,I,E),I.child===null||le&&I.tag===4){if(I===w)break;for(;I.sibling===null;){if(I.return===null||I.return===w)return;I=I.return}I.sibling.return=I.return,I=I.sibling}else I.child.return=I,I=I.child}function Y7(b){var w=b.alternate;w!==null&&(b.alternate=null,Y7(w)),b.child=null,b.deletions=null,b.sibling=null,b.tag===5&&(w=b.stateNode,w!==null&&qe(w)),b.stateNode=null,b.return=null,b.dependencies=null,b.memoizedProps=null,b.memoizedState=null,b.pendingProps=null,b.stateNode=null,b.updateQueue=null}function K7(b){return b.tag===5||b.tag===3||b.tag===4}function Z7(b){e:for(;;){for(;b.sibling===null;){if(b.return===null||K7(b.return))return null;b=b.return}for(b.sibling.return=b.return,b=b.sibling;b.tag!==5&&b.tag!==6&&b.tag!==18;){if(b.flags&2||b.child===null||b.tag===4)continue e;b.child.return=b,b=b.child}if(!(b.flags&2))return b.stateNode}}function J7(b){if(le){e:{for(var w=b.return;w!==null;){if(K7(w))break e;w=w.return}throw Error(o(160))}var E=w;switch(E.tag){case 5:w=E.stateNode,E.flags&32&&(He(w),E.flags&=-33),E=Z7(b),N3(b,E,w);break;case 3:case 4:w=E.stateNode.containerInfo,E=Z7(b),R3(b,E,w);break;default:throw Error(o(161))}}}function R3(b,w,E){var I=b.tag;if(I===5||I===6)b=b.stateNode,w?Xe(E,b,w):De(E,b);else if(I!==4&&(b=b.child,b!==null))for(R3(b,w,E),b=b.sibling;b!==null;)R3(b,w,E),b=b.sibling}function N3(b,w,E){var I=b.tag;if(I===5||I===6)b=b.stateNode,w?Ye(E,b,w):Pe(E,b);else if(I!==4&&(b=b.child,b!==null))for(N3(b,w,E),b=b.sibling;b!==null;)N3(b,w,E),b=b.sibling}function Q7(b,w,E){for(var I=w,B=!1,q,_e;;){if(!B){B=I.return;e:for(;;){if(B===null)throw Error(o(160));switch(q=B.stateNode,B.tag){case 5:_e=!1;break e;case 3:q=q.containerInfo,_e=!0;break e;case 4:q=q.containerInfo,_e=!0;break e}B=B.return}B=!0}if(I.tag===5||I.tag===6)q7(b,I,E),_e?he(q,I.stateNode):Le(q,I.stateNode);else if(I.tag===18)_e?de(q,I.stateNode):Te(q,I.stateNode);else if(I.tag===4){if(I.child!==null){q=I.stateNode.containerInfo,_e=!0,I.child.return=I,I=I.child;continue}}else if(X7(b,I,E),I.child!==null){I.child.return=I,I=I.child;continue}if(I===w)break;for(;I.sibling===null;){if(I.return===null||I.return===w)return;I=I.return,I.tag===4&&(B=!1)}I.sibling.return=I.return,I=I.sibling}}function P3(b,w){if(le){switch(w.tag){case 0:case 11:case 14:case 15:Kh(3,w,w.return),ox(3,w),Kh(5,w,w.return);return;case 1:return;case 5:var E=w.stateNode;if(E!=null){var I=w.memoizedProps;b=b!==null?b.memoizedProps:I;var B=w.type,q=w.updateQueue;w.updateQueue=null,q!==null&&ct(E,q,B,b,I,w)}return;case 6:if(w.stateNode===null)throw Error(o(162));E=w.memoizedProps,We(w.stateNode,b!==null?b.memoizedProps:E,E);return;case 3:Me&&b!==null&&b.memoizedState.isDehydrated&&ie(w.stateNode.containerInfo);return;case 12:return;case 13:p_(w);return;case 19:p_(w);return;case 17:return}throw Error(o(163))}switch(w.tag){case 0:case 11:case 14:case 15:Kh(3,w,w.return),ox(3,w),Kh(5,w,w.return);return;case 12:return;case 13:p_(w);return;case 19:p_(w);return;case 3:Me&&b!==null&&b.memoizedState.isDehydrated&&ie(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(H){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,It(w.containerInfo,w.pendingChildren);break e}throw Error(o(163))}}function p_(b){var w=b.updateQueue;if(w!==null){b.updateQueue=null;var E=b.stateNode;E===null&&(E=b.stateNode=new gme),w.forEach(function(I){var B=Mme.bind(null,b,I);E.has(I)||(E.add(I),I.then(B,B))})}}function yme(b,w){for(Ot=w;Ot!==null;){w=Ot;var E=w.deletions;if(E!==null)for(var I=0;I<E.length;I++){var B=E[I];try{var q=b;le?Q7(q,B,w):q7(q,B,w);var _e=B.alternate;_e!==null&&(_e.return=null),B.return=null}catch(rn){na(B,w,rn)}}if(E=w.child,w.subtreeFlags&12854&&E!==null)E.return=w,Ot=E;else for(;Ot!==null;){w=Ot;try{var Be=w.flags;if(Be&32&&le&&He(w.stateNode),Be&512){var at=w.alternate;if(at!==null){var Tt=at.ref;Tt!==null&&(typeof Tt=="function"?Tt(null):Tt.current=null)}}if(Be&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var Xt=w.alternate;(Xt===null||Xt.memoizedState===null)&&(B3=di())}break;case 22:var An=w.memoizedState!==null,vn=w.alternate,Lr=vn!==null&&vn.memoizedState!==null;if(E=w,le){e:if(I=E,B=An,q=null,le)for(var ln=I;;){if(ln.tag===5){if(q===null){q=ln;var no=ln.stateNode;B?ot(no):Ie(ln.stateNode,ln.memoizedProps)}}else if(ln.tag===6){if(q===null){var gl=ln.stateNode;B?et(gl):Ce(gl,ln.memoizedProps)}}else if((ln.tag!==22&&ln.tag!==23||ln.memoizedState===null||ln===I)&&ln.child!==null){ln.child.return=ln,ln=ln.child;continue}if(ln===I)break;for(;ln.sibling===null;){if(ln.return===null||ln.return===I)break e;q===ln&&(q=null),ln=ln.return}q===ln&&(q=null),ln.sibling.return=ln.return,ln=ln.sibling}}if(An&&!Lr&&E.mode&1){Ot=E;for(var tt=E.child;tt!==null;){for(E=Ot=tt;Ot!==null;){I=Ot;var je=I.child;switch(I.tag){case 0:case 11:case 14:case 15:Kh(4,I,I.return);break;case 1:h_(I,I.return);var st=I.stateNode;if(typeof st.componentWillUnmount=="function"){var Vt=I.return;try{st.props=I.memoizedProps,st.state=I.memoizedState,st.componentWillUnmount()}catch(rn){na(I,Vt,rn)}}break;case 5:h_(I,I.return);break;case 22:if(I.memoizedState!==null){nW(E);continue}}je!==null?(je.return=I,Ot=je):nW(E)}tt=tt.sibling}}}switch(Be&4102){case 2:J7(w),w.flags&=-3;break;case 6:J7(w),w.flags&=-3,P3(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,P3(w.alternate,w);break;case 4:P3(w.alternate,w)}}catch(rn){na(w,w.return,rn)}if(E=w.sibling,E!==null){E.return=w.return,Ot=E;break}Ot=w.return}}}function xme(b,w,E){Ot=b,eW(b)}function eW(b,w,E){for(var I=(b.mode&1)!==0;Ot!==null;){var B=Ot,q=B.child;if(B.tag===22&&I){var _e=B.memoizedState!==null||f_;if(!_e){var Be=B.alternate,at=Be!==null&&Be.memoizedState!==null||Yh;Be=f_;var Tt=Yh;if(f_=_e,(Yh=at)&&!Tt)for(Ot=B;Ot!==null;)_e=Ot,at=_e.child,_e.tag===22&&_e.memoizedState!==null?rW(B):at!==null?(at.return=_e,Ot=at):rW(B);for(;q!==null;)Ot=q,eW(q),q=q.sibling;Ot=B,f_=Be,Yh=Tt}tW(b)}else B.subtreeFlags&8772&&q!==null?(q.return=B,Ot=q):tW(b)}}function tW(b){for(;Ot!==null;){var w=Ot;if(w.flags&8772){var E=w.alternate;try{if(w.flags&8772)switch(w.tag){case 0:case 11:case 15:Yh||ox(5,w);break;case 1:var I=w.stateNode;if(w.flags&4&&!Yh)if(E===null)I.componentDidMount();else{var B=w.elementType===w.type?E.memoizedProps:Ao(w.type,E.memoizedProps);I.componentDidUpdate(B,E.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var q=w.updateQueue;q!==null&&Y8(w,q,I);break;case 3:var _e=w.updateQueue;if(_e!==null){if(E=null,w.child!==null)switch(w.child.tag){case 5:E=z(w.child.stateNode);break;case 1:E=w.child.stateNode}Y8(w,_e,E)}break;case 5:var Be=w.stateNode;E===null&&w.flags&4&&gt(Be,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(Me&&w.memoizedState===null){var at=w.alternate;if(at!==null){var Tt=at.memoizedState;if(Tt!==null){var Xt=Tt.dehydrated;Xt!==null&&ce(Xt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Yh||w.flags&512&&I3(w)}catch(An){na(w,w.return,An)}}if(w===b){Ot=null;break}if(E=w.sibling,E!==null){E.return=w.return,Ot=E;break}Ot=w.return}}function nW(b){for(;Ot!==null;){var w=Ot;if(w===b){Ot=null;break}var E=w.sibling;if(E!==null){E.return=w.return,Ot=E;break}Ot=w.return}}function rW(b){for(;Ot!==null;){var w=Ot;try{switch(w.tag){case 0:case 11:case 15:var E=w.return;try{ox(4,w)}catch(at){na(w,E,at)}break;case 1:var I=w.stateNode;if(typeof I.componentDidMount=="function"){var B=w.return;try{I.componentDidMount()}catch(at){na(w,B,at)}}var q=w.return;try{I3(w)}catch(at){na(w,q,at)}break;case 5:var _e=w.return;try{I3(w)}catch(at){na(w,_e,at)}}}catch(at){na(w,w.return,at)}if(w===b){Ot=null;break}var Be=w.sibling;if(Be!==null){Be.return=w.return,Ot=Be;break}Ot=w.return}}var m_=0,g_=1,v_=2,y_=3,x_=4;if(typeof Symbol=="function"&&Symbol.for){var ax=Symbol.for;m_=ax("selector.component"),g_=ax("selector.has_pseudo_class"),v_=ax("selector.role"),y_=ax("selector.test_id"),x_=ax("selector.text")}function $3(b){var w=we(b);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(o(364));return w}if(b=oe(b),b===null)throw Error(o(362));return b.stateNode.current}function D3(b,w){switch(w.$$typeof){case m_:if(b.type===w.value)return!0;break;case g_:e:{w=w.value,b=[b,0];for(var E=0;E<b.length;){var I=b[E++],B=b[E++],q=w[B];if(I.tag!==5||!be(I)){for(;q!=null&&D3(I,q);)B++,q=w[B];if(B===w.length){w=!0;break e}else for(I=I.child;I!==null;)b.push(I,B),I=I.sibling}}w=!1}return w;case v_:if(b.tag===5&&Re(b.stateNode,w.value))return!0;break;case x_:if((b.tag===5||b.tag===6)&&(b=Se(b),b!==null&&0<=b.indexOf(w.value)))return!0;break;case y_:if(b.tag===5&&(b=b.memoizedProps["data-testname"],typeof b=="string"&&b.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function L3(b){switch(b.$$typeof){case m_:return"<"+(T(b.value)||"Unknown")+">";case g_:return":has("+(L3(b)||"")+")";case v_:return'[role="'+b.value+'"]';case x_:return'"'+b.value+'"';case y_:return'[data-testname="'+b.value+'"]';default:throw Error(o(365))}}function iW(b,w){var E=[];b=[b,0];for(var I=0;I<b.length;){var B=b[I++],q=b[I++],_e=w[q];if(B.tag!==5||!be(B)){for(;_e!=null&&D3(B,_e);)q++,_e=w[q];if(q===w.length)E.push(B);else for(B=B.child;B!==null;)b.push(B,q),B=B.sibling}}return E}function O3(b,w){if(!Y)throw Error(o(363));b=$3(b),b=iW(b,w),w=[],b=Array.from(b);for(var E=0;E<b.length;){var I=b[E++];if(I.tag===5)be(I)||w.push(I.stateNode);else for(I=I.child;I!==null;)b.push(I),I=I.sibling}return w}var bme=Math.ceil,b_=a.ReactCurrentDispatcher,F3=a.ReactCurrentOwner,Li=a.ReactCurrentBatchConfig,Gn=0,Gi=null,Hi=null,Fs=0,La=0,Mg=gn(0),os=0,lx=null,kg=0,w_=0,U3=0,cx=null,ea=null,B3=0,z3=1/0;function Ag(){z3=di()+500}var S_=!1,W3=null,of=null,__=!1,af=null,C_=0,ux=0,V3=null,T_=-1,E_=0;function No(){return Gn&6?di():T_!==-1?T_:T_=di()}function lf(b){return b.mode&1?Gn&2&&Fs!==0?Fs&-Fs:Vh.transition!==null?(E_===0&&(b=Ju,Ju<<=1,!(Ju&4194240)&&(Ju=64),E_=b),E_):(b=jn,b!==0?b:me()):1}function pl(b,w,E){if(50<ux)throw ux=0,V3=null,Error(o(185));var I=M_(b,w);return I===null?null:(Hc(I,w,E),(!(Gn&2)||I!==Gi)&&(I===Gi&&(!(Gn&2)&&(w_|=w),os===4&&cf(I,Fs)),ta(I,E),w===1&&Gn===0&&!(b.mode&1)&&(Ag(),Xc&&Qo())),I)}function M_(b,w){b.lanes|=w;var E=b.alternate;for(E!==null&&(E.lanes|=w),E=b,b=b.return;b!==null;)b.childLanes|=w,E=b.alternate,E!==null&&(E.childLanes|=w),E=b,b=b.return;return E.tag===3?E.stateNode:null}function ta(b,w){var E=b.callbackNode;zy(b,w);var I=Bh(b,b===Gi?Fs:0);if(I===0)E!==null&&vg(E),b.callbackNode=null,b.callbackPriority=0;else if(w=I&-I,b.callbackPriority!==w){if(E!=null&&vg(E),w===1)b.tag===0?Xy(oW.bind(null,b)):jy(oW.bind(null,b)),ke?ee(function(){Gn===0&&Qo()}):nd(zh,Qo),E=null;else{switch(Wy(I)){case 1:E=zh;break;case 4:E=GS;break;case 16:E=Mo;break;case 536870912:E=Gy;break;default:E=Mo}E=mW(E,sW.bind(null,b))}b.callbackPriority=w,b.callbackNode=E}}function sW(b,w){if(T_=-1,E_=0,Gn&6)throw Error(o(327));var E=b.callbackNode;if(Qh()&&b.callbackNode!==E)return null;var I=Bh(b,b===Gi?Fs:0);if(I===0)return null;if(I&30||I&b.expiredLanes||w)w=k_(b,I);else{w=I;var B=Gn;Gn|=2;var q=cW();(Gi!==b||Fs!==w)&&(Ag(),Zh(b,w));do try{_me();break}catch(Be){lW(b,Be)}while(!0);xg(),b_.current=q,Gn=B,Hi!==null?w=0:(Gi=null,Fs=0,w=os)}if(w!==0){if(w===2&&(B=td(b),B!==0&&(I=B,w=G3(b,B))),w===1)throw E=lx,Zh(b,0),cf(b,I),ta(b,di()),E;if(w===6)cf(b,I);else{if(B=b.current.alternate,!(I&30)&&!wme(B)&&(w=k_(b,I),w===2&&(q=td(b),q!==0&&(I=q,w=G3(b,q))),w===1))throw E=lx,Zh(b,0),cf(b,I),ta(b,di()),E;switch(b.finishedWork=B,b.finishedLanes=I,w){case 0:case 1:throw Error(o(345));case 2:Jh(b,ea);break;case 3:if(cf(b,I),(I&130023424)===I&&(w=B3+500-di(),10<w)){if(Bh(b,0)!==0)break;if(B=b.suspendedLanes,(B&I)!==I){No(),b.pingedLanes|=b.suspendedLanes&B;break}b.timeoutHandle=se(Jh.bind(null,b,ea),w);break}Jh(b,ea);break;case 4:if(cf(b,I),(I&4194240)===I)break;for(w=b.eventTimes,B=-1;0<I;){var _e=31-Nr(I);q=1<<_e,_e=w[_e],_e>B&&(B=_e),I&=~q}if(I=B,I=di()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*bme(I/1960))-I,10<I){b.timeoutHandle=se(Jh.bind(null,b,ea),I);break}Jh(b,ea);break;case 5:Jh(b,ea);break;default:throw Error(o(329))}}}return ta(b,di()),b.callbackNode===E?sW.bind(null,b):null}function G3(b,w){var E=cx;return b.current.memoizedState.isDehydrated&&(Zh(b,w).flags|=256),b=k_(b,w),b!==2&&(w=ea,ea=E,w!==null&&H3(w)),b}function H3(b){ea===null?ea=b:ea.push.apply(ea,b)}function wme(b){for(var w=b;;){if(w.flags&16384){var E=w.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var I=0;I<E.length;I++){var B=E[I],q=B.getSnapshot;B=B.value;try{if(!Ra(q(),B))return!1}catch{return!1}}}if(E=w.child,w.subtreeFlags&16384&&E!==null)E.return=w,w=E;else{if(w===b)break;for(;w.sibling===null;){if(w.return===null||w.return===b)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function cf(b,w){for(w&=~U3,w&=~w_,b.suspendedLanes|=w,b.pingedLanes&=~w,b=b.expirationTimes;0<w;){var E=31-Nr(w),I=1<<E;b[E]=-1,w&=~I}}function oW(b){if(Gn&6)throw Error(o(327));Qh();var w=Bh(b,0);if(!(w&1))return ta(b,di()),null;var E=k_(b,w);if(b.tag!==0&&E===2){var I=td(b);I!==0&&(w=I,E=G3(b,I))}if(E===1)throw E=lx,Zh(b,0),cf(b,w),ta(b,di()),E;if(E===6)throw Error(o(345));return b.finishedWork=b.current.alternate,b.finishedLanes=w,Jh(b,ea),ta(b,di()),null}function aW(b){af!==null&&af.tag===0&&!(Gn&6)&&Qh();var w=Gn;Gn|=1;var E=Li.transition,I=jn;try{if(Li.transition=null,jn=1,b)return b()}finally{jn=I,Li.transition=E,Gn=w,!(Gn&6)&&Qo()}}function j3(){La=Mg.current,Pt(Mg)}function Zh(b,w){b.finishedWork=null,b.finishedLanes=0;var E=b.timeoutHandle;if(E!==ae&&(b.timeoutHandle=ae,fe(E)),Hi!==null)for(E=Hi.return;E!==null;){var I=E;switch(c3(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&_n();break;case 3:Tg(),Pt(cn),Pt(en),g3();break;case 5:p3(I);break;case 4:Tg();break;case 13:Pt(fi);break;case 19:Pt(fi);break;case 10:ws(I.type._context);break;case 22:case 23:j3()}E=E.return}if(Gi=b,Hi=b=uf(b.current,null),Fs=La=w,os=0,lx=null,U3=w_=kg=0,ea=cx=null,Na!==null){for(w=0;w<Na.length;w++)if(E=Na[w],I=E.interleaved,I!==null){E.interleaved=null;var B=I.next,q=E.pending;if(q!==null){var _e=q.next;q.next=B,I.next=_e}E.pending=I}Na=null}return b}function lW(b,w){do{var E=Hi;try{if(xg(),e_.current=o_,t_){for(var I=yi.memoizedState;I!==null;){var B=I.queue;B!==null&&(B.pending=null),I=I.next}t_=!1}if(Eg=0,Ss=Qs=yi=null,Qy=!1,ex=0,F3.current=null,E===null||E.return===null){os=1,lx=w,Hi=null;break}e:{var q=b,_e=E.return,Be=E,at=w;if(w=Fs,Be.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var Tt=at,Xt=Be,An=Xt.tag;if(!(Xt.mode&1)&&(An===0||An===11||An===15)){var vn=Xt.alternate;vn?(Xt.updateQueue=vn.updateQueue,Xt.memoizedState=vn.memoizedState,Xt.lanes=vn.lanes):(Xt.updateQueue=null,Xt.memoizedState=null)}var Lr=A7(_e);if(Lr!==null){Lr.flags&=-257,I7(Lr,_e,Be,q,w),Lr.mode&1&&k7(q,Tt,w),w=Lr,at=Tt;var ln=w.updateQueue;if(ln===null){var no=new Set;no.add(at),w.updateQueue=no}else ln.add(at);break e}else{if(!(w&1)){k7(q,Tt,w),X3();break e}at=Error(o(426))}}else if(ri&&Be.mode&1){var gl=A7(_e);if(gl!==null){!(gl.flags&65536)&&(gl.flags|=256),I7(gl,_e,Be,q,w),f3(at);break e}}q=at,os!==4&&(os=2),cx===null?cx=[q]:cx.push(q),at=_3(at,Be),Be=_e;do{switch(Be.tag){case 3:Be.flags|=65536,w&=-w,Be.lanes|=w;var tt=E7(Be,at,w);q8(Be,tt);break e;case 1:q=at;var je=Be.type,st=Be.stateNode;if(!(Be.flags&128)&&(typeof je.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(of===null||!of.has(st)))){Be.flags|=65536,w&=-w,Be.lanes|=w;var Vt=M7(Be,q,w);q8(Be,Vt);break e}}Be=Be.return}while(Be!==null)}dW(E)}catch(rn){w=rn,Hi===E&&E!==null&&(Hi=E=E.return);continue}break}while(!0)}function cW(){var b=b_.current;return b_.current=o_,b===null?o_:b}function X3(){(os===0||os===3||os===2)&&(os=4),Gi===null||!(kg&268435455)&&!(w_&268435455)||cf(Gi,Fs)}function k_(b,w){var E=Gn;Gn|=2;var I=cW();Gi===b&&Fs===w||Zh(b,w);do try{Sme();break}catch(B){lW(b,B)}while(!0);if(xg(),Gn=E,b_.current=I,Hi!==null)throw Error(o(261));return Gi=null,Fs=0,os}function Sme(){for(;Hi!==null;)uW(Hi)}function _me(){for(;Hi!==null&&!Vy();)uW(Hi)}function uW(b){var w=pW(b.alternate,b,La);b.memoizedProps=b.pendingProps,w===null?dW(b):Hi=w,F3.current=null}function dW(b){var w=b;do{var E=w.alternate;if(b=w.return,w.flags&32768){if(E=mme(E,w),E!==null){E.flags&=32767,Hi=E;return}if(b!==null)b.flags|=32768,b.subtreeFlags=0,b.deletions=null;else{os=6,Hi=null;return}}else if(E=fme(E,w,La),E!==null){Hi=E;return}if(w=w.sibling,w!==null){Hi=w;return}Hi=w=b}while(w!==null);os===0&&(os=5)}function Jh(b,w){var E=jn,I=Li.transition;try{Li.transition=null,jn=1,Cme(b,w,E)}finally{Li.transition=I,jn=E}return null}function Cme(b,w,E){do Qh();while(af!==null);if(Gn&6)throw Error(o(327));var I=b.finishedWork,B=b.finishedLanes;if(I===null)return null;if(b.finishedWork=null,b.finishedLanes=0,I===b.current)throw Error(o(177));b.callbackNode=null,b.callbackPriority=0;var q=I.lanes|I.childLanes;if(tf(b,q),b===Gi&&(Hi=Gi=null,Fs=0),!(I.subtreeFlags&2064)&&!(I.flags&2064)||__||(__=!0,mW(Mo,function(){return Qh(),null})),q=(I.flags&15990)!==0,I.subtreeFlags&15990||q){q=Li.transition,Li.transition=null;var _e=jn;jn=1;var Be=Gn;Gn|=4,F3.current=null,vme(b,I),yme(b,I),W(b.containerInfo),b.current=I,xme(I),VS(),Gn=Be,jn=_e,Li.transition=q}else b.current=I;if(__&&(__=!1,af=b,C_=B),q=b.pendingLanes,q===0&&(of=null),Hy(I.stateNode),ta(b,di()),w!==null)for(E=b.onRecoverableError,I=0;I<w.length;I++)E(w[I]);if(S_)throw S_=!1,b=W3,W3=null,b;return C_&1&&b.tag!==0&&Qh(),q=b.pendingLanes,q&1?b===V3?ux++:(ux=0,V3=b):ux=0,Qo(),null}function Qh(){if(af!==null){var b=Wy(C_),w=Li.transition,E=jn;try{if(Li.transition=null,jn=16>b?16:b,af===null)var I=!1;else{if(b=af,af=null,C_=0,Gn&6)throw Error(o(331));var B=Gn;for(Gn|=4,Ot=b.current;Ot!==null;){var q=Ot,_e=q.child;if(Ot.flags&16){var Be=q.deletions;if(Be!==null){for(var at=0;at<Be.length;at++){var Tt=Be[at];for(Ot=Tt;Ot!==null;){var Xt=Ot;switch(Xt.tag){case 0:case 11:case 15:Kh(8,Xt,q)}var An=Xt.child;if(An!==null)An.return=Xt,Ot=An;else for(;Ot!==null;){Xt=Ot;var vn=Xt.sibling,Lr=Xt.return;if(Y7(Xt),Xt===Tt){Ot=null;break}if(vn!==null){vn.return=Lr,Ot=vn;break}Ot=Lr}}}var ln=q.alternate;if(ln!==null){var no=ln.child;if(no!==null){ln.child=null;do{var gl=no.sibling;no.sibling=null,no=gl}while(no!==null)}}Ot=q}}if(q.subtreeFlags&2064&&_e!==null)_e.return=q,Ot=_e;else e:for(;Ot!==null;){if(q=Ot,q.flags&2048)switch(q.tag){case 0:case 11:case 15:Kh(9,q,q.return)}var tt=q.sibling;if(tt!==null){tt.return=q.return,Ot=tt;break e}Ot=q.return}}var je=b.current;for(Ot=je;Ot!==null;){_e=Ot;var st=_e.child;if(_e.subtreeFlags&2064&&st!==null)st.return=_e,Ot=st;else e:for(_e=je;Ot!==null;){if(Be=Ot,Be.flags&2048)try{switch(Be.tag){case 0:case 11:case 15:ox(9,Be)}}catch(rn){na(Be,Be.return,rn)}if(Be===_e){Ot=null;break e}var Vt=Be.sibling;if(Vt!==null){Vt.return=Be.return,Ot=Vt;break e}Ot=Be.return}}if(Gn=B,Qo(),Ia&&typeof Ia.onPostCommitFiberRoot=="function")try{Ia.onPostCommitFiberRoot(Wh,b)}catch{}I=!0}return I}finally{jn=E,Li.transition=w}}return!1}function fW(b,w,E){w=_3(E,w),w=E7(b,w,1),sf(b,w),w=No(),b=M_(b,1),b!==null&&(Hc(b,1,w),ta(b,w))}function na(b,w,E){if(b.tag===3)fW(b,b,E);else for(;w!==null;){if(w.tag===3){fW(w,b,E);break}else if(w.tag===1){var I=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(of===null||!of.has(I))){b=_3(E,b),b=M7(w,b,1),sf(w,b),b=No(),w=M_(w,1),w!==null&&(Hc(w,1,b),ta(w,b));break}}w=w.return}}function Tme(b,w,E){var I=b.pingCache;I!==null&&I.delete(w),w=No(),b.pingedLanes|=b.suspendedLanes&E,Gi===b&&(Fs&E)===E&&(os===4||os===3&&(Fs&130023424)===Fs&&500>di()-B3?Zh(b,0):U3|=E),ta(b,w)}function hW(b,w){w===0&&(b.mode&1?(w=Qu,Qu<<=1,!(Qu&130023424)&&(Qu=4194304)):w=1);var E=No();b=M_(b,w),b!==null&&(Hc(b,w,E),ta(b,E))}function Eme(b){var w=b.memoizedState,E=0;w!==null&&(E=w.retryLane),hW(b,E)}function Mme(b,w){var E=0;switch(b.tag){case 13:var I=b.stateNode,B=b.memoizedState;B!==null&&(E=B.retryLane);break;case 19:I=b.stateNode;break;default:throw Error(o(314))}I!==null&&I.delete(w),hW(b,E)}var pW;pW=function(b,w,E){if(b!==null)if(b.memoizedProps!==w.pendingProps||cn.current)Da=!0;else{if(!(b.lanes&E)&&!(w.flags&128))return Da=!1,pme(b,w,E);Da=!!(b.flags&131072)}else Da=!1,ri&&w.flags&1048576&&e7(w,ZS,w.index);switch(w.lanes=0,w.tag){case 2:var I=w.type;b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),b=w.pendingProps;var B=Fn(w,en.current);$i(w,E),B=y3(null,w,I,b,B,E);var q=x3();return w.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,Hn(I)?(q=!0,nn(w)):q=!1,w.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,s3(w),B.updater=YS,w.stateNode=B,B._reactInternals=w,a3(w,I,b,E),w=E3(null,w,I,!0,q,E)):(w.tag=0,ri&&q&&l3(w),Ro(null,w,B,E),w=w.child),w;case 16:I=w.elementType;e:{switch(b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),b=w.pendingProps,B=I._init,I=B(I._payload),w.type=I,B=w.tag=Ame(I),b=Ao(I,b),B){case 0:w=T3(null,w,I,b,E);break e;case 1:w=F7(null,w,I,b,E);break e;case 11:w=P7(null,w,I,b,E);break e;case 14:w=$7(null,w,I,Ao(I.type,b),E);break e}throw Error(o(306,I,""))}return w;case 0:return I=w.type,B=w.pendingProps,B=w.elementType===I?B:Ao(I,B),T3(b,w,I,B,E);case 1:return I=w.type,B=w.pendingProps,B=w.elementType===I?B:Ao(I,B),F7(b,w,I,B,E);case 3:e:{if(U7(w),b===null)throw Error(o(387));I=w.pendingProps,q=w.memoizedState,B=q.element,X8(b,w),qS(w,I,null,E);var _e=w.memoizedState;if(I=_e.element,Me&&q.isDehydrated)if(q={element:I,isDehydrated:!1,cache:_e.cache,transitions:_e.transitions},w.updateQueue.baseState=q,w.memoizedState=q,w.flags&256){B=Error(o(423)),w=B7(b,w,I,E,B);break e}else if(I!==B){B=Error(o(424)),w=B7(b,w,I,E,B);break e}else for(Me&&($a=Wt(w.stateNode.containerInfo),Pa=w,ri=!0,nc=null,qy=!1),E=o7(w,null,I,E),w.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(Sg(),I===B){w=ad(b,w,E);break e}Ro(b,w,I,E)}w=w.child}return w;case 5:return a7(w),b===null&&d3(w),I=w.type,B=w.pendingProps,q=b!==null?b.memoizedProps:null,_e=B.children,te(I,B)?_e=null:q!==null&&te(I,q)&&(w.flags|=32),O7(b,w),Ro(b,w,_e,E),w.child;case 6:return b===null&&d3(w),null;case 13:return z7(b,w,E);case 4:return h3(w,w.stateNode.containerInfo),I=w.pendingProps,b===null?w.child=_g(w,null,I,E):Ro(b,w,I,E),w.child;case 11:return I=w.type,B=w.pendingProps,B=w.elementType===I?B:Ao(I,B),P7(b,w,I,B,E);case 7:return Ro(b,w,w.pendingProps,E),w.child;case 8:return Ro(b,w,w.pendingProps.children,E),w.child;case 12:return Ro(b,w,w.pendingProps.children,E),w.child;case 10:e:{if(I=w.type._context,B=w.pendingProps,q=w.memoizedProps,_e=B.value,jS(w,I,_e),q!==null)if(Ra(q.value,_e)){if(q.children===B.children&&!cn.current){w=ad(b,w,E);break e}}else for(q=w.child,q!==null&&(q.return=w);q!==null;){var Be=q.dependencies;if(Be!==null){_e=q.child;for(var at=Be.firstContext;at!==null;){if(at.context===I){if(q.tag===1){at=rd(-1,E&-E),at.tag=2;var Tt=q.updateQueue;if(Tt!==null){Tt=Tt.shared;var Xt=Tt.pending;Xt===null?at.next=at:(at.next=Xt.next,Xt.next=at),Tt.pending=at}}q.lanes|=E,at=q.alternate,at!==null&&(at.lanes|=E),Io(q.return,E,w),Be.lanes|=E;break}at=at.next}}else if(q.tag===10)_e=q.type===w.type?null:q.child;else if(q.tag===18){if(_e=q.return,_e===null)throw Error(o(341));_e.lanes|=E,Be=_e.alternate,Be!==null&&(Be.lanes|=E),Io(_e,E,w),_e=q.sibling}else _e=q.child;if(_e!==null)_e.return=q;else for(_e=q;_e!==null;){if(_e===w){_e=null;break}if(q=_e.sibling,q!==null){q.return=_e.return,_e=q;break}_e=_e.return}q=_e}Ro(b,w,B.children,E),w=w.child}return w;case 9:return B=w.type,I=w.pendingProps.children,$i(w,E),B=Di(B),I=I(B),w.flags|=1,Ro(b,w,I,E),w.child;case 14:return I=w.type,B=Ao(I,w.pendingProps),B=Ao(I.type,B),$7(b,w,I,B,E);case 15:return D7(b,w,w.type,w.pendingProps,E);case 17:return I=w.type,B=w.pendingProps,B=w.elementType===I?B:Ao(I,B),b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,Hn(I)?(b=!0,nn(w)):b=!1,$i(w,E),J8(w,I,B),a3(w,I,B,E),E3(null,w,I,!0,b,E);case 19:return H7(b,w,E);case 22:return L7(b,w,E)}throw Error(o(156,w.tag))};function mW(b,w){return nd(b,w)}function kme(b,w,E,I){this.tag=b,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ml(b,w,E,I){return new kme(b,w,E,I)}function q3(b){return b=b.prototype,!(!b||!b.isReactComponent)}function Ame(b){if(typeof b=="function")return q3(b)?1:0;if(b!=null){if(b=b.$$typeof,b===v)return 11;if(b===y)return 14}return 2}function uf(b,w){var E=b.alternate;return E===null?(E=ml(b.tag,w,b.key,b.mode),E.elementType=b.elementType,E.type=b.type,E.stateNode=b.stateNode,E.alternate=b,b.alternate=E):(E.pendingProps=w,E.type=b.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=b.flags&14680064,E.childLanes=b.childLanes,E.lanes=b.lanes,E.child=b.child,E.memoizedProps=b.memoizedProps,E.memoizedState=b.memoizedState,E.updateQueue=b.updateQueue,w=b.dependencies,E.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},E.sibling=b.sibling,E.index=b.index,E.ref=b.ref,E}function A_(b,w,E,I,B,q){var _e=2;if(I=b,typeof b=="function")q3(b)&&(_e=1);else if(typeof b=="string")_e=5;else e:switch(b){case u:return ep(E.children,B,q,w);case d:_e=8,B|=8;break;case f:return b=ml(12,E,w,B|2),b.elementType=f,b.lanes=q,b;case m:return b=ml(13,E,w,B),b.elementType=m,b.lanes=q,b;case g:return b=ml(19,E,w,B),b.elementType=g,b.lanes=q,b;case S:return I_(E,B,q,w);default:if(typeof b=="object"&&b!==null)switch(b.$$typeof){case h:_e=10;break e;case p:_e=9;break e;case v:_e=11;break e;case y:_e=14;break e;case x:_e=16,I=null;break e}throw Error(o(130,b==null?b:typeof b,""))}return w=ml(_e,E,w,B),w.elementType=b,w.type=I,w.lanes=q,w}function ep(b,w,E,I){return b=ml(7,b,I,w),b.lanes=E,b}function I_(b,w,E,I){return b=ml(22,b,I,w),b.elementType=S,b.lanes=E,b.stateNode={},b}function Y3(b,w,E){return b=ml(6,b,null,w),b.lanes=E,b}function K3(b,w,E){return w=ml(4,b.children!==null?b.children:[],b.key,w),w.lanes=E,w.stateNode={containerInfo:b.containerInfo,pendingChildren:null,implementation:b.implementation},w}function Ime(b,w,E,I,B){this.tag=w,this.containerInfo=b,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ae,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gg(0),this.expirationTimes=gg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gg(0),this.identifierPrefix=I,this.onRecoverableError=B,Me&&(this.mutableSourceEagerHydrationData=null)}function gW(b,w,E,I,B,q,_e,Be,at){return b=new Ime(b,w,E,Be,at),w===1?(w=1,q===!0&&(w|=8)):w=0,q=ml(3,null,null,w),b.current=q,q.stateNode=b,q.memoizedState={element:I,isDehydrated:E,cache:null,transitions:null},s3(q),b}function vW(b){if(!b)return Cn;b=b._reactInternals;e:{if(k(b)!==b||b.tag!==1)throw Error(o(170));var w=b;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(Hn(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(o(171))}if(b.tag===1){var E=b.type;if(Hn(E))return Yn(b,E,w)}return w}function yW(b){var w=b._reactInternals;if(w===void 0)throw typeof b.render=="function"?Error(o(188)):(b=Object.keys(b).join(","),Error(o(268,b)));return b=P(w),b===null?null:b.stateNode}function xW(b,w){if(b=b.memoizedState,b!==null&&b.dehydrated!==null){var E=b.retryLane;b.retryLane=E!==0&&E<w?E:w}}function Z3(b,w){xW(b,w),(b=b.alternate)&&xW(b,w)}function Rme(b){return b=P(b),b===null?null:b.stateNode}function Nme(){return null}return n.attemptContinuousHydration=function(b){if(b.tag===13){var w=No();pl(b,134217728,w),Z3(b,134217728)}},n.attemptHydrationAtCurrentPriority=function(b){if(b.tag===13){var w=No(),E=lf(b);pl(b,E,w),Z3(b,E)}},n.attemptSynchronousHydration=function(b){switch(b.tag){case 3:var w=b.stateNode;if(w.current.memoizedState.isDehydrated){var E=ed(w.pendingLanes);E!==0&&(jc(w,E|1),ta(w,di()),!(Gn&6)&&(Ag(),Qo()))}break;case 13:var I=No();aW(function(){return pl(b,1,I)}),Z3(b,1)}},n.batchedUpdates=function(b,w){var E=Gn;Gn|=1;try{return b(w)}finally{Gn=E,Gn===0&&(Ag(),Xc&&Qo())}},n.createComponentSelector=function(b){return{$$typeof:m_,value:b}},n.createContainer=function(b,w,E,I,B,q,_e){return gW(b,w,!1,null,E,I,B,q,_e)},n.createHasPseudoClassSelector=function(b){return{$$typeof:g_,value:b}},n.createHydrationContainer=function(b,w,E,I,B,q,_e,Be,at){return b=gW(E,I,!0,b,B,q,_e,Be,at),b.context=vW(null),E=b.current,I=No(),B=lf(E),q=rd(I,B),q.callback=w??null,sf(E,q),b.current.lanes=B,Hc(b,B,I),ta(b,I),b},n.createPortal=function(b,w,E){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:I==null?null:""+I,children:b,containerInfo:w,implementation:E}},n.createRoleSelector=function(b){return{$$typeof:v_,value:b}},n.createTestNameSelector=function(b){return{$$typeof:y_,value:b}},n.createTextSelector=function(b){return{$$typeof:x_,value:b}},n.deferredUpdates=function(b){var w=jn,E=Li.transition;try{return Li.transition=null,jn=16,b()}finally{jn=w,Li.transition=E}},n.discreteUpdates=function(b,w,E,I,B){var q=jn,_e=Li.transition;try{return Li.transition=null,jn=1,b(w,E,I,B)}finally{jn=q,Li.transition=_e,Gn===0&&Ag()}},n.findAllNodes=O3,n.findBoundingRects=function(b,w){if(!Y)throw Error(o(363));w=O3(b,w),b=[];for(var E=0;E<w.length;E++)b.push(xe(w[E]));for(w=b.length-1;0<w;w--){E=b[w];for(var I=E.x,B=I+E.width,q=E.y,_e=q+E.height,Be=w-1;0<=Be;Be--)if(w!==Be){var at=b[Be],Tt=at.x,Xt=Tt+at.width,An=at.y,vn=An+at.height;if(I>=Tt&&q>=An&&B<=Xt&&_e<=vn){b.splice(w,1);break}else if(I!==Tt||E.width!==at.width||vn<q||An>_e){if(!(q!==An||E.height!==at.height||Xt<I||Tt>B)){Tt>I&&(at.width+=Tt-I,at.x=I),Xt<B&&(at.width=B-Tt),b.splice(w,1);break}}else{An>q&&(at.height+=An-q,at.y=q),vn<_e&&(at.height=_e-An),b.splice(w,1);break}}}return b},n.findHostInstance=yW,n.findHostInstanceWithNoPortals=function(b){return b=R(b),b=b!==null?$(b):null,b===null?null:b.stateNode},n.findHostInstanceWithWarning=function(b){return yW(b)},n.flushControlled=function(b){var w=Gn;Gn|=1;var E=Li.transition,I=jn;try{Li.transition=null,jn=1,b()}finally{jn=I,Li.transition=E,Gn=w,Gn===0&&(Ag(),Qo())}},n.flushPassiveEffects=Qh,n.flushSync=aW,n.focusWithin=function(b,w){if(!Y)throw Error(o(363));for(b=$3(b),w=iW(b,w),w=Array.from(w),b=0;b<w.length;){var E=w[b++];if(!be(E)){if(E.tag===5&&Ke(E.stateNode))return!0;for(E=E.child;E!==null;)w.push(E),E=E.sibling}}return!1},n.getCurrentUpdatePriority=function(){return jn},n.getFindAllNodesFailureDescription=function(b,w){if(!Y)throw Error(o(363));var E=0,I=[];b=[$3(b),0];for(var B=0;B<b.length;){var q=b[B++],_e=b[B++],Be=w[_e];if((q.tag!==5||!be(q))&&(D3(q,Be)&&(I.push(L3(Be)),_e++,_e>E&&(E=_e)),_e<w.length))for(q=q.child;q!==null;)b.push(q,_e),q=q.sibling}if(E<w.length){for(b=[];E<w.length;E++)b.push(L3(w[E]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+b.join(" > ")}return null},n.getPublicRootInstance=function(b){if(b=b.current,!b.child)return null;switch(b.child.tag){case 5:return z(b.child.stateNode);default:return b.child.stateNode}},n.injectIntoDevTools=function(b){if(b={bundleType:b.bundleType,version:b.version,rendererPackageName:b.rendererPackageName,rendererConfig:b.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Rme,findFiberByHostInstance:b.findFiberByHostInstance||Nme,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")b=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)b=!0;else{try{Wh=w.inject(b),Ia=w}catch{}b=!!w.checkDCE}}return b},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(b,w,E,I){if(!Y)throw Error(o(363));b=O3(b,w);var B=ze(b,E,I).disconnect;return{disconnect:function(){B()}}},n.registerMutableSourceForHydration=function(b,w){var E=w._getVersion;E=E(w._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[w,E]:b.mutableSourceEagerHydrationData.push(w,E)},n.runWithPriority=function(b,w){var E=jn;try{return jn=b,w()}finally{jn=E}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(b,w,E,I){var B=w.current,q=No(),_e=lf(B);return E=vW(E),w.context===null?w.context=E:w.pendingContext=E,w=rd(q,_e),w.payload={element:b},I=I===void 0?null:I,I!==null&&(w.callback=I),sf(B,w),b=pl(B,_e,q),b!==null&&XS(b,B,_e),_e},n};bae.exports=kQe;var AQe=bae.exports;const IQe=is(AQe);var wae={exports:{}},Sae={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,F){var W=D.length;D.push(F);e:for(;0<W;){var V=W-1>>>1,j=D[V];if(0<i(j,F))D[V]=F,D[W]=j,W=V;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var F=D[0],W=D.pop();if(W!==F){D[0]=W;e:for(var V=0,j=D.length,J=j>>>1;V<J;){var Q=2*(V+1)-1,te=D[Q],re=Q+1,se=D[re];if(0>i(te,W))re<j&&0>i(se,te)?(D[V]=se,D[re]=W,V=re):(D[V]=te,D[Q]=W,V=Q);else if(re<j&&0>i(se,W))D[V]=se,D[re]=W,V=re;else break e}}return F}function i(D,F){var W=D.sortIndex-F.sortIndex;return W!==0?W:D.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=D)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function S(D){if(v=!1,x(D),!p)if(n(l)!==null)p=!0,z(_);else{var F=n(c);F!==null&&X(S,F.startTime-D)}}function _(D,F){p=!1,v&&(v=!1,g(A),A=-1),h=!0;var W=f;try{for(x(F),d=n(l);d!==null&&(!(d.expirationTime>F)||D&&!R());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var j=V(d.expirationTime<=F);F=t.unstable_now(),typeof j=="function"?d.callback=j:d===n(l)&&r(l),x(F)}else r(l);d=n(l)}if(d!==null)var J=!0;else{var Q=n(c);Q!==null&&X(S,Q.startTime-F),J=!1}return J}finally{d=null,f=W,h=!1}}var C=!1,T=null,A=-1,k=5,M=-1;function R(){return!(t.unstable_now()-M<k)}function P(){if(T!==null){var D=t.unstable_now();M=D;var F=!0;try{F=T(!0,D)}finally{F?O():(C=!1,T=null)}}else C=!1}var O;if(typeof y=="function")O=function(){y(P)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,U=$.port2;$.port1.onmessage=P,O=function(){U.postMessage(null)}}else O=function(){m(P,0)};function z(D){T=D,C||(C=!0,O())}function X(D,F){A=m(function(){D(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,z(_))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var W=f;f=F;try{return D()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var W=f;f=D;try{return F()}finally{f=W}},t.unstable_scheduleCallback=function(D,F,W){var V=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?V+W:V):W=V,D){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=W+j,D={id:u++,callback:F,priorityLevel:D,startTime:W,expirationTime:j,sortIndex:-1},W>V?(D.sortIndex=W,e(c,D),n(l)===null&&D===n(c)&&(v?(g(A),A=-1):v=!0,X(S,W-V))):(D.sortIndex=j,e(l,D),p||h||(p=!0,z(_))),D},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(D){var F=f;return function(){var W=f;f=F;try{return D.apply(this,arguments)}finally{f=W}}}})(Sae);wae.exports=Sae;var pq=wae.exports;const RQe=t=>typeof t=="object"&&typeof t.then=="function",Wp=[];function _ae(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function Cae(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const s of Wp)if(_ae(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Wp.indexOf(i);s!==-1&&Wp.splice(s,1)},promise:(RQe(t)?t:t(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Wp.push(i),!n)throw i.promise}const Tae=(t,e,n)=>Cae(t,e,!1,n),NQe=(t,e,n)=>void Cae(t,e,!0,n),PQe=t=>{if(t===void 0||t.length===0)Wp.splice(0,Wp.length);else{const e=Wp.find(n=>_ae(t,n.keys,n.equal));e&&e.remove()}},VB={},Eae=t=>void Object.assign(VB,t);function $Qe(t,e){function n(u,{args:d=[],attach:f,...h},p){let v=`${u[0].toUpperCase()}${u.slice(1)}`,m;if(u==="primitive"){if(h.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=h.object;m=m0(g,{type:u,root:p,attach:f,primitive:!0})}else{const g=VB[v];if(!g)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");m=m0(new g(...d),{type:u,root:p,attach:f,memoizedProps:{args:d}})}return m.__r3f.attach===void 0&&(m instanceof $n?m.__r3f.attach="geometry":m instanceof Ks&&(m.__r3f.attach="material")),v!=="inject"&&QP(m,h),m}function r(u,d){let f=!1;if(d){var h,p;(h=d.__r3f)!=null&&h.attach?JP(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),f=!0),f||(p=u.__r3f)==null||p.objects.push(d),d.__r3f||m0(d,{}),d.__r3f.parent=u,CO(d),g0(d)}}function i(u,d,f){let h=!1;if(d){var p,v;if((p=d.__r3f)!=null&&p.attach)JP(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"});const m=u.children.filter(y=>y!==d),g=m.indexOf(f);u.children=[...m.slice(0,g),d,...m.slice(g)],h=!0}h||(v=u.__r3f)==null||v.objects.push(d),d.__r3f||m0(d,{}),d.__r3f.parent=u,CO(d),g0(d)}}function s(u,d,f=!1){u&&[...u].forEach(h=>o(d,h,f))}function o(u,d,f){if(d){var h,p,v;if(d.__r3f&&(d.__r3f.parent=null),(h=u.__r3f)!=null&&h.objects&&(u.__r3f.objects=u.__r3f.objects.filter(S=>S!==d)),(p=d.__r3f)!=null&&p.attach)xq(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var m;u.remove(d),(m=d.__r3f)!=null&&m.root&&WQe(d.__r3f.root,d)}const y=(v=d.__r3f)==null?void 0:v.primitive,x=!y&&(f===void 0?d.dispose!==null:f);if(!y){var g;s((g=d.__r3f)==null?void 0:g.objects,d,x),s(d.children,d,x)}if(delete d.__r3f,x&&d.dispose&&d.type!=="Scene"){const S=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?pq.unstable_scheduleCallback(pq.unstable_IdlePriority,S):S()}g0(u)}}function a(u,d,f,h){var p;const v=(p=u.__r3f)==null?void 0:p.parent;if(!v)return;const m=n(d,f,u.__r3f.root);if(u.children){for(const g of u.children)g.__r3f&&r(m,g);u.children=u.children.filter(g=>!g.__r3f)}u.__r3f.objects.forEach(g=>r(m,g)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(v,u),m.parent&&(m.__r3f.autoRemovedBeforeAppend=!0),r(v,m),m.raycast&&m.__r3f.eventCount&&m.__r3f.root.getState().internal.interaction.push(m),[h,h.alternate].forEach(g=>{g!==null&&(g.stateNode=m,g.ref&&(typeof g.ref=="function"?g.ref(m):g.ref.current=m))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:IQe({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const f=u.getState().scene;f.__r3f&&(f.__r3f.root=u,r(f,d))},removeChildFromContainer:(u,d)=>{d&&o(u.getState().scene,d)},insertInContainerBefore:(u,d,f)=>{if(!d||!f)return;const h=u.getState().scene;h.__r3f&&i(h,d,f)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,f,h){var p;if(((p=u==null?void 0:u.__r3f)!=null?p:{}).primitive&&h.object&&h.object!==u)return[!0];{const{args:m=[],children:g,...y}=h,{args:x=[],children:S,..._}=f;if(!Array.isArray(m))throw new Error("R3F: the args prop must be an array!");if(m.some((T,A)=>T!==x[A]))return[!0];const C=Pae(u,y,_,!0);return C.changes.length?[!1,C]:null}},commitUpdate(u,[d,f],h,p,v,m){d?a(u,h,v,m):QP(u,f)},commitMount(u,d,f,h){var p;const v=(p=u.__r3f)!=null?p:{};u.raycast&&v.handlers&&v.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>m0(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:f,parent:h}=(d=u.__r3f)!=null?d:{};f&&h&&xq(h,u,f),u.isObject3D&&(u.visible=!1),g0(u)},unhideInstance(u,d){var f;const{attach:h,parent:p}=(f=u.__r3f)!=null?f:{};h&&p&&JP(p,u,h),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),g0(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():U0.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Jr.fun(performance.now)?performance.now:Jr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Jr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Jr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:QP}}var mq,gq;const ZP=t=>"colorSpace"in t||"outputColorSpace"in t,Mae=()=>{var t;return(t=VB.ColorManagement)!=null?t:null},kae=t=>t&&t.isOrthographicCamera,DQe=t=>t&&t.hasOwnProperty("current"),x2=typeof window<"u"&&((mq=window.document)!=null&&mq.createElement||((gq=window.navigator)==null?void 0:gq.product)==="ReactNative")?N.useLayoutEffect:N.useEffect;function Aae(t){const e=N.useRef(t);return x2(()=>void(e.current=t),[t]),e}function LQe({set:t}){return x2(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class Iae extends N.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Iae.getDerivedStateFromError=()=>({error:!0});const Rae="__default",vq=new Map,OQe=t=>t&&!!t.memoized&&!!t.changes;function Nae(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Vx=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},Jr={obj:t=>t===Object(t)&&!Jr.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Jr.str(t)||Jr.num(t))return t===e;const s=Jr.obj(t);if(s&&r==="reference")return t===e;const o=Jr.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!Jr.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(Jr.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function FQe(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function UQe(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function m0(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function _O(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const yq=/-\d+$/;function JP(t,e,n){if(Jr.str(n)){if(yq.test(n)){const s=n.replace(yq,""),{target:o,key:a}=_O(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=_O(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function xq(t,e,n){var r,i;if(Jr.str(n)){const{target:s,key:o}=_O(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function Pae(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var u;const d=(u=t==null?void 0:t.__r3f)!=null?u:{},f=Object.entries(i),h=[];if(c){const v=Object.keys(l);for(let m=0;m<v.length;m++)i.hasOwnProperty(v[m])||f.unshift([v[m],Rae+"remove"])}f.forEach(([v,m])=>{var g;if((g=t.__r3f)!=null&&g.primitive&&v==="object"||Jr.equ(m,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return h.push([v,m,!0,[]]);let y=[];v.includes("-")&&(y=v.split("-")),h.push([v,m,!1,y]);for(const x in i){const S=i[x];x.startsWith(`${v}-`)&&h.push([x,S,!1,x.split("-")])}});const p={...i};return d.memoizedProps&&d.memoizedProps.args&&(p.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(p.attach=d.memoizedProps.attach),{memoized:p,changes:h}}const BQe=typeof process<"u"&&!1;function QP(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=OQe(e)?e:Pae(t,e),u=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let f=0;f<c.length;f++){let[h,p,v,m]=c[f];if(ZP(t)){const S="srgb",_="srgb-linear";h==="encoding"?(h="colorSpace",p=p===3001?S:_):h==="outputEncoding"&&(h="outputColorSpace",p=p===3001?S:_)}let g=t,y=g[h];if(m.length&&(y=m.reduce((x,S)=>x[S],t),!(y&&y.set))){const[x,...S]=m.reverse();g=S.reverse().reduce((_,C)=>_[C],t),h=x}if(p===Rae+"remove")if(g.constructor){let x=vq.get(g.constructor);x||(x=new g.constructor,vq.set(g.constructor,x)),p=x[h]}else p=0;if(v)p?s.handlers[h]=p:delete s.handlers[h],s.eventCount=Object.keys(s.handlers).length;else if(y&&y.set&&(y.copy||y instanceof tm)){if(Array.isArray(p))y.fromArray?y.fromArray(p):y.set(...p);else if(y.copy&&p&&p.constructor&&(BQe?y.constructor.name===p.constructor.name:y.constructor===p.constructor))y.copy(p);else if(p!==void 0){const x=y instanceof Bt;!x&&y.setScalar?y.setScalar(p):y instanceof tm&&p instanceof tm?y.mask=p.mask:y.set(p),!Mae()&&!a.linear&&x&&y.convertSRGBToLinear()}}else if(g[h]=p,g[h]instanceof ci&&g[h].format===vo&&g[h].type===Mu){const x=g[h];ZP(x)&&ZP(a.gl)?x.colorSpace=a.gl.outputColorSpace:x.encoding=a.gl.outputEncoding}g0(t)}if(s.parent&&a.internal&&t.raycast&&u!==s.eventCount){const f=a.internal.interaction.indexOf(t);f>-1&&a.internal.interaction.splice(f,1),s.eventCount&&a.internal.interaction.push(t)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=t.__r3f)!=null&&i.parent&&CO(t),t}function g0(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function CO(t){t.onUpdate==null||t.onUpdate(t)}function $ae(t,e){t.manual||(kae(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function sT(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function zQe(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return U0.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return U0.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return U0.ContinuousEventPriority;default:return U0.DefaultEventPriority}}function Dae(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function WQe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{Dae(n.capturedMap,e,r,i)})}function VQe(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(l,c){const u=t.getState(),d=new Set,f=[],h=c?c(u.internal.interaction):u.internal.interaction;for(let g=0;g<h.length;g++){const y=Vx(h[g]);y&&(y.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function p(g){const y=Vx(g);if(!y||!y.events.enabled||y.raycaster.camera===null)return[];if(y.raycaster.camera===void 0){var x;y.events.compute==null||y.events.compute(l,y,(x=y.previousRoot)==null?void 0:x.getState()),y.raycaster.camera===void 0&&(y.raycaster.camera=null)}return y.raycaster.camera?y.raycaster.intersectObject(g,!0):[]}let v=h.flatMap(p).sort((g,y)=>{const x=Vx(g.object),S=Vx(y.object);return!x||!S?g.distance-y.distance:S.events.priority-x.events.priority||g.distance-y.distance}).filter(g=>{const y=sT(g);return d.has(y)?!1:(d.add(y),!0)});u.events.filter&&(v=u.events.filter(v,u));for(const g of v){let y=g.object;for(;y;){var m;(m=y.__r3f)!=null&&m.eventCount&&f.push({...g,eventObject:y}),y=y.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let g of u.internal.capturedMap.get(l.pointerId).values())d.has(sT(g.intersection))||f.push(g.intersection);return f}function i(l,c,u,d){const f=t.getState();if(l.length){const h={stopped:!1};for(const p of l){const v=Vx(p.object)||f,{raycaster:m,pointer:g,camera:y,internal:x}=v,S=new pe(g.x,g.y,0).unproject(y),_=M=>{var R,P;return(R=(P=x.capturedMap.get(M))==null?void 0:P.has(p.eventObject))!=null?R:!1},C=M=>{const R={intersection:p,target:c.target};x.capturedMap.has(M)?x.capturedMap.get(M).set(p.eventObject,R):x.capturedMap.set(M,new Map([[p.eventObject,R]])),c.target.setPointerCapture(M)},T=M=>{const R=x.capturedMap.get(M);R&&Dae(x.capturedMap,p.eventObject,R,M)};let A={};for(let M in c){let R=c[M];typeof R!="function"&&(A[M]=R)}let k={...p,...A,pointer:g,intersections:l,stopped:h.stopped,delta:u,unprojectedPoint:S,ray:m.ray,camera:y,stopPropagation(){const M="pointerId"in c&&x.capturedMap.get(c.pointerId);if((!M||M.has(p.eventObject))&&(k.stopped=h.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(R=>R.eventObject===p.eventObject))){const R=l.slice(0,l.indexOf(p));s([...R,p])}},target:{hasPointerCapture:_,setPointerCapture:C,releasePointerCapture:T},currentTarget:{hasPointerCapture:_,setPointerCapture:C,releasePointerCapture:T},nativeEvent:c};if(d(k),h.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const f=u.eventObject.__r3f,h=f==null?void 0:f.handlers;if(c.hovered.delete(sT(u)),f!=null&&f.eventCount){const p={...u,intersections:l};h.onPointerOut==null||h.onPointerOut(p),h.onPointerLeave==null||h.onPointerLeave(p)}}}function o(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:f}=t.getState();f.lastEvent.current=u;const h=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",m=r(u,h?n:void 0),g=p?e(u):0;l==="onPointerDown"&&(f.initialClick=[u.offsetX,u.offsetY],f.initialHits=m.map(x=>x.eventObject)),p&&!m.length&&g<=2&&(o(u,f.interaction),d&&d(u)),h&&s(m);function y(x){const S=x.eventObject,_=S.__r3f,C=_==null?void 0:_.handlers;if(_!=null&&_.eventCount)if(h){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const T=sT(x),A=f.hovered.get(T);A?A.stopped&&x.stopPropagation():(f.hovered.set(T,x),C.onPointerOver==null||C.onPointerOver(x),C.onPointerEnter==null||C.onPointerEnter(x))}C.onPointerMove==null||C.onPointerMove(x)}else{const T=C[l];T?(!p||f.initialHits.includes(S))&&(o(u,f.interaction.filter(A=>!f.initialHits.includes(A))),T(x)):p&&f.initialHits.includes(S)&&o(u,f.interaction.filter(A=>!f.initialHits.includes(A)))}}i(m,u,g,y)}}return{handlePointer:a}}const GQe=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Lae=t=>!!(t!=null&&t.render),GB=N.createContext(null),HQe=(t,e)=>{const n=xae((a,l)=>{const c=new pe,u=new pe,d=new pe;function f(g=l().camera,y=u,x=l().size){const{width:S,height:_,top:C,left:T}=x,A=S/_;y instanceof pe?d.copy(y):d.set(...y);const k=g.getWorldPosition(c).distanceTo(d);if(kae(g))return{width:S/g.zoom,height:_/g.zoom,top:C,left:T,factor:1,distance:k,aspect:A};{const M=g.fov*Math.PI/180,R=2*Math.tan(M/2)*k,P=R*(S/_);return{width:P,height:R,top:C,left:T,factor:S/P,distance:k,aspect:A}}}let h;const p=g=>a(y=>({performance:{...y.performance,current:g}})),v=new lt;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>t(l(),g),advance:(g,y)=>e(g,y,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new FB,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();h&&clearTimeout(h),g.performance.current!==g.performance.min&&p(g.performance.min),h=setTimeout(()=>p(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:g=>a(y=>({...y,events:{...y.events,...g}})),setSize:(g,y,x,S,_)=>{const C=l().camera,T={width:g,height:y,top:S||0,left:_||0,updateStyle:x};a(A=>({size:T,viewport:{...A.viewport,...f(C,u,T)}}))},setDpr:g=>a(y=>{const x=Nae(g);return{viewport:{...y.viewport,dpr:x,initialDpr:y.viewport.initialDpr||x}}}),setFrameloop:(g="always")=>{const y=l().clock;y.stop(),y.elapsedTime=0,g!=="never"&&(y.start(),y.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:N.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,y,x)=>{const S=l().internal;return S.priority=S.priority+(y>0?1:0),S.subscribers.push({ref:g,priority:y,store:x}),S.subscribers=S.subscribers.sort((_,C)=>_.priority-C.priority),()=>{const _=l().internal;_!=null&&_.subscribers&&(_.priority=_.priority-(y>0?1:0),_.subscribers=_.subscribers.filter(C=>C.ref!==g))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:d}=n.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var f;i=l,s=c.dpr,$ae(a,l),u.setPixelRatio(c.dpr);const h=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,h)}a!==o&&(o=a,d(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let oT,jQe=new Set,XQe=new Set,qQe=new Set;function e$(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function Gx(t,e){switch(t){case"before":return e$(jQe,e);case"after":return e$(XQe,e);case"tail":return e$(qQe,e)}}let t$,n$;function r$(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),t$=e.internal.subscribers,oT=0;oT<t$.length;oT++)n$=t$[oT],n$.ref.current(n$.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function YQe(t){let e=!1,n,r,i;function s(l){r=requestAnimationFrame(s),e=!0,n=0,Gx("before",l);for(const u of t.values()){var c;i=u.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(n+=r$(l,i))}if(Gx("after",l),n===0)return Gx("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var u;if(!l)return t.forEach(d=>o(d.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,d){if(c&&Gx("before",l),u)r$(l,u,d);else for(const f of t.values())r$(l,f.store.getState());c&&Gx("after",l)}return{loop:s,invalidate:o,advance:a}}function HB(){const t=N.useContext(GB);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function cs(t=n=>n,e){return HB()(t,e)}function rg(t,e=0){const n=HB(),r=n.getState().internal.subscribe,i=Aae(t);return x2(()=>r(i,e,n),[e,r,n]),null}const bq=new WeakMap;function Oae(t,e){return function(n,...r){let i=bq.get(n);return i||(i=new n,bq.set(n,i)),t&&t(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,FQe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function jB(t,e,n,r){const i=Array.isArray(e)?e:[e],s=Tae(Oae(n,r),[t,...i],{equal:Jr.equ});return Array.isArray(e)?s:s[0]}jB.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return NQe(Oae(n),[t,...r])};jB.clear=function(t,e){const n=Array.isArray(e)?e:[e];return PQe([t,...n])};const Dv=new Map,{invalidate:wq,advance:Sq}=YQe(Dv),{reconciler:dw,applyProps:a0}=$Qe(Dv,zQe),l0={objects:"shallow",strict:!1},KQe=(t,e)=>{const n=typeof t=="function"?t(e):t;return Lae(n)?n:new xB({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function ZQe(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=n}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function JQe(t){const e=Dv.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||HQe(wq,Sq),o=n||dw.createContainer(s,U0.ConcurrentRoot,null,!1,null,"",i,null);e||Dv.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:d,size:f,scene:h,events:p,onCreated:v,shadows:m=!1,linear:g=!1,flat:y=!1,legacy:x=!1,orthographic:S=!1,frameloop:_="always",dpr:C=[1,2],performance:T,raycaster:A,camera:k,onPointerMissed:M}=u,R=s.getState(),P=R.gl;R.gl||R.set({gl:P=KQe(d,t)});let O=R.raycaster;O||R.set({raycaster:O=new WB});const{params:$,...U}=A||{};if(Jr.equ(U,O,l0)||a0(O,{...U}),Jr.equ($,O.params,l0)||a0(O,{params:{...O.params,...$}}),!R.camera||R.camera===c&&!Jr.equ(c,k,l0)){c=k;const j=k instanceof d2,J=j?k:S?new Ad(0,0,0,0,.1,1e3):new Ti(75,0,.1,1e3);j||(J.position.z=5,k&&a0(J,k),!R.camera&&!(k!=null&&k.rotation)&&J.lookAt(0,0,0)),R.set({camera:J}),O.camera=J}if(!R.scene){let j;h instanceof nw?j=h:(j=new nw,h&&a0(j,h)),R.set({scene:m0(j)})}if(!R.xr){var z;const j=(te,re)=>{const se=s.getState();se.frameloop!=="never"&&Sq(te,!0,se,re)},J=()=>{const te=s.getState();te.gl.xr.enabled=te.gl.xr.isPresenting,te.gl.xr.setAnimationLoop(te.gl.xr.isPresenting?j:null),te.gl.xr.isPresenting||wq(te)},Q={connect(){const te=s.getState().gl;te.xr.addEventListener("sessionstart",J),te.xr.addEventListener("sessionend",J)},disconnect(){const te=s.getState().gl;te.xr.removeEventListener("sessionstart",J),te.xr.removeEventListener("sessionend",J)}};typeof((z=P.xr)==null?void 0:z.addEventListener)=="function"&&Q.connect(),R.set({xr:Q})}if(P.shadowMap){const j=P.shadowMap.enabled,J=P.shadowMap.type;if(P.shadowMap.enabled=!!m,Jr.boo(m))P.shadowMap.type=R1;else if(Jr.str(m)){var X;const Q={basic:fse,percentage:YA,soft:R1,variance:fc};P.shadowMap.type=(X=Q[m])!=null?X:R1}else Jr.obj(m)&&Object.assign(P.shadowMap,m);(j!==P.shadowMap.enabled||J!==P.shadowMap.type)&&(P.shadowMap.needsUpdate=!0)}const D=Mae();D&&("enabled"in D?D.enabled=!x:"legacyMode"in D&&(D.legacyMode=x)),a0(P,{outputEncoding:g?3e3:3001,toneMapping:y?Eu:JU}),R.legacy!==x&&R.set(()=>({legacy:x})),R.linear!==g&&R.set(()=>({linear:g})),R.flat!==y&&R.set(()=>({flat:y})),d&&!Jr.fun(d)&&!Lae(d)&&!Jr.equ(d,P,l0)&&a0(P,d),p&&!R.events.handlers&&R.set({events:p(s)});const V=ZQe(t,f);return Jr.equ(V,R.size,l0)||R.setSize(V.width,V.height,V.updateStyle,V.top,V.left),C&&R.viewport.dpr!==Nae(C)&&R.setDpr(C),R.frameloop!==_&&R.setFrameloop(_),R.onPointerMissed||R.set({onPointerMissed:M}),T&&!Jr.equ(T,R.performance,l0)&&R.set(j=>({performance:{...j.performance,...T}})),a=v,l=!0,this},render(u){return l||this.configure(),dw.updateContainer(N.createElement(QQe,{store:s,children:u,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){Fae(t)}}}function QQe({store:t,children:e,onCreated:n,rootElement:r}){return x2(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),N.createElement(GB.Provider,{value:t},e)}function Fae(t,e){const n=Dv.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),dw.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),UQe(i),Dv.delete(t),e&&e(t)}catch{}},500)})}}function eet(t,e,n){return N.createElement(tet,{key:e.uuid,children:t,container:e,state:n})}function tet({state:t={},children:e,container:n}){const{events:r,size:i,...s}=t,o=HB(),[a]=N.useState(()=>new WB),[l]=N.useState(()=>new lt),c=N.useCallback((d,f)=>{const h={...d};Object.keys(d).forEach(v=>{(GQe.includes(v)||d[v]!==f[v]&&f[v])&&delete h[v]});let p;if(f&&i){const v=f.camera;p=d.viewport.getCurrentViewport(v,new pe,i),v!==d.camera&&$ae(v,i)}return{...h,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...f==null?void 0:f.events,...r},size:{...d.size,...i},viewport:{...d.viewport,...p},...s}},[t]),[u]=N.useState(()=>{const d=o.getState();return xae((h,p)=>({...d,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...r},size:{...d.size,...i},...s,set:h,get:p,setEvents:v=>h(m=>({...m,events:{...m.events,...v}}))}))});return N.useEffect(()=>{const d=o.subscribe(f=>u.setState(h=>c(f,h)));return()=>{d(),u.destroy()}},[]),N.useEffect(()=>{u.setState(d=>c(o.getState(),d))},[c]),N.createElement(N.Fragment,null,dw.createPortal(N.createElement(GB.Provider,{value:u},e),u,null))}dw.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:N.version});function TO(t,e,n){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,n||(a=t.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(a=t.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=t.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}TO.debounce=TO;var net=TO;const _q=is(net);function ret(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=N.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=N.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=N.useRef(!1);N.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[f,h,p]=N.useMemo(()=>{const y=()=>{if(!l.current.element)return;const{left:x,top:S,width:_,height:C,bottom:T,right:A,x:k,y:M}=l.current.element.getBoundingClientRect(),R={left:x,top:S,width:_,height:C,bottom:T,right:A,x:k,y:M};l.current.element instanceof HTMLElement&&i&&(R.height=l.current.element.offsetHeight,R.width=l.current.element.offsetWidth),Object.freeze(R),d.current&&!aet(l.current.lastBounds,R)&&a(l.current.lastBounds=R)};return[y,u?_q(y,u):y,c?_q(y,c):y]},[a,i,c,u]);function v(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function m(){l.current.element&&(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(y=>y.addEventListener("scroll",p,{capture:!0,passive:!0})))}const g=y=>{!y||y===l.current.element||(v(),l.current.element=y,l.current.scrollContainers=Uae(y),m())};return set(p,!!n),iet(h),N.useEffect(()=>{v(),m()},[n,p,h]),N.useEffect(()=>v,[]),[g,o,f]}function iet(t){N.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function set(t,e){N.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function Uae(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...Uae(t.parentElement)]}const oet=["x","y","top","bottom","left","right","width","height"],aet=(t,e)=>oet.every(n=>t[n]===e[n]);var cet=Object.defineProperty,uet=Object.defineProperties,det=Object.getOwnPropertyDescriptors,Cq=Object.getOwnPropertySymbols,fet=Object.prototype.hasOwnProperty,het=Object.prototype.propertyIsEnumerable,Tq=(t,e,n)=>e in t?cet(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Eq=(t,e)=>{for(var n in e||(e={}))fet.call(e,n)&&Tq(t,n,e[n]);if(Cq)for(var n of Cq(e))het.call(e,n)&&Tq(t,n,e[n]);return t},pet=(t,e)=>uet(t,det(e));function Bae(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=Bae(r,e,n);if(i)return i;r=e?null:r.sibling}}function zae(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const XB=zae(N.createContext(null));class Wae extends N.Component{render(){return N.createElement(XB.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:Mq,ReactCurrentDispatcher:kq}=N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function met(){const t=N.useContext(XB);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=N.useId();return N.useMemo(()=>{for(const r of[Mq==null?void 0:Mq.current,t,t==null?void 0:t.alternate]){if(!r)continue;const i=Bae(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function get(){var t,e;const n=met(),[r]=N.useState(()=>new Map);r.clear();let i=n;for(;i;){const s=(t=i.type)==null?void 0:t._context;s&&s!==XB&&!r.has(s)&&r.set(s,(e=kq==null?void 0:kq.current)==null?void 0:e.readContext(zae(s))),i=i.return}return r}function vet(){const t=get();return N.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>N.createElement(e,null,N.createElement(n.Provider,pet(Eq({},r),{value:t.get(n)}))),e=>N.createElement(Wae,Eq({},e))),[t])}const i$={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function yet(t){const{handlePointer:e}=VQe(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(i$).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=i$[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=i$[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const xet=N.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=yet,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:f,orthographic:h,frameloop:p,dpr:v,performance:m,raycaster:g,camera:y,scene:x,onPointerMissed:S,onCreated:_,...C},T){N.useMemo(()=>Eae(_Qe),[]);const A=vet(),[k,M]=ret({scroll:!0,debounce:{scroll:50,resize:0},...r}),R=N.useRef(null),P=N.useRef(null);N.useImperativeHandle(T,()=>R.current);const O=Aae(S),[$,U]=N.useState(!1),[z,X]=N.useState(!1);if($)throw $;if(z)throw z;const D=N.useRef(null);x2(()=>{const W=R.current;M.width>0&&M.height>0&&W&&(D.current||(D.current=JQe(W)),D.current.configure({gl:s,events:o,shadows:c,linear:u,flat:d,legacy:f,orthographic:h,frameloop:p,dpr:v,performance:m,raycaster:g,camera:y,scene:x,size:M,onPointerMissed:(...V)=>O.current==null?void 0:O.current(...V),onCreated:V=>{V.events.connect==null||V.events.connect(a?DQe(a)?a.current:a:P.current),l&&V.setEvents({compute:(j,J)=>{const Q=j[l+"X"],te=j[l+"Y"];J.pointer.set(Q/J.size.width*2-1,-(te/J.size.height)*2+1),J.raycaster.setFromCamera(J.pointer,J.camera)}}),_==null||_(V)}}),D.current.render(N.createElement(A,null,N.createElement(Iae,{set:X},N.createElement(N.Suspense,{fallback:N.createElement(LQe,{set:U})},e)))))}),N.useEffect(()=>{const W=R.current;if(W)return()=>Fae(W)},[]);const F=a?"none":"auto";return N.createElement("div",ve({ref:P,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F,...i}},C),N.createElement("div",{ref:k,style:{width:"100%",height:"100%"}},N.createElement("canvas",{ref:R,style:{display:"block"}},n)))}),TI=N.forwardRef(function(e,n){return N.createElement(Wae,null,N.createElement(xet,ve({},e,{ref:n})))});function bet(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Ml=Uint8Array,$f=Uint16Array,EO=Uint32Array,Vae=new Ml([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Gae=new Ml([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wet=new Ml([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hae=function(t,e){for(var n=new $f(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new EO(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},jae=Hae(Vae,2),Xae=jae[0],_et=jae[1];Xae[28]=258,_et[258]=28;var Cet=Hae(Gae,0),Tet=Cet[0],MO=new $f(32768);for(var Qr=0;Qr<32768;++Qr){var wf=(Qr&43690)>>>1|(Qr&21845)<<1;wf=(wf&52428)>>>2|(wf&13107)<<2,wf=(wf&61680)>>>4|(wf&3855)<<4,MO[Qr]=((wf&65280)>>>8|(wf&255)<<8)>>>1}var O1=function(t,e,n){for(var r=t.length,i=0,s=new $f(e);i<r;++i)++s[t[i]-1];var o=new $f(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new $f(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],d=o[t[i]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)a[MO[d]>>>l]=c}else for(a=new $f(r),i=0;i<r;++i)t[i]&&(a[i]=MO[o[t[i]-1]++]>>>15-t[i]);return a},b2=new Ml(288);for(var Qr=0;Qr<144;++Qr)b2[Qr]=8;for(var Qr=144;Qr<256;++Qr)b2[Qr]=9;for(var Qr=256;Qr<280;++Qr)b2[Qr]=7;for(var Qr=280;Qr<288;++Qr)b2[Qr]=8;var qae=new Ml(32);for(var Qr=0;Qr<32;++Qr)qae[Qr]=5;var Eet=O1(b2,9,1),Met=O1(qae,5,1),s$=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ac=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},o$=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},ket=function(t){return(t/8|0)+(t&7&&1)},Aet=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof $f?$f:t instanceof EO?EO:Ml)(n-e);return r.set(t.subarray(e,n)),r},Iet=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new Ml(0);var i=!e||n,s=!n||n.i;n||(n={}),e||(e=new Ml(r*3));var o=function(re){var se=e.length;if(re>se){var fe=new Ml(Math.max(se*2,re));fe.set(e),e=fe}},a=n.f||0,l=n.p||0,c=n.b||0,u=n.l,d=n.d,f=n.m,h=n.n,p=r*8;do{if(!u){n.f=a=ac(t,l,1);var v=ac(t,l+1,3);if(l+=3,v)if(v==1)u=Eet,d=Met,f=9,h=5;else if(v==2){var x=ac(t,l,31)+257,S=ac(t,l+10,15)+4,_=x+ac(t,l+5,31)+1;l+=14;for(var C=new Ml(_),T=new Ml(19),A=0;A<S;++A)T[wet[A]]=ac(t,l+A*3,7);l+=S*3;for(var k=s$(T),M=(1<<k)-1,R=O1(T,k,1),A=0;A<_;){var P=R[ac(t,l,M)];l+=P&15;var m=P>>>4;if(m<16)C[A++]=m;else{var O=0,$=0;for(m==16?($=3+ac(t,l,3),l+=2,O=C[A-1]):m==17?($=3+ac(t,l,7),l+=3):m==18&&($=11+ac(t,l,127),l+=7);$--;)C[A++]=O}}var U=C.subarray(0,x),z=C.subarray(x);f=s$(U),h=s$(z),u=O1(U,f,1),d=O1(z,h,1)}else throw"invalid block type";else{var m=ket(l)+4,g=t[m-4]|t[m-3]<<8,y=m+g;if(y>r){if(s)throw"unexpected EOF";break}i&&o(c+g),e.set(t.subarray(m,y),c),n.b=c+=g,n.p=l=y*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}i&&o(c+131072);for(var X=(1<<f)-1,D=(1<<h)-1,F=l;;F=l){var O=u[o$(t,l)&X],W=O>>>4;if(l+=O&15,l>p){if(s)throw"unexpected EOF";break}if(!O)throw"invalid length/literal";if(W<256)e[c++]=W;else if(W==256){F=l,u=null;break}else{var V=W-254;if(W>264){var A=W-257,j=Vae[A];V=ac(t,l,(1<<j)-1)+Xae[A],l+=j}var J=d[o$(t,l)&D],Q=J>>>4;if(!J)throw"invalid distance";l+=J&15;var z=Tet[Q];if(Q>3){var j=Gae[Q];z+=o$(t,l)&(1<<j)-1,l+=j}if(l>p){if(s)throw"unexpected EOF";break}i&&o(c+131072);for(var te=c+V;c<te;c+=4)e[c]=e[c-z],e[c+1]=e[c+1-z],e[c+2]=e[c+2-z],e[c+3]=e[c+3-z];c=te}}n.l=u,n.p=F,n.b=c,u&&(a=1,n.m=f,n.d=d,n.n=h)}while(!a);return c==e.length?e:Aet(e,0,c)},Ret=new Ml(0),Net=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function aT(t,e){return Iet((Net(t),t.subarray(2,-4)),e)}var Pet=typeof TextDecoder<"u"&&new TextDecoder,$et=0;try{Pet.decode(Ret,{stream:!0}),$et=1}catch{}const Det=t=>t&&t.isCubeTexture;class Let extends ai{constructor(e,n){var r,i;const s=Det(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),d=4*c,f=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/d}`,`#define CUBEUV_MAX_MIP ${l}.0`],h=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,p=f.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(xy.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,v={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},m=new m2(1,16),g=new jl({uniforms:v,fragmentShader:p,vertexShader:h,side:Ga});super(m,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Oet=Object.defineProperty,Fet=(t,e,n)=>e in t?Oet(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tn=(t,e,n)=>(Fet(t,typeof e!="symbol"?e+"":e,n),n);const lT=new Jm,Aq=new vd,Uet=Math.cos(70*(Math.PI/180)),Iq=(t,e)=>(t%e+e)%e;let Bet=class extends Yu{constructor(e,n){super(),Tn(this,"object"),Tn(this,"domElement"),Tn(this,"enabled",!0),Tn(this,"target",new pe),Tn(this,"minDistance",0),Tn(this,"maxDistance",1/0),Tn(this,"minZoom",0),Tn(this,"maxZoom",1/0),Tn(this,"minPolarAngle",0),Tn(this,"maxPolarAngle",Math.PI),Tn(this,"minAzimuthAngle",-1/0),Tn(this,"maxAzimuthAngle",1/0),Tn(this,"enableDamping",!1),Tn(this,"dampingFactor",.05),Tn(this,"enableZoom",!0),Tn(this,"zoomSpeed",1),Tn(this,"enableRotate",!0),Tn(this,"rotateSpeed",1),Tn(this,"enablePan",!0),Tn(this,"panSpeed",1),Tn(this,"screenSpacePanning",!0),Tn(this,"keyPanSpeed",7),Tn(this,"zoomToCursor",!1),Tn(this,"autoRotate",!1),Tn(this,"autoRotateSpeed",2),Tn(this,"reverseOrbit",!1),Tn(this,"reverseHorizontalOrbit",!1),Tn(this,"reverseVerticalOrbit",!1),Tn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Tn(this,"mouseButtons",{LEFT:wp.ROTATE,MIDDLE:wp.DOLLY,RIGHT:wp.PAN}),Tn(this,"touches",{ONE:Sp.ROTATE,TWO:Sp.DOLLY_PAN}),Tn(this,"target0"),Tn(this,"position0"),Tn(this,"zoom0"),Tn(this,"_domElementKeyEvents",null),Tn(this,"getPolarAngle"),Tn(this,"getAzimuthalAngle"),Tn(this,"setPolarAngle"),Tn(this,"setAzimuthalAngle"),Tn(this,"getDistance"),Tn(this,"listenToKeyEvents"),Tn(this,"stopListenToKeyEvents"),Tn(this,"saveState"),Tn(this,"reset"),Tn(this,"update"),Tn(this,"connect"),Tn(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=he=>{let He=Iq(he,2*Math.PI),ot=u.phi;ot<0&&(ot+=2*Math.PI),He<0&&(He+=2*Math.PI);let et=Math.abs(He-ot);2*Math.PI-et<et&&(He<ot?He+=2*Math.PI:ot+=2*Math.PI),d.phi=He-ot,r.update()},this.setAzimuthalAngle=he=>{let He=Iq(he,2*Math.PI),ot=u.theta;ot<0&&(ot+=2*Math.PI),He<0&&(He+=2*Math.PI);let et=Math.abs(He-ot);2*Math.PI-et<et&&(He<ot?He+=2*Math.PI:ot+=2*Math.PI),d.theta=He-ot,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=he=>{he.addEventListener("keydown",Pe),this._domElementKeyEvents=he},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Pe),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const he=new pe,He=new pe(0,1,0),ot=new wo().setFromUnitVectors(e.up,He),et=ot.clone().invert(),Ie=new pe,Ce=new wo,ut=2*Math.PI;return function(){const yt=r.object.position;ot.setFromUnitVectors(e.up,He),et.copy(ot).invert(),he.copy(yt).sub(r.target),he.applyQuaternion(ot),u.setFromVector3(he),r.autoRotate&&l===a.NONE&&$(P()),r.enableDamping?(u.theta+=d.theta*r.dampingFactor,u.phi+=d.phi*r.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let vt=r.minAzimuthAngle,zt=r.maxAzimuthAngle;isFinite(vt)&&isFinite(zt)&&(vt<-Math.PI?vt+=ut:vt>Math.PI&&(vt-=ut),zt<-Math.PI?zt+=ut:zt>Math.PI&&(zt-=ut),vt<=zt?u.theta=Math.max(vt,Math.min(zt,u.theta)):u.theta=u.theta>(vt+zt)/2?Math.max(vt,u.theta):Math.min(zt,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),r.zoomToCursor&&k||r.object.isOrthographicCamera?u.radius=j(u.radius):u.radius=j(u.radius*f),he.setFromSpherical(u),he.applyQuaternion(et),yt.copy(r.target).add(he),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),h.set(0,0,0));let It=!1;if(r.zoomToCursor&&k){let Qt=null;if(r.object instanceof Ti&&r.object.isPerspectiveCamera){const $t=he.length();Qt=j($t*f);const mt=$t-Qt;r.object.position.addScaledVector(T,mt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const $t=new pe(A.x,A.y,0);$t.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix(),It=!0;const mt=new pe(A.x,A.y,0);mt.unproject(r.object),r.object.position.sub(mt).add($t),r.object.updateMatrixWorld(),Qt=he.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Qt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Qt).add(r.object.position):(lT.origin.copy(r.object.position),lT.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(lT.direction))<Uet?e.lookAt(r.target):(Aq.setFromNormalAndCoplanarPoint(r.object.up,r.target),lT.intersectPlane(Aq,r.target))))}else r.object instanceof Ad&&r.object.isOrthographicCamera&&(It=f!==1,It&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix()));return f=1,k=!1,It||Ie.distanceToSquared(r.object.position)>c||8*(1-Ce.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Ie.copy(r.object.position),Ce.copy(r.object.quaternion),It=!1,!0):!1}})(),this.connect=he=>{he===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=he,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",gt),r.domElement.addEventListener("pointerdown",oe),r.domElement.addEventListener("pointercancel",be),r.domElement.addEventListener("wheel",ze)},this.dispose=()=>{var he,He,ot,et,Ie,Ce;(he=r.domElement)==null||he.removeEventListener("contextmenu",gt),(He=r.domElement)==null||He.removeEventListener("pointerdown",oe),(ot=r.domElement)==null||ot.removeEventListener("pointercancel",be),(et=r.domElement)==null||et.removeEventListener("wheel",ze),(Ie=r.domElement)==null||Ie.ownerDocument.removeEventListener("pointermove",xe),(Ce=r.domElement)==null||Ce.ownerDocument.removeEventListener("pointerup",Se),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Pe)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new SO,d=new SO;let f=1;const h=new pe,p=new lt,v=new lt,m=new lt,g=new lt,y=new lt,x=new lt,S=new lt,_=new lt,C=new lt,T=new pe,A=new lt;let k=!1;const M=[],R={};function P(){return 2*Math.PI/60/60*r.autoRotateSpeed}function O(){return Math.pow(.95,r.zoomSpeed)}function $(he){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=he:d.theta-=he}function U(he){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=he:d.phi-=he}const z=(()=>{const he=new pe;return function(ot,et){he.setFromMatrixColumn(et,0),he.multiplyScalar(-ot),h.add(he)}})(),X=(()=>{const he=new pe;return function(ot,et){r.screenSpacePanning===!0?he.setFromMatrixColumn(et,1):(he.setFromMatrixColumn(et,0),he.crossVectors(r.object.up,he)),he.multiplyScalar(ot),h.add(he)}})(),D=(()=>{const he=new pe;return function(ot,et){const Ie=r.domElement;if(Ie&&r.object instanceof Ti&&r.object.isPerspectiveCamera){const Ce=r.object.position;he.copy(Ce).sub(r.target);let ut=he.length();ut*=Math.tan(r.object.fov/2*Math.PI/180),z(2*ot*ut/Ie.clientHeight,r.object.matrix),X(2*et*ut/Ie.clientHeight,r.object.matrix)}else Ie&&r.object instanceof Ad&&r.object.isOrthographicCamera?(z(ot*(r.object.right-r.object.left)/r.object.zoom/Ie.clientWidth,r.object.matrix),X(et*(r.object.top-r.object.bottom)/r.object.zoom/Ie.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function F(he){r.object instanceof Ti&&r.object.isPerspectiveCamera||r.object instanceof Ad&&r.object.isOrthographicCamera?f/=he:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function W(he){r.object instanceof Ti&&r.object.isPerspectiveCamera||r.object instanceof Ad&&r.object.isOrthographicCamera?f*=he:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function V(he){if(!r.zoomToCursor||!r.domElement)return;k=!0;const He=r.domElement.getBoundingClientRect(),ot=he.clientX-He.left,et=he.clientY-He.top,Ie=He.width,Ce=He.height;A.x=ot/Ie*2-1,A.y=-(et/Ce)*2+1,T.set(A.x,A.y,1).unproject(r.object).sub(r.object.position).normalize()}function j(he){return Math.max(r.minDistance,Math.min(r.maxDistance,he))}function J(he){p.set(he.clientX,he.clientY)}function Q(he){V(he),S.set(he.clientX,he.clientY)}function te(he){g.set(he.clientX,he.clientY)}function re(he){v.set(he.clientX,he.clientY),m.subVectors(v,p).multiplyScalar(r.rotateSpeed);const He=r.domElement;He&&($(2*Math.PI*m.x/He.clientHeight),U(2*Math.PI*m.y/He.clientHeight)),p.copy(v),r.update()}function se(he){_.set(he.clientX,he.clientY),C.subVectors(_,S),C.y>0?F(O()):C.y<0&&W(O()),S.copy(_),r.update()}function fe(he){y.set(he.clientX,he.clientY),x.subVectors(y,g).multiplyScalar(r.panSpeed),D(x.x,x.y),g.copy(y),r.update()}function ae(he){V(he),he.deltaY<0?W(O()):he.deltaY>0&&F(O()),r.update()}function ye(he){let He=!1;switch(he.code){case r.keys.UP:D(0,r.keyPanSpeed),He=!0;break;case r.keys.BOTTOM:D(0,-r.keyPanSpeed),He=!0;break;case r.keys.LEFT:D(r.keyPanSpeed,0),He=!0;break;case r.keys.RIGHT:D(-r.keyPanSpeed,0),He=!0;break}He&&(he.preventDefault(),r.update())}function le(){if(M.length==1)p.set(M[0].pageX,M[0].pageY);else{const he=.5*(M[0].pageX+M[1].pageX),He=.5*(M[0].pageY+M[1].pageY);p.set(he,He)}}function H(){if(M.length==1)g.set(M[0].pageX,M[0].pageY);else{const he=.5*(M[0].pageX+M[1].pageX),He=.5*(M[0].pageY+M[1].pageY);g.set(he,He)}}function Me(){const he=M[0].pageX-M[1].pageX,He=M[0].pageY-M[1].pageY,ot=Math.sqrt(he*he+He*He);S.set(0,ot)}function we(){r.enableZoom&&Me(),r.enablePan&&H()}function Ee(){r.enableZoom&&Me(),r.enableRotate&&le()}function me(he){if(M.length==1)v.set(he.pageX,he.pageY);else{const ot=Le(he),et=.5*(he.pageX+ot.x),Ie=.5*(he.pageY+ot.y);v.set(et,Ie)}m.subVectors(v,p).multiplyScalar(r.rotateSpeed);const He=r.domElement;He&&($(2*Math.PI*m.x/He.clientHeight),U(2*Math.PI*m.y/He.clientHeight)),p.copy(v)}function qe(he){if(M.length==1)y.set(he.pageX,he.pageY);else{const He=Le(he),ot=.5*(he.pageX+He.x),et=.5*(he.pageY+He.y);y.set(ot,et)}x.subVectors(y,g).multiplyScalar(r.panSpeed),D(x.x,x.y),g.copy(y)}function ke(he){const He=Le(he),ot=he.pageX-He.x,et=he.pageY-He.y,Ie=Math.sqrt(ot*ot+et*et);_.set(0,Ie),C.set(0,Math.pow(_.y/S.y,r.zoomSpeed)),F(C.y),S.copy(_)}function ee(he){r.enableZoom&&ke(he),r.enablePan&&qe(he)}function Y(he){r.enableZoom&&ke(he),r.enableRotate&&me(he)}function oe(he){var He,ot;r.enabled!==!1&&(M.length===0&&((He=r.domElement)==null||He.ownerDocument.addEventListener("pointermove",xe),(ot=r.domElement)==null||ot.ownerDocument.addEventListener("pointerup",Se)),ct(he),he.pointerType==="touch"?De(he):Re(he))}function xe(he){r.enabled!==!1&&(he.pointerType==="touch"?We(he):Ke(he))}function Se(he){var He,ot,et;Ye(he),M.length===0&&((He=r.domElement)==null||He.releasePointerCapture(he.pointerId),(ot=r.domElement)==null||ot.ownerDocument.removeEventListener("pointermove",xe),(et=r.domElement)==null||et.ownerDocument.removeEventListener("pointerup",Se)),r.dispatchEvent(o),l=a.NONE}function be(he){Ye(he)}function Re(he){let He;switch(he.button){case 0:He=r.mouseButtons.LEFT;break;case 1:He=r.mouseButtons.MIDDLE;break;case 2:He=r.mouseButtons.RIGHT;break;default:He=-1}switch(He){case wp.DOLLY:if(r.enableZoom===!1)return;Q(he),l=a.DOLLY;break;case wp.ROTATE:if(he.ctrlKey||he.metaKey||he.shiftKey){if(r.enablePan===!1)return;te(he),l=a.PAN}else{if(r.enableRotate===!1)return;J(he),l=a.ROTATE}break;case wp.PAN:if(he.ctrlKey||he.metaKey||he.shiftKey){if(r.enableRotate===!1)return;J(he),l=a.ROTATE}else{if(r.enablePan===!1)return;te(he),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Ke(he){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;re(he);break;case a.DOLLY:if(r.enableZoom===!1)return;se(he);break;case a.PAN:if(r.enablePan===!1)return;fe(he);break}}function ze(he){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(he.preventDefault(),r.dispatchEvent(s),ae(he),r.dispatchEvent(o))}function Pe(he){r.enabled===!1||r.enablePan===!1||ye(he)}function De(he){switch(Xe(he),M.length){case 1:switch(r.touches.ONE){case Sp.ROTATE:if(r.enableRotate===!1)return;le(),l=a.TOUCH_ROTATE;break;case Sp.PAN:if(r.enablePan===!1)return;H(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Sp.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;we(),l=a.TOUCH_DOLLY_PAN;break;case Sp.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ee(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function We(he){switch(Xe(he),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;me(he),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;qe(he),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ee(he),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Y(he),r.update();break;default:l=a.NONE}}function gt(he){r.enabled!==!1&&he.preventDefault()}function ct(he){M.push(he)}function Ye(he){delete R[he.pointerId];for(let He=0;He<M.length;He++)if(M[He].pointerId==he.pointerId){M.splice(He,1);return}}function Xe(he){let He=R[he.pointerId];He===void 0&&(He=new lt,R[he.pointerId]=He),He.set(he.pageX,he.pageY)}function Le(he){const He=he.pointerId===M[0].pointerId?M[1]:M[0];return R[He.pointerId]}n!==void 0&&this.connect(n),this.update()}};class zet extends DB{constructor(e){super(e),this.type=xo}parse(e){const a=function(x,S){switch(x){case 1:console.error("THREE.RGBELoader Read Error: "+(S||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(S||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(S||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(S||""))}return-1},d=`
`,f=function(x,S,_){S=S||1024;let T=x.pos,A=-1,k=0,M="",R=String.fromCharCode.apply(null,new Uint16Array(x.subarray(T,T+128)));for(;0>(A=R.indexOf(d))&&k<S&&T<x.byteLength;)M+=R,k+=R.length,T+=128,R+=String.fromCharCode.apply(null,new Uint16Array(x.subarray(T,T+128)));return-1<A?(_!==!1&&(x.pos+=k+A+1),M+R.slice(0,A)):!1},h=function(x){const S=/^#\?(\S+)/,_=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,C=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,T=/^\s*FORMAT=(\S+)\s*$/,A=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,k={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let M,R;if(x.pos>=x.byteLength||!(M=f(x)))return a(1,"no header found");if(!(R=M.match(S)))return a(3,"bad initial token");for(k.valid|=1,k.programtype=R[1],k.string+=M+`
`;M=f(x),M!==!1;){if(k.string+=M+`
`,M.charAt(0)==="#"){k.comments+=M+`
`;continue}if((R=M.match(_))&&(k.gamma=parseFloat(R[1])),(R=M.match(C))&&(k.exposure=parseFloat(R[1])),(R=M.match(T))&&(k.valid|=2,k.format=R[1]),(R=M.match(A))&&(k.valid|=4,k.height=parseInt(R[1],10),k.width=parseInt(R[2],10)),k.valid&2&&k.valid&4)break}return k.valid&2?k.valid&4?k:a(3,"missing image size specifier"):a(3,"missing format specifier")},p=function(x,S,_){const C=S;if(C<8||C>32767||x[0]!==2||x[1]!==2||x[2]&128)return new Uint8Array(x);if(C!==(x[2]<<8|x[3]))return a(3,"wrong scanline width");const T=new Uint8Array(4*S*_);if(!T.length)return a(4,"unable to allocate buffer space");let A=0,k=0;const M=4*C,R=new Uint8Array(4),P=new Uint8Array(M);let O=_;for(;O>0&&k<x.byteLength;){if(k+4>x.byteLength)return a(1);if(R[0]=x[k++],R[1]=x[k++],R[2]=x[k++],R[3]=x[k++],R[0]!=2||R[1]!=2||(R[2]<<8|R[3])!=C)return a(3,"bad rgbe scanline format");let $=0,U;for(;$<M&&k<x.byteLength;){U=x[k++];const X=U>128;if(X&&(U-=128),U===0||$+U>M)return a(3,"bad scanline data");if(X){const D=x[k++];for(let F=0;F<U;F++)P[$++]=D}else P.set(x.subarray(k,k+U),$),$+=U,k+=U}const z=C;for(let X=0;X<z;X++){let D=0;T[A]=P[X+D],D+=C,T[A+1]=P[X+D],D+=C,T[A+2]=P[X+D],D+=C,T[A+3]=P[X+D],A+=4}O--}return T},v=function(x,S,_,C){const T=x[S+3],A=Math.pow(2,T-128)/255;_[C+0]=x[S+0]*A,_[C+1]=x[S+1]*A,_[C+2]=x[S+2]*A,_[C+3]=1},m=function(x,S,_,C){const T=x[S+3],A=Math.pow(2,T-128)/255;_[C+0]=Bp.toHalfFloat(Math.min(x[S+0]*A,65504)),_[C+1]=Bp.toHalfFloat(Math.min(x[S+1]*A,65504)),_[C+2]=Bp.toHalfFloat(Math.min(x[S+2]*A,65504)),_[C+3]=Bp.toHalfFloat(1)},g=new Uint8Array(e);g.pos=0;const y=h(g);if(y!==-1){const x=y.width,S=y.height,_=p(g.subarray(g.pos),x,S);if(_!==-1){let C,T,A;switch(this.type){case Ms:A=_.length/4;const k=new Float32Array(A*4);for(let R=0;R<A;R++)v(_,R*4,k,R*4);C=k,T=Ms;break;case xo:A=_.length/4;const M=new Uint16Array(A*4);for(let R=0;R<A;R++)m(_,R*4,M,R*4);C=M,T=xo;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:x,height:S,data:C,header:y.string,gamma:y.gamma,exposure:y.exposure,type:T}}}return null}setDataType(e){return this.type=e,this}load(e,n,r,i){function s(o,a){switch(o.type){case Ms:case xo:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Er,o.magFilter=Er,o.generateMipmaps=!1,o.flipY=!0;break}n&&n(o,a)}return super.load(e,s,r,i)}}const Hx="colorSpace"in new ci;class Wet extends DB{constructor(e){super(e),this.type=xo}parse(e){const k=Math.pow(2.7182818,2.2);function M(Z,K){for(var ne=0,G=0;G<65536;++G)(G==0||Z[G>>3]&1<<(G&7))&&(K[ne++]=G);for(var ie=ne-1;ne<65536;)K[ne++]=0;return ie}function R(Z){for(var K=0;K<16384;K++)Z[K]={},Z[K].len=0,Z[K].lit=0,Z[K].p=null}const P={l:0,c:0,lc:0};function O(Z,K,ne,G,ie){for(;ne<Z;)K=K<<8|Le(G,ie),ne+=8;ne-=Z,P.l=K>>ne&(1<<Z)-1,P.c=K,P.lc=ne}const $=new Array(59);function U(Z){for(var K=0;K<=58;++K)$[K]=0;for(var K=0;K<65537;++K)$[Z[K]]+=1;for(var ne=0,K=58;K>0;--K){var G=ne+$[K]>>1;$[K]=ne,ne=G}for(var K=0;K<65537;++K){var ie=Z[K];ie>0&&(Z[K]=ie|$[ie]++<<6)}}function z(Z,K,ne,G,ie,ce,Te){for(var de=ne,Ue=0,Je=0;ie<=ce;ie++){if(de.value-ne.value>G)return!1;O(6,Ue,Je,Z,de);var nt=P.l;if(Ue=P.c,Je=P.lc,Te[ie]=nt,nt==63){if(de.value-ne.value>G)throw"Something wrong with hufUnpackEncTable";O(8,Ue,Je,Z,de);var $e=P.l+6;if(Ue=P.c,Je=P.lc,ie+$e>ce+1)throw"Something wrong with hufUnpackEncTable";for(;$e--;)Te[ie++]=0;ie--}else if(nt>=59){var $e=nt-59+2;if(ie+$e>ce+1)throw"Something wrong with hufUnpackEncTable";for(;$e--;)Te[ie++]=0;ie--}}U(Te)}function X(Z){return Z&63}function D(Z){return Z>>6}function F(Z,K,ne,G){for(;K<=ne;K++){var ie=D(Z[K]),ce=X(Z[K]);if(ie>>ce)throw"Invalid table entry";if(ce>14){var Te=G[ie>>ce-14];if(Te.len)throw"Invalid table entry";if(Te.lit++,Te.p){var de=Te.p;Te.p=new Array(Te.lit);for(var Ue=0;Ue<Te.lit-1;++Ue)Te.p[Ue]=de[Ue]}else Te.p=new Array(1);Te.p[Te.lit-1]=K}else if(ce)for(var Je=0,Ue=1<<14-ce;Ue>0;Ue--){var Te=G[(ie<<14-ce)+Je];if(Te.len||Te.p)throw"Invalid table entry";Te.len=ce,Te.lit=K,Je++}}return!0}const W={c:0,lc:0};function V(Z,K,ne,G){Z=Z<<8|Le(ne,G),K+=8,W.c=Z,W.lc=K}const j={c:0,lc:0};function J(Z,K,ne,G,ie,ce,Te,de,Ue,Je){if(Z==K){G<8&&(V(ne,G,ie,Te),ne=W.c,G=W.lc),G-=8;var nt=ne>>G,nt=new Uint8Array([nt])[0];if(Ue.value+nt>Je)return!1;for(var $e=de[Ue.value-1];nt-- >0;)de[Ue.value++]=$e}else if(Ue.value<Je)de[Ue.value++]=Z;else return!1;j.c=ne,j.lc=G}function Q(Z){return Z&65535}function te(Z){var K=Q(Z);return K>32767?K-65536:K}const re={a:0,b:0};function se(Z,K){var ne=te(Z),G=te(K),ie=G,ce=ne+(ie&1)+(ie>>1),Te=ce,de=ce-ie;re.a=Te,re.b=de}function fe(Z,K){var ne=Q(Z),G=Q(K),ie=ne-(G>>1)&65535,ce=G+ie-32768&65535;re.a=ce,re.b=ie}function ae(Z,K,ne,G,ie,ce,Te){for(var de=Te<16384,Ue=ne>ie?ie:ne,Je=1,nt;Je<=Ue;)Je<<=1;for(Je>>=1,nt=Je,Je>>=1;Je>=1;){for(var $e=0,Ct=$e+ce*(ie-nt),ht=ce*Je,ft=ce*nt,Lt=G*Je,Jt=G*nt,tn,gn,Pt,Et;$e<=Ct;$e+=ft){for(var Cn=$e,en=$e+G*(ne-nt);Cn<=en;Cn+=Jt){var cn=Cn+Lt,ar=Cn+ht,Fn=ar+Lt;de?(se(Z[Cn+K],Z[ar+K]),tn=re.a,Pt=re.b,se(Z[cn+K],Z[Fn+K]),gn=re.a,Et=re.b,se(tn,gn),Z[Cn+K]=re.a,Z[cn+K]=re.b,se(Pt,Et),Z[ar+K]=re.a,Z[Fn+K]=re.b):(fe(Z[Cn+K],Z[ar+K]),tn=re.a,Pt=re.b,fe(Z[cn+K],Z[Fn+K]),gn=re.a,Et=re.b,fe(tn,gn),Z[Cn+K]=re.a,Z[cn+K]=re.b,fe(Pt,Et),Z[ar+K]=re.a,Z[Fn+K]=re.b)}if(ne&Je){var ar=Cn+ht;de?se(Z[Cn+K],Z[ar+K]):fe(Z[Cn+K],Z[ar+K]),tn=re.a,Z[ar+K]=re.b,Z[Cn+K]=tn}}if(ie&Je)for(var Cn=$e,en=$e+G*(ne-nt);Cn<=en;Cn+=Jt){var cn=Cn+Lt;de?se(Z[Cn+K],Z[cn+K]):fe(Z[Cn+K],Z[cn+K]),tn=re.a,Z[cn+K]=re.b,Z[Cn+K]=tn}nt=Je,Je>>=1}return $e}function ye(Z,K,ne,G,ie,ce,Te,de,Ue,Je){for(var nt=0,$e=0,Ct=de,ht=Math.trunc(ie.value+(ce+7)/8);ie.value<ht;)for(V(nt,$e,ne,ie),nt=W.c,$e=W.lc;$e>=14;){var ft=nt>>$e-14&16383,Lt=K[ft];if(Lt.len)$e-=Lt.len,J(Lt.lit,Te,nt,$e,ne,G,ie,Ue,Je,Ct),nt=j.c,$e=j.lc;else{if(!Lt.p)throw"hufDecode issues";var Jt;for(Jt=0;Jt<Lt.lit;Jt++){for(var tn=X(Z[Lt.p[Jt]]);$e<tn&&ie.value<ht;)V(nt,$e,ne,ie),nt=W.c,$e=W.lc;if($e>=tn&&D(Z[Lt.p[Jt]])==(nt>>$e-tn&(1<<tn)-1)){$e-=tn,J(Lt.p[Jt],Te,nt,$e,ne,G,ie,Ue,Je,Ct),nt=j.c,$e=j.lc;break}}if(Jt==Lt.lit)throw"hufDecode issues"}}var gn=8-ce&7;for(nt>>=gn,$e-=gn;$e>0;){var Lt=K[nt<<14-$e&16383];if(Lt.len)$e-=Lt.len,J(Lt.lit,Te,nt,$e,ne,G,ie,Ue,Je,Ct),nt=j.c,$e=j.lc;else throw"hufDecode issues"}return!0}function le(Z,K,ne,G,ie,ce){var Te={value:0},de=ne.value,Ue=Xe(K,ne),Je=Xe(K,ne);ne.value+=4;var nt=Xe(K,ne);if(ne.value+=4,Ue<0||Ue>=65537||Je<0||Je>=65537)throw"Something wrong with HUF_ENCSIZE";var $e=new Array(65537),Ct=new Array(16384);R(Ct);var ht=G-(ne.value-de);if(z(Z,K,ne,ht,Ue,Je,$e),nt>8*(G-(ne.value-de)))throw"Something wrong with hufUncompress";F($e,Ue,Je,Ct),ye($e,Ct,Z,K,ne,nt,Je,ce,ie,Te)}function H(Z,K,ne){for(var G=0;G<ne;++G)K[G]=Z[K[G]]}function Me(Z){for(var K=1;K<Z.length;K++){var ne=Z[K-1]+Z[K]-128;Z[K]=ne}}function we(Z,K){for(var ne=0,G=Math.floor((Z.length+1)/2),ie=0,ce=Z.length-1;!(ie>ce||(K[ie++]=Z[ne++],ie>ce));)K[ie++]=Z[G++]}function Ee(Z){for(var K=Z.byteLength,ne=new Array,G=0,ie=new DataView(Z);K>0;){var ce=ie.getInt8(G++);if(ce<0){var Te=-ce;K-=Te+1;for(var de=0;de<Te;de++)ne.push(ie.getUint8(G++))}else{var Te=ce;K-=2;for(var Ue=ie.getUint8(G++),de=0;de<Te+1;de++)ne.push(Ue)}}return ne}function me(Z,K,ne,G,ie,ce){var cn=new DataView(ce.buffer),Te=ne[Z.idx[0]].width,de=ne[Z.idx[0]].height,Ue=3,Je=Math.floor(Te/8),nt=Math.ceil(Te/8),$e=Math.ceil(de/8),Ct=Te-(nt-1)*8,ht=de-($e-1)*8,ft={value:0},Lt=new Array(Ue),Jt=new Array(Ue),tn=new Array(Ue),gn=new Array(Ue),Pt=new Array(Ue);for(let fn=0;fn<Ue;++fn)Pt[fn]=K[Z.idx[fn]],Lt[fn]=fn<1?0:Lt[fn-1]+nt*$e,Jt[fn]=new Float32Array(64),tn[fn]=new Uint16Array(64),gn[fn]=new Uint16Array(nt*64);for(let fn=0;fn<$e;++fn){var Et=8;fn==$e-1&&(Et=ht);var Cn=8;for(let nn=0;nn<nt;++nn){nn==nt-1&&(Cn=Ct);for(let an=0;an<Ue;++an)tn[an].fill(0),tn[an][0]=ie[Lt[an]++],qe(ft,G,tn[an]),ke(tn[an],Jt[an]),ee(Jt[an]);Y(Jt);for(let an=0;an<Ue;++an)oe(Jt[an],gn[an],nn*64)}let Yn=0;for(let nn=0;nn<Ue;++nn){const an=ne[Z.idx[nn]].type;for(let Nr=8*fn;Nr<8*fn+Et;++Nr){Yn=Pt[nn][Nr];for(let Os=0;Os<Je;++Os){const Pi=Os*64+(Nr&7)*8;cn.setUint16(Yn+0*2*an,gn[nn][Pi+0],!0),cn.setUint16(Yn+1*2*an,gn[nn][Pi+1],!0),cn.setUint16(Yn+2*2*an,gn[nn][Pi+2],!0),cn.setUint16(Yn+3*2*an,gn[nn][Pi+3],!0),cn.setUint16(Yn+4*2*an,gn[nn][Pi+4],!0),cn.setUint16(Yn+5*2*an,gn[nn][Pi+5],!0),cn.setUint16(Yn+6*2*an,gn[nn][Pi+6],!0),cn.setUint16(Yn+7*2*an,gn[nn][Pi+7],!0),Yn+=8*2*an}}if(Je!=nt)for(let Nr=8*fn;Nr<8*fn+Et;++Nr){const Os=Pt[nn][Nr]+8*Je*2*an,Pi=Je*64+(Nr&7)*8;for(let Aa=0;Aa<Cn;++Aa)cn.setUint16(Os+Aa*2*an,gn[nn][Pi+Aa],!0)}}}for(var en=new Uint16Array(Te),cn=new DataView(ce.buffer),ar=0;ar<Ue;++ar){ne[Z.idx[ar]].decoded=!0;var Fn=ne[Z.idx[ar]].type;if(ne[ar].type==2)for(var Hn=0;Hn<de;++Hn){const fn=Pt[ar][Hn];for(var _n=0;_n<Te;++_n)en[_n]=cn.getUint16(fn+_n*2*Fn,!0);for(var _n=0;_n<Te;++_n)cn.setFloat32(fn+_n*2*Fn,Ie(en[_n]),!0)}}}function qe(Z,K,ne){for(var G,ie=1;ie<64;)G=K[Z.value],G==65280?ie=64:G>>8==255?ie+=G&255:(ne[ie]=G,ie++),Z.value++}function ke(Z,K){K[0]=Ie(Z[0]),K[1]=Ie(Z[1]),K[2]=Ie(Z[5]),K[3]=Ie(Z[6]),K[4]=Ie(Z[14]),K[5]=Ie(Z[15]),K[6]=Ie(Z[27]),K[7]=Ie(Z[28]),K[8]=Ie(Z[2]),K[9]=Ie(Z[4]),K[10]=Ie(Z[7]),K[11]=Ie(Z[13]),K[12]=Ie(Z[16]),K[13]=Ie(Z[26]),K[14]=Ie(Z[29]),K[15]=Ie(Z[42]),K[16]=Ie(Z[3]),K[17]=Ie(Z[8]),K[18]=Ie(Z[12]),K[19]=Ie(Z[17]),K[20]=Ie(Z[25]),K[21]=Ie(Z[30]),K[22]=Ie(Z[41]),K[23]=Ie(Z[43]),K[24]=Ie(Z[9]),K[25]=Ie(Z[11]),K[26]=Ie(Z[18]),K[27]=Ie(Z[24]),K[28]=Ie(Z[31]),K[29]=Ie(Z[40]),K[30]=Ie(Z[44]),K[31]=Ie(Z[53]),K[32]=Ie(Z[10]),K[33]=Ie(Z[19]),K[34]=Ie(Z[23]),K[35]=Ie(Z[32]),K[36]=Ie(Z[39]),K[37]=Ie(Z[45]),K[38]=Ie(Z[52]),K[39]=Ie(Z[54]),K[40]=Ie(Z[20]),K[41]=Ie(Z[22]),K[42]=Ie(Z[33]),K[43]=Ie(Z[38]),K[44]=Ie(Z[46]),K[45]=Ie(Z[51]),K[46]=Ie(Z[55]),K[47]=Ie(Z[60]),K[48]=Ie(Z[21]),K[49]=Ie(Z[34]),K[50]=Ie(Z[37]),K[51]=Ie(Z[47]),K[52]=Ie(Z[50]),K[53]=Ie(Z[56]),K[54]=Ie(Z[59]),K[55]=Ie(Z[61]),K[56]=Ie(Z[35]),K[57]=Ie(Z[36]),K[58]=Ie(Z[48]),K[59]=Ie(Z[49]),K[60]=Ie(Z[57]),K[61]=Ie(Z[58]),K[62]=Ie(Z[62]),K[63]=Ie(Z[63])}function ee(Z){const K=.5*Math.cos(.7853975),ne=.5*Math.cos(3.14159/16),G=.5*Math.cos(3.14159/8),ie=.5*Math.cos(3*3.14159/16),ce=.5*Math.cos(5*3.14159/16),Te=.5*Math.cos(3*3.14159/8),de=.5*Math.cos(7*3.14159/16);for(var Ue=new Array(4),Je=new Array(4),nt=new Array(4),$e=new Array(4),Ct=0;Ct<8;++Ct){var ht=Ct*8;Ue[0]=G*Z[ht+2],Ue[1]=Te*Z[ht+2],Ue[2]=G*Z[ht+6],Ue[3]=Te*Z[ht+6],Je[0]=ne*Z[ht+1]+ie*Z[ht+3]+ce*Z[ht+5]+de*Z[ht+7],Je[1]=ie*Z[ht+1]-de*Z[ht+3]-ne*Z[ht+5]-ce*Z[ht+7],Je[2]=ce*Z[ht+1]-ne*Z[ht+3]+de*Z[ht+5]+ie*Z[ht+7],Je[3]=de*Z[ht+1]-ce*Z[ht+3]+ie*Z[ht+5]-ne*Z[ht+7],nt[0]=K*(Z[ht+0]+Z[ht+4]),nt[3]=K*(Z[ht+0]-Z[ht+4]),nt[1]=Ue[0]+Ue[3],nt[2]=Ue[1]-Ue[2],$e[0]=nt[0]+nt[1],$e[1]=nt[3]+nt[2],$e[2]=nt[3]-nt[2],$e[3]=nt[0]-nt[1],Z[ht+0]=$e[0]+Je[0],Z[ht+1]=$e[1]+Je[1],Z[ht+2]=$e[2]+Je[2],Z[ht+3]=$e[3]+Je[3],Z[ht+4]=$e[3]-Je[3],Z[ht+5]=$e[2]-Je[2],Z[ht+6]=$e[1]-Je[1],Z[ht+7]=$e[0]-Je[0]}for(var ft=0;ft<8;++ft)Ue[0]=G*Z[16+ft],Ue[1]=Te*Z[16+ft],Ue[2]=G*Z[48+ft],Ue[3]=Te*Z[48+ft],Je[0]=ne*Z[8+ft]+ie*Z[24+ft]+ce*Z[40+ft]+de*Z[56+ft],Je[1]=ie*Z[8+ft]-de*Z[24+ft]-ne*Z[40+ft]-ce*Z[56+ft],Je[2]=ce*Z[8+ft]-ne*Z[24+ft]+de*Z[40+ft]+ie*Z[56+ft],Je[3]=de*Z[8+ft]-ce*Z[24+ft]+ie*Z[40+ft]-ne*Z[56+ft],nt[0]=K*(Z[ft]+Z[32+ft]),nt[3]=K*(Z[ft]-Z[32+ft]),nt[1]=Ue[0]+Ue[3],nt[2]=Ue[1]-Ue[2],$e[0]=nt[0]+nt[1],$e[1]=nt[3]+nt[2],$e[2]=nt[3]-nt[2],$e[3]=nt[0]-nt[1],Z[0+ft]=$e[0]+Je[0],Z[8+ft]=$e[1]+Je[1],Z[16+ft]=$e[2]+Je[2],Z[24+ft]=$e[3]+Je[3],Z[32+ft]=$e[3]-Je[3],Z[40+ft]=$e[2]-Je[2],Z[48+ft]=$e[1]-Je[1],Z[56+ft]=$e[0]-Je[0]}function Y(Z){for(var K=0;K<64;++K){var ne=Z[0][K],G=Z[1][K],ie=Z[2][K];Z[0][K]=ne+1.5747*ie,Z[1][K]=ne-.1873*G-.4682*ie,Z[2][K]=ne+1.8556*G}}function oe(Z,K,ne){for(var G=0;G<64;++G)K[ne+G]=Bp.toHalfFloat(xe(Z[G]))}function xe(Z){return Z<=1?Math.sign(Z)*Math.pow(Math.abs(Z),2.2):Math.sign(Z)*Math.pow(k,Math.abs(Z)-1)}function Se(Z){return new DataView(Z.array.buffer,Z.offset.value,Z.size)}function be(Z){var K=Z.viewer.buffer.slice(Z.offset.value,Z.offset.value+Z.size),ne=new Uint8Array(Ee(K)),G=new Uint8Array(ne.length);return Me(ne),we(ne,G),new DataView(G.buffer)}function Re(Z){var K=Z.array.slice(Z.offset.value,Z.offset.value+Z.size),ne=aT(K),G=new Uint8Array(ne.length);return Me(ne),we(ne,G),new DataView(G.buffer)}function Ke(Z){for(var K=Z.viewer,ne={value:Z.offset.value},G=new Uint16Array(Z.width*Z.scanlineBlockSize*(Z.channels*Z.type)),ie=new Uint8Array(8192),ce=0,Te=new Array(Z.channels),de=0;de<Z.channels;de++)Te[de]={},Te[de].start=ce,Te[de].end=Te[de].start,Te[de].nx=Z.width,Te[de].ny=Z.lines,Te[de].size=Z.type,ce+=Te[de].nx*Te[de].ny*Te[de].size;var Ue=Ce(K,ne),Je=Ce(K,ne);if(Je>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Ue<=Je)for(var de=0;de<Je-Ue+1;de++)ie[de+Ue]=he(K,ne);var nt=new Uint16Array(65536),$e=M(ie,nt),Ct=Xe(K,ne);le(Z.array,K,ne,Ct,G,ce);for(var de=0;de<Z.channels;++de)for(var ht=Te[de],ft=0;ft<Te[de].size;++ft)ae(G,ht.start+ft,ht.nx,ht.size,ht.ny,ht.nx*ht.size,$e);H(nt,G,ce);for(var Lt=0,Jt=new Uint8Array(G.buffer.byteLength),tn=0;tn<Z.lines;tn++)for(var gn=0;gn<Z.channels;gn++){var ht=Te[gn],Pt=ht.nx*ht.size,Et=new Uint8Array(G.buffer,ht.end*2,Pt*2);Jt.set(Et,Lt),Lt+=Pt*2,ht.end+=Pt}return new DataView(Jt.buffer)}function ze(Z){var K=Z.array.slice(Z.offset.value,Z.offset.value+Z.size),ne=aT(K);const G=Z.lines*Z.channels*Z.width,ie=Z.type==1?new Uint16Array(G):new Uint32Array(G);let ce=0,Te=0;const de=new Array(4);for(let Ue=0;Ue<Z.lines;Ue++)for(let Je=0;Je<Z.channels;Je++){let nt=0;switch(Z.type){case 1:de[0]=ce,de[1]=de[0]+Z.width,ce=de[1]+Z.width;for(let $e=0;$e<Z.width;++$e){const Ct=ne[de[0]++]<<8|ne[de[1]++];nt+=Ct,ie[Te]=nt,Te++}break;case 2:de[0]=ce,de[1]=de[0]+Z.width,de[2]=de[1]+Z.width,ce=de[2]+Z.width;for(let $e=0;$e<Z.width;++$e){const Ct=ne[de[0]++]<<24|ne[de[1]++]<<16|ne[de[2]++]<<8;nt+=Ct,ie[Te]=nt,Te++}break}}return new DataView(ie.buffer)}function Pe(Z){var K=Z.viewer,ne={value:Z.offset.value},G=new Uint8Array(Z.width*Z.lines*(Z.channels*Z.type*2)),ie={version:He(K,ne),unknownUncompressedSize:He(K,ne),unknownCompressedSize:He(K,ne),acCompressedSize:He(K,ne),dcCompressedSize:He(K,ne),rleCompressedSize:He(K,ne),rleUncompressedSize:He(K,ne),rleRawSize:He(K,ne),totalAcUncompressedCount:He(K,ne),totalDcUncompressedCount:He(K,ne),acCompression:He(K,ne)};if(ie.version<2)throw"EXRLoader.parse: "+Nt.compression+" version "+ie.version+" is unsupported";for(var ce=new Array,Te=Ce(K,ne)-2;Te>0;){var de=De(K.buffer,ne),Ue=he(K,ne),Je=Ue>>2&3,nt=(Ue>>4)-1,$e=new Int8Array([nt])[0],Ct=he(K,ne);ce.push({name:de,index:$e,type:Ct,compression:Je}),Te-=de.length+3}for(var ht=Nt.channels,ft=new Array(Z.channels),Lt=0;Lt<Z.channels;++Lt){var Jt=ft[Lt]={},tn=ht[Lt];Jt.name=tn.name,Jt.compression=0,Jt.decoded=!1,Jt.type=tn.pixelType,Jt.pLinear=tn.pLinear,Jt.width=Z.width,Jt.height=Z.lines}for(var gn={idx:new Array(3)},Pt=0;Pt<Z.channels;++Pt)for(var Jt=ft[Pt],Lt=0;Lt<ce.length;++Lt){var Et=ce[Lt];Jt.name==Et.name&&(Jt.compression=Et.compression,Et.index>=0&&(gn.idx[Et.index]=Pt),Jt.offset=Pt)}if(ie.acCompressedSize>0)switch(ie.acCompression){case 0:var cn=new Uint16Array(ie.totalAcUncompressedCount);le(Z.array,K,ne,ie.acCompressedSize,cn,ie.totalAcUncompressedCount);break;case 1:var Cn=Z.array.slice(ne.value,ne.value+ie.totalAcUncompressedCount),en=aT(Cn),cn=new Uint16Array(en.buffer);ne.value+=ie.totalAcUncompressedCount;break}if(ie.dcCompressedSize>0){var ar={array:Z.array,offset:ne,size:ie.dcCompressedSize},Fn=new Uint16Array(Re(ar).buffer);ne.value+=ie.dcCompressedSize}if(ie.rleRawSize>0){var Cn=Z.array.slice(ne.value,ne.value+ie.rleCompressedSize),en=aT(Cn),Hn=Ee(en.buffer);ne.value+=ie.rleCompressedSize}for(var _n=0,fn=new Array(ft.length),Lt=0;Lt<fn.length;++Lt)fn[Lt]=new Array;for(var Yn=0;Yn<Z.lines;++Yn)for(var nn=0;nn<ft.length;++nn)fn[nn].push(_n),_n+=ft[nn].width*Z.type*2;me(gn,fn,ft,cn,Fn,G);for(var Lt=0;Lt<ft.length;++Lt){var Jt=ft[Lt];if(!Jt.decoded)switch(Jt.compression){case 2:for(var an=0,Nr=0,Yn=0;Yn<Z.lines;++Yn){for(var Os=fn[Lt][an],Pi=0;Pi<Jt.width;++Pi){for(var Aa=0;Aa<2*Jt.type;++Aa)G[Os++]=Hn[Nr+Aa*Jt.width*Jt.height];Nr++}an++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(G.buffer)}function De(Z,K){for(var ne=new Uint8Array(Z),G=0;ne[K.value+G]!=0;)G+=1;var ie=new TextDecoder().decode(ne.slice(K.value,K.value+G));return K.value=K.value+G+1,ie}function We(Z,K,ne){var G=new TextDecoder().decode(new Uint8Array(Z).slice(K.value,K.value+ne));return K.value=K.value+ne,G}function gt(Z,K){var ne=Ye(Z,K),G=Xe(Z,K);return[ne,G]}function ct(Z,K){var ne=Xe(Z,K),G=Xe(Z,K);return[ne,G]}function Ye(Z,K){var ne=Z.getInt32(K.value,!0);return K.value=K.value+4,ne}function Xe(Z,K){var ne=Z.getUint32(K.value,!0);return K.value=K.value+4,ne}function Le(Z,K){var ne=Z[K.value];return K.value=K.value+1,ne}function he(Z,K){var ne=Z.getUint8(K.value);return K.value=K.value+1,ne}const He=function(Z,K){let ne;return"getBigInt64"in DataView.prototype?ne=Number(Z.getBigInt64(K.value,!0)):ne=Z.getUint32(K.value+4,!0)+Number(Z.getUint32(K.value,!0)<<32),K.value+=8,ne};function ot(Z,K){var ne=Z.getFloat32(K.value,!0);return K.value+=4,ne}function et(Z,K){return Bp.toHalfFloat(ot(Z,K))}function Ie(Z){var K=(Z&31744)>>10,ne=Z&1023;return(Z>>15?-1:1)*(K?K===31?ne?NaN:1/0:Math.pow(2,K-15)*(1+ne/1024):6103515625e-14*(ne/1024))}function Ce(Z,K){var ne=Z.getUint16(K.value,!0);return K.value+=2,ne}function ut(Z,K){return Ie(Ce(Z,K))}function dt(Z,K,ne,G){for(var ie=ne.value,ce=[];ne.value<ie+G-1;){var Te=De(K,ne),de=Ye(Z,ne),Ue=he(Z,ne);ne.value+=3;var Je=Ye(Z,ne),nt=Ye(Z,ne);ce.push({name:Te,pixelType:de,pLinear:Ue,xSampling:Je,ySampling:nt})}return ne.value+=1,ce}function yt(Z,K){var ne=ot(Z,K),G=ot(Z,K),ie=ot(Z,K),ce=ot(Z,K),Te=ot(Z,K),de=ot(Z,K),Ue=ot(Z,K),Je=ot(Z,K);return{redX:ne,redY:G,greenX:ie,greenY:ce,blueX:Te,blueY:de,whiteX:Ue,whiteY:Je}}function vt(Z,K){var ne=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],G=he(Z,K);return ne[G]}function zt(Z,K){var ne=Xe(Z,K),G=Xe(Z,K),ie=Xe(Z,K),ce=Xe(Z,K);return{xMin:ne,yMin:G,xMax:ie,yMax:ce}}function It(Z,K){var ne=["INCREASING_Y"],G=he(Z,K);return ne[G]}function Qt(Z,K){var ne=ot(Z,K),G=ot(Z,K);return[ne,G]}function $t(Z,K){var ne=ot(Z,K),G=ot(Z,K),ie=ot(Z,K);return[ne,G,ie]}function mt(Z,K,ne,G,ie){if(G==="string"||G==="stringvector"||G==="iccProfile")return We(K,ne,ie);if(G==="chlist")return dt(Z,K,ne,ie);if(G==="chromaticities")return yt(Z,ne);if(G==="compression")return vt(Z,ne);if(G==="box2i")return zt(Z,ne);if(G==="lineOrder")return It(Z,ne);if(G==="float")return ot(Z,ne);if(G==="v2f")return Qt(Z,ne);if(G==="v3f")return $t(Z,ne);if(G==="int")return Ye(Z,ne);if(G==="rational")return gt(Z,ne);if(G==="timecode")return ct(Z,ne);if(G==="preview")return ne.value+=ie,"skipped";ne.value+=ie}function Ht(Z,K,ne){const G={};if(Z.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";G.version=Z.getUint8(4);const ie=Z.getUint8(5);G.spec={singleTile:!!(ie&2),longName:!!(ie&4),deepFormat:!!(ie&8),multiPart:!!(ie&16)},ne.value=8;for(var ce=!0;ce;){var Te=De(K,ne);if(Te==0)ce=!1;else{var de=De(K,ne),Ue=Xe(Z,ne),Je=mt(Z,K,ne,de,Ue);Je===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${de}'.`):G[Te]=Je}}if(ie&-5)throw console.error("EXRHeader:",G),"THREE.EXRLoader: provided file is currently unsupported.";return G}function pn(Z,K,ne,G,ie){const ce={size:0,viewer:K,array:ne,offset:G,width:Z.dataWindow.xMax-Z.dataWindow.xMin+1,height:Z.dataWindow.yMax-Z.dataWindow.yMin+1,channels:Z.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:Z.channels[0].pixelType,uncompress:null,getter:null,format:null,[Hx?"colorSpace":"encoding"]:null};switch(Z.compression){case"NO_COMPRESSION":ce.lines=1,ce.uncompress=Se;break;case"RLE_COMPRESSION":ce.lines=1,ce.uncompress=be;break;case"ZIPS_COMPRESSION":ce.lines=1,ce.uncompress=Re;break;case"ZIP_COMPRESSION":ce.lines=16,ce.uncompress=Re;break;case"PIZ_COMPRESSION":ce.lines=32,ce.uncompress=Ke;break;case"PXR24_COMPRESSION":ce.lines=16,ce.uncompress=ze;break;case"DWAA_COMPRESSION":ce.lines=32,ce.uncompress=Pe;break;case"DWAB_COMPRESSION":ce.lines=256,ce.uncompress=Pe;break;default:throw"EXRLoader.parse: "+Z.compression+" is unsupported"}if(ce.scanlineBlockSize=ce.lines,ce.type==1)switch(ie){case Ms:ce.getter=ut,ce.inputSize=2;break;case xo:ce.getter=Ce,ce.inputSize=2;break}else if(ce.type==2)switch(ie){case Ms:ce.getter=ot,ce.inputSize=4;break;case xo:ce.getter=et,ce.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+ce.type+" for "+Z.compression+".";ce.blockCount=(Z.dataWindow.yMax+1)/ce.scanlineBlockSize;for(var Te=0;Te<ce.blockCount;Te++)He(K,G);ce.outputChannels=ce.channels==3?4:ce.channels;const de=ce.width*ce.height*ce.outputChannels;switch(ie){case Ms:ce.byteArray=new Float32Array(de),ce.channels<ce.outputChannels&&ce.byteArray.fill(1,0,de);break;case xo:ce.byteArray=new Uint16Array(de),ce.channels<ce.outputChannels&&ce.byteArray.fill(15360,0,de);break;default:console.error("THREE.EXRLoader: unsupported type: ",ie);break}return ce.bytesPerLine=ce.width*ce.inputSize*ce.channels,ce.outputChannels==4?ce.format=vo:ce.format=rB,Hx?ce.colorSpace="srgb-linear":ce.encoding=3e3,ce}const dn=new DataView(e),_t=new Uint8Array(e),Dt={value:0},Nt=Ht(dn,e,Dt),bt=pn(Nt,dn,_t,Dt,this.type),Wt={value:0},Sn={R:0,G:1,B:2,A:3,Y:0};for(let Z=0;Z<bt.height/bt.scanlineBlockSize;Z++){const K=Xe(dn,Dt);bt.size=Xe(dn,Dt),bt.lines=K+bt.scanlineBlockSize>bt.height?bt.height-K:bt.scanlineBlockSize;const G=bt.size<bt.lines*bt.bytesPerLine?bt.uncompress(bt):Se(bt);Dt.value+=bt.size;for(let ie=0;ie<bt.scanlineBlockSize;ie++){const ce=ie+Z*bt.scanlineBlockSize;if(ce>=bt.height)break;for(let Te=0;Te<bt.channels;Te++){const de=Sn[Nt.channels[Te].name];for(let Ue=0;Ue<bt.width;Ue++){Wt.value=(ie*(bt.channels*bt.width)+Te*bt.width+Ue)*bt.inputSize;const Je=(bt.height-1-ce)*(bt.width*bt.outputChannels)+Ue*bt.outputChannels+de;bt.byteArray[Je]=bt.getter(G,Wt)}}}}return{header:Nt,width:bt.width,height:bt.height,data:bt.byteArray,format:bt.format,[Hx?"colorSpace":"encoding"]:bt[Hx?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,r,i){function s(o,a){Hx?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Er,o.magFilter=Er,o.generateMipmaps=!1,o.flipY=!1,n&&n(o,a)}return super.load(e,s,r,i)}}const Rq=new ms,cT=new pe;class qB extends CI{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new Yt(e,3)),this.setAttribute("uv",new Yt(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,r=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),r.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new MM(n,6,1);return this.setAttribute("instanceStart",new Ya(r,3,0)),this.setAttribute("instanceEnd",new Ya(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new MM(n,6,1);return this.setAttribute("instanceColorStart",new Ya(r,3,0)),this.setAttribute("instanceColorEnd",new Ya(r,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new AB(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ms);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),Rq.setFromBufferAttribute(n),this.boundingBox.union(Rq))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new gs),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)cT.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(cT)),cT.fromBufferAttribute(n,s),i=Math.max(i,r.distanceToSquared(cT));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class Yae extends qB{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setPositions(r),this}setColors(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setColors(r),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}class YB extends jl{constructor(e){super({type:"LineMaterial",uniforms:tw.clone(tw.merge([Mt.common,Mt.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new lt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <color_pars_vertex>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				attribute vec3 instanceColorStart;
				attribute vec3 instanceColorEnd;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <color_pars_fragment>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );

					#include <logdepthbuf_fragment>
					#include <color_fragment>

					gl_FragColor = vec4( diffuseColor.rgb, alpha );

					#include <tonemapping_fragment>
					#include <${parseInt(xy.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(n){!!n!="USE_DASH"in this.defines&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(n){!!n!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const Nq=new pe,Pq=new pe,Us=new er,Bs=new er,Qc=new er,a$=new pe,l$=new wn,fo=new gae,$q=new pe,uT=new ms,dT=new gs,eu=new er;let mu,kO,Kae,im;function Dq(t,e,n){return eu.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),eu.multiplyScalar(1/eu.w),eu.x=im/n.width,eu.y=im/n.height,eu.applyMatrix4(t.projectionMatrixInverse),eu.multiplyScalar(1/eu.w),Math.abs(Math.max(eu.x,eu.y))}function Vet(t,e){for(let n=0,r=kO.count;n<r;n++){fo.start.fromBufferAttribute(kO,n),fo.end.fromBufferAttribute(Kae,n);const i=new pe,s=new pe;mu.distanceSqToSegment(fo.start,fo.end,s,i),s.distanceTo(i)<im*.5&&e.push({point:s,pointOnLine:i,distance:mu.origin.distanceTo(s),object:t,face:null,faceIndex:n,uv:null,uv2:null})}}function Get(t,e,n){const r=e.projectionMatrix,s=t.material.resolution,o=t.matrixWorld,a=t.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=-e.near;mu.at(1,Qc),Qc.w=1,Qc.applyMatrix4(e.matrixWorldInverse),Qc.applyMatrix4(r),Qc.multiplyScalar(1/Qc.w),Qc.x*=s.x/2,Qc.y*=s.y/2,Qc.z=0,a$.copy(Qc),l$.multiplyMatrices(e.matrixWorldInverse,o);for(let d=0,f=l.count;d<f;d++){if(Us.fromBufferAttribute(l,d),Bs.fromBufferAttribute(c,d),Us.w=1,Bs.w=1,Us.applyMatrix4(l$),Bs.applyMatrix4(l$),Us.z>u&&Bs.z>u)continue;if(Us.z>u){const y=Us.z-Bs.z,x=(Us.z-u)/y;Us.lerp(Bs,x)}else if(Bs.z>u){const y=Bs.z-Us.z,x=(Bs.z-u)/y;Bs.lerp(Us,x)}Us.applyMatrix4(r),Bs.applyMatrix4(r),Us.multiplyScalar(1/Us.w),Bs.multiplyScalar(1/Bs.w),Us.x*=s.x/2,Us.y*=s.y/2,Bs.x*=s.x/2,Bs.y*=s.y/2,fo.start.copy(Us),fo.start.z=0,fo.end.copy(Bs),fo.end.z=0;const p=fo.closestPointToPointParameter(a$,!0);fo.at(p,$q);const v=coe.lerp(Us.z,Bs.z,p),m=v>=-1&&v<=1,g=a$.distanceTo($q)<im*.5;if(m&&g){fo.start.fromBufferAttribute(l,d),fo.end.fromBufferAttribute(c,d),fo.start.applyMatrix4(o),fo.end.applyMatrix4(o);const y=new pe,x=new pe;mu.distanceSqToSegment(fo.start,fo.end,x,y),n.push({point:x,pointOnLine:y,distance:mu.origin.distanceTo(x),object:t,face:null,faceIndex:d,uv:null,uv2:null})}}}class Zae extends ai{constructor(e=new qB,n=new YB({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,r=e.attributes.instanceEnd,i=new Float32Array(2*n.count);for(let o=0,a=0,l=n.count;o<l;o++,a+=2)Nq.fromBufferAttribute(n,o),Pq.fromBufferAttribute(r,o),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+Nq.distanceTo(Pq);const s=new MM(i,2,1);return e.setAttribute("instanceDistanceStart",new Ya(s,1,0)),e.setAttribute("instanceDistanceEnd",new Ya(s,1,1)),this}raycast(e,n){const r=this.material.worldUnits,i=e.camera;i===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;mu=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;im=l.linewidth+s,kO=a.attributes.instanceStart,Kae=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),dT.copy(a.boundingSphere).applyMatrix4(o);let c;if(r)c=im*.5;else{const d=Math.max(i.near,dT.distanceToPoint(mu.origin));c=Dq(i,d,l.resolution)}if(dT.radius+=c,mu.intersectsSphere(dT)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),uT.copy(a.boundingBox).applyMatrix4(o);let u;if(r)u=im*.5;else{const d=Math.max(i.near,uT.distanceToPoint(mu.origin));u=Dq(i,d,l.resolution)}uT.expandByScalar(u),mu.intersectsBox(uT)!==!1&&(r?Vet(this,n):Get(this,i,n))}}class Het extends Zae{constructor(e=new Yae,n=new YB({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}const Lq=N.forwardRef(function({points:e,color:n="black",vertexColors:r,linewidth:i,lineWidth:s,segments:o,dashed:a,...l},c){const u=cs(p=>p.size),d=N.useMemo(()=>o?new Zae:new Het,[o]),[f]=N.useState(()=>new YB),h=N.useMemo(()=>{const p=o?new qB:new Yae,v=e.map(m=>{const g=Array.isArray(m);return m instanceof pe?[m.x,m.y,m.z]:m instanceof lt?[m.x,m.y,0]:g&&m.length===3?[m[0],m[1],m[2]]:g&&m.length===2?[m[0],m[1],0]:m});if(p.setPositions(v.flat()),r){const m=r.map(g=>g instanceof Bt?g.toArray():g);p.setColors(m.flat())}return p},[e,o,r]);return N.useLayoutEffect(()=>{d.computeLineDistances()},[e,d]),N.useLayoutEffect(()=>{a?f.defines.USE_DASH="":delete f.defines.USE_DASH,f.needsUpdate=!0},[a,f]),N.useEffect(()=>()=>h.dispose(),[h]),N.createElement("primitive",ve({object:d,ref:c},l),N.createElement("primitive",{object:h,attach:"geometry"}),N.createElement("primitive",ve({object:f,attach:"material",color:n,vertexColors:!!r,resolution:[u.width,u.height],linewidth:i??s,dashed:a},l)))});function jet(){var t=Object.create(null);function e(i,s){var o=i.id,a=i.name,l=i.dependencies;l===void 0&&(l=[]);var c=i.init;c===void 0&&(c=function(){});var u=i.getTransferables;if(u===void 0&&(u=null),!t[o])try{l=l.map(function(f){return f&&f.isWorkerModule&&(e(f,function(h){if(h instanceof Error)throw h}),f=t[f.id].value),f}),c=r("<"+a+">.init",c),u&&(u=r("<"+a+">.getTransferables",u));var d=null;typeof c=="function"?d=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:d,getTransferables:u},s(d)}catch(f){f&&f.noLog||console.error(f),s(f)}}function n(i,s){var o,a=i.id,l=i.args;(!t[a]||typeof t[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=t[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(d){return s(d instanceof Error?d:new Error(""+d))}):u(c)}catch(d){s(d)}function u(d){try{var f=t[a].getTransferables&&t[a].getTransferables(d);(!f||!Array.isArray(f)||!f.length)&&(f=void 0),s(d,f)}catch(h){console.error(h),s(h)}}}function r(i,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&n(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function Xet(t){var e=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,r=t.init;n=Array.isArray(n)?n.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var i=Promise.all(n).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var Jae=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return Jae=function(){return t},t},qet=0,Yet=0,c$=!1,F1=Object.create(null),U1=Object.create(null),AO=Object.create(null);function w2(t){if((!t||typeof t.init!="function")&&!c$)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,r=t.getTransferables,i=t.workerId;if(!Jae())return Xet(t);i==null&&(i="#default");var s="workerModule"+ ++qet,o=t.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(c$=!0,c=w2({workerId:i,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+oE(c)+`
)}`}),c$=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=Oq(i,"registerModule",l.workerModuleData);var d=function(){a=null,U1[i].delete(d)};(U1[i]||(U1[i]=new Set)).add(d)}return a.then(function(f){var h=f.isCallable;if(h)return Oq(i,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:oE(n),getTransferables:r&&oE(r)},l}function Ket(t){U1[t]&&U1[t].forEach(function(e){e()}),F1[t]&&(F1[t].terminate(),delete F1[t])}function oE(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Zet(t){var e=F1[t];if(!e){var n=oE(jet);e=F1[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=AO[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete AO[s],o(i)}}return e}function Oq(t,e,n){return new Promise(function(r,i){var s=++Yet;AO[s]=function(o){o.success?r(o.result):i(new Error("Error in worker "+e+" call: "+o.error))},Zet(t).postMessage({messageId:s,action:e,data:n})})}function Qae(){var t=function(e){function n(F,W,V,j,J,Q,te,re){var se=1-te;re.x=se*se*F+2*se*te*V+te*te*J,re.y=se*se*W+2*se*te*j+te*te*Q}function r(F,W,V,j,J,Q,te,re,se,fe){var ae=1-se;fe.x=ae*ae*ae*F+3*ae*ae*se*V+3*ae*se*se*J+se*se*se*te,fe.y=ae*ae*ae*W+3*ae*ae*se*j+3*ae*se*se*Q+se*se*se*re}function i(F,W){for(var V=/([MLQCZ])([^MLQCZ]*)/g,j,J,Q,te,re;j=V.exec(F);){var se=j[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(fe){return parseFloat(fe)});switch(j[1]){case"M":te=J=se[0],re=Q=se[1];break;case"L":(se[0]!==te||se[1]!==re)&&W("L",te,re,te=se[0],re=se[1]);break;case"Q":{W("Q",te,re,te=se[2],re=se[3],se[0],se[1]);break}case"C":{W("C",te,re,te=se[4],re=se[5],se[0],se[1],se[2],se[3]);break}case"Z":(te!==J||re!==Q)&&W("L",te,re,J,Q);break}}}function s(F,W,V){V===void 0&&(V=16);var j={x:0,y:0};i(F,function(J,Q,te,re,se,fe,ae,ye,le){switch(J){case"L":W(Q,te,re,se);break;case"Q":{for(var H=Q,Me=te,we=1;we<V;we++)n(Q,te,fe,ae,re,se,we/(V-1),j),W(H,Me,j.x,j.y),H=j.x,Me=j.y;break}case"C":{for(var Ee=Q,me=te,qe=1;qe<V;qe++)r(Q,te,fe,ae,ye,le,re,se,qe/(V-1),j),W(Ee,me,j.x,j.y),Ee=j.x,me=j.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(F,W){var V=F.getContext?F.getContext("webgl",c):F,j=l.get(V);if(!j){let Ee=function(oe){var xe=Q[oe];if(!xe&&(xe=Q[oe]=V.getExtension(oe),!xe))throw new Error(oe+" not supported");return xe},me=function(oe,xe){var Se=V.createShader(xe);return V.shaderSource(Se,oe),V.compileShader(Se),Se},qe=function(oe,xe,Se,be){if(!te[oe]){var Re={},Ke={},ze=V.createProgram();V.attachShader(ze,me(xe,V.VERTEX_SHADER)),V.attachShader(ze,me(Se,V.FRAGMENT_SHADER)),V.linkProgram(ze),te[oe]={program:ze,transaction:function(De){V.useProgram(ze),De({setUniform:function(gt,ct){for(var Ye=[],Xe=arguments.length-2;Xe-- >0;)Ye[Xe]=arguments[Xe+2];var Le=Ke[ct]||(Ke[ct]=V.getUniformLocation(ze,ct));V["uniform"+gt].apply(V,[Le].concat(Ye))},setAttribute:function(gt,ct,Ye,Xe,Le){var he=Re[gt];he||(he=Re[gt]={buf:V.createBuffer(),loc:V.getAttribLocation(ze,gt),data:null}),V.bindBuffer(V.ARRAY_BUFFER,he.buf),V.vertexAttribPointer(he.loc,ct,V.FLOAT,!1,0,0),V.enableVertexAttribArray(he.loc),J?V.vertexAttribDivisor(he.loc,Xe):Ee("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(he.loc,Xe),Le!==he.data&&(V.bufferData(V.ARRAY_BUFFER,Le,Ye),he.data=Le)}})}}}te[oe].transaction(be)},ke=function(oe,xe){se++;try{V.activeTexture(V.TEXTURE0+se);var Se=re[oe];Se||(Se=re[oe]=V.createTexture(),V.bindTexture(V.TEXTURE_2D,Se),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,V.NEAREST),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,V.NEAREST)),V.bindTexture(V.TEXTURE_2D,Se),xe(Se,se)}finally{se--}},ee=function(oe,xe,Se){var be=V.createFramebuffer();fe.push(be),V.bindFramebuffer(V.FRAMEBUFFER,be),V.activeTexture(V.TEXTURE0+xe),V.bindTexture(V.TEXTURE_2D,oe),V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,oe,0);try{Se(be)}finally{V.deleteFramebuffer(be),V.bindFramebuffer(V.FRAMEBUFFER,fe[--fe.length-1]||null)}},Y=function(){Q={},te={},re={},se=-1,fe.length=0};var ae=Ee,ye=me,le=qe,H=ke,Me=ee,we=Y,J=typeof WebGL2RenderingContext<"u"&&V instanceof WebGL2RenderingContext,Q={},te={},re={},se=-1,fe=[];V.canvas.addEventListener("webglcontextlost",function(oe){Y(),oe.preventDefault()},!1),l.set(V,j={gl:V,isWebGL2:J,getExtension:Ee,withProgram:qe,withTexture:ke,withTextureFramebuffer:ee,handleContextLoss:Y})}W(j)}function d(F,W,V,j,J,Q,te,re){te===void 0&&(te=15),re===void 0&&(re=null),u(F,function(se){var fe=se.gl,ae=se.withProgram,ye=se.withTexture;ye("copy",function(le,H){fe.texImage2D(fe.TEXTURE_2D,0,fe.RGBA,J,Q,0,fe.RGBA,fe.UNSIGNED_BYTE,W),ae("copy",o,a,function(Me){var we=Me.setUniform,Ee=Me.setAttribute;Ee("aUV",2,fe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),we("1i","image",H),fe.bindFramebuffer(fe.FRAMEBUFFER,re||null),fe.disable(fe.BLEND),fe.colorMask(te&8,te&4,te&2,te&1),fe.viewport(V,j,J,Q),fe.scissor(V,j,J,Q),fe.drawArrays(fe.TRIANGLES,0,3)})})})}function f(F,W,V){var j=F.width,J=F.height;u(F,function(Q){var te=Q.gl,re=new Uint8Array(j*J*4);te.readPixels(0,0,j,J,te.RGBA,te.UNSIGNED_BYTE,re),F.width=W,F.height=V,d(te,re,0,0,j,J)})}var h=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:d,resizeWebGLCanvasWithoutClearing:f});function p(F,W,V,j,J,Q){Q===void 0&&(Q=1);var te=new Uint8Array(F*W),re=j[2]-j[0],se=j[3]-j[1],fe=[];s(V,function(Ee,me,qe,ke){fe.push({x1:Ee,y1:me,x2:qe,y2:ke,minX:Math.min(Ee,qe),minY:Math.min(me,ke),maxX:Math.max(Ee,qe),maxY:Math.max(me,ke)})}),fe.sort(function(Ee,me){return Ee.maxX-me.maxX});for(var ae=0;ae<F;ae++)for(var ye=0;ye<W;ye++){var le=Me(j[0]+re*(ae+.5)/F,j[1]+se*(ye+.5)/W),H=Math.pow(1-Math.abs(le)/J,Q)/2;le<0&&(H=1-H),H=Math.max(0,Math.min(255,Math.round(H*255))),te[ye*F+ae]=H}return te;function Me(Ee,me){for(var qe=1/0,ke=1/0,ee=fe.length;ee--;){var Y=fe[ee];if(Y.maxX+ke<=Ee)break;if(Ee+ke>Y.minX&&me-ke<Y.maxY&&me+ke>Y.minY){var oe=g(Ee,me,Y.x1,Y.y1,Y.x2,Y.y2);oe<qe&&(qe=oe,ke=Math.sqrt(qe))}}return we(Ee,me)&&(ke=-ke),ke}function we(Ee,me){for(var qe=0,ke=fe.length;ke--;){var ee=fe[ke];if(ee.maxX<=Ee)break;var Y=ee.y1>me!=ee.y2>me&&Ee<(ee.x2-ee.x1)*(me-ee.y1)/(ee.y2-ee.y1)+ee.x1;Y&&(qe+=ee.y1<ee.y2?1:-1)}return qe!==0}}function v(F,W,V,j,J,Q,te,re,se,fe){Q===void 0&&(Q=1),re===void 0&&(re=0),se===void 0&&(se=0),fe===void 0&&(fe=0),m(F,W,V,j,J,Q,te,null,re,se,fe)}function m(F,W,V,j,J,Q,te,re,se,fe,ae){Q===void 0&&(Q=1),se===void 0&&(se=0),fe===void 0&&(fe=0),ae===void 0&&(ae=0);for(var ye=p(F,W,V,j,J,Q),le=new Uint8Array(ye.length*4),H=0;H<ye.length;H++)le[H*4+ae]=ye[H];d(te,le,se,fe,F,W,1<<3-ae,re)}function g(F,W,V,j,J,Q){var te=J-V,re=Q-j,se=te*te+re*re,fe=se?Math.max(0,Math.min(1,((F-V)*te+(W-j)*re)/se)):0,ae=F-(V+fe*te),ye=W-(j+fe*re);return ae*ae+ye*ye}var y=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:v,generateIntoFramebuffer:m}),x="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",S="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",_="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",C=new Float32Array([0,0,2,0,0,2]),T=null,A=!1,k={},M=new WeakMap;function R(F){if(!A&&!U(F))throw new Error("WebGL generation not supported")}function P(F,W,V,j,J,Q,te){if(Q===void 0&&(Q=1),te===void 0&&(te=null),!te&&(te=T,!te)){var re=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!re)throw new Error("OffscreenCanvas or DOM canvas not supported");te=T=re.getContext("webgl",{depth:!1})}R(te);var se=new Uint8Array(F*W*4);u(te,function(le){var H=le.gl,Me=le.withTexture,we=le.withTextureFramebuffer;Me("readable",function(Ee,me){H.texImage2D(H.TEXTURE_2D,0,H.RGBA,F,W,0,H.RGBA,H.UNSIGNED_BYTE,null),we(Ee,me,function(qe){$(F,W,V,j,J,Q,H,qe,0,0,0),H.readPixels(0,0,F,W,H.RGBA,H.UNSIGNED_BYTE,se)})})});for(var fe=new Uint8Array(F*W),ae=0,ye=0;ae<se.length;ae+=4)fe[ye++]=se[ae];return fe}function O(F,W,V,j,J,Q,te,re,se,fe){Q===void 0&&(Q=1),re===void 0&&(re=0),se===void 0&&(se=0),fe===void 0&&(fe=0),$(F,W,V,j,J,Q,te,null,re,se,fe)}function $(F,W,V,j,J,Q,te,re,se,fe,ae){Q===void 0&&(Q=1),se===void 0&&(se=0),fe===void 0&&(fe=0),ae===void 0&&(ae=0),R(te);var ye=[];s(V,function(le,H,Me,we){ye.push(le,H,Me,we)}),ye=new Float32Array(ye),u(te,function(le){var H=le.gl,Me=le.isWebGL2,we=le.getExtension,Ee=le.withProgram,me=le.withTexture,qe=le.withTextureFramebuffer,ke=le.handleContextLoss;if(me("rawDistances",function(ee,Y){(F!==ee._lastWidth||W!==ee._lastHeight)&&H.texImage2D(H.TEXTURE_2D,0,H.RGBA,ee._lastWidth=F,ee._lastHeight=W,0,H.RGBA,H.UNSIGNED_BYTE,null),Ee("main",x,S,function(oe){var xe=oe.setAttribute,Se=oe.setUniform,be=!Me&&we("ANGLE_instanced_arrays"),Re=!Me&&we("EXT_blend_minmax");xe("aUV",2,H.STATIC_DRAW,0,C),xe("aLineSegment",4,H.DYNAMIC_DRAW,1,ye),Se.apply(void 0,["4f","uGlyphBounds"].concat(j)),Se("1f","uMaxDistance",J),Se("1f","uExponent",Q),qe(ee,Y,function(Ke){H.enable(H.BLEND),H.colorMask(!0,!0,!0,!0),H.viewport(0,0,F,W),H.scissor(0,0,F,W),H.blendFunc(H.ONE,H.ONE),H.blendEquationSeparate(H.FUNC_ADD,Me?H.MAX:Re.MAX_EXT),H.clear(H.COLOR_BUFFER_BIT),Me?H.drawArraysInstanced(H.TRIANGLES,0,3,ye.length/4):be.drawArraysInstancedANGLE(H.TRIANGLES,0,3,ye.length/4)})}),Ee("post",o,_,function(oe){oe.setAttribute("aUV",2,H.STATIC_DRAW,0,C),oe.setUniform("1i","tex",Y),H.bindFramebuffer(H.FRAMEBUFFER,re),H.disable(H.BLEND),H.colorMask(ae===0,ae===1,ae===2,ae===3),H.viewport(se,fe,F,W),H.scissor(se,fe,F,W),H.drawArrays(H.TRIANGLES,0,3)})}),H.isContextLost())throw ke(),new Error("webgl context lost")})}function U(F){var W=!F||F===T?k:F.canvas||F,V=M.get(W);if(V===void 0){A=!0;var j=null;try{var J=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],Q=P(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,F);V=Q&&J.length===Q.length&&Q.every(function(te,re){return te===J[re]}),V||(j="bad trial run results",console.info(J,Q))}catch(te){V=!1,j=te.message}j&&console.warn("WebGL SDF generation not supported:",j),A=!1,M.set(W,V)}return V}var z=Object.freeze({__proto__:null,generate:P,generateIntoCanvas:O,generateIntoFramebuffer:$,isSupported:U});function X(F,W,V,j,J,Q){J===void 0&&(J=Math.max(j[2]-j[0],j[3]-j[1])/2),Q===void 0&&(Q=1);try{return P.apply(z,arguments)}catch(te){return console.info("WebGL SDF generation failed, falling back to JS",te),p.apply(y,arguments)}}function D(F,W,V,j,J,Q,te,re,se,fe){J===void 0&&(J=Math.max(j[2]-j[0],j[3]-j[1])/2),Q===void 0&&(Q=1),re===void 0&&(re=0),se===void 0&&(se=0),fe===void 0&&(fe=0);try{return O.apply(z,arguments)}catch(ae){return console.info("WebGL SDF generation failed, falling back to JS",ae),v.apply(y,arguments)}}return e.forEachPathCommand=i,e.generate=X,e.generateIntoCanvas=D,e.javascript=y,e.pathToLineSegments=s,e.webgl=z,e.webglUtils=h,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function Jet(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(n).forEach(function(ke,ee){r[ke]=1<<ee+1,i[r[ke]]=ke}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,c=r.S|r.WS|r.B|s|r.PDI|l,u=null;function d(){if(!u){u=new Map;var ke=function(Y){if(n.hasOwnProperty(Y)){var oe=0;n[Y].split(",").forEach(function(xe){var Se=xe.split("+"),be=Se[0],Re=Se[1];be=parseInt(be,36),Re=Re?parseInt(Re,36):0,u.set(oe+=be,r[Y]);for(var Ke=0;Ke<Re;Ke++)u.set(++oe,r[Y])})}};for(var ee in n)ke(ee)}}function f(ke){return d(),u.get(ke.codePointAt(0))||r.L}function h(ke){return i[f(ke)]}var p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function v(ke,ee){var Y=36,oe=0,xe=new Map,Se=ee&&new Map,be;return ke.split(",").forEach(function Re(Ke){if(Ke.indexOf("+")!==-1)for(var ze=+Ke;ze--;)Re(be);else{be=Ke;var Pe=Ke.split(">"),De=Pe[0],We=Pe[1];De=String.fromCodePoint(oe+=parseInt(De,Y)),We=String.fromCodePoint(oe+=parseInt(We,Y)),xe.set(De,We),ee&&Se.set(We,De)}}),{map:xe,reverseMap:Se}}var m,g,y;function x(){if(!m){var ke=v(p.pairs,!0),ee=ke.map,Y=ke.reverseMap;m=ee,g=Y,y=v(p.canonical,!1).map}}function S(ke){return x(),m.get(ke)||null}function _(ke){return x(),g.get(ke)||null}function C(ke){return x(),y.get(ke)||null}var T=r.L,A=r.R,k=r.EN,M=r.ES,R=r.ET,P=r.AN,O=r.CS,$=r.B,U=r.S,z=r.ON,X=r.BN,D=r.NSM,F=r.AL,W=r.LRO,V=r.RLO,j=r.LRE,J=r.RLE,Q=r.PDF,te=r.LRI,re=r.RLI,se=r.FSI,fe=r.PDI;function ae(ke,ee){for(var Y=125,oe=new Uint32Array(ke.length),xe=0;xe<ke.length;xe++)oe[xe]=f(ke[xe]);var Se=new Map;function be(ws,Io){var $i=oe[ws];oe[ws]=Io,Se.set($i,Se.get($i)-1),$i&a&&Se.set(a,Se.get(a)-1),Se.set(Io,(Se.get(Io)||0)+1),Io&a&&Se.set(a,(Se.get(a)||0)+1)}for(var Re=new Uint8Array(ke.length),Ke=new Map,ze=[],Pe=null,De=0;De<ke.length;De++)Pe||ze.push(Pe={start:De,end:ke.length-1,level:ee==="rtl"?1:ee==="ltr"?0:xg(De,!1)}),oe[De]&$&&(Pe.end=De,Pe=null);for(var We=J|j|V|W|s|fe|Q|$,gt=function(ws){return ws+(ws&1?1:2)},ct=function(ws){return ws+(ws&1?2:1)},Ye=0;Ye<ze.length;Ye++){Pe=ze[Ye];var Xe=[{_level:Pe.level,_override:0,_isolate:0}],Le=void 0,he=0,He=0,ot=0;Se.clear();for(var et=Pe.start;et<=Pe.end;et++){var Ie=oe[et];if(Le=Xe[Xe.length-1],Se.set(Ie,(Se.get(Ie)||0)+1),Ie&a&&Se.set(a,(Se.get(a)||0)+1),Ie&We)if(Ie&(J|j)){Re[et]=Le._level;var Ce=(Ie===J?ct:gt)(Le._level);Ce<=Y&&!he&&!He?Xe.push({_level:Ce,_override:0,_isolate:0}):he||He++}else if(Ie&(V|W)){Re[et]=Le._level;var ut=(Ie===V?ct:gt)(Le._level);ut<=Y&&!he&&!He?Xe.push({_level:ut,_override:Ie&V?A:T,_isolate:0}):he||He++}else if(Ie&s){Ie&se&&(Ie=xg(et+1,!0)===1?re:te),Re[et]=Le._level,Le._override&&be(et,Le._override);var dt=(Ie===re?ct:gt)(Le._level);dt<=Y&&he===0&&He===0?(ot++,Xe.push({_level:dt,_override:0,_isolate:1,_isolInitIndex:et})):he++}else if(Ie&fe){if(he>0)he--;else if(ot>0){for(He=0;!Xe[Xe.length-1]._isolate;)Xe.pop();var yt=Xe[Xe.length-1]._isolInitIndex;yt!=null&&(Ke.set(yt,et),Ke.set(et,yt)),Xe.pop(),ot--}Le=Xe[Xe.length-1],Re[et]=Le._level,Le._override&&be(et,Le._override)}else Ie&Q?(he===0&&(He>0?He--:!Le._isolate&&Xe.length>1&&(Xe.pop(),Le=Xe[Xe.length-1])),Re[et]=Le._level):Ie&$&&(Re[et]=Pe.level);else Re[et]=Le._level,Le._override&&Ie!==X&&be(et,Le._override)}for(var vt=[],zt=null,It=Pe.start;It<=Pe.end;It++){var Qt=oe[It];if(!(Qt&l)){var $t=Re[It],mt=Qt&s,Ht=Qt===fe;zt&&$t===zt._level?(zt._end=It,zt._endsWithIsolInit=mt):vt.push(zt={_start:It,_end:It,_level:$t,_startsWithPDI:Ht,_endsWithIsolInit:mt})}}for(var pn=[],dn=0;dn<vt.length;dn++){var _t=vt[dn];if(!_t._startsWithPDI||_t._startsWithPDI&&!Ke.has(_t._start)){for(var Dt=[zt=_t],Nt=void 0;zt&&zt._endsWithIsolInit&&(Nt=Ke.get(zt._end))!=null;)for(var bt=dn+1;bt<vt.length;bt++)if(vt[bt]._start===Nt){Dt.push(zt=vt[bt]);break}for(var Wt=[],Sn=0;Sn<Dt.length;Sn++)for(var Z=Dt[Sn],K=Z._start;K<=Z._end;K++)Wt.push(K);for(var ne=Re[Wt[0]],G=Pe.level,ie=Wt[0]-1;ie>=0;ie--)if(!(oe[ie]&l)){G=Re[ie];break}var ce=Wt[Wt.length-1],Te=Re[ce],de=Pe.level;if(!(oe[ce]&s)){for(var Ue=ce+1;Ue<=Pe.end;Ue++)if(!(oe[Ue]&l)){de=Re[Ue];break}}pn.push({_seqIndices:Wt,_sosType:Math.max(G,ne)%2?A:T,_eosType:Math.max(de,Te)%2?A:T})}}for(var Je=0;Je<pn.length;Je++){var nt=pn[Je],$e=nt._seqIndices,Ct=nt._sosType,ht=nt._eosType,ft=Re[$e[0]]&1?A:T;if(Se.get(D))for(var Lt=0;Lt<$e.length;Lt++){var Jt=$e[Lt];if(oe[Jt]&D){for(var tn=Ct,gn=Lt-1;gn>=0;gn--)if(!(oe[$e[gn]]&l)){tn=oe[$e[gn]];break}be(Jt,tn&(s|fe)?z:tn)}}if(Se.get(k))for(var Pt=0;Pt<$e.length;Pt++){var Et=$e[Pt];if(oe[Et]&k)for(var Cn=Pt-1;Cn>=-1;Cn--){var en=Cn===-1?Ct:oe[$e[Cn]];if(en&o){en===F&&be(Et,P);break}}}if(Se.get(F))for(var cn=0;cn<$e.length;cn++){var ar=$e[cn];oe[ar]&F&&be(ar,A)}if(Se.get(M)||Se.get(O))for(var Fn=1;Fn<$e.length-1;Fn++){var Hn=$e[Fn];if(oe[Hn]&(M|O)){for(var _n=0,fn=0,Yn=Fn-1;Yn>=0&&(_n=oe[$e[Yn]],!!(_n&l));Yn--);for(var nn=Fn+1;nn<$e.length&&(fn=oe[$e[nn]],!!(fn&l));nn++);_n===fn&&(oe[Hn]===M?_n===k:_n&(k|P))&&be(Hn,_n)}}if(Se.get(k))for(var an=0;an<$e.length;an++){var Nr=$e[an];if(oe[Nr]&k){for(var Os=an-1;Os>=0&&oe[$e[Os]]&(R|l);Os--)be($e[Os],k);for(an++;an<$e.length&&oe[$e[an]]&(R|l|k);an++)oe[$e[an]]!==k&&be($e[an],k)}}if(Se.get(R)||Se.get(M)||Se.get(O))for(var Pi=0;Pi<$e.length;Pi++){var Aa=$e[Pi];if(oe[Aa]&(R|M|O)){be(Aa,z);for(var Ju=Pi-1;Ju>=0&&oe[$e[Ju]]&l;Ju--)be($e[Ju],z);for(var Qu=Pi+1;Qu<$e.length&&oe[$e[Qu]]&l;Qu++)be($e[Qu],z)}}if(Se.get(k))for(var ed=0,Bh=Ct;ed<$e.length;ed++){var WS=$e[ed],zy=oe[WS];zy&k?Bh===T&&be(WS,T):zy&o&&(Bh=zy)}if(Se.get(a)){var td=A|k|P,gg=td|T,Hc=[];{for(var tf=[],jc=0;jc<$e.length;jc++)if(oe[$e[jc]]&a){var jn=ke[$e[jc]],Wy=void 0;if(S(jn)!==null)if(tf.length<63)tf.push({char:jn,seqIndex:jc});else break;else if((Wy=_(jn))!==null)for(var nd=tf.length-1;nd>=0;nd--){var vg=tf[nd].char;if(vg===Wy||vg===_(C(jn))||S(C(vg))===jn){Hc.push([tf[nd].seqIndex,jc]),tf.length=nd;break}}}Hc.sort(function(ws,Io){return ws[0]-Io[0]})}for(var Vy=0;Vy<Hc.length;Vy++){for(var VS=Hc[Vy],di=VS[0],zh=VS[1],GS=!1,Mo=0,Gy=di+1;Gy<zh;Gy++){var Wh=$e[Gy];if(oe[Wh]&gg){GS=!0;var Ia=oe[Wh]&td?A:T;if(Ia===ft){Mo=Ia;break}}}if(GS&&!Mo){Mo=Ct;for(var Hy=di-1;Hy>=0;Hy--){var HS=$e[Hy];if(oe[HS]&gg){var Ra=oe[HS]&td?A:T;Ra!==ft?Mo=Ra:Mo=ft;break}}}if(Mo){if(oe[$e[di]]=oe[$e[zh]]=Mo,Mo!==ft){for(var ko=di+1;ko<$e.length;ko++)if(!(oe[$e[ko]]&l)){f(ke[$e[ko]])&D&&(oe[$e[ko]]=Mo);break}}if(Mo!==ft){for(var Xc=zh+1;Xc<$e.length;Xc++)if(!(oe[$e[Xc]]&l)){f(ke[$e[Xc]])&D&&(oe[$e[Xc]]=Mo);break}}}}for(var cl=0;cl<$e.length;cl++)if(oe[$e[cl]]&a){for(var jy=cl,Xy=cl,Qo=Ct,Vh=cl-1;Vh>=0;Vh--)if(oe[$e[Vh]]&l)jy=Vh;else{Qo=oe[$e[Vh]]&td?A:T;break}for(var Gh=ht,Hh=cl+1;Hh<$e.length;Hh++)if(oe[$e[Hh]]&(a|l))Xy=Hh;else{Gh=oe[$e[Hh]]&td?A:T;break}for(var Ao=jy;Ao<=Xy;Ao++)oe[$e[Ao]]=Qo===Gh?Qo:ft;cl=Xy}}}for(var bs=Pe.start;bs<=Pe.end;bs++){var yg=Re[bs],tc=oe[bs];if(yg&1?tc&(T|k|P)&&Re[bs]++:tc&A?Re[bs]++:tc&(P|k)&&(Re[bs]+=2),tc&l&&(Re[bs]=bs===0?Pe.level:Re[bs-1]),bs===Pe.end||f(ke[bs])&(U|$))for(var nf=bs;nf>=0&&f(ke[nf])&c;nf--)Re[nf]=Pe.level}}return{levels:Re,paragraphs:ze};function xg(ws,Io){for(var $i=ws;$i<ke.length;$i++){var Di=oe[$i];if(Di&(A|F))return 1;if(Di&($|T)||Io&&Di===fe)return 0;if(Di&s){var Na=jS($i);$i=Na===-1?ke.length:Na}}return 0}function jS(ws){for(var Io=1,$i=ws+1;$i<ke.length;$i++){var Di=oe[$i];if(Di&$)break;if(Di&fe){if(--Io===0)return $i}else Di&s&&Io++}return-1}}var ye="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",le;function H(){if(!le){var ke=v(ye,!0),ee=ke.map,Y=ke.reverseMap;Y.forEach(function(oe,xe){ee.set(xe,oe)}),le=ee}}function Me(ke){return H(),le.get(ke)||null}function we(ke,ee,Y,oe){var xe=ke.length;Y=Math.max(0,Y==null?0:+Y),oe=Math.min(xe-1,oe==null?xe-1:+oe);for(var Se=new Map,be=Y;be<=oe;be++)if(ee[be]&1){var Re=Me(ke[be]);Re!==null&&Se.set(be,Re)}return Se}function Ee(ke,ee,Y,oe){var xe=ke.length;Y=Math.max(0,Y==null?0:+Y),oe=Math.min(xe-1,oe==null?xe-1:+oe);var Se=[];return ee.paragraphs.forEach(function(be){var Re=Math.max(Y,be.start),Ke=Math.min(oe,be.end);if(Re<Ke){for(var ze=ee.levels.slice(Re,Ke+1),Pe=Ke;Pe>=Re&&f(ke[Pe])&c;Pe--)ze[Pe]=be.level;for(var De=be.level,We=1/0,gt=0;gt<ze.length;gt++){var ct=ze[gt];ct>De&&(De=ct),ct<We&&(We=ct|1)}for(var Ye=De;Ye>=We;Ye--)for(var Xe=0;Xe<ze.length;Xe++)if(ze[Xe]>=Ye){for(var Le=Xe;Xe+1<ze.length&&ze[Xe+1]>=Ye;)Xe++;Xe>Le&&Se.push([Le+Re,Xe+Re])}}}),Se}function me(ke,ee,Y,oe){var xe=qe(ke,ee,Y,oe),Se=[].concat(ke);return xe.forEach(function(be,Re){Se[Re]=(ee.levels[be]&1?Me(ke[be]):null)||ke[be]}),Se.join("")}function qe(ke,ee,Y,oe){for(var xe=Ee(ke,ee,Y,oe),Se=[],be=0;be<ke.length;be++)Se[be]=be;return xe.forEach(function(Re){for(var Ke=Re[0],ze=Re[1],Pe=Se.slice(Ke,ze+1),De=Pe.length;De--;)Se[ze-De]=Pe[De]}),Se}return e.closingToOpeningBracket=_,e.getBidiCharType=f,e.getBidiCharTypeName=h,e.getCanonicalBracket=C,e.getEmbeddingLevels=ae,e.getMirroredCharacter=Me,e.getMirroredCharactersMap=we,e.getReorderSegments=Ee,e.getReorderedIndices=qe,e.getReorderedString=me,e.openingToClosingBracket=S,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const ele=/\bvoid\s+main\s*\(\s*\)\s*{/g;function IO(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(r,i){let s=Pn[i];return s?IO(s):r}return t.replace(e,n)}const zs=[];for(let t=0;t<256;t++)zs[t]=(t<16?"0":"")+t.toString(16);function Qet(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(zs[t&255]+zs[t>>8&255]+zs[t>>16&255]+zs[t>>24&255]+"-"+zs[e&255]+zs[e>>8&255]+"-"+zs[e>>16&15|64]+zs[e>>24&255]+"-"+zs[n&63|128]+zs[n>>8&255]+"-"+zs[n>>16&255]+zs[n>>24&255]+zs[r&255]+zs[r>>8&255]+zs[r>>16&255]+zs[r>>24&255]).toUpperCase()}const fp=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ett=Date.now(),Fq=new WeakMap,Uq=new Map;let ttt=1e10;function RO(t,e){const n=stt(e);let r=Fq.get(t);if(r||Fq.set(t,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,s=function(c,u){t.onBeforeCompile.call(this,c,u);const d=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let f=Uq[d];if(!f){const h=ntt(this,c,e,n);f=Uq[d]=h}c.vertexShader=f.vertexShader,c.fragmentShader=f.fragmentShader,fp(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-ett}}),this[i]&&this[i](c)},o=function(){return a(e.chained?t:t.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:t}),Object.defineProperty(u,"id",{value:ttt++}),u.uuid=Qet(),u.uniforms=fp({},c.uniforms,e.uniforms),u.defines=fp({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",u.extensions=fp({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return s},set(c){this[i]=c}},copy:{writable:!0,configurable:!0,value:function(c){return t.copy.call(this,c),!t.isShaderMaterial&&!t.isDerivedMaterial&&(fp(this.extensions,c.extensions),fp(this.defines,c.defines),fp(this.uniforms,tw.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new t.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=RO(t.isDerivedMaterial?t.getDepthMaterial():new rI({depthPacking:uB}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=RO(t.isDerivedMaterial?t.getDistanceMaterial():new iI,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),t.dispose.call(this)}}};return r[n]=o,new o}function ntt(t,{vertexShader:e,fragmentShader:n},r,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:d,fragmentColorTransform:f,customRewriter:h,timeUniform:p}=r;if(s=s||"",o=o||"",a=a||"",c=c||"",u=u||"",d=d||"",(l||h)&&(e=IO(e)),(f||h)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=IO(n)),h){let v=h({vertexShader:e,fragmentShader:n});e=v.vertexShader,n=v.fragmentShader}if(f){let v=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,m=>(v.push(m),"")),d=`${f}
${v.join(`
`)}
${d}`}if(p){const v=`
uniform float ${p};
`;s=v+s,c=v+c}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(v,m,g,y)=>/\battribute\s+vec[23]\s+$/.test(y.substr(0,g))?m:`troika_${m}_${i}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=Bq(e,i,s,o,a),n=Bq(n,i,c,u,d),{vertexShader:e,fragmentShader:n}}function Bq(t,e,n,r,i){return(r||i||n)&&(t=t.replace(ele,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),t}function rtt(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let itt=0;const zq=new Map;function stt(t){const e=JSON.stringify(t,rtt);let n=zq.get(e);return n==null&&zq.set(e,n=++itt),n}function ott(t,e,n){const{defaultFontURL:r}=n,i=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function c(y,x){function S(){const _=C=>{console.error(`Failure loading font ${y}${y===r?"":"; trying fallback"}`,C),y!==r&&(y=r,S())};try{const C=new XMLHttpRequest;C.open("get",y,!0),C.responseType="arraybuffer",C.onload=function(){if(C.status>=400)_(new Error(C.statusText));else if(C.status>0)try{const T=t(C.response);x(T)}catch(T){_(T)}},C.onerror=_,C.send()}catch(C){_(C)}}S()}function u(y,x){y||(y=r);let S=i[y];S?S.pending?S.pending.push(x):x(S):(i[y]={pending:[x]},c(y,_=>{let C=i[y].pending;i[y]=_,C.forEach(T=>T(_))}))}function d({text:y="",font:x=r,sdfGlyphSize:S=64,fontSize:_=1,letterSpacing:C=0,lineHeight:T="normal",maxWidth:A=s,direction:k,textAlign:M="left",textIndent:R=0,whiteSpace:P="normal",overflowWrap:O="normal",anchorX:$=0,anchorY:U=0,includeCaretPositions:z=!1,chunkedBoundsSize:X=8192,colorRanges:D=null},F,W=!1){const V=v(),j={fontLoad:0,typesetting:0};y.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),y=y.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),_=+_,C=+C,A=+A,T=T||"normal",R=+R,u(x,J=>{const Q=isFinite(A);let te=null,re=null,se=null,fe=null,ae=null,ye=null,le=null,H=0,Me=0,we=P!=="nowrap";const{ascender:Ee,descender:me,unitsPerEm:qe,lineGap:ke,capHeight:ee,xHeight:Y}=J;j.fontLoad=v()-V;const oe=v(),xe=_/qe;T==="normal"&&(T=(Ee-me+ke)/qe),T=T*_;const Se=(T-(Ee-me)*xe)/2,be=-(Ee*xe+Se),Re=Math.min(T,(Ee-me)*xe),Ke=(Ee+me)/2*xe-Re/2;let ze=R,Pe=new m;const De=[Pe];J.forEachGlyph(y,_,C,(ct,Ye,Xe)=>{const Le=y.charAt(Xe),he=ct.advanceWidth*xe,He=Pe.count;let ot;if("isEmpty"in ct||(ct.isWhitespace=!!Le&&new RegExp(a).test(Le),ct.canBreakAfter=!!Le&&l.test(Le),ct.isEmpty=ct.xMin===ct.xMax||ct.yMin===ct.yMax||o.test(Le)),!ct.isWhitespace&&!ct.isEmpty&&Me++,we&&Q&&!ct.isWhitespace&&Ye+he+ze>A&&He){if(Pe.glyphAt(He-1).glyphObj.canBreakAfter)ot=new m,ze=-Ye;else for(let Ie=He;Ie--;)if(Ie===0&&O==="break-word"){ot=new m,ze=-Ye;break}else if(Pe.glyphAt(Ie).glyphObj.canBreakAfter){ot=Pe.splitAt(Ie+1);const Ce=ot.glyphAt(0).x;ze-=Ce;for(let ut=ot.count;ut--;)ot.glyphAt(ut).x-=Ce;break}ot&&(Pe.isSoftWrapped=!0,Pe=ot,De.push(Pe),H=A)}let et=Pe.glyphAt(Pe.count);et.glyphObj=ct,et.x=Ye+ze,et.width=he,et.charIndex=Xe,Le===`
`&&(Pe=new m,De.push(Pe),ze=-(Ye+he+C*_)+R)}),De.forEach(ct=>{for(let Ye=ct.count;Ye--;){let{glyphObj:Xe,x:Le,width:he}=ct.glyphAt(Ye);if(!Xe.isWhitespace){ct.width=Le+he,ct.width>H&&(H=ct.width);return}}});let We=0,gt=0;if($&&(typeof $=="number"?We=-$:typeof $=="string"&&(We=-H*($==="left"?0:$==="center"?.5:$==="right"?1:h($)))),U){if(typeof U=="number")gt=-U;else if(typeof U=="string"){let ct=De.length*T;gt=U==="top"?0:U==="top-baseline"?-be:U==="top-cap"?-be-ee*xe:U==="top-ex"?-be-Y*xe:U==="middle"?ct/2:U==="bottom"?ct:U==="bottom-baseline"?ct-Se+me*xe:h(U)*ct}}if(!W){const ct=e.getEmbeddingLevels(y,k);te=new Uint16Array(Me),re=new Float32Array(Me*2),se={},ye=[s,s,-s,-s],le=[];let Ye=be;z&&(ae=new Float32Array(y.length*3)),D&&(fe=new Uint8Array(Me*3));let Xe=0,Le=-1,he=-1,He,ot;if(De.forEach((et,Ie)=>{let{count:Ce,width:ut}=et;if(Ce>0){let dt=0;for(let $t=Ce;$t--&&et.glyphAt($t).glyphObj.isWhitespace;)dt++;let yt=0,vt=0;if(M==="center")yt=(H-ut)/2;else if(M==="right")yt=H-ut;else if(M==="justify"&&et.isSoftWrapped){let $t=0;for(let mt=Ce-dt;mt--;)et.glyphAt(mt).glyphObj.isWhitespace&&$t++;vt=(H-ut)/$t}if(vt||yt){let $t=0;for(let mt=0;mt<Ce;mt++){let Ht=et.glyphAt(mt);const pn=Ht.glyphObj;Ht.x+=yt+$t,vt!==0&&pn.isWhitespace&&mt<Ce-dt&&($t+=vt,Ht.width+=vt)}}const zt=e.getReorderSegments(y,ct,et.glyphAt(0).charIndex,et.glyphAt(et.count-1).charIndex);for(let $t=0;$t<zt.length;$t++){const[mt,Ht]=zt[$t];let pn=1/0,dn=-1/0;for(let _t=0;_t<Ce;_t++)if(et.glyphAt(_t).charIndex>=mt){let Dt=_t,Nt=_t;for(;Nt<Ce;Nt++){let bt=et.glyphAt(Nt);if(bt.charIndex>Ht)break;Nt<Ce-dt&&(pn=Math.min(pn,bt.x),dn=Math.max(dn,bt.x+bt.width))}for(let bt=Dt;bt<Nt;bt++){const Wt=et.glyphAt(bt);Wt.x=dn-(Wt.x+Wt.width-pn)}break}}let It;const Qt=$t=>It=$t;for(let $t=0;$t<Ce;$t++){let mt=et.glyphAt($t);It=mt.glyphObj;const Ht=It.index,pn=ct.levels[mt.charIndex]&1;if(pn){const dn=e.getMirroredCharacter(y[mt.charIndex]);dn&&J.forEachGlyph(dn,0,0,Qt)}if(z){const{charIndex:dn}=mt,_t=mt.x+We,Dt=mt.x+mt.width+We;ae[dn*3]=pn?Dt:_t,ae[dn*3+1]=pn?_t:Dt,ae[dn*3+2]=Ye+Ke+gt;const Nt=dn-Le;Nt>1&&p(ae,Le,Nt),Le=dn}if(D){const{charIndex:dn}=mt;for(;dn>he;)he++,D.hasOwnProperty(he)&&(ot=D[he])}if(!It.isWhitespace&&!It.isEmpty){const dn=Xe++;se[Ht]||(se[Ht]={path:It.path,pathBounds:[It.xMin,It.yMin,It.xMax,It.yMax]});const _t=mt.x+We,Dt=Ye+gt;re[dn*2]=_t,re[dn*2+1]=Dt;const Nt=_t+It.xMin*xe,bt=Dt+It.yMin*xe,Wt=_t+It.xMax*xe,Sn=Dt+It.yMax*xe;Nt<ye[0]&&(ye[0]=Nt),bt<ye[1]&&(ye[1]=bt),Wt>ye[2]&&(ye[2]=Wt),Sn>ye[3]&&(ye[3]=Sn),dn%X===0&&(He={start:dn,end:dn,rect:[s,s,-s,-s]},le.push(He)),He.end++;const Z=He.rect;if(Nt<Z[0]&&(Z[0]=Nt),bt<Z[1]&&(Z[1]=bt),Wt>Z[2]&&(Z[2]=Wt),Sn>Z[3]&&(Z[3]=Sn),te[dn]=Ht,D){const K=dn*3;fe[K]=ot>>16&255,fe[K+1]=ot>>8&255,fe[K+2]=ot&255}}}}Ye-=T}),ae){const et=y.length-Le;et>1&&p(ae,Le,et)}}j.typesetting=v()-oe,F({glyphIds:te,glyphPositions:re,glyphData:se,caretPositions:ae,caretHeight:Re,glyphColors:fe,chunkedBounds:le,fontSize:_,unitsPerEm:qe,ascender:Ee*xe,descender:me*xe,capHeight:ee*xe,xHeight:Y*xe,lineHeight:T,topBaseline:be,blockBounds:[We,gt-De.length*T,We+H,gt],visibleBounds:ye,timings:j})})}function f(y,x){d(y,S=>{const[_,C,T,A]=S.blockBounds;x({width:T-_,height:A-C})},{metricsOnly:!0})}function h(y){let x=y.match(/^([\d.]+)%$/),S=x?parseFloat(x[1]):NaN;return isNaN(S)?0:S/100}function p(y,x,S){const _=y[x*3],C=y[x*3+1],T=y[x*3+2],A=(C-_)/S;for(let k=0;k<S;k++){const M=(x+k)*3;y[M]=_+A*k,y[M+1]=_+A*(k+1),y[M+2]=T}}function v(){return(self.performance||Date).now()}function m(){this.data=[]}const g=["glyphObj","x","width","charIndex"];return m.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/g.length)},glyphAt(y){let x=m.flyweight;return x.data=this.data,x.index=y,x},splitAt(y){let x=new m;return x.data=this.data.splice(y*g.length),x}},m.flyweight=g.reduce((y,x,S,_)=>(Object.defineProperty(y,x,{get(){return this.data[this.index*g.length+S]},set(C){this.data[this.index*g.length+S]=C}}),y),{data:null,index:0}),{typeset:d,measure:f,loadFont:u}}const sm=()=>(self.performance||Date).now(),EI=Qae();let Wq;function att(t,e,n,r,i,s,o,a,l,c,u=!0){return u?ctt(t,e,n,r,i,s,o,a,l,c).then(null,d=>(Wq||(console.warn("WebGL SDF generation failed, falling back to JS",d),Wq=!0),Gq(t,e,n,r,i,s,o,a,l,c))):Gq(t,e,n,r,i,s,o,a,l,c)}const aE=[],ltt=5;let NO=0;function tle(){const t=sm();for(;aE.length&&sm()-t<ltt;)aE.shift()();NO=aE.length?setTimeout(tle,0):0}const ctt=(...t)=>new Promise((e,n)=>{aE.push(()=>{const r=sm();try{EI.webgl.generateIntoCanvas(...t),e({timing:sm()-r})}catch(i){n(i)}}),NO||(NO=setTimeout(tle,0))}),utt=4,dtt=2e3,Vq={};let ftt=0;function Gq(t,e,n,r,i,s,o,a,l,c){const u="TroikaTextSDFGenerator_JS_"+ftt++%utt;let d=Vq[u];return d||(d=Vq[u]={workerModule:w2({name:u,workerId:u,dependencies:[Qae,sm],init(f,h){const p=f().javascript.generate;return function(...v){const m=h();return{textureData:p(...v),timing:h()-m}}},getTransferables(f){return[f.textureData.buffer]}}),requests:0,idleTimer:null}),d.requests++,clearTimeout(d.idleTimer),d.workerModule(t,e,n,r,i,s).then(({textureData:f,timing:h})=>{const p=sm(),v=new Uint8Array(f.length*4);for(let m=0;m<f.length;m++)v[m*4+c]=f[m];return EI.webglUtils.renderImageData(o,v,a,l,t,e,1<<3-c),h+=sm()-p,--d.requests===0&&(d.idleTimer=setTimeout(()=>{Ket(u)},dtt)),{timing:h}})}function htt(t){t._warm||(EI.webgl.isSupported(t),t._warm=!0)}const ptt=EI.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function mtt(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var d=s.readUint(o,a);a+=4,c.push(e._readFont(o,d))}return c}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],u={_data:i,_offset:a},d={},f=0;f<l;f++){var h=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var p=o.readUint(i,s);s+=4;var v=o.readUint(i,s);s+=4,d[h]={offset:p,length:v}}for(f=0;f<c.length;f++){var m=c[f];d[m]&&(u[m.trim()]=e[m.trim()].parse(i,d[m].offset,d[m].length,u))}return u},_tabOffset:function(i,s,o){for(var a=e._bin,l=a.readUshort(i,o+4),c=o+12,u=0;u<l;u++){var d=a.readASCII(i,c,4);c+=4,a.readUint(i,c),c+=4;var f=a.readUint(i,c);if(c+=4,a.readUint(i,c),c+=4,d==s)return f}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(i,s+2*l));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},readUnicode:function(i,s,o){for(var a="",l=0;l<o;l++){var c=i[s++]<<8|i[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(i[s+l]);return a},readASCIIArray:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(i[s+l]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,l){var c=e._bin,u={},d=s;c.readFixed(i,s),s+=4;var f=c.readUshort(i,s);s+=2;var h=c.readUshort(i,s);s+=2;var p=c.readUshort(i,s);return s+=2,u.scriptList=e._lctf.readScriptList(i,d+f),u.featureList=e._lctf.readFeatureList(i,d+h),u.lookupList=e._lctf.readLookupList(i,d+p,l),u},e._lctf.readLookupList=function(i,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var f=a.readUshort(i,s);s+=2;var h=e._lctf.readLookupTable(i,l+f,o);c.push(h)}return c},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(i,s),s+=2,c.flag=a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;for(var d=c.ltype,f=0;f<u;f++){var h=a.readUshort(i,s);s+=2;var p=o(i,d,l+h,c);c.tabs.push(p)}return c},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)i>>>o&1&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],l=o.readUshort(i,s);if(s+=2,l==1){var c=o.readUshort(i,s);s+=2;var u=o.readUshort(i,s);s+=2;for(var d=0;d<u;d++)a.push(c+d),a.push(c+d),a.push(o.readUshort(i,s)),s+=2}if(l==2){var f=o.readUshort(i,s);for(s+=2,d=0;d<f;d++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],l=i[o+1];if(i[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,l)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*l)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var d=o.readASCII(i,s,4);s+=4;var f=o.readUshort(i,s);s+=2;var h=e._lctf.readFeatureTable(i,a+f);h.tag=d.trim(),l.push(h)}return l},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(i,s);s+=2,l.tab=[];for(var d=0;d<u;d++)l.tab.push(o.readUshort(i,s+2*d));return l},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var d=o.readASCII(i,s,4);s+=4;var f=o.readUshort(i,s);s+=2,l[d.trim()]=e._lctf.readScriptTable(i,a+f)}return l},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2,l.default=e._lctf.readLangSysTable(i,a+c);var u=o.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var f=o.readASCII(i,s,4);s+=4;var h=o.readUshort(i,s);s+=2,l[f.trim()]=e._lctf.readLangSysTable(i,a+h)}return l},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,l),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(i,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var d=[];s=e.CFF.readIndex(i,s,d);var f=[];for(u=0;u<d.length-1;u++)f.push(e.CFF.readDict(i,s+d[u],s+d[u+1]));s+=d[d.length-1];var h=f[0],p=[];s=e.CFF.readIndex(i,s,p);var v=[];for(u=0;u<p.length-1;u++)v.push(a.readASCII(i,s+p[u],p[u+1]-p[u]));if(s+=p[p.length-1],e.CFF.readSubrs(i,s,h),h.CharStrings){s=h.CharStrings,p=[],s=e.CFF.readIndex(i,s,p);var m=[];for(u=0;u<p.length-1;u++)m.push(a.readBytes(i,s+p[u],p[u+1]-p[u]));h.CharStrings=m}if(h.ROS){s=h.FDArray;var g=[];for(s=e.CFF.readIndex(i,s,g),h.FDArray=[],u=0;u<g.length-1;u++){var y=e.CFF.readDict(i,s+g[u],s+g[u+1]);e.CFF._readFDict(i,y,v),h.FDArray.push(y)}s+=g[g.length-1],s=h.FDSelect,h.FDSelect=[];var x=i[s];if(s++,x!=3)throw x;var S=a.readUshort(i,s);for(s+=2,u=0;u<S+1;u++)h.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return h.Encoding&&(h.Encoding=e.CFF.readEncoding(i,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=e.CFF.readCharset(i,h.charset,h.CharStrings.length)),e.CFF._readFDict(i,h,v),h},e.CFF._readFDict=function(i,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var d=0;d<l.length-1;d++)o.Subrs.push(a.readBytes(i,s+l[d],l[d+1]-l[d]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=i[s];s++;for(var u=0;u<c;u++)a.push(i[s+u]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,l=[".notdef"],c=i[s];if(s++,c==0)for(var u=0;u<o;u++){var d=a.readUshort(i,s);s+=2,l.push(d)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){d=a.readUshort(i,s),s+=2;var f=0;for(c==1?(f=i[s],s++):(f=a.readUshort(i,s),s+=2),u=0;u<=f;u++)l.push(d),d++}}return l},e.CFF.readIndex=function(i,s,o){var a=e._bin,l=a.readUshort(i,s)+1,c=i[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(i[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(i,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(i,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,l=i[s],c=i[s+1];i[s+2],i[s+3],i[s+4];var u=1,d=null,f=null;l<=20&&(d=l,u=1),l==12&&(d=100*l+c,u=2),21<=l&&l<=27&&(d=l,u=1),l==28&&(f=a.readShort(i,s+1),u=3),29<=l&&l<=31&&(d=l,u=1),32<=l&&l<=246&&(f=l-139,u=1),247<=l&&l<=250&&(f=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(f=256*-(l-251)-c-108,u=2),l==255&&(f=a.readInt(i,s+1)/65535,u=5),o.val=f??"o"+d,o.size=u},e.CFF.readCharString=function(i,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=i[s],d=i[s+1];i[s+2],i[s+3],i[s+4];var f=1,h=null,p=null;u<=20&&(h=u,f=1),u==12&&(h=100*u+d,f=2),u!=19&&u!=20||(h=u,f=2),21<=u&&u<=27&&(h=u,f=1),u==28&&(p=l.readShort(i,s+1),f=3),29<=u&&u<=31&&(h=u,f=1),32<=u&&u<=246&&(p=u-139,f=1),247<=u&&u<=250&&(p=256*(u-247)+d+108,f=2),251<=u&&u<=254&&(p=256*-(u-251)-d-108,f=2),u==255&&(p=l.readInt(i,s+1)/65535,f=5),c.push(p??"o"+h),s+=f}return c},e.CFF.readDict=function(i,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=i[s],d=i[s+1];i[s+2],i[s+3],i[s+4];var f=1,h=null,p=null;if(u==28&&(p=a.readShort(i,s+1),f=3),u==29&&(p=a.readInt(i,s+1),f=5),32<=u&&u<=246&&(p=u-139,f=1),247<=u&&u<=250&&(p=256*(u-247)+d+108,f=2),251<=u&&u<=254&&(p=256*-(u-251)-d-108,f=2),u==255)throw p=a.readInt(i,s+1)/65535,f=5,"unknown number";if(u==30){var v=[];for(f=1;;){var m=i[s+f];f++;var g=m>>4,y=15&m;if(g!=15&&v.push(g),y!=15&&v.push(y),y==15)break}for(var x="",S=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],_=0;_<v.length;_++)x+=S[v[_]];p=parseFloat(x)}u<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],f=1,u==12&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][d],f=2)),h!=null?(l[h]=c.length==1?c[0]:c,c=[]):c.push(p),s+=f}return l},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;var u=[];l.tables=[];for(var d=0;d<c;d++){var f=a.readUshort(i,s);s+=2;var h=a.readUshort(i,s);s+=2;var p=a.readUint(i,s);s+=4;var v="p"+f+"e"+h,m=u.indexOf(p);if(m==-1){var g;m=l.tables.length,u.push(p);var y=a.readUshort(i,p);y==0?g=e.cmap.parse0(i,p):y==4?g=e.cmap.parse4(i,p):y==6?g=e.cmap.parse6(i,p):y==12?g=e.cmap.parse12(i,p):console.debug("unknown format: "+y,f,h,p),l.tables.push(g)}if(l[v]!=null)throw"multiple tables for one platform+encoding";l[v]=m}return l},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(i[s+c]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,l={};l.format=o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2;var d=u/2;l.searchRange=o.readUshort(i,s),s+=2,l.entrySelector=o.readUshort(i,s),s+=2,l.rangeShift=o.readUshort(i,s),s+=2,l.endCount=o.readUshorts(i,s,d),s+=2*d,s+=2,l.startCount=o.readUshorts(i,s,d),s+=2*d,l.idDelta=[];for(var f=0;f<d;f++)l.idDelta.push(o.readShort(i,s)),s+=2;for(l.idRangeOffset=o.readUshorts(i,s,d),s+=2*d,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var l=o.readUint(i,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,d=o.readUint(i,u+0),f=o.readUint(i,u+4),h=o.readUint(i,u+8);a.groups.push([d,f,h])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,l=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var d=o.readUshort(a,l);if(l+=2,a.length-l<d)return null;c.instructions=o.readBytes(a,l,d),l+=d;var f=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<f;u++){var h=a[l];if(l++,c.flags.push(h),(8&h)!=0){var p=a[l];l++;for(var v=0;v<p;v++)c.flags.push(h),u++}}for(c.xs=[],u=0;u<f;u++){var m=(2&c.flags[u])!=0,g=(16&c.flags[u])!=0;m?(c.xs.push(g?a[l]:-a[l]),l++):g?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<f;u++)m=(4&c.flags[u])!=0,g=(32&c.flags[u])!=0,m?(c.ys.push(g?a[l]:-a[l]),l++):g?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var y=0,x=0;for(u=0;u<f;u++)y+=c.xs[u],x+=c.ys[u],c.xs[u]=y,c.ys[u]=x}else{var S;c.parts=[];do{S=o.readUshort(a,l),l+=2;var _={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(_),_.glyphIndex=o.readUshort(a,l),l+=2,1&S){var C=o.readShort(a,l);l+=2;var T=o.readShort(a,l);l+=2}else C=o.readInt8(a,l),l++,T=o.readInt8(a,l),l++;2&S?(_.m.tx=C,_.m.ty=T):(_.p1=C,_.p2=T),8&S?(_.m.a=_.m.d=o.readF2dot14(a,l),l+=2):64&S?(_.m.a=o.readF2dot14(a,l),l+=2,_.m.d=o.readF2dot14(a,l),l+=2):128&S&&(_.m.a=o.readF2dot14(a,l),l+=2,_.m.b=o.readF2dot14(a,l),l+=2,_.m.c=o.readF2dot14(a,l),l+=2,_.m.d=o.readF2dot14(a,l),l+=2)}while(32&S);if(256&S){var A=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<A;u++)c.instr.push(a[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var d=l.readUshort(i,o);o+=2,u.coverage=e._lctf.readCoverage(i,d+c)}if(s==1&&u.fmt==1){var f=l.readUshort(i,o);o+=2;var h=e._lctf.numOfOnes(f);f!=0&&(u.pos=e.GPOS.readValueRecord(i,o,f))}else if(s==2&&u.fmt>=1&&u.fmt<=2){f=l.readUshort(i,o),o+=2;var p=l.readUshort(i,o);o+=2,h=e._lctf.numOfOnes(f);var v=e._lctf.numOfOnes(p);if(u.fmt==1){u.pairsets=[];var m=l.readUshort(i,o);o+=2;for(var g=0;g<m;g++){var y=c+l.readUshort(i,o);o+=2;var x=l.readUshort(i,y);y+=2;for(var S=[],_=0;_<x;_++){var C=l.readUshort(i,y);y+=2,f!=0&&(P=e.GPOS.readValueRecord(i,y,f),y+=2*h),p!=0&&(O=e.GPOS.readValueRecord(i,y,p),y+=2*v),S.push({gid2:C,val1:P,val2:O})}u.pairsets.push(S)}}if(u.fmt==2){var T=l.readUshort(i,o);o+=2;var A=l.readUshort(i,o);o+=2;var k=l.readUshort(i,o);o+=2;var M=l.readUshort(i,o);for(o+=2,u.classDef1=e._lctf.readClassDef(i,c+T),u.classDef2=e._lctf.readClassDef(i,c+A),u.matrix=[],g=0;g<k;g++){var R=[];for(_=0;_<M;_++){var P=null,O=null;f!=0&&(P=e.GPOS.readValueRecord(i,o,f),o+=2*h),p!=0&&(O=e.GPOS.readValueRecord(i,o,p),o+=2*v),R.push({val1:P,val2:O})}u.matrix.push(R)}}}else{if(s==9&&u.fmt==1){var $=l.readUshort(i,o);o+=2;var U=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=$;else if(a.ltype!=$)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,c+U)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(i,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var d=l.readUshort(i,o);o+=2,u.coverage=e._lctf.readCoverage(i,c+d)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(i,o),o+=2;else if(u.fmt==2){var f=l.readUshort(i,o);o+=2,u.newg=l.readUshorts(i,o,f),o+=2*u.newg.length}}else if(s==4){u.vals=[],f=l.readUshort(i,o),o+=2;for(var h=0;h<f;h++){var p=l.readUshort(i,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(i,c+p))}}else if(s==5&&u.fmt==2){if(u.fmt==2){var v=l.readUshort(i,o);o+=2,u.cDef=e._lctf.readClassDef(i,c+v),u.scset=[];var m=l.readUshort(i,o);for(o+=2,h=0;h<m;h++){var g=l.readUshort(i,o);o+=2,u.scset.push(g==0?null:e.GSUB.readSubClassSet(i,c+g))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(h=0;h<3;h++){f=l.readUshort(i,o),o+=2;for(var y=[],x=0;x<f;x++)y.push(e._lctf.readCoverage(i,c+l.readUshort(i,o+2*x)));o+=2*f,h==0&&(u.backCvg=y),h==1&&(u.inptCvg=y),h==2&&(u.ahedCvg=y)}f=l.readUshort(i,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(i,o,f)}}else{if(s==7&&u.fmt==1){var S=l.readUshort(i,o);o+=2;var _=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=S;else if(a.ltype!=S)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,c+_)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,l=[],c=o(i,s);s+=2;for(var u=0;u<c;u++){var d=o(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,a+d))}return l},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},l=o(i,s),c=o(i,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,c),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(i,s),a(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var d=o.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,a+d))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(i,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(i,s,u),s+=2*a[l[c]].length}return u=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var d=o.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,a+d))}return l},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,l.flags=a.readUshort(i,s),s+=2,l.unitsPerEm=a.readUshort(i,s),s+=2,l.created=a.readUint64(i,s),s+=8,l.modified=a.readUint64(i,s),s+=8,l.xMin=a.readShort(i,s),s+=2,l.yMin=a.readShort(i,s),s+=2,l.xMax=a.readShort(i,s),s+=2,l.yMax=a.readShort(i,s),s+=2,l.macStyle=a.readUshort(i,s),s+=2,l.lowestRecPPEM=a.readUshort(i,s),s+=2,l.fontDirectionHint=a.readShort(i,s),s+=2,l.indexToLocFormat=a.readShort(i,s),s+=2,l.glyphDataFormat=a.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.ascender=a.readShort(i,s),s+=2,l.descender=a.readShort(i,s),s+=2,l.lineGap=a.readShort(i,s),s+=2,l.advanceWidthMax=a.readUshort(i,s),s+=2,l.minLeftSideBearing=a.readShort(i,s),s+=2,l.minRightSideBearing=a.readShort(i,s),s+=2,l.xMaxExtent=a.readShort(i,s),s+=2,l.caretSlopeRise=a.readShort(i,s),s+=2,l.caretSlopeRun=a.readShort(i,s),s+=2,l.caretOffset=a.readShort(i,s),s+=2,s+=8,l.metricDataFormat=a.readShort(i,s),s+=2,l.numberOfHMetrics=a.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,d=0,f=0;f<a.maxp.numGlyphs;f++)f<a.hhea.numberOfHMetrics&&(u=l.readUshort(i,s),s+=2,d=l.readShort(i,s),s+=2),c.aWidth.push(u),c.lsBearing.push(d);return c},e.kern={},e.kern.parse=function(i,s,o,a){var l=e._bin,c=l.readUshort(i,s);if(s+=2,c==1)return e.kern.parseV1(i,s-2,o,a);var u=l.readUshort(i,s);s+=2;for(var d={glyph1:[],rval:[]},f=0;f<u;f++){s+=2,o=l.readUshort(i,s),s+=2;var h=l.readUshort(i,s);s+=2;var p=h>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;s=e.kern.readFormat0(i,s,d)}return d},e.kern.parseV1=function(i,s,o,a){var l=e._bin;l.readFixed(i,s),s+=4;var c=l.readUint(i,s);s+=4;for(var u={glyph1:[],rval:[]},d=0;d<c;d++){l.readUint(i,s),s+=4;var f=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var h=f>>>8;if((h&=15)!=0)throw"unknown kern table format: "+h;s=e.kern.readFormat0(i,s,u)}return u},e.kern.readFormat0=function(i,s,o){var a=e._bin,l=-1,c=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var u=0;u<c;u++){var d=a.readUshort(i,s);s+=2;var f=a.readUshort(i,s);s+=2;var h=a.readShort(i,s);s+=2,d!=l&&(o.glyph1.push(d),o.rval.push({glyph2:[],vals:[]}));var p=o.rval[o.rval.length-1];p.glyph2.push(f),p.vals.push(h),l=d}return s},e.loca={},e.loca.parse=function(i,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,d=a.maxp.numGlyphs+1;if(u==0)for(var f=0;f<d;f++)c.push(l.readUshort(i,s+(f<<1))<<1);if(u==1)for(f=0;f<d;f++)c.push(l.readUint(i,s+(f<<2)));return c},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,l={},c=a.readUint(i,s);return s+=4,l.numGlyphs=a.readUshort(i,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(i,s),s+=2,l.maxContours=a.readUshort(i,s),s+=2,l.maxCompositePoints=a.readUshort(i,s),s+=2,l.maxCompositeContours=a.readUshort(i,s),s+=2,l.maxZones=a.readUshort(i,s),s+=2,l.maxTwilightPoints=a.readUshort(i,s),s+=2,l.maxStorage=a.readUshort(i,s),s+=2,l.maxFunctionDefs=a.readUshort(i,s),s+=2,l.maxInstructionDefs=a.readUshort(i,s),s+=2,l.maxStackElements=a.readUshort(i,s),s+=2,l.maxSizeOfInstructions=a.readUshort(i,s),s+=2,l.maxComponentElements=a.readUshort(i,s),s+=2,l.maxComponentDepth=a.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,o){var a=e._bin,l={};a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var u,d=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],f=s+=2,h=0;h<c;h++){var p=a.readUshort(i,s);s+=2;var v=a.readUshort(i,s);s+=2;var m=a.readUshort(i,s);s+=2;var g=a.readUshort(i,s);s+=2;var y=a.readUshort(i,s);s+=2;var x=a.readUshort(i,s);s+=2;var S,_=d[g],C=f+12*c+x;if(p==0)S=a.readUnicode(i,C,y/2);else if(p==3&&v==0)S=a.readUnicode(i,C,y/2);else if(v==0)S=a.readASCII(i,C,y);else if(v==1)S=a.readUnicode(i,C,y/2);else if(v==3)S=a.readUnicode(i,C,y/2);else{if(p!=1)throw"unknown encoding "+v+", platformID: "+p;S=a.readASCII(i,C,y),console.debug("reading unknown MAC encoding "+v+" as ASCII")}var T="p"+p+","+m.toString(16);l[T]==null&&(l[T]={}),l[T][_!==void 0?_:g]=S,l[T]._lang=m}for(var A in l)if(l[A].postScriptName!=null&&l[A]._lang==1033)return l[A];for(var A in l)if(l[A].postScriptName!=null&&l[A]._lang==0)return l[A];for(var A in l)if(l[A].postScriptName!=null&&l[A]._lang==3084)return l[A];for(var A in l)if(l[A].postScriptName!=null)return l[A];for(var A in l){u=A;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var l={};if(a==0)e["OS/2"].version0(i,s,l);else if(a==1)e["OS/2"].version1(i,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,l={};return l.version=a.readFixed(i,s),s+=4,l.italicAngle=a.readFixed(i,s),s+=4,l.underlinePosition=a.readShort(i,s),s+=2,l.underlineThickness=a.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var d=l.groups[u];if(d[0]<=s&&s<=d[1])return d[2]+(s-d[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},c=i.CFF,u=i.CFF.Private;if(c.ROS){for(var d=0;c.FDSelect[d+2]<=s;)d+=2;u=c.FDArray[c.FDSelect[d+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,c,u,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,l=i.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,d=c==l?a:c+1,f=1&i.flags[c],h=1&i.flags[u],p=1&i.flags[d],v=i.xs[c],m=i.ys[c];if(c==a)if(f){if(!h){e.U.P.moveTo(s,v,m);continue}e.U.P.moveTo(s,i.xs[u],i.ys[u])}else h?e.U.P.moveTo(s,i.xs[u],i.ys[u]):e.U.P.moveTo(s,(i.xs[u]+v)/2,(i.ys[u]+m)/2);f?h&&e.U.P.lineTo(s,v,m):p?e.U.P.qcurveTo(s,v,m,i.xs[d],i.ys[d]):e.U.P.qcurveTo(s,v,m,(v+i.xs[d])/2,(m+i.ys[d])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var l={cmds:[],crds:[]},c=i.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,d=0;d<l.crds.length;d+=2){var f=l.crds[d],h=l.crds[d+1];o.crds.push(f*u.a+h*u.b+u.tx),o.crds.push(f*u.c+h*u.d+u.ty)}for(d=0;d<l.cmds.length;d++)o.cmds.push(l.cmds[d])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(i,s,o){var a=!1;if(i.GPOS)for(var l=i.GPOS,c=l.lookupList,u=l.featureList,d=[],f=0;f<u.length;f++){var h=u[f];if(h.tag=="kern"){a=!0;for(var p=0;p<h.tab.length;p++)if(!d[h.tab[p]]){d[h.tab[p]]=!0;for(var v=c[h.tab[p]],m=0;m<v.tabs.length;m++)if(v.tabs[m]!=null){var g,y=v.tabs[m];if((!y.coverage||(g=e._lctf.coverageIndex(y.coverage,s))!=-1)&&v.ltype!=1){if(v.ltype==2){var x=null;if(y.fmt==1){var S=y.pairsets[g];for(f=0;f<S.length;f++)S[f].gid2==o&&(x=S[f])}else if(y.fmt==2){var _=e.U._getGlyphClass(s,y.classDef1),C=e.U._getGlyphClass(o,y.classDef2);x=y.matrix[_][C]}if(x){var T=0;return x.val1&&x.val1[2]&&(T+=x.val1[2]),x.val2&&x.val2[0]&&(T+=x.val2[0]),T}}}}}}}if(i.kern&&!a){var A=i.kern.glyph1.indexOf(s);if(A!=-1){var k=i.kern.rval[A].glyph2.indexOf(o);if(k!=-1)return i.kern.rval[A].vals[k]}}return 0},e.U._applySubs=function(i,s,o,a){for(var l=i.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,d=o.tabs[c];if(!d.coverage||(u=e._lctf.coverageIndex(d.coverage,i[s]))!=-1){if(o.ltype==1)i[s],d.fmt==1?i[s]=i[s]+d.delta:i[s]=d.newg[u];else if(o.ltype==4)for(var f=d.vals[u],h=0;h<f.length;h++){var p=f[h],v=p.chain.length;if(!(v>l)){for(var m=!0,g=0,y=0;y<v;y++){for(;i[s+g+(1+y)]==-1;)g++;p.chain[y]!=i[s+g+(1+y)]&&(m=!1)}if(m){for(i[s]=p.nglyph,y=0;y<v+g;y++)i[s+y+1]=-1;break}}}else if(o.ltype==5&&d.fmt==2)for(var x=e._lctf.getInterval(d.cDef,i[s]),S=d.cDef[x+2],_=d.scset[S],C=0;C<_.length;C++){var T=_[C],A=T.input;if(!(A.length>l)){for(m=!0,y=0;y<A.length;y++){var k=e._lctf.getInterval(d.cDef,i[s+1+y]);if(x==-1&&d.cDef[k+2]!=A[y]){m=!1;break}}if(m){var M=T.substLookupRecords;for(h=0;h<M.length;h+=2)M[h],M[h+1]}}}else if(o.ltype==6&&d.fmt==3){if(!e.U._glsCovered(i,d.backCvg,s-d.backCvg.length)||!e.U._glsCovered(i,d.inptCvg,s)||!e.U._glsCovered(i,d.ahedCvg,s+d.inptCvg.length))continue;var R=d.lookupRec;for(C=0;C<R.length;C+=2){x=R[C];var P=a[R[C+1]];e.U._applySubs(i,s+x,P,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var d=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,f=e.U.glyphToPath(i,u),h=0;h<f.crds.length;h+=2)a.crds.push(f.crds[h]+l),a.crds.push(f.crds[h+1]);for(o&&a.cmds.push(o),h=0;h<f.cmds.length;h++)a.cmds.push(f.cmds[h]);o&&a.cmds.push("X"),l+=i.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(i,u,d))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,l,c,u){i.cmds.push("C"),i.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(i,s,o,a,l){i.cmds.push("Q"),i.crds.push(s,o,a,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,l){for(var c=s.stack,u=s.nStems,d=s.haveWidth,f=s.width,h=s.open,p=0,v=s.x,m=s.y,g=0,y=0,x=0,S=0,_=0,C=0,T=0,A=0,k=0,M=0,R={val:0,size:0};p<i.length;){e.CFF.getCharString(i,p,R);var P=R.val;if(p+=R.size,P=="o1"||P=="o18")c.length%2!=0&&!d&&(f=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0;else if(P=="o3"||P=="o23")c.length%2!=0&&!d&&(f=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0;else if(P=="o4")c.length>1&&!d&&(f=c.shift()+a.nominalWidthX,d=!0),h&&e.U.P.closePath(l),m+=c.pop(),e.U.P.moveTo(l,v,m),h=!0;else if(P=="o5")for(;c.length>0;)v+=c.shift(),m+=c.shift(),e.U.P.lineTo(l,v,m);else if(P=="o6"||P=="o7")for(var O=c.length,$=P=="o6",U=0;U<O;U++){var z=c.shift();$?v+=z:m+=z,$=!$,e.U.P.lineTo(l,v,m)}else if(P=="o8"||P=="o24"){O=c.length;for(var X=0;X+6<=O;)g=v+c.shift(),y=m+c.shift(),x=g+c.shift(),S=y+c.shift(),v=x+c.shift(),m=S+c.shift(),e.U.P.curveTo(l,g,y,x,S,v,m),X+=6;P=="o24"&&(v+=c.shift(),m+=c.shift(),e.U.P.lineTo(l,v,m))}else{if(P=="o11")break;if(P=="o1234"||P=="o1235"||P=="o1236"||P=="o1237")P=="o1234"&&(y=m,x=(g=v+c.shift())+c.shift(),M=S=y+c.shift(),C=S,A=m,v=(T=(_=(k=x+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,g,y,x,S,k,M),e.U.P.curveTo(l,_,C,T,A,v,m)),P=="o1235"&&(g=v+c.shift(),y=m+c.shift(),x=g+c.shift(),S=y+c.shift(),k=x+c.shift(),M=S+c.shift(),_=k+c.shift(),C=M+c.shift(),T=_+c.shift(),A=C+c.shift(),v=T+c.shift(),m=A+c.shift(),c.shift(),e.U.P.curveTo(l,g,y,x,S,k,M),e.U.P.curveTo(l,_,C,T,A,v,m)),P=="o1236"&&(g=v+c.shift(),y=m+c.shift(),x=g+c.shift(),M=S=y+c.shift(),C=S,T=(_=(k=x+c.shift())+c.shift())+c.shift(),A=C+c.shift(),v=T+c.shift(),e.U.P.curveTo(l,g,y,x,S,k,M),e.U.P.curveTo(l,_,C,T,A,v,m)),P=="o1237"&&(g=v+c.shift(),y=m+c.shift(),x=g+c.shift(),S=y+c.shift(),k=x+c.shift(),M=S+c.shift(),_=k+c.shift(),C=M+c.shift(),T=_+c.shift(),A=C+c.shift(),Math.abs(T-v)>Math.abs(A-m)?v=T+c.shift():m=A+c.shift(),e.U.P.curveTo(l,g,y,x,S,k,M),e.U.P.curveTo(l,_,C,T,A,v,m));else if(P=="o14"){if(c.length>0&&!d&&(f=c.shift()+o.nominalWidthX,d=!0),c.length==4){var D=c.shift(),F=c.shift(),W=c.shift(),V=c.shift(),j=e.CFF.glyphBySE(o,W),J=e.CFF.glyphBySE(o,V);e.U._drawCFF(o.CharStrings[j],s,o,a,l),s.x=D,s.y=F,e.U._drawCFF(o.CharStrings[J],s,o,a,l)}h&&(e.U.P.closePath(l),h=!1)}else if(P=="o19"||P=="o20")c.length%2!=0&&!d&&(f=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0,p+=u+7>>3;else if(P=="o21")c.length>2&&!d&&(f=c.shift()+a.nominalWidthX,d=!0),m+=c.pop(),v+=c.pop(),h&&e.U.P.closePath(l),e.U.P.moveTo(l,v,m),h=!0;else if(P=="o22")c.length>1&&!d&&(f=c.shift()+a.nominalWidthX,d=!0),v+=c.pop(),h&&e.U.P.closePath(l),e.U.P.moveTo(l,v,m),h=!0;else if(P=="o25"){for(;c.length>6;)v+=c.shift(),m+=c.shift(),e.U.P.lineTo(l,v,m);g=v+c.shift(),y=m+c.shift(),x=g+c.shift(),S=y+c.shift(),v=x+c.shift(),m=S+c.shift(),e.U.P.curveTo(l,g,y,x,S,v,m)}else if(P=="o26")for(c.length%2&&(v+=c.shift());c.length>0;)g=v,y=m+c.shift(),v=x=g+c.shift(),m=(S=y+c.shift())+c.shift(),e.U.P.curveTo(l,g,y,x,S,v,m);else if(P=="o27")for(c.length%2&&(m+=c.shift());c.length>0;)y=m,x=(g=v+c.shift())+c.shift(),S=y+c.shift(),v=x+c.shift(),m=S,e.U.P.curveTo(l,g,y,x,S,v,m);else if(P=="o10"||P=="o29"){var Q=P=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var te=c.pop(),re=Q.Subrs[te+Q.Bias];s.x=v,s.y=m,s.nStems=u,s.haveWidth=d,s.width=f,s.open=h,e.U._drawCFF(re,s,o,a,l),v=s.x,m=s.y,u=s.nStems,d=s.haveWidth,f=s.width,h=s.open}}else if(P=="o30"||P=="o31"){var se=c.length,fe=(X=0,P=="o31");for(X+=se-(O=-3&se);X<O;)fe?(y=m,x=(g=v+c.shift())+c.shift(),m=(S=y+c.shift())+c.shift(),O-X==5?(v=x+c.shift(),X++):v=x,fe=!1):(g=v,y=m+c.shift(),x=g+c.shift(),S=y+c.shift(),v=x+c.shift(),O-X==5?(m=S+c.shift(),X++):m=S,fe=!0),e.U.P.curveTo(l,g,y,x,S,v,m),X+=4}else{if((P+"").charAt(0)=="o")throw console.debug("Unknown operation: "+P,i),P;c.push(P)}}}s.x=v,s.y=m,s.nStems=u,s.haveWidth=d,s.width=f,s.open=h};var n=e,r={Typr:n};return t.Typr=n,t.default=r,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function gtt(){return function(t){var e=Uint8Array,n=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(P,O){for(var $=new n(31),U=0;U<31;++U)$[U]=O+=1<<P[U-1];var z=new r($[30]);for(U=1;U<30;++U)for(var X=$[U];X<$[U+1];++X)z[X]=X-$[U]<<5|U;return[$,z]},l=a(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var d=a(s,0)[0],f=new n(32768),h=0;h<32768;++h){var p=(43690&h)>>>1|(21845&h)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,f[h]=((65280&p)>>>8|(255&p)<<8)>>>1}var v=function(P,O,$){for(var U=P.length,z=0,X=new n(O);z<U;++z)++X[P[z]-1];var D,F=new n(O);for(z=0;z<O;++z)F[z]=F[z-1]+X[z-1]<<1;if($){D=new n(1<<O);var W=15-O;for(z=0;z<U;++z)if(P[z])for(var V=z<<4|P[z],j=O-P[z],J=F[P[z]-1]++<<j,Q=J|(1<<j)-1;J<=Q;++J)D[f[J]>>>W]=V}else for(D=new n(U),z=0;z<U;++z)P[z]&&(D[z]=f[F[P[z]-1]++]>>>15-P[z]);return D},m=new e(288);for(h=0;h<144;++h)m[h]=8;for(h=144;h<256;++h)m[h]=9;for(h=256;h<280;++h)m[h]=7;for(h=280;h<288;++h)m[h]=8;var g=new e(32);for(h=0;h<32;++h)g[h]=5;var y=v(m,9,1),x=v(g,5,1),S=function(P){for(var O=P[0],$=1;$<P.length;++$)P[$]>O&&(O=P[$]);return O},_=function(P,O,$){var U=O/8|0;return(P[U]|P[U+1]<<8)>>(7&O)&$},C=function(P,O){var $=O/8|0;return(P[$]|P[$+1]<<8|P[$+2]<<16)>>(7&O)},T=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],A=function(P,O,$){var U=new Error(O||T[P]);if(U.code=P,Error.captureStackTrace&&Error.captureStackTrace(U,A),!$)throw U;return U},k=function(P,O,$){var U=P.length;if(!U||$&&!$.l&&U<5)return O||new e(0);var z=!O||$,X=!$||$.i;$||($={}),O||(O=new e(3*U));var D,F=function(Le){var he=O.length;if(Le>he){var He=new e(Math.max(2*he,Le));He.set(O),O=He}},W=$.f||0,V=$.p||0,j=$.b||0,J=$.l,Q=$.d,te=$.m,re=$.n,se=8*U;do{if(!J){$.f=W=_(P,V,1);var fe=_(P,V+1,3);if(V+=3,!fe){var ae=P[(Y=((D=V)/8|0)+(7&D&&1)+4)-4]|P[Y-3]<<8,ye=Y+ae;if(ye>U){X&&A(0);break}z&&F(j+ae),O.set(P.subarray(Y,ye),j),$.b=j+=ae,$.p=V=8*ye;continue}if(fe==1)J=y,Q=x,te=9,re=5;else if(fe==2){var le=_(P,V,31)+257,H=_(P,V+10,15)+4,Me=le+_(P,V+5,31)+1;V+=14;for(var we=new e(Me),Ee=new e(19),me=0;me<H;++me)Ee[o[me]]=_(P,V+3*me,7);V+=3*H;var qe=S(Ee),ke=(1<<qe)-1,ee=v(Ee,qe,1);for(me=0;me<Me;){var Y,oe=ee[_(P,V,ke)];if(V+=15&oe,(Y=oe>>>4)<16)we[me++]=Y;else{var xe=0,Se=0;for(Y==16?(Se=3+_(P,V,3),V+=2,xe=we[me-1]):Y==17?(Se=3+_(P,V,7),V+=3):Y==18&&(Se=11+_(P,V,127),V+=7);Se--;)we[me++]=xe}}var be=we.subarray(0,le),Re=we.subarray(le);te=S(be),re=S(Re),J=v(be,te,1),Q=v(Re,re,1)}else A(1);if(V>se){X&&A(0);break}}z&&F(j+131072);for(var Ke=(1<<te)-1,ze=(1<<re)-1,Pe=V;;Pe=V){var De=(xe=J[C(P,V)&Ke])>>>4;if((V+=15&xe)>se){X&&A(0);break}if(xe||A(2),De<256)O[j++]=De;else{if(De==256){Pe=V,J=null;break}var We=De-254;if(De>264){var gt=i[me=De-257];We=_(P,V,(1<<gt)-1)+c[me],V+=gt}var ct=Q[C(P,V)&ze],Ye=ct>>>4;if(ct||A(3),V+=15&ct,Re=d[Ye],Ye>3&&(gt=s[Ye],Re+=C(P,V)&(1<<gt)-1,V+=gt),V>se){X&&A(0);break}z&&F(j+131072);for(var Xe=j+We;j<Xe;j+=4)O[j]=O[j-Re],O[j+1]=O[j+1-Re],O[j+2]=O[j+2-Re],O[j+3]=O[j+3-Re];j=Xe}}$.l=J,$.p=Pe,$.b=j,J&&(W=1,$.m=te,$.d=Q,$.n=re)}while(!W);return j==O.length?O:function(Le,he,He){(he==null||he<0)&&(he=0),(He==null||He>Le.length)&&(He=Le.length);var ot=new(Le instanceof n?n:Le instanceof r?r:e)(He-he);return ot.set(Le.subarray(he,He)),ot}(O,0,j)},M=new e(0),R=typeof TextDecoder<"u"&&new TextDecoder;try{R.decode(M,{stream:!0})}catch{}return t.convert_streams=function(P){var O=new DataView(P),$=0;function U(){var le=O.getUint16($);return $+=2,le}function z(){var le=O.getUint32($);return $+=4,le}function X(le){ae.setUint16(ye,le),ye+=2}function D(le){ae.setUint32(ye,le),ye+=4}for(var F={signature:z(),flavor:z(),length:z(),numTables:U(),reserved:U(),totalSfntSize:z(),majorVersion:U(),minorVersion:U(),metaOffset:z(),metaLength:z(),metaOrigLength:z(),privOffset:z(),privLength:z()},W=0;Math.pow(2,W)<=F.numTables;)W++;W--;for(var V=16*Math.pow(2,W),j=16*F.numTables-V,J=12,Q=[],te=0;te<F.numTables;te++)Q.push({tag:z(),offset:z(),compLength:z(),origLength:z(),origChecksum:z()}),J+=16;var re,se=new Uint8Array(12+16*Q.length+Q.reduce(function(le,H){return le+H.origLength+4},0)),fe=se.buffer,ae=new DataView(fe),ye=0;return D(F.flavor),X(F.numTables),X(V),X(W),X(j),Q.forEach(function(le){D(le.tag),D(le.origChecksum),D(J),D(le.origLength),le.outOffset=J,(J+=le.origLength)%4!=0&&(J+=4-J%4)}),Q.forEach(function(le){var H,Me=P.slice(le.offset,le.offset+le.compLength);if(le.compLength!=le.origLength){var we=new Uint8Array(le.origLength);H=new Uint8Array(Me,2),k(H,we)}else we=new Uint8Array(Me);se.set(we,le.outOffset);var Ee=0;(J=le.outOffset+le.origLength)%4!=0&&(Ee=4-J%4),se.set(new Uint8Array(Ee).buffer,le.outOffset+le.origLength),re=J+Ee}),fe.slice(0,re)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function vtt(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,l=16,c=32;let u;function d(_){if(!u){const C={R:s,L:i,D:o,C:l,U:c,T:a};u=new Map;for(let T in r){let A=0;r[T].split(",").forEach(k=>{let[M,R]=k.split("+");M=parseInt(M,36),R=R?parseInt(R,36):0,u.set(A+=M,C[T]);for(let P=R;P--;)u.set(++A,C[T])})}}return u.get(_)||c}const f=1,h=2,p=3,v=4,m=[null,"isol","init","fina","medi"];function g(_){const C=new Uint8Array(_.length);let T=c,A=f,k=-1;for(let M=0;M<_.length;M++){const R=_.codePointAt(M);let P=d(R)|0,O=f;P&a||(T&(i|o|l)?P&(s|o|l)?(O=p,(A===f||A===p)&&C[k]++):P&(i|c)&&(A===h||A===v)&&C[k]--:T&(s|c)&&(A===h||A===v)&&C[k]--,A=C[M]=O,T=P,k=M,R>65535&&M++)}return C}function y(_,C){const T=[];for(let k=0;k<C.length;k++){const M=C.codePointAt(k);M>65535&&k++,T.push(t.U.codeToGlyph(_,M))}const A=_.GSUB;if(A){const{lookupList:k,featureList:M}=A;let R;const P=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,O=[];M.forEach($=>{if(P.test($.tag))for(let U=0;U<$.tab.length;U++){if(O[$.tab[U]])continue;O[$.tab[U]]=!0;const z=k[$.tab[U]],X=/^(isol|init|fina|medi)$/.test($.tag);X&&!R&&(R=g(C));for(let D=0;D<T.length;D++)(!R||!X||m[R[D]]===$.tag)&&t.U._applySubs(T,D,z,k)}})}return T}function x(..._){for(let C=0;C<_.length;C++)if(typeof _[C]=="number")return _[C]}function S(_){const C=Object.create(null),T=_["OS/2"],A=_.hhea,k=_.head.unitsPerEm,M=x(T&&T.sTypoAscender,A&&A.ascender,k),R={unitsPerEm:k,ascender:M,descender:x(T&&T.sTypoDescender,A&&A.descender,0),capHeight:x(T&&T.sCapHeight,M),xHeight:x(T&&T.sxHeight,M),lineGap:x(T&&T.sTypoLineGap,A&&A.lineGap),forEachGlyph(P,O,$,U){let z=0;const X=1/R.unitsPerEm*O,D=y(_,P);let F=0,W=-1;return D.forEach((V,j)=>{if(V!==-1){let J=C[V];if(!J){const{cmds:Q,crds:te}=t.U.glyphToPath(_,V);let re="",se=0;for(let H=0,Me=Q.length;H<Me;H++){const we=n[Q[H]];re+=Q[H];for(let Ee=1;Ee<=we;Ee++)re+=(Ee>1?",":"")+te[se++]}let fe,ae,ye,le;if(te.length){fe=ae=1/0,ye=le=-1/0;for(let H=0,Me=te.length;H<Me;H+=2){let we=te[H],Ee=te[H+1];we<fe&&(fe=we),Ee<ae&&(ae=Ee),we>ye&&(ye=we),Ee>le&&(le=Ee)}}else fe=ye=ae=le=0;J=C[V]={index:V,advanceWidth:_.hmtx.aWidth[V],xMin:fe,yMin:ae,xMax:ye,yMax:le,path:re,pathCommandCount:Q.length}}W!==-1&&(z+=t.U.getPairAdjustment(_,W,V)*X),U.call(null,J,z,F),J.advanceWidth&&(z+=J.advanceWidth*X),$&&(z+=$*O),W=V}F+=P.codePointAt(F)>65535?2:1}),z}};return R}return function(C){const T=new Uint8Array(C,0,4),A=t._bin.readASCII(T,0,4);if(A==="wOFF")C=e(C);else if(A==="wOF2")throw new Error("woff2 fonts not supported");return S(t.parse(C)[0])}}const ytt=w2({name:"Typr Font Parser",dependencies:[mtt,gtt,vtt],init(t,e,n){const r=t(),i=e();return n(r,i)}}),B0={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},xtt=new Bt;function c0(){return(self.performance||Date).now()}const Hq=Object.create(null);function nle(t,e){t=Stt({},t);const n=c0();if(t.font=_tt(t.font||B0.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||B0.sdfGlyphSize,t.colorRanges!=null){let d={};for(let f in t.colorRanges)if(t.colorRanges.hasOwnProperty(f)){let h=t.colorRanges[f];typeof h!="number"&&(h=xtt.set(h).getHex()),d[f]=h}t.colorRanges=d}Object.freeze(t);const{textureWidth:r,sdfExponent:i}=B0,{sdfGlyphSize:s}=t,o=r/s*4;let a=Hq[s];if(!a){const d=document.createElement("canvas");d.width=r,d.height=s*256/o,a=Hq[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:d,sdfTexture:new ci(d,void 0,void 0,void 0,Er,Er),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,btt(a)}const{sdfTexture:l,sdfCanvas:c}=a;let u=a.glyphsByFont.get(t.font);u||a.glyphsByFont.set(t.font,u=new Map),Ttt(t).then(d=>{const{glyphIds:f,glyphPositions:h,fontSize:p,unitsPerEm:v,timings:m}=d,g=[],y=new Float32Array(f.length*4),x=p/v;let S=0,_=0;const C=c0();f.forEach((R,P)=>{let O=u.get(R);if(!O){const{path:X,pathBounds:D}=d.glyphData[R],F=Math.max(D[2]-D[0],D[3]-D[1])/s*(B0.sdfMargin*s+.5),W=a.glyphCount++,V=[D[0]-F,D[1]-F,D[2]+F,D[3]+F];u.set(R,O={path:X,atlasIndex:W,sdfViewBox:V}),g.push(O)}const{sdfViewBox:$}=O,U=h[_++],z=h[_++];y[S++]=U+$[0]*x,y[S++]=z+$[1]*x,y[S++]=U+$[2]*x,y[S++]=z+$[3]*x,f[P]=O.atlasIndex}),m.quads=(m.quads||0)+(c0()-C);const T=c0();m.sdf={};const A=c.height,k=Math.ceil(a.glyphCount/o),M=Math.pow(2,Math.ceil(Math.log2(k*s)));M>A&&(console.info(`Increasing SDF texture size ${A}->${M}`),ptt(c,r,M),l.dispose()),Promise.all(g.map(R=>rle(R,a,t.gpuAccelerateSDF).then(({timing:P})=>{m.sdf[R.atlasIndex]=P}))).then(()=>{g.length&&!a.contextLost&&(ile(a),l.needsUpdate=!0),m.sdfTotal=c0()-T,m.total=c0()-n,e(Object.freeze({parameters:t,sdfTexture:l,sdfGlyphSize:s,sdfExponent:i,glyphBounds:y,glyphAtlasIndices:f,glyphColors:d.glyphColors,caretPositions:d.caretPositions,caretHeight:d.caretHeight,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{a.contextLost||htt(c)})}function rle({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=B0,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(e/4),d=u%(a/r)*r,f=Math.floor(u/(a/r))*r,h=e%4;return att(r,r,t,n,c,l,i,d,f,h,o)}function btt(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const r=[];t.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(rle(s,t,!0))})}),Promise.all(r).then(()=>{ile(t),t.sdfTexture.needsUpdate=!0})})}function wtt({font:t,characters:e,sdfGlyphSize:n},r){let i=Array.isArray(e)?e.join(`
`):""+e;nle({font:t,sdfGlyphSize:n,text:i},r)}function Stt(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let fT;function _tt(t){return fT||(fT=typeof document>"u"?{}:document.createElement("a")),fT.href=t,fT.href}function ile(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:r,height:i}=e,s=t.sdfCanvas.getContext("webgl");let o=n.image.data;(!o||o.length!==r*i*4)&&(o=new Uint8Array(r*i*4),n.image={width:r,height:i,data:o},n.flipY=!1,n.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const Ctt=w2({name:"Typesetter",dependencies:[B0,ytt,ott,Jet],init(t,e,n,r){const{defaultFontURL:i}=t;return n(e,r(),{defaultFontURL:i})}}),Ttt=w2({name:"Typesetter",dependencies:[Ctt],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}}),jq={};function Ett(t){let e=jq[t];if(!e){const n=new Eh(1,1,t,t),r=n.clone(),i=n.attributes,s=r.attributes,o=new $n,a=i.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new Yt([...i[l].array,...s[l].array],i[l].itemSize))}),o.setIndex([...n.index.array,...r.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=jq[t]=o}return e}const Mtt="aTroikaGlyphBounds",Xq="aTroikaGlyphIndex",ktt="aTroikaGlyphColor";class Att extends CI{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new gs,this.boundingBox=new ms}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const n=this.getIndex().count;this.setDrawRange(e===Qi?n/2:0,e===Ga?n:n/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=Ett(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=n.attributes[r].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,r,i,s){u$(this,Mtt,e,4),u$(this,Xq,n,1),u$(this,ktt,s,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:r}=this;if(n){const{PI:i,floor:s,min:o,max:a,sin:l,cos:c}=Math,u=i/2,d=i*2,f=Math.abs(n),h=e[0]/f,p=e[2]/f,v=s((h+u)/d)!==s((p+u)/d)?-f:o(l(h)*f,l(p)*f),m=s((h-u)/d)!==s((p-u)/d)?f:a(l(h)*f,l(p)*f),g=s((h+i)/d)!==s((p+i)/d)?f*2:a(f-c(h)*f,f-c(p)*f);r.min.set(v,e[1],n<0?-g:0),r.max.set(m,e[3],n<0?0:g)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(Xq).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){n=r[i].end;let s=r[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=n}}function u$(t,e,n,r){const i=t.getAttribute(e);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(t.setAttribute(e,new Em(n,r)),delete t._maxInstanceCount,t.dispose()):i&&t.deleteAttribute(e)}const Itt=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,Rtt=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Ntt=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Ptt=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function $tt(t){const e=RO(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new lt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new er(0,0,0,0)},uTroikaClipRect:{value:new er(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new lt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Bt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Dn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Itt,vertexTransform:Rtt,fragmentDefs:Ntt,fragmentColorTransform:Ptt,customRewriter({vertexShader:n,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(n)||(n=n.replace(ele,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const KB=new Kd({color:16777215,side:Ga,transparent:!0}),qq=8421504,Yq=new wn,hT=new pe,d$=new pe,jx=[],Dtt=new pe,f$="+x+y";function Kq(t){return Array.isArray(t)?t[0]:t}let sle=()=>{const t=new ai(new Eh(1,1),KB);return sle=()=>t,t},ole=()=>{const t=new ai(new Eh(1,1,32,1),KB);return ole=()=>t,t};const Ltt={type:"syncstart"},Ott={type:"synccomplete"},ale=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Ftt=ale.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let lle=class extends ai{constructor(){const e=new Att;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=qq,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=f$,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(Ltt),nle({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(Ott),e&&e()})))}onBeforeRender(e,n,r,i,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=Uu}onAfterRender(e,n,r,i,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=KB.clone());if((!e||e.baseMaterial!==n)&&(e=this._derivedMaterial=$tt(n),n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return Kq(this.material).getDepthMaterial()}get customDistanceMaterial(){return Kq(this.material).getDistanceMaterial()}_prepareForRender(e){const n=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:a,blockBounds:l}=i;r.uTroikaSDFTexture.value=a,r.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!n&&!!i.glyphColors;let c=0,u=0,d=0,f,h,p,v=0,m=0;if(n){let{outlineWidth:y,outlineOffsetX:x,outlineOffsetY:S,outlineBlur:_,outlineOpacity:C}=this;c=this._parsePercent(y)||0,u=Math.max(0,this._parsePercent(_)||0),f=C,v=this._parsePercent(x)||0,m=this._parsePercent(S)||0}else d=Math.max(0,this._parsePercent(this.strokeWidth)||0),d&&(p=this.strokeColor,r.uTroikaStrokeColor.value.set(p??qq),h=this.strokeOpacity,h==null&&(h=1)),f=this.fillOpacity;r.uTroikaDistanceOffset.value=c,r.uTroikaPositionOffset.value.set(v,m),r.uTroikaBlurRadius.value=u,r.uTroikaStrokeWidth.value=d,r.uTroikaStrokeOpacity.value=h,r.uTroikaFillOpacity.value=f??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let g=this.clipRect;if(g&&Array.isArray(g)&&g.length===4)r.uTroikaClipRect.value.fromArray(g);else{const y=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-y,l[1]-y,l[2]+y,l[3]+y)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=n?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new Bt;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||f$;if(o!==e._orientation){let a=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==f$&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,d,f]=l;hT.set(0,0,0)[u]=c==="-"?1:-1,d$.set(0,0,0)[f]=d==="-"?-1:1,Yq.lookAt(Dtt,hT.cross(d$),d$),a.setFromMatrix4(Yq)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),r=n?parseFloat(n[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new lt){n.copy(e);const r=this.curveRadius;return r&&(n.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),n}worldPositionToTextCoords(e,n=new lt){return hT.copy(e),this.localPositionToTextCoords(this.worldToLocal(hT),n)}raycast(e,n){const{textRenderInfo:r,curveRadius:i}=this;if(r){const s=r.blockBounds,o=i?ole():sle(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let u=0;u<c.count;u++){let d=s[0]+c.getX(u)*(s[2]-s[0]);const f=s[1]+c.getY(u)*(s[3]-s[1]);let h=0;i&&(h=i-Math.cos(d/i)*i,d=Math.sin(d/i)*i),l.setXYZ(u,d,f,h)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,jx.length=0,o.raycast(e,jx);for(let u=0;u<jx.length;u++)jx[u].object=this,n.push(jx[u])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,Ftt.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};ale.forEach(t=>{const e="_private_"+t;Object.defineProperty(lle.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});const h$=N.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:r,fontSize:i=1,children:s,characters:o,onSync:a,...l},c)=>{const u=cs(({invalidate:p})=>p),[d]=N.useState(()=>new lle),[f,h]=N.useMemo(()=>{const p=[];let v="";return N.Children.forEach(s,m=>{typeof m=="string"||typeof m=="number"?v+=m:p.push(m)}),[p,v]},[s]);return Tae(()=>new Promise(p=>wtt({font:r,characters:o},p)),["troika-text",r,o]),N.useLayoutEffect(()=>void d.sync(()=>{u(),a&&a(d)})),N.useEffect(()=>()=>d.dispose(),[d]),N.createElement("primitive",ve({object:d,ref:c,font:r,text:h,anchorX:e,anchorY:n,fontSize:i,sdfGlyphSize:t},l),f)});function Utt(t,e,n){const r=cs(f=>f.size),i=cs(f=>f.viewport),s=typeof t=="number"?t:r.width*i.dpr,o=typeof e=="number"?e:r.height*i.dpr,a=(typeof t=="number"?n:t)||{},{samples:l=0,depth:c,...u}=a,d=N.useMemo(()=>{const f=new Hl(s,o,{minFilter:Er,magFilter:Er,type:xo,...u});return c&&(f.depthTexture=new tI(s,o,Ms)),f.samples=l,f},[]);return N.useLayoutEffect(()=>{d.setSize(s,o),l&&(d.samples=l)},[l,d,s,o]),N.useEffect(()=>()=>d.dispose(),[]),d}const Btt=t=>typeof t=="function",MI=N.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:r,children:i,...s},o)=>{const a=cs(({set:m})=>m),l=cs(({camera:m})=>m),c=cs(({size:m})=>m),u=N.useRef(null),d=N.useRef(null),f=Utt(e);N.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),N.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let h=0,p=null;const v=Btt(i);return rg(m=>{v&&(n===1/0||h<n)&&(d.current.visible=!1,m.gl.setRenderTarget(f),p=m.scene.background,t&&(m.scene.background=t),m.gl.render(m.scene,u.current),m.scene.background=p,m.gl.setRenderTarget(null),d.current.visible=!0,h++)}),N.useLayoutEffect(()=>{if(r){const m=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:m}))}},[u,r,a]),N.createElement(N.Fragment,null,N.createElement("perspectiveCamera",ve({ref:bet([u,o])},s),!v&&i),N.createElement("group",{ref:d},v&&i(f.texture)))}),kI=N.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const d=cs(C=>C.invalidate),f=cs(C=>C.camera),h=cs(C=>C.gl),p=cs(C=>C.events),v=cs(C=>C.setEvents),m=cs(C=>C.set),g=cs(C=>C.get),y=cs(C=>C.performance),x=e||f,S=r||p.connected||h.domElement,_=N.useMemo(()=>new Bet(x),[x]);return rg(()=>{_.enabled&&_.update()},-1),N.useEffect(()=>(s&&_.connect(s===!0?S:s),_.connect(S),()=>void _.dispose()),[s,S,n,_,d]),N.useEffect(()=>{const C=k=>{d(),n&&y.regress(),o&&o(k)},T=k=>{a&&a(k)},A=k=>{l&&l(k)};return _.addEventListener("change",C),_.addEventListener("start",T),_.addEventListener("end",A),()=>{_.removeEventListener("start",T),_.removeEventListener("end",A),_.removeEventListener("change",C)}},[o,a,l,_,d,v]),N.useEffect(()=>{if(t){const C=g().controls;return m({controls:_}),()=>m({controls:C})}},[t,_]),N.createElement("primitive",ve({ref:u,object:_,enableDamping:i},c))}),p$={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},ztt="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Zq=t=>Array.isArray(t);function cle({files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:n=void 0,encoding:r=void 0,extensions:i}={}){var s;let o=null,a=!1,l;if(n){if(!(n in p$))throw new Error("Preset must be one of: "+Object.keys(p$).join(", "));t=p$[n],e=ztt}if(a=Zq(t),l=Zq(t)?"cube":t.startsWith("data:application/exr")?"exr":t.startsWith("data:application/hdr")?"hdr":(s=t.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=a?rae:l==="hdr"?zet:l==="exr"?Wet:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);const c=jB(o,a?[t]:t,h=>{h.setPath==null||h.setPath(e),i&&i(h)}),u=a?c[0]:c;u.mapping=a?Bu:Rv;const d=3001,f=3e3;return"colorSpace"in u?u.colorSpace=r??a?"srgb":"srgb-linear":u.encoding=r??a?d:f,u}const Wtt=t=>t.current&&t.current.isScene,Vtt=t=>Wtt(t)?t.current:t;function ZB(t,e,n,r,i=0){const s=Vtt(e||n),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return t!=="only"&&(s.environment=r),t&&(s.background=r),t&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=i),()=>{t!=="only"&&(s.environment=a),t&&(s.background=o),t&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function JB({scene:t,background:e=!1,blur:n,map:r}){const i=cs(s=>s.scene);return N.useLayoutEffect(()=>{if(r)return ZB(e,t,i,r,n)},[i,t,r,e,n]),null}function ule({background:t=!1,scene:e,blur:n,...r}){const i=cle(r),s=cs(o=>o.scene);return N.useLayoutEffect(()=>ZB(t,e,s,i,n),[i,t,e,s,n]),null}function Gtt({children:t,near:e=1,far:n=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,scene:l,files:c,path:u,preset:d=void 0,extensions:f}){const h=cs(x=>x.gl),p=cs(x=>x.scene),v=N.useRef(null),[m]=N.useState(()=>new nw),g=N.useMemo(()=>{const x=new vB(r);return x.texture.type=xo,x},[r]);N.useLayoutEffect(()=>(i===1&&v.current.update(h,m),ZB(o,l,p,g.texture,a)),[t,m,g.texture,l,p,o,i,h]);let y=1;return rg(()=>{(i===1/0||y<i)&&(v.current.update(h,m),y++)}),N.createElement(N.Fragment,null,eet(N.createElement(N.Fragment,null,t,N.createElement("cubeCamera",{ref:v,args:[e,n,g]}),c||d?N.createElement(ule,{background:!0,files:c,preset:d,path:u,extensions:f}):s?N.createElement(JB,{background:!0,map:s,extensions:f}):null),m))}function Htt(t){var e,n,r,i;const s=cle(t),o=t.map||s;N.useMemo(()=>Eae({GroundProjectedEnvImpl:Let}),[]);const a=N.useMemo(()=>[o],[o]),l=(e=t.ground)==null?void 0:e.height,c=(n=t.ground)==null?void 0:n.radius,u=(r=(i=t.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return N.createElement(N.Fragment,null,N.createElement(JB,ve({},t,{map:o})),N.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function AI(t){return t.ground?N.createElement(Htt,t):t.map?N.createElement(JB,t):t.children?N.createElement(Gtt,t):N.createElement(ule,t)}const jtt=t=>Math.PI/180*t,Xtt=({follow:t})=>{const n=2.6666666666666665,r=28;var i=.005;const s=25e3,[o,a]=N.useState(0),[l,c]=N.useState(.01),[u,d]=N.useState(.02),[f,h]=N.useState(0),[p,v]=N.useState(10*(u-l)*i),[m,g]=N.useState((l*(r-f)-u)*i),[y,x]=N.useState((l*u-n*f)*i),[S,_]=N.useState(.01),[C,T]=N.useState(.05),[A,k]=N.useState(0),[M,R]=N.useState(10*(C-S)*i),[P,O]=N.useState((S*(r-A)-C)*i),[$,U]=N.useState((S*C-n*A)*i),[z,X]=N.useState([new pe(l,u,f)]),[D,F]=N.useState([new pe(S,C,A)]),[W,V]=N.useState([l,u,f]),[j,J]=N.useState([S,C,A]),[Q,te]=N.useState(l),[re,se]=N.useState(u),[fe,ae]=N.useState(f);return rg(({clock:ye})=>{o<s&&(a(le=>le+1),v(10*(u-l)*i),g((l*(r-f)-u)*i),x((l*u-n*f)*i),R(10*(C-S)*i),O((S*(r-A)-C)*i),U((S*C-n*A)*i),c(le=>(t.ball1&&te(le-p),le+p)),d(le=>(t.ball1&&se(le-m),le+m)),h(le=>(t.ball1&&ae(le-y),le+y)),_(le=>(t.ball2&&te(le-M),le+M)),T(le=>(t.ball2&&se(le-P),le+P)),k(le=>(t.ball2&&ae(le-$),le+$)),X(le=>{const H=[...le];return H.push(new pe(l,u,f)),H}),F(le=>{const H=[...le];return H.push(new pe(S,C,A)),H}),V(le=>{const H=[...le];return H[0]=l,H[1]=u,H[2]=f,H}),J(le=>{const H=[...le];return H[0]=S,H[1]=C,H[2]=A,H}))}),L.jsxs(L.Fragment,{children:[L.jsx(MI,{makeDefault:!0,position:t.default?[0,25,125]:[Q,re+2,fe+10]}),L.jsxs("mesh",{position:W,castShadow:!0,children:[L.jsx("sphereGeometry",{args:[.25,32,32]}),L.jsx("meshStandardMaterial",{color:"#30a7d7"})]}),L.jsxs("mesh",{position:j,castShadow:!0,children:[L.jsx("sphereGeometry",{args:[.25,32,32]}),L.jsx("meshStandardMaterial",{color:"#e57373"})]}),L.jsx(Lq,{points:z,color:"#30a7d7",opacity:1,transparent:!0,lineWidth:2}),L.jsx(Lq,{points:D,color:"#e57373",opacity:1,transparent:!0,lineWidth:2}),L.jsx("ambientLight",{args:["#ffffff",.25]}),L.jsx("spotLight",{args:["#ffffff",2,70,jtt(45),.9],position:[-2,10,0],castShadow:!0}),L.jsx(AI,{background:!0,children:L.jsxs("mesh",{children:[L.jsx("sphereGeometry",{args:[50,100,100]}),L.jsx("meshBasicMaterial",{color:"#000000",side:Qi})]})}),L.jsx(kI,{target:t.default?[0,0,0]:[Q,re,fe-2]})]})};function qtt(){const[t,e]=N.useState({ball1:!1,ball2:!1,default:!0});return L.jsxs(L.Fragment,{children:[L.jsxs(Qn,{sx:{textAlign:"center",m:2},children:[L.jsx(En,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:"Use the mouse to zoom in/out and rotate."}),L.jsx(kc,{sx:{mt:2,mr:2,ml:2},variant:"contained",onClick:()=>{e(n=>{const r={...n};return r.ball1=!1,r.ball2=!1,r.default=!0,r})},children:"Default"}),L.jsx(kc,{sx:{mt:2,mr:2,ml:2},variant:"contained",onClick:()=>{e(n=>{const r={...n};return r.ball1=!0,r.ball2=!1,r.default=!1,r})},children:"Follow Ball 1"}),L.jsx(kc,{sx:{mt:2,mr:2,ml:2},variant:"contained",onClick:()=>{e(n=>{const r={...n};return r.ball1=!1,r.ball2=!0,r.default=!1,r})},children:"Follow Ball 2 "})]}),L.jsx(TI,{style:{height:"50vh",width:"100%"},shadows:!0,children:L.jsx(Xtt,{follow:t})}),L.jsxs(En,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left",maxWidth:"555px"},children:["I created this  ",L.jsx(Lu,{href:"https://en.wikipedia.org/wiki/Lorenz_system",target:"_blank",underline:"hover",children:"Lorenz  System"}),"  visualization after watching ",L.jsx(Lu,{href:"https://youtu.be/fDek6cYijxI?si=IHO4v3pfxyJBv82F&t=282",target:"_blank",underline:"hover",children:"this cool video"})," by Derek Muller, Ph.D. You can oberve two objects with very proximate initial position.  After a few seconds, their trajectories are very different."]})]})}const Ytt=t=>Math.PI/180*t;function Ktt(){var e=0,n=0;const r="#03a9f4",i="#FF0C0C",s="white",o="black",a="#efe436",l=r,c="#51ed15",u="#d715ed",d=N.useRef(),[f,h]=N.useState(!1),[p,v]=N.useState(-1),[m,g]=N.useState([]),[y,x]=N.useState([]),[S,_]=N.useState("Choose Starting Node"),[C,T]=N.useState(c),[A,k]=N.useState(!1),[M,R]=N.useState(!1),[P,O]=N.useState(!1);function $(xe,Se,be){this.f=0,this.g=Number.MAX_VALUE,this.h=0,this.prev=null,this.isBlocked=Math.random()<.25,this.isStart=!1,this.isEnd=!1,this.cameFrom=null,this.x=xe,this.y=Se,this.z=be,this.id=-1,this.color=this.isBlocked?o:s,this.isInOpenSet=!1,this.neighbors=[]}const U=[[0,-1],[0,1],[-1,0],[1,0],[1,1],[-1,-1],[-1,1],[1,-1]],[z,X]=N.useState(!0),[D,F]=N.useState(!1),[W,V]=N.useState(null),[j,J]=N.useState(null),[Q,te]=N.useState(null),[re,se]=N.useState(null),fe=[],[ae,ye]=N.useState(()=>{const xe=[];for(let be=0;be<40;be++){const Re=[];for(let Ke=0;Ke<40;Ke++){var Se=new $(be,Ke,0);Re.push(Se)}xe.push(Re)}return xe.forEach(be=>{be.forEach(Re=>{U.forEach(([Ke,ze])=>{const Pe=Re.x+Ke,De=Re.y+ze;Pe>=0&&De>=0&&Pe<=39&&De<=39&&(xe[Pe][De].isBlocked||Re.neighbors.push(xe[Pe][De]))})})}),xe}),le=(xe,Se)=>Math.sqrt((xe.x-Se.x)**2+(xe.y-Se.y)**2),H=()=>{m.forEach(Re=>{!Re.isStart&&!Re.isEnd&&(Re.color=r)}),y.forEach(Re=>{!Re.isStart&&!Re.isEnd&&(Re.color=i)});var xe=0;if(m.length>0){for(let Re=0;Re<m.length;Re++)m[Re].f<m[xe].f&&(xe=Re);var Se=m[xe];!Se.isStart&&!Se.isEnd&&(Se.color=l);for(let Re=m.length-1;Re>=0;Re--)m[Re]===Se&&m.splice(m.indexOf(m[Re]),1);var be=!0;g(Re=>{const Ke=[...Re];return Se.neighbors.forEach(ze=>{if(!y.includes(ze)){if(ze===j){j.prev=Se;for(var Pe=j,De=500;Pe.prev&&De>0;)!Pe.isEnd&&!Pe.isStart&&(Pe.color=a),fe.push([Pe.x,Pe.y,Pe.z]),Pe=Pe.prev,De=De-1;fe.push([W.x,W.y,W.z]),be=!1,R(!0),O(!1),_("Path Found!"),T(a)}be&&!ze.isBlocked&&!m.includes(ze)&&(ze.color=r,ze.g=Se.g+le(ze,Se),ze.f=ze.g+ze.h,ze.prev=Se,Ke.push(ze))}}),Ke}),x(Re=>{const Ke=[...Re];return Ke.push(Se),Ke})}else Q===re?(console.log("Start is end"),_("Start is End."),R(!0)):(console.log("NO solution.  Empty openset. "),_("No Path Possible."),T("red"),R(!0))},Me=xe=>{te(xe)},we=xe=>{se(xe)},Ee=(xe,Se)=>{xe!==Se&&(xe.g=0,xe.f=le(xe,Se),xe.isStart=!0,xe.isEnd=!1,xe.isBlocked=!1,Se.isStart=!1,Se.isEnd=!0,Se.isBlocked=!1,xe.color=c,Se.color=u,V(xe),J(Se),ae.forEach(be=>be.forEach(Re=>Re.h=le(Re,Se))),g(be=>{const Re=[...be];return Re.push(xe),Re}))},[me,qe]=N.useState(null),[ke,ee]=N.useState(.025),[Y,oe]=N.useState(!1);return rg(({clock:xe})=>{Y&&(A&&(Ee(Q,re),k(!1),O(!0),qe(xe.elapsedTime+ke)),xe.elapsedTime>me&&(!M&&P&&H(),qe(xe.elapsedTime+ke),M&&!P&&(oe(!1),ee(.0245))))}),L.jsxs(L.Fragment,{children:[L.jsx(h$,{color:C,fontSize:2,anchorX:"left",anchorY:"middle",position:[-2,42,0],children:S}),L.jsx(h$,{color:r,fontSize:2,anchorX:"left",anchorY:"middle",position:[40*.55,40+4.5,0],children:"Nodes in queue to be explored."}),L.jsx(h$,{color:i,fontSize:2,anchorX:"left",anchorY:"middle",position:[40*.55,42,0],children:"Nodes already explored."}),L.jsx(MI,{makeDefault:!0,position:[25,18,75]}),ae.map((xe,Se)=>(xe.id=n,n=n+1,L.jsx(N.Fragment,{children:xe.map((be,Re)=>(be.id=e,e=e+1,be.id%40,be.id%40,L.jsxs("mesh",{ref:d,scale:p===be.id&&f?1.5:1,onClick:Ke=>{z&&!ae[xe.id%40][be.id%40].isBlocked&&(be.color=c,ae[xe.id%40][be.id%40].isStart=!0,Me(ae[xe.id%40][be.id%40]),X(!1),_("Choose Ending Node"),T(u),F(!0),oe(!0)),D&&!ae[xe.id%40][be.id%40].isBlocked&&(be.color=u,we(ae[xe.id%40][be.id%40]),F(!1),k(!0)),p!=be.id?(v(be.id),h(!0)):h(!f)},position:[be.x,be.y,be.z],castShadow:!0,children:[L.jsx("sphereGeometry",{args:[.4,16,16]}),L.jsx("meshStandardMaterial",{color:be.color})]},Re)))},Se))),L.jsx("ambientLight",{args:["#ffffff",1.75]}),L.jsx("spotLight",{args:["#ffffff",1555,70,Ytt(45),.9],position:[60,55,15],castShadow:!0}),L.jsx(AI,{background:!0,children:L.jsxs("mesh",{children:[L.jsx("sphereGeometry",{args:[50,100,100]}),L.jsx("meshBasicMaterial",{color:"#000000",side:Qi})]})}),L.jsx(kI,{target:[25,18,0]})]})}function Ztt(){const[t,e]=N.useState(m$==="chrome"||m$==="MS Edge Chromium");return L.jsx(L.Fragment,{children:t?L.jsxs(L.Fragment,{children:[L.jsxs(Qn,{sx:{textAlign:"center",m:2},children:[L.jsx(En,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:"Use the mouse to zoom in/out and rotate."}),L.jsxs(En,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:["This is a visualizaion of the ",L.jsx(Lu,{href:"https://en.wikipedia.org/wiki/A*_search_algorithm",target:"_blank",underline:"hover",children:"A* search algorithm"}),"."]})]}),L.jsx(TI,{style:{height:"90vh",width:"100%"},shadows:!0,children:L.jsx(Ktt,{})})]}):L.jsxs(En,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:["Please use Chrome Browswer or Microsoft Edge. ",m$," is not supported."]})})}var m$=function(t){switch(!0){case t.indexOf("edge")>-1:return"MS Edge (EdgeHtml)";case t.indexOf("edg")>-1:return"MS Edge Chromium";case(t.indexOf("opr")>-1&&!!window.opr):return"opera";case(t.indexOf("chrome")>-1&&!!window.chrome):return"chrome";case t.indexOf("trident")>-1:return"Internet Explorer";case t.indexOf("firefox")>-1:return"firefox";case t.indexOf("safari")>-1:return"safari";default:return"other"}}(window.navigator.userAgent.toLowerCase());const Jtt=t=>Math.PI/180*t,Qtt=({playing:t})=>{const r=5*Math.sqrt(3),[i,s]=N.useState(()=>[[0,0,0],[5,r,0],[10,0,0]]),[o,a]=N.useState(()=>{const f=Math.random()*10;var h=0;return f<5?h=Math.random()*(r/5*f):h=Math.random()*(-1*r/5*f+2*r),[[f,h,0]]}),l=()=>{const f=Math.floor(Math.random()*3),h=i[f];a(p=>{const v=[...p],m=v[v.length-1],g=[.5*(m[0]+h[0]),.5*(m[1]+h[1]),0];return v.push(g),v})},c=5e3,[u,d]=N.useState(0);return rg(()=>{t&&u<c&&(l(),d(f=>f+1))}),L.jsxs(L.Fragment,{children:[L.jsx(MI,{makeDefault:!0,position:[5,5,15]}),o.map((f,h)=>L.jsxs("mesh",{onClick:l,position:f,children:[L.jsx("sphereGeometry",{args:[.015,16,16]}),L.jsx("meshBasicMaterial",{color:"#30a7d7"})]},h)),L.jsx("ambientLight",{args:["#ffffff",2.25]}),L.jsx("spotLight",{args:["#ffffff",2,70,Jtt(45),.9],position:[-2,10,0],castShadow:!0}),L.jsx(AI,{background:!0,children:L.jsxs("mesh",{children:[L.jsx("sphereGeometry",{args:[50,100,100]}),L.jsx("meshBasicMaterial",{color:"#000000",side:Qi})]})}),L.jsx(kI,{target:[5,5,0]})]})};function ent(){const[t,e]=N.useState(!1);return L.jsxs(L.Fragment,{children:[L.jsxs(Qn,{sx:{textAlign:"center"},children:[L.jsx(En,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:"Use the mouse to zoom in/out and rotate."}),L.jsxs(En,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left"},children:["I made this after watching ",L.jsx(Lu,{href:"https://www.youtube.com/watch?v=IGlGvSXkRGI",target:"_blank",underline:"hover",children:"this video"}),"."]}),L.jsxs(En,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left"},children:["You can find more information here: ",L.jsx(Lu,{href:"https://en.wikipedia.org/wiki/Chaos_game",target:"_blank",underline:"hover",children:"Chaos Game"}),"."]}),L.jsx(kc,{sx:{mt:1},variant:"contained",onClick:()=>{e(!0)},children:"Start Animation"})]}),L.jsx(TI,{style:{height:"70vh",width:"100%"},shadows:!0,children:L.jsx(Qtt,{playing:t})})]})}const tnt=t=>Math.PI/180*t,nnt=({playing:t})=>{const e=[.05,.1,.2,.15,.05,.1];function n(y,x,S){this.x=y,this.y=x,this.z=S,this.color=Math.random()<.9?"#30a7d7":"#e57373",this.size=e[Math.floor(Math.random()*e.length)]}const r=295,i=.5,s=(y,x,S,_,C)=>new n(i*(Math.cos(y+x)*Math.exp(y))+S,i*Math.sin(y+x)*Math.exp(y)+_,C),[o,a]=N.useState(()=>{const y=[],S=Math.PI/8;for(let A=0;A<r;A++){const k=A,M=.025*k;var _=5*Math.random(),C=5*Math.random(),T=5*Math.random();for(let R=0;R<2*8+1;R++)k<115?Math.random()<.1&&y.push(s(M,R*S,_,C,T)):k<150||k<200?Math.random()<.9&&y.push(s(M,R*S,_,C,T)):y.push(s(M,R*S,_,C,T))}return y}),l=y=>{a(x=>{const S=[...x];return S.forEach(_=>{_.x=_.x*Math.cos(y)-_.y*Math.sin(y),_.y=_.x*Math.sin(y)+_.y*Math.cos(y)}),S})},c=2e3,[u,d]=N.useState(0),[f,h]=N.useState(null),[p,v]=N.useState(.02),[m,g]=N.useState(!0);return rg(({clock:y})=>{t&&u<c&&(y.elapsedTime>f&&!m&&(l(-5e-4),d(x=>x+1),h(y.elapsedTime+p)),m&&(h(y.elapsedTime+p),g(!1)))}),L.jsxs(L.Fragment,{children:[L.jsx(MI,{makeDefault:!0,position:[-15,40,59]}),o.map((y,x)=>L.jsxs("mesh",{position:[y.x,y.z,-1*y.y],children:[L.jsx("sphereGeometry",{args:[y.size,16,16]}),L.jsx("meshBasicMaterial",{color:y.color})]},x)),L.jsx("ambientLight",{args:["#ffffff",.25]}),L.jsx("spotLight",{args:["#ffffff",2,70,tnt(45),.9],position:[-2,10,0],castShadow:!0}),L.jsx(AI,{background:!0,children:L.jsxs("mesh",{children:[L.jsx("sphereGeometry",{args:[50,100,100]}),L.jsx("meshBasicMaterial",{color:"#000000",side:Qi})]})}),L.jsx(kI,{target:[5,0,0]})]})};function rnt(){const[t,e]=N.useState(!1);return L.jsxs(L.Fragment,{children:[L.jsxs(Qn,{sx:{textAlign:"center",m:2},children:[L.jsx(En,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:"Use the mouse to zoom in/out and rotate."}),L.jsx(kc,{sx:{m:2},variant:"contained",onClick:()=>{e(!0)},children:"Start Animation"})]}),L.jsx(TI,{style:{height:"70vh",width:"100%"},shadows:!0,children:L.jsx(nnt,{playing:t})})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const int=1e-7,snt=1e-4;class dle{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class QB{refCount(e){return ra("refCount")}incRef(e){return ra("incRef")}timerAvailable(){return!0}time(e){return ra("time")}read(e){return ra("read")}readSync(e){return ra("readSync")}readToGPU(e,n){return ra("readToGPU")}numDataIds(){return ra("numDataIds")}disposeData(e,n){return ra("disposeData")}write(e,n,r){return ra("write")}move(e,n,r,i,s){return ra("move")}createTensorFromGPUData(e,n,r){return ra("createTensorFromGPUData")}memory(){return ra("memory")}floatPrecision(){return ra("floatPrecision")}epsilon(){return this.floatPrecision()===32?int:snt}dispose(){return ra("dispose")}}function ra(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ont(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,v0(t,e,n)}function km(t,e,n){return Math.max(t,Math.min(e,n))}function e6(t){return t%2===0?t:t+1}function v0(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ant(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function ue(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function t6(t,e,n=""){ue(br(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function n6(t){ue(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function it(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function br(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Lv(t){return t%1===0}function PO(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function sv(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function Jq(t,e=i=>0,n,r){return new Promise((i,s)=>{let o=0;const a=()=>{if(t()){i();return}o++;const l=e(o);if(n!=null&&o>=n){s();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function fle(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function Wn(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),ue(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),ue(t.every(r=>Lv(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Ah(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||i?null:Wn(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(s!=null){if(s[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(s[o]==null||s[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),s[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function Xs(t,e){return Ei(t,e)}function Ei(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function lnt(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function cnt(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function hle(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function kM(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function unt(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function S2(t){return typeof t=="string"||t instanceof String}function dnt(t){return typeof t=="boolean"}function $O(t){return typeof t=="number"}function Cy(t){return Array.isArray(t)?Cy(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":$O(t)?"float32":S2(t)?"string":dnt(t)?"bool":"float32"}function DO(t){return!!(t&&t.constructor&&t.call&&t.apply)}function LO(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function on(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function ple(t,e,n,r=!1){const i=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let o=0;o<s;o++)i[o]=n[t+o]}else{const s=e[0],o=e.slice(1),a=o.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<s;l++)i[l]=ple(t+l*a,o,n,r)}return i}function Ic(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,s)=>i*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return ple(0,t,e,n)}function fnt(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function r6(t,e){const n=qs(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function qs(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function mle(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return Ic(t,new Float32Array(n));if(e==="int32")return Ic(t,new Int32Array(n));if(e==="bool")return Ic(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Zd(t){t.forEach(e=>{ue(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Au(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function Ty(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function i6(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qq="tfjsflags";class hnt{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=pnt,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(i6(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);Qq in e&&e[Qq].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=gnt(i,s)})}}function pnt(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(mnt(e,r[0],r[1]),r.join("="))),e}function mnt(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function gnt(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function Qe(){return gle}let gle=null;function vnt(t){gle=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let g$;function vle(){if(g$==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");g$=t}return g$}function ynt(){const t=vle();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function s6(t,e){const n=ynt();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const II="Abs",_2="Acos",C2="Acosh",Ey="Add",o6="AddN",a6="All",l6="Any",RI="ArgMax",NI="ArgMin",T2="Asin",E2="Asinh",M2="Atan",k2="Atanh",A2="Atan2",PI="AvgPool",c6="AvgPoolGrad",$I="AvgPool3D",u6="AvgPool3DGrad",DI="BatchMatMul",LI="BatchToSpaceND",d6="Bincount",f6="BitwiseAnd",xnt="BroadcastTo",yle="BroadcastArgs",I2="Cast",R2="Ceil",N2="ClipByValue",h6="Complex",OI="ComplexAbs",FI="Concat",UI="Conv2D",p6="Conv2DBackpropFilter",BI="Conv2DBackpropInput",zI="Conv3D",m6="Conv3DBackpropFilterV2",g6="Conv3DBackpropInputV2",P2="Cos",$2="Cosh",v6="Cumprod",WI="Cumsum",y6="CropAndResize",x6="DenseBincount",b6="DepthToSpace",VI="DepthwiseConv2dNative",w6="DepthwiseConv2dNativeBackpropFilter",S6="DepthwiseConv2dNativeBackpropInput",xle="Diag",GI="Dilation2D",OO="Dilation2DBackpropInput",FO="Dilation2DBackpropFilter",bnt="Draw",D2="RealDiv",_6="Einsum",L2="Elu",C6="EluGrad",O2="Erf",HI="Equal",F2="Exp",jI="ExpandDims",U2="Expm1",T6="FFT",E6="Fill",M6="FlipLeftRight",B2="Floor",z2="FloorDiv",XI="FusedBatchNorm",qI="GatherV2",ble="GatherNd",YI="Greater",W2="GreaterEqual",V2="Identity",k6="IFFT",A6="Imag",G2="IsFinite",H2="IsInf",j2="IsNan",KI="LeakyRelu",ZI="Less",JI="LessEqual",wle="LinSpace",X2="Log",q2="Log1p",QI="LogicalAnd",eR="LogicalNot",tR="LogicalOr",wnt="LogSoftmax",nR="LRN",I6="LRNGrad",rR="Max",Y2="Maximum",iR="MaxPool",R6="MaxPoolGrad",sR="MaxPool3D",N6="MaxPool3DGrad",Sle="MaxPoolWithArgmax",oR="Mean",aR="Min",K2="Minimum",lR="MirrorPad",Z2="Mod",_le="Multinomial",J2="Multiply",cR="Neg",uR="NotEqual",P6="NonMaxSuppressionV3",$6="NonMaxSuppressionV4",D6="NonMaxSuppressionV5",dR="OnesLike",fR="OneHot",hR="Pack",pR="PadV2",Q2="Pow",mR="Prelu",gR="Prod",Cle="RaggedGather",Tle="RaggedRange",Ele="RaggedTensorToTensor",L6="Range",O6="Real",eS="Reciprocal",tS="Relu",vR="Reshape",yR="ResizeNearestNeighbor",F6="ResizeNearestNeighborGrad",xR="ResizeBilinear",U6="ResizeBilinearGrad",nS="Relu6",bR="Reverse",rS="Round",iS="Rsqrt",Mle="ScatterNd",kle="TensorScatterUpdate",Ale="SearchSorted",wR="Select",sS="Selu",SR="Slice",oS="Sin",aS="Sinh",lS="Sign",cS="Sigmoid",uS="Softplus",dS="Sqrt",_R="Sum",CR="SpaceToBatchND",TR="SplitV",ER="Softmax",Ile="SparseFillEmptyRows",Rle="SparseReshape",Nle="SparseSegmentMean",Ple="SparseSegmentSum",$le="SparseToDense",fS="SquaredDifference",B6="Square",z6="StaticRegexReplace",W6="StridedSlice",Dle="StringNGrams",Lle="StringSplit",Ole="StringToHashBucketFast",hS="Sub",pS="Tan",mS="Tanh",gS="Tile",V6="TopK",G6="Transform",ov="Transpose",H6="Unique",MR="Unpack",kR="UnsortedSegmentSum",AR="ZerosLike",vS="Step",Snt="FromPixels",j6="RotateWithOffset",AM="_FusedMatMul",IM="FusedConv2D",Fle="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ja(...t){Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.warn(...t)}function _nt(...t){Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RM=s6("kernelRegistry",()=>new Map),UO=s6("gradRegistry",()=>new Map);function eY(t,e){const n=Ble(t,e);return RM.get(n)}function tY(t){return UO.get(t)}function nY(t){const e=RM.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,o]=i,[a]=s.split("_");a===t&&n.push(o)}return n}function Ule(t){const{kernelName:e,backendName:n}=t,r=Ble(e,n);RM.has(r)&&ja(`The kernel '${e}' for backend '${n}' is already registered`),RM.set(r,t)}function Cnt(t){const{kernelName:e}=t;UO.has(e)&&Qe().getBool("DEBUG")&&ja(`Overriding the gradient for '${e}'`),UO.set(e,t)}function Ble(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zle(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Wle=qr,Rl=null;try{Rl=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function qr(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}qr.prototype.__isLong__;Object.defineProperty(qr.prototype,"__isLong__",{value:!0});function ka(t){return(t&&t.__isLong__)===!0}qr.isLong=ka;var rY={},iY={};function ig(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=iY[t],r)?r:(n=Yr(t,(t|0)<0?-1:0,!0),i&&(iY[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=rY[t],r)?r:(n=Yr(t,t<0?-1:0,!1),i&&(rY[t]=n),n))}qr.fromInt=ig;function Nl(t,e){if(isNaN(t))return e?Vp:Pl;if(e){if(t<0)return Vp;if(t>=Vle)return jle}else{if(t<=-oY)return pa;if(t+1>=oY)return Hle}return t<0?Nl(-t,e).neg():Yr(t%Ov|0,t/Ov|0,e)}qr.fromNumber=Nl;function Yr(t,e,n){return new qr(t,e,n)}qr.fromBits=Yr;var NM=Math.pow;function X6(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Pl;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return X6(t.substring(1),e,n).neg();for(var i=Nl(NM(n,8)),s=Pl,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var c=Nl(NM(n,a));s=s.mul(c).add(Nl(l))}else s=s.mul(i),s=s.add(Nl(l))}return s.unsigned=e,s}qr.fromString=X6;function Vc(t,e){return typeof t=="number"?Nl(t,e):typeof t=="string"?X6(t,e):Yr(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}qr.fromValue=Vc;var sY=65536,Tnt=1<<24,Ov=sY*sY,Vle=Ov*Ov,oY=Vle/2,aY=ig(Tnt),Pl=ig(0);qr.ZERO=Pl;var Vp=ig(0,!0);qr.UZERO=Vp;var z0=ig(1);qr.ONE=z0;var Gle=ig(1,!0);qr.UONE=Gle;var BO=ig(-1);qr.NEG_ONE=BO;var Hle=Yr(-1,2147483647,!1);qr.MAX_VALUE=Hle;var jle=Yr(-1,-1,!0);qr.MAX_UNSIGNED_VALUE=jle;var pa=Yr(0,-2147483648,!1);qr.MIN_VALUE=pa;var Rt=qr.prototype;Rt.toInt=function(){return this.unsigned?this.low>>>0:this.low};Rt.toNumber=function(){return this.unsigned?(this.high>>>0)*Ov+(this.low>>>0):this.high*Ov+(this.low>>>0)};Rt.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(pa)){var n=Nl(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=Nl(NM(e,6),this.unsigned),o=this,a="";;){var l=o.div(s),c=o.sub(l.mul(s)).toInt()>>>0,u=c.toString(e);if(o=l,o.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};Rt.getHighBits=function(){return this.high};Rt.getHighBitsUnsigned=function(){return this.high>>>0};Rt.getLowBits=function(){return this.low};Rt.getLowBitsUnsigned=function(){return this.low>>>0};Rt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(pa)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Rt.isZero=function(){return this.high===0&&this.low===0};Rt.eqz=Rt.isZero;Rt.isNegative=function(){return!this.unsigned&&this.high<0};Rt.isPositive=function(){return this.unsigned||this.high>=0};Rt.isOdd=function(){return(this.low&1)===1};Rt.isEven=function(){return(this.low&1)===0};Rt.equals=function(e){return ka(e)||(e=Vc(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Rt.eq=Rt.equals;Rt.notEquals=function(e){return!this.eq(e)};Rt.neq=Rt.notEquals;Rt.ne=Rt.notEquals;Rt.lessThan=function(e){return this.comp(e)<0};Rt.lt=Rt.lessThan;Rt.lessThanOrEqual=function(e){return this.comp(e)<=0};Rt.lte=Rt.lessThanOrEqual;Rt.le=Rt.lessThanOrEqual;Rt.greaterThan=function(e){return this.comp(e)>0};Rt.gt=Rt.greaterThan;Rt.greaterThanOrEqual=function(e){return this.comp(e)>=0};Rt.gte=Rt.greaterThanOrEqual;Rt.ge=Rt.greaterThanOrEqual;Rt.compare=function(e){if(ka(e)||(e=Vc(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Rt.comp=Rt.compare;Rt.negate=function(){return!this.unsigned&&this.eq(pa)?pa:this.not().add(z0)};Rt.neg=Rt.negate;Rt.add=function(e){ka(e)||(e=Vc(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,f=0,h=0;return h+=s+c,f+=h>>>16,h&=65535,f+=i+l,d+=f>>>16,f&=65535,d+=r+a,u+=d>>>16,d&=65535,u+=n+o,u&=65535,Yr(f<<16|h,u<<16|d,this.unsigned)};Rt.subtract=function(e){return ka(e)||(e=Vc(e)),this.add(e.neg())};Rt.sub=Rt.subtract;Rt.multiply=function(e){if(this.isZero())return Pl;if(ka(e)||(e=Vc(e)),Rl){var n=Rl.mul(this.low,this.high,e.low,e.high);return Yr(n,Rl.get_high(),this.unsigned)}if(e.isZero())return Pl;if(this.eq(pa))return e.isOdd()?pa:Pl;if(e.eq(pa))return this.isOdd()?pa:Pl;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(aY)&&e.lt(aY))return Nl(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,f=0,h=0,p=0;return p+=o*u,h+=p>>>16,p&=65535,h+=s*u,f+=h>>>16,h&=65535,h+=o*c,f+=h>>>16,h&=65535,f+=i*u,d+=f>>>16,f&=65535,f+=s*c,d+=f>>>16,f&=65535,f+=o*l,d+=f>>>16,f&=65535,d+=r*u+i*c+s*l+o*a,d&=65535,Yr(h<<16|p,d<<16|f,this.unsigned)};Rt.mul=Rt.multiply;Rt.divide=function(e){if(ka(e)||(e=Vc(e)),e.isZero())throw Error("division by zero");if(Rl){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Rl.div_u:Rl.div_s)(this.low,this.high,e.low,e.high);return Yr(n,Rl.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Vp:Pl;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Vp;if(e.gt(this.shru(1)))return Gle;s=Vp}else{if(this.eq(pa)){if(e.eq(z0)||e.eq(BO))return pa;if(e.eq(pa))return z0;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Pl)?e.isNegative()?z0:BO:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(pa))return this.unsigned?Vp:Pl;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Pl}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:NM(2,a-48),c=Nl(r),u=c.mul(e);u.isNegative()||u.gt(i);)r-=l,c=Nl(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=z0),s=s.add(c),i=i.sub(u)}return s};Rt.div=Rt.divide;Rt.modulo=function(e){if(ka(e)||(e=Vc(e)),Rl){var n=(this.unsigned?Rl.rem_u:Rl.rem_s)(this.low,this.high,e.low,e.high);return Yr(n,Rl.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Rt.mod=Rt.modulo;Rt.rem=Rt.modulo;Rt.not=function(){return Yr(~this.low,~this.high,this.unsigned)};Rt.and=function(e){return ka(e)||(e=Vc(e)),Yr(this.low&e.low,this.high&e.high,this.unsigned)};Rt.or=function(e){return ka(e)||(e=Vc(e)),Yr(this.low|e.low,this.high|e.high,this.unsigned)};Rt.xor=function(e){return ka(e)||(e=Vc(e)),Yr(this.low^e.low,this.high^e.high,this.unsigned)};Rt.shiftLeft=function(e){return ka(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Yr(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Yr(0,this.low<<e-32,this.unsigned)};Rt.shl=Rt.shiftLeft;Rt.shiftRight=function(e){return ka(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Yr(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Yr(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Rt.shr=Rt.shiftRight;Rt.shiftRightUnsigned=function(e){if(ka(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Yr(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Yr(n,0,this.unsigned):Yr(n>>>e-32,0,this.unsigned)};Rt.shru=Rt.shiftRightUnsigned;Rt.shr_u=Rt.shiftRightUnsigned;Rt.toSigned=function(){return this.unsigned?Yr(this.low,this.high,!1):this};Rt.toUnsigned=function(){return this.unsigned?this:Yr(this.low,this.high,!0)};Rt.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Rt.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Rt.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};qr.fromBytes=function(e,n,r){return r?qr.fromBytesLE(e,n):qr.fromBytesBE(e,n)};qr.fromBytesLE=function(e,n){return new qr(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};qr.fromBytesBE=function(e,n){return new qr(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const Xle=is(Wle),Ent=FK({__proto__:null,default:Xle},[Wle]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mp=Xle||Ent;function IR(t){return Mp.fromString(t,!0,16)}const qle=IR("c3a5c85c97cb3127"),Tp=IR("b492b66fbe98f273"),mo=IR("9ae16a3b2f90404f");function zO(t){return t.xor(t.shru(47))}function Yle(t,e,n){const r=t.slice(e,e+n);return Mp.fromBytes(Array.from(r),!0,!0)}function Or(t,e){return Yle(t,e,8)}function lY(t,e){return Yle(t,e,4)}function ds(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Zf(t,e,n=IR("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function Mnt(t,e,n,r,i,s){i=i.add(t),s=ds(s.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(n),s=s.add(ds(i,44)),[i.add(r),s.add(o)]}function pT(t,e,n,r){return Mnt(Or(t,e),Or(t,e+8),Or(t,e+16),Or(t,e+24),n,r)}function knt(t,e=t.length){if(e>=8){const n=mo.add(e*2),r=Or(t,0).add(mo),i=Or(t,e-8),s=ds(i,37).mul(n).add(r),o=ds(r,25).add(i).mul(n);return Zf(s,o,n)}if(e>=4){const n=mo.add(e*2),r=lY(t,0);return Zf(r.shl(3).add(e),lY(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],s=n+(r<<8),o=e+(i<<2);return zO(mo.mul(s).xor(qle.mul(o))).mul(mo)}return mo}function Ant(t,e=t.length){const n=mo.add(e*2),r=Or(t,0).mul(Tp),i=Or(t,8),s=Or(t,e-8).mul(n),o=Or(t,e-16).mul(mo);return Zf(ds(r.add(i),43).add(ds(s,30)).add(o),r.add(ds(i.add(mo),18)).add(s),n)}function Int(t,e=t.length){const n=mo.add(e*2),r=Or(t,0).mul(mo),i=Or(t,8),s=Or(t,e-8).mul(n),o=Or(t,e-16).mul(mo),a=ds(r.add(i),43).add(ds(s,30)).add(o),l=Zf(a,r.add(ds(i.add(mo),18)).add(s),n),c=Or(t,16).mul(n),u=Or(t,24),d=a.add(Or(t,e-32)).mul(n),f=l.add(Or(t,e-24)).mul(n);return Zf(ds(c.add(u),43).add(ds(d,30)).add(f),c.add(ds(u.add(r),18)).add(d),n)}function Rnt(t,e=t.length){const n=Mp.fromNumber(81,!0);if(e<=32)return e<=16?knt(t,e):Ant(t,e);if(e<=64)return Int(t,e);let r=n,i=n.mul(Tp).add(113),s=zO(i.mul(mo).add(113)).mul(mo),o=[Mp.UZERO,Mp.UZERO],a=[Mp.UZERO,Mp.UZERO];r=r.mul(mo).add(Or(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=ds(r.add(i).add(o[0]).add(Or(t,l+8)),37).mul(Tp),i=ds(i.add(o[1]).add(Or(t,l+48)),42).mul(Tp),r=r.xor(a[1]),i=i.add(o[0]).add(Or(t,l+40)),s=ds(s.add(a[0]),33).mul(Tp),o=pT(t,l,o[1].mul(Tp),r.add(a[0])),a=pT(t,l+32,s.add(a[1]),i.add(Or(t,l+16))),[s,r]=[r,s],l+=64;while(l!==c);const d=Tp.add(s.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=ds(r.add(i).add(o[0]).add(Or(t,l+8)),37).mul(d),i=ds(i.add(o[1]).add(Or(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),i=i.add(o[0].mul(9).add(Or(t,l+40))),s=ds(s.add(a[0]),33).mul(d),o=pT(t,l,o[1].mul(d),r.add(a[0])),a=pT(t,l+32,s.add(a[1]),i.add(Or(t,l+16))),[s,r]=[r,s],Zf(Zf(o[0],a[0],d).add(zO(i).mul(qle)).add(s),Zf(o[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ih(t,e){return e==="string"?Jf(t):sg([t],e)}function Nnt(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function sg(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Am(t)),Qe().getBool("DEBUG")&&lnt(t,e),Nnt(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Oo(){return Qe().platform.now()}function Jf(t,e="utf-8"){return e=e||"utf-8",Qe().platform.encode(t,e)}function dh(t,e="utf-8"){return e=e||"utf-8",Qe().platform.decode(t,e)}function Xl(t){return Qe().platform.isTypedArray!=null?Qe().platform.isTypedArray(t):zle(t)}function Am(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||i6(t)||t==null||Xl(t)&&n)e.push(t);else if(Array.isArray(t)||Xl(t))for(let r=0;r<t.length;++r)Am(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)Am(t[i],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pnt{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Dnt)}profileKernel(e,n,r){let i;const s=()=>{i=r()};let o;const a=Oo();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(s);else{s();for(const c of i)c.dataSync();o=Promise.resolve({kernelMs:Oo()-a})}if(Qe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){const u=i[c];u.data().then(d=>{$nt(d,u.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),i,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],s,l[2])})})}}function $nt(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class Dnt{logKernelProfile(e,n,r,i,s,o){const a=typeof i=="number"?sv(`${i}ms`,9):i.error,l=sv(e,25),c=n.rank,u=n.size,d=sv(n.shape.toString(),14);let f="";for(const h in s){const p=s[h];if(p!=null){const v=p.shape||n.shape,m=v.length;f+=`${h}: ${m}D ${m>0?v:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${f}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lnt(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const f=u[d];let h=!1;for(let p=0;p<e.length;p++)if(r[f.id]){c.outputs.forEach(v=>r[v.id]=!0),h=!0,i[c.id]=!0;break}if(h)break}}const s={};s[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(const f in u)s[u[f].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(i[c.id]&&o[c.id]){const u={};for(const f in c.inputs){const h=c.inputs[f];r[h.id]&&(u[f]=h)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function Ont(t,e,n,r){for(let i=e.length-1;i>=0;i--){const s=e[i],o=[];if(s.outputs.forEach(l=>{const c=t[l.id];c!=null?o.push(c):o.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(o);for(const l in s.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=s.inputs[l];if(!br(c.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cY=20,Xx=3,v$=7;function Fnt(t,e,n,r){const i=on(e),s=Unt(t,e,n,i),o=e.length,a=lE(t,e,n,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function Unt(t,e,n,r){const i=it(e),s=r[r.length-1],o=new Array(s).fill(0),a=e.length,l=n==="complex64"?s1(t):t;if(a>1)for(let c=0;c<i/s;c++){const u=c*s;for(let d=0;d<s;d++)o[d]=Math.max(o[d],i1(l[u+d],0,n).length)}return o}function i1(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(v$))} + ${parseFloat(t[1].toFixed(v$))}j`:S2(t)?r=`'${t}'`:n==="bool"?r=Kle(t):r=parseFloat(t.toFixed(v$)).toString(),sv(r,e)}function Kle(t){return t===0?"false":"true"}function lE(t,e,n,r,i,s=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const v=s1(t);return[i1(v[0],0,n)]}return n==="bool"?[Kle(t[0])]:[t[0].toString()]}if(l===1){if(a>cY){const m=Xx*o;let g=Array.from(t.slice(0,m)),y=Array.from(t.slice((a-Xx)*o,a*o));return n==="complex64"&&(g=s1(g),y=s1(y)),["["+g.map((x,S)=>i1(x,i[S],n)).join(", ")+", ..., "+y.map((x,S)=>i1(x,i[a-Xx+S],n)).join(", ")+"]"]}return["["+(n==="complex64"?s1(t):Array.from(t)).map((m,g)=>i1(m,i[g],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*o,f=[];if(a>cY){for(let v=0;v<Xx;v++){const m=v*d,g=m+d;f.push(...lE(t.slice(m,g),c,n,u,i,!1))}f.push("...");for(let v=a-Xx;v<a;v++){const m=v*d,g=m+d;f.push(...lE(t.slice(m,g),c,n,u,i,v===a-1))}}else for(let v=0;v<a;v++){const m=v*d,g=m+d;f.push(...lE(t.slice(m,g),c,n,u,i,v===a-1))}const h=l===2?",":"";f[0]="["+(a>0?f[0]+h:"");for(let v=1;v<f.length-1;v++)f[v]=" "+f[v]+h;let p=`,
`;for(let v=2;v<l;v++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(s?"":p),f}function s1(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Is{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=it(e),r!=null){const i=r.length;ue(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Ei(n,this.size),this.strides=on(e)}set(e,...n){n.length===0&&(n=[0]),ue(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return vc().makeTensor(this.values,this.shape,this.dtype)}}let vc=null,y0=null;function Bnt(t){vc=t}function znt(t){y0=t}class Yi{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=it(e),this.strides=on(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return y0.buffer(this.shape,this.dtype,e)}bufferSync(){return y0.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Ic(this.shape,e,this.dtype==="complex64")}arraySync(){return Ic(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=vc().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>dh(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),vc().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=vc().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>dh(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await vc().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),vc().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return y0.print(this,e)}clone(){return this.throwIfDisposed(),y0.clone(this)}toString(e=!1){const n=this.dataSync();return Fnt(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),y0.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),vc().makeVariable(this,e,n,r)}}Object.defineProperty(Yi,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function rt(){return s6("Tensor",()=>Yi)}rt();class PM extends Yi{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!br(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);vc().disposeTensor(this),this.dataId=e.dataId,vc().incRef(this,null)}dispose(){vc().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(PM,Symbol.hasInstance,{value:t=>t instanceof Yi&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var uY;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(uY||(uY={}));var WO;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(WO||(WO={}));var VO;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(VO||(VO={}));var GO;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(GO||(GO={}));var HO;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(HO||(HO={}));const Wnt={float32:GO,int32:WO,bool:VO,complex64:HO};function _a(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Wnt[t][e]}function q6(t){return _a(t,"int32")}function Zle(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function Jle(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ai(t,e){if(t.dtype===e.dtype)return[t,e];const n=_a(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Qle(t){const e=[];return ece(t,e,new Set),e}function ece(t,e,n){if(t==null)return;if(t instanceof Yi){e.push(t);return}if(!Vnt(t))return;const r=t;for(const i in r){const s=r[i];n.has(s)||(n.add(s),ece(s,e,n))}}function Vnt(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y$(t){return t.kernelName!=null}class dY{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Fv{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new dY}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(ja(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Pnt(this.backendInstance),!0}setupRegisteredKernels(){nY(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){nY(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof QB)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,ja(`Initialization of backend ${e} failed`),ja(o.stack||o.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return ja(`Initialization of backend ${e} failed`),ja(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,s=this.readSync(n),o=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return Fv.nextTensorId++}nextVariableId(){return Fv.nextVariableId++}clone(e){const n=Fe.runKernel(V2,{x:e}),r={x:e},i=o=>({x:()=>{const a="float32",l={x:o},c={dtype:a};return Fe.runKernel(I2,l,c)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(eY(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-n-s-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),s=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=y$(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(y$(e)){const{kernelName:p,inputs:v,attrs:m}=e;this.backendName==null&&this.backend;const g=eY(p,this.backendName);ue(g!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const y=this.backend.numDataIds();l=g.kernelFunc({inputs:v,attrs:m,backend:this.backend});const x=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,y,x);const S=x.map(_=>_.rank!=null?_:this.makeTensorFromTensorInfo(_));if(i){const _=this.getTensorsForGradient(p,v,S);r=this.saveTensorsForBackwardMode(_)}return S}}else{const{forwardFunc:p}=e,v=m=>{i&&(r=m.map(g=>this.keep(this.clone(g))))};a=()=>{const m=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,v));const g=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,m,g),g}}const{inputs:u,attrs:d}=e,f=y$(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),i&&this.addTapeNode(c,u,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(p=>u[p]!=null?u[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=tY(e);if(i!=null){const s=i.inputsToSave||[],o=i.outputsToSave||[];let a;i.saveAllInputs?(ue(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=s.map(c=>n[c]);const l=r.filter((c,u)=>o[u]);return a.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=e;r==="string"&&S2(e[0])&&(s=e.map(l=>Jf(l)));const o=i.write(s,n,r),a=new Yi(n,r,o,this.nextTensorId());if(this.trackTensor(a,i),r==="string"){const l=this.state.tensorInfo.get(o),c=unt(s);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,i){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:s}=e,o=new Yi(i,s,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const s=new PM(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*kM(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof PM||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*kM(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,s,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=tY(e);l!=null&&(i=l.gradFunc),i!=null&&(a.gradient=c=>(c=c.map((u,d)=>{if(u==null){const f=r[d],h=qs(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return u}),i(c.length>1?c:c[0],s,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=Qle(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const o=this.state.activeScope.track[s];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,n,r,i=!1){if(ue(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));ue(s instanceof Yi,()=>"The result y returned by f() must be a tensor.");const o=Lnt(this.state.activeTape,n,s);if(!i&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[s.id]=r??Gnt(s.shape),Ont(a,o,c=>this.tidy(c),Hnt);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return ue(DO(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{ue(n.every(a=>a instanceof Yi),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((a,l)=>{i[l]=a});const s=(a,l)=>(r=e(...n,l),ue(r.value instanceof Yi,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),ue(DO(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];ue(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),ue(u.every(f=>f instanceof Yi),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Oo(),r=await this.backend.time(e);return r.wallMs=Oo()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new dY;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Fv.nextTensorId=0;Fv.nextVariableId=0;function Gnt(t){const e=r6(it(t),"float32");return Fe.makeTensor(e,t,"float32")}function tce(){const t=vle();if(t._tfengine==null){const e=new hnt(t);t._tfengine=new Fv(e)}return vnt(t._tfengine.ENV),Bnt(()=>t._tfengine),t._tfengine}const Fe=tce();function Hnt(t,e){const n={a:t,b:e};return Fe.runKernel(Ey,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jnt(){return typeof navigator<"u"&&navigator!=null}function nce(t){if(t||jnt()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function rce(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jo=Qe();jo.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});jo.registerFlag("IS_BROWSER",()=>rce());jo.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");jo.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));jo.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));jo.registerFlag("PROD",()=>!1);jo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>jo.getBool("DEBUG"));jo.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);jo.registerFlag("IS_TEST",()=>!1);jo.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>jo.getBool("DEBUG"));jo.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);jo.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);jo.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yS(t,e){let n=t;if(Xl(t))return e==="string"?[]:[t.length];if(Zle(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(Jle(t))return[t.buffer.size/(e==null?4:kM(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Xl(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Qe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&ice(t,r,[]),r}function ice(t,e,n){if(n=n||[],!Array.isArray(t)&&!Xl(t)){ue(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}ue(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),ue(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)ice(t[i],r,n.concat(i))}function fY(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function Ae(t,e,n,r="numeric"){if(t instanceof rt())return fY(r,t.dtype,e,n),t;let i=Cy(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),fY(r,i,e,n),t==null||!Xl(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=yS(t,i);!Xl(t)&&!Array.isArray(t)&&(t=[t]);const a=i!=="string"?sg(t,i):Am(t,[],!0);return Fe.makeTensor(a,s,i)}function sce(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,o)=>Ae(s,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xnt="__op";function Ge(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Xnt;const i=(...s)=>{Fe.startScope(n);try{const o=r(...s);return i6(o)&&console.error("Cannot return a Promise inside of tidy."),Fe.endScope(o),o}catch(o){throw Fe.endScope(null),o}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qnt(t,e){const n=Ae(t,"real","complex"),r=Ae(e,"imag","complex");t6(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return Fe.runKernel(h6,i)}const Im=Ge({complex_:qnt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xS(t,e,n,r){if(r==null)r=Cy(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Jle(t)||Zle(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return Fe.backend.createTensorFromGPUData(t,e||n,r)}if(!Xl(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Zd(e);const i=it(e),s=it(n);ue(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==it(e.slice(o)):!0;ue(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Xl(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?sg(t,r):Am(t,[],!0),Fe.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1(t,e,n){const r=yS(t,n);return xS(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $M={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Rh{static join(e){return new Rh(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Xl(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,s=new ArrayBuffer(i),o=new Uint8Array(s);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+a-c.start,f=a,p=Math.min(n,c.end)-c.start,v=new Uint8Array(c.buffer,d,p-d);if(o.set(v,f),a+=v.length,n<c.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Ynt(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Ynt(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,s=e(t[i]);if(s===0)return i;s<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ru(){return Fe}function jO(){return Fe.memory()}function Ze(t,e){return Fe.tidy(t,e)}function On(t){Qle(t).forEach(n=>n.dispose())}function Iu(t){return Fe.keep(t)}function oce(t,e,n=1){return Fe.registerBackend(t,e,n)}function Knt(){return Fe.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uv=4;async function hY(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<i.length;++o){const a=i[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const f=await l.bytes(),h=f.reduce((m,g)=>m+g.length,0)+Uv*f.length,p=new Uint8Array(h);let v=0;for(let m=0;m<f.length;m++){const g=f[m],y=new Uint8Array(new Uint32Array([g.length]).buffer);p.set(y,v),v+=Uv,p.set(g,v),v+=g.length}d(p)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const s=await Promise.all(r);return{data:ert(s),specs:n}}function Znt(t,e){const n=new Rh(t),r={};let i=0;for(const s of e){const o=Jnt(s,(a,l)=>n.slice(i+a,i+l));r[s.name]=Qnt(s,n.slice(i,i+o)),i+=o}return r}function Jnt(t,e){const n=it(t.shape);let r;if("quantization"in t){const i=t.quantization;r=$M[i.dtype]}else if(t.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=Uv+new Uint32Array(e(i,i+Uv))[0];return i}else r=$M[t.dtype];return n*r}function Qnt(t,e){const n=t.name,r=t.dtype,i=t.shape,s=it(i);let o,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=$M[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){o=new Float32Array(u.length);for(let d=0;d<u.length;d++){const f=u[d];o[d]=f*l.scale+l.min}}else if(l.dtype==="float16")o=urt()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(u.length);for(let d=0;d<u.length;d++){const f=u[d];o[d]=Math.round(f*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=s*c}else if(r==="string"){const l=it(t.shape);o=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(a,a+Uv))[0];a+=Uv;const d=new Uint8Array(e.slice(a,a+u));o.push(d),a+=u}}else{const l=$M[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const c=new Float32Array(o.length/2),u=new Float32Array(o.length/2);for(let p=0;p<c.length;p++)c[p]=o[p*2],u[p]=o[p*2+1];const d=B1(c,i,"float32"),f=B1(u,i,"float32"),h=Im(d,f);return d.dispose(),f.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=s*l}return B1(o,i,r)}function ert(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const Y6=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function pY(t){return Y6?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function trt(t){if(Y6)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function nrt(t){if(Y6){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function rrt(t){return Rh.join(t)}function irt(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function srt(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function ort(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),srt(t,n,r)}function K6(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:pY(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:pY(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Rh(t.weightData).byteLength}}function mY(t){const e=[];for(const n of t)e.push(...n.weights);return e}function art(){const t=n=>{let r=n<<13,i=0;for(;!(r&8388608);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function lrt(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function crt(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function urt(){const t=art(),e=lrt(),n=crt();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let o=0;o<r.length;o++){const a=r[o],l=t[n[a>>10]+(a&1023)]+e[a>>10];s[o]=l}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class as{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return as.instance==null&&(as.instance=new as),as.instance}static registerSaveRouter(e){as.getInstance().saveRouters.push(e)}static registerLoadRouter(e){as.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return as.getHandlers(e,"save")}static getLoadHandlers(e,n){return as.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?as.getInstance().loadRouters:as.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&i.push(a)}),i}}const drt=t=>as.getSaveHandlers(t),frt=(t,e)=>as.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XO="tensorflowjs",qO=1,Gp="models_store",Df="model_info_store";function ace(){if(!Qe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function YO(t){const e=t.result;e.createObjectStore(Gp,{keyPath:"modelPath"}),e.createObjectStore(Df,{keyPath:"modelPath"})}class Rm{constructor(e){if(this.indexedDB=ace(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const s=this.indexedDB.open(XO,qO);s.onupgradeneeded=()=>YO(s),s.onsuccess=()=>{const o=s.result;if(n==null){const a=o.transaction(Gp,"readonly"),c=a.objectStore(Gp).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(o.close(),i(c.error)),a.oncomplete=()=>o.close()}else{n.weightData=Rh.join(n.weightData);const a=K6(n),l=o.transaction(Df,"readwrite");let c=l.objectStore(Df),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(f){return i(f)}let d;u.onsuccess=()=>{d=o.transaction(Gp,"readwrite");const f=d.objectStore(Gp);let h;try{h=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return i(p)}h.onsuccess=()=>r({modelArtifactsInfo:a}),h.onerror=p=>{c=l.objectStore(Df);const v=c.delete(this.modelPath);v.onsuccess=()=>(o.close(),i(h.error)),v.onerror=m=>(o.close(),i(h.error))}},u.onerror=f=>(o.close(),i(u.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},s.onerror=o=>i(s.error)})}}Rm.URL_SCHEME="indexeddb://";const lce=t=>Qe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Rm.URL_SCHEME)?hrt(t.slice(Rm.URL_SCHEME.length)):null;as.registerSaveRouter(lce);as.registerLoadRouter(lce);function hrt(t){return new Rm(t)}function prt(t){return t.startsWith(Rm.URL_SCHEME)?t.slice(Rm.URL_SCHEME.length):t}class mrt{constructor(){this.indexedDB=ace()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(XO,qO);r.onupgradeneeded=()=>YO(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(Df,"readonly"),a=s.objectStore(Df).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(i.close(),n(a.error)),s.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=prt(e),new Promise((n,r)=>{const i=this.indexedDB.open(XO,qO);i.onupgradeneeded=()=>YO(i),i.onsuccess=()=>{const s=i.result,o=s.transaction(Df,"readwrite"),a=o.objectStore(Df),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),d=()=>{c=s.transaction(Gp,"readwrite");const h=c.objectStore(Gp).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>r(l.error)};u.onsuccess=d,u.onerror=f=>(d(),s.close(),r(l.error))}},l.onerror=u=>(s.close(),r(l.error)),o.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sd="/",x0="tensorflowjs_models",cce="info",grt="model_topology",vrt="weight_specs",yrt="weight_data",xrt="model_metadata";function uce(t){return{info:[x0,t,cce].join(Sd),topology:[x0,t,grt].join(Sd),weightSpecs:[x0,t,vrt].join(Sd),weightData:[x0,t,yrt].join(Sd),modelMetadata:[x0,t,xrt].join(Sd)}}function dce(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function brt(t){const e=t.split(Sd);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Sd)}function wrt(t){return t.startsWith(Nm.URL_SCHEME)?t.slice(Nm.URL_SCHEME.length):t}class Nm{constructor(e){if(!Qe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=uce(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=K6(e),s=Rh.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,trt(s));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw dce(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const a=JSON.parse(s);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=nrt(o),n}}Nm.URL_SCHEME="localstorage://";const fce=t=>Qe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Nm.URL_SCHEME)?Srt(t.slice(Nm.URL_SCHEME.length)):null;as.registerSaveRouter(fce);as.registerLoadRouter(fce);function Srt(t){return new Nm(t)}class _rt{constructor(){ue(Qe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),ue(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=x0+Sd,r=Sd+cce;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(r)){const o=brt(s);e[o]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=wrt(e);const n=uce(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return dce(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gY="://";class su{constructor(){this.managers={}}static getInstance(){return su.instance==null&&(su.instance=new su),su.instance}static registerManager(e,n){ue(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(gY)&&(e=e.slice(0,e.indexOf(gY))),ue(e.length>0,()=>"scheme must not be an empty string.");const r=su.getInstance();ue(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=su.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(su.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Crt{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!Qe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return zle(e)}}if(Qe().get("IS_BROWSER")){Qe().setPlatform("browser",new Crt);try{su.registerManager(Nm.URL_SCHEME,new _rt)}catch{}try{su.registerManager(Rm.URL_SCHEME,new mrt)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Trt={importFetch:()=>require("node-fetch")};let x$;class Ert{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Qe().global.fetch!=null?Qe().global.fetch(e,n):(x$==null&&(x$=Trt.importFetch()),x$(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Qe().get("IS_NODE")&&!Qe().get("IS_BROWSER")&&Qe().setPlatform("node",new Ert);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bn(t,e="float32",n){return e=e||"float32",Zd(t),new Is(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mrt(t,e){const n=Ae(t,"x","cast");if(!cnt(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return Fe.runKernel(I2,r,i)}const Ut=Ge({cast_:Mrt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function krt(t){const n={x:Ae(t,"x","clone","string_or_numeric")};return Fe.runKernel(V2,n)}const om=Ge({clone_:krt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Art(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */tce();const Irt={buffer:Bn,cast:Ut,clone:om,print:Art};znt(Irt);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rrt(t,e){let n=Ae(t,"a","add"),r=Ae(e,"b","add");[n,r]=Ai(n,r);const i={a:n,b:r};return Fe.runKernel(Ey,i)}const wt=Ge({add_:Rrt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nrt(t,e){let n=Ae(t,"a","floorDiv"),r=Ae(e,"b","floorDiv");[n,r]=Ai(n,r);const i={a:n,b:r};return Fe.runKernel(z2,i)}const hce=Ge({floorDiv_:Nrt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Prt(t,e){let n=Ae(t,"a","div"),r=Ae(e,"b","div");if([n,r]=Ai(n,r),n.dtype==="int32"&&r.dtype==="int32")return hce(n,r);const i={a:n,b:r},s={};return Fe.runKernel(D2,i,s)}const mn=Ge({div_:Prt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $rt(t,e){let n=Ae(t,"a","mul"),r=Ae(e,"b","mul");[n,r]=Ai(n,r);const i={a:n,b:r};return Fe.runKernel(J2,i)}const Oe=Ge({mul_:$rt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Drt(t){const e=Ae(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return Fe.runKernel(OI,n)}else{const n={x:e};return Fe.runKernel(II,n)}}const ho=Ge({abs_:Drt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lrt(t){const n={x:Ae(t,"x","acos")};return Fe.runKernel(_2,n)}const Ort=Ge({acos_:Lrt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Frt(t){const n={x:Ae(t,"x","acosh")};return Fe.runKernel(C2,n)}const Urt=Ge({acosh_:Frt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Brt(t,e=null,n=!1){const i={x:Ae(t,"x","all","bool")},s={axis:e,keepDims:n};return Fe.runKernel(a6,i,s)}const pce=Ge({all_:Brt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zrt(t,e=null,n=!1){const i={x:Ae(t,"x","any","bool")},s={axis:e,keepDims:n};return Fe.runKernel(l6,i,s)}const KO=Ge({any_:zrt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wrt(t,e=0){const r={x:Ae(t,"x","argMax")},i={axis:e};return Fe.runKernel(RI,r,i)}const fw=Ge({argMax_:Wrt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vrt(t,e=0){const r={x:Ae(t,"x","argMin")},i={axis:e};return Fe.runKernel(NI,r,i)}const Grt=Ge({argMin_:Vrt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hrt(t){const n={x:Ae(t,"x","asin")};return Fe.runKernel(T2,n)}const jrt=Ge({asin_:Hrt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xrt(t){const n={x:Ae(t,"x","asinh")};return Fe.runKernel(E2,n)}const qrt=Ge({asinh_:Xrt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yrt(t){const n={x:Ae(t,"x","atan")};return Fe.runKernel(M2,n)}const Krt=Ge({atan_:Yrt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zrt(t,e){let n=Ae(t,"a","atan2"),r=Ae(e,"b","atan2");[n,r]=Ai(n,r);const i={a:n,b:r};return Fe.runKernel(A2,i)}const Jrt=Ge({atan2_:Zrt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qrt(t){const n={x:Ae(t,"x","atanh")};return Fe.runKernel(k2,n)}const eit=Ge({atanh_:Qrt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bS(t,e,n,r,i="NHWC",s){const o=t[3],a=[...e,o],l=Qd(i);return $s(t,a,n,s,r,null,null,l)}function Jl(t,e,n,r,i,s,o="channelsLast"){const[a,l]=hw(e);let c;if(o==="channelsLast")c=[a,l,t[3],t[3]];else if(o==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return $s(t,c,n,r,i,s,!1,o)}function Jd(t,e,n,r,i,s,o="NDHWC"){const[a,l,c]=ZO(e);let u,d;if(o==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Nh(t,u,n,r,i,!1,d,s)}function $s(t,e,n,r,i,s,o=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,h,,p]=e,[v,m]=hw(n),[g,y]=hw(r),x=av(f,g),S=av(h,y),{padInfo:_,outHeight:C,outWidth:T}=rit(i,c,u,v,m,x,S,s,a),A=o?p*d:p;let k;return a==="channelsFirst"?k=[l,A,C,T]:a==="channelsLast"&&(k=[l,C,T,A]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:C,outWidth:T,outChannels:A,padInfo:_,strideHeight:v,strideWidth:m,filterHeight:f,filterWidth:h,effectiveFilterHeight:x,effectiveFilterWidth:S,dilationHeight:g,dilationWidth:y,inShape:t,outShape:k,filterShape:e}}function Nh(t,e,n,r,i,s=!1,o="channelsLast",a){let[l,c,u,d,f]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d,f]=t;else if(o==="channelsFirst")[l,f,c,u,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[h,p,v,,m]=e,[g,y,x]=ZO(n),[S,_,C]=ZO(r),T=av(h,S),A=av(p,_),k=av(v,C),{padInfo:M,outDepth:R,outHeight:P,outWidth:O}=iit(i,c,u,d,g,y,x,T,A,k,a),$=s?m*f:m;let U;return o==="channelsFirst"?U=[l,$,R,P,O]:o==="channelsLast"&&(U=[l,R,P,O,$]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:d,inChannels:f,outDepth:R,outHeight:P,outWidth:O,outChannels:$,padInfo:M,strideDepth:g,strideHeight:y,strideWidth:x,filterDepth:h,filterHeight:p,filterWidth:v,effectiveFilterDepth:T,effectiveFilterHeight:A,effectiveFilterWidth:k,dilationDepth:S,dilationHeight:_,dilationWidth:C,inShape:t,outShape:U,filterShape:e}}function tit(t,e,n,r,i){r==null&&(r=Z6(t,e,n));const s=t[0],o=t[1],a=pw((s-e+2*r)/n+1,i),l=pw((o-e+2*r)/n+1,i);return[a,l]}function nit(t,e,n,r,i,s){i==null&&(i=Z6(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*i>=e[a]&&(o[a]=pw((t[a]-e[a]+2*i)/r[a]+1,s));return o}function Z6(t,e,n,r=1){const i=av(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function hw(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function ZO(t){return typeof t=="number"?[t,t,t]:t}function av(t,e){return e<=1?t:t+(t-1)*(e-1)}function rit(t,e,n,r,i,s,o,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=tit([e,n],s,r,t,a);u=h[0],d=h[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/i);const f=Math.max(0,(u-1)*r+s-e),h=Math.max(0,(d-1)*i+o-n),p=Math.floor(f/2),v=f-p,m=Math.floor(h/2),g=h-m;c={top:p,bottom:v,left:m,right:g,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-s+1)/r),d=Math.ceil((n-o+1)/i);else if(typeof t=="object"){const f=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],v=l==="channelsLast"?t[2][1]:t[3][1];c={top:f,bottom:h,left:p,right:v,type:f===0&&h===0&&p===0&&v===0?"VALID":"EXPLICIT"},u=pw((e-s+f+h)/r+1,a),d=pw((n-o+p+v)/i+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function iit(t,e,n,r,i,s,o,a,l,c,u){let d,f,h,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const m=nit([e,n,r,1],[a,l,c],1,[i,s,o],t,u);f=m[0],h=m[1],p=m[2]}else if(t==="same"){f=Math.ceil(e/i),h=Math.ceil(n/s),p=Math.ceil(r/o);const v=(f-1)*i+a-e,m=(h-1)*s+l-n,g=(p-1)*o+c-r,y=Math.floor(v/2),x=v-y,S=Math.floor(m/2),_=m-S,C=Math.floor(g/2),T=g-C;d={top:S,bottom:_,left:C,right:T,front:y,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function pw(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Pm(t){const[e,n,r]=hw(t);return e===1&&n===1&&r===1}function Zs(t,e){return Pm(t)||Pm(e)}function $m(t){return hw(t).every(e=>e>0)}function Qd(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Zo(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")ue(Lv(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{ue(Lv(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sit(t,e){const r={x:Ae(t,"x","reshape","string_or_numeric")},i={shape:e};return Fe.runKernel(vR,r,i)}const Ve=Ge({reshape_:sit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oit(t,e,n,r,i){const s=Ae(t,"x","avgPool","float32"),o=1;ue(Zs(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=s,l=!1;s.rank===3&&(l=!0,a=Ve(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ue(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Zo("avgPool",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let d=Fe.runKernel(PI,c,u);return d=Ut(d,s.dtype),l?Ve(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const J6=Ge({avgPool_:oit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ait(t,e,n,r,i,s="NDHWC"){const o=Ae(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=Ve(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ue(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),ue(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),ue(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Zo("avgPool3d",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s};let d=Fe.runKernel($I,c,u);return d=Ut(d,a.dtype),l?Ve(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const lit=Ge({avgPool3d_:ait});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cit(t,e=0){ue(t.length>=1,()=>"Pass at least one tensor to concat");const n=sce(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return om(n[0]);const r=n,i={axis:e};return Fe.runKernel(FI,r,i)}const Go=Ge({concat_:cit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uit(t,e,n=!1,r=!1){let i=Ae(t,"a","matMul"),s=Ae(e,"b","matMul");[i,s]=Ai(i,s);const o={a:i,b:s},a={transposeA:n,transposeB:r};return Fe.runKernel(DI,o,a)}const gr=Ge({matMul_:uit});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dit(t){const n={x:Ae(t,"x","sigmoid","float32")};return Fe.runKernel(cS,n)}const My=Ge({sigmoid_:dit});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fit(t,e,n){const r=Ae(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:e,size:n};return Fe.runKernel(SR,i,s)}const Fr=Ge({slice_:fit});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hit(t){const n={x:Ae(t,"x","tanh","float32")};return Fe.runKernel(mS,n)}const Q6=Ge({tanh_:hit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pit(t,e,n){const r=Ae(t,"x","batchToSpaceND"),i=e.reduce((a,l)=>a*l);ue(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),ue(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),ue(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const s={x:r},o={blockShape:e,crops:n};return Fe.runKernel(LI,s,o)}const ez=Ge({batchToSpaceND_:pit});function mit(t){let e;return t.rank===0||t.rank===1?e=Ve(t,[1,1,1,t.size]):t.rank===2?e=Ve(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Ve(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function git(t,e,n,r,i,s){s==null&&(s=.001);const o=Ae(t,"x","batchNorm"),a=Ae(e,"mean","batchNorm"),l=Ae(n,"variance","batchNorm");let c;i!=null&&(c=Ae(i,"scale","batchNorm"));let u;r!=null&&(u=Ae(r,"offset","batchNorm")),ue(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ue(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ue(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:mit(o),scale:c,offset:u,mean:a,variance:l},h={varianceEpsilon:s},p=Fe.runKernel(XI,f,h);return Ve(p,o.shape)}const RR=Ge({batchNorm_:git});function vit(t,e,n,r,i,s){const o=Ae(t,"x","batchNorm"),a=Ae(e,"mean","batchNorm"),l=Ae(n,"variance","batchNorm");let c;i!=null&&(c=Ae(i,"scale","batchNorm"));let u;return r!=null&&(u=Ae(r,"offset","batchNorm")),ue(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),ue(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),ue(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&ue(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&ue(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),RR(o,a,l,u,c,s)}const yit=Ge({batchNorm2d_:vit});function xit(t,e,n,r,i,s){const o=Ae(t,"x","batchNorm"),a=Ae(e,"mean","batchNorm"),l=Ae(n,"variance","batchNorm");let c;i!=null&&(c=Ae(i,"scale","batchNorm"));let u;return r!=null&&(u=Ae(r,"offset","batchNorm")),ue(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),ue(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),ue(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&ue(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&ue(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),RR(o,a,l,u,c,s)}const bit=Ge({batchNorm3d_:xit});function wit(t,e,n,r,i,s){const o=Ae(t,"x","batchNorm"),a=Ae(e,"mean","batchNorm"),l=Ae(n,"variance","batchNorm");let c;i!=null&&(c=Ae(i,"scale","batchNorm"));let u;return r!=null&&(u=Ae(r,"offset","batchNorm")),ue(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),ue(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),ue(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&ue(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&ue(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),RR(o,a,l,u,c,s)}const Sit=Ge({batchNorm4d_:wit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _it(t,e,n){const r=Ae(t,"x","bincount"),i=Ae(e,"weights","bincount");ue(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),ue(n>=0,()=>`size must be non-negative, but got ${n}.`),ue(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},o={size:n};return Fe.runKernel(d6,s,o)}const Cit=Ge({bincount_:_it});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tit(t,e){let n=Ae(t,"broadcastTo","x");const r=n.shape;if(Zd(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=Ve(n,c)}const i=n.shape,s=Array.from(e);for(let c=e.length-1;c>=0;c--)if(i[c]===e[c])s[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return om(n);const a={x:n},l={reps:s};return Fe.runKernel(gS,a,l)}const z1=Ge({broadcastTo_:Tit});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eit(t){const n={x:Ae(t,"x","ceil","float32")};return Fe.runKernel(R2,n)}const Mit=Ge({ceil_:Eit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NR(t,e,n){Zd(t),n=n||Cy(e);const r={shape:t,value:e,dtype:n};return Fe.runKernel(E6,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kit(t,e,n){const r=Ae(t,"x","clipByValue");if(ue(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return NR(r.shape,e,r.dtype);const i={x:r},s={clipValueMin:e,clipValueMax:n};return Fe.runKernel(N2,i,s)}const rl=Ge({clipByValue_:kit});function Ait(t){return Go(t,0)}const Iit=Ge({concat1d_:Ait});function Rit(t,e){return Go(t,e)}const Nit=Ge({concat2d_:Rit});function Pit(t,e){return Go(t,e)}const $it=Ge({concat3d_:Pit});function Dit(t,e){return Go(t,e)}const Lit=Ge({concat4d_:Dit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oit(t,e,n,r,i="NHWC",s=[1,1],o){const a=Ae(t,"x","conv2d","float32"),l=Ae(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=Ve(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ue(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),ue(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Zo("conv2d",r,o);const d=i==="NHWC"?c.shape[3]:c.shape[1];ue(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),ue(Zs(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),ue($m(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),ue($m(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:c,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},p=Fe.runKernel(UI,f,h);return u?Ve(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Dm=Ge({conv2d_:Oit});function Fit(t,e,n,r,i="NWC",s=1,o){const a=Ae(t,"x","conv1d"),l=Ae(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=Ve(a,[1,a.shape[0],a.shape[1]])),ue(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),ue(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Zo("conv1d",r,o),ue(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),ue(Zs(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),ue($m(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),ue($m(n),()=>"Error in conv1D: Stride should be larger than 0."),ue(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const d=Ve(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=Ve(c,[c.shape[0],1,c.shape[1],c.shape[2]]),m=Dm(f,d,[1,n],r,"NHWC",[1,s],o);return u?Ve(m,[m.shape[2],m.shape[3]]):Ve(m,[m.shape[0],m.shape[2],m.shape[3]])}const mce=Ge({conv1d_:Fit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uit(t,e,n,r,i,s="NHWC",o){ue(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=Ve(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),ue(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),ue(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),ue(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=s==="NHWC"?a[3]:a[1],d=s==="NHWC"?l.shape[3]:l.shape[1];ue(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),ue(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Zo("conv2dDerInput",i,o);const f={dy:l,filter:n},h={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,inputShape:a},p=Fe.runKernel(BI,f,h);return c?Ve(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const tz=Ge({conv2DBackpropInput_:Uit});function Bit(t,e,n,r,i,s){const o=Ae(t,"x","conv2dTranspose"),a=Ae(e,"filter","conv2dTranspose");return tz(n,o,a,r,i,"NHWC",s)}const gce=Ge({conv2dTranspose_:Bit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zit(t,e,n,r,i="NDHWC",s=[1,1,1]){const o=Ae(t,"x","conv3d"),a=Ae(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=Ve(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ue(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),ue(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),ue(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),ue(Zs(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),ue(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),ue($m(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),ue($m(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},d={strides:n,pad:r,dataFormat:i,dilations:s},f=Fe.runKernel(zI,u,d);return c?Ve(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Wit=Ge({conv3d_:zit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vit(t,e,n,r,i){ue(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,o=e,a=!1;e.rank===4&&(a=!0,o=Ve(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],c=o.shape[4];ue(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),ue(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),ue(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),ue(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),ue(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:o,filter:n},d={pad:i,strides:r,inputShape:s},f=Fe.runKernel(g6,u,d);return a?Ve(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const vce=Ge({conv3DBackpropInput_:Vit});function Git(t,e,n,r,i){const s=Ae(t,"x","conv3dTranspose"),o=Ae(e,"filter","conv3dTranspose");return vce(n,s,o,r,i)}const Hit=Ge({conv3dTranspose_:Git});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jit(t){const n={x:Ae(t,"x","cos","float32")};return Fe.runKernel(P2,n)}const nz=Ge({cos_:jit});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xit(t){const n={x:Ae(t,"x","cosh","float32")};return Fe.runKernel($2,n)}const yce=Ge({cosh_:Xit});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qit(t,e=0,n=!1,r=!1){const s={x:Ae(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return Fe.runKernel(v6,s,o)}const JO=Ge({cumprod_:qit});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yit(t,e=0,n=!1,r=!1){const s={x:Ae(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return Fe.runKernel(WI,s,o)}const xce=Ge({cumsum_:Yit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kit(t,e,n,r=!1){const i=Ae(t,"x","denseBincount"),s=Ae(e,"weights","denseBincount");ue(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),ue(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),ue(n>=0,()=>`size must be non-negative, but got ${n}.`),ue(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const o={x:i,weights:s},a={size:n,binaryOutput:r};return Fe.runKernel(x6,o,a)}const vY=Ge({denseBincount_:Kit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zit(t,e,n="NHWC"){const r=Ae(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];ue(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),ue(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),ue(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),ue(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return Fe.runKernel(b6,a,l)}const Jit=Ge({depthToSpace_:Zit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qit(t,e,n,r,i="NHWC",s=[1,1],o){const a=Ae(t,"x","depthwiseConv2d","float32"),l=Ae(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=Ve(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ue(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),ue(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=i==="NHWC"?c.shape[3]:c.shape[1];ue(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Zo("depthwiseConv2d",r,o);const f={x:c,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},p=Fe.runKernel(VI,f,h);return u?Ve(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const rz=Ge({depthwiseConv2d_:Qit});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function est(t,e,n,r,i=[1,1],s="NHWC"){const o=Ae(t,"x","dilation2d"),a=Ae(e,"filter","dilation2d");ue(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),ue(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),ue(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=o,c=!1;o.rank===3&&(l=Ve(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),ue(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},d={strides:n,pad:r,dilations:i},f=Fe.runKernel(GI,u,d);return c?Ve(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const tst=Ge({dilation2d_:est});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bv(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,o=t[s]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(s)}return r}function rs(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1,o=e[s];(i==null||i===1&&o>1)&&n.unshift(s)}return n}function kn(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let s=t[t.length-i-1];s==null&&(s=1);let o=e[e.length-i-1];if(o==null&&(o=1),s===1)r[n-i-1]=o;else if(o===1)r[n-i-1]=s;else if(s!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-i-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nst(t,e){let n=Ae(t,"a","equal","string_or_numeric"),r=Ae(e,"b","equal","string_or_numeric");[n,r]=Ai(n,r),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(HI,i)}const Wu=Ge({equal_:nst});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rst(t,e,n){const r=Ae(e,"a","where"),i=Ae(n,"b","where"),s=Ae(t,"condition","where","bool"),o=kn(kn(s.shape,r.shape),i.shape),a=z1(s,o),l=z1(r,o),c=z1(i,o),u={condition:a,t:l,e:c};return Fe.runKernel(wR,u)}const So=Ge({where_:rst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ist(t){const n={x:Ae(t,"x","zerosLike")};return Fe.runKernel(AR,n)}const rr=Ge({zerosLike_:ist});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sst(t,e){let n=Ae(t,"a","div"),r=Ae(e,"b","div");[n,r]=Ai(n,r);const i=mn(n,r),s=rr(i),o=Wu(r,s);return So(o,s,i)}const ost=Ge({divNoNan_:sst});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ast(t,e){const n=Ae(t,"t1","dot"),r=Ae(e,"t2","dot");ue((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(ue(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&r.rank===1){const o=Ve(n,[1,-1]),a=Ve(r,[-1,1]),l=gr(o,a);return Ve(l,[])}else if(n.rank===1&&r.rank===2){const o=Ve(n,[1,-1]),a=Ve(r,[r.shape[0],r.shape[1]]),l=gr(o,a);return Ve(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=Ve(r,[-1,1]),a=gr(n,o);return Ve(a,[a.size])}else{const o=Ve(r,[r.shape[0],r.shape[1]]);return gr(n,o)}}const lst=Ge({dot_:ast});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cst(t,...e){const n=e.map((i,s)=>Ae(i,`tensors${s}`,"einsum")),r={equation:t};return Fe.runKernel(_6,n,r)}const qx=Ge({einsum_:cst});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ust(t){const n={x:Ae(t,"x","elu","float32")};return Fe.runKernel(L2,n)}const PR=Ge({elu_:ust});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dst(t){let e=Ae(t,"x","erf");ue(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Ut(e,"float32"));const n={x:e};return Fe.runKernel(O2,n)}const fst=Ge({erf_:dst});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iz(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function bce(t,e,n){const r=t.length+e.length,i=[];let s=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?i.push(t[s++]):i.push(e[o++]);return i}function xs(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const i=e.map(s=>t[s]);return[n,i]}function Wi(t,e){const n=e.map(r=>1);return bce(t,n,e)}function Ds(t,e,n){ue(iz(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function ui(t,e){if(iz(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Ph(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Ii(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hst(t,e=null,n=!1){const i={x:Ae(t,"x","max")},s={reductionIndices:e,keepDims:n};return Fe.runKernel(rR,i,s)}const Rc=Ge({max_:hst});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pst(t,e=null,n=!1){const i={x:Ae(t,"x","min")},s={axis:e,keepDims:n};return Fe.runKernel(aR,i,s)}const DM=Ge({min_:pst});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mst(t,e){let n=Ae(t,"base","pow"),r=Ae(e,"exp","pow");[n,r]=Ai(n,r);const i={a:n,b:r};return Fe.runKernel(Q2,i)}const zv=Ge({pow_:mst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vr(t,e){if((Xl(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Xl(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return xS(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gst(t){const n={x:Ae(t,"x","sqrt","float32")};return Fe.runKernel(dS,n)}const Co=Ge({sqrt_:gst});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vst(t){const e=Ae(t,"x","square"),n={};return Fe.runKernel("Square",{x:e},n)}const Xr=Ge({square_:vst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yst(t,e=null,n=!1){let r=Ae(t,"x","sum");r.dtype==="bool"&&(r=Ut(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return Fe.runKernel(_R,i,s)}const un=Ge({sum_:yst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xst(t,e="euclidean",n=null,r=!1){t=Ae(t,"x","norm");const i=wce(t,e,n);let s=i.shape;if(r){const o=Wn(n,t.shape);s=Wi(i.shape,o)}return Ve(i,s)}function wce(t,e,n=null){if(t.rank===0)return ho(t);if(t.rank!==1&&n===null)return wce(Ve(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return un(ho(t),n);if(e===1/0)return Rc(ho(t),n);if(e===-1/0)return DM(ho(t),n);if(e==="euclidean"||e===2)return Co(un(zv(ho(t),vr(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Rc(un(ho(t),n[0]),n[1]-1);if(e===1/0)return Rc(un(ho(t),n[1]),n[0]);if(e===-1/0)return DM(un(ho(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Co(un(Xr(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const $R=Ge({norm_:xst});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bst(t,e=null,n=!1){return $R(t,"euclidean",e,n)}const wst=Ge({euclideanNorm_:bst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sst(t){const n={x:Ae(t,"x","exp")};return Fe.runKernel(F2,n)}const Vu=Ge({exp_:Sst});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _st(t,e=0){const n=Ae(t,"x","expandDims","string_or_numeric");ue(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return Fe.runKernel(jI,r,i)}const Fo=Ge({expandDims_:_st});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cst(t){const n={x:Ae(t,"x","expm1")};return Fe.runKernel(U2,n)}const Tst=Ge({expm1_:Cst});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Est(t,e){const n=Ae(t,"x","tile","string_or_numeric");ue(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return Fe.runKernel(gS,r,i)}const Tc=Ge({tile_:Est});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mst(t,e,n,r="float32"){e==null&&(e=t);const i=Bn([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)i.set(1,a,a);const o=Ve(i.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Tc(Fo(o,0),[n[0],1,1]);if(n.length===2)return Tc(Fo(Fo(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Tc(Fo(Fo(Fo(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const Sce=Ge({eye_:Mst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kst(t){const n={x:Ae(t,"x","floor","float32")};return Fe.runKernel(B2,n)}const DR=Ge({floor_:kst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ast(t,e,n=0,r=0){const i=Ae(t,"x","gather"),s=Ae(e,"indices","gather","int32"),o={x:i,indices:s},a={axis:n,batchDims:r};return Fe.runKernel(qI,o,a)}const sz=Ge({gather_:Ast});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ist(t,e){let n=Ae(t,"a","greater","string_or_numeric"),r=Ae(e,"b","greater","string_or_numeric");[n,r]=Ai(n,r),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(YI,i)}const al=Ge({greater_:Ist});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rst(t,e){let n=Ae(t,"a","greaterEqual","string_or_numeric"),r=Ae(e,"b","greaterEqual","string_or_numeric");[n,r]=Ai(n,r),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(W2,i)}const og=Ge({greaterEqual_:Rst});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nst(t){const n={input:Ae(t,"input","imag")};return Fe.runKernel(A6,n)}const oz=Ge({imag_:Nst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pst(t){const n={x:Ae(t,"x","isFinite")};return Fe.runKernel(G2,n)}const $st=Ge({isFinite_:Pst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dst(t){const n={x:Ae(t,"x","isInf")};return Fe.runKernel(H2,n)}const Lst=Ge({isInf_:Dst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ost(t){const n={x:Ae(t,"x","isNaN")};return Fe.runKernel(j2,n)}const Fst=Ge({isNaN_:Ost});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ust(t,e=.2){const r={x:Ae(t,"x","leakyRelu")},i={alpha:e};return Fe.runKernel(KI,r,i)}const az=Ge({leakyRelu_:Ust});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bst(t,e){let n=Ae(t,"a","less","string_or_numeric"),r=Ae(e,"b","less","string_or_numeric");[n,r]=Ai(n,r),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(ZI,i)}const LM=Ge({less_:Bst});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zst(t,e){let n=Ae(t,"a","lessEqual","string_or_numeric"),r=Ae(e,"b","lessEqual","string_or_numeric");[n,r]=Ai(n,r),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(JI,i)}const ky=Ge({lessEqual_:zst});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wst(t,e=5,n=1,r=1,i=.5){const s=Ae(t,"x","localResponseNormalization");ue(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),ue(Lv(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=s,a=!1;s.rank===3&&(a=!0,o=Ve(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:o},c={depthRadius:e,bias:n,alpha:r,beta:i},u=Fe.runKernel(nR,l,c);return a?Ve(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Vst=Ge({localResponseNormalization_:Wst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gst(t){const n={x:Ae(t,"x","log","float32")};return Fe.runKernel(X2,n)}const Gu=Ge({log_:Gst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hst(t){const n={x:Ae(t,"x","log1p")};return Fe.runKernel(q2,n)}const _ce=Ge({log1p_:Hst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jst(t,e){ue(DO(t),()=>"The f passed in variableGrads(f) must be a function"),ue(e==null||Array.isArray(e)&&e.every(c=>c instanceof PM),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in Fe.registeredVariables)e.push(Fe.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,i=e.length;e=e.filter(c=>c.trainable),ue(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:o,grads:a}=Fe.gradients(t,e,null,s);ue(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),ue(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:o,grads:l}}function Wv(t){return Fe.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xst(t){const n={x:Ae(t,"x","neg")};return Fe.runKernel(cR,n)}const ki=Ge({neg_:Xst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qst(t){const n={x:Ae(t,"x","softplus")};return Fe.runKernel(uS,n)}const wS=Ge({softplus_:qst});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yst(t){const e=Ae(t,"x","logSigmoid");return Wv(r=>({value:ki(wS(ki(r))),gradFunc:o=>Oe(o,My(ki(r)))}))(e)}const Kst=Ge({logSigmoid_:Yst});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zst(t,e){let n=Ae(t,"a","sub"),r=Ae(e,"b","sub");[n,r]=Ai(n,r);const i={a:n,b:r};return Fe.runKernel(hS,i)}const xn=Ge({sub_:Zst});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jst(t,e=-1){const n=Ae(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Wv((i,s)=>{const a=Rc(i,e,!0),l=xn(i,a),c=xn(Ut(l,"float32"),Gu(un(Vu(l),e,!0)));return s([c]),{value:c,gradFunc:(d,f)=>{const[h]=f,p=!0,v=Vu(h);return xn(d,Oe(un(d,e,p),v))}}})(n)}const Cce=Ge({logSoftmax_:Jst});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qst(t,e=null,n=!1){const r=Ae(t,"x","logSumExp"),i=Wn(e,r.shape),s=Rc(r,i,!0),o=xn(r,s),a=Vu(o),l=un(a,i),c=Gu(l),u=wt(Ve(s,c.shape),c);if(n){const d=Wi(u.shape,i);return Ve(u,d)}return u}const Tce=Ge({logSumExp_:Qst});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eot(t,e){const n=Ae(t,"a","logicalAnd","bool"),r=Ae(e,"b","logicalAnd","bool");kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(QI,i)}const Gd=Ge({logicalAnd_:eot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tot(t){const n={x:Ae(t,"x","logicalNot","bool")};return Fe.runKernel(eR,n)}const lz=Ge({logicalNot_:tot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function not(t,e){const n=Ae(t,"a","logicalOr","bool"),r=Ae(e,"b","logicalOr","bool");kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(tR,i)}const Ece=Ge({logicalOr_:not});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rot(t,e){const n=Ae(t,"a","logicalXor","bool"),r=Ae(e,"b","logicalXor","bool");return kn(n.shape,r.shape),Gd(Ece(t,e),lz(Gd(t,e)))}const iot=Ge({logicalXor_:rot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sot(t,e,n,r,i){const s=Ae(t,"x","maxPool"),o=1;let a=s,l=!1;s.rank===3&&(l=!0,a=Ve(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ue(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),ue(Zs(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Zo("maxPool",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i},d=Fe.runKernel(iR,c,u);return l?Ve(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const cz=Ge({maxPool_:sot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oot(t,e=[1,1,1],n,r,i,s="NDHWC"){const o=Ae(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=Ve(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ue(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),ue(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),Zo("maxPool3d",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s},d=Fe.runKernel(sR,c,u);return l?Ve(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const aot=Ge({maxPool3d_:oot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lot(t,e){let n=Ae(t,"a","maximum"),r=Ae(e,"b","maximum");[n,r]=Ai(n,r),n.dtype==="bool"&&(n=Ut(n,"int32"),r=Ut(r,"int32")),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(Y2,i)}const $h=Ge({maximum_:lot});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cot(t,e=null,n=!1){const i={x:Ae(t,"x","mean")},s={axis:e,keepDims:n};return Fe.runKernel(oR,i,s)}const Bi=Ge({mean_:cot});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fs(t,e="float32"){if(Zd(t),e==="complex64"){const r=fs(t,"float32"),i=fs(t,"float32");return Im(r,i)}const n=qs(it(t),e);return Fe.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dh(t,e="float32"){if(Zd(t),e==="complex64"){const r=Dh(t,"float32"),i=fs(t,"float32");return Im(r,i)}const n=r6(it(t),e);return Fe.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uot(t,e){let n=Ae(t,"a","minimum"),r=Ae(e,"b","minimum");[n,r]=Ai(n,r),n.dtype==="bool"&&(n=Ut(n,"int32"),r=Ut(r,"int32")),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(K2,i)}const mw=Ge({minimum_:uot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dot(t,e,n){ue(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=Ae(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");ue(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)ue(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ue(e[a][0]>=0&&e[a][0]<=r.shape[a]-i&&e[a][1]>=0&&e[a][1]<=r.shape[a]-i,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},o={x:r};return Fe.runKernel(lR,o,s)}const fot=Ge({mirrorPad_:dot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hot(t,e){let n=Ae(t,"a","mod"),r=Ae(e,"b","mod");[n,r]=Ai(n,r);const i={a:n,b:r};return Fe.runKernel(Z2,i)}const pot=Ge({mod_:hot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mot(t,e=null,n=!1){t=Ae(t,"x","moments");const r=Wn(e,t.shape),i=Bi(t,r,n);let s=i.shape;n||(s=Wi(i.shape,r));const o=Xr(xn(Ut(t,"float32"),Ve(i,s))),a=Bi(o,r,n);return{mean:i,variance:a}}const uz=Ge({moments_:mot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function got(t,e){let n=Ae(t,"a","notEqual","string_or_numeric"),r=Ae(e,"b","notEqual","string_or_numeric");[n,r]=Ai(n,r),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(uR,i)}const OM=Ge({notEqual_:got});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vot(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:Ae(t,"indices","oneHot","int32")},a={dtype:i,depth:e,onValue:n,offValue:r};return Fe.runKernel(fR,o,a)}const Mce=Ge({oneHot_:vot});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yot(t){const n={x:Ae(t,"x","onesLike")};return Fe.runKernel(dR,n)}const ql=Ge({onesLike_:yot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xot(t,e,n=0){const r=Ae(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},s={x:r};return Fe.runKernel(pR,s,i)}const dz=Ge({pad_:xot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bot(t,e,n){const r=Ae(t,"x","spaceToBatchND");ue(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),ue(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),ue(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},s={blockShape:e,paddings:n};return Fe.runKernel(CR,i,s)}const fz=Ge({spaceToBatchND_:bot});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wot(t,e,n,r,i,s,o){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=Ae(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=Ve(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ue(Zs(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const u=Jl(l.shape,e,s,i,r),d=[u.dilationHeight,u.dilationWidth];let f;r==="same"?f=_ot([u.filterHeight,u.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[p,v]=Sot([u.inHeight,u.inWidth],d,f),m=h?r:"valid",g=h?l:fz(l,d,p),x=(n==="avg"?()=>J6(g,e,s,m,o):()=>cz(g,e,s,m,o))(),S=h?x:ez(x,d,v);return c?Ve(S,[S.shape[1],S.shape[2],S.shape[3]]):S}function Sot(t,e,n){const r=n.map(u=>u[0]),i=n.map(u=>u[1]),s=t.concat(r,i),o=e.map((u,d)=>(u-s[d]%u)%u),a=i.map((u,d)=>u+o[d]),l=e.map((u,d)=>[r[d],a[d]]),c=e.map((u,d)=>[0,o[d]]);return[l,c]}function _ot(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),s=r.map((o,a)=>o-i[a]);return r.map((o,a)=>[i[a],s[a]])}const Cot=Ge({pool_:wot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tot(t,e){const n=Ae(t,"x","prelu"),r=Ae(e,"alpha","prelu"),i={x:n,alpha:r};return Fe.runKernel(mR,i)}const hz=Ge({prelu_:Tot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eot(t,e=null,n=!1){let r=Ae(t,"x","prod");r.dtype==="bool"&&(r=Ut(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return Fe.runKernel(gR,i,s)}const Mot=Ge({prod_:Eot});var pz={exports:{}};pz.exports;(function(t){(function(e,n,r){function i(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new i(l),d=c&&c.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&s(d,u),f.state=function(){return s(u,{})}),f}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(bc,t,!1)})(pz);var kot=pz.exports,mz={exports:{}};mz.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(bc,t,!1)})(mz);var Aot=mz.exports,gz={exports:{}};gz.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(bc,t,!1)})(gz);var Iot=gz.exports,vz={exports:{}};vz.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.x,d=l.i,f,h;return f=u[d],f^=f>>>7,h=f^f<<24,f=u[d+1&7],h^=f^f>>>10,f=u[d+3&7],h^=f^f>>>3,f=u[d+4&7],h^=f^f<<7,f=u[d+7&7],f=f^f<<13,h^=f^f<<9,u[d]=h,l.i=d+1&7,h};function c(u,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],u.x=h,u.i=0,f=256;f>0;--f)u.next()}c(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.x&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(bc,t,!1)})(vz);var Rot=vz.exports,yz={exports:{}};yz.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.w,d=l.X,f=l.i,h,p;return l.w=u=u+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(u^u>>>16)|0};function c(u,d){var f,h,p,v,m,g=[],y=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,y=Math.max(y,d.length)),p=0,v=-32;v<y;++v)d&&(h^=d.charCodeAt((v+32)%d.length)),v===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(m=m+1640531527|0,f=g[v&127]^=h+m,p=f==0?p+1:0);for(p>=128&&(g[(d&&d.length||0)&127]=-1),p=127,v=4*128;v>0;--v)h=g[p+34&127],f=g[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,g[p]=h^f;u.w=m,u.X=g,u.i=p}c(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.X&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(bc,t,!1)})(yz);var Not=yz.exports,xz={exports:{}};xz.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(bc,t,!1)})(xz);var Pot=xz.exports,kce={exports:{}};const $ot={},Dot=Object.freeze(Object.defineProperty({__proto__:null,default:$ot},Symbol.toStringTag,{value:"Module"})),Lot=UK(Dot);(function(t){(function(e,n,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),c=r.pow(2,o),u=c*2,d=i-1,f;function h(S,_,C){var T=[];_=_==!0?{entropy:!0}:_||{};var A=g(m(_.entropy?[S,x(n)]:S??y(),3),T),k=new p(T),M=function(){for(var R=k.g(s),P=l,O=0;R<c;)R=(R+O)*i,P*=i,O=k.g(1);for(;R>=u;)R/=2,P/=2,O>>>=1;return(R+O)/P};return M.int32=function(){return k.g(4)|0},M.quick=function(){return k.g(4)/4294967296},M.double=M,g(x(k.S),n),(_.pass||C||function(R,P,O,$){return $&&($.S&&v($,k),R.state=function(){return v(k,{})}),O?(r[a]=R,P):R})(M,A,"global"in _?_.global:this==r,_.state)}function p(S){var _,C=S.length,T=this,A=0,k=T.i=T.j=0,M=T.S=[];for(C||(S=[C++]);A<i;)M[A]=A++;for(A=0;A<i;A++)M[A]=M[k=d&k+S[A%C]+(_=M[A])],M[k]=_;(T.g=function(R){for(var P,O=0,$=T.i,U=T.j,z=T.S;R--;)P=z[$=d&$+1],O=O*i+z[d&(z[$]=z[U=d&U+P])+(z[U]=P)];return T.i=$,T.j=U,O})(i)}function v(S,_){return _.i=S.i,_.j=S.j,_.S=S.S.slice(),_}function m(S,_){var C=[],T=typeof S,A;if(_&&T=="object")for(A in S)try{C.push(m(S[A],_-1))}catch{}return C.length?C:T=="string"?S:S+"\0"}function g(S,_){for(var C=S+"",T,A=0;A<C.length;)_[d&A]=d&(T^=_[d&A]*19)+C.charCodeAt(A++);return x(_)}function y(){try{var S;return f&&(S=f.randomBytes)?S=S(i):(S=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(S)),x(S)}catch{var _=e.navigator,C=_&&_.plugins;return[+new Date,e,C,e.screen,x(n)]}}function x(S){return String.fromCharCode.apply(0,S)}if(g(r.random(),n),t.exports){t.exports=h;try{f=Lot}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:bc,[],Math)})(kce);var Oot=kce.exports,Fot=kot,Uot=Aot,Bot=Iot,zot=Rot,Wot=Not,Vot=Pot,ag=Oot;ag.alea=Fot;ag.xor128=Uot;ag.xorwow=Bot;ag.xorshift7=zot;ag.xor4096=Wot;ag.tychei=Vot;var bz=ag;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ace{constructor(e,n,r,i,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=s||Math.random();this.random=bz.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,s,o;do i=2*this.random()-1,s=2*this.random()-1,o=i*i+s*s;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class Got{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=bz.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hot(t,e=0,n=1,r,i){if(Zd(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new Ace(e,n,r,!1,i),o=Bn(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const jot=Ge({randomNormal_:Hot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xot(t,e=0,n=1,r="float32",i){Zd(t);const s=Bn(t,r),o=new Got(e,n,null,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}const SS=Ge({randomUniform_:Xot});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gw(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return Fe.runKernel(L6,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qot(t){const n={input:Ae(t,"input","real")};return Fe.runKernel(O6,n)}const FM=Ge({real_:qot});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yot(t){const n={x:Ae(t,"x","reciprocal")};return Fe.runKernel(eS,n)}const Kot=Ge({reciprocal_:Yot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zot(t){const n={x:Ae(t,"x","relu")};return Fe.runKernel(tS,n)}const lg=Ge({relu_:Zot});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jot(t){const n={x:Ae(t,"x","relu6")};return Fe.runKernel(nS,n)}const Ice=Ge({relu6_:Jot});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qot(t,e){const r={x:Ae(t,"x","reverse")},i={dims:e};return Fe.runKernel(bR,r,i)}const Lm=Ge({reverse_:Qot});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eat(t){const n={x:Ae(t,"x","round")};return Fe.runKernel(rS,n)}const Rce=Ge({round_:eat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tat(t){const n={x:Ae(t,"x","rsqrt","float32")};return Fe.runKernel(iS,n)}const Nce=Ge({rsqrt_:tat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nat(t){const n={x:Ae(t,"x","selu")};return Fe.runKernel(sS,n)}const Pce=Ge({selu_:nat});function rat(t,e,n,r,i,s=[1,1],o="NHWC"){const a=Ae(t,"x","separableConv2d"),l=Ae(e,"depthwiseFilter","separableConv2d"),c=Ae(n,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(a.rank===3&&(d=!0,u=Ve(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ue(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),ue(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),ue(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),ue(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),ue(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const f=l.shape[2],h=l.shape[3];ue(c.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${c.shape[2]}.`);const p=rz(u,l,r,i,o,s),m=Dm(p,c,1,"valid",o);return d?Ve(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const $ce=Ge({separableConv2d_:rat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iat(t){const n={x:Ae(t,"x","sign")};return Fe.runKernel(lS,n)}const sat=Ge({sign_:iat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oat(t){const n={x:Ae(t,"x","sin","float32")};return Fe.runKernel(oS,n)}const Dce=Ge({sin_:oat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aat(t){const n={x:Ae(t,"x","sinh")};return Fe.runKernel(aS,n)}const Lce=Ge({sinh_:aat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lat(t,e,n){const r=Ae(t,"x","slice1d");return ue(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Fr(r,[e],[n])}const wz=Ge({slice1d_:lat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cat(t,e,n){const r=Ae(t,"x","slice2d");return ue(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Fr(r,e,n)}const Oce=Ge({slice2d_:cat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uat(t,e,n){const r=Ae(t,"x","slice3d");return ue(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Fr(r,e,n)}const Sz=Ge({slice3d_:uat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dat(t,e,n){const r=Ae(t,"x","slice4d");return ue(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Fr(r,e,n)}const UM=Ge({slice4d_:dat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fat(t,e=-1){const n=Ae(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return Fe.runKernel(ER,r,i)}const _z=Ge({softmax_:fat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hat(t){ue(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return Fe.runKernel(T6,e)}const Fce=Ge({fft_:hat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pat(t){ue(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return Fe.runKernel(k6,e)}const QO=Ge({ifft_:pat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mat(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=Ve(t,[n,e]);r=QO(i)}else{const i=[n,2*(e-1)],s=Ve(FM(t),[n,e]),o=Ve(oz(t),[n,e]),a=Lm(Fr(s,[0,1],[n,e-2]),1),l=Oe(Lm(Fr(o,[0,1],[n,e-2]),1),vr(-1)),c=Go([s,a],1),u=Go([o,l],1),d=Ve(Im(c,u),[i[0],i[1]]);r=QO(d)}if(r=FM(r),t.rank===3&&t.shape[0]!==0){const i=r,s=t.shape[0];r=Ve(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const gat=Ge({irfft_:mat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vat(t,e,n=0){const i={x:Ae(t,"x","split")},s={numOrSizeSplits:e,axis:n};return Fe.runKernel(TR,i,s)}const el=Ge({split_:vat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yat(t,e){ue(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const p=t.shape.map(m=>0),v=t.shape.map(m=>m);v[t.shape.length-1]=e,i=Fr(t,p,v),n=e}else if(e!=null&&e>n){const p=t.shape.map(v=>v);p[t.shape.length-1]=e-n,i=Go([t,fs(p)],t.shape.length-1),n=e}else i=t;const s=rr(i),o=Ve(Im(i,s),[r,n]),a=Fce(o),l=Math.floor(n/2)+1,c=FM(a),u=oz(a),d=el(c,[l,n-l],c.shape.length-1),f=el(u,[l,n-l],u.shape.length-1),h=i.shape.slice();return h[i.shape.length-1]=l,Ve(Im(d[0],f[0]),h)}const xat=Ge({rfft_:yat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bat(t,e){let n=Ae(t,"a","squaredDifference"),r=Ae(e,"b","squaredDifference");[n,r]=Ai(n,r),kn(n.shape,r.shape);const i={a:n,b:r},s={};return Fe.runKernel(fS,i,s)}const wat=Ge({squaredDifference_:bat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sat(t,e){const n=Ae(t,"x","squeeze","string_or_numeric");return Ve(n,Ah(n.shape,e).newShape)}const _S=Ge({squeeze_:Sat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _at(t,e=0){const n=sce(t,"tensors","stack","string_or_numeric");ue(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&ue(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return Fe.runKernel(hR,r,i)}const Hd=Ge({stack_:_at});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cat(t,e=0){const r={x:Ae(t,"x","step")},i={alpha:e};return Fe.runKernel(vS,r,i)}const CS=Ge({step_:Cat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tat(t,e,n,r,i=0,s=0,o=0,a=0,l=0){const u={x:Ae(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return Fe.runKernel(W6,u,d)}const Eat=Ge({stridedSlice_:Tat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mat(t){const n={x:Ae(t,"x","tan","float32")};return Fe.runKernel(pS,n)}const kat=Ge({tan_:Mat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ma(t,e){n6(t);const n=yS(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return xS(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b$(t,e,n){if(n6(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=yS(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return xS(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aat(t,e,n){if(n6(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=yS(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return xS(t,e,r,n)}function Uce(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(s+` update.rank != ${i+t.length-r}`);for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(s+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(s+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function Iat(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}Uce(n,e,t)}function cg(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length;let o=1;for(let d=i;d<s;++d)o*=n[d];const a=i<1?1:i,l=it(e.shape)/a,c=[...on(n.slice(0,i)),1],u=it(n);return{sliceRank:i,numUpdates:l,sliceSize:o,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rat(t,e=1,n=!0){const r=Ae(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},o={k:e,sorted:n},[a,l]=Fe.runKernel(V6,s,o);return{values:a,indices:l}}const Nat=Ge({topk_:Rat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pat(t,e=0,n=1,r,i){if(Zd(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new Ace(e,n,r,!0,i),o=Bn(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const Bce=Ge({truncatedNormal_:Pat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $at(t,e=0){const n=Ae(t,"x","unique","string_or_numeric");ue(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[s,o]=Fe.runKernel(H6,r,i);return{values:s,indices:o}}const Dat=Ge({unique_:$at});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lat(t,e,n){const r=Ae(t,"x","unsortedSegmentSum"),i=Ae(e,"segmentIds","unsortedSegmentSum","int32");ue(Lv(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},o={numSegments:n};return Fe.runKernel(kR,s,o)}const zce=Ge({unsortedSegmentSum_:Lat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oat(t,e=0){const n=Ae(t,"x","unstack","string_or_numeric");ue(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return Fe.runKernel(MR,r,i)}const Om=Ge({unstack_:Oat});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fat(t,e=!0,n,r){return Fe.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wce(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=Bn(t,"int32"),i=Bn([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const o=r.indexToLoc(n[s]),a=s*t.length;i.values.set(o,a)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uat(t,e,n){const r=Ae(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),ue(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{ue(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:e};return r.dtype==="complex64"?Ze(()=>{let o=FM(r),a=oz(r);return o=Fe.runKernel(ov,{x:o},s),a=Fe.runKernel(ov,{x:a},s),n&&(a=ki(a)),Im(o,a)}):Fe.runKernel(ov,i,s)}const tr=Ge({transpose_:Uat});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bat(t,e){if(e==null)return t.shape.slice();if(br(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zat(t,e,n,r){const i=Ae(t,"x","dropout");if(ue(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),ue(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Yi?i.clone():i;const s=Bat(i,n),o=1-e,a=mn(DR(wt(SS(s,0,1,"float32",r),o)),o);return Oe(i,a)}const Wat=Ge({dropout_:zat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vat(t,e,n,r,i,s="NHWC",o){let a=t;t.rank===3&&(a=Ve(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Ve(e,[1,e.shape[0],e.shape[1],e.shape[2]])),ue(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),ue(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),ue(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=s==="NHWC"?a.shape[3]:a.shape[1],u=s==="NHWC"?l.shape[3]:l.shape[1];ue(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),ue(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Zo("conv2dDerFilter",i,o);const d={x:a,dy:l},f={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,filterShape:n};return Fe.runKernel(p6,d,f)}const Cz=Ge({conv2DBackpropFilter_:Vat});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tz(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return Oe(t,CS(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function Ez(t,e){let n=e;const r=rs(t.shape,e.shape);return r.length>0&&(n=un(n,r)),Ve(n,t.shape)}function Mz(t,e,n,r){if(e==="linear")return t;if(e==="relu")return lg(t);if(e==="elu")return PR(t);if(e==="relu6")return Ice(t);if(e==="prelu")return hz(t,n);if(e==="leakyrelu")return az(t,r);if(e==="sigmoid")return My(t);throw new Error(`Unknown fused activation ${e}.`)}const kz=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gat({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",kz(Fe.state.gradientDepth,l)===!1){ue(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=Dm(t,e,n,r,i,s,o);return a!=null&&(C=wt(C,a)),Mz(C,l,c,u)}const d=Ae(t,"x","conv2d","float32"),f=Ae(e,"filter","conv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=Ve(d,[1,d.shape[0],d.shape[1],d.shape[2]])),ue(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),ue(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),Zo("fused conv2d",r,o);const v=i==="NHWC"?h.shape[3]:h.shape[1];ue(f.shape[2]===v,()=>`Error in conv2d: depth of input (${v}) must match input depth for filter ${f.shape[2]}.`),ue(Zs(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const m=$s(h.shape,f.shape,n,s,r,o);let g;a!=null&&(g=Ae(a,"bias","fused conv2d"),[g]=Ai(g,d),i==="NHWC"?kn(m.outShape,g.shape):(ue(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),ue(g.shape.length===0||g.shape[0]===m.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${m.outChannels})`)));let y;if(c!=null){const C=c.shape;if(ue(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)ue(C[0]===1||C[0]===m.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${m.outChannels}).`);else if(C.length===3)try{kn(C,m.outShape)}catch{const A=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${m.outShape}).`;throw Error(A)}y=Ae(c,"prelu weights","fused conv2d")}const x=(C,T)=>{ue(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[A,k,M,R]=T,P=Tz(C,M,l);ue(Pm(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const O=tz(k.shape,P,A,n,r),$=Cz(k,P,A.shape,n,r),U=[O,$];if(R!=null){const z=Ez(R,P);U.push(z)}return U},S={x:h,filter:f,bias:g,preluActivationWeights:y},_={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?Wv((T,A,k)=>{let M=Fe.runKernel(IM,S,_);return k([A,T,M]),p&&(M=Ve(M,[M.shape[1],M.shape[2],M.shape[3]])),{value:M,gradFunc:x}})(h,f):Wv((T,A,k,M)=>{let R=Fe.runKernel(IM,S,_);return M([A,T,R,k]),p&&(R=Ve(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:x}})(h,f,g)}const Hat=Ge({fusedConv2d_:Gat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jat(t,e,n,r,i,s=[1,1],o){let a=t;t.rank===3&&(a=Ve(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Ve(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:i,dimRoundingMode:o,dilations:s,filterShape:n};return Fe.runKernel(w6,c,u)}const Xat=Ge({depthwiseConv2dNativeBackpropFilter_:jat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qat(t,e,n,r,i,s=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=Ve(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:i,dimRoundingMode:o,dilations:s,inputShape:t},d=Fe.runKernel(S6,c,u);return l?Ve(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Yat=Ge({depthwiseConv2dNativeBackpropInput_:qat});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kat({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(kz(Fe.state.gradientDepth,s)===!1){let R=gr(t,e,n,r);return i!=null&&(R=wt(R,i)),Mz(R,s,o,a)}let l=Ae(t,"a","fused matMul"),c=Ae(e,"b","fused matMul");[l,c]=Ai(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?c.shape[c.rank-2]:c.shape[c.rank-1],p=l.shape.slice(0,-2),v=c.shape.slice(0,-2),m=it(p),g=it(v);ue(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=kn(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([f,h]),S=n?Ve(l,[m,u,f]):Ve(l,[m,f,u]),_=r?Ve(c,[g,h,d]):Ve(c,[g,d,h]);let C;i!=null&&(C=Ae(i,"bias","fused matMul"),[C]=Ai(C,l),kn(x,C.shape));let T;o!=null&&(T=Ae(o,"prelu weights","fused matMul"));const A=(R,P)=>{const[O,$,U,z]=P,X=Tz(Ve(R,U.shape),U,s);let D,F;if(!n&&!r?(D=gr(X,$,!1,!0),F=gr(O,X,!0,!1)):!n&&r?(D=gr(X,$,!1,!1),F=gr(X,O,!0,!1)):n&&!r?(D=gr($,X,!1,!0),F=gr(O,X,!1,!1)):(D=gr($,X,!0,!0),F=gr(X,O,!0,!0)),i!=null){const W=Ez(z,X);return[D,F,W]}else return[D,F]},k={a:S,b:_,bias:C,preluActivationWeights:T},M={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return i==null?Wv((P,O,$)=>{const U=Fe.runKernel(AM,k,M);return $([P,O,U]),{value:Ve(U,x),gradFunc:A}})(S,_):Wv((P,O,$,U)=>{const z=Fe.runKernel(AM,k,M);return U([P,O,z,$]),{value:Ve(z,x),gradFunc:A}})(S,_,C)}const yY=Ge({fusedMatMul_:Kat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zat(t,e,n,r,i="bilinear",s=0){const o=Ae(t,"image","cropAndResize"),a=Ae(e,"boxes","cropAndResize","float32"),l=Ae(n,"boxInd","cropAndResize","int32"),c=a.shape[0];ue(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),ue(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),ue(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),ue(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),ue(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),ue(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const u={image:o,boxes:a,boxInd:l},d={method:i,extrapolationValue:s,cropSize:r};return Fe.runKernel(y6,u,d)}const Jat=Ge({cropAndResize_:Zat});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qat(t){const e=Ae(t,"image","flipLeftRight","float32");ue(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return Fe.runKernel(M6,n,{})}const elt=Ge({flipLeftRight_:Qat});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tlt(t){const e=Ae(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];ue(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),ue(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,Tc(e,i)}const nlt=Ge({grayscaleToRGB_:tlt});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rlt(t){const e=Ae(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];ue(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),ue(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,s=Ut(e,"float32"),o=ma([.2989,.587,.114]);let a;switch(e.rank){case 2:a=qx("ij,j->i",s,o);break;case 3:a=qx("ijk,k->ij",s,o);break;case 4:a=qx("ijkl,l->ijk",s,o);break;case 5:a=qx("ijklm,m->ijkl",s,o);break;case 6:a=qx("ijklmn,n->ijklm",s,o);break;default:throw new Error("Not a valid tensor rank.")}return a=Fo(a,-1),Ut(a,i)}const ilt=Ge({rgbToGrayscale_:rlt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slt(t,e,n=0,r=.5){const i=Ae(t,"image","rotateWithOffset","float32");ue(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},o={radians:e,fillValue:n,center:r};return Fe.runKernel(j6,s,o)}const olt=Ge({rotateWithOffset_:slt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ay(t,e,n,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const o=t.shape[0];return n=Math.min(n,o),ue(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),ue(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),ue(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),ue(e.rank===1,()=>"scores must be a 1D tensor"),ue(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),ue(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function alt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=Ae(t,"boxes","nonMaxSuppression","float32"),o=Ae(e,"scores","nonMaxSuppression","float32"),a=Ay(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return Fe.runKernel(P6,{boxes:s,scores:o},l)}const llt=Ge({nonMaxSuppression_:alt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clt(t,e,n){const r=ult(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function ult(t,e,n){return flt(t,e,n||dlt)}function dlt(t,e){return t>e?1:t<e?-1:0}function flt(t,e,n){let r=0,i=t.length,s=0,o=!1;for(;r<i;){s=r+(i-r>>>1);const a=n(e,t[s]);a>0?r=s+1:(i=s,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Az(t,e,n,r,i){return Nz(t,e,n,r,i,0)}function Iz(t,e,n,r,i,s){return Nz(t,e,n,r,i,0,!1,s,!0)}function Rz(t,e,n,r,i,s){return Nz(t,e,n,r,i,s,!0)}function Nz(t,e,n,r,i,s,o=!1,a=!1,l=!1){const c=[];for(let m=0;m<e.length;m++)e[m]>i&&c.push({score:e[m],boxIndex:m,suppressBeginIndex:0});c.sort(xY);const u=s>0?-.5/s:0,d=[],f=[];for(;d.length<n&&c.length>0;){const m=c.pop(),{score:g,boxIndex:y,suppressBeginIndex:x}=m;if(g<i)break;let S=!1;for(let _=d.length-1;_>=x;--_){const C=hlt(t,y,d[_]);if(C>=r){S=!0;break}if(m.score=m.score*plt(r,u,C),m.score<=i)break}m.suppressBeginIndex=d.length,S||(m.score===g?(d.push(y),f.push(m.score)):m.score>i&&clt(c,m,xY))}const h=d.length,p=n-h;a&&p>0&&(d.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const v={selectedIndices:d};return o&&(v.selectedScores=f),l&&(v.validOutputs=h),v}function hlt(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),h=(a-s)*(l-o),p=(d-c)*(f-u);if(h<=0||p<=0)return 0;const v=Math.max(s,c),m=Math.max(o,u),g=Math.min(a,d),y=Math.min(l,f),x=Math.max(g-v,0)*Math.max(y-m,0);return x/(h+p-x)}function plt(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function xY(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function mlt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=Ae(t,"boxes","nonMaxSuppressionAsync"),o=Ae(e,"scores","nonMaxSuppressionAsync"),a=Ay(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l=await Promise.all([s.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:d}=Az(c,u,n,r,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),ma(d,"int32")}const glt=mlt;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vlt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=Ae(t,"boxes","nonMaxSuppression"),a=Ae(e,"scores","nonMaxSuppression"),l=Ay(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c={boxes:o,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},d=Fe.runKernel(D6,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const ylt=Ge({nonMaxSuppressionWithScore_:vlt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function xlt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=Ae(t,"boxes","nonMaxSuppressionAsync"),a=Ae(e,"scores","nonMaxSuppressionAsync"),l=Ay(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c=await Promise.all([o.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:f,selectedScores:h}=Rz(u,d,n,r,i,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:ma(f,"int32"),selectedScores:ma(h)}}const blt=xlt;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wlt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=Ae(t,"boxes","nonMaxSuppression"),a=Ae(e,"scores","nonMaxSuppression"),l=Ay(o,a,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,f={boxes:o,scores:a},h={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:s},p=Fe.runKernel($6,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}const Slt=Ge({nonMaxSuppressionPadded_:wlt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _lt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=Ae(t,"boxes","nonMaxSuppressionAsync"),a=Ae(e,"scores","nonMaxSuppressionAsync"),l=Ay(o,a,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([o.data(),a.data()]),{selectedIndices:p,validOutputs:v}=Iz(f,h,c,u,d,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:ma(p,"int32"),validOutputs:vr(v,"int32")}}const Clt=_lt;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tlt(t,e,n=!1,r=!1){const i=Ae(t,"images","resizeBilinear");ue(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),ue(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),ue(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=Ve(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=Fe.runKernel(xR,a,l);return o?Ve(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Vce=Ge({resizeBilinear_:Tlt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Elt(t,e,n=!1,r=!1){const i=Ae(t,"images","resizeNearestNeighbor");ue(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),ue(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),ue(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),ue(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=Ve(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=Fe.runKernel(yR,a,l);return o?Ve(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Gce=Ge({resizeNearestNeighbor_:Elt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mlt(t,e="binary",n=!1,r=.5){const i=Ae(t,"image","threshold"),s=.2989,o=.587,a=.114,l=i.shape[0]*i.shape[1];let c=Oe(ma([r]),255),u,d,f,h;if(ue(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),ue(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),ue(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),ue(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[u,d,f]=el(i,[1,1,1],-1);const m=Oe(u,s),g=Oe(d,o),y=Oe(f,a);h=wt(wt(m,g),y)}else h=t;if(e==="otsu"){const m=Cit(Ut(Rce(h),"int32"),B1([]),256);c=klt(m,l)}const p=n?ky(h,c):al(h,c);return Ut(Oe(p,255),"int32")}function klt(t,e){let n=ma([-1]),r=ma([0]),i=ma([0]),s,o,a,l,c,u;for(let d=0;d<t.size-1;d++){s=Fr(t,0,d+1),o=Fr(t,d+1),c=mn(un(s),e),u=mn(un(o),e);const f=un(Oe(s,gw(0,s.size)));a=mn(f,un(s));const h=NR(o.shape,s.size),p=wt(gw(0,o.size),h),v=Oe(o,p);l=mn(un(v),un(o));const m=xn(a,l),g=xn(a,l),y=Oe(c,u);i=Oe(Oe(y,m),g);const x=al(i,r);r=So(x,i,r),n=So(x,ma([d]),n)}return n}const Alt=Ge({threshold_:Mlt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ilt(t,e,n="nearest",r="constant",i=0,s){const o=Ae(t,"image","transform","float32"),a=Ae(e,"transforms","transform","float32");ue(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),ue(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),ue(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:o,transforms:a},c={interpolation:n,fillMode:r,fillValue:i,outputShape:s};return Fe.runKernel(G6,l,c)}const Rlt=Ge({transform_:Ilt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nlt(t,e,n){const r=Ae(t,"a","bandPart");ue(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(ue(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),ue(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),a=Ae(e<0?s:e,"numLower","bandPart")):(ue(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=So(LM(e,0),s,mw(e,s))),typeof n=="number"?(ue(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),ue(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=Ae(n<0?o:n,"numUpper","bandPart")):(ue(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=So(LM(n,0),o,mw(n,o)));const c=Ve(gw(0,s,1,"int32"),[-1,1]),u=gw(0,o,1,"int32"),d=xn(c,u),f=Gd(ky(d,a),og(d,ki(l))),h=fs([s,o],r.dtype);return Ve(Hd(Om(Ve(r,[-1,s,o])).map(p=>So(f,p,h))),i)}const Plt=Ge({bandPart_:Nlt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $lt(t){let e;if(Array.isArray(t)){e=!1,ue(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let s=1;s<t.length;++s)ue(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else e=!0,t=el(t,t.shape[0],0).map(i=>_S(i,[0]));ue(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(Fe.tidy(()=>{let s=r[i];if(i>0)for(let o=0;o<i;++o){const a=Oe(un(Oe(n[o],s)),n[o]);s=xn(s,a)}return mn(s,$R(s,"euclidean"))}));return e?Hd(n,0):n}const Dlt=Ge({gramSchmidt_:$lt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Llt(t,e=!1){if(ue(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return bY(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Om(Ve(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[c,u]=bY(l,e);i.push(c),s.push(u)});const o=Ve(Hd(i,0),t.shape),a=Ve(Hd(s,0),t.shape);return[o,a]}}function bY(t,e=!1){return Fe.tidy(()=>{ue(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=Sce(n),s=om(t);const o=b$([[1]],[1,1]);let a=om(o);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=s,d=a,f=i;[a,s,i]=Fe.tidy(()=>{const h=Fr(s,[c,c],[n-c,1]),p=$R(h),v=Fr(s,[c,c],[1,1]),m=So(al(v,0),b$([[-1]]),b$([[1]])),g=xn(v,Oe(m,p)),y=mn(h,g);y.shape[0]===1?a=om(o):a=Go([o,Fr(y,[1,0],[y.shape[0]-1,y.shape[1]])],0);const x=ki(mn(gr(m,g),p)),S=Fr(s,[c,0],[n-c,r]),_=Oe(x,a),C=tr(a);if(c===0)s=xn(S,gr(_,gr(C,S)));else{const k=xn(S,gr(_,gr(C,S)));s=Go([Fr(s,[0,0],[c,r]),k],0)}const T=tr(_),A=Fr(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=xn(A,gr(gr(A,a),T));else{const k=xn(A,gr(gr(A,a),T));i=Go([Fr(i,[0,0],[n,c]),k],1)}return[a,s,i]}),On([u,d,f])}return!e&&n>r&&(i=Fr(i,[0,0],[n,r]),s=Fr(s,[0,0],[r,r])),[i,s]})}const Olt=Ge({qr_:Llt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rd={flipLeftRight:elt,grayscaleToRGB:nlt,resizeNearestNeighbor:Gce,resizeBilinear:Vce,rgbToGrayscale:ilt,rotateWithOffset:olt,cropAndResize:Jat,nonMaxSuppression:llt,nonMaxSuppressionAsync:glt,nonMaxSuppressionWithScore:ylt,nonMaxSuppressionWithScoreAsync:blt,nonMaxSuppressionPadded:Slt,nonMaxSuppressionPaddedAsync:Clt,threshold:Alt,transform:Rlt},Flt={bandPart:Plt,gramSchmidt:Dlt,qr:Olt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ult=new Map,Blt=new Map;class Iy{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class kl{constructor(){this.classNameMap={}}static getMap(){return kl.instance==null&&(kl.instance=new kl),kl.instance}static register(e){kl.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function pt(t,e,n){ue(t.className!=null,()=>"Class being registered does not have the static className property defined."),ue(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),ue(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return kl.register(t),Ult.set(i,t),Blt.set(t,i),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lh extends Iy{minimize(e,n=!1,r){const{value:i,grads:s}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(o)}else this.applyGradients(s);return On(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return jst(e,n)}dispose(){this.iterations_!=null&&On(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:vr(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Lh,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hce extends Lh{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=Fe.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Fe.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:Ze(()=>rr(s).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:Ze(()=>rr(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;Ze(()=>{const u=wt(Oe(l,this.rho),Oe(Xr(a),1-this.rho)),d=Oe(mn(Co(wt(c,this.epsilon)),Co(wt(l,this.epsilon))),a),f=wt(Oe(c,this.rho),Oe(Xr(d),1-this.rho));l.assign(u),c.assign(f);const h=wt(Oe(d,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(On(this.accumulatedGrads.map(e=>e.variable)),On(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jce extends Lh{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Fe.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:Ze(()=>NR(s.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[i].variable;Ze(()=>{const l=wt(a,Xr(o));a.assign(l);const c=wt(Oe(mn(o,Co(wt(l,Fe.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&On(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xce extends Lh{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ze(()=>{this.accBeta1=vr(n).variable(),this.accBeta2=vr(r).variable()}),i==null&&(this.epsilon=Fe.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ze(()=>{const r=xn(1,this.accBeta1),i=xn(1,this.accBeta2);n.forEach((s,o)=>{const a=Fe.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:Ze(()=>rr(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${s}/v`,variable:Ze(()=>rr(a).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,f=wt(Oe(u,this.beta1),Oe(c,1-this.beta1)),h=wt(Oe(d,this.beta2),Oe(Xr(c),1-this.beta2)),p=mn(f,r),v=mn(h,i);u.assign(f),d.assign(h);const m=wt(Oe(mn(p,wt(Co(v),this.epsilon)),-this.learningRate),a);a.assign(m)}),this.accBeta1.assign(Oe(this.accBeta1,this.beta1)),this.accBeta2.assign(Oe(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&On(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&On(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Ze(()=>{this.accBeta1.assign(zv(this.beta1,this.iterations_+1)),this.accBeta2.assign(zv(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qce extends Lh{static get className(){return"Adamax"}constructor(e,n,r,i=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ze(()=>{this.iteration=vr(0).variable(),this.accBeta1=vr(n).variable()}),i==null&&(this.epsilon=Fe.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ze(()=>{const r=xn(1,this.accBeta1),i=mn(-this.learningRate,wt(Oe(this.iteration,this.decay),1));n.forEach((s,o)=>{const a=Fe.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:rr(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${s}/v`,variable:rr(a).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,f=wt(Oe(u,this.beta1),Oe(c,1-this.beta1)),h=Oe(d,this.beta2),p=ho(c),v=$h(h,p);u.assign(f),d.assign(v);const m=wt(Oe(mn(i,r),mn(f,wt(v,this.epsilon))),a);a.assign(m)}),this.iteration.assign(wt(this.iteration,1)),this.accBeta1.assign(Oe(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&On(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&On(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pz extends Lh{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const o=Fe.registeredVariables[r];Ze(()=>{const a=wt(Oe(this.c,s),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Iu(vr(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yce extends Pz{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=vr(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Fe.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:Ze(()=>rr(s).variable(!1))});const o=this.accumulations[i].variable,a=Array.isArray(e)?e[i].tensor:e[r];a!=null&&Ze(()=>{let l;const c=wt(Oe(this.m,o),a);this.useNesterov?l=wt(Oe(this.c,wt(a,Oe(c,this.m))),s):l=wt(Oe(this.c,c),s),o.assign(c),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&On(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kce extends Lh{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=Fe.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Fe.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:Ze(()=>rr(s).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:Ze(()=>rr(s).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:Ze(()=>rr(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;Ze(()=>{const u=wt(Oe(l,this.decay),Oe(Xr(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[i].variable,f=wt(Oe(d,this.decay),Oe(a,1-this.decay)),h=mn(Oe(a,this.learningRate),Co(xn(u,wt(Xr(f),this.epsilon)))),p=wt(Oe(c,this.momentum),h);l.assign(u),d.assign(f),c.assign(p);const v=xn(s,p);s.assign(v)}else{const d=wt(Oe(l,this.decay),Oe(Xr(a),1-this.decay)),f=wt(Oe(c,this.momentum),mn(Oe(a,this.learningRate),Co(wt(d,this.epsilon))));l.assign(d),c.assign(f);const h=xn(s,f);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&On(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&On(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&On(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zlt=[Hce,jce,Xce,qce,Yce,Kce,Pz];function Wlt(){for(const t of zlt)pt(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wY(t,e,n,r){o(t),n=n??0,r=r??1,a(n,r);let i=0;const s=l=>(l.then(c=>{const u=n+ ++i/t.length*(r-n);return e(u),c}),l);function o(l){ue(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){ue(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),ue(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),ue(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Vlt(t,e){e==null&&(e={});const n=e.fetchFunc==null?Qe().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),i=0,s=.5,a=(e.onProgress==null?await Promise.all(r):await wY(r,e.onProgress,i,s)).map(d=>d.arrayBuffer()),l=.5,c=1;return e.onProgress==null?await Promise.all(a):await wY(a,e.onProgress,l,c)}function Glt(t,e){var n;const r=e.fetchFunc==null?Qe().platform.fetch:e.fetchFunc;let i=0,s;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async o=>{for(var a;i<t.length;){s||(s=(await r(t[i],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await s.read();if(l){i++,s=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,i/t.length);continue}o.enqueue(c);return}o.close()}})}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hlt="application/octet-stream",jlt="application/json";class $z{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(ue(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Qe().platform.fetch,ue(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&ue(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=irt(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(i)],{type:jlt}),"model.json"),e.weightData!=null){const o=Rh.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:Hlt}),"model.weights.bin")}const s=await this.fetch(this.path,n);if(s.ok)return{modelArtifactsInfo:K6(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,i=n.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return ort(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=mY(e.weightsManifest),i=()=>Glt(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:i})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=Xlt(n),s=this.weightPathPrefix||r,o=[],a=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(c)):o.push(s+c+i);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const n=await this.getWeightUrls(e),r=mY(e),i=await Vlt(n,this.loadOptions);return[r,i]}}$z.URL_SCHEME_REGEX=/^https?:\/\//;function Xlt(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}function SY(t){return t.match($z.URL_SCHEME_REGEX)!=null}const Zce=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>SY(r)):n=SY(t),n)return Jce(t,e)}return null};as.registerSaveRouter(Zce);as.registerLoadRouter(Zce);function Jce(t,e){return new $z(t,e)}function qlt(t,e){return Jce(t,e)}function Dz(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(it(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,s=i[i.length-1];let o=1;for(let d=0;d<i.length-1;++d)o*=i[d];const a=t.shape,l=i.slice();l.pop();let c=1;for(let d=s;d<n;++d)c*=a[d],l.push(a[d]);const u=[...on(t.shape).map(d=>d/c),1].slice(0,s);return[l,o,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4=-2,Ylt=-1;function Lz(t,e,n){const r=t.shape.length;ue(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),ue(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)ue(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function Klt(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function Oz(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function Qce(t,e,n,r){const i=[...t];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function eue(t,e,n){return n<=t?n:n-(e-1)}function tue(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Zlt(t,e,n,r,i,s,o,a,l){const c=t.length;let u=new Array(c),d=new Array(c),f=new Array(c);if(e.length&&n>0){const h=e[0],p=n+1;u=nue(o,h,p,r,t),d=rue(a,h,p,i,t),f=Qce(s,h,p,t)}else for(let h=0;h<c;h++)u[h]=sue(o,r,s,t,h,l),d[h]=oue(a,i,s,t,h,l),f[h]=iue(s,h,l);return{begin:u,end:d,strides:f}}function nue(t,e,n,r,i){const s=[...i],o=tue(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=0;else{const l=eue(e,n,a);let c=r[l];t&1<<l&&(c=0),s[a]=c}return s}function rue(t,e,n,r,i){const s=[...i],o=tue(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const l=eue(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),s[a]=c}for(let a=0;a<s.length;a++){const l=i[a];s[a]<0&&(s[a]+=l),s[a]=km(0,s[a],i[a])}return s}function iue(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function sue(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),o=km(0,o,l-1),o}function oue(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),a>0?o=km(0,o,l):o=km(-1,o,l-1),o}function Fz(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function Uz(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function LR(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{ue(o!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((o,a)=>o>=0?o:(ue(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,s]}function Bz(t,e,n,r,i,s,o,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)u&&1<<x&a&&d.numAddAxisAfterEllipsis++,1<<x&o&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Jlt(d,f);let h=!0,p=!0,v=!0;const m=[],g=[];for(let x=0;x<t.length;++x){if(f.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const S=!!(f.shrinkAxisMask&1<<x),_=t[x];if(_===-1){m.push(S?1:-1);continue}const C=[f.beginMask&1<<x,f.endMask&1<<x],T=[f.strides[x]>0?0:-1,f.strides[x]>0?_:_-1];if(S&&f.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&f.strides[x]===1;const A=!!(f.beginMask&1<<x&&f.endMask&1<<x);if(f.beginValid&&f.endValid){if(S){const P=f.begin[x]<0?_+f.begin[x]:f.begin[x];if(f.begin[x]=P,f.end[x]=f.begin[x]+1,P<0||P>=_)throw Error(`slice index ${f.begin[x]} of dimension ${x} out of bounds.`)}else f.begin[x]=_Y(f.begin[x],0,f.strides[x],_,C,T),f.end[x]=_Y(f.end[x],1,f.strides[x],_,C,T);const R=f.strides[x]===1&&f.begin[x]===0&&f.end[x]===_;h=h&&R,p=p&&(x===0&&f.strides[x]===1||R)}else h=h&&f.strides[x]===1&&A,p=p&&(x===0&&f.strides[x]===1||A);let k,M=!1;if(f.beginValid&&f.endValid?(k=f.end[x]-f.begin[x],M=!0):S?(k=1,M=!0):A&&_>=0&&(f.strides[x]<0?k=-_:k=_,M=!0),M){let R;k===0||k<0!=f.strides[x]<0?R=0:R=Math.trunc(k/f.strides[x])+(k%f.strides[x]!==0?1:0),m.push(R)}else m.push(-1)}for(let x=0;x<f.finalShapeGatherIndices.length;++x){const S=f.finalShapeGatherIndices[x];S>=0?g.push(m[S]):S===e4&&g.push(1)}return{finalShapeSparse:g.filter((x,S)=>f.finalShapeGatherIndices[S]!==e4),finalShape:g,isIdentity:h,sliceDim0:p,isSimpleSlice:v,begin:f.begin,end:f.end,strides:f.strides}}function Jlt(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(e4),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Ylt),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function _Y(t,e,n,r,i,s){if(i[e])return n>0?s[e]:s[e+1&1];{const o=t<0?r+t:t;return o<s[0]?s[0]:o>s[1]?s[1]:o}}const Qlt=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:Lz,computeFlatOffset:Uz,computeOutShape:Oz,getNormalizedAxes:Zlt,isSliceContinous:Fz,maskToAxes:Klt,parseSliceParams:LR,sliceInfo:Bz,startForAxis:sue,startIndicesWithElidedDims:nue,stopForAxis:oue,stopIndicesWithElidedDims:rue,stridesForAxis:iue,stridesWithElidedDims:Qce},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ect{static sgd(e){return new Pz(e)}static momentum(e,n,r=!1){return new Yce(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,s=!1){return new Kce(e,n,r,i,s)}static adam(e=.001,n=.9,r=.999,i=null){return new Xce(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new Hce(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,s=0){return new qce(e,n,r,i,s)}static adagrad(e,n=.1){return new jce(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u0=ect;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tct=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function aue(){return new Promise(t=>tct(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zz(t,e){const n=t[0].length;t.forEach((i,s)=>{ue(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),ue(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,s)=>{for(let o=0;o<n;o++)ue(o===e||i[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function Ru(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var yc;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(yc||(yc={}));function lue(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const s=n[i],o=r[r.length-n.length+i],a=r[o];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${a}`)}else r[o]=s}return r}function cue(t){const e={FIRST_DIM_SIZE:yc.FIRST_DIM_SIZE,VALUE_ROWIDS:yc.VALUE_ROWIDS,ROW_LENGTHS:yc.ROW_LENGTHS,ROW_SPLITS:yc.ROW_SPLITS,ROW_LIMITS:yc.ROW_LIMITS,ROW_STARTS:yc.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function uue(t){return t.length===0?0:t[0]===yc.FIRST_DIM_SIZE?t.length-1:t.length}function due(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const s=t[i],o=e[i+1];if(s>=0&&o>=0&&s!==1&&s!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wz=30;function OR(t){return t<=Wz?t:LO(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vz(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TS(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const s=e.length;for(let o=0;o<s;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(s+1))}return i}function ES(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],s=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?s.push(o):i.push(o);r.push(...i),r.push(0),r.push(...s)}return r}function MS(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?i.push(e[s-1]*t[s]):i.push(t[s]/e[s-1]):i.push(t[s]);return i}function Gz(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function Hz(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FR=1.7580993408473768,UR=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jz=.3275911,Xz=.254829592,qz=-.284496736,Yz=1.421413741,Kz=-1.453152027,Zz=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jd(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function fue(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function hue(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function pue(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function Jz(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function mue(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function gue(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function vue(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w$="->",nct=/->/g,CY=",",TY="...";function Qz(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(nct,"").length)/w$.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${w$}").`);const[r,i]=t.split(w$);ue(r.indexOf(TY)===-1,()=>`The ellipsis notation ("${TY}") is not supported yet.`);const s=r.split(CY),o=s.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<i.length;++f){const h=i[f];if(!s.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let f=0;f<r.length;++f){const h=r[f];a.indexOf(h)===-1&&h!==CY&&a.push(h)}const l=new Array(s.length);for(let f=0;f<o;++f){if(new Set(s[f].split("")).size!==s[f].length)throw new Error(`Found duplicate axes in input component ${s[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let h=0;h<s[f].length;++h)l[f].push(a.indexOf(s[f][h]))}const c=a.length,u=i.length,d=[];for(let f=u;f<c;++f)d.push(f);return{allDims:a,summedDims:d,idDims:l}}function e8(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function t8(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const s=n[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=s[o]:ue(r[e[i][o]]===s[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(s)}, but got dimension ${s[o]}`)}}function n8(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let o=0;o<i;++o)r.push([]);const s=[];for(let o=0;o<n.length;++o){const a=n[o],l=rct(e,a);for(const c of l)s.indexOf(c)===-1&&(r[o].push(c),s.push(c))}return{path:n,steps:r}}function r8(t){return t.every((e,n)=>e===n)}function rct(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function i8(t,e,n=0){let r=[];if(typeof e=="number")ue(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);ue(i<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[s]=t.shape[n]-o}ue(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yue(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function xue(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function bue(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wue(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function Sue(t,e){return`size ${t} must be non-negative, not ${e}`}function _ue(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Cue(t,e){const n=it(t),r=it(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function Tue(t,e){const n=it(t),r=it(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t4(){return"segment ids must be >= 0"}function Eue(){return"segment ids are not increasing"}function Mue(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function kue(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aue(t,e){let n=!1,r;for(t<=Wz?(r=t,n=!0):r=LO(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=LO(t,r+1);return r}function Iue(t,e,n){const r=[],i=t.length;for(let s=0;s<i;s++)s!==e?r.push(t[s]):r.push(n);return r}function s8(t,e,n,r){const i=e.shape.length,s=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],a=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<i;d++)a.push(e.shape[d]);for(let d=n+1;d<s;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}const ict=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:s8,computeOutShape:Iue,segOpComputeOptimalWindowSize:Aue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xd(t){try{return t.map(e=>dh(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function Rue(t){return t.map(e=>Jf(e))}const sct=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:Xz,ERF_A2:qz,ERF_A3:Yz,ERF_A4:Kz,ERF_A5:Zz,ERF_P:jz,PARALLELIZE_THRESHOLD:Wz,get RowPartitionType(){return yc},SELU_SCALE:UR,SELU_SCALEALPHA:FR,applyActivation:Mz,assertAndGetBroadcastShape:kn,assertAxesAreInnerMostDims:Ds,assertParamsConsistent:zz,assignToTypedArray:mue,axesAreInnerMostDims:iz,calculateShapes:cg,checkEinsumDimSizes:t8,checkPadOnDimRoundingMode:Zo,combineLocations:bce,combineRaggedTensorToTensorShapes:lue,complexWithEvenIndex:hue,complexWithOddIndex:pue,computeConv2DInfo:$s,computeConv3DInfo:Nh,computeDefaultPad:Z6,computeDilation2DInfo:bS,computeOptimalWindowSize:OR,computeOutAndReduceShapes:xs,computeOutShape:Ru,computePool2DInfo:Jl,computePool3DInfo:Jd,convertConv2DDataFormat:Qd,decodeEinsumEquation:Qz,eitherStridesOrDilationsAreOne:Zs,expandShapeToKeepDim:Wi,exponent:vue,exponents:gue,fromStringArrayToUint8:Rue,fromUint8ToStringArray:Xd,getAxesPermutation:ui,getBroadcastDims:Bv,getComplexWithIndex:Jz,getEinsumComputePath:n8,getEinsumPermutation:e8,getFusedBiasGradient:Ez,getFusedDyActivation:Tz,getImageCenter:Vz,getInnerMostAxes:Ii,getPermuted:ES,getRaggedRank:uue,getReductionAxes:rs,getReshaped:TS,getReshapedPermuted:MS,getRowPartitionTypesHelper:cue,getSliceBeginCoords:Gz,getSliceSize:Hz,getSparseFillEmptyRowsIndicesDenseShapeMismatch:yue,getSparseFillEmptyRowsNegativeIndexErrorMessage:xue,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:bue,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:_ue,getSparseReshapeInputOutputMismatchErrorMessage:Tue,getSparseReshapeInputOutputMultipleErrorMessage:Cue,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:wue,getSparseReshapeNegativeOutputDimErrorMessage:Sue,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:kue,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:t4,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:Eue,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:Mue,getUndoAxesPermutation:Ph,isIdentityPermutation:r8,log:_nt,mergeRealAndImagArrays:jd,prepareAndValidate:Dz,prepareSplitSize:i8,segment_util:ict,shouldFuse:kz,slice_util:Qlt,splitRealAndImagArrays:fue,stridesOrDilationsArePositive:$m,tupleValuesAreOne:Pm,upcastType:_a,validateDefaultValueShape:due,validateInput:Iat,validateUpdateShape:Uce,warn:ja},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Wlt();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nue={kernelName:II,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,CS(Ut(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oct={kernelName:_2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Xr(Ut(n,"float32")),i=Co(xn(vr(1),r));return ki(mn(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const act={kernelName:C2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Co(xn(Xr(Ut(n,"float32")),1));return mn(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lct={kernelName:Ey,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{let a=t;const l=rs(n.shape,i);return l.length>0&&(a=un(a,l)),Ve(a,n.shape)},b:()=>{let a=t;const l=rs(r.shape,i);return l.length>0&&(a=un(a,l)),Ve(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cct={kernelName:o6,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uct={kernelName:RI,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>rr(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dct={kernelName:NI,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>rr(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fct={kernelName:T2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mn(t,Co(xn(vr(1),Xr(Ut(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hct={kernelName:E2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Co(wt(vr(1),Xr(Ut(n,"float32"))));return mn(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pct={kernelName:A2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{const a=wt(Xr(n),Xr(r));let l=Oe(t,mn(r,a));const c=rs(n.shape,i);return c.length>0&&(l=un(l,c)),Ve(l,n.shape)},b:()=>{const a=wt(Xr(n),Xr(r));let l=ki(Oe(t,mn(n,a)));const c=rs(r.shape,i);return c.length>0&&(l=un(l,c)),Ve(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mct={kernelName:M2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mn(t,wt(Xr(Ut(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gct={kernelName:k2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mn(t,xn(vr(1),Xr(Ut(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vct(t,e,n,r,i,s){const o=Ae(t,"dy","avgPool3dGrad"),a=Ae(e,"input","avgPool3dGrad");let l=o,c=a,u=!1;a.rank===4&&(u=!0,l=Ve(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=Ve(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),ue(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),ue(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Zo("avgPool3dGrad",i,s);const d={dy:l,input:c},f={filterSize:n,strides:r,pad:i,dimRoundingMode:s},h=Fe.runKernel(u6,d,f);return u?Ve(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const yct=Ge({avgPool3dGrad_:vct});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xct={kernelName:$I,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:a}=n;return{x:()=>yct(t,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bct(t,e,n,r,i){const s=Ae(t,"dy","avgPoolGrad"),o=Ae(e,"input","avgPoolGrad");ue(o.rank===s.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${s.rank})`);let a=o,l=s,c=!1;o.rank===3&&(c=!0,a=Ve(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=Ve(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ue(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),ue(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},d={filterSize:n,strides:r,pad:i},f=Fe.runKernel(c6,u,d);return c?Ve(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const wct=Ge({avgPoolGrad_:bct});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sct={kernelName:PI,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o}=n;return{x:()=>wct(t,r,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ct={kernelName:DI,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:s,transposeB:o}=n;return!s&&!o?{a:()=>gr(t,i,!1,!0),b:()=>gr(r,t,!0,!1)}:!s&&o?{a:()=>gr(t,i,!1,!1),b:()=>gr(t,r,!0,!1)}:s&&!o?{a:()=>gr(i,t,!1,!0),b:()=>gr(r,t,!1,!1)}:{a:()=>gr(i,t,!0,!0),b:()=>gr(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cct={kernelName:LI,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>fz(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tct={kernelName:xnt,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,s=r.shape,o=Array.from(s);for(let l=i.length-1;l>=0;l--)if(i[l]===s[l])o[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>un(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ect={kernelName:I2,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mct={kernelName:R2,gradFunc:t=>({x:()=>rr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kct={kernelName:N2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>So(Gd(og(r,i),ky(r,s)),t,rr(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Act={kernelName:OI,inputsToSave:["x"],gradFunc:Nue.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ict={kernelName:FI,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,s=Wn(i,e[0].shape)[0],o=r.map(l=>l[s]);return el(t,o,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rct={kernelName:UI,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:s,strides:o,pad:a,dataFormat:l}=n;return ue(Pm(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>tz(r.shape,t,i,o,a,l),filter:()=>Cz(r,t,i.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nct={kernelName:BI,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:s,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Dm(t,i,s,o,a,1,l),filter:()=>Cz(t,r,i.shape,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pct(t,e,n,r,i){let s=t;t.rank===4&&(s=Ve(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=Ve(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),ue(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),ue(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),ue(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),ue(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),ue(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:s,dy:o},l={strides:r,pad:i,filterShape:n};return Fe.runKernel(m6,a,l)}const $ct=Ge({conv3DBackpropFilter_:Pct});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dct={kernelName:zI,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s}=n;ue(Pm(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>vce(o.shape,t,a,i,s),filter:()=>$ct(o,t,a.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lct={kernelName:P2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(ki(Dce(Ut(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oct={kernelName:$2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(Lce(Ut(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fct={kernelName:WI,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:s,reverse:o}=n;return{x:()=>{const a=ui([i],r.rank);let l=xce(t,i,s,!o);return a!=null&&(l=tr(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uct={kernelName:VI,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:o}=n,a=r??[1,1];ue(Pm(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return ue(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),ue(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),ue(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),ue(Zs(i,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${a}'.`),Zo("depthwiseConv2d",s,o),{x:()=>Yat(l.shape,t,c,i,s,a,o),filter:()=>Xat(l,t,c.shape,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bct={kernelName:GI,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,s={x:r,filter:i,dy:t},o={x:r,filter:i,dy:t};return{x:()=>Fe.runKernel(OO,s,n),filter:()=>Fe.runKernel(FO,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zct={kernelName:L2,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>Fe.runKernel(C6,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wct={kernelName:O2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Oe(Vu(ki(Xr(n))),2/Math.sqrt(Math.PI));return{x:()=>Oe(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vct={kernelName:F2,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gct={kernelName:jI,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>Ve(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hct={kernelName:U2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,Vu(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jct={kernelName:B2,gradFunc:t=>({x:()=>rr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xct={kernelName:z2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{const a=mn(t,Ut(r,"float32")),l=rs(n.shape,i);return l.length>0?Ve(un(a,l),n.shape):a},b:()=>{let a=Oe(t,Ut(n,"float32"));const l=rs(r.shape,i);l.length>0&&(a=Ve(un(a,l),r.shape));const c=Xr(r);return ki(mn(a,Ut(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qct={kernelName:XI,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,s,o,a]=e,l=a??vr(1),c=rs(s.shape,i.shape),u=[];if(s.rank===1){for(let S=0;S<i.shape.length-1;++S)u.push(i.shape[S]);u.push(1)}const d=xn(i,s),f=Oe(t,l),h=Nce(wt(o,vr(r))),p=Oe(Oe(Oe(h,h),h),vr(-.5));return{x:()=>s.rank===1?Ve(Oe(Oe(t,Tc(Ve(h,[1,1,1,s.shape[0]]),u)),l),i.shape):Ve(Oe(Oe(t,h),l),i.shape),mean:()=>{let S=Oe(Oe(h,vr(-1)),f);return s.rank===1&&(S=un(S,c)),Ve(S,s.shape)},variance:()=>{let S=Oe(Oe(p,d),f);return s.rank===1&&(S=un(S,c)),Ve(S,s.shape)},scale:()=>{const S=Oe(d,h);let _=Oe(t,S);return s.rank===1&&(_=un(_,c)),Ve(_,s.shape)},offset:()=>{let S=t;return s.rank===1&&(S=un(S,c)),Ve(S,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yct={kernelName:qI,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:s,batchDims:o}=n,a=Wn(s,r.shape)[0],l=(c,u,d)=>()=>{const f=c.shape,h=u.size,p=f.slice(0,a),v=p.length,m=f.slice(s,f.length).slice(1),g=m.length,y=EY(0,v),x=EY(v+1,v+1+g),S=MY([p,[h],m]),_=Ve(d,S),C=Ve(u,[h]),T=MY([[v],y,x]),A=tr(_,T);let k=zce(A,C,c.shape[a]);const M=Ph(T);return k=tr(k,M),k};if(o===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>Hd(u.map((h,p)=>l(h,i.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,t),indices:()=>i}}};function EY(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function MY(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kct={kernelName:W2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>rr(n),b:()=>rr(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zct={kernelName:V2,gradFunc:t=>({x:()=>Ut(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jct={kernelName:G2,gradFunc:t=>({x:()=>rr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qct={kernelName:H2,gradFunc:t=>({x:()=>rr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eut={kernelName:j2,gradFunc:t=>({x:()=>rr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tut={kernelName:KI,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,s=al(r,0);return{x:()=>So(s,t,Oe(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nut={kernelName:q2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mn(t,wt(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rut={kernelName:X2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mn(t,Ut(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iut={kernelName:wnt,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const o=Vu(r);return xn(t,Oe(un(t,i,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sut(t,e,n,r=5,i=1,s=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:s,beta:o};return Fe.runKernel(I6,a,l)}const out=Ge({localResponseNormalizationBackprop_:sut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aut={kernelName:nR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:s,bias:o,alpha:a,beta:l}=n;return{x:()=>out(r,i,t,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pue(t,e,n,r){return e.rank<n.rank&&(e=Ve(e,Wi(e.shape,r))),t.rank<n.rank&&(t=Ve(t,Wi(t.shape,r))),{x:()=>Oe(t,Ut(Wu(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kY={kernelName:rR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,s=e[0],o=e[1],a=Wn(i,s.shape),l=Pue(t,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lut={kernelName:Y2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Oe(t,Ut(og(n,r),"float32")),b:()=>Oe(t,Ut(LM(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cut(t,e,n,r,i,s,o){const a=Ae(t,"dy","maxPool3dGrad"),l=Ae(e,"input","maxPool3dGrad"),c=Ae(n,"output","maxPool3dGrad");let u=a,d=l,f=c,h=!1;l.rank===4&&(h=!0,u=Ve(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=Ve(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=Ve(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),ue(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),ue(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),ue(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),Zo("maxPool3dGrad",s,o);const p={dy:u,input:d,output:f},v={filterSize:r,strides:i,pad:s,dimRoundingMode:o},m=Fe.runKernel(N6,p,v);return h?Ve(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const uut=Ge({maxPool3dGrad_:cut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dut={kernelName:sR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>uut(t,r,i,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fut(t,e,n,r,i,s,o){const a=Ae(t,"dy","maxPoolGrad"),l=Ae(e,"input","maxPoolGrad"),c=Ae(n,"output","maxPoolGrad");ue(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),ue(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),ue(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Zo("maxPoolGrad",s,o);const u={dy:a,input:l,output:c},d={filterSize:r,strides:i,pad:s,dimRoundingMode:o};return Fe.runKernel(R6,u,d)}const hut=Ge({maxPoolGrad_:fut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const put={kernelName:iR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a}=n;return{x:()=>hut(t,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mut={kernelName:oR,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,s=Wn(i,r.shape),a=xs(r.shape,s)[1],l=it(a);return{x:()=>{const u=r.shape.slice();s.forEach(h=>{u[h]=1});const d=Ve(t,u);return mn(Oe(d,Dh(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gut={kernelName:aR,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[s,o]=e,a=Wn(i,s.shape),l=Pue(t,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vut={kernelName:K2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Oe(t,Ut(ky(n,r),"float32")),b:()=>Oe(t,Ut(al(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yut={kernelName:lR,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>Fr(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xut={kernelName:Z2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{const a=rs(n.shape,i);return a.length>0?Ve(un(t,a),n.shape):t},b:()=>{const a=Oe(t,ki(DR(mn(n,r)))),l=rs(r.shape,i);return l.length>0?Ve(un(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const but={kernelName:J2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{const a=Oe(t,Ut(r,"float32")),l=rs(n.shape,i);return l.length>0?Ve(un(a,l),n.shape):a},b:()=>{const a=Oe(t,Ut(n,"float32")),l=rs(r.shape,i);return l.length>0?Ve(un(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wut={kernelName:cR,gradFunc:t=>({x:()=>ki(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sut={kernelName:fR,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>fs(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ut={kernelName:dR,gradFunc:t=>({x:()=>rr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cut={kernelName:hR,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Om(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AY={kernelName:pR,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>Fr(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tut={kernelName:Q2,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,s=n,o=r,a=kn(s.shape,o.shape);return{a:()=>{const u=Ut(o,"float32");let d=Oe(t,Oe(u,zv(s,xn(u,vr(1)))));const f=rs(s.shape,a);return f.length>0&&(d=un(d,f)),Ve(d,s.shape)},b:()=>{const u=al(s,0),d=So(u,Gu(s),rr(s));let f=Oe(t,Oe(i,d));const h=rs(o.shape,a);return h.length>0&&(f=un(f,h)),Ve(f,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eut={kernelName:mR,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=al(n,0);return{x:()=>So(i,t,Oe(t,r)),alpha:()=>{let s=So(i,rr(t),Oe(t,n));const o=rs(r.shape,t.shape);return o.length>0&&(s=un(s,o)),Ve(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mut(t,e,n){const r=t.shape.slice();r[n]=1;const i=Ve(e,r),s=JO(t,n,!0,!1),o=JO(t,n,!0,!0),a=Oe(s,o);return Oe(i,a)}function kut(t,e,n){const r=t.shape.length,i=r-n.length,s=ui(n,r);let o=t;s!=null&&(o=tr(t,s));const a=o.shape.slice(),c=a.splice(r-n.length,n.length).reduce((f,h)=>f*h,1);a.push(c);const u=o.reshape(a);let d=Mut(u,e,i);if(d=d.reshape(o.shape),s!=null){const f=Ph(s);d=tr(d,f)}return d}const Aut={kernelName:gR,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let s=[];return i==null?s=r.shape.map((o,a)=>a):typeof i=="number"?s=[i]:s=i,{x:()=>kut(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iut={kernelName:D2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{const a=mn(t,Ut(r,"float32")),l=rs(n.shape,i);return l.length>0?Ve(un(a,l),n.shape):a},b:()=>{let a=Oe(t,Ut(n,"float32"));const l=rs(r.shape,i);l.length>0&&(a=Ve(un(a,l),r.shape));const c=Xr(r);return ki(mn(a,Ut(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rut={kernelName:eS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mn(t,ki(Xr(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nut={kernelName:nS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Oe(ky(n,6),CS(n));return{x:()=>Oe(t,Ut(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Put={kernelName:tS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,Ut(CS(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ut={kernelName:vR,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ve(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dut={kernelName:xR,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>Fe.runKernel(U6,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lut={kernelName:yR,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>Fe.runKernel(F6,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Out={kernelName:bR,gradFunc:(t,e,n)=>{const{dims:r}=n,i=Wn(r,t.shape);return{x:()=>Lm(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fut={kernelName:rS,gradFunc:t=>({x:()=>rr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uut={kernelName:iS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ki(mn(t,Oe(zv(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const But={kernelName:wR,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Ut(rr(n),"float32"),t:()=>Oe(t,Ut(n,t.dtype)),e:()=>Oe(t,Ut(lz(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zut={kernelName:sS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=al(n,vr(0)),i=vr(FR),s=vr(UR),o=Oe(t,s),a=Oe(Oe(t,i),Vu(Ut(n,"float32")));return So(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wut={kernelName:cS,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,Oe(n,xn(vr(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vut={kernelName:lS,gradFunc:t=>({x:()=>rr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gut={kernelName:oS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(nz(Ut(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hut={kernelName:aS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(yce(Ut(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jut={kernelName:SR,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:s}=n,o=r.shape,[a,l]=LR(r,i,s),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],o[u]-a[u]-l[u]]);return{x:()=>dz(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xut={kernelName:ER,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,s=!0,o=Oe(t,r);return{logits:()=>xn(o,Oe(un(o,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qut={kernelName:uS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,My(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IY={kernelName:CR,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>ez(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RY={kernelName:TR,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Go(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yut={kernelName:dS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mn(t,Oe(Co(Ut(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kut={kernelName:B6,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,Oe(Ut(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zut={kernelName:fS,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=vr(2);return{a:()=>Oe(t,Oe(i,xn(n,r))),b:()=>Oe(t,Oe(i,xn(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jut={kernelName:vS,gradFunc:t=>({x:()=>rr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qut={kernelName:hS,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{let a=t;const l=rs(n.shape,i);return l.length>0&&(a=un(a,l)),Ve(a,n.shape)},b:()=>{let a=t;const l=rs(r.shape,i);return l.length>0&&(a=un(a,l)),Ve(ki(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const edt={kernelName:_R,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:s}=n;Wn(s,r.shape).forEach(c=>{i[c]=1});const a=Ve(t,i),l=Oe(a,Dh(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tdt={kernelName:pS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>mn(t,Xr(nz(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ndt={kernelName:mS,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(xn(vr(1),Xr(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rdt={kernelName:gS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let o=rr(r);if(r.rank===1)for(let a=0;a<i[0];++a)o=wt(o,Fr(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)o=wt(o,Fr(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)o=wt(o,Fr(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)for(let u=0;u<i[3];++u)o=wt(o,Fr(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const idt={kernelName:ov,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,s=Ph(i);return{x:()=>tr(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sdt={kernelName:MR,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>Hd(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const odt={kernelName:kR,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>adt(t,n)}}};function adt(t,e){const n=$h(e,rr(e)),r=sz(t,n);let i=og(e,vr(0,"int32"));const s=r.rank-i.rank;for(let a=0;a<s;++a)i=Fo(i,a+1);i=Gd(i,Dh(r.shape,"bool"));const o=rr(r);return So(i,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ldt={kernelName:AR,gradFunc:t=>({x:()=>rr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cdt=[Nue,oct,act,lct,cct,uct,dct,fct,hct,pct,mct,gct,xct,Sct,_ct,Cct,Tct,Ect,Mct,kct,Act,Ict,Nct,Rct,Dct,Lct,Oct,Fct,Uct,Bct,Iut,zct,Wct,Vct,Gct,Hct,Xct,jct,qct,Yct,Kct,Zct,Jct,Qct,eut,tut,nut,rut,iut,aut,kY,kY,lut,dut,put,mut,gut,vut,yut,xut,but,wut,Sut,_ut,Cut,AY,AY,Tut,Eut,Aut,Rut,Nut,Put,$ut,Dut,Lut,Out,Fut,Uut,But,zut,Wut,Vut,Gut,Hut,jut,Xut,qut,IY,IY,RY,RY,Yut,Zut,Kut,Jut,Qut,edt,tdt,ndt,rdt,idt,sdt,odt,ldt];for(const t of cdt)Cnt(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.abs=function(){return this.throwIfDisposed(),ho(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.acos=function(){return this.throwIfDisposed(),Ort(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.acosh=function(){return this.throwIfDisposed(),Urt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.add=function(t){return this.throwIfDisposed(),wt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.all=function(t,e){return this.throwIfDisposed(),pce(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.any=function(t,e){return this.throwIfDisposed(),KO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.argMax=function(t){return this.throwIfDisposed(),fw(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.argMin=function(t){return this.throwIfDisposed(),Grt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.asScalar=function(){return this.throwIfDisposed(),ue(this.size===1,()=>"The array must have only 1 element."),Ve(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.asType=function(t){return this.throwIfDisposed(),Ut(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.as1D=function(){return this.throwIfDisposed(),Ve(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.as2D=function(t,e){return this.throwIfDisposed(),Ve(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),Ve(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),Ve(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),Ve(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.asin=function(){return this.throwIfDisposed(),jrt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.asinh=function(){return this.throwIfDisposed(),qrt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.atan=function(){return this.throwIfDisposed(),Krt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.atan2=function(t){return this.throwIfDisposed(),Jrt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.atanh=function(){return this.throwIfDisposed(),eit(this)};rt().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),J6(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),ez(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),RR(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.broadcastTo=function(t){return this.throwIfDisposed(),z1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.cast=function(t){return this.throwIfDisposed(),Ut(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.ceil=function(){return this.throwIfDisposed(),Mit(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),rl(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Yi&&(t=[t]),Go([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.conv1d=function(t,e,n,r,i,s){return this.throwIfDisposed(),mce(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),gce(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.conv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),Dm(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.cos=function(){return this.throwIfDisposed(),nz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.cosh=function(){return this.throwIfDisposed(),yce(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),JO(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),xce(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),Jit(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.depthwiseConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),rz(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),tst(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.divNoNan=function(t){return this.throwIfDisposed(),ost(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.div=function(t){return this.throwIfDisposed(),mn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.dot=function(t){return this.throwIfDisposed(),lst(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.elu=function(){return this.throwIfDisposed(),PR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.equal=function(t){return this.throwIfDisposed(),Wu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.erf=function(){return this.throwIfDisposed(),fst(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),wst(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.exp=function(){return this.throwIfDisposed(),Vu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.expandDims=function(t){return this.throwIfDisposed(),Fo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.expm1=function(){return this.throwIfDisposed(),Tst(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.fft=function(){return this.throwIfDisposed(),Fce(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.flatten=function(){return this.throwIfDisposed(),Ve(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.floor=function(){return this.throwIfDisposed(),DR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.floorDiv=function(t){return this.throwIfDisposed(),hce(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.gather=function(t,e,n){return this.throwIfDisposed(),sz(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.greaterEqual=function(t){return this.throwIfDisposed(),og(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.greater=function(t){return this.throwIfDisposed(),al(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.ifft=function(){return this.throwIfDisposed(),QO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.irfft=function(){return this.throwIfDisposed(),gat(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.isFinite=function(){return this.throwIfDisposed(),$st(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.isInf=function(){return this.throwIfDisposed(),Lst(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.isNaN=function(){return this.throwIfDisposed(),Fst(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.leakyRelu=function(t){return this.throwIfDisposed(),az(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.lessEqual=function(t){return this.throwIfDisposed(),ky(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.less=function(t){return this.throwIfDisposed(),LM(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),Vst(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logSigmoid=function(){return this.throwIfDisposed(),Kst(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logSoftmax=function(t){return this.throwIfDisposed(),Cce(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),Tce(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.log=function(){return this.throwIfDisposed(),Gu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.log1p=function(){return this.throwIfDisposed(),_ce(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Gd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logicalNot=function(){return this.throwIfDisposed(),lz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logicalOr=function(t){return this.throwIfDisposed(),Ece(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logicalXor=function(t){return this.throwIfDisposed(),iot(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),gr(this,t,e,n)};rt().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),cz(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.max=function(t,e){return this.throwIfDisposed(),Rc(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.maximum=function(t){return this.throwIfDisposed(),$h(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.mean=function(t,e){return this.throwIfDisposed(),Bi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.min=function(t,e){return this.throwIfDisposed(),DM(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.minimum=function(t){return this.throwIfDisposed(),mw(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),fot(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.mod=function(t){return this.throwIfDisposed(),pot(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.mul=function(t){return this.throwIfDisposed(),Oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.neg=function(){return this.throwIfDisposed(),ki(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.norm=function(t,e,n){return this.throwIfDisposed(),$R(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.notEqual=function(t){return this.throwIfDisposed(),OM(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),Mce(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.onesLike=function(){return this.throwIfDisposed(),ql(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.pad=function(t,e){return this.throwIfDisposed(),dz(this,t,e)};rt().prototype.pool=function(t,e,n,r,i,s){return this.throwIfDisposed(),Cot(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.pow=function(t){return this.throwIfDisposed(),zv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.prelu=function(t){return this.throwIfDisposed(),hz(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.prod=function(t,e){return this.throwIfDisposed(),Mot(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.reciprocal=function(){return this.throwIfDisposed(),Kot(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.relu=function(){return this.throwIfDisposed(),lg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.relu6=function(){return this.throwIfDisposed(),Ice(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Ve(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.reshape=function(t){return this.throwIfDisposed(),Ve(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),Vce(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),Gce(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.reverse=function(t){return this.throwIfDisposed(),Lm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.rfft=function(){return this.throwIfDisposed(),xat(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.round=function(){return this.throwIfDisposed(),Rce(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.rsqrt=function(){return this.throwIfDisposed(),Nce(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.selu=function(){return this.throwIfDisposed(),Pce(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.separableConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),$ce(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sigmoid=function(){return this.throwIfDisposed(),My(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sign=function(){return this.throwIfDisposed(),sat(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sin=function(){return this.throwIfDisposed(),Dce(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sinh=function(){return this.throwIfDisposed(),Lce(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.slice=function(t,e){return this.throwIfDisposed(),Fr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.softmax=function(t){return this.throwIfDisposed(),_z(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.softplus=function(){return this.throwIfDisposed(),wS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),fz(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.split=function(t,e){return this.throwIfDisposed(),el(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sqrt=function(){return this.throwIfDisposed(),Co(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.square=function(){return this.throwIfDisposed(),Xr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.squaredDifference=function(t){return this.throwIfDisposed(),wat(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.squeeze=function(t){return this.throwIfDisposed(),_S(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Yi?[this,t]:[this,...t];return Hd(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.step=function(t){return this.throwIfDisposed(),CS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.stridedSlice=function(t,e,n,r,i,s,o,a){return this.throwIfDisposed(),Eat(this,t,e,n,r,i,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sub=function(t){return this.throwIfDisposed(),xn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sum=function(t,e){return this.throwIfDisposed(),un(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.tan=function(){return this.throwIfDisposed(),kat(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.tanh=function(){return this.throwIfDisposed(),Q6(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.tile=function(t){return this.throwIfDisposed(),Tc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.toBool=function(){return this.throwIfDisposed(),Ut(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.toFloat=function(){return this.throwIfDisposed(),Ut(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.toInt=function(){return this.throwIfDisposed(),Ut(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.topk=function(t,e){return this.throwIfDisposed(),Nat(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.transpose=function(t){return this.throwIfDisposed(),tr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.unique=function(t){return this.throwIfDisposed(),Dat(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),zce(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.unstack=function(t){return this.throwIfDisposed(),Om(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.where=function(t,e){return this.throwIfDisposed(),So(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.zerosLike=function(){return this.throwIfDisposed(),rr(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class lu extends Error{constructor(e){super(e),Object.setPrototypeOf(this,lu.prototype)}}class $l extends Error{constructor(e){super(e),Object.setPrototypeOf(this,$l.prototype)}}class Ne extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ne.prototype)}}class Rn extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Rn.prototype)}}class o8 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,o8.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class $ue{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Fm(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function cu(t,e){if(!t)throw new o8(e)}function NY(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Uo(t){return t.length===1?t[0]:t}function _r(t){return Array.isArray(t)?t:[t]}function yd(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function kp(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let yl={};function a8(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function n4(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>n4(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:n4(r))}}}function kS(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const s=t;let o;if(s in n)o=n[s];else if(s in yl)o=yl[s];else if(o=e[s],o==null)throw new Ne(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const s=t;if(s.className==null||s.config==null)throw new Ne(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const o=s.className;let a,l;if(o in n?[a,l]=n[o]:o in yl?[a,l]=yl.className:o in e&&([a,l]=e[o]),a==null)throw new Ne(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const h of Object.keys(yl))c[h]=yl[h];for(const h of Object.keys(n))c[h]=n[h];const u=s.config;u.customObjects=c;const d=Object.assign({},yl);for(const h of Object.keys(n))yl[h]=n[h];n4(s.config);const f=l(a,s.config,n,i);return yl=Object.assign({},d),f}else{const c=Object.assign({},yl);for(const d of Object.keys(n))yl[d]=n[d];const u=new a(s.config);return yl=Object.assign({},c),u}}}function udt(t,e){return t<e?-1:t>e?1:0}function mT(t,e){return-1*udt(t,e)}function Qf(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function ddt(t){if(t==null)throw new Ne(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function ug(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new Ne(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function l8(t,e,n=0,r=1/0){return cu(n>=0),cu(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function ps(t,e){Array.isArray(t)?(ue(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>ps(n,`element ${r+1} of ${e}`))):ue(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${Due(t)}.`)}function Due(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>Due(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function fdt(t,e,n){let r=n!=null?n():Oo(),i;return(...o)=>{const a=n!=null?n():Oo();return a-r<e||(r=a,i=t(...o)),i}}function Lue(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let hdt=0;function Oue(){return hdt++}const gT={};function BR(t=""){return t in gT||(gT[t]=0),gT[t]+=1,t+gT[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const pdt=["channelsFirst","channelsLast"],mdt=["nearest","bilinear"],gdt=["valid","same","causal"],vdt=["max","avg"],ydt=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const d0=new Map;function Ri(t){ug(pdt,"DataFormat",t)}function xdt(t){ug(mdt,"InterpolationFormat",t)}function ll(t){ug(gdt,"PaddingMode",t)}function Fue(t){ug(vdt,"PoolMode",t)}const W1=[],PY="/";function am(t,e){W1.push(t);try{const n=e();return W1.pop(),n}catch(n){throw W1.pop(),n}}function bdt(){return W1.length===0?"":W1.join(PY)+PY}function Uue(t){if(!zue(t))throw new Error("Not a valid tensor name: '"+t+"'");return bdt()+t}function Bue(t){if(!zue(t))throw new Error("Not a valid tensor name: '"+t+"'");d0.has(t)||d0.set(t,0);const e=d0.get(t);if(d0.set(t,d0.get(t)+1),e>0){const n=`${t}_${e}`;return d0.set(n,1),n}else return t}const wdt=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function zue(t){return!!t.match(wdt)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Sdt(t){return t===parseInt(t.toString(),10)}function eh(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function Vv(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function fh(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Lc(t,e){if(e<t)throw new Ne(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let S$;function Zi(){return S$==null&&(S$=Knt().epsilon()),S$}function Oc(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Nu(t,e){return Ut(t,e)}function AS(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),Ve(t,n)}function _dt(t,e){return Ze(()=>{if(t.shape.length!==2)throw new Ne(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=AS(t,1);return r4(n,[1,e,1])})}function Cdt(t){const e=[eh(t.shape)];return Ve(t,e)}function Tdt(t){if(t.rank<=1)throw new Ne(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],eh(t.shape,1)];return Ve(t,e)}function lm(t,e,n){return Ze(()=>{switch(t.rank){case 1:return wz(t,e,n);case 2:return Oce(t,[e,0],[n,t.shape[1]]);case 3:return Sz(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return UM(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Fr(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Fr(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Ne(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function _$(t,e,n){return Ze(()=>{switch(t.rank){case 1:return wz(t,e,n);case 2:return Oce(t,[0,e],[t.shape[0],n]);case 3:return Sz(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return UM(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Ne(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function vT(t,e,n,r){return Ze(()=>{switch(t.rank){case 1:return wz(t,e,n);case 2:switch(r){case 1:return lm(t,e,n);case 2:return _$(t,e,n);default:throw new Ne(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return lm(t,e,n);case 2:return Sz(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return _$(t,e,n);default:throw new Ne(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return lm(t,e,n);case 2:return UM(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return UM(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return _$(t,e,n);default:throw new Ne(`The axis is not within the rank of the tensor ${r}`)}default:throw new Ne(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function c8(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Go(t,e)}function $Y(t,e){switch(t.rank){case 1:return Iit([t,e]);case 2:return Nit([t,e],0);case 3:return $it([t,e],0);case 4:return Lit([t,e],0);default:throw new Ne(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function r4(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new Ne(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Tc(t,e)}function zR(t,e=0,n=1,r,i){return jot(t,e,n,r,i)}function Pu(t,e,n,r){if(t.rank<2||e.rank<2)throw new Rn(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(i!==s)throw new Rn(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return yY({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?i4(t.rank,r,Oc()):null,activation:n});{const i=t.shape.slice(),s=i.pop();t=Ve(t,[-1,s]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),c=[...o,a],u=Array.from({length:e.rank},(p,v)=>v===0?e.rank-2:v<=e.rank-2?v-1:v);e=Ve(tr(e,u),[l,-1]);const d=[...i,...c];return Ve(yY({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?i4(t.rank,r,Oc()):null,activation:n}),d)}}function Wue(t,e,n){return Ze(()=>(Array.isArray(e)?e=ma(e,"int32"):e=Ut(e,"int32"),sz(t,e,n)))}function IS(t){return Oe(t,t)}function i4(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new Ne(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?Ve(e,[1,r[0],1,1,1]):Ve(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?Ve(e,[1,1,1,1,r[0]]):Ve(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?Ve(e,[1,r[0],1,1]):Ve(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?Ve(e,[1,1,1,r[0]]):Ve(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?Ve(e,[1,r[0],1]):Ve(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?Ve(e,[1,1,r[0]]):Ve(e,[1].concat(r))}else if(t<3)return e;throw new Ne(`Unsupported input rank by biasAdd: ${e.rank}`)}function Gc(t,e,n){return Ze(()=>(n==null&&(n=Oc()),Ri(n),wt(t,i4(t.rank,e,n))))}function Edt(t,e=1){if(e!==1)throw new Rn(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return PR(t)}function Mdt(t){return Ze(()=>mn(t,wt(ho(t),1)))}function Vue(t,e,n,r){return Ze(()=>Wat(t,e,n,r))}function kdt(t){return Ze(()=>{const e=wt(.5,Oe(.2,t));return rl(e,0,1)})}function RS(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Adt=["fanIn","fanOut","fanAvg"],Idt=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Rdt(t){ug(Adt,"FanMode",t)}function Ndt(t){ug(Idt,"Distribution",t)}class Ql extends Iy{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Gue extends Ql{apply(e,n){return fs(e,n)}}Gue.className="Zeros";pt(Gue);class u8 extends Ql{apply(e,n){return Dh(e,n)}}u8.className="Ones";pt(u8);class Hue extends Ql{constructor(e){if(super(),typeof e!="object")throw new Ne(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new Ne(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Ze(()=>Oe(vr(this.value),Dh(e,n)))}getConfig(){return{value:this.value}}}Hue.className="Constant";pt(Hue);class jue extends Ql{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return SS(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}jue.className="RandomUniform";pt(jue);class Xue extends Ql{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Rn(`randomNormal does not support dType ${n}.`);return zR(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Xue.className="RandomNormal";pt(Xue);class que extends Ql{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Rn(`truncatedNormal does not support dType ${n}.`);return Bce(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}que.className="TruncatedNormal";pt(que);class Yue extends Ql{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Ze(()=>{if(e.length!==2||e[0]!==e[1])throw new Ne("Identity matrix initializer can only be used for 2D square matrices.");return Oe(this.gain,Sce(e[0]))})}getConfig(){return{gain:this.gain}}}Yue.className="Identity";pt(Yue);function Pdt(t,e="channelsLast"){let n,r;if(Ri(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=eh(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=eh(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=eh(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class Ca extends Ql{constructor(e){if(super(),e.scale<0)throw new Ne(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Rdt(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Ndt(this.distribution),this.seed=e.seed}apply(e,n){const r=Pdt(e),i=r[0],s=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,s):o/=Math.max(1,(i+s)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Rn(`${this.getClassName()} does not support dType ${n}.`);return Bce(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return SS(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ca.className="VarianceScaling";pt(Ca);class d8 extends Ca{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ca.className}}d8.className="GlorotUniform";pt(d8);class f8 extends Ca{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ca.className}}f8.className="GlorotNormal";pt(f8);class h8 extends Ca{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ca.className}}h8.className="HeNormal";pt(h8);class p8 extends Ca{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ca.className}}p8.className="HeUniform";pt(p8);class m8 extends Ca{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ca.className}}m8.className="LeCunNormal";pt(m8);class g8 extends Ca{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ca.className}}g8.className="LeCunUniform";pt(g8);class Kue extends Ql{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Ze(()=>{if(e.length<2)throw new Rn("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=it(e.slice(0,-1)),i=e[e.length-1],s=r*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const o=[Math.max(i,r),Math.min(i,r)],a=zR(o,0,1,n,this.seed),l=Flt.qr(a,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return c=Oe(c,d.sign()),r<i&&(c=c.transpose()),Oe(vr(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Kue.className="Orthogonal";pt(Kue);const DY={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function LY(t,e={}){return kS(t,kl.getMap().classNameMap,e,"initializer")}function li(t){return a8(t)}function ti(t){if(typeof t=="string"){const e=t in DY?DY[t]:t;if(e==="GlorotNormal")return new f8;if(e==="GlorotUniform")return new d8;if(e==="HeNormal")return new h8;if(e==="HeUniform")return new p8;if(e==="LeCunNormal")return new m8;if(e==="LeCunUniform")return new g8;{const n={};return n.className=e,n.config={},LY(n)}}else return t instanceof Ql?t:LY(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function s4(t){return Array.isArray(t)&&Array.isArray(t[0])}function BM(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function bn(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new Ne(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function lr(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new Ne(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zM(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const OY="Variable";class $dt{constructor(e,n="float32",r=OY,i=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=Oue(),r=r??OY,this.originalName=Uue(r),this.name=Bue(this.originalName),this.trainable_=i,this.constraint=s,this.val=Fat(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),Ddt(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function Ddt(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function o4(t){return t.map(e=>e.read())}function v8(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ji{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Hu{constructor(e,n,r,i,s,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=a,this.id=Oue(),o!=null&&(this.originalName=Uue(o),this.name=Bue(this.originalName)),this.rank=n.length}}let Ldt=0;class WR{constructor(e,n){this.callArgs=n,this.id=Ldt++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Odt=0;class Vn extends Iy{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Odt++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=yd(r)+"_"+BR(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new $l(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new Ne(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Uo(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Uo(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new lu(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new lu(`Layer ${this.name} is not connected, no input to return.`);return Uo(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new lu(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new lu(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Uo(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=_r(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=_r(this.inputSpec);if(n.length!==r.length)throw new Ne(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let i=0;i<n.length;i++){const s=n[i],o=r[i];if(o==null)continue;const a=s.rank;if(o.ndim!=null&&a!==o.ndim)throw new Ne(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new Ne(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new Ne(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&s.dtype!==o.dtype)throw new Ne(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${s.dtype}.`);if(o.axes){const l=s.shape;for(const c in o.axes){const u=Number(c),d=o.axes[c],f=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(f)===-1)throw new Ne(`Input ${i} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=s.shape[l];if(c!=null&&u!=null&&c!==u)throw new Ne(`Input ${i} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=_r(e),i=Bdt(e),s=zdt(e);if(i===s)throw new Ne("Arguments to apply() must be all SymbolicTensors or all Tensors");return am(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of _r(e))o.push(a.shape);this.build(Uo(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=_r(o),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(o=Uo(l),this.activityRegularizer!=null)throw new Rn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=Fdt(e),a=this.computeOutputShape(o);let l;const c=Udt(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new Hu(c,u,this,_r(e),n,this.name,d)):l=new Hu(c,a,this,_r(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new Rn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new lu(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new lu(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new $l(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return zM(this.weights)}build(e){this.built=!0}getWeights(e=!1){return o4(e?this.trainableWeights:this.weights)}setWeights(e){Ze(()=>{const n=this.weights;if(n.length!==e.length)throw new Ne(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=o4(n);for(let s=0;s<i.length;++s){const o=i[s],a=n[s],l=e[s];if(!br(o.shape,l.shape))throw new Ne(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}v8(r)})}addWeight(e,n,r,i,s,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new Ne(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():ti("zeros"));const c=i.apply(n,r),u=new $dt(c,r,e,o,a);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(u.read())),o==null&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=_r(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),s=_r(n),o=_r(i);if(s.length!==o.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=o[a]}addInboundNode(e,n,r,i,s,o,a=null){const l=_r(e);n=_r(n),r=_r(r),i=_r(i),s=BM(s),o=BM(o);const c=[],u=[],d=[];for(const f of l)c.push(f.sourceLayer),u.push(f.nodeIndex),d.push(f.tensorIndex);new WR({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:o},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Fdt(t){t=_r(t);const e=[];for(const n of t)e.push(n.shape);return Uo(e)}function Udt(t){return"float32"}function Zue(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const o=r.inputTensors[s],a=r.inboundLayers[s],l=r.nodeIndices[s],c=Zue(o,a,l);for(const u of c)i.indexOf(u)===-1&&i.push(u)}return i}}}function Bdt(t){let e=!0;for(const n of _r(t))if(!(n instanceof Hu)){e=!1;break}return e}function zdt(t){let e=!0;for(const n of _r(t))if(n instanceof Hu){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class NS extends Vn{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:BR("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new Ne("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new Ne("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new Ne("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new Hu(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new WR({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new Ne(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}NS.className="InputLayer";pt(NS);function Wdt(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new Ne("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new NS({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vdt(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Ut(e,t.dtype)}catch{throw new Ne(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Lf{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Lf)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=Vdt(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new Ne(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Hu){if(this.id2Value[e.id]==null)throw new Ne(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Ne(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof Hu){if(this.id2Value[e.id]==null)throw new Ne(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Ne(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&On(this.id2Mask)}}const WM=new $ue,VM=new $ue;function Gdt(t){WM!=null&&WM.setMaxEntries(t),VM!=null&&VM.setMaxEntries(t)}function o1(t,e,n,r){const i=n==null?!1:n.training,s=Array.isArray(t),o=s?t:[t],a=o.map(p=>p.name),l=[],c=e.names();for(const p of a)c.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const u=a.join(",")+"|"+e.names().sort().join(",");let d=WM.get(u),f;if(d==null){const p=Hdt(o,e);d=p.sorted,f=p.recipientCounts,WM.put(u,d),VM.put(u,f)}f={},i||Object.assign(f,VM.get(u));const h=new Lf(e);for(let p=0;p<d.length;++p){if(r!=null){const k=jO().numTensors;k>r.maxNumTensors&&(r.maxNumTensors=k),k<r.minNumTensors&&(r.minNumTensors=k)}const v=d[p],m=v.sourceLayer;if(m instanceof NS)continue;const g=[],y=[],x=[];let S=!1;for(const k of v.inputs){const M=h.getValue(k),R=h.getMask(k);g.push(M),y.push(R),R!=null&&(S=!0),i||(f[k.name]--,f[k.name]===0&&!e.hasKey(k)&&a.indexOf(k.name)===-1&&!M.isDisposed&&k.sourceLayer.stateful!==!0&&x.push(M))}S&&(n=n||{},n.mask=y[0]);const _=_r(m.apply(g,n));let C=null;m.supportsMasking&&(C=m.computeMask(g,y));const T=Xdt(v),A=Array.isArray(T)?T:[T];for(let k=0;k<A.length;++k){h.hasKey(A[k])||h.add(A[k],_[k],Array.isArray(C)?C[0]:C);const M=a.indexOf(A[k].name);M!==-1&&(l[M]=_[k])}i||On(x)}return h.disposeMasks(),s?l:l[0]}function Hdt(t,e){ue(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=FY(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of t){const{sorted:o,recipientMap:a}=FY(s,e);for(const l of o)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:jdt(r)}}function jdt(t){const e={};for(const n in t)e[n]=t[n].size;return e}function FY(t,e){const n=new Set,r=[],i={};for(const a of e.names())n.add(a);const s=[],o=[];for(s.push(t);s.length>0;){const a=s[s.length-1];if(n.has(a.name)){s.pop();continue}const l=o[o.length-1]===s.length-1;if(a.inputs.length===0||l)s.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(s.length-1);for(const c of a.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(a.name),!n.has(c.name)&&s.push(c)}}return{sorted:r,recipientMap:i}}function Xdt(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qdt=Qe();qdt.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,Gdt);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function y8(t,e){return Ze(()=>Co(un(Oe(t,t),e,!0)))}class PS extends Iy{getConfig(){return{}}}class Jue extends PS{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ze(()=>{const n=y8(e,this.axis),r=rl(n,0,this.maxValue);return Oe(e,mn(r,wt(Zi(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Jue.className="MaxNorm";pt(Jue);class Que extends PS{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ze(()=>mn(e,wt(Zi(),y8(e,this.axis))))}getConfig(){return{axis:this.axis}}}Que.className="UnitNorm";pt(Que);class ede extends PS{apply(e){return lg(e)}}ede.className="NonNeg";pt(ede);class tde extends PS{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ze(()=>{const n=y8(e,this.axis),r=wt(Oe(this.rate,rl(n,this.minValue,this.maxValue)),Oe(1-this.rate,n));return Oe(e,mn(r,wt(Zi(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}tde.className="MinMaxNorm";pt(tde);const UY={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function es(t){return a8(t)}function BY(t,e={}){return kS(t,kl.getMap().classNameMap,e,"constraint")}function ts(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in UY?UY[t]:t,config:{}};return BY(n)}else return t instanceof PS?t:BY(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function hp(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const s=t[i];if(typeof s!="number"){const o=s;e.push(o.data()),n.push(i),r.push(o)}}if(e.length>0){const i=await Promise.all(e);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];On(r)}}function nde(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var zY;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(zY||(zY={}));const Ydt=125;class vw{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class Kdt{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class Zdt extends vw{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const a=Ze(()=>wt(this.totals[i],Oe(s,r)));this.totals[i]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Ze(()=>{const i=Oe(mn(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),Iu(n[r])}))}}class Jdt extends vw{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const o=this.history[s];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(s),r.push(a)}}const i=await Promise.all(e);for(let s=0;s<i.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=i[s][0]}}class Qdt extends vw{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||aue,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Ydt),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");$O(this.yieldEvery)&&(this.maybeWait=fdt(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await hp(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await hp(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await hp(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await hp(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await hp(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):$O(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await hp(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await hp(e),await this.trainEnd(e))}}function rde(t,e){return t==null&&(t={}),t instanceof vw?[t]:Array.isArray(t)&&t[0]instanceof vw?t:_r(t).map(r=>new Qdt(r,e))}class bl{constructor(){}static registerCallbackConstructor(e,n){ue(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),bl.checkForDuplicate(n),bl.constructors[e]==null&&(bl.constructors[e]=[]),bl.constructors[e].push(n)}static checkForDuplicate(e){for(const n in bl.constructors)bl.constructors[+n].forEach(i=>{if(i===e)throw new Ne("Duplicate callback constructor.")})}static clear(){bl.constructors={}}static createCallbacks(e){const n=[];for(const r in bl.constructors){const i=+r;e>=i&&n.push(...bl.constructors[i])}return n.map(r=>new r)}}bl.constructors={};function ide(t,e,n,r,i,s,o,a,l){const c=new Jdt,u=[new Zdt,...bl.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const d=new Kdt(u);return d.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $u(t,e={},n=!1){return kS(t,kl.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function GM(t,e){return Ze(()=>{t.dtype!=="float32"&&(t=Ut(t,"float32"));const n=un(IS(t),e,!0),r=NR(n.shape,Zi()),i=Co($h(n,r));return mn(t,i)})}function VR(t,e){return Ze(()=>Bi(IS(xn(e,t)),-1))}function x8(t,e){return Ze(()=>Bi(ho(xn(e,t)),-1))}function b8(t,e){return Ze(()=>{const n=xn(t,e),r=rl(ho(t),Zi(),Number.MAX_VALUE),i=ho(mn(n,r));return Oe(100,Bi(i,-1))})}function eft(t,e){return Ze(()=>{const n=rl(e,Zi(),Number.MAX_VALUE),r=Gu(wt(1,n)),i=rl(t,Zi(),Number.MAX_VALUE),s=Gu(wt(1,i));return Bi(IS(xn(r,s)),-1)})}function tft(t,e){return Ze(()=>{const n=$h(0,xn(1,Oe(t,e)));return Bi(IS(n),-1)})}function nft(t,e){return Ze(()=>{const n=$h(0,xn(1,Oe(t,e)));return Bi(n,-1)})}function rft(t,e){return Ze(()=>{const n=un(Oe(t,e),-1),r=Rc(Oe(xn(1,t),e),-1);return $h(0,wt(1,xn(r,n)))})}function ift(t,e){return Ze(()=>{const n=Math.log(2),r=xn(e,t),i=xn(wt(r,wS(Oe(-2,r))),n);return Bi(i,-1)})}function yw(t,e,n=!1){return Ze(()=>{if(n)e=_z(e);else{const r=un(e,e.shape.length-1,!0);e=mn(e,r)}return e=rl(e,Zi(),1-Zi()),ki(un(Oe(Ut(t,"float32"),Gu(e)),e.shape.length-1))})}function HM(t,e,n=!1){return Ze(()=>{const r=Ut(DR(Cdt(t)),"int32");e=rl(e,Zi(),1-Zi());const i=e.shape,s=Ve(Mce(r,i[i.length-1]),i);return yw(s,e,n)})}function sft(t,e){if(!br(t.shape,e.shape))throw new Ne(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Ze(()=>{const n=lg(e),r=ki(ho(e));return wt(xn(n,Oe(e,t)),_ce(Vu(r)))})}function GR(t,e){return Ze(()=>{let n;return n=rl(e,Zi(),1-Zi()),n=Gu(mn(n,xn(1,n))),Bi(sft(t,n),-1)})}function oft(t,e){return Ze(()=>{const n=rl(t,Zi(),1),r=rl(e,Zi(),1);return un(Oe(t,Gu(mn(n,r))),-1)})}function aft(t,e){return Ze(()=>{const n=Gu(wt(Zi(),e));return Bi(xn(e,Oe(t,n)),-1)})}function sde(t,e){return Ze(()=>{const n=GM(t,-1),r=GM(e,-1),i=Oe(n,r);return ki(un(i,-1))})}const jM={meanSquaredError:VR,meanAbsoluteError:x8,meanAbsolutePercentageError:b8,meanSquaredLogarithmicError:eft,squaredHinge:tft,hinge:nft,categoricalHinge:rft,logcosh:ift,categoricalCrossentropy:yw,sparseCategoricalCrossentropy:HM,binaryCrossentropy:GR,kullbackLeiblerDivergence:oft,poisson:aft,cosineProximity:sde};function C$(t){if(typeof t=="string"){if(t in jM)return jM[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Ne(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ode(t,e){return Ze(()=>{const n=Oe(.5,ql(e)),r=Nu(al(e,n),t.dtype);return Bi(Wu(t,r),-1)})}function ade(t,e){return Ze(()=>Nu(Wu(fw(t,-1),fw(e,-1)),"float32"))}function lft(t,e){return Ze(()=>Ut(un(Gd(Wu(t,1),Wu(e,1))),"float32"))}function cft(t,e){return Ze(()=>Ut(un(Gd(Wu(t,0),Wu(e,1))),"float32"))}function uft(t,e){return Ze(()=>{const n=lft(t,e),r=cft(t,e),i=wt(n,r);return Ut(So(al(i,0),mn(n,i),0),"float32")})}function dft(t,e){return GR(t,e)}function fft(t,e){return t.rank===e.rank&&(t=_S(t,[t.rank-1])),e=fw(e,-1),e.dtype!==t.dtype&&(e=Ut(e,t.dtype)),Ut(Wu(t,e),"float32")}const hft=VR,pft=VR,mft=x8,gft=x8,vft=b8,yft=b8,lde=yw,xft=sde,cde=HM,XM={binaryAccuracy:ode,categoricalAccuracy:ade,precision:uft,categoricalCrossentropy:lde,sparseCategoricalCrossentropy:cde,mse:hft,MSE:pft,mae:mft,MAE:gft,mape:vft,MAPE:yft,cosine:xft};function bft(t){if(typeof t=="string"&&t in XM)return XM[t];if(typeof t!="string"&&t!=null)return t;throw new Ne(`Unknown metric ${t}`)}function yT(t){if(cu(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(jM))if(jM[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(XM))if(XM[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wft(t){const e={Adagrad:()=>u0.adagrad(.01),Adadelta:()=>u0.adadelta(1,.95,Zi()),Adam:()=>u0.adam(.001,.9,.999,Zi()),Adamax:()=>u0.adamax(.002,.9,.999,Zi(),0),RMSProp:()=>u0.rmsprop(.001,.9,0,Zi()),SGD:()=>u0.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new Ne(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const WY=1*1024*1024;function VY(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!a4(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>WY&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${WY}.`)}}function a4(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!a4(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!a4(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Sft(t,e,n,r=console.log){const i=Cft(t),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let o;if(!i){s.push("Receives inputs"),o=[];for(const u in t.nodesByDepth)o.push(...t.nodesByDepth[u])}r("_".repeat(e)),qM(s,n,r),r("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)i?Tft(a[u],n,r):Eft(a[u],n,o,r),r((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=_ft(t),c=zM(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function _ft(t){let e;return t.collectedTrainableWeights!=null?e=zM(t.collectedTrainableWeights):e=zM(t.trainableWeights),e}function Cft(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let s=!1;for(const o of i.inboundNodes)if(r.indexOf(o)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function qM(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function Tft(t,e,n){let r,i;try{i=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,o=t.getClassName(),a=[`${s} (${o})`,i,r,t.countParams().toString()];qM(a,e,n)}function Eft(t,e,n,r){let i,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const o=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let f=0;f<d.inboundLayers.length;++f){const h=d.inboundLayers[f].name,p=d.nodeIndices[f],v=d.tensorIndices[f];o.push(`${h}[${p}][${v}]`)}const a=t.name,l=t.getClassName(),c=o.length===0?"":o[0],u=[`${a} (${l})`,s,i,t.countParams().toString(),c];qM(u,e,r);for(let d=1;d<o.length;++d)qM(["","","","",o[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ude(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function YM(t,e){if(t===null)return null;if(typeof t=="string")return kp(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];ude(e,i,s)?n.push(s):n.push(YM(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const s=kp(r);n[s]=YM(i,s)}}return n}}function l4(t,e){if(t==null)return null;if(typeof t=="string")return yd(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];ude(e,i,s)?n.push(s):n.push(l4(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],s=yd(r);(r==="name"||r==="className")&&typeof i=="string"?n[s]=i:n[s]=l4(i,r)}return n}}/** @license See the LICENSE file. */const dde="4.15.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Mft=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class uc extends Vn{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const y=this.getClassName().toLowerCase();this.name=BR(y)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Qf(this.inputs).length!==this.inputs.length)throw new Ne(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(y=>y.name)}`);Qf(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(y=>y.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const x=y.sourceLayer,S=y.nodeIndex,_=y.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(S),this.outputLayersTensorIndices.push(_)}for(const y of this.inputs){const x=y.sourceLayer,S=y.nodeIndex,_=y.tensorIndex;cu(S===0,"input layer has >1 nodes"),cu(_===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(S),this.inputLayersTensorIndices.push(_)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const x=this.inputLayers[y];if(!(x instanceof NS))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${y} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(y=>y.shape),this.internalOutputShapes=this.outputs.map(y=>y.shape);const n={},r={},i={},s={},o={},a=[],l=(y,x,S,_,C,T)=>{(_==null||C==null||T==null)&&(_=y.sourceLayer,C=y.nodeIndex,T=y.tensorIndex);const A=_.inboundNodes[C];if(S.indexOf(A)!==-1)throw new $l(`The tensor ${y.name} at layer "${_.name}" is part of a cycle.`);if(x.indexOf(A)!==-1)return;this.containerNodes.add(uc.nodeKey(_,C)),_.id in o||(o[_.id]=Object.keys(o).length),S.indexOf(A)===-1&&S.push(A);const k=A.inboundLayers.length;for(let M=0;M<k;M++){const R=A.inputTensors[M],P=A.inboundLayers[M],O=A.nodeIndices[M],$=A.tensorIndices[M];l(R,x,S,P,O,$)}for(x.push(A);S.indexOf(A)>=0;)S.splice(S.indexOf(A),1);a.push(A)},c=[],u=[];for(const y of this.outputs)l(y,c,u);const d=a.slice().reverse();for(const y of d){r[y.id]=y,y.id in n||(n[y.id]=0);let x=n[y.id];const S=i[y.outboundLayer.id]==null?0:i[y.outboundLayer.id];x=Math.max(x,S),i[y.outboundLayer.id]=x,s[y.outboundLayer.id]=y.outboundLayer,n[y.id]=x;for(let _=0;_<y.inboundLayers.length;_++){const C=y.inboundLayers[_],T=y.nodeIndices[_],A=C.inboundNodes[T],k=n[A.id]==null?0:n[A.id];n[A.id]=Math.max(x+1,k),r[A.id]=A}}const f={};for(const y in n){const x=n[y];x in f||(f[x]=[]),f[x].push(r[y])}const h={};for(const y in i){const x=i[y];x in h||(h[x]=[]),h[x].push(s[y])}let p=Object.keys(h).map(y=>parseInt(y,10)).sort(mT);this.layers=[];for(const y of p){const x=h[y];x.sort((S,_)=>{const C=o[S.id],T=o[_.id];return C<T?-1:C>T?1:0});for(const S of x)S instanceof uc&&this.internalContainerRefs.push(S),this.layers.push(S)}this.layersByDepth=h,p=Object.keys(f).map(y=>parseInt(y,10)).sort(mT);const v=this.inputs.slice(),m=[];for(const y of p)for(const x of f[y]){const S=x.outboundLayer;if(S!=null){for(const _ of x.inputTensors)if(v.indexOf(_)===-1)throw new $l(`Graph disconnected: cannot obtain value for tensor ${_} at layer "${S.name}". The following previous layers were accessed without issue: ${m}`);for(const _ of x.outputTensors)v.push(_);m.push(S.name)}}this.nodesByDepth=f;const g=this.layers.map(y=>y.name);for(const y of g){const x=g.filter(S=>S===y).length;if(x!==1)throw new $l(`The name "${y}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new WR({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(y=>null),outputMasks:this.outputs.map(y=>null),inputShapes:this.inputs.map(y=>y.shape),outputShapes:this.outputs.map(y=>y.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Ne("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const s=Mft(e);s&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new Ne(`Duplicate weight name: ${u}`);r[u]=c,i++}const o=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(n)throw new Ne(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new Ne(`${a.length} of ${i} weights are not set: ${a}`)}v8(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!i.includes(o)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${dde}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=l4(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Ze(()=>{e=_r(e);const r=new Lf;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return o1(this.outputs,r,n)})}computeMask(e,n){return Ze(()=>{e=_r(e);let r;return n==null?r=Fm(null,e.length):r=_r(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=BM(e);if(n.length!==this.inputLayers.length)throw new Ne(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";r[u]=c}const i=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(mT);if(i.length>1)for(const a of i){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(v=>v.id).indexOf(u.id)!==-1)continue;const d=[];for(let v=0;v<c.inboundLayers.length;v++){const m=c.inboundLayers[v],g=c.nodeIndices[v],y=c.tensorIndices[v],x=`${m.name}_${g}_${y}`,S=r[x];d.push(S)}const f=u.computeOutputShape(Uo(d)),h=BM(f),p=u.inboundNodes.indexOf(c);for(let v=0;v<h.length;v++){const m=`${u.name}_${p}_${v}`;r[m]=h[v]}}}const s=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;o.push(d)}for(let a=0;a<o.length;a++){const l=o[a];cu(l in r),s.push(r[l])}return Uo(s)}runInternalGraph(e,n){n==null&&(n=Fm(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=n[l];r[c.id]=[u,d]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(mT);for(const l of i){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,f=u.inputTensors,h=u.outputTensors,p=new Array;for(const v of f)v.id in r&&p.push(r[v.id]);if(p.length===f.length){let v={},m,g,y,x;if(u.callArgs!=null&&(v=u.callArgs),p.length===1){const[S,_]=p[0];v.mask==null&&(v.mask=_),y=_r(d.call(S,v)),x=_r(d.computeMask(S,_)),m=[S],g=[_]}else m=p.map(S=>S[0]),g=p.map(S=>S[1]),v.mask==null&&(v.mask=g),y=_r(d.call(m,v)),x=_r(d.computeMask(m,g));if(d.activityRegularizer)throw new Rn("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let S=0;S<h.length;++S){const _=h[S],C=y[S],T=x[S];r[_.id]=[C,T]}}}}const s=[],o=[],a=[];for(const l of this.outputs){cu(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];a.push(c.shape),s.push(c),o.push(u)}return[s,o,a]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof uc?1:0;for(let s=0;s<i.inboundNodes.length;s++){const o=uc.nodeKey(i,s);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new Ne("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new Ne(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new Ne(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Ze(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=uc.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),c=[];for(let d=0;d<o.inboundNodes.length;d++){const f=o.inboundNodes[d],h=uc.nodeKey(o,d);let p={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(f.inboundLayers.length>0){const v=[];for(let m=0;m<f.inboundLayers.length;m++){const g=f.inboundLayers[m],y=f.nodeIndices[m],x=f.tensorIndices[m],S=uc.nodeKey(g,y);let _=n[S];_==null&&(_=0),v.push([g.name,_,x,p])}c.push(v)}}}const u={};u.name=o.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const i=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],c=uc.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[o];i.push([a.name,u,d])}e.inputLayers=i;const s=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=uc.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[o];s.push([a.name,u,d])}return e.outputLayers=s,e}static fromConfig(e,n,r={},i=!1){const s={},o={};function a(m,g){m.name in o?o[m.name].push(g):o[m.name]=[g]}function l(m,g){const y=[];let x;for(const S of g){const _=S[0],C=S[1],T=S[2];if(x=S[3]==null?{}:S[3],!(_ in s)){a(m,g);return}const A=s[_];if(A.inboundNodes.length<=C){a(m,g);return}const k=A.inboundNodes[C];y.push(k.outputTensors[T])}y.length>0&&m.apply(Uo(y),x)}function c(m){const g=m.name,y=$u(m,n.customObjects!=null?n.customObjects:{});y.setFastWeightInitDuringBuild(i),s[g]=y,m.inboundNodes.forEach(S=>{if(!(S instanceof Array))throw new Ne(`Corrupted configuration, expected array for nodeData: ${S}`);a(y,S)})}const u=n.name,d=n.layers;for(const m of d)c(m);for(;!ddt(o);)for(const m of d){const g=s[m.name];if(g.name in o){const y=o[g.name];delete o[g.name];for(const x of y)l(g,x)}}const f=[],h=[],p=n.inputLayers;for(const m of p){const g=m[0],y=m[1],x=m[2];cu(g in s);const _=s[g].inboundNodes[y].outputTensors;f.push(_[x])}const v=n.outputLayers;for(const m of v){const g=m[0],y=m[1],x=m[2];cu(g in s);const _=s[g].inboundNodes[y].outputTensors;h.push(_[x])}return new e({inputs:f,outputs:h,name:u})}get stateful(){if(this._stateful)throw new Ne("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Ze(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kft(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function fde(t,e){return kft(t,e,"classWeight")}async function hde(t,e,n,r){if(e!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const i=Ze(()=>{if(t.shape.length===1)return om(t);if(t.shape.length===2){if(t.shape[1]>1)return fw(t,1);if(t.shape[1]===1)return Ve(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());On(i);const o=[];return s.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),ma(o,"float32")}else return null}function Aft(t,e){return Oe(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Ift=32;function pde(t,e){let n,r;const i=e;n=i.xs,r=i.ys,ue(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=GY("input",t.inputNames,n),o=GY("output",t.outputNames,r),a=s[0].shape[0];ue(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),ue(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)ue(s[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)ue(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:s,ys:o}}function GY(t,e,n){if(n instanceof Yi)return[n];if(Array.isArray(n))return ue(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new Ne(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function Rft(t){if(t.length===3)throw new Rn("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Nft(t,e,n){const r=n.batchesPerEpoch!=null;if(ue(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),ue(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),ue(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),ue(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),ue(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let s,o;if(i)if(HY(n.validationData))ue(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const m=Rft(n.validationData);s=m.xs,o=m.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;i?c=l.slice().concat(l.map(m=>"val_"+m)):c=l.slice();const u=rde(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:h}=ide(u,d,n.epochs,null,null,Pft(e,n),null,i,c);f.setModel(t),t.history=h,await f.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,v=await e.iterator();for(;p<n.epochs;){const m={};await f.onEpochBegin(p);let g=0,y=0;for(r||(v=await e.iterator());!r||g<n.batchesPerEpoch;){const x=await v.next();if(r&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${g} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:S,ys:_}=pde(t,x.value),C={};C.batch=y,C.size=S[0].shape[0],await f.onBatchBegin(y,C);const T=[];if(n.classWeight!=null){const M=fde(n.classWeight,t.outputNames);for(let R=0;R<M.length;++R)T.push(await hde(_[R],null,M[R]))}const A=S.concat(_).concat(T),k=a(A);On(A);for(let M=0;M<l.length;++M){const R=l[M],P=k[M];C[R]=P,Iu(P)}await f.onBatchEnd(y,C),nde(C),y++,g++}if(r?g>=n.batchesPerEpoch:x.done){if(i){let S;HY(n.validationData)?S=_r(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):S=_r(t.evaluate(s,o,{batchSize:n.validationBatchSize==null?Ift:n.validationBatchSize,verbose:0}));for(let _=0;_<t.metricsNames.length;++_)m[`val_${t.metricsNames[_]}`]=S[_]}break}if(t.stopTraining_)break}if(await f.onEpochEnd(p,m),p++,t.stopTraining_)break}return await f.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Pft(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function HY(t){return typeof t.iterator=="function"}function $ft(t){return typeof t.next=="function"}async function Dft(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let s=[];if(n.verbose>0)throw new Rn("Verbose mode is not implemented yet.");ue(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=$ft(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const c=await o.next();if(s=Ze(()=>{if(c.value){const{xs:u,ys:d}=pde(t,c.value),f=u.concat(d),h=Ze(()=>i(f));if(On(f),l===0)for(let v=0;v<h.length;++v)s.push(vr(0));const p=f[0].shape[0];for(let v=0;v<h.length;++v){const m=h[v],g=s[v];s[v]=Ze(()=>wt(s[v],Oe(p,m))),l>0&&On(g)}On(h),a+=p,++l}return s}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){const u=s[c];s[c]=mn(s[c],a),On(u)}return Uo(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function T$(t){ue(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Yx(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>lm(r,e,n-e)):lm(t,e,n-e)}function c4(t,e){return Ze(()=>t==null?null:Array.isArray(t)?t.map(n=>c4(n,e)):Wue(t,e.dtype==="int32"?e:Ut(e,"int32")))}function E$(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function mde(t){const e=[];t instanceof Yi&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(AS(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function lc(t,e){if(t==null)return;const n=[];if(e instanceof Yi)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const s=e[i];n.push(s.id)}const r=[];if(t instanceof Yi)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const s=t[i];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Lft(t){return t instanceof Yi}function u4(t){return Array.isArray(t)}function jY(t){return!Lft(t)&&!u4(t)}function XY(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(u4(t)&&t.length>0)o=!0;else if(jY(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new Ne(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let s;if(jY(t)){t=t,s=[];for(const o of e){if(t[o]==null)throw new Ne(`No data provided for "${o}". Need data for each key in: ${e}`);s.push(t[o])}}else if(u4(t)){if(t=t,t.length!==e.length)throw new Ne(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new Ne(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=mde(s),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new Ne(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u>=0&&c!==u)throw new Ne(`${i} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${i} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function Oft(t,e,n){const r=Qf(t.map(s=>s.shape[0]));r.sort();const i=Qf(e.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new Ne(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new Ne(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!br(r,i))throw new Ne(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function Fft(t,e,n){const r=[VR,GR,yw];for(let i=0;i<t.length;++i){const s=t[i],o=e[i],a=n[i];if(o!=null){if(o===yw&&s.shape[s.shape.length-1]===1)throw new Ne(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=s.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const d=l[u],f=c[u];if(f!=null&&d!==f)throw new Ne(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function qY(t,e,n,r=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new Ne(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new Ne(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new Ne(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u!==c)throw new Ne(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function Uft(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const Bft="layers-model";class lv extends uc{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new Ne("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Sft(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=wft(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Lh))throw new Ne("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new Ne(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(C$(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Ne(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>C$(a))}else{const o=C$(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],am("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=Uft(e.metrics,this.outputNames),s=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};am("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=i[o];(c=>{const u="";let d,f,h;for(const p of c){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const m=this.internalOutputShapes[o];m[m.length-1]===1||this.lossFunctions[o]===GR?["accuracy","acc"].indexOf(p)!==-1?f=ode:["crossentropy","ce"].indexOf(p)!==-1&&(f=dft):this.lossFunctions[o]===HM?["accuracy","acc"].indexOf(p)!==-1?f=fft:["crossentropy","ce"].indexOf(p)!==-1&&(f=cde):["accuracy","acc"].indexOf(p)!==-1?f=ade:["crossentropy","ce"].indexOf(p)!==-1&&(f=lde);let g;["accuracy","acc"].indexOf(p)!==-1?g="acc":["crossentropy","ce"].indexOf(p)!==-1&&(g="ce"),h=f,d=u+g}else h=bft(p),d=u+yT(p);let v;am(d,()=>{v=h}),s(o,d,v)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;T$(i);const s=!0,o=this.standardizeUserDataXY(e,n,s,i);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,i,r.verbose,r.steps);return Uo(c)}finally{lc(o[0],e),lc(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),Dft(this,e,n)}checkNumSamples(e,n,r,i="steps"){let s;if(r!=null){if(s=null,n!=null)throw new Ne(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new Ne(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new Ne("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],s=this.retrieveSymbolicTensors(i),o=new Lf;if(e instanceof Yi&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Ne(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new Ne(`No value is provided for the model's input ${l.name}`);o.add(l,c)}const a=o1(s,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Fm(null,e.length);let r=e.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],o=s.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((s,o)=>{s==null&&i.push(e[o])}),new Ne(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return Ze(()=>{const i=this.checkNumSamples(e);if(r)throw new Rn("Verbose predictLoop() is not implemented yet.");const s=E$(i,n),o=this.outputs.map(a=>[]);for(let a=0;a<s.length;++a)Ze(()=>{const c=s[a][0],u=s[a][1],d=Yx(e,c,u),f=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)f.push({key:this.inputs[p],value:d[p]});else f.push({key:this.inputs[0],value:d});const h=new Lf(f);return o1(this.outputs,h)}).forEach((c,u)=>o[u].push(c));return Uo(o.map(a=>Go(a,0)))})}predict(e,n={}){const r=mde(e);qY(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return T$(i),this.predictLoop(r,i)}finally{lc(r,e)}}predictOnBatch(e){qY(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new $l("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===HM?s.push(a.slice(0,a.length-1).concat([1])):s.push(a)}if(e=XY(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=XY(n,this.feedOutputNames,s,!1,"target"),Oft(e,n),Fft(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new Ne(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,s=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,s,o);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(i!=null){const u=fde(i,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await hde(l[d],null,u[d]))}return[a,l,c]}testLoop(e,n,r,i=0,s){return Ze(()=>{const o=this.checkNumSamples(n,r,s,"steps"),a=[];if(i>0)throw new Rn("Verbose mode is not implemented yet.");if(s!=null)throw new Rn("steps mode in testLoop() is not implemented yet");{const l=E$(o,r),c=ma(Lc(0,o));for(let u=0;u<l.length;++u){const d=l[u][0],f=l[u][1],h=lm(c,d,f-d),p=c4(n,h),v=e(p);if(u===0)for(let m=0;m<v.length;++m)a.push(vr(0));for(let m=0;m<v.length;++m){const g=v[m];a[m]=wt(a[m],Oe(f-d,g))}}for(let u=0;u<a.length;++u)a[u]=mn(a[u],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let s=i;if(NY(e,i)>1){const o=NY(e.slice(0,r),i);s+=`_${o}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const d=[];for(let v=0;v<this.inputs.length;++v)d.push({key:this.inputs[v],value:r[v]});const f=new Lf(d),h=o1(this.outputs,f,{training:!0});let p;for(let v=0;v<this.lossFunctions.length;++v){const m=this.lossFunctions[v];let g=m(i[v],h[v]);s[v]!=null&&(g=Aft(g,s[v]));const y=Bi(g);n.push(y),v===0?p=g:p=wt(p,g)}for(let v=0;v<this.metricsTensors.length;++v){let m;if(this.outputs.length>1&&v<this.outputs.length)m=n[v];else{const g=this.metricsTensors[v][0],y=this.metricsTensors[v][1];m=Bi(g(i[y],h[y]))}Iu(m),o.push(m)}return p=Bi(p),this.calculateLosses().forEach(v=>{p=wt(p,v)}),p},l=this.collectedTrainableWeights.map(d=>d.read()),c=!0;return[this.optimizer_.minimize(a,c,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>Ze(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let c=0;c<this.inputs.length;++c)o.push({key:this.inputs[c],value:i[c]});const a=new Lf(o),l=o1(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=Bi(u(s[c],l[c]));c===0?r=d:r=wt(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],f=Bi(u(s[d],l[d]));n.push(f)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,s,o,a,l,c,u,d,f;try{const h=r.batchSize==null?32:r.batchSize;T$(h);const p=!1,v=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,p,h);i=v[0],s=v[1],f=v[2];let m=!1,g;if(r.validationData!=null&&r.validationData.length>0){if(m=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new Rn("validationData including sample weights is not supported yet."):new Ne(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const k=!0,M=await this.standardizeUserData(l,c,null,null,k,h);u=M[0],d=M[1],g=u.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){m=!0;const k=Math.floor(i[0].shape[0]*(1-r.validationSplit)),M=i[0].shape[0];u=Yx(i,k,M),o=i,i=Yx(i,0,k),d=Yx(s,k,M),a=s,s=Yx(s,0,k),g=u.concat(d)}else r.validationSteps!=null&&(m=!0);const y=i.concat(s).concat(f);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),S=this.getDedupedMetricsNames();let _,C;m?(this.makeTestFunction(),_=this.testFunction,C=S.slice().concat(S.map(k=>"val_"+k))):(_=null,g=[],C=S.slice());const T=rde(r.callbacks,r.yieldEvery);return await this.fitLoop(x,y,S,h,r.epochs,r.verbose,T,_,g,r.shuffle,C,r.initialEpoch,null,null)}finally{this.isTraining=!1,lc(i,e),lc(s,n),lc(o,e),lc(a,n),lc(u,l),lc(d,c),f!=null&&On(f)}}async fitLoop(e,n,r,i,s,o,a,l,c,u,d,f,h,p){i==null&&(i=32),s==null&&(s=1),u==null&&(u=!0),f==null&&(f=0);let v=!1;if(l!=null&&c!=null&&(v=!0),p!=null&&(v=!0,h==null))throw new Ne("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(n,i,h,"steps_per_epoch");let g;m!=null&&(g=Lc(0,m)),o==null&&(o=1);const{callbackList:y,history:x}=ide(a,o,s,f,m,h,i,v,d);y.setModel(this),this.history=x,await y.onTrainBegin(),this.stopTraining_=!1;for(let S=f;S<s;++S){await y.onEpochBegin(S);const _={};if(h!=null)throw new Rn("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new Rn("batch shuffling is not implemneted yet");u&&ont(g);const C=ma(g),T=E$(m,i);for(let A=0;A<T.length;++A){const k={};if(await y.onBatchBegin(A,k),Ze(()=>{const M=T[A][0],R=T[A][1],P=lm(C,M,R-M);k.batch=A,k.size=R-M;const O=c4(n,P),$=e(O);for(let U=0;U<r.length;++U){const z=r[U],X=$[U];k[z]=X,Iu(X)}if(A===T.length-1&&v){const U=this.testLoop(l,c,i);for(let z=0;z<r.length;++z){const X=r[z],D=U[z];Iu(D),_["val_"+X]=D}}}),await y.onBatchEnd(A,k),nde(k),this.stopTraining_)break}C.dispose()}if(await y.onEpochEnd(S,_),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return Nft(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],s=r[1],a=this.makeTrainFunction()(i.concat(s)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return On(a),lc(r[0],e),lc(r[1],n),Uo(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let o=0;o<i.length;++o)r&&!i[o].trainable||n.push({name:i[o].originalName,tensor:s[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=jO().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-jO().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=yd(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>yd(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=yd(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[yd(yT(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>yd(yT(e)));{const e={};for(const n in this.metrics)e[n]=yd(yT(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=YM(e.optimizer_config),r=$u(n);let i;if(typeof e.loss=="string")i=kp(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(o=>kp(o));else if(e.loss!=null){i={};for(const o in e.loss)i[o]=kp(e.loss[o])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(o=>kp(o));else if(e.metrics!=null){s={};for(const o in e.metrics)s[o]=kp(e.metrics[o])}this.compile({loss:i,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=drt(e);if(c.length===0)throw new Ne(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new Ne(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new Ne("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await hY(this.getNamedWeights(n)),i=!1,s=null,a={modelTopology:this.toJSON(s,i),format:Bft,generatedBy:`TensorFlow.js tfjs-layers v${dde}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await hY(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=rrt([r.data,u])}return this.userDefinedMetadata!=null&&(VY(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){VY(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}lv.className="Model";pt(lv);class gde extends lv{}gde.className="Functional";pt(gde);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function zft(t,e){if(e==null&&(e={}),typeof t=="string"){const n=frt(t,e);if(n.length===0)n.push(qlt(t,e));else if(n.length>1)throw new Ne(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return Wft(t,void 0,e)}async function Wft(t,e,n){if(n==null&&(n={}),t.load==null)throw new Ne("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let i=r.modelTopology;i.model_config!=null&&(i=i.model_config);const s=n.strict==null?!0:n.strict,o=r.weightData!=null&&r.weightSpecs!=null&&s,a=$u(YM(i),e,o),l=r.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),r.userDefinedMetadata!=null&&a.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new Ne("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:c,optimizerWeights:u}=Vft(r.weightData,r.weightSpecs);a.loadWeights(c,s),a.optimizer!=null&&u.length>0&&await a.optimizer.setWeights(u),On(c),On(u.map(d=>d.tensor))}return a}function Vft(t,e){const n=Znt(t,e),r={},i=[];return e.forEach(s=>{s.group==="optimizer"?i.push({name:s.name,tensor:n[s.name]}):r[s.name]=n[s.name]}),{modelWeights:r,optimizerWeights:i}}class xw extends lv{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:BR("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new Ne(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof xw||e instanceof lv;let r;if(n){if(r=e,r.outputs.length!==1)throw new Ne("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new Ne("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new Ne("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=Wdt({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new Ne(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new Ne("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Zue(this.outputs[0])}this.inboundNodes=[],new WR({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Fm(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(lr(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new lv({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new $l("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new $l("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new $l("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new $l("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let s,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new Ne("Legacy serialization format not supported yet.");s=n}else ue(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof xw))throw new Rn(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of s){const u=$u(l,void 0,i);i&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new Ne("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new Ne("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}xw.className="Sequential";pt(xw);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Jo=class extends Iy{getConfig(){return{}}};class vde extends Jo{apply(e,n=1){return Edt(e,n)}}vde.className="elu";pt(vde);class yde extends Jo{apply(e){return Pce(e)}}yde.className="selu";pt(yde);class xde extends Jo{apply(e){return lg(e)}}xde.className="relu";pt(xde);class bde extends Jo{apply(e){return Ze(()=>mw(6,lg(e)))}}bde.className="relu6";pt(bde);class wde extends Jo{apply(e){return e}}wde.className="linear";pt(wde);class Sde extends Jo{apply(e){return My(e)}}Sde.className="sigmoid";pt(Sde);class _de extends Jo{apply(e){return kdt(e)}}_de.className="hardSigmoid";pt(_de);class Cde extends Jo{apply(e){return wS(e)}}Cde.className="softplus";pt(Cde);class Tde extends Jo{apply(e){return Mdt(e)}}Tde.className="softsign";pt(Tde);class Ede extends Jo{apply(e){return Q6(e)}}Ede.className="tanh";pt(Ede);let w8=class extends Jo{apply(e,n=-1){return _z(e,n)}};w8.className="softmax";pt(w8);class Mde extends Jo{apply(e,n=-1){return Cce(e,n)}}Mde.className="logSoftmax";pt(Mde);class kde extends Jo{apply(e,n=1){return Ze(()=>Oe(My(Oe(e,n)),e))}}kde.className="swish";pt(kde);class Ade extends Jo{apply(e){return Ze(()=>Oe(e,Q6(wS(e))))}}Ade.className="mish";pt(Ade);function hh(t){return t.getClassName()}function M$(t,e={}){return kS(t,kl.getMap().classNameMap,e,"activation")}function ph(t){if(t==null){const e={};return e.className="linear",e.config={},M$(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},M$(e)}else return t instanceof Jo?t:M$(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gft(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class Ide extends Iy{}class Rde extends Ide{constructor(e){super(),Gft(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Ze(()=>{let n=fs([1]);return this.hasL1&&(n=wt(n,un(Oe(this.l1,ho(e))))),this.hasL2&&(n=wt(n,un(Oe(this.l2,IS(e))))),Ve(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}Rde.className="L1L2";pt(Rde);const YY={l1l2:"L1L2"};function Pr(t){return a8(t)}function KY(t,e={}){return kS(t,kl.getMap().classNameMap,e,"regularizer")}function ni(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in YY?YY[t]:t,config:{}};return KY(n)}else return t instanceof Ide?t:KY(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Nde extends Vn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=bn(e);let r=lg(e);return this.maxValue!=null&&(r=rl(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}Nde.className="ReLU";pt(Nde);class Pde extends Vn{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=bn(e);return az(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}Pde.className="LeakyReLU";pt(Pde);class $de extends Vn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=ti(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=ni(e.alphaRegularizer),this.alphaConstraint=ts(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new Ne(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=lr(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new Ji({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=bn(e),hz(e,this.alpha.read())}getConfig(){const e={alphaInitializer:li(this.alphaInitializer),alphaRegularizer:Pr(this.alphaRegularizer),alphaConstraint:es(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}$de.className="PReLU";pt($de);let Dde=class extends Vn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Rn(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=bn(e);return PR(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};Dde.className="ELU";pt(Dde);class Lde extends Vn{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=bn(e);return Oe(r,Ut(al(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}Lde.className="ThresholdedReLU";pt(Lde);class Ode extends Vn{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new w8().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Ze(()=>{let r=bn(e);const i=n.mask;if(i!=null){const s=Oe(xn(Dh(r.shape),Ut(i,r.dtype)),vr(-1e9));r=wt(r,s)}return this.axis instanceof Array?this.axis.length>1?Vu(xn(r,Tce(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}Ode.className="Softmax";pt(Ode);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cv(t,e,n){if(typeof t=="number")return Fm(t,e);if(t.length!==e)throw new Ne(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!Sdt(i))throw new Ne(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function Nc(t,e,n,r,i=1){if(t==null)return t;const s=e+(e-1)*(i-1);let o;return n==="same"?o=t:o=t-s+1,Math.floor((o+r-1)/r)}function uu(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+fh([n-e,0]);else if(r==="same")t=t*e;else throw new Ne(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function S8(t,e){return Ze(()=>(Ri(e),e==="channelsFirst"?tr(t,[0,2,3,1]):t))}function Fde(t,e){return Ze(()=>(Ri(e),e==="channelsFirst"?tr(t,[0,2,3,4,1]):t))}function Hft(t,e,n,r=1,i="valid",s,o=1){return Ze(()=>{if(s==null&&(s=Oc()),Ri(s),t.shape.length!==3)throw new Ne(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new Ne(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Ne(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(s==="channelsFirst"&&(t=tr(t,[0,2,1])),i==="causal")throw new Rn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=mce(t,e,r,i==="same"?"same":"valid","NWC",o);return n!=null&&(a=Gc(a,n)),a})}function ZY(t,e,n,r=[1,1],i="valid",s,o,a=null){return Ze(()=>{if(s==null&&(s=Oc()),Ri(s),t.rank!==3&&t.rank!==4)throw new Ne(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new Ne(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=S8(t,s);if(i==="causal")throw new Rn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Hat({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),s==="channelsFirst"&&(l=tr(l,[0,3,1,2])),l})}function jft(t,e,n,r=[1,1,1],i="valid",s,o){return Ze(()=>{if(s==null&&(s=Oc()),Ri(s),t.rank!==4&&t.rank!==5)throw new Ne(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new Ne(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=Fde(t,s);if(i==="causal")throw new Rn("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=Wit(a,e,r,i==="same"?"same":"valid","NDHWC",o),n!=null&&(a=Gc(a,n)),s==="channelsFirst"&&(a=tr(a,[0,4,1,2,3])),a})}class HR extends Vn{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",HR.verifyArgs(n),this.rank=e,ps(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Rn(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=cv(n.kernelSize,e,"kernelSize"),this.strides=cv(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,ll(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Ri(this.dataFormat),this.activation=ph(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=ti(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=ts(n.biasConstraint),this.biasRegularizer=ni(n.biasRegularizer),this.activityRegularizer=ni(n.activityRegularizer),this.dilationRate=cv(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Ne(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Ne(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Ne(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(cu("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!l8(e.kernelSize,"number",1,3))throw new Ne(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:hh(this.activation),useBias:this.useBias,biasInitializer:li(this.biasInitializer),biasRegularizer:Pr(this.biasRegularizer),activityRegularizer:Pr(this.activityRegularizer),biasConstraint:es(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Ry extends HR{constructor(e,n){super(e,n),this.kernel=null,Ry.verifyArgs(n),this.filters=n.filters,ps(this.filters,"filters"),this.kernelInitializer=ti(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=ts(n.kernelConstraint),this.kernelRegularizer=ni(n.kernelRegularizer)}build(e){e=lr(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Ne(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Ze(()=>{e=bn(e);let r;const i=this.bias==null?null:this.bias.read(),s=Lue(this.activation.getClassName());if(s!=null&&this.rank===2)r=ZY(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=Hft(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=ZY(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=jft(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Rn("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=lr(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const o=Nc(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(o)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:li(this.kernelInitializer),kernelRegularizer:Pr(this.kernelRegularizer),kernelConstraint:es(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new Ne(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class $S extends Ry{constructor(e){super(2,e),$S.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!l8(e.kernelSize,"number",1,2))throw new Ne(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}$S.className="Conv2D";pt($S);class DS extends Ry{constructor(e){super(3,e),DS.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new Ne(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}DS.className="Conv3D";pt(DS);class Ude extends $S{constructor(e){if(super(e),this.inputSpec=[new Ji({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Ne(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=lr(e),e.length!==4)throw new Ne("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Ne("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ji({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Ze(()=>{let r=bn(e);if(r.shape.length!==4)throw new Ne(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=i[o],c=i[a],u=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],h=this.strides[1],p=uu(l,f,u,this.padding),v=uu(c,h,d,this.padding),m=[s,p,v,this.filters];this.dataFormat!=="channelsLast"&&(r=tr(r,[0,2,3,1]));let g=gce(r,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=tr(g,[0,3,1,2])),this.bias!=null&&(g=Gc(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=lr(e);const n=e.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[i]=uu(n[i],l,o,this.padding),n[s]=uu(n[s],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Ude.className="Conv2DTranspose";pt(Ude);class Bde extends DS{constructor(e){if(super(e),this.inputSpec=[new Ji({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Ne(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=lr(e),e.length!==5)throw new Ne("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Ne("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ji({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Ze(()=>{let r=bn(e);if(r.shape.length!==5)throw new Ne(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const c=i[l],u=i[o],d=i[a],f=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],v=this.strides[0],m=this.strides[1],g=this.strides[2],y=uu(c,v,f,this.padding),x=uu(u,m,h,this.padding),S=uu(d,g,p,this.padding),_=[s,y,x,S,this.filters];this.dataFormat!=="channelsLast"&&(r=tr(r,[0,2,3,4,1]));let C=Hit(r,this.kernel.read(),_,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=tr(C,[0,4,1,2,3])),this.bias!==null&&(C=Gc(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=lr(e);const n=e.slice();let r,i,s,o;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3,o=4):(r=4,i=1,s=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],f=this.strides[2];return n[r]=this.filters,n[i]=uu(n[i],u,a,this.padding),n[s]=uu(n[s],d,l,this.padding),n[o]=uu(n[o],f,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Bde.className="Conv3DTranspose";pt(Bde);class zde extends Ry{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new Ne("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new Ne("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new Ne(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=ti(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=ni(n.depthwiseRegularizer),this.depthwiseConstraint=ts(n.depthwiseConstraint),this.pointwiseInitializer=ti(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=ni(n.pointwiseRegularizer),this.pointwiseConstraint=ts(n.pointwiseConstraint)}build(e){if(e=lr(e),e.length<this.rank+2)throw new Ne(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new Ne(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let a=0;a<this.rank;++a)s.push(1);s.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Ji({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Ze(()=>{e=bn(e);let r;if(this.rank===1)throw new Rn("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=tr(e,[0,2,3,1])),r=$ce(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Gc(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=tr(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=li(this.depthwiseInitializer),e.pointwiseInitializer=li(this.pointwiseInitializer),e.depthwiseRegularizer=Pr(this.depthwiseRegularizer),e.pointwiseRegularizer=Pr(this.pointwiseRegularizer),e.depthwiseConstraint=es(this.depthwiseConstraint),e.pointwiseConstraint=es(this.pointwiseConstraint),e}}zde.className="SeparableConv";class Wde extends zde{constructor(e){super(2,e)}}Wde.className="SeparableConv2D";pt(Wde);class jR extends Ry{constructor(e){super(1,e),jR.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!l8(e.kernelSize,"number",1,1))throw new Ne(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}jR.className="Conv1D";pt(jR);class Vde extends Vn{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Ze(()=>{if(e=bn(e),this.dataFormat==="channelsLast"){const r=vT(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return vT(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=vT(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return vT(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}Vde.className="Cropping2D";pt(Vde);class Gde extends Vn{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ri(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,xdt(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Ze(()=>{let r=bn(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=tr(r,[0,2,3,1]);const s=this.size[0]*i[2],o=this.size[1]*i[3],a=this.interpolation==="nearest"?Rd.resizeNearestNeighbor(r,[s,o]):Rd.resizeBilinear(r,[s,o]);return tr(a,[0,3,1,2])}else{const s=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?Rd.resizeNearestNeighbor(r,[s,o]):Rd.resizeBilinear(r,[s,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}Gde.className="UpSampling2D";pt(Gde);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xft(t,e,n=[1,1],r="valid",i,s){return Ze(()=>{i==null&&(i=Oc()),Ri(i);let o=S8(t,i);if(t.rank!==4)throw new Ne(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new Ne(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=rz(o,e,n,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(o=tr(o,[0,3,1,2])),o})}class Hde extends HR{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=ti(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=ts(e.depthwiseConstraint),this.depthwiseRegularizer=ni(e.depthwiseRegularizer)}build(e){if(e=lr(e),e.length<4)throw new Ne(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new Ne(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ze(()=>{e=bn(e);let r=Xft(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Gc(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=lr(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=Nc(n,this.kernelSize[0],this.padding,this.strides[0]),o=Nc(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,o]:[e[0],s,o,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=li(this.depthwiseInitializer),e.depthwiseRegularizer=Pr(this.depthwiseRegularizer),e.depthwiseConstraint=es(this.depthwiseRegularizer),e}}Hde.className="DepthwiseConv2D";pt(Hde);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jde(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new Ne("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function Xde(t,e,n,r=!1,i,s,o=!1,a=!1){return Ze(()=>{const l=e.shape.length;if(l<3)throw new Ne(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Lc(2,l));if(e=tr(e,c),s!=null)throw new Rn("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Ut(Ut(i,"bool"),"float32"),i.rank===l-1&&(i=Fo(i,-1)),i=tr(i,c)),r&&(e=Lm(e,0),i!=null&&(i=Lm(i,0)));const u=[];let d,f=n;const h=e.shape[0],p=Om(e);let v;i!=null&&(v=Om(i));for(let g=0;g<h;++g){const y=p[g],x=Ze(()=>t(y,f));if(i==null)d=x[0],f=x[1];else{const S=Ze(()=>{const _=v[g],C=xn(ql(_),_),T=wt(Oe(x[0],_),Oe(f[0],C)),A=f.map((k,M)=>wt(Oe(x[1][M],_),Oe(k,C)));return{output:T,newStates:A}});d=S.output,f=S.newStates}a&&u.push(d)}let m;return a&&(m=Hd(u,1)),[d,m,f]})}class Oh extends Vn{constructor(e){super(e);let n;if(e.cell==null)throw new Ne("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new T8({cells:e.cell}):n=e.cell,n.stateSize==null)throw new Ne("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Ji({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Lc(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){s4(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const s=[];for(const o of n)s.push([e[0],o]);return[i].concat(s)}else return i}computeMask(e,n){return Ze(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Rn("Constants support is not implemented in RNN yet.");s4(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Ji({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!br(this.stateSpec.map(o=>o.shape[o.shape.length-1]),s))throw new Ne(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(o=>new Ji({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Ze(()=>{if(!this.stateful)throw new lu("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new Ne("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>fs([r,i])):this.states_=[fs([r,this.cell.stateSize])];else if(e==null)On(this.states_),this.keptStates!=null&&(On(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>fs([r,i])):this.states_[0]=fs([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Ne(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):On(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,a=[r,o];if(!br(s.shape,a))throw new Ne(`State ${i} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>Iu(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=jde(e,r,i,this.numConstants);e=s.inputs,r=s.initialState,i=s.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Ji({shape:c.shape}));a=a.concat(this.stateSpec)}if(i!=null&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof Hu){const c=[e].concat(o),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const f=super.apply(c,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Ze(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let s=n==null?null:n.initialState;e=bn(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==o)throw new Ne(`RNN Layer has ${o} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:i},c=Xde((p,v)=>{const m=this.cell.call([p].concat(v),a);return[m[0],m.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],d=c[1],f=c[2];this.stateful&&this.resetStates(f,i);const h=this.returnSequences?d:u;return this.returnState?[h].concat(f):h})}getInitialState(e){return Ze(()=>{let n=fs(e.shape);return n=un(n,[1,2]),n=AS(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?r4(n,[1,r]):n):this.cell.stateSize>1?[r4(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Oh.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,s=$u(i,r);return new e(Object.assign(n,{cell:s}))}}Oh.className="RNN";pt(Oh);class XR extends Vn{}class _8 extends XR{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ps(this.units,"units"),this.activation=ph(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ti(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ti(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ti(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ni(e.kernelRegularizer),this.recurrentRegularizer=ni(e.recurrentRegularizer),this.biasRegularizer=ni(e.biasRegularizer),this.kernelConstraint=ts(e.kernelConstraint),this.recurrentConstraint=ts(e.recurrentConstraint),this.biasConstraint=ts(e.biasConstraint),this.dropout=Vv([1,fh([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Vv([1,fh([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=lr(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ze(()=>{if(e=e,e.length!==2)throw new Ne(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=mh({ones:()=>ql(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=mh({ones:()=>ql(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?s=Pu(Oe(e,o),this.kernel.read()):s=Pu(e,this.kernel.read()),this.bias!=null&&(s=Gc(s,this.bias.read())),a!=null&&(r=Oe(r,a));let l=wt(s,Pu(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:hh(this.activation),useBias:this.useBias,kernelInitializer:li(this.kernelInitializer),recurrentInitializer:li(this.recurrentInitializer),biasInitializer:li(this.biasInitializer),kernelRegularizer:Pr(this.kernelRegularizer),recurrentRegularizer:Pr(this.recurrentRegularizer),biasRegularizer:Pr(this.biasRegularizer),activityRegularizer:Pr(this.activityRegularizer),kernelConstraint:es(this.kernelConstraint),recurrentConstraint:es(this.recurrentConstraint),biasConstraint:es(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}_8.className="SimpleRNNCell";pt(_8);class qde extends Oh{constructor(e){e.cell=new _8(e),super(e)}call(e,n){return Ze(()=>{this.cell.dropoutMask!=null&&(On(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(On(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return new e(n)}}qde.className="SimpleRNN";pt(qde);class C8 extends XR{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Ne("GRUCell does not support reset_after parameter set to true.");this.units=e.units,ps(this.units,"units"),this.activation=ph(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ph(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ti(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ti(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ti(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ni(e.kernelRegularizer),this.recurrentRegularizer=ni(e.recurrentRegularizer),this.biasRegularizer=ni(e.biasRegularizer),this.kernelConstraint=ts(e.kernelConstraint),this.recurrentConstraint=ts(e.recurrentConstraint),this.biasConstraint=ts(e.biasConstraint),this.dropout=Vv([1,fh([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Vv([1,fh([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=lr(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ze(()=>{if(e=e,e.length!==2)throw new Ne(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=mh({ones:()=>ql(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=mh({ones:()=>ql(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=Oe(e,s[0]));let u=Pu(e,this.kernel.read());this.useBias&&(u=Gc(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=Oe(i,o[0]));const d=this.recurrentKernel.read(),[f,h]=el(d,[2*this.units,this.units],d.rank-1),p=Pu(i,f),[v,m,g]=el(u,3,u.rank-1),[y,x]=el(p,2,p.rank-1);a=this.recurrentActivation.apply(wt(v,y)),l=this.recurrentActivation.apply(wt(m,x));const S=Pu(Oe(l,i),h);c=this.activation.apply(wt(g,S));const _=wt(Oe(a,i),Oe(wt(1,ki(a)),c));return[_,_]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:hh(this.activation),recurrentActivation:hh(this.recurrentActivation),useBias:this.useBias,kernelInitializer:li(this.kernelInitializer),recurrentInitializer:li(this.recurrentInitializer),biasInitializer:li(this.biasInitializer),kernelRegularizer:Pr(this.kernelRegularizer),recurrentRegularizer:Pr(this.recurrentRegularizer),biasRegularizer:Pr(this.biasRegularizer),activityRegularizer:Pr(this.activityRegularizer),kernelConstraint:es(this.kernelConstraint),recurrentConstraint:es(this.recurrentConstraint),biasConstraint:es(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}C8.className="GRUCell";pt(C8);class Yde extends Oh{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new C8(e),super(e)}call(e,n){return Ze(()=>{this.cell.dropoutMask!=null&&(On(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(On(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Yde.className="GRU";pt(Yde);class qR extends XR{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ps(this.units,"units"),this.activation=ph(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ph(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ti(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ti(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ti(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=ni(e.kernelRegularizer),this.recurrentRegularizer=ni(e.recurrentRegularizer),this.biasRegularizer=ni(e.biasRegularizer),this.kernelConstraint=ts(e.kernelConstraint),this.recurrentConstraint=ts(e.recurrentConstraint),this.biasConstraint=ts(e.biasConstraint),this.dropout=Vv([1,fh([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Vv([1,fh([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=lr(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,o=this.units;i=new(n=class extends Ql{apply(l,c){const u=s.apply([o]),d=new u8().apply([o]),f=s.apply([o*2]);return $Y($Y(u,d),f)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Ze(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new Ne(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=mh({ones:()=>ql(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=mh({ones:()=>ql(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=Oe(e,o[0]));let f=Pu(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=Oe(i,a[0])),f=wt(f,Pu(i,this.recurrentKernel.read())),this.useBias&&(f=Gc(f,this.bias.read()));const[h,p,v,m]=el(f,4,f.rank-1);l=this.recurrentActivation.apply(h),c=this.recurrentActivation.apply(p),u=wt(Oe(c,s),Oe(l,this.activation.apply(v))),d=this.recurrentActivation.apply(m);const g=Oe(d,this.activation.apply(u));return[g,g,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:hh(this.activation),recurrentActivation:hh(this.recurrentActivation),useBias:this.useBias,kernelInitializer:li(this.kernelInitializer),recurrentInitializer:li(this.recurrentInitializer),biasInitializer:li(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Pr(this.kernelRegularizer),recurrentRegularizer:Pr(this.recurrentRegularizer),biasRegularizer:Pr(this.biasRegularizer),activityRegularizer:Pr(this.activityRegularizer),kernelConstraint:es(this.kernelConstraint),recurrentConstraint:es(this.recurrentConstraint),biasConstraint:es(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}qR.className="LSTMCell";pt(qR);class Kde extends Oh{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new qR(e),super(e)}call(e,n){return Ze(()=>{this.cell.dropoutMask!=null&&(On(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(On(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Kde.className="LSTM";pt(Kde);class T8 extends XR{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Ze(()=>{e=e;let r=e.slice(1);const i=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?i.push(r.splice(0,a.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=i[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),s.push(o.slice(1))}r=[];for(const a of s.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){s4(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{am(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const s of n.cells)i.push($u(s,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return o4(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,s=e.splice(i);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],s[o]])}v8(n)}}T8.className="StackedRNNCells";pt(T8);function mh(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:s}=t,o=()=>s!=null?s(e(),n):Vue(e(),n),a=()=>RS(o,e,r);return!i||i<=1?Iu(a().clone()):Array(i).fill(void 0).map(a).map(c=>Iu(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var qft=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Zde extends Oh{constructor(e){if(e.unroll)throw new Rn("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Rn("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Ji({ndim:5})]}call(e,n){return Ze(()=>{if(this.cell.dropoutMask!=null&&(On(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(On(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new Ne("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Ze(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],o=fs(s);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){Ze(()=>{if(!this.stateful)throw new lu("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new Ne("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>fs(s)):this.states_=[fs(s)];else if(e==null)On(this.states_),this.keptStates!=null&&(On(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>fs(s)):this.states_[0]=fs(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Ne(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):On(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=s;if(!br(l.shape,c))throw new Ne(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Iu(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:s,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=Nc(c,i[0],s,o[0],a[0]),f=Nc(u,i[1],s,o[1],a[1]);return[...e.slice(0,2),...l?[r,d,f]:[d,f,r]]}}Zde.className="ConvRNN2D";class E8 extends qR{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:s,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,ps(this.filters,"filters"),this.kernelSize=cv(r,2,"kernelSize"),this.kernelSize.forEach(l=>ps(l,"kernelSize")),this.strides=cv(i||1,2,"strides"),this.strides.forEach(l=>ps(l,"strides")),this.padding=s||"valid",ll(this.padding),this.dataFormat=o||"channelsLast",Ri(this.dataFormat),this.dilationRate=cv(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>ps(l,"dilationRate"))}build(e){var n;e=lr(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new Ne(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],s=4,o=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends Ql{apply(f,h){const p=c.apply([u]),v=Dh([u]),m=c.apply([u*2]);return c8([p,v,m])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Ze(()=>{if(e.length!==3)throw new Ne(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],s=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=mh({ones:()=>ql(i),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(W,V,j)=>!V||!V[j]?W:Oe(V[j],W);let u=c(i,l,0),d=c(i,l,1),f=c(i,l,2),h=c(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=mh({ones:()=>ql(s),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let v=c(s,p,0),m=c(s,p,1),g=c(s,p,2),y=c(s,p,3);const x=3,[S,_,C,T]=el(this.kernel.read(),a,x),[A,k,M,R]=this.useBias?el(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,S,A,this.padding),d=this.inputConv(d,_,k,this.padding),f=this.inputConv(f,C,M,this.padding),h=this.inputConv(h,T,R,this.padding);const[P,O,$,U]=el(this.recurrentKernel.read(),a,x);v=this.recurrentConv(v,P),m=this.recurrentConv(m,O),g=this.recurrentConv(g,$),y=this.recurrentConv(y,U);const z=this.recurrentActivation.apply(wt(u,v)),X=this.recurrentActivation.apply(wt(d,m)),D=wt(Oe(X,o),Oe(z,this.activation.apply(wt(f,g)))),F=Oe(this.recurrentActivation.apply(wt(h,y)),this.activation.apply(D));return[F,F,D]})}getConfig(){const e=super.getConfig(),n=qft(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,i){const s=Dm(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Gc(s,r,this.dataFormat):s}recurrentConv(e,n){return Dm(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}E8.className="ConvLSTM2DCell";pt(E8);class Jde extends Zde{constructor(e){const n=new E8(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}Jde.className="ConvLSTM2D";pt(Jde);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class M8 extends Vn{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=bn(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,s=this.getNoiseShape(r);return RS(()=>Vue(r,this.rate,s,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}M8.className="Dropout";pt(M8);class Qde extends M8{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}Qde.className="SpatialDropout1D";pt(Qde);class efe extends Vn{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,ps(this.units,"units"),this.activation=ph(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=ti(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=ti(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=ts(e.kernelConstraint),this.biasConstraint=ts(e.biasConstraint),this.kernelRegularizer=ni(e.kernelRegularizer),this.biasRegularizer=ni(e.biasRegularizer),this.activityRegularizer=ni(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=lr(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=lr(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=bn(e),i=Lue(this.activation.getClassName());let s;return i!=null?s=Pu(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=Pu(r,this.kernel.read()),this.bias!=null&&(s=Gc(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:hh(this.activation),useBias:this.useBias,kernelInitializer:li(this.kernelInitializer),biasInitializer:li(this.biasInitializer),kernelRegularizer:Pr(this.kernelRegularizer),biasRegularizer:Pr(this.biasRegularizer),activityRegularizer:Pr(this.activityRegularizer),kernelConstraint:es(this.kernelConstraint),biasConstraint:es(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}efe.className="Dense";pt(efe);class tfe extends Vn{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=lr(e);for(const n of e.slice(1))if(n==null)throw new Ne(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],eh(e,1)]}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);let r=bn(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=tr(r,i)}return Tdt(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}tfe.className="Flatten";pt(tfe);class nfe extends Vn{constructor(e){super(e),this.supportsMasking=!0,this.activation=ph(e.activation)}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=bn(e);return this.activation.apply(r)})}getConfig(){const e={activation:hh(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}nfe.className="Activation";pt(nfe);class rfe extends Vn{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Ze(()=>(e=bn(e),_dt(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}rfe.className="RepeatVector";pt(rfe);class ife extends Vn{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let s=1,o=null;for(let l=0;l<i.length;++l){const c=i[l];if(this.isUnknown(c))if(o===null)o=l;else throw new Ne("Can only specifiy one unknown dimension.");else s*=c}const a=eh(e);if(o!==null){if(s===0||a%s!==0)throw new Ne(r);i[o]=a/s}else if(a!==s)throw new Ne(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=bn(e),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return Ve(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}ife.className="Reshape";pt(ife);class sfe extends Vn{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Lc(1,e.dims.length+1);if(!br(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Ji({ndim:this.dims.length+1})]}computeOutputShape(e){e=lr(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return tr(bn(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}sfe.className="Permute";pt(sfe);class ofe extends Vn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=bn(e),i=-1;return KO(OM(r,this.maskValue),i)}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=bn(e),i=-1,s=!0,o=KO(OM(r,this.maskValue),i,s);return Oe(r,Ut(o,r.dtype))})}}ofe.className="Masking";pt(ofe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class afe extends Vn{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(_r(e.inputLength))}this.inputDim=e.inputDim,ps(this.inputDim,"inputDim"),this.outputDim=e.outputDim,ps(this.outputDim,"outputDim"),this.embeddingsInitializer=ti(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=ni(e.embeddingsRegularizer),this.activityRegularizer=ni(e.activityRegularizer),this.embeddingsConstraint=ts(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Ze(()=>this.maskZero?(e=bn(e),OM(e,rr(e))):null)}computeOutputShape(e){if(e=lr(e),this.inputLength==null)return[...e,this.outputDim];const n=_r(this.inputLength);if(n.length!==e.length-1)throw new Ne(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const s=n[i],o=e[i+1];if(s!=null&&o!=null&&s!==o)throw new Ne(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);let r=bn(e);r.dtype!=="int32"&&(r=Nu(r,"int32"));const i=Wue(this.embeddings.read(),Ve(r,[r.size]));return Ve(i,lr(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:li(this.embeddingsInitializer),embeddingsRegularizer:Pr(this.embeddingsRegularizer),activityRegularizer:Pr(this.activityRegularizer),embeddingsConstraint:es(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}afe.className="Embedding";pt(afe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class dg extends Vn{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Rn}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const s=e[e.length-n.length+i],o=n[i];if(s==null||o==null||s<0||o<0)r.push(null);else if(s===1)r.push(o);else if(o===1)r.push(s);else{if(s!==o)throw new Ne("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[lr(e)]),e=e,e.length<2)throw new Ne(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=Qf(n),n.length>1)throw new Ne(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const o=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const i=e.map(s=>s.length);e.indexOf(null)===-1&&Qf(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Ze(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(s=>s.rank);if(i.indexOf(null)===-1){const s=fh(i);for(let o of e){const a=o.rank;for(let l=0;l<s-a;++l)o=AS(o,1);r.push(o)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],f=u.slice(1).concat([d]);let h=Ve(l,[d].concat(eh(u.slice(1))));h=tr(h,[1,0]),h=Ve(h,f),r.push(h),s=!0}else if(c>1){const u=Lc(1,c).concat([0]);r.push(tr(l,u)),s=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(s){if(a==null){const l=o.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));o=Ve(tr(Ve(o,[-1,u]),[1,0]),d)}else if(a>1){const l=[a-1].concat(Lc(0,a-1));o=tr(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=Qf(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Ze(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Ne("`mask` should be an Array");if(!Array.isArray(e))throw new Ne("`inputs` should be an Array");if(n.length!==e.length)throw new Ne(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Fo(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=Gd(r,n[i]);return r})}}class lfe extends dg{constructor(e){super(e)}mergeFunction(e){return Ze(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=wt(n,e[r]);return n})}}lfe.className="Add";pt(lfe);class cfe extends dg{constructor(e){super(e)}mergeFunction(e){return Ze(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Oe(n,e[r]);return n})}}cfe.className="Multiply";pt(cfe);class ufe extends dg{constructor(e){super(e)}mergeFunction(e){return Ze(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=wt(n,e[r]);return Oe(1/e.length,n)})}}ufe.className="Average";pt(ufe);class dfe extends dg{constructor(e){super(e)}mergeFunction(e){return Ze(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=$h(n,e[r]);return n})}}dfe.className="Maximum";pt(dfe);class ffe extends dg{constructor(e){super(e)}mergeFunction(e){return Ze(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=mw(n,e[r]);return n})}}ffe.className="Minimum";pt(ffe);class hfe extends dg{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new Ne("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const s=e[i].slice();s.splice(this.axis,1);let o=!1;for(const a of r)if(br(a,s)){o=!0;break}o||r.push(s)}if(r.length>1)throw new Ne("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Ze(()=>c8(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new Ne("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new Ne("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Ne("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new Ne(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Ze(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const i=[];for(let o=0;o<e.length;++o)n[o]==null?i.push(Ut(ql(e[o]),"bool")):n[o].rank<e[o].rank?i.push(Fo(n[o],-1)):i.push(n[o]);const s=Go(i,this.axis);return pce(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}hfe.className="Concatenate";pt(hfe);function Kx(t,e){for(;t<0;)t+=e;return t}function Yft(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Rn("batchDot is not implemented for tensors of 4D or higher rank yet");if(ue(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),ue(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Rn("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const s=n;return Ze(()=>{let o;if(r>i){o=r-i;const l=[];for(let c=0;c<o;++c)l.push(1);e=Ve(e,e.shape.concat(l))}else if(i>r){o=i-r;const l=[];for(let c=0;c<o;++c)l.push(1);t=Ve(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?a=un(Oe(t,e),s[0]):a=un(Oe(tr(t,[1,0]),e),s[1]);else{const l=s[0]!==t.shape.length-1,c=s[1]===e.shape.length-1;a=gr(t,e,l,c)}if(o>0){let l;r>i?l=r+i-3:l=r-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);a=_S(a,c)}return a.shape.length===1&&(a=Fo(a,1)),a})}class pfe extends dg{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){ue(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Rn("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new Ne(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new Ne(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,o)=>Kx(s,e[o].shape.length)):i=[Kx(this.axes,n.shape.length),Kx(this.axes,r.shape.length)],this.normalize&&(n=GM(n,i[0]),r=GM(r,i[1])),Yft(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Kx(this.axes,e.length),Kx(this.axes,n.length)],r}computeOutputShape(e){ue(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Rn("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}pfe.className="Dot";pt(pfe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mfe extends Vn{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=bn(e);return RS(()=>wt(zR(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}mfe.className="GaussianNoise";pt(mfe);class gfe extends Vn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=bn(e);return this.rate>0&&this.rate<1?RS(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return Oe(r,zR(r.shape,1,s))},()=>r,n.training||!1):r})}}gfe.className="GaussianDropout";pt(gfe);class vfe extends Vn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||bn(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Ze(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return RS(()=>{const s=bn(e),o=1.6732632423543772,a=1.0507009873554805,l=-o*a;let c=og(SS(r),this.rate);c=Nu(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-u*l*this.rate,f=wt(Oe(s,c),Oe(wt(c,-1),l));return wt(Oe(f,u),d)},()=>bn(e),n.training||!1)}return e})}}vfe.className="AlphaDropout";pt(vfe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bw(t,e,n,r,i,s=.001){let o;if(t.rank===2)o=yit(t,e,n,r,i,s);else if(t.rank===3)o=bit(t,e,n,r,i,s);else if(t.rank===4)o=Sit(t,e,n,r,i,s);else throw new Rn(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function Kft(t,e,n,r,i=.001){return Ze(()=>{const s=uz(t,r),o=s.mean,a=s.variance;return[bw(t,o,a,n,e,i),o,a]})}function Zft(t,e,n,r,i=.001){return Ze(()=>{const s=uz(t,r),o=s.mean,a=s.variance,l=[];for(const p of Lc(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const c=Ve(o,l),u=Ve(a,l),d=e==null?null:Ve(e,l),f=n==null?null:Ve(n,l);return[bw(t,c,u,f,d,i),o,a]})}function Jft(t,e,n,r,i=.001){return br(r.slice().sort(),Lc(0,t.rank-1))?Kft(t,e,n,r,i):Zft(t,e,n,r,i)}class yfe extends Vn{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=ti(e.betaInitializer||"zeros"),this.gammaInitializer=ti(e.gammaInitializer||"ones"),this.movingMeanInitializer=ti(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=ti(e.movingVarianceInitializer||"ones"),this.betaConstraint=ts(e.betaConstraint),this.gammaConstraint=ts(e.gammaConstraint),this.betaRegularizer=ni(e.betaRegularizer),this.gammaRegularizer=ni(e.gammaRegularizer)}build(e){e=lr(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new Ne(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Ji({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Ze(()=>{const r=n.training==null?!1:n.training,i=bn(e),s=i.shape,o=s.length,a=Lc(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const c=Fm(1,o);c[l]=s[l];const u=a.slice();u.sort();const d=!br(u,Lc(0,o).slice(0,o-1)),f=()=>{if(d){const y=Ve(this.movingMean.read(),c),x=Ve(this.movingVariance.read(),c),S=this.center?Ve(this.beta.read(),c):null,_=this.scale?Ve(this.gamma.read(),c):null;return bw(i,y,x,S,_,this.epsilon)}else return bw(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return f();const[h,p,v]=Jft(i,this.gamma.read(),this.beta.read(),a,this.epsilon),m=(y,x,S)=>{Ze(()=>{const _=1-S,C=y.read(),T=Oe(xn(C,x),_);y.write(xn(C,T))})};return(()=>{m(this.movingMean,p,this.momentum),m(this.movingVariance,v,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:li(this.betaInitializer),gammaInitializer:li(this.gammaInitializer),movingMeanInitializer:li(this.movingMeanInitializer),movingVarianceInitializer:li(this.movingVarianceInitializer),betaRegularizer:Pr(this.betaRegularizer),gammaRegularizer:Pr(this.gammaRegularizer),betaConstraint:es(this.betaConstraint),gammaConstraint:es(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}yfe.className="BatchNormalization";pt(yfe);class xfe extends Vn{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=ti(e.betaInitializer||"zeros"),this.gammaInitializer=ti(e.gammaInitializer||"ones"),this.betaRegularizer=ni(e.betaRegularizer),this.gammaRegularizer=ni(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=lr(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==Qf(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=bn(e),i=r.shape,s=i.length;return Ze(()=>{let{mean:a,variance:l}=uz(r,this.axis,!0);const c=Fm(1,s);for(const v of this.axis)c[v]=i[v];const u=v=>v!=null&&v.shape.length!==s?Ve(v,c):v;let d=this.scale?u(this.gamma.read()):null,f=this.center?u(this.beta.read()):null;const h=[],p=[];for(let v=0;v<s;++v)this.axis.indexOf(v)!==-1?(h.push(i[v]),p.push(1)):(h.push(1),p.push(i[v]));return a=Tc(a,h),l=Tc(l,h),d!=null&&(d=Tc(d,p)),f!=null&&(f=Tc(f,p)),bw(r,a,l,f,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:li(this.betaInitializer),gammaInitializer:li(this.gammaInitializer),betaRegularizer:Pr(this.betaRegularizer),gammaRegularizer:Pr(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}xfe.className="LayerNormalization";pt(xfe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qft(t,e,n){return Ze(()=>{if(t.rank!==4)throw new Ne(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new Ne("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Oc()),n!=="channelsLast"&&n!=="channelsFirst")throw new Ne(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],dz(t,r)})}class bfe extends Vn{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Oc():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new Ne(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new Ne(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new Ne(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Ji({ndim:4})]}computeOutputShape(e){e=lr(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Ze(()=>Qft(bn(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}bfe.className="ZeroPadding2D";pt(bfe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YR(t,e,n,r,i,s){return Ze(()=>{Ri(i),Fue(s),ll(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=Oc()),s==null&&(s="max"),t=S8(t,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=cz(t,e,n,a):o=J6(t,e,n,a),i==="channelsFirst"&&(o=tr(o,[0,3,1,2])),o})}function wfe(t,e,n,r,i,s){return Ze(()=>{Ri(i),Fue(s),ll(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=Oc()),s==null&&(s="max"),t=Fde(t,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=aot(t,e,n,a):o=lit(t,e,n,a),i==="channelsFirst"&&(o=tr(o,[0,4,1,2,3])),o})}class Sfe extends Vn{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new Ne(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(ps(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new Ne(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);ps(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,ll(this.padding),this.inputSpec=[new Ji({ndim:3})]}computeOutputShape(e){e=lr(e);const n=Nc(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Ze(()=>{this.invokeCallHook(e,n),e=AS(bn(e),2);const r=this.poolingFunction(bn(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return _S(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class _fe extends Sfe{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Ri(s),ll(i),YR(e,n,r,i,s,"max")}}_fe.className="MaxPooling1D";pt(_fe);class Cfe extends Sfe{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Ri(s),ll(i),YR(e,n,r,i,s,"avg")}}Cfe.className="AveragePooling1D";pt(Cfe);class Tfe extends Vn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new Ne(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];ps(this.poolSize,"poolSize"),ps(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ri(this.dataFormat),ll(this.padding),this.inputSpec=[new Ji({ndim:4})]}computeOutputShape(e){e=lr(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Nc(n,this.poolSize[0],this.padding,this.strides[0]),r=Nc(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Ze(()=>(this.invokeCallHook(e,n),this.poolingFunction(bn(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Efe extends Tfe{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Ri(s),ll(i),YR(e,n,r,i,s,"max")}}Efe.className="MaxPooling2D";pt(Efe);class Mfe extends Tfe{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Ri(s),ll(i),YR(e,n,r,i,s,"avg")}}Mfe.className="AveragePooling2D";pt(Mfe);class kfe extends Vn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new Ne(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];ps(this.poolSize,"poolSize"),ps(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ri(this.dataFormat),ll(this.padding),this.inputSpec=[new Ji({ndim:5})]}computeOutputShape(e){e=lr(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Nc(n,this.poolSize[0],this.padding,this.strides[0]),r=Nc(r,this.poolSize[1],this.padding,this.strides[1]),i=Nc(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return Ze(()=>(this.invokeCallHook(e,n),this.poolingFunction(bn(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Afe extends kfe{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Ri(s),ll(i),wfe(e,n,r,i,s,"max")}}Afe.className="MaxPooling3D";pt(Afe);class Ife extends kfe{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return Ri(s),ll(i),wfe(e,n,r,i,s,"avg")}}Ife.className="AveragePooling3D";pt(Ife);class Rfe extends Vn{constructor(e){super(e),this.inputSpec=[new Ji({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Rn}}class Nfe extends Rfe{constructor(e){super(e||{})}call(e,n){return Ze(()=>{const r=bn(e);return Bi(r,1)})}}Nfe.className="GlobalAveragePooling1D";pt(Nfe);class Pfe extends Rfe{constructor(e){super(e||{})}call(e,n){return Ze(()=>{const r=bn(e);return Rc(r,1)})}}Pfe.className="GlobalMaxPooling1D";pt(Pfe);class $fe extends Vn{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Ri(this.dataFormat),this.inputSpec=[new Ji({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Rn}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Dfe extends $fe{call(e,n){return Ze(()=>{const r=bn(e);return this.dataFormat==="channelsLast"?Bi(r,[1,2]):Bi(r,[2,3])})}}Dfe.className="GlobalAveragePooling2D";pt(Dfe);class Lfe extends $fe{call(e,n){return Ze(()=>{const r=bn(e);return this.dataFormat==="channelsLast"?Rc(r,[1,2]):Rc(r,[2,3])})}}Lfe.className="GlobalMaxPooling2D";pt(Lfe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ofe extends Vn{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,s=$u(i,r);delete n.layer;const o={layer:s};return Object.assign(o,n),new e(o)}}class Ffe extends Ofe{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=lr(e),e.length<3)throw new Ne(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=lr(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return Ze(()=>(e=bn(e),Xde((o,a)=>[bn(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}Ffe.className="TimeDistributed";pt(Ffe);function eht(t){ug(ydt,"BidirectionalMergeMode",t)}const tht="concat";class Ufe extends Ofe{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=$u(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=$u(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?tht:e.mergeMode,eht(this.mergeMode),e.weights)throw new Rn("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):Uo(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=jde(e,r,i,this.numConstants);if(e=s.inputs,r=s.initialState,i=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new Ne("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const u=r.map(d=>new Ji({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(i!=null)throw new Rn("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof Hu;for(const c of o)if(c instanceof Hu!==l)throw new Ne("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(o),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const f=super.apply(c,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Ze(()=>{const r=n.initialState;let i,s;if(r==null)i=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=Lm(s,1));let a;return this.mergeMode==="concat"?a=c8([i,s]):this.mergeMode==="sum"?a=wt(i,s):this.mergeMode==="ave"?a=Oe(.5,wt(i,s)):this.mergeMode==="mul"?a=Oe(i,s):this.mergeMode==null&&(a=[i,s]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){am(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),am(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=$u(n.layer);if(delete n.layer,n.numConstants!=null)throw new Rn("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}Ufe.className="Bidirectional";pt(Ufe);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Bfe extends Vn{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Ze(()=>(e=bn(e),e.dtype!=="float32"&&(e=Nu(e,"float32")),wt(Oe(e,this.scale),this.offset)))}}Bfe.className="Rescaling";pt(Bfe);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:nht,cropAndResize:rht}=Rd;class zfe extends Vn{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,s,o,a,l){return Ze(()=>{let c,u=!1;const d=n/o,f=r/a,h=(i+n)/o,p=(s+r)/a,v=[d,f,h,p],m=[];e.rank===3?(u=!0,c=Hd([e])):c=e;for(let _=0;_<c.shape[0];_++)m.push(v);const g=B1(m,[m.length,4]),y=gw(0,m.length,1,"int32"),S=rht(c,g,y,[i,s],"nearest");return Nu(u?bn(Om(S)):S,l)})}upsize(e,n,r,i){return Ze(()=>{const s=nht(e,[n,r]);return Nu(s,i)})}call(e,n){return Ze(()=>{const r=bn(e),i=r.dtype,s=r.shape,o=s[s.length-3],a=s[s.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,o,a,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=lr(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}zfe.className="CenterCrop";pt(zfe);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function iht(t,e,n,r){let i=bn(t);if(i.dtype!=="int32"&&(i=Nu(i,"int32")),e==="int")return i;const s=i.shape;if(i.rank===0&&(i=Fo(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Fo(i,-1)),i.rank>2)throw new Ne(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(e),a=i;let l;if(typeof r<"u"&&e==="count"?l=vY(a,r,n,o):l=vY(a,[],n,o),e!=="tfIdf")return l;if(r)return Oe(l,r);throw new Ne("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wfe extends Vn{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=lr(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Ze(()=>{e=bn(e),e.dtype!=="int32"&&(e=Nu(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new Ne(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=bn(n.countWeights)}const i=Rc(e),s=DM(e),o=al(this.numTokens,i).bufferSync().get(0),a=og(s,0).bufferSync().get(0);if(!(o&&a))throw new Ne(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return iht(e,this.outputMode,this.numTokens,r)})}}Wfe.className="CategoryEncoding";pt(Wfe);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const sht=["bilinear","nearest"],JY=new Set(sht);class Vfe extends Vn{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(JY.has(e.interpolation))this.interpolation=e.interpolation;else throw new Ne(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=lr(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Ze(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Rd.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Rd.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...JY]} are supported`)})}}Vfe.className="Resizing";pt(Vfe);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Gfe{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}Gfe.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Hfe extends Vn{constructor(e){super(e),this.randomGenerator=new Gfe(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}Hfe.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const oht=["bilinear","nearest"],QY=new Set(oht);class jfe extends Hfe{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Ne(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Ne(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Ne(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(QY.has(r))this.interpolation=r;else throw new Ne(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=lr(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Ze(()=>{const r=bn(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=SS([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);const o=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Rd.resizeBilinear(e,o);case"nearest":return Rd.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...QY]} are supported`)}})}}jfe.className="RandomWidth";pt(jfe);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aht=Qe();aht.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var eK;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(eK||(eK={}));var tK;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(tK||(tK={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var nK;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(nK||(nK={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qt(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&ue(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lht=Wce;class KR extends QB{nextDataId(){return KR.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new dle(this,ru())}write(e,n,r){this.firstUse&&(this.firstUse=!1,Qe().get("IS_NODE")&&ja(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&S2(r[0])){const s=r.map(o=>Jf(o));i=this.write(s,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,s){this.data.set(e,{values:n,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return jd(i,s)}return fnt(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>dh(i));return Bn(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Bn(e.shape,e.dtype,n)}makeOutput(e,n,r){return ru().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Oo();return e(),{kernelMs:Oo()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){qt([e],"where");const n=this.readSync(e.dataId);return lht(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}KR.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xfe(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const cht=t=>{const{x:e}=t.inputs,n=t.backend;qt(e,"abs");let r=new Float32Array(it(e.shape));const i=n.data.get(e.dataId).values;return r=Xfe(i),n.makeOutput(r,e.shape,e.dtype)},uht={kernelName:II,backendName:"cpu",kernelFunc:cht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ni(t){return(e,n,r,i,s)=>{const o=kn(e,n),a=o.length,l=on(o),c=it(o),u=Xs(s,c),d=e.length,f=n.length,h=on(e),p=on(n),v=Bv(e,o),m=Bv(n,o);if(v.length+m.length===0)for(let g=0;g<u.length;++g)u[g]=t(r[g%r.length],i[g%i.length]);else for(let g=0;g<u.length;++g){const y=Ty(g,a,l),x=y.slice(-d);v.forEach(T=>x[T]=0);const S=Au(x,d,h),_=y.slice(-f);m.forEach(T=>_[T]=0);const C=Au(_,f,p);u[g]=t(r[S],i[C])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function da(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",o)},a}const dht={kernelName:h6,backendName:"cpu",kernelFunc:da};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KM(t,e,n="float32"){if(n==="complex64"){const i=KM(t,e,"float32"),s=KM(t,e,"float32");return da({inputs:{real:i,imag:s},backend:t})}const r=qs(it(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ju(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const fht={kernelName:V2,backendName:"cpu",kernelFunc:ju};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Um(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const hht={kernelName:O6,backendName:"cpu",kernelFunc:Um};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qfe(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=sg([0],n),[s,o]=Ni((a,l)=>a!==l?1:0)(e,[],t,i,"bool");return[o,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function gh(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return ju({inputs:{x:i},backend:n});const u=KM(n,i.shape,i.dtype),d=gh({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),f=da({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),f}if(i.dtype==="complex64"){const u=Um({inputs:{input:i},backend:n}),d=gh({inputs:{x:u},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(u),d}if(!hle(i.dtype,s)){const u=ju({inputs:{x:i},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:s}}const o=n.data.get(i.dataId).values,[a,l,c]=qfe(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,l,c)}const pht={kernelName:I2,backendName:"cpu",kernelFunc:gh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ss(t,e,n,r){return n==null?({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;qt([o,a],t);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=o.dtype==="string"?Xd(c):c,f=o.dtype==="string"?Xd(u):u,h=r||o.dtype,[p,v]=e(o.shape,a.shape,d,f,h);return l.makeTensorInfo(v,h,p)}:({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;if(o.dtype==="complex64"||a.dtype==="complex64"){const c=gh({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,f=u.complexTensorInfos.imag,h=l.data.get(d.dataId).values,p=l.data.get(f.dataId).values,v=gh({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),m=l.data.get(v.dataId),g=m.complexTensorInfos.real,y=m.complexTensorInfos.imag,x=l.data.get(g.dataId).values,S=l.data.get(y.dataId).values,[_,C,T]=n(o.shape,a.shape,h,p,x,S),A=l.makeTensorInfo(T,"float32",_),k=l.makeTensorInfo(T,"float32",C),M=da({inputs:{real:A,imag:k},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(v),l.disposeIntermediateTensorInfo(A),l.disposeIntermediateTensorInfo(k),M}else{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=r||o.dtype,[f,h]=e(o.shape,a.shape,c,u,d);return l.makeTensorInfo(h,d,f)}}}function k8(t){return(e,n,r,i,s,o)=>{const a=kn(e,n),l=it(a),c=a.length,u=on(a),d=Xs("float32",l),f=Xs("float32",l),h=Bv(e,a),p=Bv(n,a),v=jd(r,i),m=jd(s,o),g=e.length,y=on(e),x=n.length,S=on(n);if(h.length+p.length===0)for(let _=0;_<d.length;_++){const C=_%v.length,T=_%m.length,A=t(v[C*2],v[C*2+1],m[T*2],m[T*2+1]);d[_]=A.real,f[_]=A.imag}else for(let _=0;_<d.length;_++){const C=Ty(_,c,u),T=C.slice(-g);h.forEach(P=>T[P]=0);const A=Au(T,g,y),k=C.slice(-x);p.forEach(P=>k[P]=0);const M=Au(k,x,S),R=t(v[A*2],v[A*2+1],m[M*2],m[M*2+1]);d[_]=R.real,f[_]=R.imag}return[d,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yfe=Ni((t,e)=>t+e),mht=k8((t,e,n,r)=>({real:t+n,imag:e+r})),Gv=ss(Ey,Yfe,mht),ght={kernelName:Ey,backendName:"cpu",kernelFunc:Gv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A8(t,e,n,r,i){const s=it(r),o=qs(i,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?o[l]+=e[a]:o[l]+=1)}return o}function Kfe(t,e,n,r=!1){const i=t.shape[0],s=t.shape[1],o=Bn([i,n],e.dtype);for(let a=0;a<i;a++)for(let l=0;l<s;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,a,c):e.size>0?o.set(o.get(a,c)+e.get(a,l),a,c):o.set(o.get(a,c)+1,a,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zfe=Ni((t,e)=>t&e),vht=ss(f6,Zfe),yht={kernelName:f6,backendName:"cpu",kernelFunc:vht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zu(t){return(e,n,r)=>{const i=Ei(n,e.length);for(let s=0;s<e.length;++s)i[s]=t(e[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cr(t,e,n){const r=Zu(e);return Fh(t,r,n)}function Fh(t,e,n){return({inputs:r,attrs:i,backend:s})=>{const{x:o}=r;qt(o,t);const a=s,l=a.data.get(o.dataId).values;let c;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=Xd(l)}else c=l;const u=n||o.dtype,d=e(c,u,i);return a.makeTensorInfo(o.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jfe=Zu(t=>Math.ceil(t)),xht=Fh(R2,Jfe),bht={kernelName:R2,backendName:"cpu",kernelFunc:xht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qfe(t,e,n,r){const i=Ei(n,it(e));if(r&&n!=="string"){let s=0;t.forEach(o=>{const a=it(o.shape);i.set(o.vals,s),s+=a})}else{let s=0;t.forEach(o=>{const a=n==="string"?Xd(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*e[1]+s;for(let d=0;d<o.shape[1];++d)i[u+d]=a[l++]}s+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ehe=Ni((t,e)=>t===e?1:0),the=ss(HI,ehe,null,"bool"),wht={kernelName:HI,backendName:"cpu",kernelFunc:the};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nhe=Zu(t=>Math.exp(t)),rhe=Fh(F2,nhe,"float32"),Sht={kernelName:F2,backendName:"cpu",kernelFunc:rhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ihe=Zu(t=>Math.expm1(t)),_ht=Fh(U2,ihe),Cht={kernelName:U2,backendName:"cpu",kernelFunc:_ht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const she=Zu(t=>Math.floor(t)),Tht=Fh(B2,she),Eht={kernelName:B2,backendName:"cpu",kernelFunc:Tht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ohe=Ni((t,e)=>Math.floor(t/e)),Mht=ss(z2,ohe,null,"int32"),kht={kernelName:z2,backendName:"cpu",kernelFunc:Mht};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ahe(t,e,n,r,i,s,o,a,l){const c=Bn([r,s],n);for(let u=0;u<r;u++){const d=[];let f=0;for(let h=0;h<i;h++){const p=t[u*i+h];f+=p*o[h],d.push(p)}if(f<0||f>=l/s)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<s;h++)c.values[u*s+h]=e.get(...e.indexToLoc(f*s+h))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lhe(t,e,n){const r=Bn(n,t.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),a=o[0],l=o[2],c=e.locToIndex([a,l]);o[2]=e.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(r.values[i]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const che=Ni((t,e)=>t>e?1:0),Aht=ss(YI,che,null,"bool"),Iht={kernelName:YI,backendName:"cpu",kernelFunc:Aht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uhe=Ni((t,e)=>t>=e?1:0),Rht=ss(W2,uhe,null,"bool"),Nht={kernelName:W2,backendName:"cpu",kernelFunc:Rht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dhe=Ni((t,e)=>t<e?1:0),Pht=ss(ZI,dhe,null,"bool"),$ht={kernelName:ZI,backendName:"cpu",kernelFunc:Pht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fhe=Ni((t,e)=>t<=e?1:0),Dht=ss(JI,fhe,null,"bool"),Lht={kernelName:JI,backendName:"cpu",kernelFunc:Dht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hhe(t,e,n){const r=(e-t)/(n-1),i=qs(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const phe=Zu(t=>Math.log(t)),Oht=Fh(X2,phe),Fht={kernelName:X2,backendName:"cpu",kernelFunc:Oht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mhe(t,e,n,r){const i=Xs(r,it(n));for(let s=0;s<i.length;++s){const o=s*e;let a=t[o];for(let l=0;l<e;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}i[s]=a}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ghe=Ni((t,e)=>Math.max(t,e)),Uht=ss(Y2,ghe),Bht={kernelName:Y2,backendName:"cpu",kernelFunc:Uht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vhe=Ni((t,e)=>Math.min(t,e)),zht=ss(K2,vhe),Wht={kernelName:K2,backendName:"cpu",kernelFunc:zht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I8=Ni((t,e)=>t*e),Vht=k8((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),ZR=ss(J2,I8,Vht),Ght={kernelName:J2,backendName:"cpu",kernelFunc:ZR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yhe(t,e,n){const r=Ih(-1,n);return I8([],e,r,t,n)}function Hht(t){const{inputs:e,backend:n}=t,{x:r}=e;qt(r,"neg");const i=n.data.get(r.dataId).values,[s,o]=yhe(i,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}const jht={kernelName:cR,backendName:"cpu",kernelFunc:Hht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xhe=Ni((t,e)=>t!==e?1:0),Xht=ss(uR,xhe,null,"bool"),qht={kernelName:uR,backendName:"cpu",kernelFunc:Xht};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R8(t,e,n,r,i){const s=e.length,o=it(e),a=on(e),l=on(i),c=Xs(n,it(i));for(let u=0;u<o;++u){const d=Ty(u,s,a),f=new Array(d.length);for(let p=0;p<f.length;p++)f[p]=d[r[p]];const h=Au(f,s,l);c[h]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xo(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:s}=n;qt(i,"transpose");const o=i.shape.length,a=new Array(o);for(let d=0;d<a.length;d++)a[d]=i.shape[s[d]];const l=r.data.get(i.dataId).values,c=R8(l,i.shape,i.dtype,s,a);return{dataId:r.write(c,a,i.dtype),shape:a,dtype:i.dtype}}const Yht={kernelName:ov,backendName:"cpu",kernelFunc:Xo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bhe(t,e,n,r){const[i,s]=xs(t,r),o=_a(e,"int32"),a=qs(it(i),o),l=it(s);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let f=0;f<l;++f)d*=n[u+f];a[c]=d}return{outVals:a,outShape:i,outDtype:o}}function Kht(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;qt(i,"prod");const a=i.shape.length,l=Wn(s,i.shape),c=ui(l,a);let u=l,d=i;const f=[];c!=null&&(d=Xo({inputs:{x:i},backend:n,attrs:{perm:c}}),f.push(d),u=Ii(u.length,a));const h=n.data.get(d.dataId).values,{outVals:p,outShape:v,outDtype:m}=bhe(d.shape,d.dtype,h,u);let g=v;return o&&(g=Wi(v,l)),f.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(g,m,p)}const Zht={kernelName:gR,backendName:"cpu",kernelFunc:Kht};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jht(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const s=Ty(i,e.length,on(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function Qht(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function ept(t,e,n,r){const i=[];let s=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);Qht(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let f=0;f<n.length;++f){const h=n[f],p=f+e.length-1;if(p>=0){const v=a[p],m=v[v.length-1]-h[u];for(let g=u;g<d;++g)a[p].push(h[g+1]+m)}u=h[u],d=h[d]}d!==u&&(i.push([u,d]),s+=d-u)}return{outSplits:a,valueSlices:i,numValues:s}}function tpt(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=Ei("int32",r);e.push(i),t[n].forEach((s,o)=>i[o]=s)}return e}function rK(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function npt(t,e,n,r,i,s){const o=rK(e,2)[1],a=rK(s,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)i[l*a+d]=t[u*o+d];++l}}function rpt(t,e,n,r,i){const s=e.slice();s[0]=i;const o=Ei(n,it(s)),a=t.length,l=a===0?0:a/e[0];return npt(t,e,r,l,o,s),[o,s]}function whe(t,e,n,r,i,s,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(Jht(s,o,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:f}=ept(s,o,t,c),h=tpt(u),p=rpt(n,r,i,d,f);return[h,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iK=2147483647;function She(t,e,n,r,i,s,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=i.length===0,c=o.length===0,u=[];a||u.push(e[0]),l||u.push(i[0]),c||u.push(o[0]);for(let m=1;m<u.length;++m)if(u[m]!==u[m-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],f=Ei("int32",d+1);f[0]=0;for(let m=0;m<d;++m){const g=a?t[0]:t[m],y=l?r[0]:r[m],x=c?s[0]:s[m];if(x===0)throw new Error("Requires delta != 0");let S;if(x>0&&y<g||x<0&&y>g)S=0;else if(S=Math.ceil(Math.abs((y-g)/x)),S>iK)throw new Error(`Requires ((limit - start) / delta) <= ${iK}`);f[m+1]=f[m]+S}const h=f[d],p=Ei(n,h);let v=0;for(let m=0;m<d;++m){const g=f[m+1]-f[m];let y=a?t[0]:t[m];const x=c?s[0]:s[m];for(let S=0;S<g;++S)p[v++]=y,y+=x}return[f,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var xl=yc;class ZM{constructor(e,n,r,i,s,o,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=cue(u),this.raggedRank=uue(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===xl.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===xl.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case xl.VALUE_ROWIDS:return ZM.getMaxWidthValueRowID(n);case xl.ROW_SPLITS:return ZM.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${xl[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const s=e[i+1]-e[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],s=0;for(let o=1;o<n;++o){const a=e[o];a!==i&&(i=a,s=Math.max(o-r,s),r=o)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return oK(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;due(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=lue(this.raggedRank,i,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),s=[];let o=0;for(let a=0;a<i;++a,o+=n)s.push(o);for(let a=i;a<e;++a)s.push(-1);return ue(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,i){const s=e.length,o=[];for(let a=0;a<s-1;++a){const l=e[a+1]-e[a];let c=Math.min(i,l),u=n[a];u===-1&&(c=0);for(let d=0;d<c;++d)o.push(u),u+=r;for(let d=0;d<l-c;++d)o.push(-1)}if(s>0&&o.length!==e[s-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,i){const s=e.length,o=[];if(s===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];o.push(c);for(let u=1;u<s;++u){const d=e[u];if(d===l)c>=0&&(++a,a<i?c+=r:c=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,i){const s=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case xl.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,i);case xl.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,i);default:throw new Error(`Unsupported partition type: ${xl[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case xl.FIRST_DIM_SIZE:return e[0];case xl.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case xl.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${xl[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=oK(r,!1),o=Ei(this.valuesDType,it(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,o,s)}return[s,o]}setOutput(e,n,r,i){if(r.length===0)return;const s=this.values,o=r;let a=i.slice();a=a.slice(e+1);const l=it(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const p=this.defaultValueShape;Ze(()=>{const v=Ve(u,p);u=z1(v,a).dataSync()})}let d=0,f=0,h=0;for(let p=0;p<=c;++p){let v=p<c?n[p]:-1;if(v===h){++h;continue}if(f<h){const m=s.subarray(d*l),g=o.subarray(f*l),y=(h-f)*l;sK(g,m,y)}if(p>=c){const m=r.length;v=Math.floor(m/l)}if(v>h)if(this.defaultValue.length===1)o.subarray(h*l,v*l).fill(this.defaultValue[0]),h=v;else for(;v>h;){const m=o.slice(h*l);sK(m,u,l),++h}v<0?(d=p+1,f=h):(d=p,f=h,h=f+1)}}}function sK(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function oK(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function _he(t,e,n,r,i,s,o,a,l,c){return new ZM(t,e,n,r,i,s,o,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Che(t,e,n,r){const i=t===e,s=t<e&&n<0,o=e<t&&n>1;if(i||s||o)return qs(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=qs(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const The=Zu(t=>1/Math.sqrt(t)),ipt=Fh(iS,The),spt={kernelName:iS,backendName:"cpu",kernelFunc:ipt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hp(t,e,n,r,i,s,o,a,l,c){const u=[r/i,i],d=t.values,f=e.values;if(r===0)return Bn(n,e.dtype);const h=l instanceof Is?l:Bn(u,e.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let p=0;p<s;p++){const v=[];let m=0;for(let g=0;g<o;g++){const y=d[p*o+g];v.push(y),m+=y*a[g]}if(m<0||m>=r/i)throw new Error(`Invalid indices: ${v} does not index into ${n}`);for(let g=0;g<i;g++)c?h.values[m*i+g]+=f[p*i+g]:h.values[m*i+g]=e.rank===0?f[0]:f[p*i+g]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const opt=Zu(t=>1/(1+Math.exp(-t))),Ehe=Cr(cS,t=>1/(1+Math.exp(-t))),apt={kernelName:cS,backendName:"cpu",kernelFunc:Ehe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mhe(t,e,n,r,i){const s=Fz(r,e,n),o=it(n),a=on(r);if(s){const d=Uz(e,a);return i==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=i==="string"?Xd(t):t,c=Bn(r,i,l),u=Bn(n,i);for(let d=0;d<u.size;++d){const f=u.indexToLoc(d),h=f.map((p,v)=>p+e[v]);u.set(c.get(...h),...f)}return i==="string"?Rue(u.values):u.values}function Bm(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:o}=r;qt(i,"slice");const[a,l]=LR(i,s,o);Lz(i,a,l);const c=n.data.get(i.dataId).values,u=Mhe(c,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,u)}const lpt={kernelName:SR,backendName:"cpu",kernelFunc:Bm};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function khe(t,e,n,r,i,s,o){const a=e[0],l=s[0],c=new Array(l),u=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(yue(a));const m=Ei(n,0),g=Ei(i,0);return[m,[0,d],g,c,u]}let f=!0,h=0;const p=new Array(l).fill(0);for(let m=0;m<a;++m){const g=t[m*d];if(g<0)throw new Error(xue(m,g));if(g>=l)throw new Error(bue(m,g,l));++p[g],f=f&&g>=h,h=g}let v=!0;for(let m=0;m<l;++m){const g=p[m]===0;c[m]=g,v=v&&!g,p[m]=Math.max(p[m],1),m>0&&(p[m]+=p[m-1])}if(v&&f){const m=t,g=r;for(let y=0;y<a;++y)u[y]=y;return[m,[a,d],g,c,u]}else{const m=p[l-1],g=Ei(n,m*d),y=Ei(i,m),x=new Array(l).fill(0);for(let S=0;S<a;++S){const _=t[S*d],C=x[_],T=(_===0?0:p[_-1])+C;x[_]++;for(let A=0;A<d;++A)g[T*d+A]=t[S*d+A];y[T]=r[S],u[S]=T}for(let S=0;S<l;++S)if(x[S]===0){const C=S===0?0:p[S-1];g[C*d+0]=S;for(let T=1;T<d;++T)g[C*d+T]=0;y[C]=o}return[g,[m,d],y,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ahe(t,e,n,r,i){const s=it(r),o=e[0],a=i.length,l=[];let c=1,u=-1;for(let m=0;m<a;++m){const g=i[m];if(g===-1){if(u!==-1)throw new Error(wue(u,m));u=m,l.push(1)}else{if(g<0)throw new Error(Sue(m,g));c*=g,l.push(g)}}if(u!==-1){if(c<=0)throw new Error(_ue());const m=Math.trunc(s/c);if(c*m!==s)throw new Error(Cue(r,l));l[u]=m}if(it(l)!==s)throw new Error(Tue(r,l));const f=r.length,h=[];if(f>0){h[f-1]=1;for(let m=f-2;m>=0;--m)h[m]=h[m+1]*r[m+1]}const p=[];if(a>0){p[a-1]=1;for(let m=a-2;m>=0;--m)p[m]=p[m+1]*l[m+1]}const v=Ei(n,o*a);for(let m=0;m<o;++m){let g=0;for(let y=0;y<f;++y)g+=t[m*f+y]*h[y];for(let y=0;y<a;++y)v[m*a+y]=Math.trunc(g/p[y]),g%=p[y]}return[v,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8(t,e,n,r,i,s=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],d=a>0?i[a-1]+1:0;if(d<0)throw new Error(t4());const f=e.slice();f[0]=d;const h=f.reduce((x,S)=>x*S,1),p=Ei(n,h);if(a===0)return d>0&&p.fill(o),[p,f];if(d<=0)throw new Error(t4());let v=0,m=1,g=0,y=i[v];for(;;){let x=0;if(m<a){if(x=i[m],y===x){++m;continue}if(y>=x)throw new Error(Eue())}if(y<0||y>=d)throw new Error(Mue(y,d));y>g&&p.fill(o,g*c,y*c);for(let S=v;S<m;++S){const _=r[S];if(_<0||_>=l[0])throw new Error(kue(S,r[S],l[0]));for(let C=0;C<c;C++)p[y*c+C]+=t[_*c+C]}if(s)for(let S=0;S<c;S++)p[y*c+S]/=m-v;if(v=m,++m,g=y+1,y=x,m>a)break}return g<d&&p.fill(o,g*c,d*c),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cpt=Zu(t=>Math.sqrt(t)),upt=Cr(dS,t=>Math.sqrt(t)),dpt={kernelName:dS,backendName:"cpu",kernelFunc:upt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ihe=Ni((t,e)=>{const n=t-e;return n*n}),fpt=ss(fS,Ihe),hpt={kernelName:fS,backendName:"cpu",kernelFunc:fpt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rhe=Zu((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),ppt=Fh(z6,Rhe),mpt={kernelName:z6,backendName:"cpu",kernelFunc:ppt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nhe(t,e,n,r){const i=Bn(t,e.dtype);for(let s=0;s<i.size;s++){const o=i.indexToLoc(s),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];i.set(e.get(...a),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gpt{constructor(e,n,r,i,s,o){this.separator=Jf(e),this.nGramWidths=n,this.leftPad=Jf(r),this.rightPad=Jf(i),this.padWidth=s,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,s,o){for(let a=0;a<s;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(s-(a+1))),d=o-(c+u),f=n+(c>0?0:a-l);let h=0;h+=c*this.leftPad.length;for(let y=0;y<d;++y)h+=e[f+y].length;h+=u*this.rightPad.length;const p=c+u+d-1;h+=p*this.separator.length,r[i+a]=new Uint8Array(h);const v=r[i+a];let m=0;const g=y=>y.forEach(x=>v[m++]=x);for(let y=0;y<c;++y)g(this.leftPad),g(this.separator);for(let y=0;y<d-1;++y)g(e[f+y]),g(this.separator);if(d>0){g(e[f+d-1]);for(let y=0;y<u;++y)g(this.separator),g(this.rightPad)}else{for(let y=0;y<u-1;++y)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,o=Ei("int32",i);if(r===0||i===0){const l=new Array(r);for(let c=0;c<=s;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=s;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[s]);for(let l=0;l<s;++l){const c=n[l];let u=o[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],h=this.getNumNGrams(f,d);this.createNGrams(e,c,a,u,h,d),u+=h}),this.preserveShort&&u===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth,h=1;this.createNGrams(e,c,a,u,h,f)}}return[a,o]}}function Phe(t,e,n,r,i,s,o,a){return new gpt(n,r,i,s,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vpt(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let o=t.indexOf(s);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const o=t.subarray(i,s);(!n||o.length!==0)&&r.push(o),i=s+1}}function $he(t,e,n){const r=t.length,i=[];let s=0,o=0;const a=new Array(r);for(let f=0;f<r;++f){const h=i.length;vpt(t[f],e,n,i);const p=i.length-h;a[f]=p,s+=p,o=Math.max(o,p)}const l=Ei("int32",s*2),c=new Array(s),u=[r,o];let d=0;for(let f=0;f<r;++f)for(let h=0;h<a[f];++h)l[d*2]=f,l[d*2+1]=h,c[d]=i[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dhe(t,e){const n=Ei("int32",t.length);for(let r=0;r<t.length;++r)n[r]=Rnt(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lhe=Ni((t,e)=>t-e),ypt=k8((t,e,n,r)=>({real:t-n,imag:e-r})),P8=ss(hS,Lhe,ypt),xpt={kernelName:hS,backendName:"cpu",kernelFunc:P8};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ohe(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Bn(n,t.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=s[l]%t.shape[l];const a=t.locToIndex(o);r.values[i]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a1=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function Fhe(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(e-l*u/a+d)),h=Math.min(r,Math.floor(e+(a-l)*u/a+d));Fhe(t,e,f,h)}const i=t[e];let s=n,o=r;for(v0(t,n,e),a1(t[r],i)>0&&v0(t,n,r);s<o;){for(v0(t,s,o),s++,o--;a1(t[s],i)<0;)s=s+1;for(;a1(t[o],i)>0;)o=o-1}a1(t[n],i)===0?v0(t,n,o):(o=o+1,v0(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function Uhe(t,e,n,r,i){const s=e[e.length-1],[o,a]=[t.length/s,s],l=Xs(n,o*r),c=Xs("int32",o*r);for(let d=0;d<o;d++){const f=d*a,h=t.subarray(f,f+a);let p=new Array(h.length);h.forEach((y,x)=>p[x]={value:y,index:x}),r<p.length&&(Fhe(p,r),p=p.slice(0,r)),i&&p.sort(a1);const v=d*r,m=l.subarray(v,v+r),g=c.subarray(v,v+r);for(let y=0;y<r;y++)m[y]=p[y].value,g[y]=p[y].index}const u=e.slice();return u[u.length-1]=r,[Bn(u,n,l),Bn(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bhe(t,e,n,r){const i=Wn(e,n)[0],s=[1,n[0],1];for(let p=0;p<i;p++)s[0]*=n[p];s[1]=n[i];for(let p=i+1;p<n.length;p++)s[2]*=n[p];const o=new Map,a=new Int32Array(n[i]),l=new Is(s,r,t),c=[],u=s[0]===1&&s[2]===1;for(let p=0;p<n[i];p++){let v;if(u)v=t[p].toString();else{const g=[];for(let y=0;y<s[0];y++)for(let x=0;x<s[2];x++)g.push(l.get(y,p,x));v=g.join(",")}const m=o.get(v);if(m!=null)a[p]=m;else{const g=o.size;o.set(v,g),a[p]=g,c.push(p)}}const d=s.slice();d[1]=o.size;const f=new Is(d,r);c.forEach((p,v)=>{for(let m=0;m<s[0];m++)for(let g=0;g<s[2];g++)f.set(l.get(m,p,g),m,v,g)});const h=n.slice();return h[i]=d[1],{outputValues:f.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bpt=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Yfe,bincountImpl:A8,bincountReduceImpl:Kfe,bitwiseAndImpl:Zfe,castImpl:qfe,ceilImpl:Jfe,concatImpl:Qfe,equalImpl:ehe,expImpl:nhe,expm1Impl:ihe,floorDivImpl:ohe,floorImpl:she,gatherNdImpl:ahe,gatherV2Impl:lhe,greaterEqualImpl:uhe,greaterImpl:che,lessEqualImpl:fhe,lessImpl:dhe,linSpaceImpl:hhe,logImpl:phe,maxImpl:mhe,maximumImpl:ghe,minimumImpl:vhe,multiplyImpl:I8,negImpl:yhe,notEqualImpl:xhe,prodImpl:bhe,raggedGatherImpl:whe,raggedRangeImpl:She,raggedTensorToTensorImpl:_he,rangeImpl:Che,rsqrtImpl:The,scatterImpl:Hp,sigmoidImpl:opt,simpleAbsImpl:Xfe,sliceImpl:Mhe,sparseFillEmptyRowsImpl:khe,sparseReshapeImpl:Ahe,sparseSegmentReductionImpl:N8,sqrtImpl:cpt,squaredDifferenceImpl:Ihe,staticRegexReplaceImpl:Rhe,stridedSliceImpl:Nhe,stringNGramsImpl:Phe,stringSplitImpl:$he,stringToHashBucketFastImpl:Dhe,subImpl:Lhe,tileImpl:Ohe,topKImpl:Uhe,transposeImpl:R8,uniqueImpl:Bhe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */oce("cpu",()=>new KR,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zhe=Cr(L2,t=>t>=0?t:Math.exp(t)-1),wpt={kernelName:L2,backendName:"cpu",kernelFunc:zhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Whe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r;qt([i],"leakyRelu");const o=it(i.shape),a=n.data.get(i.dataId).values,l=Xs("float32",o);for(let c=0;c<a.length;c++)l[c]=a[c]<0?s*a[c]:a[c];return n.makeTensorInfo(i.shape,"float32",l)}const Spt={kernelName:KI,backendName:"cpu",kernelFunc:Whe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _pt=Ni((t,e)=>t<0?e*t:t);function Vhe(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;qt([r,i],"prelu");const s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[a,l]=_pt(r.shape,i.shape,s,o,"float32");return n.makeTensorInfo(l,"float32",a)}const Cpt={kernelName:mR,backendName:"cpu",kernelFunc:Vhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ghe=Cr(tS,t=>Math.max(0,t)),Tpt={kernelName:tS,backendName:"cpu",kernelFunc:Ghe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hhe=Cr(nS,t=>Math.min(Math.max(0,t),6)),Ept={kernelName:nS,backendName:"cpu",kernelFunc:Hhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JM(t,e,n,r,i){if(n==="linear")return ju({inputs:{x:e},backend:t});if(n==="relu")return Ghe({inputs:{x:e},backend:t});if(n==="elu")return zhe({inputs:{x:e},backend:t});if(n==="relu6")return Hhe({inputs:{x:e},backend:t});if(n==="prelu")return Vhe({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return Whe({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return Ehe({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ur(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,o=it(i.shape),a=fle(s,o),l=it(a);ue(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:i.dataId,shape:a,dtype:i.dtype}}const Mpt={kernelName:vR,backendName:"cpu",kernelFunc:Ur};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jhe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;qt([i,s],"matMul");const l=i.shape.length,c=s.shape.length,u=o?i.shape[l-2]:i.shape[l-1],d=a?s.shape[c-1]:s.shape[c-2],f=o?i.shape[l-1]:i.shape[l-2],h=a?s.shape[c-2]:s.shape[c-1],p=i.shape.slice(0,-2),v=s.shape.slice(0,-2),m=it(p),g=it(v),x=kn(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([f,h]);ue(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${o} and transposeB=${a} must match.`);const S=o?[m,u,f]:[m,f,u],_=a?[g,h,d]:[g,d,h],C=Ur({inputs:{x:i},backend:n,attrs:{shape:S}}),T=Ur({inputs:{x:s},backend:n,attrs:{shape:_}}),A=o?C.shape[1]:C.shape[2],k=o?C.shape[2]:C.shape[1],M=a?T.shape[1]:T.shape[2],R=Math.max(m,g),P=n.data.get(C.dataId).values,O=n.data.get(T.dataId).values,$=on(C.shape),U=on(T.shape),[z,X,D]=o?[$[0],1,$[1]]:[$[0],$[1],1],[F,W,V]=a?[1,U[1],U[0]]:[U[1],1,U[0]],j=k*M,J=Bn([R,k,M],C.dtype),Q=J.values,te=n.blockSize;for(let re=0;re<R;re++){const se=re%m,fe=re%g;for(let ae=0;ae<k;ae+=te){const ye=Math.min(ae+te,k);for(let le=0;le<M;le+=te){const H=Math.min(le+te,M);for(let Me=0;Me<A;Me+=te){const we=Math.min(Me+te,A);for(let Ee=ae;Ee<ye;Ee++)for(let me=le;me<H;me++){let qe=0;for(let ke=Me;ke<we;ke++){const ee=P[se*z+Ee*X+ke*D],Y=O[ke*F+me*W+fe*V];qe+=ee*Y}Q[re*j+(Ee*M+me)]+=qe}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(T),n.makeTensorInfo(x,J.dtype,J.values)}const kpt={kernelName:DI,backendName:"cpu",kernelFunc:jhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Apt(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let f,h,p;const v=[];f=jhe({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:c},backend:n}),o&&(h=Gv({inputs:{a:f,b:o},backend:n}),v.push(f),f=h),u&&(p=JM(n,f,u,a,d),v.push(f),f=p);for(const g of v)n.disposeIntermediateTensorInfo(g);return f}const Ipt={kernelName:AM,backendName:"cpu",kernelFunc:Apt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rpt=Cr(_2,t=>Math.acos(t)),Npt={kernelName:_2,backendName:"cpu",kernelFunc:Rpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ppt=Cr(C2,t=>Math.acosh(t)),$pt={kernelName:C2,backendName:"cpu",kernelFunc:Ppt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dpt(t){const{inputs:e,backend:n}=t,r=e;qt(e,"addN");const i=r.map(a=>n.data.get(a.dataId).values),s=Bn(r[0].shape,r[0].dtype),o=s.values;for(let a=0;a<r.length;a++){const l=i[a];for(let c=0;c<o.length;c++)o[c]+=l[c]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const Lpt={kernelName:o6,backendName:"cpu",kernelFunc:Dpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Opt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;qt(i,"all");const a=Wn(s,i.shape);let l=a;const c=ui(l,i.shape.length);let u=i;c!=null&&(u=Xo({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Ii(l.length,i.shape.length)),Ds("all",l,u.shape.length);const[d,f]=xs(u.shape,l),h=it(f),p=qs(it(d),u.dtype),v=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const y=g*h;let x=v[y];for(let S=0;S<h;++S){const _=v[y+S];x=x&&_}p[g]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(d,u.dtype,p);if(o){const g=Wi(d,a),y=Ur({inputs:{x:m},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(m),y}return m}const Fpt={kernelName:a6,backendName:"cpu",kernelFunc:Opt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Upt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;qt(i,"any");const a=Wn(s,i.shape);let l=a;const c=ui(l,i.shape.length);let u=i;c!=null&&(u=Xo({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Ii(l.length,i.shape.length)),Ds("any",l,u.shape.length);const[d,f]=xs(u.shape,l),h=it(f),p=qs(it(d),u.dtype),v=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const y=g*h;let x=v[y];for(let S=0;S<h;++S){const _=v[y+S];x=x||_}p[g]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(d,u.dtype,p);if(o){const g=Wi(d,a),y=Ur({inputs:{x:m},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(m),y}return m}const Bpt={kernelName:l6,backendName:"cpu",kernelFunc:Upt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zpt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;qt(i,"argMax");let o=Wn(s,i.shape);const a=ui(o,i.shape.length);let l=i;const c=[];a!=null&&(l=Xo({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),o=Ii(o.length,l.shape.length)),o=[o[0]],Ds("argMax",o,l.shape.length);const[u,d]=xs(l.shape,o),f=it(u),h=qs(f,"int32"),p=it(d),v=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const g=m*p;let y=v[g],x=0;for(let S=0;S<p;++S){const _=v[g+S];_>y&&(y=_,x=S)}h[m]=x}return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(u,"int32",h)}const Wpt={kernelName:RI,backendName:"cpu",kernelFunc:zpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vpt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;qt(i,"argMin");let o=Wn(s,i.shape);const a=ui(o,i.shape.length);let l=i;const c=[];a!=null&&(l=Xo({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),o=Ii(o.length,l.shape.length)),o=[o[0]],Ds("argMin",o,l.shape.length);const[u,d]=xs(l.shape,o),f=it(u),h=qs(f,"int32"),p=it(d),v=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const g=m*p;let y=v[g],x=0;for(let S=0;S<p;++S){const _=v[g+S];_<y&&(y=_,x=S)}h[m]=x}return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(u,"int32",h)}const Gpt={kernelName:NI,backendName:"cpu",kernelFunc:Vpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hpt=Cr(T2,t=>Math.asin(t)),jpt={kernelName:T2,backendName:"cpu",kernelFunc:Hpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xpt=Cr(E2,t=>Math.asinh(t)),qpt={kernelName:E2,backendName:"cpu",kernelFunc:Xpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ypt=Cr(M2,t=>Math.atan(t)),Kpt={kernelName:M2,backendName:"cpu",kernelFunc:Ypt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zpt=Ni((t,e)=>Math.atan2(t,e)),Jpt=ss(A2,Zpt),Qpt={kernelName:A2,backendName:"cpu",kernelFunc:Jpt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const emt=Cr(k2,t=>Math.atanh(t)),tmt={kernelName:k2,backendName:"cpu",kernelFunc:emt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $8(t,e,n,r,i,s){const o=i.strideHeight,a=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,u=i.effectiveFilterHeight,d=i.effectiveFilterWidth,f=i.padInfo.top,h=i.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Bn(i.outShape,n),m=v.values,g=i.outShape[1]*i.outShape[2]*i.outShape[3],y=i.outShape[2]*i.outShape[3],x=i.outShape[3];for(let S=0;S<i.batchSize;++S){const _=S*g,C=S*r[0];for(let T=0;T<i.inChannels;++T)for(let A=0;A<i.outHeight;++A){const k=A*o-f,M=Math.max(0,k),R=Math.min(i.inHeight,u+k),P=_+A*y;for(let O=0;O<i.outWidth;++O){const $=O*a-h,U=Math.max(0,$),z=Math.min(i.inWidth,d+$);let X=p,D=0,F=0;for(let V=M;V<R;V+=l){const j=C+V*r[1];for(let J=U;J<z;J+=c){const Q=j+J*r[2],te=t[Q+T];s==="max"&&te>X?X=te:s==="avg"&&(D+=te,F++)}if(isNaN(X))break}const W=P+O*x+T;m[W]=s==="avg"?D/F:X}}}return v}function Xhe(t,e,n,r,i=!1,s=!1){const o=Bn(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,v=Bn(e,n,t);for(let m=0;m<r.batchSize;++m)for(let g=0;g<r.inChannels;++g)for(let y=0;y<r.outHeight;++y){const x=y*a-h;let S=x;for(;S<0;)S+=c;const _=Math.min(r.inHeight,d+x);for(let C=0;C<r.outWidth;++C){const T=C*l-p;let A=T;for(;A<0;)A+=u;const k=Math.min(r.inWidth,f+T);let M=Number.NEGATIVE_INFINITY,R=-1;for(let P=S;P<_;P+=c){const O=P-x;for(let $=A;$<k;$+=u){const U=$-T,z=v.get(m,P,$,g);z>M&&(M=z,i?R=s?((m*r.inHeight+P)*r.inWidth+$)*r.inChannels+g:(P*r.inWidth+$)*r.inChannels+g:R=O*f+U)}}o.set(R,m,y,C,g)}}return o}function qhe(t,e,n,r,i,s){const o=i.strideDepth,a=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,u=i.dilationHeight,d=i.dilationWidth,f=i.effectiveFilterDepth,h=i.effectiveFilterHeight,p=i.effectiveFilterWidth,v=i.padInfo.front,m=i.padInfo.top,g=i.padInfo.left,y=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Bn(i.outShape,n),S=x.values,_=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[2]*i.outShape[3]*i.outShape[4],T=i.outShape[3]*i.outShape[4],A=i.outShape[4];for(let k=0;k<i.batchSize;++k){const M=k*_,R=k*r[0];for(let P=0;P<i.inChannels;++P)for(let O=0;O<i.outDepth;++O){const $=O*o-v;let U=$;for(;U<0;)U+=c;const z=Math.min(i.inDepth,f+$),X=M+O*C;for(let D=0;D<i.outHeight;++D){const F=D*a-m;let W=F;for(;W<0;)W+=u;const V=Math.min(i.inHeight,h+F),j=X+D*T;for(let J=0;J<i.outWidth;++J){const Q=J*l-g;let te=Q;for(;te<0;)te+=d;const re=Math.min(i.inWidth,p+Q),se=j+J*A;let fe=y,ae=0,ye=0;for(let H=U;H<z;H+=c){const Me=R+H*r[1];for(let we=W;we<V;we+=u){const Ee=Me+we*r[2];for(let me=te;me<re;me+=d){const qe=Ee+me*r[3],ke=t[qe+P];if(s==="max"&&ke>fe?fe=ke:s==="avg"&&(ae+=ke,ye++),isNaN(fe))break}if(isNaN(fe))break}if(isNaN(fe))break}const le=se+P;S[le]=s==="avg"?ae/Math.max(ye,1):fe}}}}return x}function nmt(t,e){const n=Bn(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,h=e.padInfo.top,p=e.padInfo.left;for(let v=0;v<e.batchSize;++v)for(let m=0;m<e.inChannels;++m)for(let g=0;g<e.outDepth;++g){const y=g*r-f;let x=y;for(;x<0;)x+=o;const S=Math.min(e.inDepth,c+y);for(let _=0;_<e.outHeight;++_){const C=_*i-h;let T=C;for(;T<0;)T+=a;const A=Math.min(e.inHeight,u+C);for(let k=0;k<e.outWidth;++k){const M=k*s-p;let R=M;for(;R<0;)R+=l;const P=Math.min(e.inWidth,d+M);let O=Number.NEGATIVE_INFINITY,$=-1;for(let U=x;U<S;U+=o){const z=U-y;for(let X=T;X<A;X+=a){const D=X-C;for(let F=R;F<P;F+=l){const W=F-M,V=t.get(v,U,X,F,m);V>=O&&(O=V,$=z*u*d+D*u+W)}}}n.set($,v,g,_,k,m)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rmt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;qt(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;ue(Zs(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Jl(i.shape,s,o,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&br(u.inShape,u.outShape))d=ju({inputs:{x:i},backend:n});else{const f=n.data.get(i.dataId).values,h=on(i.shape),p=$8(f,i.shape,i.dtype,h,u,"avg");d=n.makeTensorInfo(u.outShape,i.dtype,p.values)}return d}const imt={kernelName:PI,backendName:"cpu",kernelFunc:rmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function smt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;qt(i,"avgPool3d");const u=Jd(i.shape,s,o,1,a,l,c),d=n.data.get(i.dataId).values,f=qhe(d,i.shape,i.dtype,on(i.shape),u,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const omt={kernelName:$I,backendName:"cpu",kernelFunc:smt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function amt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;qt([i,s],"avgPool3DGrad");const u=Jd(s.shape,o,a,1,l,c),d=u.strideDepth,f=u.strideHeight,h=u.strideWidth,p=u.filterDepth,v=u.filterHeight,m=u.filterWidth,g=u.dilationDepth,y=u.dilationHeight,x=u.dilationWidth,S=u.effectiveFilterDepth,_=u.effectiveFilterHeight,C=u.effectiveFilterWidth,T=S-1-u.padInfo.front,A=C-1-u.padInfo.left,k=_-1-u.padInfo.top,M=Bn(s.shape,"float32"),R=1/(p*v*m),P=n.bufferSync(i);for(let O=0;O<u.batchSize;++O)for(let $=0;$<u.inChannels;++$)for(let U=0;U<u.inDepth;++U)for(let z=0;z<u.inHeight;++z)for(let X=0;X<u.inWidth;++X){const D=U-T,F=z-k,W=X-A;let V=0;for(let j=0;j<S;j+=g){const J=(D+j)/d;if(!(J<0||J>=u.outDepth||Math.floor(J)!==J))for(let Q=0;Q<_;Q+=y){const te=(F+Q)/f;if(!(te<0||te>=u.outHeight||Math.floor(te)!==te))for(let re=0;re<C;re+=x){const se=(W+re)/h;if(se<0||se>=u.outWidth||Math.floor(se)!==se)continue;const fe=P.get(O,J,te,se,$);V+=fe}}}M.set(V*R,O,U,z,X,$)}return n.makeTensorInfo(M.shape,M.dtype,M.values)}const lmt={kernelName:u6,backendName:"cpu",kernelFunc:amt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cmt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s;qt([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Jl(o.shape,a,l,1,c),d=u.strideHeight,f=u.strideWidth,h=u.filterHeight,p=u.filterWidth,v=u.dilationHeight,m=u.dilationWidth,g=u.effectiveFilterHeight,y=u.effectiveFilterWidth,x=y-1-u.padInfo.left,S=g-1-u.padInfo.top,_=Bn(o.shape,"float32"),C=1/(h*p),T=n.data.get(i.dataId).values,A=Bn(i.shape,"float32",T);for(let k=0;k<u.batchSize;++k)for(let M=0;M<u.inChannels;++M)for(let R=0;R<u.inHeight;++R)for(let P=0;P<u.inWidth;++P){const O=R-S,$=P-x;let U=0;for(let z=0;z<g;z+=v){const X=(O+z)/d;if(!(X<0||X>=u.outHeight||Math.floor(X)!==X))for(let D=0;D<y;D+=m){const F=($+D)/f;if(F<0||F>=u.outWidth||Math.floor(F)!==F)continue;const W=A.get(k,X,F,M);U+=W}}_.set(U*C,k,R,P,M)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const umt={kernelName:c6,backendName:"cpu",kernelFunc:cmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dmt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:s,offset:o,mean:a,variance:l}=e;ue(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ue(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ue(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),qt([i,a,l,s,o],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,f=n.data.get(l.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(u.length),m=p.length,g=h.length,y=f.length,x=d.length;let S=0,_=0,C=0,T=0;for(let A=0;A<u.length;++A)v[A]=p[S++]+(u[A]-d[_++])*h[C++]/Math.sqrt(f[T++]+c),S>=m&&(S=0),_>=x&&(_=0),C>=g&&(C=0),T>=y&&(T=0);return n.makeTensorInfo(i.shape,i.dtype,v)}const fmt={kernelName:XI,backendName:"cpu",kernelFunc:dmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hmt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:o}=r;qt([i],"batchToSpaceND");const a=s.reduce((g,y)=>g*y),l=TS(i.shape,s,a),c=ES(l.length,s.length),u=MS(i.shape,s,a),d=Gz(o,s.length),f=Hz(u,o,s.length),h=Ur({inputs:{x:i},backend:n,attrs:{shape:l}}),p=Xo({inputs:{x:h},backend:n,attrs:{perm:c}}),v=Ur({inputs:{x:p},backend:n,attrs:{shape:u}}),m=Bm({inputs:{x:v},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}const pmt={kernelName:LI,backendName:"cpu",kernelFunc:hmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mmt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o}=r,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=A8(a,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}const gmt={kernelName:d6,backendName:"cpu",kernelFunc:mmt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vmt(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=kn(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const ymt={kernelName:yle,backendName:"cpu",kernelFunc:vmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xmt=Cr(N2,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),bmt={kernelName:N2,backendName:"cpu",kernelFunc:xmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wmt=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(it(e.shape)),i=n.data.get(e.dataId),s=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],d=l[c];r[c]=Math.hypot(u,d)}return n.makeOutput(r,e.shape,"float32")},Smt={kernelName:OI,backendName:"cpu",kernelFunc:wmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hv(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const _mt={kernelName:A6,backendName:"cpu",kernelFunc:Hv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jv(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=Wn(i,e[0].shape)[0],o=e.map(v=>v.shape);zz(o,s);let a=Ru(e.map(v=>v.shape),s);if(it(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(v=>it(v.shape)>0);if(l.length===1)return ju({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const v=l.map(S=>Um({inputs:{input:S},backend:n})),m=l.map(S=>Hv({inputs:{input:S},backend:n})),g=jv({inputs:v,backend:n,attrs:{axis:s}}),y=jv({inputs:m,backend:n,attrs:{axis:s}}),x=da({inputs:{real:g,imag:y},backend:n});return v.forEach(S=>n.disposeIntermediateTensorInfo(S)),m.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),x}const c=l.map(v=>{const g=[-1,it(v.shape.slice(s))];return Ur({inputs:{x:v},backend:n,attrs:{shape:g}})}),u=c.map(v=>({vals:n.data.get(v.dataId).values,shape:v.shape}));a=Ru(c.map(v=>v.shape),1);const d=c[0].shape[0]===1,f=Qfe(u,a,e[0].dtype,d),h=Ru(l.map(v=>v.shape),s),p=n.makeTensorInfo(h,e[0].dtype,f);return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),p}const Cmt={kernelName:FI,backendName:"cpu",kernelFunc:jv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yhe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;qt([i,s],"conv2d");const d=Qd(l),f=$s(i.shape,s.shape,o,c,a,u,!1,d),h=f.filterHeight,p=f.filterWidth,v=f.dilationHeight,m=f.dilationWidth,g=f.padInfo.left,y=f.padInfo.top,x=f.dataFormat==="channelsLast",S=new Is(f.outShape,i.dtype),_=on(i.shape),C=on(s.shape),T=_[0],A=x?_[1]:_[2],k=x?_[2]:1,M=x?1:_[1],R=S.strides[0],P=x?S.strides[1]:S.strides[2],O=x?S.strides[2]:1,$=x?1:S.strides[1],U=n.data.get(i.dataId).values,z=n.data.get(s.dataId).values,X=S.values;for(let D=0;D<f.batchSize;++D){const F=D*T,W=D*R;for(let V=0;V<f.outHeight;++V){const j=W+V*P,J=V*f.strideHeight-y;for(let Q=0;Q<h;++Q){const te=J+Q*v;if(te<0||te>=f.inHeight)continue;const re=Q*C[0],se=F+te*A;for(let fe=0;fe<f.outWidth;++fe){const ae=j+fe*O,ye=fe*f.strideWidth-g;for(let le=0;le<p;++le){const H=ye+le*m;if(H<0||H>=f.inWidth)continue;const Me=re+le*C[1],we=se+H*k;let Ee=Me;for(let me=0;me<f.inChannels;++me){const qe=U[we+me*M];for(let ke=0;ke<f.outChannels;++ke)X[ae+ke*$]+=qe*z[Ee+ke];Ee+=f.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,X)}const Tmt={kernelName:UI,backendName:"cpu",kernelFunc:Yhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Emt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;qt([i,s],"conv2dBackpropFilter");const d=Qd(l),f=$s(i.shape,u,o,1,a,c,!1,d),{strideHeight:h,strideWidth:p,filterHeight:v,filterWidth:m}=f,g=f.dataFormat==="channelsLast",y=new Is(f.filterShape,"float32"),x=f.padInfo.left,S=f.padInfo.top,_=n.data.get(i.dataId).values,C=n.data.get(s.dataId).values,T=new Is(i.shape,i.dtype,_),A=new Is(s.shape,s.dtype,C);for(let k=0;k<v;++k){const M=Math.max(0,Math.ceil((S-k)/h)),R=Math.min(f.outHeight,(f.inHeight+S-k)/h);for(let P=0;P<m;++P){const O=Math.max(0,Math.ceil((x-P)/p)),$=Math.min(f.outWidth,(f.inWidth+x-P)/p);for(let U=0;U<f.inChannels;++U)for(let z=0;z<f.outChannels;++z){let X=0;for(let D=0;D<f.batchSize;++D)for(let F=M;F<R;++F){const W=k+F*h-S;for(let V=O;V<$;++V){const j=P+V*p-x;g?X+=T.get(D,W,j,U)*A.get(D,F,V,z):X+=T.get(D,U,W,j)*A.get(D,z,F,V)}}y.set(X,k,P,U,z)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Mmt={kernelName:p6,backendName:"cpu",kernelFunc:Emt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kmt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;qt([i,s],"conv2dBackpropInput");const d=on(s.shape),f=on(i.shape);let h=Qd(c);const p=$s(o,s.shape,a,1,l,u,!1,h),v=new Is(p.inShape,"float32"),m=v.values,g=n.data.get(i.dataId).values,y=n.data.get(s.dataId).values,[x,S,_]=d,{batchSize:C,filterHeight:T,filterWidth:A,inChannels:k,inHeight:M,inWidth:R,outChannels:P,outHeight:O,outWidth:$,strideHeight:U,strideWidth:z}=p;h=p.dataFormat;const X=T-1-p.padInfo.top,D=A-1-p.padInfo.left,F=h==="channelsLast",W=v.strides[0],V=F?v.strides[1]:v.strides[2],j=F?v.strides[2]:1,J=F?1:v.strides[1],Q=f[0],te=F?f[1]:f[2],re=F?f[2]:1,se=F?1:f[1];for(let fe=0;fe<C;++fe)for(let ae=0;ae<k;++ae)for(let ye=0;ye<M;++ye){const le=ye-X,H=Math.max(0,Math.ceil(le/U)),Me=Math.min(O,(T+le)/U);for(let we=0;we<R;++we){const Ee=we-D,me=Math.max(0,Math.ceil(Ee/z)),qe=Math.min($,(A+Ee)/z);let ke=0;for(let Y=H;Y<Me;++Y){const oe=Y*U-le;for(let xe=me;xe<qe;++xe){const Se=xe*z-Ee,be=Q*fe+te*Y+re*xe,Re=x*(T-1-oe)+S*(A-1-Se)+_*ae;for(let Ke=0;Ke<P;++Ke){const ze=g[be+se*Ke],Pe=y[Re+Ke];ke+=ze*Pe}}}const ee=W*fe+V*ye+j*we+J*ae;m[ee]=ke}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const Amt={kernelName:BI,backendName:"cpu",kernelFunc:kmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Imt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r;qt([i,s],"conv3d");const c=Nh(i.shape,s.shape,o,l,a),{filterDepth:u,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:p,dilationWidth:v,padInfo:m}=c,g=m.front,y=m.left,x=m.top,S=new Is(c.outShape,i.dtype),_=n.data.get(i.dataId).values,C=n.data.get(s.dataId).values,T=S.values,A=on(i.shape),k=on(s.shape);for(let M=0;M<c.batchSize;++M){const R=M*A[0],P=M*S.strides[0];for(let O=0;O<c.outDepth;++O){const $=P+O*S.strides[1],U=O*c.strideDepth-g;for(let z=0;z<u;++z){const X=U+z*h;if(X<0||X>=c.inDepth)continue;const D=z*k[0],F=R+X*A[1];for(let W=0;W<c.outHeight;++W){const V=$+W*S.strides[2],j=W*c.strideHeight-x;for(let J=0;J<d;++J){const Q=j+J*p;if(Q<0||Q>=c.inHeight)continue;const te=D+J*k[1],re=F+Q*A[2];for(let se=0;se<c.outWidth;++se){const fe=V+se*c.outChannels,ae=se*c.strideWidth-y;for(let ye=0;ye<f;++ye){const le=ae+ye*v;if(le<0||le>=c.inWidth)continue;const H=te+ye*k[2],Me=re+le*c.inChannels;let we=H;for(let Ee=0;Ee<c.inChannels;++Ee){const me=_[Me+Ee];for(let qe=0;qe<c.outChannels;++qe)T[fe+qe]+=me*C[we+qe];we+=c.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const Rmt={kernelName:zI,backendName:"cpu",kernelFunc:Imt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nmt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r;qt([i,s],"conv3dBackpropFilterV2");const c=on(i.shape),u=on(s.shape),d=Nh(i.shape,l,o,1,a),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,v=d.filterDepth,m=d.filterHeight,g=d.filterWidth,y=new Is(d.filterShape,"float32"),x=y.values,[S,_,C,T]=y.strides,A=n.data.get(s.dataId).values,[k,M,R,P]=u,O=n.data.get(i.dataId).values,[$,U,z,X]=c,D=d.padInfo.front,F=d.padInfo.left,W=d.padInfo.top;for(let V=0;V<v;++V){const j=Math.max(0,Math.ceil((D-V)/f)),J=Math.min(d.outDepth,(d.inDepth+D-V)/f),Q=V*S;for(let te=0;te<m;++te){const re=Math.max(0,Math.ceil((W-te)/h)),se=Math.min(d.outHeight,(d.inHeight+W-te)/h),fe=te*_+Q;for(let ae=0;ae<g;++ae){const ye=Math.max(0,Math.ceil((F-ae)/p)),le=Math.min(d.outWidth,(d.inWidth+F-ae)/p),H=ae*C+fe;for(let Me=0;Me<d.inChannels;++Me){const we=Me*T+H;for(let Ee=0;Ee<d.outChannels;++Ee){let me=0;for(let qe=0;qe<d.batchSize;++qe){const ke=qe*$,ee=qe*k;for(let Y=j;Y<J;++Y){const xe=(V+Y*f-D)*U+ke,Se=Y*M+ee;for(let be=re;be<se;++be){const Ke=(te+be*h-W)*z+xe,ze=be*R+Se;for(let Pe=ye;Pe<le;++Pe){const We=(ae+Pe*p-F)*X+Ke,gt=Pe*P+ze;me+=O[We+Me]*A[gt+Ee]}}}}x[we+Ee]=me}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Pmt={kernelName:m6,backendName:"cpu",kernelFunc:Nmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $mt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r;qt([i],"conv3dBackpropInputV2");const c=on(i.shape),u=on(s.shape),d=Nh(l,s.shape,a,1,o),f=new Is(d.inShape,"float32"),h=f.values,[p,v,m,g]=f.strides,y=n.data.get(i.dataId).values,[x,S,_,C]=c,T=n.data.get(s.dataId).values,[A,k,M,R]=u,{batchSize:P,filterDepth:O,filterHeight:$,filterWidth:U,inChannels:z,inDepth:X,inHeight:D,inWidth:F,outChannels:W,outDepth:V,outHeight:j,outWidth:J,strideDepth:Q,strideHeight:te,strideWidth:re}=d,se=O-1-d.padInfo.front,fe=$-1-d.padInfo.top,ae=U-1-d.padInfo.left;for(let ye=0;ye<P;++ye)for(let le=0;le<z;++le)for(let H=0;H<X;++H){const Me=H-se,we=Math.max(0,Math.ceil(Me/Q)),Ee=Math.min(V,(O+Me)/Q);for(let me=0;me<D;++me){const qe=me-fe,ke=Math.max(0,Math.ceil(qe/te)),ee=Math.min(j,($+qe)/te);for(let Y=0;Y<F;++Y){const oe=Y-ae,xe=Math.max(0,Math.ceil(oe/re)),Se=Math.min(J,(U+oe)/re);let be=0;for(let Re=we;Re<Ee;++Re){const Ke=Re*Q-Me;for(let ze=ke;ze<ee;++ze){const Pe=ze*te-qe;for(let De=xe;De<Se;++De){const We=De*re-oe,gt=x*ye+S*Re+_*ze+C*De,ct=A*(O-1-Ke)+k*($-1-Pe)+M*(U-1-We)+R*le;for(let Ye=0;Ye<W;++Ye){const Xe=y[gt+Ye],Le=T[ct+Ye];be+=Xe*Le}}}}h[p*ye+v*H+m*me+g*Y+le]=be}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const Dmt={kernelName:g6,backendName:"cpu",kernelFunc:$mt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lmt=Cr(P2,t=>Math.cos(t)),Omt={kernelName:P2,backendName:"cpu",kernelFunc:Lmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fmt=Cr($2,t=>Math.cosh(t)),Umt={kernelName:$2,backendName:"cpu",kernelFunc:Fmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bmt(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[u,d,f,h]=i.shape,p=s.shape[0],[v,m]=a,g=Bn([p,v,m,h],"float32"),y=n.data.get(s.dataId).values,x=n.data.get(o.dataId).values,S=n.data.get(i.dataId).values,_=on(i.shape),C=on(g.shape);for(let T=0;T<p;T++){const A=T*4,k=y[A],M=y[A+1],R=y[A+2],P=y[A+3],O=x[T];if(O>=u)continue;const $=v>1?(R-k)*(d-1)/(v-1):0,U=m>1?(P-M)*(f-1)/(m-1):0;for(let z=0;z<v;z++){const X=v>1?k*(d-1)+z*$:.5*(k+R)*(d-1);if(X<0||X>d-1){for(let D=0;D<m;D++)for(let F=0;F<h;F++){const W=F+D*C[2]+z*C[1]+T*C[0];g.values[W]=c}continue}if(l==="bilinear"){const D=Math.floor(X),F=Math.ceil(X),W=X-D;for(let V=0;V<m;V++){const j=m>1?M*(f-1)+V*U:.5*(M+P)*(f-1);if(j<0||j>f-1){for(let re=0;re<h;re++){const se=re+V*C[2]+z*C[1]+T*C[0];g.values[se]=c}continue}const J=Math.floor(j),Q=Math.ceil(j),te=j-J;for(let re=0;re<h;re++){let se=re+J*_[2]+D*_[1]+O*_[0];const fe=S[se];se=re+Q*_[2]+D*_[1]+O*_[0];const ae=S[se];se=re+J*_[2]+F*_[1]+O*_[0];const ye=S[se];se=re+Q*_[2]+F*_[1]+O*_[0];const le=S[se],H=fe+(ae-fe)*te,Me=ye+(le-ye)*te;se=re+V*C[2]+z*C[1]+T*C[0],g.values[se]=H+(Me-H)*W}}}else for(let D=0;D<m;++D){const F=m>1?M*(f-1)+D*U:.5*(M+P)*(f-1);if(F<0||F>f-1){for(let j=0;j<h;j++){const J=j+D*C[2]+z*C[1]+T*C[0];g.values[J]=c}continue}const W=Math.round(F),V=Math.round(X);for(let j=0;j<h;j++){const J=j+W*_[2]+V*_[1]+O*_[0],Q=j+D*C[2]+z*C[1]+T*C[0];g.values[Q]=S[J]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const zmt={kernelName:y6,backendName:"cpu",kernelFunc:Bmt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wmt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;qt(i,"cumprod");const l=ui([s],i.shape.length);let c=i;l!=null&&(c=Xo({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=Ii(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=_a(c.dtype,"int32"),f=r6(it(c.shape),d),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=a?(g,y)=>g+p-y-1:(g,y)=>g+y;for(let g=0;g<h.length;g+=p)for(let y=0;y<p;y++){const x=v(g,y);if(y===0)f[x]=o?1:h[x];else{const S=v(g,y-1);f[x]=o?h[S]*f[S]:h[x]*f[S]}}const m=n.makeTensorInfo(c.shape,d,f);if(l!=null){const g=Ph(l),y=Xo({inputs:{x:m},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(c),y}return m}const Vmt={kernelName:v6,backendName:"cpu",kernelFunc:Wmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gmt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;qt(i,"cumsum");const l=ui([s],i.shape.length);let c=i;l!=null&&(c=Xo({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=Ii(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=_a(c.dtype,"int32"),f=qs(it(c.shape),d),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=a?(g,y)=>g+p-y-1:(g,y)=>g+y;for(let g=0;g<h.length;g+=p)for(let y=0;y<p;y++){const x=v(g,y);if(y===0)f[x]=o?0:h[x];else{const S=v(g,y-1);f[x]=o?h[S]+f[S]:h[x]+f[S]}}const m=n.makeTensorInfo(c.shape,d,f);if(l!=null){const g=Ph(l),y=Xo({inputs:{x:m},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(c),y}return m}const Hmt={kernelName:WI,backendName:"cpu",kernelFunc:Gmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jmt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,u=A8(l,c,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(s),u=Kfe(l,c,o,a);return n.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const Xmt={kernelName:x6,backendName:"cpu",kernelFunc:jmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qmt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:o}=r;ue(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=i.shape[0],l=i.shape[1],c=i.shape[2],u=i.shape[3],d=l*s,f=c*s,h=u/(s*s),p=n.data.get(i.dataId).values,v=new Float32Array(a*d*f*h);let m=0;for(let g=0;g<a;++g)for(let y=0;y<d;++y){const x=Math.floor(y/s),S=y%s;for(let _=0;_<f;++_){const C=Math.floor(_/s),T=_%s,A=(S*s+T)*h;for(let k=0;k<h;++k){const R=k+A+u*(C+c*(x+l*g));v[m++]=p[R]}}}return n.makeTensorInfo([a,d,f,h],i.dtype,v)}const Ymt={kernelName:b6,backendName:"cpu",kernelFunc:qmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Khe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;qt([i,s],"depthwiseConv2DNative");const u=on(i.shape),d=on(s.shape);let f=l;f==null&&(f=[1,1]),ue(Zs(o,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${f}'`);const h=$s(i.shape,s.shape,o,f,a,c,!0),{filterHeight:p,filterWidth:v,dilationHeight:m,dilationWidth:g,padInfo:y}=h,x=y.left,S=y.top,_=h.outChannels/h.inChannels,C=new Is(h.outShape,i.dtype),T=n.data.get(i.dataId).values,A=n.data.get(s.dataId).values,k=C.values;for(let M=0;M<h.batchSize;++M){const R=M*u[0],P=M*C.strides[0];for(let O=0;O<h.outHeight;++O){const $=P+O*C.strides[1],U=O*h.strideHeight-S;for(let z=0;z<p;++z){const X=U+z*m;if(X<0||X>=h.inHeight)continue;const D=z*d[0],F=R+X*u[1];for(let W=0;W<h.outWidth;++W){const V=$+W*C.strides[2],j=W*h.strideWidth-x;for(let J=0;J<v;++J){const Q=j+J*g;if(Q<0||Q>=h.inWidth)continue;const te=D+J*d[1],re=F+Q*h.inChannels;let se=V,fe=te;for(let ae=0;ae<h.inChannels;++ae){const ye=T[re+ae];for(let le=0;le<_;++le)k[se+le]+=ye*A[fe+le];se+=_,fe+=_}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const Kmt={kernelName:VI,backendName:"cpu",kernelFunc:Khe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zmt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;qt([i,s],"depthwiseConv2dNativeBackpropFilter");const d=$s(i.shape,u,o,a,l,c,!0),{strideHeight:f,strideWidth:h,filterHeight:p,filterWidth:v}=d,m=new Is(d.filterShape,"float32"),g=d.padInfo.left,y=d.padInfo.top,x=d.outChannels/d.inChannels,S=n.data.get(i.dataId).values,_=new Is(i.shape,i.dtype,S),C=n.data.get(s.dataId).values,T=new Is(s.shape,s.dtype,C);for(let A=0;A<p;++A){const k=Math.max(0,Math.ceil((y-A)/f)),M=Math.min(d.outHeight,(d.inHeight+y-A)/f);for(let R=0;R<v;++R){const P=Math.max(0,Math.ceil((g-R)/h)),O=Math.min(d.outWidth,(d.inWidth+g-R)/h);for(let $=0;$<d.outChannels;++$){const U=Math.trunc($/x),z=$%x;let X=0;for(let D=0;D<d.batchSize;++D)for(let F=k;F<M;++F){const W=A+F*f-y;for(let V=P;V<O;++V){const j=R+V*h-g;X+=_.get(D,W,j,U)*T.get(D,F,V,$)}}m.set(X,A,R,U,z)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const Jmt={kernelName:w6,backendName:"cpu",kernelFunc:Zmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qmt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;qt([i,s],"depthwiseConv2DNativeBackpropInput");const d=on(i.shape),f=on(s.shape),h=$s(u,s.shape,o,a,l,c,!0),p=new Is(h.inShape,"float32"),v=p.values,[m,g,y]=p.strides,x=n.data.get(i.dataId).values,[S,_,C]=d,T=n.data.get(s.dataId).values,[A,k,M]=f,{batchSize:R,filterHeight:P,filterWidth:O,inChannels:$,inHeight:U,inWidth:z,outChannels:X,outHeight:D,outWidth:F,strideHeight:W,strideWidth:V}=h,j=P-1-h.padInfo.top,J=O-1-h.padInfo.left,Q=X/$;for(let te=0;te<R;++te)for(let re=0;re<$;++re)for(let se=0;se<U;++se){const fe=se-j,ae=Math.max(0,Math.ceil(fe/W)),ye=Math.min(D,(P+fe)/W);for(let le=0;le<z;++le){const H=le-J,Me=Math.max(0,Math.ceil(H/V)),we=Math.min(F,(O+H)/V);let Ee=0;for(let me=ae;me<ye;++me){const qe=me*W-fe;for(let ke=Me;ke<we;++ke){const ee=ke*V-H,Y=S*te+_*me+C*ke,oe=A*(P-1-qe)+k*(O-1-ee)+M*re;for(let xe=0;xe<Q;++xe){const Se=re*Q+xe,be=x[Y+Se],Re=T[oe+xe];Ee+=be*Re}}}v[m*te+g*se+y*le+re]=Ee}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const egt={kernelName:S6,backendName:"cpu",kernelFunc:Qmt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tgt(t){const{inputs:e,backend:n}=t,{x:r}=e,i=it(r.shape),s=n.data.get(r.dataId).values,o=Bn([i,i],r.dtype),a=o.values;for(let c=0;c<s.length;c++)a[c*i+c]=s[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const ngt={kernelName:xle,backendName:"cpu",kernelFunc:tgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rgt={kernelName:GI,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:s,pad:o,dilations:a}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(i.dataId).values,f=i.shape.length,{batchSize:h,inHeight:p,inWidth:v,inChannels:m,outHeight:g,outWidth:y,padInfo:x,strideHeight:S,strideWidth:_,filterHeight:C,filterWidth:T,dilationHeight:A,dilationWidth:k,outShape:M}=bS(r.shape,i.shape,s,o,"NHWC",a),R=it(M),P=M.length,O=Ei(r.dtype,R);for(let U=0;U<h;++U)for(let z=0;z<g;++z){const X=z*S-x.top;for(let D=0;D<y;++D){const F=D*_-x.left;for(let W=0;W<m;++W){let V=Number.MIN_SAFE_INTEGER;for(let J=0;J<C;++J){const Q=X+J*A;if(Q>=0&&Q<p)for(let te=0;te<T;++te){const re=F+te*k;if(re>=0&&re<v){const se=Au([U,Q,re,W],u,on(r.shape)),fe=Au([J,te,W],f,on(i.shape)),ae=c[se]+d[fe];ae>V&&(V=ae)}}}const j=Au([U,z,D,W],P,on(M));O[j]=V}}}return{dataId:l.write(sg(O,r.dtype),M,r.dtype),shape:M,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const igt={kernelName:FO,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Ic(r.shape,c.data.get(r.dataId).values),d=Ic(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:v,outHeight:m,outWidth:g,padInfo:y,strideHeight:x,strideWidth:S,filterHeight:_,filterWidth:C,dilationHeight:T,dilationWidth:A,outShape:k}=bS(r.shape,i.shape,o,a,"NHWC",l);ue(s.rank===k.length,()=>`Error in ${FO}, dy must have the same rank as output ${k.length}, but got ${s.rank}`);const M=Ic(k,c.data.get(s.dataId).values),R=mle(i.shape,i.dtype);for(let O=0;O<f;++O)for(let $=0;$<m;++$){const U=$*x-y.top;for(let z=0;z<g;++z){const X=z*S-y.left;for(let D=0;D<v;++D){let F=Number.MIN_SAFE_INTEGER,W=0,V=0;for(let j=0;j<_;++j){const J=U+j*T;if(J>=0&&J<h)for(let Q=0;Q<C;++Q){const te=X+Q*A;if(te>=0&&te<p){const re=u[O][J][te][D]+d[j][Q][D];re>F&&(F=re,W=j,V=Q)}}}R[W][V][D]+=M[O][$][z][D]}}}return{dataId:c.write(sg(R,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sgt={kernelName:OO,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Ic(r.shape,c.data.get(r.dataId).values),d=Ic(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:v,outHeight:m,outWidth:g,padInfo:y,strideHeight:x,strideWidth:S,filterHeight:_,filterWidth:C,dilationHeight:T,dilationWidth:A,outShape:k}=bS(r.shape,i.shape,o,a,"NHWC",l);ue(s.rank===k.length,()=>`Error in ${OO}, dy must have the same rank as output ${k.length}, but got ${s.rank}`);const M=Ic(k,c.data.get(s.dataId).values),R=mle(r.shape,r.dtype);for(let O=0;O<f;++O)for(let $=0;$<m;++$){const U=$*x-y.top;for(let z=0;z<g;++z){const X=z*S-y.left;for(let D=0;D<v;++D){let F=Number.MIN_SAFE_INTEGER,W=U<0?0:U,V=X<0?0:X;for(let j=0;j<_;++j){const J=U+j*T;if(J>=0&&J<h)for(let Q=0;Q<C;++Q){const te=X+Q*A;if(te>=0&&te<p){const re=u[O][J][te][D]+d[j][Q][D];re>F&&(F=re,W=J,V=te)}}}R[O][W][V][D]+=M[O][$][z][D]}}}return{dataId:c.write(sg(R,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ogt(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:s,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=s.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[f,h]=i.shape.slice(0,2),p=i.shape.length===2?1:i.shape[2],v=n.data.get(i.dataId).values,m=i.dtype==="float32"?255:1,g=new Uint8ClampedArray(h*f*4);for(let x=0;x<f*h;++x){const S=[0,0,0,255*c];for(let C=0;C<p;C++){const T=v[x*p+C];if(i.dtype==="float32"){if(T<0||T>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${T}.`)}else if(i.dtype==="int32"&&(T<0||T>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${T}.`);p===1?(S[0]=T*m,S[1]=T*m,S[2]=T*m):S[C]=T*m}const _=x*4;g[_+0]=Math.round(S[0]),g[_+1]=Math.round(S[1]),g[_+2]=Math.round(S[2]),g[_+3]=Math.round(S[3])}s.width=h,s.height=f;const y=new ImageData(g,h,f);return d.putImageData(y,0,0),i}const agt={kernelName:bnt,backendName:"cpu",kernelFunc:ogt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LS(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;qt(i,"sum");let a;i.dtype==="bool"?a=gh({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):a=ju({inputs:{x:i},backend:n});const l=a.shape.length,c=Wn(s,a.shape),u=ui(c,l);let d=c,f=a;u!=null&&(f=Xo({inputs:{x:a},backend:n,attrs:{perm:u}}),d=Ii(d.length,l)),Ds("sum",d,f.shape.length);const[h,p]=xs(f.shape,d),v=_a(f.dtype,"int32");let m=KM(n,h,v);const g=it(p),y=n.data.get(m.dataId).values,x=n.data.get(f.dataId).values;for(let S=0;S<y.length;++S){const _=S*g;let C=0;for(let T=0;T<g;++T)C+=x[_+T];y[S]=C}if(o){const S=Wi(m.shape,c),_=m;m=Ur({inputs:{x:m},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(_)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(f),m}const lgt={kernelName:_R,backendName:"cpu",kernelFunc:LS};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cgt(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=Qz(i,s.length);t8(o.length,l,s);const{path:c,steps:u}=n8(a,l),d=u.length;let f=null,h=o.length;const p=[];for(let v=0;v<d;++v){for(const m of u[v]){const{permutationIndices:g,expandDims:y}=e8(h,l[m]);let x;r8(g)?x=s[m]:(x=Xo({inputs:{x:s[m]},backend:n,attrs:{perm:g}}),p.push(x));const S=x.shape.slice();for(let _=0;_<y.length;++_)S.splice(y[_],0,1);br(x.shape,S)||(x=Ur({inputs:{x},backend:n,attrs:{shape:S}}),p.push(x)),f===null?f=x:(f=ZR({inputs:{a:x,b:f},backend:n}),p.push(f))}v<d-1&&(c[v]>=0&&(f=LS({inputs:{x:f},backend:n,attrs:{axis:c[v]-(o.length-h),keepDims:!1}}),p.push(f)),h--)}for(const v of p)v!==f&&n.disposeIntermediateTensorInfo(v);return f}const ugt={kernelName:_6,backendName:"cpu",kernelFunc:cgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dgt(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;qt([r,i],"eluGrad");const s=new Float32Array(it(i.shape)),o=n.data.get(i.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];c>=0?s[l]=a[l]:s[l]=a[l]*(c+1)}return n.makeTensorInfo(i.shape,"float32",s)}const fgt={kernelName:C6,backendName:"cpu",kernelFunc:dgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hgt=jz,pgt=Xz,mgt=qz,ggt=Yz,vgt=Kz,ygt=Zz,xgt=Cr(O2,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+hgt*n);return e*(1-((((ygt*r+vgt)*r+ggt)*r+mgt)*r+pgt)*r*Math.exp(-n*n))}),bgt={kernelName:O2,backendName:"cpu",kernelFunc:xgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QM(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:s}=r,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(ue(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),Ur({inputs:{x:i},backend:n,attrs:{shape:a}})}const wgt={kernelName:jI,backendName:"cpu",kernelFunc:QM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sgt=Ni((t,e)=>t/e),D8=ss(D2,Sgt),d4={kernelName:D2,backendName:"cpu",kernelFunc:D8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zhe(t,e,n){const r=t.shape,i=r[0],s=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[i,s],u=it(c),d=Xs("float32",u),f=Xs("float32",u);for(let m=0;m<i;m++){const g=Bm({inputs:{x:a},backend:n,attrs:{begin:[m,0],size:[1,s]}}),y=Bm({inputs:{x:l},backend:n,attrs:{begin:[m,0],size:[1,s]}}),x=da({inputs:{real:g,imag:y},backend:n}),{real:S,imag:_}=_gt(x,e,n),C=jd(S,_);for(let T=0;T<s;T++){const A=Jz(C,T);d[m*s+T]=A.real,f[m*s+T]=A.imag}n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x)}const h=n.makeTensorInfo(c,"float32",d),p=n.makeTensorInfo(c,"float32",f),v=da({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),v}function _gt(t,e,n){const r=it(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if(Cgt(r)){const a=f4(s,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",Ih(r,"float32")),f=ju({inputs:{x:d},backend:n}),h=d4.kernelFunc({inputs:{a:c,b:d},backend:n}),p=d4.kernelFunc({inputs:{a:u,b:f},backend:n}),v=n.data.get(h.dataId).values,m=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:v,imag:m}}return a}else{const a=jd(s,o),l=Tgt(a,r,e);return fue(l)}}function Cgt(t){return(t&t-1)===0}function f4(t,e,n,r,i){if(n===1)return{real:t,imag:e};const s=jd(t,e),o=n/2,a=hue(s),l=a.real,c=a.imag,u=[l.length],d=i.makeTensorInfo(u,"float32",l),f=i.makeTensorInfo(u,"float32",c),h=da({inputs:{real:d,imag:f},backend:i}),p=pue(s),v=p.real,m=p.imag,g=[v.length],y=i.makeTensorInfo(g,"float32",v),x=i.makeTensorInfo(g,"float32",m),S=da({inputs:{real:y,imag:x},backend:i}),_=f4(l,c,o,r,i),C=_.real,T=_.imag,A=[C.length],k=i.makeTensorInfo(A,"float32",C),M=i.makeTensorInfo(A,"float32",T),R=da({inputs:{real:k,imag:M},backend:i}),P=f4(v,m,o,r,i),O=P.real,$=P.imag,U=[O.length],z=i.makeTensorInfo(U,"float32",O),X=i.makeTensorInfo(U,"float32",$),D=da({inputs:{real:z,imag:X},backend:i}),F=gue(n,r),W=[F.real.length],V=i.makeTensorInfo(W,"float32",F.real),j=i.makeTensorInfo(W,"float32",F.imag),J=da({inputs:{real:V,imag:j},backend:i}),Q=ZR({inputs:{a:J,b:D},backend:i}),te=Gv({inputs:{a:R,b:Q},backend:i}),re=P8({inputs:{a:R,b:Q},backend:i}),se=Um({inputs:{input:te},backend:i}),fe=Um({inputs:{input:re},backend:i}),ae=Hv({inputs:{input:te},backend:i}),ye=Hv({inputs:{input:re},backend:i}),le=jv({inputs:[se,fe],backend:i,attrs:{axis:0}}),H=jv({inputs:[ae,ye],backend:i,attrs:{axis:0}}),Me=i.data.get(le.dataId).values,we=i.data.get(H.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(S),i.disposeIntermediateTensorInfo(k),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(J),i.disposeIntermediateTensorInfo(Q),i.disposeIntermediateTensorInfo(te),i.disposeIntermediateTensorInfo(re),i.disposeIntermediateTensorInfo(se),i.disposeIntermediateTensorInfo(ae),i.disposeIntermediateTensorInfo(fe),i.disposeIntermediateTensorInfo(ye),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(H),{real:Me,imag:we}}function Tgt(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let s=0,o=0;for(let a=0;a<e;a++){const l=vue(i*a,e,n),c=Jz(t,a);s+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(s/=e,o/=e),mue(r,s,o,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Egt(t){const{inputs:e,backend:n}=t,{input:r}=e,i=it(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=Ur({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),l=Zhe(a,!1,n),c=Ur({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const Mgt={kernelName:T6,backendName:"cpu",kernelFunc:Egt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L8(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:s}=n,o=s||Cy(i),a=Ei(o,it(r));return Agt(a,i,o),e.makeTensorInfo(r,o,a)}const kgt={kernelName:E6,backendName:"cpu",kernelFunc:L8};function Agt(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Igt={kernelName:M6,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,s=Xs(r.dtype,it(r.shape)),[o,a,l,c]=r.shape,u=i.data.get(r.dataId).values;for(let f=0;f<o;f++){const h=f*l*a*c;for(let p=0;p<a;p++){const v=p*(l*c);for(let m=0;m<l;m++){const g=m*c;for(let y=0;y<c;y++){const x=Math.round(l-m-1),S=h+v+g+y;let _=u[S];if(x>=0&&x<l){const C=x*c,T=h+v+C+y;_=u[T]}s[S]=_}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rgt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let v=Yhe({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(o){const m=v;if(u==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const g=Ur({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=Gv({inputs:{a:v,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else v=Gv({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(m)}if(h){const m=v;if(u==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const g=Ur({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});v=JM(n,v,h,g,p),n.disposeIntermediateTensorInfo(g)}else v=JM(n,v,h,a,p);n.disposeIntermediateTensorInfo(m)}return v}const Ngt={kernelName:IM,backendName:"cpu",kernelFunc:Rgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pgt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let v=Khe({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(o){const m=v;v=Gv({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){const m=v;v=JM(n,v,h,a,p),n.disposeIntermediateTensorInfo(m)}return v}const $gt={kernelName:Fle,backendName:"cpu",kernelFunc:Pgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dgt(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=it(r.shape),o=i.shape,a=o[o.length-1],[l,c,u,d]=Dz(r,i);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const f=n.data.get(i.dataId).values,h=n.bufferSync(r),p=ahe(f,h,r.dtype,c,a,u,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,p.values)}const Lgt={kernelName:ble,backendName:"cpu",kernelFunc:Dgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ogt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:o,batchDims:a}=r;qt([i,s],"gatherV2");const l=Wn(o,i.shape)[0],c=n.data.get(s.dataId).values,u=i.shape[l];for(let S=0;S<c.length;++S){const _=c[S];ue(_<=u-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);const f=it(s.shape),h=s8(i,s,l,d),p=Ur({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),v=Ur({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),m=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],g=n.bufferSync(v),y=n.bufferSync(p),x=lhe(y,g,m);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(h.outputShape,x.dtype,x.values)}const Fgt={kernelName:qI,backendName:"cpu",kernelFunc:Ogt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ugt(t){const{inputs:e,backend:n}=t,{input:r}=e,i=it(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=Ur({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),l=Zhe(a,!0,n),c=Ur({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const Bgt={kernelName:k6,backendName:"cpu",kernelFunc:Ugt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zgt=Cr(G2,t=>Number.isFinite(t)?1:0,"bool"),Wgt={kernelName:G2,backendName:"cpu",kernelFunc:zgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vgt=Cr(H2,t=>Math.abs(t)===1/0?1:0,"bool"),Ggt={kernelName:H2,backendName:"cpu",kernelFunc:Vgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hgt=Cr(j2,t=>Number.isNaN(t)?1:0,"bool"),jgt={kernelName:j2,backendName:"cpu",kernelFunc:Hgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xgt(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,o=hhe(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const qgt={kernelName:wle,backendName:"cpu",kernelFunc:Xgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ygt=Cr(q2,t=>Math.log1p(t)),Kgt={kernelName:q2,backendName:"cpu",kernelFunc:Ygt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zgt=Ni((t,e)=>t&&e),Jgt=ss(QI,Zgt,null,"bool"),Qgt={kernelName:QI,backendName:"cpu",kernelFunc:Jgt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e0t=Cr(eR,t=>t?0:1,"bool"),t0t={kernelName:eR,backendName:"cpu",kernelFunc:e0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n0t=Ni((t,e)=>t||e),r0t=ss(tR,n0t,null,"bool"),i0t={kernelName:tR,backendName:"cpu",kernelFunc:r0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s0t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r;qt(i,"LRN");const c=i.shape[3],u=c-1,d=n.data.get(i.dataId).values,f=it(i.shape),h=new Float32Array(f);function p(v){const m=v%c;let g=v-m+Math.max(0,m-s);const y=v-m+Math.min(m+s,u);let x=0;for(;g<=y;g++){const S=d[g];x+=S*S}return x}for(let v=0;v<f;v++){const m=p(v),g=d[v]*Math.pow(o+a*m,-l);h[v]=g}return n.makeTensorInfo(i.shape,i.dtype,h)}const o0t={kernelName:nR,backendName:"cpu",kernelFunc:s0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a0t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r;qt(o,"LRNGrad");const d=it(o.shape),f=o.shape[3],h=n.data.get(o.dataId).values,p=n.data.get(i.dataId).values,v=n.data.get(s.dataId).values,m=new Float32Array(d),g=d;for(let y=0;y<g;y++){const x=y%f,S=y-x+Math.max(0,x-a),_=y-x+Math.min(f,x+a+1);let C=0;for(let T=S;T<_;T++)C+=Math.pow(p[T],2);C=c*C+l;for(let T=S;T<_;T++){let A=-2*c*u*p[T]*v[y]/C;y===T&&(A+=Math.pow(C,-u)),A*=h[y],m[T]+=A}}return n.makeTensorInfo(o.shape,i.dtype,m)}const l0t={kernelName:I6,backendName:"cpu",kernelFunc:a0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jhe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=n;let l=i.shape;const c=l.length,u=Wn(s,l);let d=u;const f=ui(d,c);let h=a.data.get(i.dataId).values;if(f!=null){const S=new Array(c);for(let _=0;_<S.length;_++)S[_]=l[f[_]];h=R8(h,l,i.dtype,f,S),d=Ii(d.length,c),l=S}qt(i,"max"),Ds("max",d,c);const[p,v]=xs(l,d),m=it(v),g=mhe(h,m,p,i.dtype),y=a.write(g,p,i.dtype);let x=p;return o&&(x=Wi(p,u)),{dataId:y,shape:x,dtype:i.dtype}}const c0t={kernelName:rR,backendName:"cpu",kernelFunc:Jhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u0t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;qt(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;ue(Zs(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Jl(i.shape,s,o,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&br(u.inShape,u.outShape))d=ju({inputs:{x:i},backend:n});else{const f=n.data.get(i.dataId).values,h=on(i.shape),p=$8(f,i.shape,i.dtype,h,u,"max");d=n.makeTensorInfo(u.outShape,i.dtype,p.values)}return d}const d0t={kernelName:iR,backendName:"cpu",kernelFunc:u0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f0t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;qt(i,"maxPool3d");const u=Jd(i.shape,s,o,1,a,l,c),d=n.data.get(i.dataId).values,f=qhe(d,i.shape,i.dtype,on(i.shape),u,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const h0t={kernelName:sR,backendName:"cpu",kernelFunc:f0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p0t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;qt([i,s],"maxPool3DGrad");const u=Jd(s.shape,o,a,1,l,c),d=n.bufferSync(s),f=nmt(d,u),h=u.strideDepth,p=u.strideHeight,v=u.strideWidth,m=u.dilationDepth,g=u.dilationHeight,y=u.dilationWidth,x=u.effectiveFilterDepth,S=u.effectiveFilterHeight,_=u.effectiveFilterWidth,C=x-1-u.padInfo.front,T=_-1-u.padInfo.left,A=S-1-u.padInfo.top,k=Bn(s.shape,"float32"),M=n.bufferSync(i);for(let R=0;R<u.batchSize;++R)for(let P=0;P<u.inChannels;++P)for(let O=0;O<u.inDepth;++O)for(let $=0;$<u.inHeight;++$)for(let U=0;U<u.inWidth;++U){const z=O-C,X=$-A,D=U-T;let F=0;for(let W=0;W<x;W+=m){const V=(z+W)/h;if(!(V<0||V>=u.outDepth||Math.floor(V)!==V))for(let j=0;j<S;j+=g){const J=(X+j)/p;if(!(J<0||J>=u.outHeight||Math.floor(J)!==J))for(let Q=0;Q<_;Q+=y){const te=(D+Q)/v;if(te<0||te>=u.outWidth||Math.floor(te)!==te)continue;const re=x*S*_-1-f.get(R,V,J,te,P),se=W*S*_+j*_+Q,fe=re===se?1:0;if(fe===0)continue;const ae=M.get(R,V,J,te,P);F+=ae*fe}}}k.set(F,R,O,$,U,P)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const m0t={kernelName:N6,backendName:"cpu",kernelFunc:p0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g0t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:o}=e,a=s;qt([s,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=Jl(a.shape,l,c,1,u,d),h=n.data.get(a.dataId).values,p=Bn(f.outShape,a.dtype,Xhe(h,a.shape,a.dtype,f).values),v=f.strideHeight,m=f.strideWidth,g=f.dilationHeight,y=f.dilationWidth,x=f.effectiveFilterHeight,S=f.effectiveFilterWidth,_=S-1-f.padInfo.left,C=x-1-f.padInfo.top,T=Bn(a.shape,"float32"),A=n.data.get(i.dataId).values,k=Bn(i.shape,"float32",A);for(let M=0;M<f.batchSize;++M)for(let R=0;R<f.inChannels;++R)for(let P=0;P<f.inHeight;++P)for(let O=0;O<f.inWidth;++O){const $=P-C,U=O-_;let z=0;for(let X=0;X<x;X+=g){const D=($+X)/v;if(!(D<0||D>=f.outHeight||Math.floor(D)!==D))for(let F=0;F<S;F+=y){const W=(U+F)/m;if(W<0||W>=f.outWidth||Math.floor(W)!==W)continue;const V=x*S-1-p.get(M,D,W,R),j=X*S+F,J=V===j?1:0;if(J===0)continue;const Q=k.get(M,D,W,R);z+=Q*J}}T.set(z,M,P,O,R)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const v0t={kernelName:R6,backendName:"cpu",kernelFunc:g0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y0t(t,e,n,r,i){const s=on(e),o=$8(t,e,n,s,i,"max"),a=Xhe(t,e,n,i,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x0t={kernelName:Sle,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=n;qt(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=Jl(r.shape,i,s,[1,1],o),[d,f]=y0t(c,r.shape,r.dtype,a,u),h=l.write(d,u.outShape,r.dtype),p=l.write(f,u.outShape,r.dtype);return[{dataId:h,shape:u.outShape,dtype:r.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b0t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=Wn(s,i.shape),c=xs(i.shape,a)[1],u=it(c),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(f);const h=gh({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(h);const p=D8({inputs:{a:h,b:f},backend:n});d.push(p);const v=LS({inputs:{x:p},backend:n,attrs:{axis:s,keepDims:o}});return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),v}const w0t={kernelName:oR,backendName:"cpu",kernelFunc:b0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S0t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;qt(i,"min");const a=Wn(s,i.shape);let l=a;const c=ui(l,i.shape.length);let u=i;c!=null&&(u=Xo({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Ii(l.length,i.shape.length)),Ds("min",l,u.shape.length);const[d,f]=xs(u.shape,l),h=it(f),p=qs(it(d),u.dtype),v=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){const y=g*h;let x=v[y];for(let S=0;S<h;++S){const _=v[y+S];(Number.isNaN(_)||_<x)&&(x=_)}p[g]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(d,u.dtype,p);if(o){const g=Wi(d,a),y=Ur({inputs:{x:m},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(m),y}return m}const _0t={kernelName:aR,backendName:"cpu",kernelFunc:S0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C0t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,mode:o}=r;qt(i,"mirrorPad");const a=s.map((x,S)=>x[0]+i.shape[S]+x[1]),l=s.map(x=>x[0]),c=s.map((x,S)=>x[0]+i.shape[S]),u=o==="reflect"?0:1,d=n.data.get(i.dataId).values,f=i.shape.length,h=on(i.shape),p=it(a),v=a.length,m=on(a),g=Xs(i.dtype,p);for(let x=0;x<p;x++){let S=Ty(x,v,m);for(let C=0;C<v;C++)S[C]<l[C]?S[C]=l[C]*2-S[C]-u:S[C]>=c[C]&&(S[C]=(c[C]-1)*2-S[C]+u);S=S.map((C,T)=>C-l[T]);const _=Au(S,f,h);g[x]=d[_]}return{dataId:n.write(g,a,i.dtype),shape:a,dtype:i.dtype}}const T0t={kernelName:lR,backendName:"cpu",kernelFunc:C0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E0t=Ni((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),M0t=ss(Z2,E0t),k0t={kernelName:Z2,backendName:"cpu",kernelFunc:M0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qhe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,o=i.shape.length;let a=s;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=Wn([a],i.shape),c=Jhe({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=Wi(c.shape,l),d=Ur({inputs:{x:c},backend:n,attrs:{shape:u}}),f=P8({inputs:{a:i,b:d},backend:n}),h=rhe({inputs:{x:f},backend:n}),p=LS({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),v=Ur({inputs:{x:p},backend:n,attrs:{shape:u}}),m=D8({inputs:{a:h,b:v},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}const A0t={kernelName:ER,backendName:"cpu",kernelFunc:Qhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I0t(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r;qt(i,"multinomial");const l=a?i:Qhe({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,f=[c,s],h=qs(it(f),"int32");for(let p=0;p<c;++p){const v=p*u,m=new Float32Array(u-1);m[0]=d[v];for(let x=1;x<m.length;++x)m[x]=m[x-1]+d[v+x];const g=bz.alea(o.toString()),y=p*s;for(let x=0;x<s;++x){const S=g();h[y+x]=m.length;for(let _=0;_<m.length;_++)if(S<m[_]){h[y+x]=_;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",h)}const R0t={kernelName:_le,backendName:"cpu",kernelFunc:I0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N0t=Az;function P0t(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;qt(i,"NonMaxSuppression");const c=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,{selectedIndices:d}=N0t(c,u,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const $0t={kernelName:P6,backendName:"cpu",kernelFunc:P0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D0t=Iz;function L0t(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;qt(i,"NonMaxSuppressionPadded");const u=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:f,validOutputs:h}=D0t(u,d,o,a,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const O0t={kernelName:$6,backendName:"cpu",kernelFunc:L0t};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F0t=Rz;function U0t(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;qt(i,"NonMaxSuppressionWithScore");const u=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,f=o,h=a,p=l,v=c,{selectedIndices:m,selectedScores:g}=F0t(u,d,f,h,p,v);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const B0t={kernelName:D6,backendName:"cpu",kernelFunc:U0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z0t(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r;qt(i,"oneHot");const c=it(i.shape),u=new Float32Array(c*o);u.fill(l);const d=n.data.get(i.dataId).values;for(let f=0;f<c;++f)d[f]>=0&&d[f]<o&&(u[f*o+d[f]]=a);return n.makeTensorInfo([...i.shape,o],s,u)}const W0t={kernelName:fR,backendName:"cpu",kernelFunc:z0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ek(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Um({inputs:{input:r},backend:n}),s=ek({inputs:{x:i},backend:n}),o=Hv({inputs:{input:r},backend:n}),a=ek({inputs:{x:o},backend:n}),l=da({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return L8({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const V0t={kernelName:AR,backendName:"cpu",kernelFunc:ek};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function epe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=Um({inputs:{input:r},backend:n}),s=epe({inputs:{x:i},backend:n}),o=Hv({inputs:{input:r},backend:n}),a=ek({inputs:{x:o},backend:n}),l=da({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return L8({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const G0t={kernelName:dR,backendName:"cpu",kernelFunc:epe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tpe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return QM({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(u=>{t6(s,u.shape,"All tensors passed to stack must have matching shapes"),ue(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=QM({inputs:{input:u},backend:n,attrs:{dim:i}});return a.push(d),d}),c=jv({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const H0t={kernelName:hR,backendName:"cpu",kernelFunc:tpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j0t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:o}=r;qt(i,"pad");const a=s.map((y,x)=>y[0]+i.shape[x]+y[1]),l=s.map(y=>y[0]),c=n.data.get(i.dataId).values,u=it(i.shape),d=i.shape.length,f=on(i.shape),h=it(a),p=a.length,v=on(a),m=Xs(i.dtype,h);o!==0&&m.fill(o);for(let y=0;y<u;y++){const S=Ty(y,d,f).map((C,T)=>C+l[T]),_=Au(S,p,v);m[_]=c[y]}return{dataId:n.write(m,a,i.dtype),shape:a,dtype:i.dtype}}const npe={kernelName:pR,backendName:"cpu",kernelFunc:j0t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X0t=Ni((t,e)=>Math.pow(t,e)),q0t=ss(Q2,X0t),Y0t={kernelName:Q2,backendName:"cpu",kernelFunc:q0t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K0t(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,a=i.map(m=>n.data.get(m.dataId).values),l=i.map(m=>m.shape),c=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,[d,f,h]=whe(a,l,c,s.shape,s.dtype,u,o.shape),p=d.map(m=>n.makeTensorInfo([m.length],"int32",m)),v=n.makeTensorInfo(h,s.dtype,f);return p.concat([v])}const Z0t={kernelName:Cle,backendName:"cpu",kernelFunc:K0t};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J0t(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,u]=She(o,r.shape,r.dtype,a,i.shape,l,s.shape),d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const Q0t={kernelName:Tle,backendName:"cpu",kernelFunc:J0t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function evt(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,f=a.map(m=>n.data.get(m.dataId).values),h=a.map(m=>m.shape),[p,v]=_he(c,i.shape,u,s.shape,s.dtype,d,o.shape,f,h,l);return n.makeTensorInfo(p,s.dtype,v)}const tvt={kernelName:Ele,backendName:"cpu",kernelFunc:evt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nvt(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:s,step:o}=n,a=Che(r,i,o,s);return e.makeTensorInfo([a.length],s,a)}const rvt={kernelName:L6,backendName:"cpu",kernelFunc:nvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ivt=Cr(eS,t=>1/t),svt={kernelName:eS,backendName:"cpu",kernelFunc:ivt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ovt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;qt(i,"resizeBilinear");const l=on(i.shape),[c,u]=a,[d,f,h,p]=i.shape,v=n.data.get(i.dataId).values,m=new Float32Array(it([d,c,u,p])),g=[s&&c>1?f-1:f,s&&u>1?h-1:h],y=[s&&c>1?c-1:c,s&&u>1?u-1:u];let x=0;const S=g[0]/y[0],_=g[1]/y[1];for(let C=0;C<d;C++)for(let T=0;T<c;T++){let A;o?A=S*(T+.5)-.5:A=S*T;const k=Math.max(0,Math.floor(A)),M=A-k,R=Math.min(f-1,Math.ceil(A)),P=C*l[0]+k*l[1],O=C*l[0]+R*l[1];for(let $=0;$<u;$++){let U;o?U=_*($+.5)-.5:U=_*$;const z=Math.max(0,Math.floor(U)),X=U-z,D=Math.min(h-1,Math.ceil(U)),F=P+z*l[2],W=O+z*l[2],V=P+D*l[2],j=O+D*l[2];for(let J=0;J<p;J++){const Q=v[F+J],te=v[W+J],re=v[V+J],se=v[j+J],fe=Q+(re-Q)*X,ae=te+(se-te)*X,ye=fe+(ae-fe)*M;m[x++]=ye}}}return n.makeTensorInfo([d,c,u,p],"float32",m)}const avt={kernelName:xR,backendName:"cpu",kernelFunc:ovt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lvt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r;qt([s,i],"resizeBilinearGrad");const a=on(i.shape),[l,c,u,d]=i.shape,[,f,h]=s.shape,p=new Float32Array(l*c*u*d),v=[o&&f>1?c-1:c,o&&h>1?u-1:u],m=[o&&f>1?f-1:f,o&&h>1?h-1:h],g=v[0]/m[0],y=v[1]/m[1],x=n.data.get(s.dataId).values;let S=0;for(let _=0;_<l;_++){const C=_*a[0];for(let T=0;T<f;T++){const A=T*g,k=Math.floor(A),M=Math.min(Math.ceil(A),c-1),R=C+k*a[1],P=C+M*a[1],O=A-k,$=1-O;for(let U=0;U<h;U++){const z=U*y,X=Math.floor(z),D=Math.min(Math.ceil(z),u-1),F=z-X,W=1-F,V=R+X*a[2],j=R+D*a[2],J=P+X*a[2],Q=P+D*a[2],te=$*W,re=$*F,se=O*W,fe=O*F;for(let ae=0;ae<d;ae++){const ye=x[S++];p[V+ae]+=ye*te,p[j+ae]+=ye*re,p[J+ae]+=ye*se,p[Q+ae]+=ye*fe}}}}return n.makeTensorInfo([l,u,c,d],"float32",p)}const cvt={kernelName:U6,backendName:"cpu",kernelFunc:lvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uvt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;qt(i,"resizeNearestNeighbor");const l=on(i.shape),[c,u]=a,[d,f,h,p]=i.shape,v=n.data.get(i.dataId).values,m=new Float32Array(d*c*u*p),g=[s&&c>1?f-1:f,s&&u>1?h-1:h],y=[s&&c>1?c-1:c,s&&u>1?u-1:u],x=g[0]/y[0],S=g[1]/y[1];let _=0;for(let C=0;C<d;C++){const T=C*l[0];for(let A=0;A<c;A++){const k=o?x*(A+.5):x*A;let M=Math.min(f-1,s?Math.round(k):Math.floor(k));o&&(M=Math.max(0,M));const R=T+M*l[1];for(let P=0;P<u;P++){const O=o?S*(P+.5):S*P;let $=Math.min(h-1,s?Math.round(O):Math.floor(O));o&&($=Math.max(0,$));const U=R+$*l[2];for(let z=0;z<p;z++){const X=v[U+z];m[_++]=X}}}}return n.makeTensorInfo([d,c,u,p],i.dtype,m)}const dvt={kernelName:yR,backendName:"cpu",kernelFunc:uvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fvt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r;qt([s,i],"resizeNearestNeighborGrad");const a=on(i.shape),l=on(s.shape),[c,u,d,f]=i.shape,[,h,p]=s.shape,v=new Float32Array(c*u*d*f),m=n.data.get(s.dataId).values,g=[o&&h>1?u-1:u,o&&p>1?d-1:d],y=[o&&h>1?h-1:h,o&&p>1?p-1:p],x=g[0]/y[0],S=g[1]/y[1],_=1/x,C=1/S,T=Math.ceil(_)*2+2,A=Math.ceil(C)*2+2;for(let k=0;k<c;k++){const M=k*a[0];for(let R=0;R<u;R++){const P=M+R*a[1],O=Math.floor(R*_),$=Math.floor(O-T/2);for(let U=0;U<d;U++){const z=P+U*a[2],X=Math.floor(U*C),D=Math.floor(X-A/2);for(let F=0;F<f;F++){let W=0;for(let V=0;V<T;V++){const j=V+$;if(j<0||j>=h)continue;const J=M+j*l[1],Q=j*x,te=Math.min(u-1,o?Math.round(Q):Math.floor(Q));if(R===te)for(let re=0;re<A;re++){const se=re+D;if(se<0||se>=p)continue;const fe=J+se*l[2],ae=se*S,ye=Math.min(d-1,o?Math.round(ae):Math.floor(ae));U===ye&&(W+=m[fe+F])}}v[z+F]=W}}}}return n.makeTensorInfo(i.shape,i.dtype,v)}const hvt={kernelName:F6,backendName:"cpu",kernelFunc:fvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pvt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r;qt(i,"reverse");const o=i.shape.length,a=Wn(s,i.shape);if(o===0)return ju({inputs:{x:i},backend:n});const l=new Is(i.shape,i.dtype),c=n.bufferSync(i);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),f=d.slice();a.forEach(h=>f[h]=i.shape[h]-1-f[h]),l.set(c.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const mvt={kernelName:bR,backendName:"cpu",kernelFunc:pvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gvt={kernelName:j6,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=Xs(r.dtype,it(r.shape)),[c,u,d,f]=r.shape,[h,p]=Vz(o,u,d),v=255,m=Math.sin(i),g=Math.cos(i),y=a.data.get(r.dataId).values;for(let S=0;S<c;S++){const _=S*d*u*f;for(let C=0;C<u;C++){const T=C*(d*f);for(let A=0;A<d;A++){const k=A*f;for(let M=0;M<f;M++){const R=[c,C,A,M],P=R[2],O=R[1];let $=(P-h)*g-(O-p)*m,U=(P-h)*m+(O-p)*g;$=Math.round($+h),U=Math.round(U+p);let z=s;if(typeof s!="number"&&(M===3?z=v:z=s[M]),$>=0&&$<d&&U>=0&&U<u){const D=U*(d*f),F=$*f,W=_+D+F+M;z=y[W]}const X=_+T+k+M;l[X]=z}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vvt=Cr(rS,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),yvt={kernelName:rS,backendName:"cpu",kernelFunc:vvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xvt(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=cg(s,i,o),f=!0,h=n.bufferSync(i),p=n.bufferSync(s),v=Hp(h,p,o,d,c,l,a,u,0,f);return n.makeTensorInfo(o,v.dtype,v.values)}const bvt={kernelName:Mle,backendName:"cpu",kernelFunc:xvt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wvt(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function Svt(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function _vt(t,e,n,r,i,s){const o=Ei("int32",n*i);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),c=a*i;for(let u=0;u<i;++u)o[c+u]=s==="left"?wvt(l,e[u+c]):Svt(l,e[u+c])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cvt(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:o}=r,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=_vt(a,l,i.shape[0],i.shape[1],s.shape[1],o);return n.makeTensorInfo(s.shape,"int32",c)}const Tvt={kernelName:Ale,backendName:"cpu",kernelFunc:Cvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Evt(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e;qt([r,i,s],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,u=_a(i.dtype,s.dtype),d=qs(it(i.shape),u);let f=0;const h=o===0||o>1||i.shape.length===1?1:it(i.shape.slice(1));for(let p=0;p<a.length;p++)for(let v=0;v<h;v++)a[p]===1?d[f++]=l[p]:d[f++]=c[p];return n.makeTensorInfo(i.shape,u,d)}const Mvt={kernelName:wR,backendName:"cpu",kernelFunc:Evt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kvt=FR,Avt=UR,Ivt=Cr(sS,t=>t>=0?Avt*t:kvt*(Math.exp(t)-1)),Rvt={kernelName:sS,backendName:"cpu",kernelFunc:Ivt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nvt=Cr(lS,t=>t<0?-1:t>0?1:0),Pvt={kernelName:lS,backendName:"cpu",kernelFunc:Nvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $vt=Cr(oS,t=>Math.sin(t)),Dvt={kernelName:oS,backendName:"cpu",kernelFunc:$vt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lvt=Cr(aS,t=>Math.sinh(t)),Ovt={kernelName:aS,backendName:"cpu",kernelFunc:Lvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fvt=11920928955078125e-23,aK=Math.log(Fvt)+2,Uvt=Cr(uS,t=>{const e=t>-aK,n=t<aK,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),Bvt={kernelName:uS,backendName:"cpu",kernelFunc:Uvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zvt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:o}=r;qt([i],"spaceToBatchND");const a=it(s),l=[[0,0]];l.push(...o);for(let C=1+s.length;C<i.shape.length;++C)l.push([0,0]);const c=npe.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),u=TS(c.shape,s,a,!1),d=ES(u.length,s.length,!1),f=MS(c.shape,s,a,!1),v=Ur({inputs:{x:c},backend:n,attrs:{shape:u}}),y=Xo({inputs:{x:v},backend:n,attrs:{perm:d}}),_=Ur({inputs:{x:y},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),_}const Wvt={kernelName:CR,backendName:"cpu",kernelFunc:zvt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vvt(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values[0],[d,f,h,p,v]=khe(a,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],i.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const Gvt={kernelName:Ile,backendName:"cpu",kernelFunc:Vvt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hvt(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.data.get(i.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[c,u,d]=Ahe(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const jvt={kernelName:Rle,backendName:"cpu",kernelFunc:Hvt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xvt(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,u]=N8(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const qvt={kernelName:Nle,backendName:"cpu",kernelFunc:Xvt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yvt(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,u]=N8(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const Kvt={kernelName:Ple,backendName:"cpu",kernelFunc:Yvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zvt(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=cg(s,i,a),h=!1,p=n.bufferSync(i);let v;switch(s.dtype){case"bool":{const m=n.bufferSync(s),g=!!n.data.get(o.dataId).values[0];v=Hp(p,m,a,f,u,c,l,d,g,h);break}case"float32":{const m=n.bufferSync(s),g=n.data.get(o.dataId).values[0];v=Hp(p,m,a,f,u,c,l,d,g,h);break}case"int32":{const m=n.bufferSync(s),g=n.data.get(o.dataId).values[0];v=Hp(p,m,a,f,u,c,l,d,g,h);break}case"string":{const m=n.bufferSync(s),g=dh(n.data.get(o.dataId).values[0]);v=Hp(p,m,a,f,u,c,l,d,g,h);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(a,v.dtype,v.values)}const Jvt={kernelName:$le,backendName:"cpu",kernelFunc:Zvt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qvt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=Wn(o,i.shape)[0],l=i8(i,s,a),c=new Array(i.shape.length).fill(0),u=i.shape.slice();return l.map(d=>{const f=[...u];f[a]=d;const h=Bm({inputs:{x:i},backend:n,attrs:{begin:c,size:f}});return c[a]+=d,h})}const eyt={kernelName:TR,backendName:"cpu",kernelFunc:Qvt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tyt={kernelName:B6,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;qt(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let a=0;a<i.length;++a){const l=i[a];s[a]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nyt=Cr(vS,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),ryt={kernelName:vS,backendName:"cpu",kernelFunc:nyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iyt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r;qt(i,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:v,sliceDim0:m,isSimpleSlice:g,begin:y,end:x,strides:S}=Bz(i.shape,s,o,a,l,c,u,d,f);let _;if(v)_=Ur({inputs:{x:i},backend:n,attrs:{shape:p}});else if(m||g){ue(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const C=Oz(y,x,S),T=Bm({inputs:{x:i},backend:n,attrs:{begin:y,size:C}});_=Ur({inputs:{x:T},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(T)}else{const C=n.bufferSync(i),T=Nhe(h,C,S,y);_=n.makeTensorInfo(p,T.dtype,T.values)}return _}const syt={kernelName:W6,backendName:"cpu",kernelFunc:iyt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oyt(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.data.get(u.dataId).values,h=n.data.get(d.dataId).values,[p,v]=Phe(f,h,i,s,o,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",v)]}const ayt={kernelName:Dle,backendName:"cpu",kernelFunc:oyt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lyt(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values[0],[c,u,d]=$he(a,l,i),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const cyt={kernelName:Lle,backendName:"cpu",kernelFunc:lyt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uyt(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(s.dataId).values,a=Dhe(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const dyt={kernelName:Ole,backendName:"cpu",kernelFunc:uyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fyt=Cr(pS,t=>Math.tan(t)),hyt={kernelName:pS,backendName:"cpu",kernelFunc:fyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pyt=Cr(mS,t=>Math.tanh(t)),myt={kernelName:mS,backendName:"cpu",kernelFunc:pyt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gyt(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:s}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=cg(s,i,r.shape),d=!1,f=n.bufferSync(i),h=n.bufferSync(s),p=n.bufferSync(r),v=Hp(f,h,r.shape,u,l,a,o,c,p,d);return n.makeTensorInfo(r.shape,v.dtype,v.values)}const vyt={kernelName:kle,backendName:"cpu",kernelFunc:gyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yyt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;qt(i,"tile");const o=Ohe(n.bufferSync(i),s);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const xyt={kernelName:gS,backendName:"cpu",kernelFunc:yyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function byt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:o}=r;qt(i,"topk");const a=n.data.get(i.dataId).values,[l,c]=Uhe(a,i.shape,i.dtype,s,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const wyt={kernelName:V6,backendName:"cpu",kernelFunc:byt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Syt(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=n,[u,d,f,h]=i.shape,[p,v]=c??[d,f],m=[u,p,v,h],g=on(i.shape),y=g[0],x=g[1],S=g[2],_=on(m),C=_[0],T=_[1],A=_[2],k=Xs(i.dtype,it(m));k.fill(l);const M=r.data.get(i.dataId).values,R=r.data.get(s.dataId).values;for(let O=0;O<u;++O){const $=s.shape[0]===1?R:R.subarray(O*8,O*8+8);for(let U=0;U<p;++U)for(let z=0;z<v;++z)for(let X=0;X<h;++X){let D;const F=$[6]*z+$[7]*U+1;if(F===0)continue;const W=($[0]*z+$[1]*U+$[2])/F,V=($[3]*z+$[4]*U+$[5])/F,j=lK(W,f,a),J=lK(V,d,a);switch(o){case"nearest":D=kyt(M,d,f,y,x,S,O,J,j,X,l);break;case"bilinear":D=Ayt(M,d,f,y,x,S,O,J,j,X,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const Q=O*C+U*T+z*A+X;k[Q]=D}return r.makeTensorInfo(m,i.dtype,k)}return{dataId:r.write(k,m,i.dtype),shape:i.shape,dtype:i.dtype}}const _yt={kernelName:G6,backendName:"cpu",kernelFunc:Syt};function lK(t,e,n){switch(n){case"reflect":return Cyt(t,e);case"wrap":return Tyt(t,e);case"nearest":return Myt(t,e);case"constant":default:return Eyt(t)}}function Cyt(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return km(0,n,e-1)}function Tyt(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return km(0,n,e-1)}function Eyt(t,e){return t}function Myt(t,e){return km(0,t,e-1)}function l1(t,e,n,r,i,s,o,a,l,c,u){const d=o*r+a*i+l*s+c;return 0<=a&&a<e&&0<=l&&l<n?t[d]:u}function kyt(t,e,n,r,i,s,o,a,l,c,u){const d=Math.round(a),f=Math.round(l);return l1(t,e,n,r,i,s,o,d,f,c,u)}function Ayt(t,e,n,r,i,s,o,a,l,c,u){const d=Math.floor(a),f=Math.floor(l),h=d+1,p=f+1,v=(p-l)*l1(t,e,n,r,i,s,o,d,f,c,u)+(l-f)*l1(t,e,n,r,i,s,o,d,p,c,u),m=(p-l)*l1(t,e,n,r,i,s,o,h,f,c,u)+(l-f)*l1(t,e,n,r,i,s,o,h,p,c,u);return(h-a)*v+(a-d)*m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iyt(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;qt(s,"unique");const o=r.data.get(s.dataId).values,{outputValues:a,outputShape:l,indices:c}=Bhe(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const Ryt={kernelName:H6,backendName:"cpu",kernelFunc:Iyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nyt(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i.shape.length,a=i.shape[s],l=new Array(o-1);let c=0;for(let h=0;h<o;h++)h!==s&&(l[c++]=i.shape[h]);const u=new Array(o).fill(0),d=i.shape.slice();d[s]=1;const f=new Array(a);for(let h=0;h<f.length;h++){u[s]=h;const p=Bm({inputs:{x:i},backend:n,attrs:{begin:u,size:d}});f[h]=Ur({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return f}const Pyt={kernelName:MR,backendName:"cpu",kernelFunc:Nyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $yt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:o}=r;qt(i,"unsortedSegmentSum");const a=i.shape.length,l=s.shape.length,c=[],u=[],d=a-l;let f=s;for(let p=0;p<d;++p){const v=QM({inputs:{input:f},backend:n,attrs:{dim:p+1}});f=v,u.push(v)}for(let p=0;p<o;++p){const v=Ih(p,"int32"),m=n.makeTensorInfo([],"int32",v),g=the({inputs:{a:m,b:f},backend:n}),y=gh({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),x=ZR({inputs:{a:y,b:i},backend:n}),S=LS({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});c.push(S),u.push(m),u.push(g),u.push(y),u.push(x),u.push(S)}const h=tpe({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const Dyt={kernelName:kR,backendName:"cpu",kernelFunc:$yt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lyt=[Ipt,uht,Npt,$pt,ght,Lpt,Fpt,Bpt,Wpt,Gpt,jpt,qpt,Kpt,Qpt,tmt,imt,omt,lmt,umt,kpt,fmt,pmt,gmt,yht,ymt,pht,bht,bmt,dht,Smt,Cmt,Tmt,Mmt,Amt,Rmt,Pmt,Dmt,Omt,Umt,zmt,Vmt,Hmt,Xmt,Ymt,Kmt,Jmt,egt,ngt,rgt,igt,sgt,agt,ugt,wpt,fgt,wht,bgt,Sht,wgt,Cht,Mgt,kgt,Igt,Eht,kht,Ngt,$gt,Lgt,Fgt,Iht,Nht,fht,Bgt,_mt,Wgt,Ggt,jgt,Spt,$ht,Lht,qgt,Fht,Kgt,Qgt,t0t,i0t,o0t,l0t,c0t,Bht,d0t,h0t,m0t,v0t,x0t,w0t,_0t,Wht,T0t,k0t,R0t,Ght,jht,$0t,O0t,B0t,qht,W0t,G0t,H0t,npe,Y0t,Cpt,Zht,Z0t,Q0t,tvt,rvt,hht,d4,svt,Tpt,Ept,Mpt,avt,cvt,dvt,hvt,mvt,gvt,yvt,spt,bvt,Tvt,Mvt,Rvt,apt,Pvt,Dvt,Ovt,lpt,A0t,Bvt,Wvt,Gvt,jvt,qvt,Kvt,Jvt,eyt,dpt,tyt,hpt,mpt,ryt,syt,ayt,cyt,dyt,xpt,lgt,hyt,myt,vyt,xyt,wyt,_yt,Yht,Ryt,Pyt,Dyt,V0t];for(const t of Lyt)Ule(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ap={},xT={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Oyt(t,e){Ap[t]=e}function Fc(t,e){if(!(t in Ap)||e!=null){const r=Uyt(t,e);if(r!==null)Ap[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Ap[t];return n==null||n.isContextLost()?(delete Ap[t],Fc(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Ap[t])}function Fyt(t){if(!Qe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Uyt(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??Fyt(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Ap[t]},!1),Qe().getBool("SOFTWARE_WEBGL_ENABLED")&&(xT.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",xT)||n.getContext("experimental-webgl",xT):n.getContext("webgl2",xT)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ww;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(ww||(ww={}));var Ka;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Ka||(Ka={}));var Es;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Es||(Es={}));function OS(t,e){return[e,t]}function Byt(t,e){return t*e}function bT(t){const e=it(t),n=Math.ceil(e/4);return PO(n)}function Ny(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function zyt(t,e){const[n,r]=Ny(t,e);return n*r*4}function O8(t,e){const n=t;let r,i,s,o,a,l,c,u,d,f;return Qe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,s=n.RGBA16F,o=n.RGBA32F,a=n.RED,c=4,u=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,s=t.RGBA,o=n.RGBA,a=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ft(t,e){const n=e();return Qe().getBool("DEBUG")&&Wyt(t),n}function Wyt(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+jyt(t,e))}const Vyt=596e-10,Gyt=65504;function Hyt(t){return!!(Qe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Vyt<Math.abs(t)&&Math.abs(t)<Gyt)}function jyt(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function wT(t,e){return ef(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Xyt(t,e){const n=ef(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Ft(t,()=>t.shaderSource(n,e)),Ft(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function qyt(t,e){const n=ef(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Ft(t,()=>t.shaderSource(n,e)),Ft(t,()=>t.compileShader(n)),Qe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw rpe(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const Yyt=/ERROR: [0-9]+:([0-9]+):/g;function rpe(t,e){const n=Yyt.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),s=i.length.toString().length+2,o=i.map((d,f)=>sv((f+1).toString(),s)+d);let a=0;for(let d=0;d<o.length;d++)a=Math.max(o[d].length,a);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${sv(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function Kyt(t){return ef(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Zyt(t,e){if(Ft(t,()=>t.linkProgram(e)),!Qe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function k$(t,e){if(Ft(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Jyt(t,e){const n=ef(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ft(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Ft(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function Qyt(t,e){const n=ef(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ft(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Ft(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function ext(t){return ef(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function txt(t,e){const n=Qe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function nxt(t){return ef(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function cK(t,e,n,r,i,s,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(Ft(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Ft(t,()=>t.vertexAttribPointer(a,i,t.FLOAT,!1,s,o)),Ft(t,()=>t.enableVertexAttribArray(a)),!0)}function rxt(t,e,n){lxt(t,n),Ft(t,()=>t.activeTexture(t.TEXTURE0+n)),Ft(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function ixt(t,e,n){return ef(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function sxt(t,e,n){return t.getUniformLocation(e,n)}function oxt(t,e,n,r){Ft(t,()=>rxt(t,e,r)),Ft(t,()=>t.uniform1i(n,r))}function A$(t,e,n){Ft(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Ft(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function uK(t,e){Ft(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Ft(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function ST(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+axt(t,e))}function axt(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function ef(t,e,n){const r=Ft(t,()=>e());if(r==null)throw new Error(n);return r}function lxt(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Xv(t,e=2){return it(t.slice(0,t.length-e))}function qv(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function _T(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Xv(t),...qv(t)]),e}function cxt(t,e=!1){let n=Qe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Qe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Qe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?e6(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Ah(t).newShape);let i=it(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const o=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||o)if(e){const a=Xv(t);let l=2,c=2;t.length&&([l,c]=qv(t)),i=a*(l/2)*(c/2),s=PO(i).map(u=>u*2)}else s=PO(i);return s}function CT(t){return t%2===0}function tk(t,e){if(t=t.slice(-2),e=e.slice(-2),br(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||CT(n)&&CT(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&CT(t[0])&&CT(e[0])}let I$,R$;function uxt(t){if(I$==null){const e=Fc(t);I$=e.getParameter(e.MAX_TEXTURE_SIZE)}return I$}function dxt(t){if(R$==null){const e=Fc(t);R$=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,R$)}function fxt(t){if(t===0)return 0;let e;const n=Fc(t);return Dl(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Dl(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Dl(t,e){return t.getExtension(e)!=null}function dK(t){try{if(Fc(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function hxt(t){if(t===0)return!1;const e=Fc(t);if(t===1){if(!Dl(e,"OES_texture_float"))return!1}else if(!Dl(e,"EXT_color_buffer_float"))return!1;return h4(e)}function pxt(t){if(t===0)return!1;const e=Fc(t);if(t===1){if(!Dl(e,"OES_texture_float")||!Dl(e,"WEBGL_color_buffer_float"))return!1}else{if(Dl(e,"EXT_color_buffer_float"))return h4(e);const r="EXT_color_buffer_half_float";if(Dl(e,r)){const i=e.getExtension(r);return mxt(e,i)}return!1}return h4(e)}function h4(t){const e=O8(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,i=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,i,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),o}function mxt(t,e){const n=O8(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const i=1,s=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,i,s,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function gxt(t){return t!==2?!1:Fc(t).fenceSync!=null}function FS(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&ue(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kt=Qe();Kt.registerFlag("HAS_WEBGL",()=>Kt.getNumber("WEBGL_VERSION")>0);Kt.registerFlag("WEBGL_VERSION",()=>dK(2)?2:dK(1)?1:0);Kt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Kt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Kt.get("WEBGL_VERSION")===2);Kt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Kt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Kt.registerFlag("WEBGL_PACK",()=>Kt.getBool("HAS_WEBGL"));Kt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Kt.getBool("WEBGL_PACK"));Kt.registerFlag("WEBGL_PACK_CLIP",()=>Kt.getBool("WEBGL_PACK"));Kt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Kt.getBool("WEBGL_PACK"));Kt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Kt.getBool("WEBGL_PACK"));Kt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Kt.getBool("WEBGL_PACK"));Kt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Kt.getBool("WEBGL_PACK"));Kt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Kt.getBool("WEBGL_PACK"));Kt.registerFlag("WEBGL_PACK_REDUCE",()=>Kt.getBool("WEBGL_PACK"));Kt.registerFlag("WEBGL_LAZILY_UNPACK",()=>Kt.getBool("WEBGL_PACK"));Kt.registerFlag("WEBGL_CONV_IM2COL",()=>Kt.getBool("WEBGL_PACK"));Kt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Kt.getBool("WEBGL_PACK"));Kt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>uxt(Kt.getNumber("WEBGL_VERSION")));Kt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>dxt(Kt.getNumber("WEBGL_VERSION")));Kt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Kt.getNumber("WEBGL_VERSION");return t===0?0:fxt(t)});Kt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Kt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!nce());Kt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>hxt(Kt.getNumber("WEBGL_VERSION")));Kt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Kt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Kt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Kt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>pxt(Kt.getNumber("WEBGL_VERSION")));Kt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>gxt(Kt.getNumber("WEBGL_VERSION")));Kt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Kt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Kt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Kt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>nce()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Kt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Kt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Kt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Kt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Kt.registerFlag("WEBGL_EXP_CONV",()=>!1);Kt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Kt.getBool("IS_TEST"));Kt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Kt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Kt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Kt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eo(){let t,e,n,r,i,s,o,a,l,c;return Qe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",o="out vec4 outputColor;",a=Qe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fg(t,e,n="index"){const r=on(e);return r.map((i,s)=>{const o=`int ${t[s]} = ${n} / ${i}`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${o}; ${a};`}).join("")}function JR(t,e,n="index"){const r=on(e);return r.map((i,s)=>{const o=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${o}; ${a};`}).join("")}function vxt(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function yxt(t,e,n="index"){const r=t.map((s,o)=>o),i=vxt(r,e);return i.map((s,o)=>{const a=`int ${t[o]} = ${n} / ${i[o]}`,l=o===i.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${i[o]}`:`index -= ${t[o]} * ${i[o]}`;return`${a}; ${l};`}).join("")}function F8(t){const e=on(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function U8(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const ipe=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:spe}=sct;function xxt(t,e,n){const r=[];if(t.forEach(h=>{const p=it(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:v}=B8(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(v.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const i=r.join(`
`),s=t.map(h=>bxt(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=Eo(),l=_xt(a);let c,u,d=Ext(a);return e.isPacked?(c=wxt(e.logicalShape,o,n.enableShapeUniforms),u=Txt(a)):(c=Sxt(e.logicalShape,o,n.enableShapeUniforms),u=Cxt(a)),n.packedInputs&&(d+=Ixt),[d,l,u,i,c,s,n.userCode].join(`
`)}function Py(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return Wxt(t,e);case 1:return Gxt(t,e);case 2:return jxt(t,e);case 3:return qxt(t,e);case 4:return Kxt(t,e);case 5:return Zxt(t);case 6:return Jxt(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function ope(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return zxt(t);case 1:return Vxt(t,e);case 2:return Hxt(t,e);case 3:return Xxt(t,e);default:return Yxt(t,e)}}function bxt(t,e,n=!1,r){let i="";n?i+=ope(t,r):i+=Py(t,r);const s=t.shapeInfo.logicalShape,o=e.logicalShape;return s.length<=o.length&&(n?i+=Qxt(t,e):i+=e1t(t,e)),i}function wxt(t,e,n){switch(t.length){case 0:return ape();case 1:return Rxt(t,e,n);case 2:return Uxt(t,e,n);case 3:return Pxt(t,e,n);default:return Dxt(t,e,n)}}function Sxt(t,e,n){switch(t.length){case 0:return ape();case 1:return Nxt(t,e,n);case 2:return Bxt(t,e,n);case 3:return $xt(t,e,n);case 4:return Lxt(t,e,n);case 5:return Oxt(t,e);case 6:return Fxt(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function _xt(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function Cxt(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function Txt(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function Ext(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Mxt}
    ${kxt}
    ${Axt}
  `}const Mxt=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,kxt=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Axt=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Ixt=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ape(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function Rxt(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Nxt(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Pxt(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function $xt(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${JR(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=fg(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Dxt(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2);let o=s,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function Lxt(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${JR(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=fg(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Oxt(t,e){const n=fg(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Fxt(t,e){const n=fg(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Uxt(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(br(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function Bxt(t,e,n){return br(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function hg(t){return`offset${t}`}function zxt(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Eo();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Wxt(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=hg(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function Vxt(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=Eo();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function Gxt(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${$y(t)}
      }
    `;const i=t.shapeInfo.texShape,s=i[0],o=i[1];if(o===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=hg(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function Hxt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=s[0],a=s[1],l=Eo();if(s!=null&&br(n,s))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function jxt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&br(n,s)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=s[0],h=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=Ah(n),l=o;if(l.length<n.length){const f=Dy(t,l),h=["row","col"];return`
      ${Py(f,e)}
      float ${i}(int row, int col) {
        return ${i}(${Ly(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${$y(t)}
      }
    `;const c=s[0],u=s[1],d=hg(r);return u===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function Xxt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],p=Dy(t,f),v=["b","row","col"];return`
        ${ope(p,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${Ly(v,h)});
        }
      `}const a=Eo();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],c=o[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function qxt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=Ah(n),c=a;if(c.length<n.length){const v=Dy(t,c),m=["row","col","depth"];return`
        ${Py(v,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${Ly(m,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${o}, 1)));
        ${$y(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],f=u[1],h=t.shapeInfo.flatOffset;if(f===s&&h==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===o&&h==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=hg(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Yxt(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Eo();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,o=s.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(s[o-1]/2);let f=d*Math.ceil(s[o-2]/2),h="int b, int row, int col",p=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let v=2;v<o-1;v++)h=`int b${v}, `+h,f*=s[o-v-1],p=`b${v} * ${f} + `+p;return`
    vec4 ${r}(${h}) {
      int index = ${p};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function Kxt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],o=n[2]*s,a=n[1]*o,{newShape:l,keptDims:c}=Ah(n);if(l.length<n.length){const y=Dy(t,l),x=["row","col","depth","depth2"];return`
      ${Py(y,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${Ly(x,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${s}, 1)));
        ${$y(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1],p=`int stride2 = ${r}Shape[3];`,v=`int stride1 = ${r}Shape[2] * stride2;`,m=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${p}
        ${v}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===s&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const g=hg(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${v}
      ${m}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${g});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${g});
      return sampleTexture(${r}, uv);
    }
  `}function Zxt(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],s=e[3]*i,o=e[2]*s,a=e[1]*o,{newShape:l,keptDims:c}=Ah(e);if(l.length<e.length){const v=Dy(t,l),m=["row","col","depth","depth2","depth3"];return`
      ${Py(v)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Ly(m,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${s}, ${i})) +
          depth3;
        ${$y(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1];if(h===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=hg(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${s} +
          depth2 * ${i} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Jxt(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=Ah(e);if(i.length<e.length){const m=Dy(t,i),g=["row","col","depth","depth2","depth3","depth4"];return`
      ${Py(m)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Ly(g,s)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${$y(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],p=f[1];if(p===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const v=hg(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${v};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function $y(t){const e=t.name,n=it(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function Qxt(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=spe(t.shapeInfo.logicalShape,e.logicalShape),l=Ar(o),c=o-s;let u;const d=["x","y","z","w","u","v"];s===0?u="":o<2&&a.length>=1?u="coords = 0;":u=a.map(y=>`coords.${d[y+c]} = 0;`).join(`
`);let f="";o<2&&s>0?f="coords":f=t.shapeInfo.logicalShape.map((y,x)=>`coords.${d[x+c]}`).join(", ");let h="return outputValue;";const v=it(t.shapeInfo.logicalShape)===1,g=it(e.logicalShape)===1;if(s===1&&!v&&!g)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(v&&!g)o===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const y=s-2,x=s-1;a.indexOf(y)>-1&&a.indexOf(x)>-1?h="return vec4(outputValue.x);":a.indexOf(y)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(x)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${f});
      ${h}
    }
  `}function e1t(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&br(o,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Ar(l),u=spe(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let f;const h=["x","y","z","w","u","v"];a===0?f="":l<2&&u.length>=1?f="coords = 0;":f=u.map(v=>`coords.${h[v+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((v,m)=>`coords.${h[m+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${f}
      return get${r}(${p});
    }
  `}function Ar(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function B8(t,e,n){const{newShape:r,keptDims:i}=Ah(e),s=e.length,o=t&&s===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&s>1&&!br(e,n)&&r.length<s||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:i}}function Dy(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Ly(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t1t(t,e,n,r){const i=n.map((u,d)=>{const f={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(f.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),s=i.map(u=>u.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=xxt(i,o,e),l=qyt(t.gl,a),c=t.createProgram(l);return Qe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:o},lpe(t,e,c)))}function lpe(t,e,n){const r=[],i=[];let s,o,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),Qe().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const f={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(f.shape=t.getUniformLocation(n,`${d}Shape`,u),f.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),r.push(f)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),o=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)i.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:o}}function fK(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,s=e[r],o=s.shape;if(!br(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(n.isUniform&&s.isUniform)return;const a=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!br(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function n1t(t,e,n,r,i){e.program.enableShapeUniforms||(fK(e.inShapeInfos,n),fK([e.outShapeInfo],[r]));const s=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,o[0],o[1]):t.setOutputMatrixTexture(s.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),Qe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:f,texShape:h}=e.variablesLocations[l];if(f){const{uniformShape:p}=B8(e.program.packedInputs,c.shape,c.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(f,new Int32Array(p));break;case 2:t.gl.uniform2iv(f,new Int32Array(p));break;case 3:t.gl.uniform3iv(f,new Int32Array(p));break;case 4:t.gl.uniform4iv(f,new Int32Array(p));break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(it(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let p=c.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(u,p)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=on(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=i[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function r1t(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=B8(t.packedInputs,o.shape,l);let f="",h="",p="";if(u.length===1&&t.packedInputs){const _=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${_[0]>1}_${_[1]>1}`}else if(u.length===2&&!t.packedInputs)h=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const _=on(u);p=`${_[0]===l[1]}_${_[_.length-1]===l[1]}`}const v=o.shape.length,m=u.length===2&&br(o.shape,l),g=it(o.shape)===1,y=Bv(o.shape,n.shape),x=!t.packedInputs&&v===n.shape.length&&br(l,n.texData.texShape),S=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${v}_${x}_${c?d:""}_${u.length}_${g}_${y}_${m}_${f}_${h}_${p}_${S}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const i=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+i+`${Qe().getNumber("WEBGL_VERSION")}`,s}function Js(t){return Qe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i1t{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ww.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Eo();this.outputShape=e,this.enableShapeUniforms=Js(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?JR(["r","c","d"],e):fg(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s1t{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ww.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Eo();this.outputShape=e,this.enableShapeUniforms=Js(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?JR(["r","c","d"],e):fg(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o1t{constructor(e){this.variableNames=["A"],this.outTexUsage=Ka.DOWNLOAD;const n=Eo();this.outputShape=e,this.userCode=`
      ${ipe}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a1t{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ka.DOWNLOAD;const n=Eo();this.outputShape=e,this.userCode=`
      ${ipe}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l1t={R:0,G:1,B:2,A:3};class hK{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=Eo();this.outputShape=e,this.enableShapeUniforms=Js(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${l1t[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?U8():F8(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c1t{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Eo();this.outputShape=e,this.enableShapeUniforms=Js(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;i+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?U8():F8(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u1t(t){const e=Eo(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Xyt(t,n)}function d1t(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Jyt(t,e)}function f1t(t){const e=new Uint16Array([0,1,2,2,1,3]);return Qyt(t,e)}function US(t,e,n,r,i,s){txt(e,n);const o=ext(t),a=t.TEXTURE_2D;return Ft(t,()=>t.bindTexture(a,o)),Ft(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Ft(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Ft(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Ft(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),Qe().getNumber("WEBGL_VERSION")===1?Ft(t,()=>t.texImage2D(a,0,r,e,n,0,i,s,null)):Ft(t,()=>t.texStorage2D(a,1,r,e,n)),Ft(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function cpe(t){return t.internalFormatFloat}function h1t(t,e,n,r){const[i,s]=OS(e,n);return US(t,i,s,cpe(r),r.textureFormatFloat,t.FLOAT)}function upe(t){return t.internalFormatHalfFloat}function p1t(t,e,n,r){const[i,s]=OS(e,n);return US(t,i,s,upe(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function dpe(t){return t.downloadTextureFormat}function m1t(t,e,n,r){const[i,s]=OS(e,n);return US(t,i,s,dpe(r),t.RGBA,t.UNSIGNED_BYTE)}function fpe(t){return t.internalFormatPackedFloat}function g1t(t,e,n,r){const[i,s]=Ny(e,n);return US(t,i,s,fpe(r),t.RGBA,t.FLOAT)}function hpe(t){return t.internalFormatPackedHalfFloat}function v1t(t,e,n,r){const[i,s]=Ny(e,n);return US(t,i,s,hpe(r),t.RGBA,r.textureTypeHalfFloat)}function y1t(t,e,n){return Ft(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),cK(t,e,"clipSpacePos",n,3,20,0)&&cK(t,e,"uv",n,2,20,12)}function x1t(t,e,n,r,i,s){Ft(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;i instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=s.internalFormatPackedFloat),o.set(i),Qe().getNumber("WEBGL_VERSION")===2?Ft(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):Ft(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),Ft(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function b1t(t,e,n){Ft(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Qe().getNumber("WEBGL_VERSION")===2?Ft(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ft(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Qe().getNumber("WEBGL_VERSION")===2?Ft(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Ft(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Ft(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function w1t(t,e,n,r){const i=t.createBuffer();Ft(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const a=4*4*e*n;return Ft(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Ft(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Ft(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function S1t(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function _1t(t,e,n,r){const[i,s]=OS(e,n),o=4,a=new Uint8Array(Byt(e*n,o));return Ft(t,()=>t.readPixels(0,0,i,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function C1t(t,e,n,r,i,s,o,a){const l=t,c=new Float32Array(zyt(s,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function T1t(t,e,n){const r=new Float32Array(e*n*4);return Ft(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N${constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=Qe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,Oyt(n,e)):this.gl=Fc(n),e=this.gl,Qe().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>Ft(s,()=>s.createVertexArray()),this.bindVertexArray=o=>Ft(s,()=>s.bindVertexArray(o)),this.deleteVertexArray=o=>Ft(s,()=>s.deleteVertexArray(o)),this.getVertexArray=()=>Ft(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Ft(e,()=>s.createVertexArrayOES()),this.bindVertexArray=o=>Ft(e,()=>s.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Ft(e,()=>s.deleteVertexArrayOES(o)),this.getVertexArray=()=>Ft(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Qe().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=wT(this.gl,s),Dl(this.gl,o))this.textureHalfFloatExtension=wT(this.gl,o);else if(Qe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Dl(this.gl,i))this.colorBufferHalfFloatExtension=wT(this.gl,i);else if(Qe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Dl(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Dl(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=d1t(this.gl),this.indexBuffer=f1t(this.gl),this.framebuffer=nxt(this.gl),this.textureConfig=O8(this.gl,this.textureHalfFloatExtension)}get debug(){return Qe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Ft(e,()=>e.finish()),Ft(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Ft(e,()=>e.deleteFramebuffer(this.framebuffer)),Ft(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Ft(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Ft(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),h1t(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),p1t(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),m1t(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),b1t(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),x1t(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),v1t(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),g1t(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(uK(this.gl,this.framebuffer),this.outputTexture=null),Ft(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>_1t(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,s,o){return C1t(this.gl,e,n,r,i,s,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return S1t(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=w1t(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(Qe().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=i.clientWaitSync(s,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},n=s}else Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>T1t(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=u1t(n));const r=Kyt(n);Ft(n,()=>n.attachShader(r,this.vertexShader)),Ft(n,()=>n.attachShader(r,e)),Zyt(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&k$(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Ft(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),y1t(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Ft(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&k$(this.gl,this.program),Ft(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?ixt(this.gl,e,n):sxt(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Ft(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),oxt(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,s]=Ny(n,r);this.setOutputMatrixTextureDriver(e,i,s)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&k$(this.gl,this.program),ST(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Ft(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ft(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=wT(this.gl,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Jq(()=>this.disposed||this.isQueryAvailable(e,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=E1t(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Qe().platform&&(r=Qe().platform.setTimeoutCustom.bind(Qe().platform)),Jq(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),A$(this.gl,e,this.framebuffer),this.debug&&ST(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(A$(this.gl,this.outputTexture,this.framebuffer),this.debug&&ST(this.gl)):uK(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;A$(i,e,this.framebuffer),this.debug&&ST(i),this.outputTexture=e,Ft(i,()=>i.viewport(0,0,n,r)),Ft(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),Ft(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function E1t(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:M1t,bincountImpl:ppe,bincountReduceImpl:k1t,bitwiseAndImpl:A1t,castImpl:I1t,ceilImpl:R1t,concatImpl:N1t,equalImpl:P1t,expImpl:$1t,expm1Impl:D1t,floorImpl:L1t,gatherNdImpl:O1t,gatherV2Impl:F1t,greaterImpl:U1t,greaterEqualImpl:B1t,lessImpl:z1t,lessEqualImpl:W1t,linSpaceImpl:V1t,logImpl:G1t,maxImpl:H1t,maximumImpl:j1t,minimumImpl:X1t,multiplyImpl:q1t,negImpl:Y1t,notEqualImpl:K1t,prodImpl:Z1t,raggedGatherImpl:J1t,raggedRangeImpl:Q1t,raggedTensorToTensorImpl:ebt,rangeImpl:tbt,rsqrtImpl:nbt,scatterImpl:rbt,sigmoidImpl:ibt,simpleAbsImpl:mpe,sliceImpl:sbt,sparseFillEmptyRowsImpl:obt,sparseReshapeImpl:abt,sparseSegmentReductionImpl:gpe,sqrtImpl:lbt,staticRegexReplaceImpl:cbt,stridedSliceImpl:ubt,stringNGramsImpl:dbt,stringSplitImpl:fbt,stringToHashBucketFastImpl:hbt,subImpl:pbt,tileImpl:mbt,topKImpl:gbt,transposeImpl:z8,uniqueImpl:vbt}=bpt;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vpe(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function yo(t,e){return e===1?[t]:vpe(t,e)}function ybt(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xbt{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Js(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=yo("rc",this.rank),r=Ar(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)s=`${e[e.length-1-o]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ype{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Js(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${bbt(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?U8():F8(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function bbt(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?yxt(["r","c","d"],"inputShape"):fg(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wbt{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=mK(n,r),s=gK(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const o=pK(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let a;return i===Es.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Es.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Es.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Es.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Es.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const s=mK(r,i),o=gK(n,s,i);o in this.freeTextures||(this.freeTextures[o]=[]);const a=pK(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=Qe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function Sbt(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function pK(t,e,n,r,i){const s=_bt(e,r);let o;if(i){const[l,c]=Ny(t[0],t[1]);o=l*c}else{const[l,c]=OS(t[0],t[1]);o=l*c}const a=Sbt(n,s);return o*a}function _bt(t,e){switch(t){case Es.PACKED_2X2_FLOAT32:return fpe(e);case Es.PACKED_2X2_FLOAT16:return hpe(e);case Es.UNPACKED_FLOAT32:return cpe(e);case Es.UNPACKED_FLOAT16:return upe(e);case Es.PACKED_4X1_UNSIGNED_BYTE:return dpe(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function Cbt(t){return Qe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Es.PACKED_2X2_FLOAT32:Es.UNPACKED_FLOAT32:t?Es.PACKED_2X2_FLOAT16:Es.UNPACKED_FLOAT16}function mK(t,e){if(t===Ka.UPLOAD)return Es.PACKED_2X2_FLOAT32;if(t===Ka.RENDER||t==null)return Cbt(e);if(t===Ka.DOWNLOAD||t===Ka.PIXELS)return Es.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function gK(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vu{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Js(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const ec="if (isnan(x)) return x;",Tbt="return x;",vK="return abs(x);",Ebt="return (x >= 0.0) ? x : (exp(x) - 1.0);",Mbt=ec+`
  return (x < 0.0) ? 0.0 : x;
`,kbt=ec+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Cf="return x;",Abt="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ibt="return x;",Rbt=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Nbt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Pbt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,$bt="return 1.0 / (1.0 + exp(-1.0 * x));";class Of{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Js(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dbt{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Js(this.outputShape.length);const n=e.length,r=yo("rc",n),i=Ar(n),s=ybt(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lbt=Wce,Obt=1e-7,Fbt=1e-4,TT={};function Ubt(t){return t in TT||(TT[t]={}),TT[t]}const Bbt=Qe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),zbt=600;function Wbt(){return Qe().global.screen==null?1024:Qe().global.screen.height*Qe().global.screen.width*window.devicePixelRatio*zbt/1024/1024}class QR extends QB{nextDataId(){return QR.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Qe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof N$)n=e;else{const r=Fc(Qe().getNumber("WEBGL_VERSION"),e);n=new N$(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Fc(Qe().getNumber("WEBGL_VERSION"));n=new N$(r),this.binaryCache=Ubt(Qe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new wbt(this.gpgpu),this.numMBBeforeWarning=Wbt(),this.texData=new dle(this,ru())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,s,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,s]},l.texShape=[i,s];const c=_T(n),u=new hK(c,!1,o),d=this.runWebGLProgram(u,[a],r,[[i,s]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((Qe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Qe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:Ka.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,s){if(Qe().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:Ka.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:s,slice:o,shape:a,isPacked:l}=n;if(o!=null){let f;l?f=new Of(a,Cf):f=new vu(a,Cf);const h=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:i}],i),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Oo());let d;if(i==="complex64"){const f=this.readSync(s.real.dataId),h=this.readSync(s.imag.dataId);d=jd(f,h)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Oo()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(v=>p.push(v))}const n=this.texData.get(e),{values:r,shape:i,slice:s,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(s!=null){let p;l?p=new Of(i,Cf):p=new vu(i,Cf);const v=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:o}],o),m=this.read(v.dataId);return this.disposeIntermediateTensorInfo(v),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(Qe().getBool("DEBUG")&&!Qe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Qe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(o!=="complex64"&&Qe().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const p=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(p.texture.texture,...bT(i))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),v=p[0],m=p[1];d=jd(v,m)}else if(c==null)d=this.getValuesFromTexture(e);else{const p=it(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,p)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const p=this.gpgpu.gl;Ft(p,()=>p.deleteBuffer(c))}const f=this.convertAndCacheOnCPU(e,d),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&ru().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:s,slice:o,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let h;l?h=new Of(s,Cf):h=new vu(s,Cf);const p=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:a}],a),v=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),v}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=ru().makeTensorFromTensorInfo(u),f=this.texData.get(u.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>dh(i));return Bn(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Bn(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!Hyt(r))throw Qe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),s=it(n);if(Qe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),h=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...bT(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(f),p}const o=Qe().getBool("WEBGL_PACK")&&i===!0,a=o?_T(n):n,l=o?new a1t(a):new o1t(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=Am(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=Am(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);a.kernelMs=ant(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:o[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Oo(),endMs:null}}endTimer(e){return Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Oo(),e)}async getQueryTime(e){if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:s,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=Bbt){return Qe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&it(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){ja("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return Lbt(e.shape,n)}packedUnaryOp(e,n,r){const i=new Of(e.shape,n),s=this.compileAndRun(i,[e],r);return ru().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=mpe(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,vK,e.dtype);const n=new vu(e.shape,vK),r=this.compileAndRun(n,[e]);return ru().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&S2(r[0])){const s=r.map(o=>Jf(o));i=this.write(s,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return ru().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new Dbt(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new xbt(e.shape),r=!0;return this.runWebGLProgram(n,[e],e.dtype,null,r)}packedReshape(e,n){const r=[Xv(e.shape),...qv(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[Xv(n),...qv(n)],o=new ype(s,r),a=!0,l=[r],c=this.runWebGLProgram(o,[i],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:s,dtype:o}=r;if(n!=null){const f=it(s),h=n[0]*n[1]*4;ue(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=_T(s);let l;i?l=new s1t(a):l=new i1t(a);const c=!0,u=[n??bT(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,u,c,n);return{dtype:o,shape:s,dataId:d.dataId}}runWebGLProgram(e,n,r,i,s=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===ww.DENSE){const g=o??bT(e.outputShape);l.texShape=g.map(y=>y*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),it(a.shape)===0)return l.values=Xs(a.dtype,0),a;const c=[],u=n.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let y=this.texData.get(g.dataId);if(y.texture==null){if(!e.packedInputs&&it(g.shape)<=Qe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:y.values};e.packedInputs&&(y.isPacked=!0,y.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!y.isPacked!=!!e.packedInputs)g=y.isPacked?this.unpackTensor(g):this.packTensor(g),c.push(g),y=this.texData.get(g.dataId);else if(y.isPacked&&!tk(y.shape,g.shape)){const x=g,S=g.shape;g.shape=y.shape,g=this.packedReshape(g,S),c.push(g),y=this.texData.get(g.dataId),x.shape=S}return{shape:g.shape,texData:y,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},f=r1t(e,u,d),h=this.getAndSaveBinary(f,()=>t1t(this.gpgpu,e,u,d)),p=this.activeTimers!=null;let v;p&&(v=this.startTimer()),Qe().get("ENGINE_COMPILE_ONLY")||n1t(this.gpgpu,h,u,d,i),c.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const m=Qe().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const g=Oo();g-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!Qe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const g=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),g}return a}compileAndRun(e,n,r,i,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Qe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ze(()=>{if(!Qe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Qe().getBool("DEBUG");Qe().set("DEBUG",!1);const n=this.abs(vr(1e-8)).dataSync()[0];if(Qe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Obt:Fbt}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:s,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Oo());let d=n.texShape;if(d==null&&(d=cxt(r,l),n.texShape=d),s!=null){const f=_T(r);let h,p=d[1],v=d[0];const m=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!m)&&([p,v]=Ny(d[0],d[1])),l?h=new c1t(f,m):h=new hK(f,m);const g=m?[v,p]:d,y=this.makeTensorInfo(g,i),x=this.texData.get(y.dataId);m?x.usage=Ka.PIXELS:x.usage=Ka.UPLOAD,x.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),p,v,s);const S=[[v,p]],_=!0,C=this.runWebGLProgram(h,[y],i,S,_),T=this.texData.get(C.dataId);n.texShape=T.texShape,n.isPacked=T.isPacked,n.usage=T.usage,Qe().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=T.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(y),c&&(this.uploadWaitMs+=Oo()-u)}else{const f=this.acquireTexture(d,a,i,l);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=Vbt(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*kM(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await aue(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(rpe(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:s,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=lpe(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:s,width:o,channels:a}=e,l=ru().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(i,n,r,s,o,a);return ru().makeTensorFromDataId(c,n,r,l)}}QR.nextDataId=0;function Vbt(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rce()&&oce("webgl",()=>new QR,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W8=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class zm{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=kn(n,r),this.enableShapeUniforms=Js(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pg=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Oy{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=kn(n,r);const s=this.outputShape.length;this.enableShapeUniforms=Js(s);let o="";if(i)if(s===0||it(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Ar(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=yo("coords",s);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ta(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Gbt={kernelName:V2,backendName:"webgl",kernelFunc:Ta};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uh(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(s.dataId),a=Ta({inputs:{x:r},backend:n}),l=Ta({inputs:{x:i},backend:n});return o.complexTensorInfos={real:a,imag:l},s}const Hbt={kernelName:h6,backendName:"webgl",kernelFunc:Uh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xpe="return (a < 0.) ? b * a : a;",bpe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function jbt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r,o=n.makeTensorInfo([],"float32",Ih(s,"float32")),a=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oy(bpe,i.shape,o.shape):new zm(xpe,i.shape,o.shape),l=n.runWebGLProgram(a,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const Xbt={kernelName:KI,backendName:"webgl",kernelFunc:jbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wpe="return (a < 0.) ? b * a : a;",Spe=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function qbt(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,s=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oy(Spe,r.shape,i.shape):new zm(wpe,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],"float32")}const Ybt={kernelName:mR,backendName:"webgl",kernelFunc:qbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fy="if (isnan(x)) return x;";function or({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:o}=i,a=s,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const d=a.texData.get(o.dataId),f=n(d.values,l);return a.makeTensorInfo(o.shape,l,f)}const c=Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Of(o.shape,e):u=new vu(o.shape,t),a.runWebGLProgram(u,[o],l)}}function Ls({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(r&&l.dtype==="complex64"){const p=u.texData.get(l.dataId),v=u.texData.get(c.dataId),[m,g]=[[p.complexTensorInfos.real,v.complexTensorInfos.real],[p.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(x=>{const[S,_]=x,C={dataId:S.dataId,dtype:S.dtype,shape:l.shape},T={dataId:_.dataId,dtype:_.dtype,shape:c.shape},A=new zm(t,l.shape,c.shape);return u.runWebGLProgram(A,[C,T],_a(S.dtype,_.dtype))}),y=Uh({inputs:{real:m,imag:g},backend:u});return u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(g),y}const d=s||_a(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&i!=null){const p=u.texData.get(l.dataId).values,v=u.texData.get(c.dataId).values,m=l.dtype==="string"?Xd(p):p,g=l.dtype==="string"?Xd(v):v,[y,x]=i(l.shape,c.shape,m,g,d),S=u.makeTensorInfo(x,d),_=u.texData.get(S.dataId);return _.values=y,S}const f=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return f?h=new Oy(e,l.shape,c.shape,n):h=new zm(t,l.shape,c.shape),u.runWebGLProgram(h,[l,c],d)}}function Sw(t,e=!1){if(t==="linear")return e?Ibt:Tbt;if(t==="relu")return e?Nbt:Mbt;if(t==="elu")return e?Rbt:Ebt;if(t==="relu6")return e?Pbt:kbt;if(t==="prelu")return e?Spe:wpe;if(t==="leakyrelu")return e?bpe:xpe;if(t==="sigmoid")return e?$bt:Abt;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _pe{constructor(e,n,r,i=!1,s=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Js(this.outputShape.length);const u=i?e[1]:e[2],d=Math.ceil(u/2),f=i?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",p=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";a&&(l?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:m=`vec4 activation(vec4 x) {
          ${a}
        }`,g="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let x="rc.x",S="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(S=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${m}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${S};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${v[0]});
          result += (${p[1]} * ${v[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${y}

        ${g}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yK={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class xK{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=kn(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bK="return a * b;";function V8(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=_a(r.dtype,i.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),c=new xK(yK.REAL,r.shape,i.shape),u=new xK(yK.IMAG,r.shape,i.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],f=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(u,d,"float32"),p=Uh({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([r,i])){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[c,u]=q1t(r.shape,i.shape,a.values,l.values,s),d=n.makeTensorInfo(u,s),f=n.texData.get(d.dataId);return f.values=c,d}let o;return Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new Oy(bK,r.shape,i.shape):o=new zm(bK,r.shape,i.shape),n.runWebGLProgram(o,[r,i],s)}const Kbt={kernelName:J2,backendName:"webgl",kernelFunc:V8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zbt(t,e,n){const r=[Xv(t.shape),...qv(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[Xv(e),...qv(e)],o=new ype(s,r),a=!0,l=[r],c=n.runWebGLProgram(o,[i],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function At(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,o=n,a=it(i.shape),l=fle(s,a),c=it(l);ue(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(i.dataId);return u.isPacked&&!tk(i.shape,l)&&!(u.texture!==null&&tk(u.shape,l))?Zbt(i,l,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const Jbt={kernelName:vR,backendName:"webgl",kernelFunc:At};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wK{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${Lv(d)?d.toPrecision(2):d}, ones);`}let u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qbt{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ewt(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=OR(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function mg(t,e,n,r){const i=ewt(t.shape);let s=t;for(let o=0;o<i.length;o++){const{inSize:a,windowSize:l,outSize:c}=i[o];let u,d;n==="mean"?u=o===0?new wK({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new wK({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new Qbt({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),d=s,s=r.runWebGLProgram(u,[s],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class twt{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const i=Ar(this.rank),s=nwt(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function nwt(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rwt{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Ar(this.rank),s=vpe("rc",this.rank),o=new Array(this.rank);for(let u=0;u<n.length;u++)o[n[u]]=s[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3(t,e,n){const r=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rwt(t.shape,e):new twt(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iwt(t,e,n,r){const i=e,s=t.shape.length,o=Wn(i,t.shape);let a=o;const l=ui(a,s),c=l!=null;let u=t;c&&(u=e3(t,l,r),a=Ii(a.length,s)),Ds("sum",a,s);const[d,f]=xs(u.shape,a);let h=d;n&&(h=Wi(d,o));const p=it(f),m=it(t.shape)/p,g=At({inputs:{x:u},attrs:{shape:[m,p]},backend:r}),y=q6(t.dtype),x=mg(g,y,"sum",r),S=At({inputs:{x},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(x),c&&r.disposeIntermediateTensorInfo(u),S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;return iwt(i,s,o,n)}const swt={kernelName:_R,backendName:"webgl",kernelFunc:t3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function To(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:s}=r,o=n,a=i.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=i.shape[s[u]];let c;if(o.shouldExecuteOnCPU([i])){const d=o.texData.get(i.dataId).values,f=z8(d,i.shape,i.dtype,s,l);c=o.makeTensorInfo(l,i.dtype);const h=o.texData.get(c.dataId);h.values=f}else c=e3(i,s,o);return c}const owt={kernelName:ov,backendName:"webgl",kernelFunc:To};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cpe=1e3;function nk({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],f=r?e.shape[u-1]:e.shape[u-2],h=n?t.shape[c-1]:t.shape[c-2],p=r?e.shape[u-2]:e.shape[u-1],v=t.shape.slice(0,-2),m=e.shape.slice(0,-2),g=it(v),y=it(m),S=kn(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,p]);ue(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const _=n?[g,d,h]:[g,h,d],C=r?[y,p,f]:[y,f,p],T=At({inputs:{x:t},backend:i,attrs:{shape:_}}),A=At({inputs:{x:e},backend:i,attrs:{shape:C}}),k=[T,A],M=Math.max(g,y),R=n?T.shape[1]:T.shape[2],P=s!=null,O=o!=null,$=l==="leakyrelu",U=l!=null?Sw(l,!0):null,z=P||O||$||U!=null;let X;if((h===1||p===1)&&R>Cpe&&z===!1){let F=T,W=A;n&&(F=To({inputs:{x:T},backend:i,attrs:{perm:[0,2,1]}}),k.push(F)),r&&(W=To({inputs:{x:A},backend:i,attrs:{perm:[0,2,1]}}),k.push(W));const V=p!==1,j=p===1;let J=F;V&&(J=At({inputs:{x:F},backend:i,attrs:{shape:[M,R,1]}}),k.push(J));const Q=p===1?2:1;let te=W;j&&(te=At({inputs:{x:W},backend:i,attrs:{shape:[M,1,R]}}),k.push(te));const re=V8({inputs:{a:J,b:te},backend:i});X=t3({inputs:{x:re},backend:i,attrs:{axis:Q,keepDims:!0}}),k.push(re)}else{const F=_a(t.dtype,e.dtype),W=new _pe(_,C,[M,h,p],n,r,P,U,O,$),V=[T,A];if(s!=null&&V.push(s),O&&V.push(o),$){const j=i.makeTensorInfo([],"float32",Ih(a,"float32"));V.push(j),k.push(j)}X=i.runWebGLProgram(W,V,F)}const D=At({inputs:{x:X},backend:i,attrs:{shape:S}});k.push(X);for(const F of k)i.disposeIntermediateTensorInfo(F);return D}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function awt(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return nk({a:i,b:s,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}const lwt={kernelName:AM,backendName:"webgl",kernelFunc:awt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SK="return abs(x);";function cwt(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),o=mpe(s.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let i;return Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Of(r.shape,SK):i=new vu(r.shape,SK),n.runWebGLProgram(i,[r],r.dtype)}const uwt={kernelName:II,backendName:"webgl",kernelFunc:cwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dwt=ec+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,fwt=or({opSnippet:dwt}),hwt={kernelName:_2,backendName:"webgl",kernelFunc:fwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pwt=ec+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,mwt=or({opSnippet:pwt}),gwt={kernelName:C2,backendName:"webgl",kernelFunc:mwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _K="return a + b;",vwt=Ls({opSnippet:_K,packedOpSnippet:_K,supportsComplex:!0,cpuKernelImpl:M1t}),ywt={kernelName:Ey,backendName:"webgl",kernelFunc:vwt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xwt{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bwt{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cE(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ta({inputs:{x:r[0]},backend:n});if(r.length>Qe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=cE({inputs:r.slice(0,l),backend:n}),u=cE({inputs:r.slice(l),backend:n});return cE({inputs:[c,u],backend:n})}const i=r.map(l=>l.dtype).reduce((l,c)=>_a(l,c)),s=r.map(l=>l.shape),a=Qe().getBool("WEBGL_PACK")?new bwt(r[0].shape,s):new xwt(r[0].shape,s);return n.runWebGLProgram(a,r,i)}const wwt={kernelName:o6,backendName:"webgl",kernelFunc:cE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Swt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=Wn(s,i.shape);let c=l;const u=ui(c,a);let d=i;u!=null&&(d=To({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Ii(c.length,a)),Ds("all",c,a);const[f,h]=xs(d.shape,c),p=it(h),v=At({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),m=mg(v,v.dtype,"all",n);let g;if(o){const y=Wi(f,l);g=At({inputs:{x:m},backend:n,attrs:{shape:y}})}else g=At({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),u!=null&&n.disposeIntermediateTensorInfo(d),g}const _wt={kernelName:a6,backendName:"webgl",kernelFunc:Swt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=Wn(s,i.shape);let c=l;const u=ui(c,a);let d=i;u!=null&&(d=To({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Ii(c.length,a)),Ds("any",c,a);const[f,h]=xs(d.shape,c),p=it(h),v=At({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),m=mg(v,v.dtype,"any",n);let g;if(o){const y=Wi(f,l);g=At({inputs:{x:m},backend:n,attrs:{shape:y}})}else g=At({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),u!=null&&n.disposeIntermediateTensorInfo(d),g}const Twt={kernelName:l6,backendName:"webgl",kernelFunc:Cwt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ewt{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mwt{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ue(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],o=Math.ceil(s/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=Ar(l),u=yo("coords",l);let d,f;if(o===1){f=l+1;const A=Ar(f);d=`
        ${A} sourceLocR = ${A}(${u.join()}, 0);
        ++${u[l-1]};
        ${A} sourceLocG = ${A}(${u.join()}, 0);
        ++${u[l-2]};
        ${A} sourceLocA = ${A}(${u.join()}, 0);
        --${u[l-1]};
        ${A} sourceLocB = ${A}(${u.join()}, 0);
        --${u[l-2]};`}else f=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),p="."+h[f-1],v=h.map(A=>"int "+A),m=yo("sourceLocR",f-1).concat("inIdx.r"),g=yo("sourceLocG",f-1).concat("inIdx.g"),y=yo("sourceLocB",f-1).concat("inIdx.b"),x=yo("sourceLocA",f-1).concat("inIdx.a"),S=r==="max"?"greaterThan":"lessThan",_=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${x.join()})));`,C=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${y.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,T=i?"":`
      float getBestIndicesAChannel(${v.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${v.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${T}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${_}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tpe(t,e,n,r=null){let i=e.shape[0],s=e.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const o=OR(s),a={windowSize:o,inSize:s,batchSize:i,outSize:Math.ceil(s/o)},l=new Ewt(a,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=Tpe(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function Epe(t,e,n,r=null){const i=r!=null?r.shape:e.shape,s=i[i.length-1],o=OR(s),a=new Mwt(i,o,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=Epe(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function Mpe(t,e,n,r){const i=[n];if(Ds("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!Qe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),s.push(l));const[c,u]=xs(l.shape,i),d=it(u),f=At({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});s.push(f);const h=Tpe(t,f,r);s.push(h);const p=At({inputs:{x:h},backend:t,attrs:{shape:c}});return s.forEach(v=>t.disposeIntermediateTensorInfo(v)),p}return Epe(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let o=Wn(s,i.shape);const a=ui(o,i.shape.length);let l=i;const c=[];a!=null&&(l=To({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),o=Ii(o.length,l.shape.length)),Ds("argMax",[o[0]],l.shape.length);const u=Mpe(n,l,o[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const Awt={kernelName:RI,backendName:"webgl",kernelFunc:kwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let o=Wn(s,i.shape);const a=ui(o,i.shape.length);let l=i;const c=[];a!=null&&(l=To({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),o=Ii(o.length,l.shape.length)),Ds("argMin",[o[0]],l.shape.length);const u=Mpe(n,l,o[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const Rwt={kernelName:NI,backendName:"webgl",kernelFunc:Iwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nwt=ec+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Pwt=or({opSnippet:Nwt}),$wt={kernelName:T2,backendName:"webgl",kernelFunc:Pwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dwt=ec+"return log(x + sqrt(x * x + 1.0));",Lwt=or({opSnippet:Dwt}),Owt={kernelName:E2,backendName:"webgl",kernelFunc:Lwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fwt=ec+`
  return atan(x);
`,Uwt=or({opSnippet:Fwt}),Bwt={kernelName:M2,backendName:"webgl",kernelFunc:Uwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zwt=W8+`
  return atan(a, b);
`,Wwt=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+pg+`
  return result;
`,Vwt=Ls({opSnippet:zwt,packedOpSnippet:Wwt}),Gwt={kernelName:A2,backendName:"webgl",kernelFunc:Vwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hwt=ec+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,jwt=or({opSnippet:Hwt}),Xwt={kernelName:k2,backendName:"webgl",kernelFunc:jwt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _w{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg",m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let y="0.0";if(v||(y="-1.0 / 1e-20"),r){const A=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${A} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?m:g:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const _=Math.floor(o/4)*4,C=o%4,T=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${_}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${T}
          }

          int xC = xCCorner + ${_};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${T}
          }
        }
        setOutput(${S});
      }
    `}}class G8{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,v=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let S="0.0";if(x||(S="-1.0 / 1e-20"),r){const M=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${m}, ${g}, ${y});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${v};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${M} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${v} +
                      wR * ${v} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const _="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const T=Math.floor(o/4)*4,A=o%4,k=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${_}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${m}, ${g}, ${y});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${T}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${k}
            }

            int xC = xCCorner + ${T};
            if (${A===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${A===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${A===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${k}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;FS(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;ue(Zs(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Jl(i.shape,s,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&br(u.inShape,u.outShape))return Ta({inputs:{x:i},backend:n});const d=new _w(u,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const Ywt={kernelName:PI,backendName:"webgl",kernelFunc:qwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=Jd(i.shape,s,o,u,a,l,c),f=new G8(d,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}const Zwt={kernelName:$I,backendName:"webgl",kernelFunc:Kwt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jwt{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class Qwt{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=d-1-e.padInfo.front,v=f-1-e.padInfo.top,m=h-1-e.padInfo.left,g=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${v}, ${m});
      const float avgMultiplier = float(${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=Jd(o.shape,a,l,d,c,u),h=new Qwt(f);return n.runWebGLProgram(h,[i],o.dtype)}const t2t={kernelName:u6,backendName:"webgl",kernelFunc:e2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n2t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s;FS([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Jl(o.shape,a,l,1,c),d=new Jwt(u);return n.runWebGLProgram(d,[i],o.dtype)}const r2t={kernelName:c6,backendName:"webgl",kernelFunc:n2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2t(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;return nk({a:i,b:s,transposeA:o,transposeB:a,backend:n})}const s2t={kernelName:DI,backendName:"webgl",kernelFunc:i2t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o2t{constructor(e,n,r,i,s,o){this.outputShape=[],this.variableNames=["x","mean","variance"],kn(e,n),kn(e,r);let a="0.0";i!=null&&(kn(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";s!=null&&(kn(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a2t{constructor(e,n,r,i,s,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],kn(e,n),kn(e,r);let a="vec4(0.0)";i!=null&&(kn(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(kn(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l2t=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:s,offset:o,scale:a}=t;ue(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ue(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ue(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,i,s];let u=null;o!=null&&(u=o.shape,c.push(o));let d=null;a!=null&&(d=a.shape,c.push(a));const f=Qe().getBool("WEBGL_PACK_NORMALIZATION")?new a2t(r.shape,i.shape,s.shape,u,d,l):new o2t(r.shape,i.shape,s.shape,u,d,l);return e.runWebGLProgram(f,c,c[0].dtype)},c2t={kernelName:XI,backendName:"webgl",kernelFunc:l2t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u2t{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Ar(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=d2t(this.rank);let i;const s=e.map((o,a)=>`sourceLoc.${p4[a]} = start[${a}] + coords.${p4[a]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const p4=["x","y","z","w","u","v"];function d2t(t){if(t===1)return"sourceLoc";if(t<=6)return p4.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f2t{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Ar(this.rank),r=yo("coords",this.rank),i=yo("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${s})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${i[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h2t(t,e,n,r){const i=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),o=r.texData.get(s.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=Uz(e,on(t.shape));i.slice&&(a+=i.slice.flatOffset),o.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),s}function Uy(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:o}=r,[a,l]=LR(i,s,o);if(Lz(i,a,l),it(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const d=n.texData.get(i.dataId),f=sbt(d.values,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,f)}const{isPacked:c}=n.texData.get(i.dataId),u=Fz(i.shape,a,l);if(c||!u){const d=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new f2t(l):new u2t(l),f=[a];return n.runWebGLProgram(d,[i],i.dtype,f)}return n.uploadToGPU(i.dataId),h2t(i,a,l,n)}const p2t={kernelName:SR,backendName:"webgl",kernelFunc:Uy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m2t=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:o}=r;ue(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((y,x)=>y*x),l=TS(i.shape,s,a),c=ES(l.length,s.length),u=MS(i.shape,s,a),d=Gz(o,s.length),f=Hz(u,o,s.length),h=[],p=At({inputs:{x:i},backend:n,attrs:{shape:l}}),v=To({inputs:{x:p},backend:n,attrs:{perm:c}}),m=At({inputs:{x:v},backend:n,attrs:{shape:u}}),g=Uy({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(v),h.push(m),h.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},g2t={kernelName:LI,backendName:"webgl",kernelFunc:m2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o}=r,a=n.readSync(i.dataId),l=n.readSync(s.dataId),c=ppe(a,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}const y2t={kernelName:d6,backendName:"webgl",kernelFunc:v2t};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x2t=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,b2t=`
  return float(int(a.r) & int(b.r));
`;function w2t(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=Qe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||o===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(i.dataId).values,[u,d]=A1t(r.shape,i.shape,l,c,r.dtype),f=n.makeTensorInfo(d,r.dtype),h=n.texData.get(f.dataId);return h.values=u,f}let a;return s?a=new Oy(x2t,r.shape,i.shape,!1):a=new zm(b2t,r.shape,i.shape),n.runWebGLProgram(a,[r,i],r.dtype)}const S2t={kernelName:f6,backendName:"webgl",kernelFunc:w2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2t(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.readSync(r.dataId),o=n.readSync(i.dataId),a=kn(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const C2t={kernelName:yle,backendName:"webgl",kernelFunc:_2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T2t="return float(a != b);",kpe=Ls({opSnippet:T2t,cpuKernelImpl:K1t,dtype:"bool"}),E2t={kernelName:uR,backendName:"webgl",kernelFunc:kpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BS(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Ta({inputs:{x:i.complexTensorInfos.real},backend:n})}const M2t={kernelName:O6,backendName:"webgl",kernelFunc:BS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k2t="return float(int(x));";function A2t(t,e){const n=new vu(t.shape,k2t),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m4(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return Ta({inputs:{x:i},backend:n});const o=fs(i.shape),a=m4({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=Uh({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(i.dtype==="complex64"){const o=BS({inputs:{input:i},backend:n}),a=m4({inputs:{x:o},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(o),a}if(!hle(i.dtype,s)){const o=Ta({inputs:{x:i},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){const o=n.texData.get(i.dataId).values,[a,l,c]=I1t(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,l,c)}if(s==="int32")return A2t(i,n);if(s==="bool"){const o=n.makeTensorInfo([],"bool",Xs("bool",1)),l=kpe({inputs:{a:i,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const I2t={kernelName:I2,backendName:"webgl",kernelFunc:m4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CK="return ceil(x);",R2t=or({opSnippet:CK,packedOpSnippet:CK,cpuKernelImpl:R1t}),N2t={kernelName:R2,backendName:"webgl",kernelFunc:R2t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P2t{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $2t{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:s,clipValueMax:o}=r;let a;Qe().getBool("WEBGL_PACK_CLIP")?a=new $2t(i.shape):a=new P2t(i.shape);const l=[[s],[o]];return n.runWebGLProgram(a,[i],i.dtype,l)}const L2t={kernelName:N2,backendName:"webgl",kernelFunc:D2t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O2t{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TK(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function F2t(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),s=new O2t(r.shape),o=[TK(r,i.complexTensorInfos.real),TK(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,o,o[0].dtype)}const U2t={kernelName:OI,backendName:"webgl",kernelFunc:F2t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B2t{constructor(e){this.outputShape=[],this.outputShape=Ru(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const i=n.length,s=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z2t{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ru(e,n);const r=this.outputShape,i=r.length,s=Ar(i),o=yo("coords",i),a=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((v,m)=>`T${m}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let v=1;v<l.length;v++)l[v]=l[v-1]+e[v][n];const c=a[n],u=a.slice(-2),d=a.join();let f=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let v=1;v<l.length;v++){const m=l[v-1];f+=`
        if (${c} < ${l[v]}  && ${c} >= ${l[v-1]}) {
          return getChannel(
            getT${v}(${ET(a,c,m)}),
            vec2(${ET(u,c,m)}));
        }`}const h=l.length,p=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${ET(a,c,p)}),
          vec2(${ET(u,c,p)}));`,this.userCode=`
      float getValue(${a.map(v=>"int "+v)}) {
        ${f}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function ET(t,e,n){const r=t.indexOf(e);return t.map((s,o)=>o===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Ta({inputs:{x:i.complexTensorInfos.imag},backend:n})}const W2t={kernelName:A6,backendName:"webgl",kernelFunc:n3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c1(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(y=>BS({inputs:{input:y},backend:n})),p=t.map(y=>n3({inputs:{input:y},backend:n})),v=c1(h,e,n),m=c1(p,e,n),g=Uh({inputs:{real:v,imag:m},backend:n});return h.forEach(y=>n.disposeIntermediateTensorInfo(y)),p.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),g}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const h=t.map(S=>{const C=[-1,it(S.shape.slice(e))];return At({inputs:{x:S},backend:n,attrs:{shape:C}})}),p=h.map(S=>({vals:n.readSync(S.dataId),shape:S.shape})),v=Ru(h.map(S=>S.shape),1),m=h[0].shape[0]===1,g=N1t(p,v,r,m),y=Ru(t.map(S=>S.shape),e),x=n.makeTensorInfo(y,r,g);return h.forEach(S=>n.disposeIntermediateTensorInfo(S)),x}const s=t.filter(h=>it(h.shape)>0),o=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const h=o?new vu(t[0].shape,Cf):new Of(t[0].shape,Cf);return n.runWebGLProgram(h,t,r)}const a=Qe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const h=[];for(let v=0;v<s.length;v+=a){const m=s.slice(v,v+a);h.push(c1(m,e,n))}const p=c1(h,e,n);for(const v of h)n.disposeIntermediateTensorInfo(v);return p}if(o){const h=new z2t(s.map(p=>p.shape),e);return n.runWebGLProgram(h,s,r)}const{tensors2D:l,outShape:c}=V2t(s,e,n),u=new B2t(l.map(h=>h.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(h=>n.disposeIntermediateTensorInfo(h));const f=At({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),f}function V2t(t,e,n){const r=Ru(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>At({inputs:{x:s},attrs:{shape:[-1,it(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ape(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=Wn(i,e[0].shape)[0],o=e.map(c=>c.shape);zz(o,s);const a=Ru(e.map(c=>c.shape),s);if(it(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>it(c.shape)>0);return l.length===1?Ta({inputs:{x:l[0]},backend:n}):c1(l,s,n)}const G2t={kernelName:FI,backendName:"webgl",kernelFunc:Ape};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ipe{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,v=e.inChannels%4,m=e.dataFormat==="channelsLast",g=m?1:2,y=m?2:3,x=m?3:1;let S="",_="";r&&(i?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`
          float activation(float x) {
            ${r}
          }
        `,_="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${y}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${v===1}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${v===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${v===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${_}
        setOutput(result);
      }
    `}}class H2t{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${v===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${v===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${v===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rpe{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Js(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let m=0;m<u;m++)f+=`
           vec4 xTexelC${m*2};
           int xTexelC${m*2}Ready;
           vec4 xTexelC${m*2+1};
           int xTexelC${m*2+1}Ready;
           vec4 xC${m};`;f+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let m=0;m<u;m++)f+=`
           xTexelC${m*2} = vec4(0.0);
           xTexelC${m*2}Ready = 0;
           xTexelC${m*2+1} = vec4(0.0);
           xTexelC${m*2+1}Ready = 0;
           xC${m} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let m=0;m<(d+1)/2;m++){const g=m*2;if(f+=`
           xC = xCCorner + ${g*l};
           `,a===1){if(g<u&&(o%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }
               `,l===1&&g>0?f+=`
                 xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${g} = vec4(previous.zw, xTexelC${g}.xy);
                   } else {
                     xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xC${g} = xTexelC${g};
                 `,g+1<u)){const y=o%2===0?e6(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${y};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                     xTexelC${g+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${g+1}.zw = vec2(0.0);
                     }
                     xTexelC${g+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);
                     } else {
                      xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);
                     }
                     `:f+=`
                     xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);
                     `):y===1?f+=`
                     xC${g+1} = xTexelC${g};
                     `:f+=`
                     xCOffset = xC + ${y};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                       xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${g+1}.zw = vec2(0.0);
                       }
                       xTexelC${g+1}Ready = 1;
                     }

                     xC${g+1} = xTexelC${g+1};
                     `}}else g<u&&(o%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.0);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
               `,g+1<u&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(
                   xTexelC${g}.xy, xTexelC${g+1}.xy);
               `,g+1<u&&(f+=`
                   xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
                 `)));g<u&&(f+=`
             wTexel = getW(r, ${g}, d1, d2);
             dotProd += xC${g}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${g}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,g+1<u&&(f+=`
               wTexel = getW(r, ${g+1}, d1, d2);
               dotProd += xC${g+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${g+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let h="",p="";r&&(i?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${v}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j2t{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Js(this.outputShape.length);const{dataFormat:r}=n,i=Eo(),s=r==="channelsLast",o=s?1:2,a=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rk(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Npe({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,v=!1;let m;const g=[];if(s!=null){const S=rk(s.shape,h);S!=null&&(s=At({inputs:{x:s},backend:r,attrs:{shape:S}}),g.push(s))}if(i!=null){const S=rk(i.shape,h);S!=null&&(i=At({inputs:{x:i},backend:r,attrs:{shape:S}}),g.push(i))}if(!((d===1||f===1)&&u>Cpe)&&c.isPacked&&h&&c.texture!=null&&l[2]%2!==0&&br(c.shape.slice(-3),l.slice(-3))){const S=l[0]*l[1]*(l[2]+1),_={dataId:t.dataId,shape:[1,S,n.inChannels],dtype:t.dtype},C=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,ue(tk(c.shape,_.shape),()=>`packed reshape ${c.shape} to ${_.shape} isn't free`);const T=At({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(T);const A=nk({a:_,b:T,backend:r,transposeA:p,transposeB:v,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o}),k=r.texData.get(A.dataId);ue(k.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=C,k.shape=n.outShape,m=Ta({inputs:{x:A},backend:r}),m.shape=n.outShape,g.push(A)}else{const S=n.outHeight*n.outWidth,_=At({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,S,n.inChannels]:[n.batchSize,n.inChannels,S]}}),C=At({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),T=nk({a:h?_:C,b:h?C:_,transposeA:!h,transposeB:v,backend:r,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o});m=At({inputs:{x:T},backend:r,attrs:{shape:n.outShape}}),g.push(_),g.push(C),g.push(T)}for(const S of g)r.disposeIntermediateTensorInfo(S);return m}function Ppe({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:f,dataFormat:h}=n,p=h==="channelsLast",v=l*c*u,m=f*d,g=[n.batchSize,v,m],y=!0,x=!1,S=[];if(s!=null){const D=rk(s.shape,p);D!=null&&(s=At({inputs:{x:s},backend:r,attrs:{shape:D}}),S.push(s))}if(i!=null){const D=rk(i.shape,p);D!=null&&(i=At({inputs:{x:i},backend:r,attrs:{shape:D}}),S.push(i))}const _=At({inputs:{x:e},backend:r,attrs:{shape:[1,v,it(e.shape)/v]}});S.push(_);const C=new j2t(g,n),T=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],A=r.runWebGLProgram(C,[t],"float32",T),k=At({inputs:{x:A},backend:r,attrs:{shape:g}});S.push(A),S.push(k);const M=i!=null,R=s!=null,P=a==="leakyrelu",O=a?Sw(a,!0):null,$=new _pe(p?k.shape:_.shape,p?_.shape:k.shape,p?[n.batchSize,m,n.outChannels]:[n.batchSize,n.outChannels,m],y,x,M,O,R,P),U=p?[k,_]:[_,k];if(i&&U.push(i),R&&U.push(s),P){const D=r.makeTensorInfo([],"float32",Ih(o,"float32"));U.push(D),S.push(D)}const z=r.runWebGLProgram($,U,"float32"),X=At({inputs:{x:z},backend:r,attrs:{shape:n.outShape}});S.push(z);for(const D of S)r.disposeIntermediateTensorInfo(D);return X}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=Qd(l),f=$s(i.shape,s.shape,o,c,a,u,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=Npe({x:i,filter:s,convInfo:f,backend:n});else if(f.strideWidth<=2&&d==="channelsLast"&&Qe().getBool("WEBGL_EXP_CONV")){const v=new Rpe(f),m=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];h=n.runWebGLProgram(v,[i,s],"float32",m)}else if(Qe().getBool("WEBGL_CONV_IM2COL"))h=Ppe({x:i,filter:s,convInfo:f,backend:n});else{const v=new Ipe(f);h=n.runWebGLProgram(v,[i,s],"float32")}const p=At({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),p}const q2t={kernelName:UI,backendName:"webgl",kernelFunc:X2t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y2t{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class K2t{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=o?1:2,u=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Z2t{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class J2t{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=Qd(l),f=$s(i.shape,u,o,1,a,c,!1,d),h=new Y2t(f);return n.runWebGLProgram(h,[i,s],"float32")}const eSt={kernelName:p6,backendName:"webgl",kernelFunc:Q2t};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tSt{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Js(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nSt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=Qd(c),f=$s(o,s.shape,a,1,l,u,!1,d);if(Qe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const h=[[f.strideHeight,f.strideWidth]],p=new tSt(f);return n.runWebGLProgram(p,[i,s],"float32",h)}else{const h=new K2t(f);return n.runWebGLProgram(h,[i,s],"float32")}}const rSt={kernelName:BI,backendName:"webgl",kernelFunc:nSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iSt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,c=Nh(i.shape,s.shape,o,l,a),u=new H2t(c);return n.runWebGLProgram(u,[i,s],"float32")}const sSt={kernelName:zI,backendName:"webgl",kernelFunc:iSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oSt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r,c=Nh(i.shape,l,o,1,a),u=new Z2t(c);return n.runWebGLProgram(u,[i,s],"float32")}const aSt={kernelName:m6,backendName:"webgl",kernelFunc:oSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lSt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r,c=Nh(l,s.shape,a,1,o),u=new J2t(c);return n.runWebGLProgram(u,[i,s],"float32")}const cSt={kernelName:g6,backendName:"webgl",kernelFunc:lSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uSt=Fy+`
  return cos(x);
`,dSt=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${pg}
  return result;
`,fSt=or({opSnippet:uSt,packedOpSnippet:dSt}),hSt={kernelName:P2,backendName:"webgl",kernelFunc:fSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pSt=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,mSt=or({opSnippet:pSt}),gSt={kernelName:$2,backendName:"webgl",kernelFunc:mSt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vSt{constructor(e,n,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=e,[u]=n,[d,f]=r;this.outputShape=[u,d,f,c];const h=i==="bilinear"?1:0,[p,v]=[`${a-1}.0`,`${l-1}.0`],[m,g,y]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[x,S,_]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${v} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${v}`];this.userCode=`
      const float height_ratio = float(${m});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${S};

        float in_y = ${y};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${_};
        if( in_x < 0.0 || in_x > ${v} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ySt=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new vSt(i.shape,s.shape,a,l,c);return n.runWebGLProgram(u,[i,s,o],"float32")},xSt={kernelName:y6,backendName:"webgl",kernelFunc:ySt};var Cw;(function(t){t.Prod="*",t.Sum="+"})(Cw||(Cw={}));class EK{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,o=this.op===Cw.Prod?"1.0":"0.0",a=r?o:`getX(${MK(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=i?`end != ${l-1}`:"end != 0",u=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",u=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Ar(s)} coords = getOutputCoords();
        int end = ${kK(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${kK(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${MK(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function MK(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function kK(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $pe(t,e,n,r,i,s){const o=e.shape.length,a=ui([r],o);let l=e;a!=null&&(l=To({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=Ii(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=Ta({inputs:{x:l},backend:n});for(let f=0;f<=Math.ceil(Math.log2(u))-1;f++){const h=new EK(t,l.shape,!1,s),p=[[f]],v=d;d=n.runWebGLProgram(h,[d],d.dtype,p),n.disposeIntermediateTensorInfo(v)}if(i){const f=new EK(t,l.shape,i,s),h=d;d=n.runWebGLProgram(f,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(a!=null){const f=Ph(a),h=To({inputs:{x:d},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),h}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bSt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return $pe(Cw.Prod,i,n,s,o,a)}const wSt={kernelName:v6,backendName:"webgl",kernelFunc:bSt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SSt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return $pe(Cw.Sum,i,n,s,o,a)}const _St={kernelName:WI,backendName:"webgl",kernelFunc:SSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CSt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),c=n.readSync(s.dataId),u=ppe(l,c,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(s),u=k1t(l,c,o,a);return n.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const TSt={kernelName:x6,backendName:"webgl",kernelFunc:CSt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ESt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:o}=r,a=i.shape[0],l=o==="NHWC"?i.shape[1]:i.shape[2],c=o==="NHWC"?i.shape[2]:i.shape[3],u=o==="NHWC"?i.shape[3]:i.shape[1],d=l*s,f=c*s,h=u/(s*s),p=o==="NHWC"?[a,d,f,h]:[a,h,d,f],v=new ESt(p,s,o);return n.runWebGLProgram(v,[i],i.dtype)}const kSt={kernelName:b6,backendName:"webgl",kernelFunc:MSt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dpe{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Js(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lpe{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Js(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<d;g++)h+=`
          vec4 xTexelC${g*2};
          int xTexelC${g*2}Ready;
          vec4 xTexelC${g*2+1};
          int xTexelC${g*2+1}Ready;
          vec4 xC${g};`;h+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let g=0;g<d;g++)h+=`
          xTexelC${g*2} = vec4(0.0);
          xTexelC${g*2}Ready = 0;
          xTexelC${g*2+1} = vec4(0.0);
          xTexelC${g*2+1}Ready = 0;
          xC${g} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let g=0;g<(f+1)/2;g++){const y=g*2;if(h+=`
          xC = xCCorner + ${y*c};
          `,l===1){if(y<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }
              `,c===1&&y>0?h+=`
                xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                  } else {
                    xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                xC${y} = xTexelC${y};
                `,y+1<d)){const x=a%2===0?e6(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                    xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${y+1}.zw = vec2(0.0);
                    }
                    xTexelC${y+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                    } else {
                     xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                    }
                    `:h+=`
                    xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                    `):x===1?h+=`
                    xC${y+1} = xTexelC${y};
                    `:h+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                      xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${y+1}.zw = vec2(0.0);
                      }
                      xTexelC${y+1}Ready = 1;
                    }

                    xC${y+1} = xTexelC${y+1};
                    `}}else y<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                  xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${y+1}.zw = vec2(0.0);
                  }
                  xTexelC${y+1}Ready = 1;
                }

                xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
              `,y+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                  xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y+1}.zw = vec2(0.);
                  }
                  xTexelC${y+1}Ready = 1;
                }

                xC${y} = vec4(
                  xTexelC${y}.xy, xTexelC${y+1}.xy);
              `,y+1<d&&(h+=`
                  xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                `)));y<d&&(h+=`
            wTexel = getW(r, ${y}, d1, q);
            dotProd += xC${y} * vec4(wTexel.xz, wTexel.xz);
          `,y+1<d&&(h+=`
              wTexel = getW(r, ${y+1}, d1, q);
              dotProd += xC${y+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",v="";r&&(i?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,v="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${m}
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ASt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),ue(Zs(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const d=$s(i.shape,s.shape,o,u,a,c,!0);let f;Qe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new Lpe(d):f=new Dpe(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[i,s],"float32",h)}const ISt={kernelName:VI,backendName:"webgl",kernelFunc:ASt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RSt{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class NSt{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PSt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,d=$s(i.shape,u,o,a,l,c,!0),f=new RSt(d);return n.runWebGLProgram(f,[i,s],"float32")}const $St={kernelName:w6,backendName:"webgl",kernelFunc:PSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DSt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,d=$s(u,s.shape,o,a,l,c,!0),f=new NSt(d);return n.runWebGLProgram(f,[i,s],"float32")}const LSt={kernelName:S6,backendName:"webgl",kernelFunc:DSt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OSt{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FSt(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],s=it(r.shape),o=At({inputs:{x:r},backend:n,attrs:{shape:[s]}}),a=new OSt(s),l=n.runWebGLProgram(a,[o],o.dtype),c=At({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const USt={kernelName:xle,backendName:"webgl",kernelFunc:FSt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BSt{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:s,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:f}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${o});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zSt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,c=bS(i.shape,s.shape,o,a,"NHWC",l);let u;const d=new BSt(c);u=n.runWebGLProgram(d,[i,s],"float32");const f=At({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),f}const WSt={kernelName:GI,backendName:"webgl",kernelFunc:zSt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VSt(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=Qz(i,s.length);t8(o.length,l,s);const{path:c,steps:u}=n8(a,l),d=u.length;let f=null,h=o.length;const p=[];for(let v=0;v<d;++v){for(const m of u[v]){const{permutationIndices:g,expandDims:y}=e8(h,l[m]);let x;r8(g)?x=s[m]:(x=To({inputs:{x:s[m]},backend:n,attrs:{perm:g}}),p.push(x));const S=x.shape.slice();for(let _=0;_<y.length;++_)S.splice(y[_],0,1);br(x.shape,S)||(x=At({inputs:{x},backend:n,attrs:{shape:S}}),p.push(x)),f===null?f=x:(f=V8({inputs:{a:x,b:f},backend:n}),p.push(f))}v<d-1&&(c[v]>=0&&(f=t3({inputs:{x:f},backend:n,attrs:{axis:c[v]-(o.length-h),keepDims:!1}}),p.push(f)),h--)}for(const v of p)v!==f&&n.disposeIntermediateTensorInfo(v);return f}const GSt={kernelName:_6,backendName:"webgl",kernelFunc:VSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HSt="return (x >= 0.0) ? x : (exp(x) - 1.0);",jSt=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,XSt=or({opSnippet:HSt,packedOpSnippet:jSt}),qSt={kernelName:L2,backendName:"webgl",kernelFunc:XSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YSt="return (b >= 0.0) ? a : a * (b + 1.0);",KSt=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,ZSt=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,s=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Oy(KSt,r.shape,i.shape):new zm(YSt,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)},JSt={kernelName:C6,backendName:"webgl",kernelFunc:ZSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QSt=`
  return vec4(equal(a, b));
`,e_t="return float(a == b);",t_t=Ls({opSnippet:e_t,packedOpSnippet:QSt,dtype:"bool",cpuKernelImpl:P1t}),n_t={kernelName:HI,backendName:"webgl",kernelFunc:t_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r_t=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${jz};
  float a1 = ${Xz};
  float a2 = ${qz};
  float a3 = ${Yz};
  float a4 = ${Kz};
  float a5 = ${Zz};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,i_t=or({opSnippet:r_t}),s_t={kernelName:O2,backendName:"webgl",kernelFunc:i_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o_t=Fy+`
  return exp(x);
`,a_t=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ope=or({opSnippet:o_t,packedOpSnippet:a_t,cpuKernelImpl:$1t,dtype:"float32"}),l_t={kernelName:F2,backendName:"webgl",kernelFunc:Ope};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g4(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:s}=e,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(ue(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),At({inputs:{x:s},backend:r,attrs:{shape:a}})}const c_t={kernelName:jI,backendName:"webgl",kernelFunc:g4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AK="return exp(x) - 1.0;",u_t=or({opSnippet:AK,packedOpSnippet:AK,cpuKernelImpl:D1t}),d_t={kernelName:U2,backendName:"webgl",kernelFunc:u_t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IK{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fpe(t,e,n){const r=n.texData.get(t.dataId),i=it(t.shape),s=t.shape[t.shape.length-1],o=i/s,a=At({inputs:{x:t},backend:n,attrs:{shape:[o,s]}}),l=a.shape,c=new IK("real",l,e),u=new IK("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(u,d,"float32"),p=Uh({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const v=At({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f_t(t){const{inputs:e,backend:n}=t,{input:r}=e;return Fpe(r,!1,n)}const h_t={kernelName:T6,backendName:"webgl",kernelFunc:f_t};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p_t{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zS(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:s}=n;if(s=s||Cy(i),s==="string"){const o=Ei(s,it(r));return o.fill(i),e.makeTensorInfo(r,s,o)}else{const o=new p_t(r,i),a=[[i]];return e.runWebGLProgram(o,[],s,a)}}const m_t={kernelName:E6,backendName:"webgl",kernelFunc:zS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g_t{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v_t={kernelName:M6,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new g_t(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RK="return floor(x);",y_t=or({opSnippet:RK,packedOpSnippet:RK,cpuKernelImpl:L1t}),x_t={kernelName:B2,backendName:"webgl",kernelFunc:y_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b_t=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,w_t=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,S_t=Ls({opSnippet:b_t,packedOpSnippet:w_t,dtype:"int32"}),__t={kernelName:z2,backendName:"webgl",kernelFunc:S_t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C_t{constructor(e){this.variableNames=["A"];const n=Eo(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T_t{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Eo(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E_t={kernelName:Snt,backendName:"webgl",kernelFunc:M_t};let f0,P$=Qe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function M_t(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:s}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=[c,l],d=[c,l,s];if(a||o){const v=Qe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(f0==null||v!==P$)&&(P$=v,f0=document.createElement("canvas").getContext("2d",{willReadFrequently:P$})),f0.canvas.width=l,f0.canvas.height=c,f0.drawImage(i,0,0,l,c),i=f0.canvas}const f=n.makeTensorInfo(u,"int32");n.texData.get(f.dataId).usage=Ka.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),i);const h=Qe().getBool("WEBGL_PACK")?new T_t(d):new C_t(d),p=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k_t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r,v=Qd(u),m=$s(i.shape,s.shape,l,d,c,f,!1,v);let g;const y=[],x=o!=null,S=a!=null,_=h==="leakyrelu",C=()=>{const A=[i,s],k=(M,R)=>{if(R==="NCHW"&&M.shape.length===1&&M.shape[0]!==1){const P=At({inputs:{x:M},backend:n,attrs:{shape:[M.shape[0],1,1]}});return y.push(P),P}return M};if(x&&A.push(k(o,u)),S&&A.push(k(a,u)),_){const M=n.makeTensorInfo([],"float32",Ih(p,"float32"));A.push(M),y.push(M)}return A};if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))g=Npe({x:i,filter:s,convInfo:m,backend:n,bias:o,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else if(m.strideWidth<=2&&v==="channelsLast"&&Qe().getBool("WEBGL_EXP_CONV")){const A=h?Sw(h,!0):null,k=new Rpe(m,x,A,S,_),M=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],R=C();g=n.runWebGLProgram(k,R,"float32",M)}else if(Qe().getBool("WEBGL_CONV_IM2COL"))g=Ppe({x:i,filter:s,convInfo:m,backend:n,bias:o,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else{const A=h?Sw(h,!1):null,k=new Ipe(m,x,A,S,_),M=C();g=n.runWebGLProgram(k,M,"float32")}const T=At({inputs:{x:g},backend:n,attrs:{shape:m.outShape}});return y.push(g),y.forEach(A=>n.disposeIntermediateTensorInfo(A)),T}const A_t={kernelName:IM,backendName:"webgl",kernelFunc:k_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I_t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r,p=[];let v=u;v==null&&(v=[1,1]),ue(Zs(l,v),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${v}'`);const m=$s(i.shape,s.shape,l,v,c,d,!0),g=Qe().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,y=f?Sw(f,g):null,x=[i,s],S=o!=null,_=a!=null,C=f==="leakyrelu";if(S&&x.push(o),_&&x.push(a),C){const M=n.makeTensorInfo([],"float32",Ih(h,"float32"));x.push(M),p.push(M)}let T;g?T=new Lpe(m,S,y,_,C):T=new Dpe(m,S,y,_,C);const A=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],k=n.runWebGLProgram(T,x,"float32",A);return p.forEach(M=>n.disposeIntermediateTensorInfo(M)),k}const R_t={kernelName:Fle,backendName:"webgl",kernelFunc:I_t};class N_t{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=Ar(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P_t(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=i.shape,o=s[s.length-1],a=it(r.shape),[l,c,u,d]=Dz(r,i),f=At({inputs:{x:i},backend:n,attrs:{shape:[c,o]}}),h=At({inputs:{x:r},backend:n,attrs:{shape:[it(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const g=n.readSync(i.dataId),y=n.bufferSync(r),x=O1t(g,y,r.dtype,c,o,u,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,x.values)}const p=new N_t(o,d,[c,u],r.shape),v=n.runWebGLProgram(p,[h,f],h.dtype),m=At({inputs:{x:v},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(v),m}const $_t={kernelName:ble,backendName:"webgl",kernelFunc:P_t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D_t{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Ar(this.rank),i=L_t(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function L_t(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Upe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:o,batchDims:a}=r,l=Wn(o,i.shape)[0];if(Qe().get("DEBUG")){const y=n.readSync(s.dataId),x=i.shape[l];for(let S=0;S<y.length;++S){const _=y[S];ue(_<=x-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${x-1}]`)}}const c=s8(i,s,l,a),u=it(s.shape),d=[],f=At({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=At({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(f),d.push(h);const p=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const y=n.bufferSync(h),x=n.bufferSync(f),S=F1t(x,y,p);return d.forEach(_=>n.disposeIntermediateTensorInfo(_)),n.makeTensorInfo(c.outputShape,S.dtype,S.values)}const v=new D_t(f.shape,p),m=n.runWebGLProgram(v,[f,h],f.dtype);d.push(m);const g=At({inputs:{x:m},backend:n,attrs:{shape:c.outputShape}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const O_t={kernelName:qI,backendName:"webgl",kernelFunc:Upe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F_t="return float(a > b);",U_t=`
  return vec4(greaterThan(a, b));
`,B_t=Ls({opSnippet:F_t,packedOpSnippet:U_t,cpuKernelImpl:U1t,dtype:"bool"}),z_t={kernelName:YI,backendName:"webgl",kernelFunc:B_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W_t="return float(a >= b);",V_t=`
  return vec4(greaterThanEqual(a, b));
`,G_t=Ls({opSnippet:W_t,packedOpSnippet:V_t,dtype:"bool",cpuKernelImpl:B1t}),H_t={kernelName:W2,backendName:"webgl",kernelFunc:G_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j_t(t){const{inputs:e,backend:n}=t,{input:r}=e;return Fpe(r,!0,n)}const X_t={kernelName:k6,backendName:"webgl",kernelFunc:j_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q_t="return float(!isnan(x) && !isinf(x));",Y_t=or({opSnippet:q_t,dtype:"bool"}),K_t={kernelName:G2,backendName:"webgl",kernelFunc:Y_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z_t="return float(isinf(x));",J_t=or({opSnippet:Z_t,dtype:"bool"}),Q_t={kernelName:H2,backendName:"webgl",kernelFunc:J_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eCt="return float(isnan(x));",tCt=or({opSnippet:eCt,dtype:"bool"}),nCt={kernelName:j2,backendName:"webgl",kernelFunc:tCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rCt="return float(a < b);",iCt=`
  return vec4(lessThan(a, b));
`,sCt=Ls({opSnippet:rCt,packedOpSnippet:iCt,cpuKernelImpl:z1t,dtype:"bool"}),oCt={kernelName:ZI,backendName:"webgl",kernelFunc:sCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aCt="return float(a <= b);",lCt=`
  return vec4(lessThanEqual(a, b));
`,cCt=Ls({opSnippet:aCt,packedOpSnippet:lCt,cpuKernelImpl:W1t,dtype:"bool"}),uCt={kernelName:JI,backendName:"webgl",kernelFunc:cCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCt(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,o=V1t(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const fCt={kernelName:wle,backendName:"webgl",kernelFunc:dCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hCt=Fy+`
  return x < 0.0 ? 0./0. : log(x);
`,pCt=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,mCt=or({opSnippet:hCt,packedOpSnippet:pCt,cpuKernelImpl:G1t}),gCt={kernelName:X2,backendName:"webgl",kernelFunc:mCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vCt=Fy+`
  return log(1.0 + x);
`,yCt=or({opSnippet:vCt}),xCt={kernelName:q2,backendName:"webgl",kernelFunc:yCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bCt="return float(a >= 1.0 && b >= 1.0);",wCt=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,SCt=Ls({opSnippet:bCt,packedOpSnippet:wCt,dtype:"bool"}),_Ct={kernelName:QI,backendName:"webgl",kernelFunc:SCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CCt="return float(!(x >= 1.0));",TCt=or({opSnippet:CCt}),ECt={kernelName:eR,backendName:"webgl",kernelFunc:TCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MCt="return float(a >= 1.0 || b >= 1.0);",kCt=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,ACt=Ls({opSnippet:MCt,packedOpSnippet:kCt,dtype:"bool"}),ICt={kernelName:tR,backendName:"webgl",kernelFunc:ACt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RCt{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NCt{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PCt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r,c=Qe().getBool("WEBGL_PACK_NORMALIZATION")?new NCt(i.shape,s,o,a,l):new RCt(i.shape,s,o,a,l);return n.runWebGLProgram(c,[i],i.dtype)},$Ct={kernelName:nR,backendName:"webgl",kernelFunc:PCt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DCt{constructor(e,n,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LCt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,d=new DCt(i.shape,a,l,c,u);return n.runWebGLProgram(d,[i,s,o],i.dtype)},OCt={kernelName:I6,backendName:"webgl",kernelFunc:LCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FCt(t,e,n,r){const i=it(e),o=it(t.shape)/i,a=At({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=mg(a,t.dtype,"max",r),c=At({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bpe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=i.shape.length,l=Wn(s,i.shape);let c=l;const u=ui(c,a),d=u!=null,f=n.shouldExecuteOnCPU([i]);let h=i;if(d){if(f){const x=n.texData.get(h.dataId).values,S=new Array(a);for(let T=0;T<S.length;T++)S[T]=i.shape[u[T]];const _=z8(x,i.shape,i.dtype,u,S);h=n.makeTensorInfo(S,i.dtype);const C=n.texData.get(h.dataId);C.values=_}else h=e3(i,u,n);c=Ii(c.length,a)}Ds("max",c,a);const[p,v]=xs(h.shape,c);let m=p;o&&(m=Wi(p,l));let g;if(f){const x=n.texData.get(h.dataId).values,S=H1t(x,it(v),m,i.dtype);g=n.makeTensorInfo(m,i.dtype);const _=n.texData.get(g.dataId);_.values=S}else g=FCt(h,v,m,n);return d&&n.disposeIntermediateTensorInfo(h),g}const UCt={kernelName:rR,backendName:"webgl",kernelFunc:Bpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BCt=W8+`
  return max(a, b);
`,zCt=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+pg+`
  return result;
`,WCt=Ls({opSnippet:BCt,packedOpSnippet:zCt,cpuKernelImpl:j1t}),VCt={kernelName:Y2,backendName:"webgl",kernelFunc:WCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GCt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;FS(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;ue(Zs(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Jl(i.shape,s,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&br(u.inShape,u.outShape))return Ta({inputs:{x:i},backend:n});const d=new _w(u,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const HCt={kernelName:iR,backendName:"webgl",kernelFunc:GCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jCt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=Jd(i.shape,s,o,u,a,c,l),f=new G8(d,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}const XCt={kernelName:sR,backendName:"webgl",kernelFunc:jCt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qCt{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,s=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=s-1-e.padInfo.top,l=o-1-e.padInfo.left,c=s*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class YCt{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,f=c-1-e.padInfo.top,h=u-1-e.padInfo.left,p=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KCt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=Jd(o.shape,a,l,d,c,u),h=new G8(f,"max",!0),p=n.runWebGLProgram(h,[o],o.dtype),v=new YCt(f),m=n.runWebGLProgram(v,[i,p],o.dtype);return n.disposeIntermediateTensorInfo(p),m}const ZCt={kernelName:N6,backendName:"webgl",kernelFunc:KCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JCt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:o}=e,a=s;FS([s,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=Jl(a.shape,l,c,1,u,d),h=!0,p=new _w(f,"max",h),v=n.runWebGLProgram(p,[a],a.dtype),m=new qCt(f),g=n.runWebGLProgram(m,[i,v],a.dtype);return n.disposeIntermediateTensorInfo(v),g}const QCt={kernelName:R6,backendName:"webgl",kernelFunc:JCt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eTt(t,e,n,r){let i=new _w(n,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");i=new _w(n,"max",!0,!0,e);const o=r.runWebGLProgram(i,[t],"float32");return[s,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tTt={kernelName:Sle,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=n;ue(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];ue(Zs(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const u=Jl(r.shape,i,s,c,o),[d,f]=eTt(r,a,u,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nTt(t,e,n,r){const i=it(e),o=it(t.shape)/i,a=At({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=mg(a,"float32","mean",r),c=At({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rTt={kernelName:oR,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:s}=e,o=n,a=r.shape.length,l=Wn(s,r.shape);let c=l;const u=ui(c,a),d=u!=null,f=o.shouldExecuteOnCPU([r]),h=[];let p=r;if(d){if(f){const S=o.texData.get(p.dataId).values,_=new Array(a);for(let A=0;A<_.length;A++)_[A]=r.shape[u[A]];const C=z8(S,r.shape,r.dtype,u,_);p=o.makeTensorInfo(_,r.dtype);const T=o.texData.get(p.dataId);T.values=C}else p=e3(r,u,o);h.push(p),c=Ii(c.length,a)}Ds("sum",c,a);const[v,m]=xs(p.shape,c);let g=v;i&&(g=Wi(v,l));const y=nTt(p,m,g,o);for(const x of h)o.disposeIntermediateTensorInfo(x);return y}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=Wn(s,i.shape);let c=l;const u=ui(c,a);let d=i;u!=null&&(d=To({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Ii(c.length,i.shape.length)),Ds("min",c,a);const[f,h]=xs(d.shape,c),p=it(h),v=At({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),m=mg(v,v.dtype,"min",n);let g;if(o){const y=Wi(f,l);g=At({inputs:{x:m},backend:n,attrs:{shape:y}})}else g=At({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),u!=null&&n.disposeIntermediateTensorInfo(d),g}const sTt={kernelName:aR,backendName:"webgl",kernelFunc:iTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oTt=W8+`
  return min(a, b);
`,aTt=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+pg+`
  return result;
`,lTt=Ls({opSnippet:oTt,packedOpSnippet:aTt,cpuKernelImpl:X1t}),cTt={kernelName:K2,backendName:"webgl",kernelFunc:lTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uTt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const i=e.length,s=Ar(i),o=n.map(u=>u[0]).join(","),a=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dTt{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,v)=>p[0]+e[v]+p[1]);const i=e.length,s=Ar(i),o=n.map(p=>p[0]).join(","),a=n.map((p,v)=>p[0]+e[v]).join(","),l=yo("rc",i),c=yo("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,f=r==="reflect"?0:1;let h="";if(i===1){const p=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const p=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${p}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[i-1]} += 1;
          if(${u}) {
            ${p}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fTt=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:s}=n,o=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dTt(r.shape,i,s):new uTt(r.shape,i,s);return e.runWebGLProgram(o,[r],r.dtype)},hTt={kernelName:lR,backendName:"webgl",kernelFunc:fTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pTt=`if (b == 0.0) return NAN;
  return mod(a, b);`,mTt=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+pg+`
  return result;
`,gTt=Ls({opSnippet:pTt,packedOpSnippet:mTt}),vTt={kernelName:Z2,backendName:"webgl",kernelFunc:gTt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yTt{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xTt=`
if (a == b) {
  return 1.0;
};
return a / b;`,bTt=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,zpe=Ls({opSnippet:xTt,packedOpSnippet:bTt,checkOutOfBounds:!0}),wTt={kernelName:D2,backendName:"webgl",kernelFunc:zpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NK="return a - b;",Wpe=Ls({opSnippet:NK,packedOpSnippet:NK,supportsComplex:!0,cpuKernelImpl:pbt}),STt={kernelName:hS,backendName:"webgl",kernelFunc:Wpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vpe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,o=Wn([s],i.shape),a=Bpe({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Wi(a.shape,o),c=At({inputs:{x:a},backend:n,attrs:{shape:l}}),u=Wpe({inputs:{a:i,b:c},backend:n}),d=Ope({inputs:{x:u},backend:n}),f=t3({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),h=At({inputs:{x:f},backend:n,attrs:{shape:l}}),p=zpe({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}const _Tt={kernelName:ER,backendName:"webgl",kernelFunc:Vpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CTt(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r,l=a?i:Vpe({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new yTt(c,u,s),f=[[o]],h=n.runWebGLProgram(d,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),h}const TTt={kernelName:_le,backendName:"webgl",kernelFunc:CTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ETt=ec+`
  return -x;
`,MTt=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function kTt(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[o,a]=Y1t(s.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let i;return Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Of(r.shape,MTt):i=new vu(r.shape,ETt),n.runWebGLProgram(i,[r],r.dtype)}const ATt={kernelName:cR,backendName:"webgl",kernelFunc:kTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ITt=Az;function RTt(t){ja("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(i.dataId),u=n.readSync(s.dataId),{selectedIndices:d}=ITt(c,u,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const NTt={kernelName:P6,backendName:"webgl",kernelFunc:RTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PTt=Iz;function $Tt(t){ja("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(i.dataId),d=n.readSync(s.dataId),{selectedIndices:f,validOutputs:h}=PTt(u,d,o,a,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const DTt={kernelName:$6,backendName:"webgl",kernelFunc:$Tt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LTt=Rz;function OTt(t){ja("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(i.dataId),d=n.readSync(s.dataId),f=o,h=a,p=l,v=c,{selectedIndices:m,selectedScores:g}=LTt(u,d,f,h,p,v);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const FTt={kernelName:D6,backendName:"webgl",kernelFunc:OTt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UTt{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BTt=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r,c=it(i.shape),u=new UTt(c,o,a,l),d=At({inputs:{x:i},backend:n,attrs:{shape:[c]}}),f=n.runWebGLProgram(u,[d],s);n.disposeIntermediateTensorInfo(d);const h=[...i.shape,o],p=At({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),p},zTt={kernelName:fR,backendName:"webgl",kernelFunc:BTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ik(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=BS({inputs:{input:r},backend:n}),s=ik({inputs:{x:i},backend:n}),o=n3({inputs:{input:r},backend:n}),a=ik({inputs:{x:o},backend:n}),l=Uh({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return zS({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const WTt={kernelName:AR,backendName:"webgl",kernelFunc:ik};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gpe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=BS({inputs:{input:r},backend:n}),s=Gpe({inputs:{x:i},backend:n}),o=n3({inputs:{input:r},backend:n}),a=ik({inputs:{x:o},backend:n}),l=Uh({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return zS({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const VTt={kernelName:dR,backendName:"webgl",kernelFunc:Gpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GTt(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return g4({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(u=>{t6(s,u.shape,"All tensors passed to stack must have matching shapes"),ue(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=g4({inputs:{input:u},backend:n,attrs:{dim:i}});return a.push(d),d}),c=Ape({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const HTt={kernelName:hR,backendName:"webgl",kernelFunc:GTt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jTt{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const i=e.length,s=Ar(i),o=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XTt{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((v,m)=>v[0]+e[m]+v[1]);const i=e.length,s=Ar(i),o=n.map(v=>v[0]).join(","),a=n.map((v,m)=>v[0]+e[m]).join(","),l=yo("rc",i),c=yo("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,f=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${u}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${u}) {`],h=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let v=0,m=i===1?2:4;v<m;v++)p+=`
        ${f[v]}
        if (${h}) {
          result[${v}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${v}] = getChannel(getX(${c.join()}), ${d});
        }
      `;p+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hpe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:o}=r;if(it(i.shape)===0){const c=s.map((u,d)=>u[0]+i.shape[d]+u[1]);return zS({backend:n,attrs:{shape:c,value:o,dtype:i.dtype}})}const a=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XTt(i.shape,s,o):new jTt(i.shape,s,o),l=[[o]];return n.runWebGLProgram(a,[i],i.dtype,l)},qTt={kernelName:pR,backendName:"webgl",kernelFunc:Hpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YTt=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,KTt=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+pg+`
  return result;
`,ZTt=Ls({opSnippet:YTt,packedOpSnippet:KTt}),JTt={kernelName:Q2,backendName:"webgl",kernelFunc:ZTt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=[],c=Wn(s,i.shape);let u=c;const d=ui(u,a);let f=i;d!=null&&(f=To({inputs:{x:i},backend:n,attrs:{perm:d}}),u=Ii(u.length,a),l.push(f)),Ds("prod",u,a);let h;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:v,outShape:m,outDtype:g}=Z1t(f.shape,f.dtype,p,u);h=n.makeTensorInfo(m,g,v)}else{const[p,v]=xs(f.shape,u),m=it(v),g=At({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),y=q6(i.dtype),x=mg(g,y,"prod",n);h=At({inputs:{x},backend:n,attrs:{shape:p}}),l.push(g),l.push(x)}if(o){l.push(h);const p=Wi(h.shape,c);h=At({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const eEt={kernelName:gR,backendName:"webgl",kernelFunc:QTt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tEt(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,{outputRaggedRank:a}=r,l=i.map(g=>n.readSync(g.dataId)),c=i.map(g=>g.shape),u=n.readSync(s.dataId),d=n.readSync(o.dataId),[f,h,p]=J1t(l,c,u,s.shape,s.dtype,d,o.shape,a),v=f.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(p,s.dtype,h);return v.concat([m])}const nEt={kernelName:Cle,backendName:"webgl",kernelFunc:tEt};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rEt(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,u]=Q1t(o,r.shape,r.dtype,a,i.shape,l,s.shape),d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const iEt={kernelName:Tle,backendName:"webgl",kernelFunc:rEt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEt(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(i.dataId),u=n.readSync(s.dataId),d=n.readSync(o.dataId),f=a.map(m=>n.readSync(m.dataId)),h=a.map(m=>m.shape),[p,v]=ebt(c,i.shape,u,s.shape,s.dtype,d,o.shape,f,h,l);return n.makeTensorInfo(p,s.dtype,v)}const oEt={kernelName:Ele,backendName:"webgl",kernelFunc:sEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jpe=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:s,dtype:o}=n,a=tbt(r,i,s,o);return e.makeTensorInfo([a.length],o,a)},aEt={kernelName:L6,backendName:"webgl",kernelFunc:jpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lEt="return 1.0 / x;",cEt=or({opSnippet:lEt}),uEt={kernelName:eS,backendName:"webgl",kernelFunc:cEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dEt=ec+`
  return (x < 0.0) ? 0.0 : x;
`,fEt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,hEt=or({opSnippet:dEt,packedOpSnippet:fEt}),pEt={kernelName:tS,backendName:"webgl",kernelFunc:hEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mEt=ec+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,gEt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,vEt=or({opSnippet:mEt,packedOpSnippet:gEt}),yEt={kernelName:nS,backendName:"webgl",kernelFunc:vEt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xEt{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let f;s?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bEt{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let f;s?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,c]=a,u=Qe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new bEt(i.shape,l,c,s,o):new xEt(i.shape,l,c,s,o);return n.runWebGLProgram(u,[i],"float32")}const SEt={kernelName:xR,backendName:"webgl",kernelFunc:wEt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Et{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],f=1/u,h=1/d,p=Math.ceil(f)*2+2,v=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CEt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r,a=new _Et(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const TEt={kernelName:U6,backendName:"webgl",kernelFunc:CEt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EEt{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],f=i?"0.5":"0.0";let h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MEt{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],f=i?"0.5":"0.0";let h;s?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kEt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,c]=a,u=Qe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new MEt(i.shape,l,c,s,o):new EEt(i.shape,l,c,s,o);return n.runWebGLProgram(u,[i],i.dtype)}const AEt={kernelName:yR,backendName:"webgl",kernelFunc:kEt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IEt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],f=1/u,h=1/d,p=Math.ceil(f)*2+2,v=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function REt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r,a=new IEt(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const NEt={kernelName:F6,backendName:"webgl",kernelFunc:REt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PEt{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,s=e.map((a,l)=>i(l)).join(","),o=Ar(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Et{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=yo("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Ar(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${c(i.slice())};
          }
          if(${o}) {
            result.b = ${u(i.slice())};
            if(${s}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return f(p)}function c(p){return p[r-1]="("+p[r-1]+" + 1)",f(p)}function u(p){return p[r-2]="("+p[r-2]+" + 1)",f(p)}function d(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",f(p)}function f(p){const v=e.map((y,x)=>h(x,p)),m=v.join(","),g=v.slice(-2).join(",");return`getChannel(getX(${m}), vec2(${g}))`}function h(p,v){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${v[p]} - 1`:`${v[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DEt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r,o=i.shape.length,a=Wn(s,i.shape);if(o===0)return Ta({inputs:{x:i},backend:n});const l=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $Et(i.shape,a):new PEt(i.shape,a);return n.runWebGLProgram(l,[i],i.dtype)}const LEt={kernelName:bR,backendName:"webgl",kernelFunc:DEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OEt{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FEt={kernelName:j6,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=new OEt(r.shape,s),[c,u]=Vz(o,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(i),Math.cos(i)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UEt=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,BEt=or({opSnippet:UEt}),zEt={kernelName:rS,backendName:"webgl",kernelFunc:BEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WEt="return inversesqrt(x);",VEt=or({opSnippet:WEt,cpuKernelImpl:nbt}),GEt={kernelName:iS,backendName:"webgl",kernelFunc:VEt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H8{constructor(e,n,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=Ar(s.length),u=Ar(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let v="";l&&(v="coords[0], coords[1]");const m=`getDefaultValue(${v})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${m}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HEt{constructor(e,n,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=Ar(s.length),u=Ar(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let v="";l&&(v="coords[0], coords[1]");const m=`getDefaultValue(${v})`,g=n>1?"strides[j]":"strides",y=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${g};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${y};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${m}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jEt(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=cg(s,i,o),f=[d/c,c];if(d===0)return n.makeTensorInfo(o,i.dtype);const h=At({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),p=At({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0]));let m;Qe().getBool("WEBGL_PACK")?m=new HEt(l,a,h.shape.length,p.shape.length,u,f):m=new H8(l,a,h.shape.length,p.shape.length,u,f);const g=n.runWebGLProgram(m,[p,h,v],p.dtype),y=At({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),y}const XEt={kernelName:Mle,backendName:"webgl",kernelFunc:jEt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qEt{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=Qe().getNumber("WEBGL_VERSION")===2?s:o,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YEt(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:o}=r,a=new qEt(i.shape[0],i.shape[1],s.shape[1],o),l=[[i.shape[1]]];return n.runWebGLProgram(a,[i,s],"int32",l)}const KEt={kernelName:Ale,backendName:"webgl",kernelFunc:YEt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZEt{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);i=l.join(),s=c.join()}const o=Ar(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JEt(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e,o=new ZEt(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,s],_a(i.dtype,s.dtype))}const QEt={kernelName:wR,backendName:"webgl",kernelFunc:JEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eMt=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${FR};
  float scale = ${UR};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,tMt=or({opSnippet:eMt}),nMt={kernelName:sS,backendName:"webgl",kernelFunc:tMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rMt=Fy+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,iMt=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sMt=or({opSnippet:rMt,packedOpSnippet:iMt,cpuKernelImpl:ibt}),oMt={kernelName:cS,backendName:"webgl",kernelFunc:sMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aMt=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,lMt=or({opSnippet:aMt}),cMt={kernelName:lS,backendName:"webgl",kernelFunc:lMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uMt=Fy+`
  return sin(x);
`,dMt=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${pg}
  return result;
`,fMt=or({opSnippet:uMt,packedOpSnippet:dMt}),hMt={kernelName:oS,backendName:"webgl",kernelFunc:fMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pMt=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,mMt=or({opSnippet:pMt}),gMt={kernelName:aS,backendName:"webgl",kernelFunc:mMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vMt=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,yMt=or({opSnippet:vMt}),xMt={kernelName:uS,backendName:"webgl",kernelFunc:yMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bMt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:o}=r;ue(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((g,y)=>g*y),l=[[0,0]];l.push(...o);for(let g=1+s.length;g<i.shape.length;++g)l.push([0,0]);const c=[],u=Hpe({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),d=TS(u.shape,s,a,!1),f=ES(d.length,s.length,!1),h=MS(u.shape,s,a,!1),p=At({inputs:{x:u},backend:n,attrs:{shape:d}}),v=To({inputs:{x:p},backend:n,attrs:{perm:f}}),m=At({inputs:{x:v},backend:n,attrs:{shape:h}});return c.push(u),c.push(p),c.push(v),c.forEach(g=>n.disposeIntermediateTensorInfo(g)),m},wMt={kernelName:CR,backendName:"webgl",kernelFunc:bMt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SMt(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(i.dataId),c=n.readSync(s.dataId),u=n.readSync(o.dataId)[0],[d,f,h,p,v]=obt(a,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],i.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const _Mt={kernelName:Ile,backendName:"webgl",kernelFunc:SMt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CMt(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.readSync(i.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[c,u,d]=abt(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const TMt={kernelName:Rle,backendName:"webgl",kernelFunc:CMt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EMt(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,u]=gpe(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const MMt={kernelName:Nle,backendName:"webgl",kernelFunc:EMt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kMt(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,u]=gpe(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const AMt={kernelName:Ple,backendName:"webgl",kernelFunc:kMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IMt(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=cg(s,i,a),h=!1;if(s.dtype==="string"){const g=n.bufferSync(i),y=n.bufferSync(s),x=dh(n.readSync(o.dataId)[0]),S=rbt(g,y,a,f,u,c,l,d,x,h);return n.makeTensorInfo(a,S.dtype,S.values)}const p=new H8(c,l,i.shape.length,s.shape.length,d,[f,1],h),v=n.runWebGLProgram(p,[s,i,o],s.dtype),m=At({inputs:{x:v},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(v),m}const RMt={kernelName:$le,backendName:"webgl",kernelFunc:IMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=Wn(o,i.shape)[0],l=i8(i,s,a),c=i.shape.length,u=new Array(c).fill(0),d=i.shape.slice();return l.map(f=>{const h=[...d];h[a]=f;const p=Uy({inputs:{x:i},backend:n,attrs:{begin:u,size:h}});return u[a]+=f,p})}const PMt={kernelName:TR,backendName:"webgl",kernelFunc:NMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PK="return sqrt(x);",$Mt=or({opSnippet:PK,packedOpSnippet:PK,cpuKernelImpl:lbt}),DMt={kernelName:dS,backendName:"webgl",kernelFunc:$Mt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LMt="return x * x;",OMt=or({opSnippet:LMt}),FMt={kernelName:B6,backendName:"webgl",kernelFunc:OMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $K="return (a - b) * (a - b);",UMt=Ls({opSnippet:$K,packedOpSnippet:$K}),BMt={kernelName:fS,backendName:"webgl",kernelFunc:UMt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(i.dataId),o=Xd(s),a=cbt(o,"string",r);return n.makeTensorInfo(i.shape,"string",a)}const WMt={kernelName:z6,backendName:"webgl",kernelFunc:zMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VMt({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=ec+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new vu(r.shape,i);return n.runWebGLProgram(s,[r],r.dtype)}const GMt={kernelName:vS,backendName:"webgl",kernelFunc:VMt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HMt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=Ar(r.length),o=Ar(r.length);let a="";if(i===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:h,finalShape:p,isIdentity:v,sliceDim0:m,isSimpleSlice:g,begin:y,end:x,strides:S}=Bz(i.shape,s,o,a,l,c,u,d,f);let _;if(v)_=At({inputs:{x:i},backend:n,attrs:{shape:p}});else if(m||g){ue(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const T=Oz(y,x,S),A=Uy({inputs:{x:i},backend:n,attrs:{begin:y,size:T}});_=At({inputs:{x:A},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(A)}else if(n.shouldExecuteOnCPU([i])){const A=n.readSync(i.dataId),k=Bn(i.shape,i.dtype,A),M=ubt(h,k,S,y);_=n.makeTensorInfo(p,i.dtype,M.values)}else{const A=new HMt(y,S,h);_=n.runWebGLProgram(A,[i],i.dtype)}const C=At({inputs:{x:_},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(_),C}const XMt={kernelName:W6,backendName:"webgl",kernelFunc:jMt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMt(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.readSync(u.dataId),h=n.readSync(d.dataId),[p,v]=dbt(f,h,i,s,o,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",v)]}const YMt={kernelName:Dle,backendName:"webgl",kernelFunc:qMt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KMt(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(s.dataId),l=n.readSync(o.dataId)[0],[c,u,d]=fbt(a,l,i),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const ZMt={kernelName:Lle,backendName:"webgl",kernelFunc:KMt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JMt(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(s.dataId),a=hbt(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const QMt={kernelName:Ole,backendName:"webgl",kernelFunc:JMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ekt="return tan(x);",tkt=or({opSnippet:ekt}),nkt={kernelName:pS,backendName:"webgl",kernelFunc:tkt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rkt=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,ikt=or({opSnippet:rkt}),skt={kernelName:mS,backendName:"webgl",kernelFunc:ikt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function okt(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:s,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=cg(o,s,i.shape),f=[d/c,c];if(d===0)return n.makeTensorInfo(i.shape,s.dtype);const h=At({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),p=At({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),v=At({inputs:{x:i},backend:n,attrs:{shape:f}}),m=new H8(l,a,h.shape.length,p.shape.length,u,f,!1,!0),g=n.runWebGLProgram(m,[p,h,v],v.dtype),y=At({inputs:{x:g},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),y}const akt={kernelName:kle,backendName:"webgl",kernelFunc:okt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lkt{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const i=Ar(this.rank),s=ckt(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function ckt(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xpe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),c=i.dtype==="string"?l.map(f=>dh(f)):l,u=Bn(i.shape,i.dtype,c),d=mbt(u,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new lkt(i.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const ukt={kernelName:gS,backendName:"webgl",kernelFunc:Xpe};class dkt{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class fkt{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pp(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function DK(t){let e=1;for(;e<t;)e*=2;return e}function hkt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:o}=r,a=Qe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Qe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([i])||u<a||s>l){const M=n.readSync(i.dataId),[R,P]=gbt(M,c,i.dtype,s,o);return[n.makeTensorInfo(R.shape,R.dtype,R.values),n.makeTensorInfo(P.shape,P.dtype,P.values)]}if(s===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[i,zS({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(i.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(i):i,v=it(c)/u,m=At({inputs:{x:h},attrs:{shape:[v,u]},backend:n});f&&pp(n,h);const g=DK(s),y=DK(u);let x=null;const S=()=>x===null?[m,m]:[m,x],_=(M,R,P)=>{const O=S(),$=new dkt(P),z=[[u],[x===null?1:0],[Number.NEGATIVE_INFINITY],[M],[R]],X=x;x=n.runWebGLProgram($,O,"int32",z),pp(n,X)};for(let M=1;M<g;M*=2){const R=M*2;for(let P=M;P>=1;P/=2)_(R,P,[v,y])}for(let M=y;M>g;M/=2){const R=S(),P=new fkt([v,M/2]),$=[[u],[x===null?1:0],[g]],U=x;x=n.runWebGLProgram(P,R,"int32",$),pp(n,U);const z=g/2,X=z*2;for(let D=z;D>=1;D/=2)_(X,D,x.shape)}let C=x;x=Uy({inputs:{x},backend:n,attrs:{begin:0,size:[v,s]}}),pp(n,C);let T=Upe({inputs:{x:m,indices:x},backend:n,attrs:{axis:1,batchDims:1}});pp(n,m);const A=c.slice(0,-1);A.push(s),C=x,x=At({inputs:{x},attrs:{shape:A},backend:n}),pp(n,C);const k=T;return T=At({inputs:{x:T},attrs:{shape:A},backend:n}),pp(n,k),[T,x]}const pkt={kernelName:V6,backendName:"webgl",kernelFunc:hkt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mkt{constructor(e,n,r,i,s,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gkt(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=r,[u,d,f,h]=i.shape,[p,v]=c??[d,f],m=[u,p,v,h],g=new mkt(d,f,o,a,l,m);return n.runWebGLProgram(g,[i,s],"float32")}const vkt={kernelName:G6,backendName:"webgl",kernelFunc:gkt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ykt(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;FS(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(s.dataId),{outputValues:a,outputShape:l,indices:c}=vbt(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const xkt={kernelName:H6,backendName:"webgl",kernelFunc:ykt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bkt(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i,a=o.shape.length,l=i.shape[s],c=new Array(a-1);let u=0;for(let v=0;v<a;v++)v!==s&&(c[u++]=o.shape[v]);const d=[],f=new Array(a).fill(0),h=o.shape.slice();h[s]=1;const p=new Array(l);for(let v=0;v<p.length;v++){f[s]=v;const m=Uy({inputs:{x:o},backend:n,attrs:{begin:f,size:h}}),g=At({inputs:{x:m},backend:n,attrs:{shape:c}});p[v]=g,d.push(m)}return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),p}const wkt={kernelName:MR,backendName:"webgl",kernelFunc:bkt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Skt{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,s=e.inSize,o=e.numSegments,a=o*Math.ceil(s/r);this.outputShape=[i,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _kt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:o}=r,a=i.shape.length,l=[];let c=0;const u=ui([c],a);let d=i;u!=null&&(d=To({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(d),c=Ii(1,a)[0]);const f=Iue(d.shape,c,o),h=it([d.shape[c]]),p=At({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(p);const v=q6(i.dtype),m=(S,_,C,T,A)=>{const k=S.shape[0],M=S.shape[1],R=Aue(M,A),P={windowSize:R,inSize:M,batchSize:k,numSegments:A},O=new Skt(P,_),$=n.compileAndRun(O,[S,C],T);if(l.push($),$.shape[1]===A)return $;const U=jpe({backend:n,attrs:{start:0,stop:A,step:1,dtype:"float32"}}),z=Xpe({inputs:{x:U},backend:n,attrs:{reps:[M/R]}});return l.push(U),l.push(z),m($,_,z,T,A)},g=m(p,"unsortedSegmentSum",s,v,o),y=At({inputs:{x:g},backend:n,attrs:{shape:f}});let x=y;if(u!=null){l.push(y);const S=Ph(u);x=To({inputs:{x},backend:n,attrs:{perm:S}})}return l.forEach(S=>n.disposeIntermediateTensorInfo(S)),x}const Ckt={kernelName:kR,backendName:"webgl",kernelFunc:_kt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tkt=[lwt,uwt,hwt,gwt,ywt,wwt,_wt,Twt,Awt,Rwt,$wt,Owt,Bwt,Gwt,Xwt,Ywt,Zwt,t2t,r2t,s2t,c2t,g2t,y2t,S2t,C2t,I2t,N2t,L2t,Hbt,U2t,G2t,q2t,eSt,rSt,sSt,aSt,cSt,hSt,gSt,xSt,wSt,_St,TSt,kSt,ISt,$St,LSt,USt,WSt,GSt,qSt,JSt,n_t,s_t,l_t,c_t,d_t,h_t,m_t,v_t,x_t,__t,E_t,A_t,R_t,$_t,O_t,z_t,H_t,Gbt,X_t,W2t,K_t,Q_t,nCt,Xbt,oCt,uCt,fCt,gCt,xCt,_Ct,ECt,ICt,$Ct,OCt,UCt,VCt,HCt,XCt,ZCt,QCt,tTt,rTt,sTt,cTt,hTt,vTt,TTt,Kbt,ATt,NTt,DTt,FTt,E2t,zTt,VTt,HTt,qTt,JTt,Ybt,eEt,nEt,iEt,oEt,aEt,M2t,wTt,uEt,pEt,yEt,Jbt,SEt,TEt,AEt,NEt,LEt,FEt,zEt,GEt,XEt,KEt,QEt,nMt,oMt,cMt,hMt,gMt,p2t,_Tt,xMt,wMt,_Mt,TMt,MMt,AMt,RMt,PMt,DMt,FMt,BMt,WMt,GMt,XMt,YMt,ZMt,QMt,STt,swt,nkt,skt,akt,ukt,pkt,vkt,owt,xkt,wkt,Ckt,WTt];for(const t of Tkt)Ule(t);let h0=[],$$=[];function Ekt(){let t=N.useRef(),[e,n]=N.useState(-1);const[r,i]=N.useState(!0),[s,o]=N.useState(!1);N.useEffect(()=>(a(),console.log("MNIST MOUNTED"),()=>{console.log("MNIST UNMONUNTED")}),[]);const a=()=>{const f=t.current.getContext("2d");t.current.width=280,t.current.height=280,f.lineWidth=10,f.strokeStyle="red",f.beginPath(),f.rect(20,280*.2,240,280*.7),f.stroke();let h=!1;t.current.addEventListener("mousedown",p);function p(){r?h=!0:h=!1}t.current.addEventListener("mouseup",v);function v(){h=!1,f.beginPath(),o(!0)}t.current.addEventListener("mousemove",m);function m(g){if(!h)return;f.lineWidth=22,f.lineCap="round",f.beginPath();let y=g.clientX-t.current.offsetLeft,x=g.clientY-t.current.offsetTop;h0.push(y),h0.push(x),f.lineTo(y,x),f.strokeStyle="white",f.stroke()}};function l(){let f=[];const h=t.current.getContext("2d");let p=0,v=0,m=0;m=h0.length/2,f=h0,d(),h.scale(.095,.095);for(let y=0;y<m;y++)p=f[Math.floor(2*y)],v=f[Math.floor(2*y)+1],h.lineTo(p,v),h.strokeStyle="white",h.stroke();h.setTransform(1,0,0,1,0,0);const g=h.getImageData(0,0,28,28).data;for(let y=0;y<g.length;y++)y%4===1&&$$.push(g[y]>0?1:0)}function c(f){if(f.length===0)return-1;for(var h=f[0],p=0,v=1;v<f.length;v++)f[v]>h&&(p=v,h=f[v]);return p}async function u(){const f=await zft("https://raw.githubusercontent.com/edwin-torres/cnn/main/model.json"),h=Aat($$,[1,28,28,1]),p=f.predict(h);n(c(p.dataSync())),h0=[],$$=[]}function d(){h0=[];const f=t.current.getContext("2d");f.beginPath(),f.strokeStyle="#DC143C",f.clearRect(0,0,t.current.width,t.current.height)}return L.jsxs("div",{children:[L.jsxs(Qn,{sx:{textAlign:"center",m:2},children:[L.jsxs(En,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left"},children:["Using ",L.jsx(En,{sx:{textAlign:"left",color:"red",fontSize:35},gutterBottom:!0,display:"inline",children:" ONE"})," stroke, use the mouse to draw a single digit inside the red box.  Cover as much of the red box as possible."]}),L.jsxs(En,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left"},children:["The nueral network used in this project was developed in  ",L.jsx(Lu,{href:"https://github.com/edwin-torres/cnn/blob/main/DigitPrediction-CNN.ipynb",target:"_blank",underline:"hover",children:"this jupyter notebook."}),"."]}),L.jsxs(En,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left",color:"NavajoWhite",fontSize:55},children:["Prediction: ",e>-1?e:" "]})]}),r?L.jsx("div",{style:{textAlign:"center"},children:L.jsx("canvas",{style:{size:"100%",border:"5px solid black",background:"black"},ref:t})}):L.jsx(L.Fragment,{}),r&&s?L.jsxs(Qn,{sx:{m:2,textAlign:"center"},children:[L.jsx(kc,{onClick:()=>{l(),u(),i(!1)},sx:{m:2,textAlign:"center"},variant:"contained",children:"Make Prediction"}),"   "]}):L.jsx(L.Fragment,{})]})}function Mkt({name:t,description:e,code_url:n}){return L.jsxs(uee,{sx:{p:0,m:0,bgcolor:"#d7ccc8",borderRadius:"16px",justifyContent:"center",textAlign:"center",display:"flex"},children:[L.jsx(fee,{children:L.jsxs(Qn,{sx:{p:0,m:0,height:200,width:355},children:[L.jsx(En,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0}),L.jsx(Qn,{sx:{justifyContent:"center",textAlign:"center",display:"flex"},children:L.jsx(En,{variant:"h5",component:"div",sx:{mt:3,mb:3,maxWidth:200,minHeight:75},children:t})}),L.jsxs(En,{sx:{mb:3},variant:"body2",children:[e,L.jsx("br",{})]}),L.jsx(kc,{component:cb,to:n,target:"_blank",sx:{m:1,bgcolor:"#30a7d7","&.MuiButton-root:hover":{bgcolor:"#F15A59"}},variant:"contained",size:"small",children:" Notebook"})]})}),L.jsx(dee,{})]})}function kkt(){const t=[{name:"Forecasting Oil Production⛽📊",description:" ",codeUrl:"https://github.com/edwin-torres/Shale/blob/main/shale.ipynb"},{name:"Airline Passanger Ratings✈️⭐",description:" ",codeUrl:"https://github.com/edwin-torres/airline-reviews/blob/main/AirlineReviews.ipynb"},{name:"Congress Generations📜🏛️",description:" ",codeUrl:"https://github.com/edwin-torres/congress/blob/main/Congress.ipynb"}];return L.jsx(Qn,{sx:{p:0,m:0,flexGrow:1,bgcolor:"black",textAlign:"center",justifyContent:"center",display:"flex"},children:L.jsx(XE,{container:!0,sx:{bgcolor:"black"},spacing:{xs:1,md:2},columns:{xs:1,sm:2,md:3},children:t.map((e,n)=>L.jsx(XE,{sx:{bgcolor:"black"},xs:1,sm:1,md:1,children:L.jsx(Mkt,{name:e.name,description:e.description,code_url:e.codeUrl})},n))})})}function Akt(){let t=N.useRef();const e=N.useRef();N.useEffect(()=>(n(),console.log("Breakout MOUNTED"),()=>{cancelAnimationFrame(e.current),console.log("Breakout UNMONUNTED")}));const n=()=>{let r=t.current.getContext("2d"),i={},s=0,o=3,a="white",l=t.current.width/2,c=t.current.height-30,u=-2,d=-2,f=10;function h(){r.beginPath(),r.arc(l,c,f,0,Math.PI*2),r.fillStyle=a,r.fill(),r.closePath()}let p=10,v=85,m=t.current.width/2-v/2;function g(){r.beginPath(),r.rect(m,t.current.height-p,v,v),r.fillStyle=a,r.fill(),r.closePath()}let y=3,x=5,S=75,_=10,C=10,T=55,A=165,k=[],M=0,R=0;for(let j=0;j<x;j++){k[j]=[];for(let J=0;J<y;J++)k[j][J]={x:0,y:0,status:1}}function P(){for(let j=0;j<x;j++)for(let J=0;J<y;J++)k[j][J].status===1&&(M=j*(S+C)+A,R=J*(_+C)+T,k[j][J].x=M,k[j][J].y=R,r.beginPath(),r.rect(M,R,S,_),r.fillStyle="white",r.fill())}function O(){for(let j=0;j<x;j++)for(let J=0;J<y;J++)i=k[j][J],i.status===1&&(l>i.x&&l<i.x+S&&c>i.y&&c<i.y+_&&(d=-d,i.status=0,s++),s===x*y&&(alert(`USER WINS!
Score: `+s),document.location.reload()))}function $(){r.font="15px Arial",r.fillStyle="white",r.fillText("Score: "+s,8,20)}function U(){r.font="15px Arial",r.fillStyle="white",r.fillText("Lives: "+o,t.current.width-65,20)}let z=!1,X=!1;document.addEventListener("keydown",F,!1),document.addEventListener("keyup",W,!1),t.current.addEventListener("mousemove",D,!1);function D(j){let J=j.clientX-t.current.offsetLeft;J>v/4&&J<t.current.width-v/4&&(m=J-v/2)}function F(j){j.key==="Right"||j.key==="ArrowRight"?z=!0:(j.key==="Left"||j.key==="ArrowLeft")&&(X=!0)}function W(j){j.key==="Right"||j.key==="ArrowRight"?z=!1:(j.key==="Left"||j.key==="ArrowLeft")&&(X=!1)}function V(){r.clearRect(0,0,t.current.width,t.current.height),h(),g(),$(),U(),P(),O(),(l+u-f<0||l+u+f>t.current.width)&&(u=-u),c+d-f<0?d=-d:c+d+f>t.current.height&&(l>m&&l<m+v?d=-1.03*d:(o--,o===0?(alert("Game Over!"),document.location.reload()):(l=t.current.width/2,c=t.current.height-30,u=-2,d=-2,m=t.current.width/2-v/2))),l=l+u,c=c+d,z===!0&&(m=m+7,m+v>t.current.width&&(m=t.current.width-v)),X===!0&&(m=m-7,m<0&&(m=0)),e.current=requestAnimationFrame(V)}V()};return L.jsxs(Qn,{sx:{textAlign:"center",justifyItems:"center"},children:[L.jsx(En,{variant:"h3",sx:{textAlign:"center"},children:"Breakout"}),L.jsxs(En,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:["Following this ",L.jsx(Lu,{href:"https://developer.mozilla.org/en-US/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript",target:"_blank",underline:"hover",children:"canvas tutorial"}),"."]}),L.jsx(Qn,{sx:{display:"relative"},children:L.jsx("canvas",{style:{size:"100%",border:"10px solid #424242"},ref:t,width:"750",height:"500"})})]})}function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nd.apply(this,arguments)}var Ikt=function(t){var e=t.layer,n=t.fillOpacity,r=t.borderWidth,i=t.getBorderColor,s=t.isInteractive,o=t.tooltip,a=ry(),l=a.showTooltipFromEvent,c=a.hideTooltip,u=N.useCallback(function(m){l(N.createElement(o,{layer:e}),m,"left")},[l,e]),d=Ys(),f=d.animate,h=d.config,p=Vre(e.path),v=Uc({color:e.color,config:h,immediate:!f});return L.jsx(nr.path,{d:p,fill:e.fill?e.fill:v.color,fillOpacity:n,stroke:i(e),strokeWidth:r,onMouseMove:s?u:void 0,onMouseEnter:s?u:void 0,onMouseLeave:s?c:void 0})},Rkt=function(t){var e=t.layers,n=t.fillOpacity,r=t.borderWidth,i=t.getBorderColor,s=t.isInteractive,o=t.tooltip;return L.jsx("g",{children:e.map(function(a,l){return L.jsx(Ikt,{layer:a,getBorderColor:i,borderWidth:r,fillOpacity:n,isInteractive:s,tooltip:o},l)})})},Nkt=function(t,e){var n=t.y2;return e==="center"?n=t.y1+(t.y2-t.y1)/2:e==="start"&&(n=t.y1),n},Pkt=function(t){var e=t.data,n=t.dotComponent,r=t.position,i=t.getSize,s=t.getColor,o=t.getBorderWidth,a=t.getBorderColor;return L.jsx(L.Fragment,{children:e.map(function(l,c){return N.createElement(n,{key:c,datum:l,x:l.x,y:Nkt(l,r),size:i(l),color:s(l),borderWidth:o(l),borderColor:a(l)})})})},$kt=function(t){var e=t.slice,n=t.height,r=t.tooltip,i=N.useState(!1),s=i[0],o=i[1],a=ry(),l=a.showTooltipFromEvent,c=a.hideTooltip,u=N.useCallback(function(f){o(!0),l(N.createElement(r,{slice:e}),f,"left")},[o,l,r,e]),d=N.useCallback(function(){o(!1),c()},[o,c]);return L.jsxs("g",{transform:"translate("+e.x+", 0)",children:[s&&L.jsx("line",{x1:0,x2:0,y1:0,y2:n,stroke:"#000",strokeOpacity:.35,strokeWidth:1}),L.jsx("rect",{x:-20,width:40,height:n,fill:"#000",fillOpacity:0,onMouseEnter:u,onMouseMove:u,onMouseLeave:d})]})},Dkt=function(t){var e=t.slices,n=t.height,r=t.tooltip;return L.jsx("g",{children:e.map(function(i){return L.jsx($kt,{slice:i,height:n,tooltip:r},i.index)})})},cc={label:"id",order:"none",offsetType:"wiggle",curve:"catmullRom",axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,colors:{scheme:"nivo"},fillOpacity:1,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableDots:!1,dotPosition:"center",dotComponent:function(t){var e=t.x,n=t.y,r=t.size,i=t.color,s=t.borderWidth,o=t.borderColor,a=Ys(),l=a.animate,c=a.config,u=Uc({x:e,y:n,radius:.5*r,color:i,config:c,immediate:!l});return L.jsx(nr.circle,{cx:u.x,cy:u.y,r:u.radius,fill:u.color,strokeWidth:s,stroke:o})},dotSize:6,dotColor:{from:"color"},dotBorderWidth:0,dotBorderColor:{from:"color"},isInteractive:!0,tooltip:function(t){var e=t.layer;return L.jsx(bA,{id:e.label,enableChip:!0,color:e.color})},enableStackTooltip:!0,stackTooltip:function(t){var e=t.slice,n=N.useMemo(function(){return e.stack.map(function(r){return[L.jsx(mte,{color:r.color},r.layerId),r.layerLabel,r.formattedValue]})},[e]);return L.jsx(gte,{rows:n})},legends:[],legendLabel:"id",role:"application"},Xi=Nd({},cc,{layers:["grid","axes","layers","dots","slices","legends"],defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),Lkt=["isInteractive","animate","motionConfig","theme","renderWrapper"],Okt=function(t){var e=t.data,n=t.keys,r=t.label,i=t.valueFormat,s=t.offsetType,o=t.order,a=t.curve,l=t.layers,c=l===void 0?Xi.layers:l,u=t.width,d=t.height,f=t.margin,h=t.axisTop,p=t.axisRight,v=t.axisBottom,m=v===void 0?Xi.axisBottom:v,g=t.axisLeft,y=g===void 0?Xi.axisLeft:g,x=t.enableGridX,S=x===void 0?Xi.enableGridX:x,_=t.enableGridY,C=_===void 0?Xi.enableGridY:_,T=t.colors,A=t.fillOpacity,k=A===void 0?Xi.fillOpacity:A,M=t.borderWidth,R=M===void 0?Xi.borderWidth:M,P=t.borderColor,O=t.defs,$=O===void 0?Xi.defs:O,U=t.fill,z=U===void 0?Xi.fill:U,X=t.enableDots,D=X===void 0?Xi.enableDots:X,F=t.dotPosition,W=F===void 0?Xi.dotPosition:F,V=t.dotComponent,j=V===void 0?Xi.dotComponent:V,J=t.dotSize,Q=t.dotColor,te=t.dotBorderWidth,re=t.dotBorderColor,se=t.isInteractive,fe=se===void 0?Xi.isInteractive:se,ae=t.tooltip,ye=ae===void 0?Xi.tooltip:ae,le=t.enableStackTooltip,H=le===void 0?Xi.enableStackTooltip:le,Me=t.stackTooltip,we=Me===void 0?Xi.stackTooltip:Me,Ee=t.legends,me=Ee===void 0?Xi.legends:Ee,qe=t.role,ke=t.ariaLabel,ee=t.ariaLabelledBy,Y=t.ariaDescribedBy,oe=s2(u,d,f),xe=oe.margin,Se=oe.innerWidth,be=oe.innerHeight,Re=oe.outerWidth,Ke=oe.outerHeight,ze=function(Ie){var Ce=Ie.width,ut=Ie.height,dt=Ie.data,yt=Ie.keys,vt=Ie.label,zt=vt===void 0?cc.label:vt,It=Ie.valueFormat,Qt=Ie.offsetType,$t=Qt===void 0?cc.offsetType:Qt,mt=Ie.order,Ht=mt===void 0?cc.order:mt,pn=Ie.curve,dn=pn===void 0?cc.curve:pn,_t=Ie.colors,Dt=_t===void 0?cc.colors:_t,Nt=Ie.borderColor,bt=Nt===void 0?cc.borderColor:Nt,Wt=Ie.dotSize,Sn=Wt===void 0?cc.dotSize:Wt,Z=Ie.dotColor,K=Z===void 0?cc.dotColor:Z,ne=Ie.dotBorderWidth,G=ne===void 0?cc.dotBorderWidth:ne,ie=Ie.dotBorderColor,ce=ie===void 0?cc.dotBorderColor:ie,Te=t6e(dn),de=N.useMemo(function(){return AFe().x(function(Fn){return Fn.x}).y0(function(Fn){return Fn.y1}).y1(function(Fn){return Fn.y2}).curve(Te)},[Te]),Ue=N.useMemo(function(){return Tre().keys(yt).offset(QBe($t)).order(ZBe(Ht))},[yt,$t,Ht]),Je=N.useMemo(function(){var Fn=[],Hn=[],_n=Ue(dt).map(function(nn){return nn.map(function(an){return Fn.push(an[0]),Hn.push(an[1]),Nd({},an,{value:an.data[nn.key]})})}),fn=Math.min.apply(Math,Fn),Yn=Math.max.apply(Math,Hn);return[_n,cie({type:"point"},{all:Array.from({length:dt.length},function(nn,an){return an}),min:0,max:dt.length},Ce),lie({type:"linear",min:fn},{all:[fn,Yn],min:fn,max:Yn},ut,"y")]},[Ue,dt,Ce,ut]),nt=Je[0],$e=Je[1],Ct=Je[2],ht=Rr(),ft=HU(Dt,"id"),Lt=Ac(bt,ht),Jt=N.useMemo(function(){return typeof Sn=="function"?Sn:function(){return Sn}},[Sn]),tn=Ac(K,ht),gn=N.useMemo(function(){return typeof G=="function"?G:function(){return G}},[G]),Pt=Ac(ce,ht),Et=$d(zt),Cn=o2(It),en=N.useMemo(function(){return nt.map(function(Fn,Hn){var _n=Fn.map(function(nn,an){return{layerId:yt[Hn],layerLabel:"",index:an,color:"",x:$e(an),value:nn.value,formattedValue:Cn(nn.value),y1:Ct(nn[0]),y2:Ct(nn[1])}}),fn={id:yt[Hn],path:de(_n)},Yn=Nd({},fn,{label:Et(fn),color:ft(fn)});return Nd({},Yn,{data:_n.map(function(nn){return nn.layerLabel=Yn.label,nn.color=Yn.color,nn})})})},[nt,yt,Et,de,ft,$e,Ct,Cn]),cn=N.useMemo(function(){return Array.from({length:dt.length},function(Fn,Hn){var _n=en.map(function(fn){return fn.data[Hn]}).sort(function(fn,Yn){return fn.y2-Yn.y2});return{index:Hn,x:en[0].data[Hn].x,stack:_n}})},[dt.length,en]),ar=N.useMemo(function(){return{xScale:$e,yScale:Ct,layers:en,slices:cn}},[$e,Ct,en,cn]);return{xScale:$e,yScale:Ct,layers:en,slices:cn,getBorderColor:Lt,getDotSize:Jt,getDotColor:tn,getDotBorderWidth:gn,getDotBorderColor:Pt,layerContext:ar}}({width:Se,height:be,data:e,keys:n,label:r,valueFormat:i,offsetType:s,order:o,curve:a,colors:T,borderColor:P,dotSize:J,dotColor:Q,dotBorderWidth:te,dotBorderColor:re}),Pe=ze.xScale,De=ze.yScale,We=ze.layers,gt=ze.slices,ct=ze.getBorderColor,Ye=ze.getDotSize,Xe=ze.getDotColor,Le=ze.getDotBorderWidth,he=ze.getDotBorderColor,He=ze.layerContext,ot=AU($,We,z),et={grid:null,axes:null,layers:null,dots:null,slices:null,legends:null};return c.includes("grid")&&(et.grid=L.jsx(PU,{width:Se,height:be,xScale:S?Pe:null,yScale:C?De:null},"grid")),c.includes("axes")&&(et.axes=L.jsx(NU,{xScale:Pe,yScale:De,width:Se,height:be,top:h,right:p,bottom:m,left:y},"axes")),c.includes("layers")&&(et.layers=L.jsx(Rkt,{layers:We,fillOpacity:k,borderWidth:R,getBorderColor:ct,isInteractive:fe,tooltip:ye},"layers")),c.includes("dots")&&D&&(et.dots=L.jsx(N.Fragment,{children:We.map(function(Ie){return L.jsx(Pkt,{id:Ie.id,color:Ie.color,data:Ie.data,dotComponent:j,position:W,getSize:Ye,getColor:Xe,getBorderWidth:Le,getBorderColor:he},Ie.id)})},"dots")),c.includes("slices")&&fe&&H&&(et.slices=L.jsx(Dkt,{slices:gt,height:be,tooltip:we},"slices")),c.includes("legends")&&(et.legends=L.jsx(N.Fragment,{children:me.map(function(Ie,Ce){var ut=We.map(function(dt){return{id:dt.id,label:dt.label,color:dt.color,fill:dt.fill}}).reverse();return L.jsx(qU,Nd({},Ie,{containerWidth:Se,containerHeight:be,data:ut}),Ce)})},"legends")),L.jsx(a2,{width:Re,height:Ke,margin:xe,defs:ot,role:qe,ariaLabel:ke,ariaLabelledBy:ee,ariaDescribedBy:Y,children:c.map(function(Ie,Ce){var ut;return typeof Ie=="function"?L.jsx(N.Fragment,{children:N.createElement(Ie,He)},Ce):(ut=et==null?void 0:et[Ie])!=null?ut:null})})},Fkt=function(t){var e=t.isInteractive,n=e===void 0?Xi.isInteractive:e,r=t.animate,i=r===void 0?Xi.animate:r,s=t.motionConfig,o=s===void 0?Xi.motionConfig:s,a=t.theme,l=t.renderWrapper,c=function(u,d){if(u==null)return{};var f,h,p={},v=Object.keys(u);for(h=0;h<v.length;h++)f=v[h],d.indexOf(f)>=0||(p[f]=u[f]);return p}(t,Lkt);return L.jsx(my,{animate:i,isInteractive:n,motionConfig:o,renderWrapper:l,theme:a,children:L.jsx(Okt,Nd({isInteractive:n},c))})},Ukt=function(t){return L.jsx(gy,{children:function(e){var n=e.width,r=e.height;return L.jsx(Fkt,Nd({width:n,height:r},t))}})};const Bkt=[{Progressive:.53,Missionary:37.54,Lost:52.49,Greatest:9.43,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:.36,Missionary:30.36,Lost:56.18,Greatest:13.09,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:.36,Missionary:30.62,Lost:56.16,Greatest:12.86,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:.18,Missionary:27.95,Lost:55.54,Greatest:16.33,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:.18,Missionary:27.75,Lost:55.5,Greatest:16.58,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:.18,Missionary:22.53,Lost:56.23,Greatest:21.06,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:21.74,Lost:56.7,Greatest:21.56,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:15.88,Lost:53.83,Greatest:30.29,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:15.48,Lost:53.92,Greatest:30.6,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:11.4,Lost:52.39,Greatest:36.21,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:11.36,Lost:52.38,Greatest:36.26,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:9.16,Lost:50.92,Greatest:39.93,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:9.09,Lost:51.09,Greatest:39.82,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:6.86,Lost:46.94,Greatest:46.2,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:6.38,Lost:47.72,Greatest:45.9,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:5.02,Lost:43.68,Greatest:51.3,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:4.81,Lost:43.81,Greatest:51.39,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:4.61,Lost:39.48,Greatest:55.9,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:4.41,Lost:39.52,Greatest:56.07,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:2.55,Lost:30.6,Greatest:66.67,Silent:.18,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:2.55,Lost:30.73,Greatest:66.55,Silent:.18,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:1.64,Lost:27.45,Greatest:70.18,Silent:.73,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:1.62,Lost:27.21,Greatest:70.27,Silent:.9,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:.73,Lost:21.1,Greatest:75.6,Silent:2.57,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:.73,Lost:20.99,Greatest:75.18,Silent:3.1,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:.37,Lost:14.13,Greatest:80,Silent:5.5,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:.37,Lost:13.92,Greatest:80.22,Silent:5.49,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:.37,Lost:11.11,Greatest:80.37,Silent:8.15,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:.37,Lost:11.09,Greatest:80.22,Silent:8.32,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:8.03,Greatest:80.29,Silent:11.68,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:8,Greatest:80.18,Silent:11.82,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:6.06,Greatest:77.43,Silent:16.51,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:5.88,Greatest:77.21,Silent:16.91,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:3.85,Greatest:72.53,Silent:23.63,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:3.49,Greatest:72.66,Silent:23.85,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:2.56,Greatest:62.34,Silent:34.37,"Baby Boomer":.73,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:2.56,Greatest:61.97,Silent:34.73,"Baby Boomer":.73,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:1.1,Greatest:54.31,Silent:42.75,"Baby Boomer":1.83,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:1.1,Greatest:53.68,Silent:43.38,"Baby Boomer":1.84,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.37,Greatest:45.49,Silent:50.83,"Baby Boomer":3.31,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.37,Greatest:45.4,Silent:50.92,"Baby Boomer":3.31,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:36.31,Silent:56.2,"Baby Boomer":7.3,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:36.31,Silent:56.2,"Baby Boomer":7.3,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:31.99,Silent:56.99,"Baby Boomer":10.85,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:31.8,Silent:57.17,"Baby Boomer":10.85,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:28.12,Silent:59.38,"Baby Boomer":12.32,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:28.31,Silent:59.19,"Baby Boomer":12.32,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:23.84,Silent:61,"Baby Boomer":14.97,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:23.25,Silent:61.25,"Baby Boomer":15.31,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:20.15,Silent:62.66,"Baby Boomer":17.19,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:20.37,Silent:62.04,"Baby Boomer":17.59,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:18.3,Silent:61.18,"Baby Boomer":20.52,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:17.74,Silent:61.55,"Baby Boomer":20.7,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:12.36,Silent:57.56,"Baby Boomer":30.07,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:12.18,Silent:57.56,"Baby Boomer":30.26,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:8.92,Silent:52.97,"Baby Boomer":37.55,"Generation X":.56,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:8.72,Silent:52.88,"Baby Boomer":37.85,"Generation X":.56,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:6.51,Silent:49.44,"Baby Boomer":42.94,"Generation X":1.12,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:6.48,Silent:49.26,"Baby Boomer":43.15,"Generation X":1.11,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:5,Silent:47.04,"Baby Boomer":46.67,"Generation X":1.3,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:5,Silent:47.04,"Baby Boomer":46.67,"Generation X":1.3,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:3.7,Silent:44.44,"Baby Boomer":49.81,"Generation X":2.04,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:3.54,Silent:43.76,"Baby Boomer":50.47,"Generation X":2.23,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:2.6,Silent:40.82,"Baby Boomer":53.25,"Generation X":3.34,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:2.6,Silent:40.15,"Baby Boomer":53.72,"Generation X":3.53,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:2.04,Silent:37.48,"Baby Boomer":55.84,"Generation X":4.64,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:2.04,Silent:37.55,"Baby Boomer":55.76,"Generation X":4.65,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:1.86,Silent:32.22,"Baby Boomer":59.78,"Generation X":6.15,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:1.86,Silent:31.97,"Baby Boomer":59.85,"Generation X":6.32,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:1.29,Silent:29.94,"Baby Boomer":59.52,"Generation X":9.06,Millennial:.18,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:1.11,Silent:28.89,"Baby Boomer":59.81,"Generation X":10,Millennial:.19,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:1.11,Silent:23.15,"Baby Boomer":61.11,"Generation X":14.44,Millennial:.19,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:.93,Silent:23.05,"Baby Boomer":61.52,"Generation X":14.31,Millennial:.19,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:.37,Silent:18,"Baby Boomer":62.89,"Generation X":18.18,Millennial:.56,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:.37,Silent:17.56,"Baby Boomer":63.4,"Generation X":18.11,Millennial:.55,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:14.26,"Baby Boomer":62.78,"Generation X":22.41,Millennial:.56,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:14.1,"Baby Boomer":62.71,"Generation X":22.63,Millennial:.56,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:11.52,"Baby Boomer":62.45,"Generation X":25.09,Millennial:.93,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:10.99,"Baby Boomer":62.94,"Generation X":24.95,Millennial:1.12,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:9.7,"Baby Boomer":55.78,"Generation X":29.66,Millennial:4.85,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:9.33,"Baby Boomer":56.16,"Generation X":29.66,Millennial:4.85,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:7.04,"Baby Boomer":55.19,"Generation X":31.48,Millennial:6.3,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:6.9,"Baby Boomer":54.29,"Generation X":31.72,Millennial:7.09,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:5.38,"Baby Boomer":48.24,"Generation X":35.81,Millennial:10.39,"Generation Z":.19},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:5.39,"Baby Boomer":48.14,"Generation X":35.87,Millennial:10.41,"Generation Z":.19}],zkt=()=>L.jsxs(L.Fragment,{children:[L.jsxs(Qn,{sx:{textAlign:"center",m:2,display:{xs:"none",sm:"block"}},children:[L.jsxs(En,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left"},children:["Source:  ",L.jsx(Lu,{href:"https://github.com/unitedstates/congress-legislators",target:"_blank",underline:"hover",children:"unitedstates github"})]}),L.jsxs(En,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left"},children:["Data Preparation:  ",L.jsx(Lu,{href:"https://github.com/edwin-torres/congress/blob/main/Congress.ipynb",target:"_blank",underline:"hover",children:"code"})]})]}),L.jsx(Qn,{sx:{height:75,color:"#ffffff",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"none",sm:"block"}},children:L.jsxs(En,{sx:{pt:2},variant:"h4",gutterBottom:!0,children:["Composition of U.S. Congress ",L.jsx("br",{})," by Generation (1940-2024)"]})}),L.jsx(Qn,{sx:{height:75,color:"#ffffff",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"block",sm:"none"}},children:L.jsxs(En,{sx:{pt:2},variant:"h4",gutterBottom:!0,children:["Please Rotate Phone ",L.jsx(XA,{})," or Enlarge Screen ",L.jsx(qA,{})]})}),L.jsx(Qn,{sx:{height:{xs:400,lg:800},width:"80%",color:"black",bgcolor:"white",display:{xs:"none",sm:"block"},aspectRatio:.99,m:"auto",mt:5},children:L.jsx(Wkt,{data:Bkt})})]}),Wkt=({data:t})=>L.jsx(Ukt,{data:t,theme:{background:"black",text:{fontSize:14,fill:"#85d5f5"},legends:{title:{text:{fontSize:20,fill:"#85d5f5"}}}},curve:"basis",keys:["Progressive","Missionary","Lost","Greatest","Silent","Baby Boomer","Generation X","Millennial","Generation Z"],margin:{top:20,right:125,bottom:50,left:60},axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"",legendOffset:36,format:function(e){const n=e+1940;return n%10===0?n.toString():""}},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"",legendOffset:-40,format:function(e){return(e+50).toString()+"%"}},enableGridX:!1,enableGridY:!1,offsetType:"silhouette",colors:{scheme:"category10"},fillOpacity:.85,borderColor:{theme:"background"},defs:[{id:"dots",type:"patternDots",background:"inherit",color:"#2c998f",size:4,padding:2,stagger:!0},{id:"squares",type:"patternSquares",background:"inherit",color:"#e4c912",size:6,padding:2,stagger:!0}],fill:[{match:{id:"Paul"},id:"dots"},{match:{id:"Marcel"},id:"squares"}],dotSize:8,dotColor:{from:"color"},dotBorderWidth:2,dotBorderColor:{from:"color",modifiers:[["darker",.7]]},legends:[{anchor:"bottom-right",direction:"column",translateX:65,itemWidth:55,itemHeight:30,itemTextColor:"#ffffff",symbolSize:13,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#85d5f5"}}]}]});function $r(){return $r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$r.apply(this,arguments)}function By(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var LK,Vkt=function(t){var e=t.bars,n=t.annotations,r=YU({data:e,annotations:n,getPosition:function(i){return{x:i.x+i.width/2,y:i.y+i.height/2}},getDimensions:function(i){var s=i.height,o=i.width;return{width:o,height:s,size:Math.max(o,s)}}});return L.jsx(L.Fragment,{children:r.map(function(i,s){return L.jsx(cse,$r({},i),s)})})},Gkt=function(t){var e=t.width,n=t.height,r=t.legends,i=t.toggleSerie;return L.jsx(L.Fragment,{children:r.map(function(s,o){var a,l=s[0],c=s[1];return L.jsx(qU,$r({},l,{containerWidth:e,containerHeight:n,data:(a=l.data)!=null?a:c,toggleSerie:l.toggleSerie&&l.dataFrom==="keys"?i:void 0}),o)})})},Hkt=["data"],jkt=function(t){var e,n=t.bar,r=n.data,i=By(n,Hkt),s=t.style,o=s.borderColor,a=s.color,l=s.height,c=s.labelColor,u=s.labelOpacity,d=s.labelX,f=s.labelY,h=s.transform,p=s.width,v=t.borderRadius,m=t.borderWidth,g=t.label,y=t.shouldRenderLabel,x=t.isInteractive,S=t.onClick,_=t.onMouseEnter,C=t.onMouseLeave,T=t.tooltip,A=t.isFocusable,k=t.ariaLabel,M=t.ariaLabelledBy,R=t.ariaDescribedBy,P=Rr(),O=ry(),$=O.showTooltipFromEvent,U=O.showTooltipAt,z=O.hideTooltip,X=N.useMemo(function(){return function(){return N.createElement(T,$r({},i,r))}},[T,i,r]),D=N.useCallback(function(Q){S==null||S($r({color:i.color},r),Q)},[i,r,S]),F=N.useCallback(function(Q){return $(X(),Q)},[$,X]),W=N.useCallback(function(Q){_==null||_(r,Q),$(X(),Q)},[r,_,$,X]),V=N.useCallback(function(Q){C==null||C(r,Q),z()},[r,z,C]),j=N.useCallback(function(){U(X(),[i.absX+i.width/2,i.absY])},[U,X,i]),J=N.useCallback(function(){z()},[z]);return L.jsxs(nr.g,{transform:h,children:[L.jsx(nr.rect,{width:Gl(p,function(Q){return Math.max(Q,0)}),height:Gl(l,function(Q){return Math.max(Q,0)}),rx:v,ry:v,fill:(e=r.fill)!=null?e:a,strokeWidth:m,stroke:o,focusable:A,tabIndex:A?0:void 0,"aria-label":k?k(r):void 0,"aria-labelledby":M?M(r):void 0,"aria-describedby":R?R(r):void 0,onMouseEnter:x?W:void 0,onMouseMove:x?F:void 0,onMouseLeave:x?V:void 0,onClick:x?D:void 0,onFocus:x&&A?j:void 0,onBlur:x&&A?J:void 0}),y&&L.jsx(nr.text,{x:d,y:f,textAnchor:"middle",dominantBaseline:"central",fillOpacity:u,style:$r({},P.labels.text,{pointerEvents:"none",fill:c}),children:g})]})},Xkt=["color","label"],qkt=function(t){var e=t.color,n=t.label,r=By(t,Xkt);return L.jsx(bA,{id:n,value:r.formattedValue,enableChip:!0,color:e})},si={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{from:"theme",theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:qkt,tooltipLabel:function(t){return t.id+" - "+t.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[]},Si=$r({},si,{layers:["grid","axes","bars","markers","legends","annotations"],barComponent:jkt,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),ia=$r({},si,{layers:["grid","axes","bars","legends","annotations"],pixelRatio:typeof window<"u"&&(LK=window.devicePixelRatio)!=null?LK:1}),qpe=function(t,e,n,r,i,s){return RU(r,{all:t.map(e),min:0,max:0},i,s).padding(n)},Ype=function(t,e){return t.map(function(n){return $r({},e.reduce(function(r,i){return r[i]=null,r},{}),n)})},r3=function(t){return Object.keys(t).reduce(function(e,n){return t[n]&&(e[n]=t[n]),e},{})},i3=function(t){return[t,Number(t)]},Ykt=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],j8=function(t,e){return t>e},Kpe=function(t,e){return t<e},Zpe=function(t,e){return Array.from(" ".repeat(e-t),function(n,r){return t+r})},Kkt=function(t){return j8(t,0)?0:t},Zkt=function(t,e,n,r){var i=t.data,s=t.formatValue,o=t.getColor,a=t.getIndex,l=t.getTooltipLabel,c=t.innerPadding,u=c===void 0?0:c,d=t.keys,f=t.xScale,h=t.yScale,p=t.margin,v=n?Kpe:j8,m=i.map(r3),g=[];return d.forEach(function(y,x){return Zpe(0,f.domain().length).forEach(function(S){var _,C,T,A=i3(i[S][y]),k=A[0],M=A[1],R=a(i[S]),P=((_=f(R))!=null?_:0)+e*x+u*x,O=v(C=M,0)?(T=h(C))!=null?T:0:r,$=function(z,X){var D;return v(z,0)?r-X:((D=h(z))!=null?D:0)-r}(M,O),U={id:y,value:k===null?k:M,formattedValue:s(M),hidden:!1,index:S,indexValue:R,data:m[S]};g.push({key:y+"."+U.indexValue,index:g.length,data:U,x:P,y:O,absX:p.left+P,absY:p.top+O,width:e,height:$,color:o(U),label:l(U)})})}),g},Jkt=function(t,e,n,r){var i=t.data,s=t.formatValue,o=t.getIndex,a=t.getColor,l=t.getTooltipLabel,c=t.keys,u=t.innerPadding,d=u===void 0?0:u,f=t.xScale,h=t.yScale,p=t.margin,v=n?Kpe:j8,m=i.map(r3),g=[];return c.forEach(function(y,x){return Zpe(0,h.domain().length).forEach(function(S){var _,C,T,A=i3(i[S][y]),k=A[0],M=A[1],R=o(i[S]),P=v(C=M,0)?r:(T=f(C))!=null?T:0,O=((_=h(R))!=null?_:0)+e*x+d*x,$=function(z,X){var D;return v(z,0)?((D=f(z))!=null?D:0)-r:r-X}(M,P),U={id:y,value:k===null?k:M,formattedValue:s(M),hidden:!1,index:S,indexValue:R,data:m[S]};g.push({key:y+"."+U.indexValue,index:g.length,data:U,x:P,y:O,absX:p.left+P,absY:p.top+O,width:$,height:e,color:a(U),label:l(U)})})}),g},Qkt=function(t){var e,n,r=t.layout,i=t.minValue,s=t.maxValue,o=t.reverse,a=t.width,l=t.height,c=t.padding,u=c===void 0?0:c,d=t.innerPadding,f=d===void 0?0:d,h=t.valueScale,p=t.indexScale,v=t.hiddenIds,m=v===void 0?[]:v,g=By(t,Ykt),y=g.keys.filter(function(W){return!m.includes(W)}),x=Ype(g.data,y),S=r==="vertical"?["y","x",a]:["x","y",l],_=S[0],C=S[1],T=S[2],A=qpe(x,g.getIndex,u,p,T,C),k=$r({max:s,min:i,reverse:o},h),M=k.min==="auto"?Kkt:function(W){return W},R=x.reduce(function(W,V){return[].concat(W,y.map(function(j){return V[j]}))},[]).filter(Boolean),P=M(Math.min.apply(Math,R)),O=(n=Math.max.apply(Math,R),isFinite(n)?n:0),$=RU(k,{all:R,min:P,max:O},_==="x"?a:l,_),U=r==="vertical"?[A,$]:[$,A],z=U[0],X=U[1],D=(A.bandwidth()-f*(y.length-1))/y.length,F=[$r({},g,{data:x,keys:y,innerPadding:f,xScale:z,yScale:X}),D,k.reverse,(e=$(0))!=null?e:0];return{xScale:z,yScale:X,bars:D>0?r==="vertical"?Zkt.apply(void 0,F):Jkt.apply(void 0,F):[]}},eAt=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],tAt=function t(e){var n;return e.some(Array.isArray)?t((n=[]).concat.apply(n,e)):e},nAt=function(t,e,n){var r=t.formatValue,i=t.getColor,s=t.getIndex,o=t.getTooltipLabel,a=t.innerPadding,l=t.stackedData,c=t.xScale,u=t.yScale,d=t.margin,f=[];return l.forEach(function(h){return c.domain().forEach(function(p,v){var m,g,y=h[v],x=(m=c(s(y.data)))!=null?m:0,S=((g=function(M){return u(M[n?0:1])}(y))!=null?g:0)+.5*a,_=function(M,R){var P;return((P=u(M[n?1:0]))!=null?P:0)-R}(y,S)-a,C=i3(y.data[h.key]),T=C[0],A=C[1],k={id:h.key,value:T===null?T:A,formattedValue:r(A),hidden:!1,index:v,indexValue:p,data:r3(y.data)};f.push({key:h.key+"."+p,index:f.length,data:k,x,y:S,absX:d.left+x,absY:d.top+S,width:e,height:_,color:i(k),label:o(k)})})}),f},rAt=function(t,e,n){var r=t.formatValue,i=t.getColor,s=t.getIndex,o=t.getTooltipLabel,a=t.innerPadding,l=t.stackedData,c=t.xScale,u=t.yScale,d=t.margin,f=[];return l.forEach(function(h){return u.domain().forEach(function(p,v){var m,g,y=h[v],x=(m=u(s(y.data)))!=null?m:0,S=((g=function(M){return c(M[n?1:0])}(y))!=null?g:0)+.5*a,_=function(M,R){var P;return((P=c(M[n?0:1]))!=null?P:0)-R}(y,S)-a,C=i3(y.data[h.key]),T=C[0],A=C[1],k={id:h.key,value:T===null?T:A,formattedValue:r(A),hidden:!1,index:v,indexValue:p,data:r3(y.data)};f.push({key:h.key+"."+p,index:f.length,data:k,x:S,y:x,absX:d.left+S,absY:d.top+x,width:_,height:e,color:i(k),label:o(k)})})}),f},iAt=function(t){var e,n=t.data,r=t.layout,i=t.minValue,s=t.maxValue,o=t.reverse,a=t.width,l=t.height,c=t.padding,u=c===void 0?0:c,d=t.valueScale,f=t.indexScale,h=t.hiddenIds,p=h===void 0?[]:h,v=By(t,eAt),m=v.keys.filter(function(D){return!p.includes(D)}),g=Tre().keys(m).offset(Ere)(Ype(n,m)),y=r==="vertical"?["y","x",a]:["x","y",l],x=y[0],S=y[1],_=y[2],C=qpe(n,v.getIndex,u,f,_,S),T=$r({max:s,min:i,reverse:o},d),A=(e=tAt(g),d.type==="log"?e.filter(function(D){return D!==0}):e),k=Math.min.apply(Math,A),M=Math.max.apply(Math,A),R=RU(T,{all:A,min:k,max:M},x==="x"?a:l,x),P=r==="vertical"?[C,R]:[R,C],O=P[0],$=P[1],U=v.innerPadding>0?v.innerPadding:0,z=C.bandwidth(),X=[$r({},v,{innerPadding:U,stackedData:g,xScale:O,yScale:$}),z,T.reverse];return{xScale:O,yScale:$,bars:z>0?r==="vertical"?nAt.apply(void 0,X):rAt.apply(void 0,X):[]}},sAt=function(t){var e=t.bars,n=t.direction,r=t.from,i=t.groupMode,s=t.layout,o=t.legendLabel,a=t.reverse,l=iie(o??(r==="indexes"?"indexValue":"id"));return r==="indexes"?function(c,u,d){var f=ZH(c.map(function(h){var p,v;return{id:(p=h.data.indexValue)!=null?p:"",label:d(h.data),hidden:h.data.hidden,color:(v=h.color)!=null?v:"#000"}}),function(h){return h.id});return u==="horizontal"&&f.reverse(),f}(e,s,l):function(c,u,d,f,h,p){var v=ZH(c.map(function(m){var g;return{id:m.data.id,label:p(m.data),hidden:m.data.hidden,color:(g=m.color)!=null?g:"#000"}}),function(m){return m.id});return(u==="vertical"&&f==="stacked"&&d==="column"&&h!==!0||u==="horizontal"&&f==="stacked"&&h===!0)&&v.reverse(),v}(e,s,n,i,a,l)},Jpe=function(t){var e=t.indexBy,n=e===void 0?si.indexBy:e,r=t.keys,i=r===void 0?si.keys:r,s=t.label,o=s===void 0?si.label:s,a=t.tooltipLabel,l=a===void 0?si.tooltipLabel:a,c=t.valueFormat,u=t.colors,d=u===void 0?si.colors:u,f=t.colorBy,h=f===void 0?si.colorBy:f,p=t.borderColor,v=p===void 0?si.borderColor:p,m=t.labelTextColor,g=m===void 0?si.labelTextColor:m,y=t.groupMode,x=y===void 0?si.groupMode:y,S=t.layout,_=S===void 0?si.layout:S,C=t.reverse,T=C===void 0?si.reverse:C,A=t.data,k=t.minValue,M=k===void 0?si.minValue:k,R=t.maxValue,P=R===void 0?si.maxValue:R,O=t.margin,$=t.width,U=t.height,z=t.padding,X=z===void 0?si.padding:z,D=t.innerPadding,F=D===void 0?si.innerPadding:D,W=t.valueScale,V=W===void 0?si.valueScale:W,j=t.indexScale,J=j===void 0?si.indexScale:j,Q=t.initialHiddenIds,te=Q===void 0?si.initialHiddenIds:Q,re=t.enableLabel,se=re===void 0?si.enableLabel:re,fe=t.labelSkipWidth,ae=fe===void 0?si.labelSkipWidth:fe,ye=t.labelSkipHeight,le=ye===void 0?si.labelSkipHeight:ye,H=t.legends,Me=H===void 0?si.legends:H,we=t.legendLabel,Ee=N.useState(te??[]),me=Ee[0],qe=Ee[1],ke=N.useCallback(function(Le){qe(function(he){return he.indexOf(Le)>-1?he.filter(function(He){return He!==Le}):[].concat(he,[Le])})},[]),ee=$d(n),Y=$d(o),oe=$d(l),xe=o2(c),Se=Rr(),be=HU(d,h),Re=Ac(v,Se),Ke=Ac(g,Se),ze=(x==="grouped"?Qkt:iAt)({layout:_,reverse:T,data:A,getIndex:ee,keys:i,minValue:M,maxValue:P,width:$,height:U,getColor:be,padding:X,innerPadding:F,valueScale:V,indexScale:J,hiddenIds:me,formatValue:xe,getTooltipLabel:oe,margin:O}),Pe=ze.bars,De=ze.xScale,We=ze.yScale,gt=N.useMemo(function(){return Pe.filter(function(Le){return Le.data.value!==null}).map(function(Le,he){return $r({},Le,{index:he})})},[Pe]),ct=N.useCallback(function(Le){var he=Le.width,He=Le.height;return!!se&&!(ae>0&&he<ae)&&!(le>0&&He<le)},[se,ae,le]),Ye=N.useMemo(function(){return i.map(function(Le){var he=Pe.find(function(He){return He.data.id===Le});return $r({},he,{data:$r({id:Le},he==null?void 0:he.data,{hidden:me.includes(Le)})})})},[me,i,Pe]),Xe=N.useMemo(function(){return Me.map(function(Le){return[Le,sAt({bars:Le.dataFrom==="keys"?Ye:Pe,direction:Le.direction,from:Le.dataFrom,groupMode:x,layout:_,legendLabel:we,reverse:T})]})},[Me,Ye,Pe,x,_,we,T]);return{bars:Pe,barsWithValue:gt,xScale:De,yScale:We,getIndex:ee,getLabel:Y,getTooltipLabel:oe,formatValue:xe,getColor:be,getBorderColor:Re,getLabelColor:Ke,shouldRenderBarLabel:ct,hiddenIds:me,toggleSerie:ke,legendsWithData:Xe}},oAt=["isInteractive","animate","motionConfig","theme","renderWrapper"],aAt=function(t){var e=t.data,n=t.indexBy,r=t.keys,i=t.margin,s=t.width,o=t.height,a=t.groupMode,l=t.layout,c=t.reverse,u=t.minValue,d=t.maxValue,f=t.valueScale,h=t.indexScale,p=t.padding,v=t.innerPadding,m=t.axisTop,g=t.axisRight,y=t.axisBottom,x=y===void 0?Si.axisBottom:y,S=t.axisLeft,_=S===void 0?Si.axisLeft:S,C=t.enableGridX,T=C===void 0?Si.enableGridX:C,A=t.enableGridY,k=A===void 0?Si.enableGridY:A,M=t.gridXValues,R=t.gridYValues,P=t.layers,O=P===void 0?Si.layers:P,$=t.barComponent,U=$===void 0?Si.barComponent:$,z=t.enableLabel,X=z===void 0?Si.enableLabel:z,D=t.label,F=t.labelSkipWidth,W=F===void 0?Si.labelSkipWidth:F,V=t.labelSkipHeight,j=V===void 0?Si.labelSkipHeight:V,J=t.labelTextColor,Q=t.markers,te=Q===void 0?Si.markers:Q,re=t.colorBy,se=t.colors,fe=t.defs,ae=fe===void 0?Si.defs:fe,ye=t.fill,le=ye===void 0?Si.fill:ye,H=t.borderRadius,Me=H===void 0?Si.borderRadius:H,we=t.borderWidth,Ee=we===void 0?Si.borderWidth:we,me=t.borderColor,qe=t.annotations,ke=qe===void 0?Si.annotations:qe,ee=t.legendLabel,Y=t.tooltipLabel,oe=t.valueFormat,xe=t.isInteractive,Se=xe===void 0?Si.isInteractive:xe,be=t.tooltip,Re=be===void 0?Si.tooltip:be,Ke=t.onClick,ze=t.onMouseEnter,Pe=t.onMouseLeave,De=t.legends,We=t.role,gt=We===void 0?Si.role:We,ct=t.ariaLabel,Ye=t.ariaLabelledBy,Xe=t.ariaDescribedBy,Le=t.isFocusable,he=Le===void 0?Si.isFocusable:Le,He=t.barAriaLabel,ot=t.barAriaLabelledBy,et=t.barAriaDescribedBy,Ie=t.initialHiddenIds,Ce=Ys(),ut=Ce.animate,dt=Ce.config,yt=s2(s,o,i),vt=yt.outerWidth,zt=yt.outerHeight,It=yt.margin,Qt=yt.innerWidth,$t=yt.innerHeight,mt=Jpe({indexBy:n,label:D,tooltipLabel:Y,valueFormat:oe,colors:se,colorBy:re,borderColor:me,labelTextColor:J,groupMode:a,layout:l,reverse:c,data:e,keys:r,minValue:u,maxValue:d,margin:It,width:Qt,height:$t,padding:p,innerPadding:v,valueScale:f,indexScale:h,enableLabel:X,labelSkipWidth:W,labelSkipHeight:j,legends:De,legendLabel:ee,initialHiddenIds:Ie}),Ht=mt.bars,pn=mt.barsWithValue,dn=mt.xScale,_t=mt.yScale,Dt=mt.getLabel,Nt=mt.getTooltipLabel,bt=mt.getBorderColor,Wt=mt.getLabelColor,Sn=mt.shouldRenderBarLabel,Z=mt.toggleSerie,K=mt.legendsWithData,ne=jm(pn,{keys:function(de){return de.key},from:function(de){return $r({borderColor:bt(de),color:de.color,height:0,labelColor:Wt(de),labelOpacity:0,labelX:de.width/2,labelY:de.height/2,transform:"translate("+de.x+", "+(de.y+de.height)+")",width:de.width},l==="vertical"?{}:{height:de.height,transform:"translate("+de.x+", "+de.y+")",width:0})},enter:function(de){return{borderColor:bt(de),color:de.color,height:de.height,labelColor:Wt(de),labelOpacity:1,labelX:de.width/2,labelY:de.height/2,transform:"translate("+de.x+", "+de.y+")",width:de.width}},update:function(de){return{borderColor:bt(de),color:de.color,height:de.height,labelColor:Wt(de),labelOpacity:1,labelX:de.width/2,labelY:de.height/2,transform:"translate("+de.x+", "+de.y+")",width:de.width}},leave:function(de){return $r({borderColor:bt(de),color:de.color,height:0,labelColor:Wt(de),labelOpacity:0,labelX:de.width/2,labelY:0,transform:"translate("+de.x+", "+(de.y+de.height)+")",width:de.width},l==="vertical"?{}:{labelX:0,labelY:de.height/2,height:de.height,transform:"translate("+de.x+", "+de.y+")",width:0})},config:dt,immediate:!ut,initial:ut?void 0:null}),G=N.useMemo(function(){return{borderRadius:Me,borderWidth:Ee,enableLabel:X,isInteractive:Se,labelSkipWidth:W,labelSkipHeight:j,onClick:Ke,onMouseEnter:ze,onMouseLeave:Pe,getTooltipLabel:Nt,tooltip:Re,isFocusable:he,ariaLabel:He,ariaLabelledBy:ot,ariaDescribedBy:et}},[Me,Ee,X,Nt,Se,j,W,Ke,ze,Pe,Re,he,He,ot,et]),ie=AU(ae,Ht,le,{dataKey:"data",targetKey:"data.fill"}),ce={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null};O.includes("annotations")&&(ce.annotations=L.jsx(Vkt,{bars:Ht,annotations:ke},"annotations")),O.includes("axes")&&(ce.axes=L.jsx(NU,{xScale:dn,yScale:_t,width:Qt,height:$t,top:m,right:g,bottom:x,left:_},"axes")),O.includes("bars")&&(ce.bars=L.jsx(N.Fragment,{children:ne(function(de,Ue){return N.createElement(U,$r({},G,{bar:Ue,style:de,shouldRenderLabel:Sn(Ue),label:Dt(Ue.data)}))})},"bars")),O.includes("grid")&&(ce.grid=L.jsx(PU,{width:Qt,height:$t,xScale:T?dn:null,yScale:k?_t:null,xValues:M,yValues:R},"grid")),O.includes("legends")&&(ce.legends=L.jsx(Gkt,{width:Qt,height:$t,legends:K,toggleSerie:Z},"legends")),O.includes("markers")&&(ce.markers=L.jsx(p6e,{markers:te,width:Qt,height:$t,xScale:dn,yScale:_t},"markers"));var Te=N.useMemo(function(){return $r({},G,{margin:It,width:s,height:o,innerWidth:Qt,innerHeight:$t,bars:Ht,legendData:K,enableLabel:X,xScale:dn,yScale:_t,tooltip:Re,getTooltipLabel:Nt,onClick:Ke,onMouseEnter:ze,onMouseLeave:Pe})},[G,It,s,o,Qt,$t,Ht,K,X,dn,_t,Re,Nt,Ke,ze,Pe]);return L.jsx(a2,{width:vt,height:zt,margin:It,defs:ie,role:gt,ariaLabel:ct,ariaLabelledBy:Ye,ariaDescribedBy:Xe,isFocusable:he,children:O.map(function(de,Ue){var Je;return typeof de=="function"?L.jsx(N.Fragment,{children:N.createElement(de,Te)},Ue):(Je=ce==null?void 0:ce[de])!=null?Je:null})})},lAt=function(t){var e=t.isInteractive,n=e===void 0?Si.isInteractive:e,r=t.animate,i=r===void 0?Si.animate:r,s=t.motionConfig,o=s===void 0?Si.motionConfig:s,a=t.theme,l=t.renderWrapper,c=By(t,oAt);return L.jsx(my,{animate:i,isInteractive:n,motionConfig:o,renderWrapper:l,theme:a,children:L.jsx(aAt,$r({isInteractive:n},c))})},cAt=["isInteractive","renderWrapper","theme"],D$=function(t,e,n,r){return t.find(function(i){return m6e(i.x+e.left,i.y+e.top,i.width,i.height,n,r)})},uAt=function(t){var e=t.data,n=t.indexBy,r=t.keys,i=t.margin,s=t.width,o=t.height,a=t.groupMode,l=t.layout,c=t.reverse,u=t.minValue,d=t.maxValue,f=t.valueScale,h=t.indexScale,p=t.padding,v=t.innerPadding,m=t.axisTop,g=t.axisRight,y=t.axisBottom,x=y===void 0?ia.axisBottom:y,S=t.axisLeft,_=S===void 0?ia.axisLeft:S,C=t.enableGridX,T=C===void 0?ia.enableGridX:C,A=t.enableGridY,k=A===void 0?ia.enableGridY:A,M=t.gridXValues,R=t.gridYValues,P=t.layers,O=P===void 0?ia.layers:P,$=t.renderBar,U=$===void 0?function(_t,Dt){var Nt=Dt.bar,bt=Nt.color,Wt=Nt.height,Sn=Nt.width,Z=Nt.x,K=Nt.y,ne=Dt.borderColor,G=Dt.borderRadius,ie=Dt.borderWidth,ce=Dt.label,Te=Dt.labelColor,de=Dt.shouldRenderLabel;if(_t.fillStyle=bt,ie>0&&(_t.strokeStyle=ne,_t.lineWidth=ie),_t.beginPath(),G>0){var Ue=Math.min(G,Wt);_t.moveTo(Z+Ue,K),_t.lineTo(Z+Sn-Ue,K),_t.quadraticCurveTo(Z+Sn,K,Z+Sn,K+Ue),_t.lineTo(Z+Sn,K+Wt-Ue),_t.quadraticCurveTo(Z+Sn,K+Wt,Z+Sn-Ue,K+Wt),_t.lineTo(Z+Ue,K+Wt),_t.quadraticCurveTo(Z,K+Wt,Z,K+Wt-Ue),_t.lineTo(Z,K+Ue),_t.quadraticCurveTo(Z,K,Z+Ue,K),_t.closePath()}else _t.rect(Z,K,Sn,Wt);_t.fill(),ie>0&&_t.stroke(),de&&(_t.textBaseline="middle",_t.textAlign="center",_t.fillStyle=Te,_t.fillText(ce,Z+Sn/2,K+Wt/2))}:$,z=t.enableLabel,X=z===void 0?ia.enableLabel:z,D=t.label,F=t.labelSkipWidth,W=F===void 0?ia.labelSkipWidth:F,V=t.labelSkipHeight,j=V===void 0?ia.labelSkipHeight:V,J=t.labelTextColor,Q=t.colorBy,te=t.colors,re=t.borderRadius,se=re===void 0?ia.borderRadius:re,fe=t.borderWidth,ae=fe===void 0?ia.borderWidth:fe,ye=t.borderColor,le=t.annotations,H=le===void 0?ia.annotations:le,Me=t.legendLabel,we=t.tooltipLabel,Ee=t.valueFormat,me=t.isInteractive,qe=me===void 0?ia.isInteractive:me,ke=t.tooltip,ee=ke===void 0?ia.tooltip:ke,Y=t.onClick,oe=t.onMouseEnter,xe=t.onMouseLeave,Se=t.legends,be=t.pixelRatio,Re=be===void 0?ia.pixelRatio:be,Ke=t.canvasRef,ze=N.useRef(null),Pe=Rr(),De=s2(s,o,i),We=De.margin,gt=De.innerWidth,ct=De.innerHeight,Ye=De.outerWidth,Xe=De.outerHeight,Le=Jpe({indexBy:n,label:D,tooltipLabel:we,valueFormat:Ee,colors:te,colorBy:Q,borderColor:ye,labelTextColor:J,groupMode:a,layout:l,reverse:c,data:e,keys:r,minValue:u,maxValue:d,margin:We,width:gt,height:ct,padding:p,innerPadding:v,valueScale:f,indexScale:h,enableLabel:X,labelSkipWidth:W,labelSkipHeight:j,legends:Se,legendLabel:Me}),he=Le.bars,He=Le.barsWithValue,ot=Le.xScale,et=Le.yScale,Ie=Le.getLabel,Ce=Le.getTooltipLabel,ut=Le.getBorderColor,dt=Le.getLabelColor,yt=Le.shouldRenderBarLabel,vt=Le.legendsWithData,zt=ry(),It=zt.showTooltipFromEvent,Qt=zt.hideTooltip,$t=ZGe({annotations:YU({data:he,annotations:H,getPosition:function(_t){return{x:_t.x,y:_t.y}},getDimensions:function(_t){var Dt=_t.width,Nt=_t.height;return{width:Dt,height:Nt,size:Math.max(Dt,Nt)}}})}),mt=N.useMemo(function(){return{borderRadius:se,borderWidth:ae,isInteractive:qe,isFocusable:!1,labelSkipWidth:W,labelSkipHeight:j,margin:We,width:s,height:o,innerWidth:gt,innerHeight:ct,bars:he,legendData:vt,enableLabel:X,xScale:ot,yScale:et,tooltip:ee,getTooltipLabel:Ce,onClick:Y,onMouseEnter:oe,onMouseLeave:xe}},[se,ae,qe,W,j,We,s,o,gt,ct,he,vt,X,ot,et,ee,Ce,Y,oe,xe]);N.useEffect(function(){var _t,Dt=(_t=ze.current)==null?void 0:_t.getContext("2d");ze.current&&Dt&&(ze.current.width=Ye*Re,ze.current.height=Xe*Re,Dt.scale(Re,Re),Dt.fillStyle=Pe.background,Dt.fillRect(0,0,Ye,Xe),Dt.translate(We.left,We.top),O.forEach(function(Nt){Nt==="grid"?typeof Pe.grid.line.strokeWidth=="number"&&Pe.grid.line.strokeWidth>0&&(Dt.lineWidth=Pe.grid.line.strokeWidth,Dt.strokeStyle=Pe.grid.line.stroke,T&&nj(Dt,{width:s,height:o,scale:ot,axis:"x",values:M}),k&&nj(Dt,{width:s,height:o,scale:et,axis:"y",values:R})):Nt==="axes"?M8e(Dt,{xScale:ot,yScale:et,width:gt,height:ct,top:m,right:g,bottom:x,left:_,theme:Pe}):Nt==="bars"?He.forEach(function(bt){U(Dt,{bar:bt,borderColor:ut(bt),borderRadius:se,borderWidth:ae,label:Ie(bt.data),labelColor:dt(bt),shouldRenderLabel:yt(bt)})}):Nt==="legends"?vt.forEach(function(bt){var Wt=bt[0],Sn=bt[1];NWe(Dt,$r({},Wt,{data:Sn,containerWidth:gt,containerHeight:ct,theme:Pe}))}):Nt==="annotations"?rHe(Dt,{annotations:$t,theme:Pe}):typeof Nt=="function"&&Nt(Dt,mt)}),Dt.save())},[x,_,g,m,He,se,ae,$t,T,k,ut,Ie,dt,M,R,a,o,ct,gt,mt,O,l,vt,We.left,We.top,Xe,Ye,Re,U,ot,et,c,yt,Pe,s]);var Ht=N.useCallback(function(_t){if(he&&ze.current){var Dt=iP(ze.current,_t),Nt=Dt[0],bt=Dt[1],Wt=D$(he,We,Nt,bt);Wt!==void 0?(It(N.createElement(ee,$r({},Wt.data,{color:Wt.color,label:Wt.label,value:Number(Wt.data.value)})),_t),_t.type==="mouseenter"&&(oe==null||oe(Wt.data,_t))):Qt()}},[Qt,We,oe,he,It,ee]),pn=N.useCallback(function(_t){if(he&&ze.current){Qt();var Dt=iP(ze.current,_t),Nt=Dt[0],bt=Dt[1],Wt=D$(he,We,Nt,bt);Wt&&(xe==null||xe(Wt.data,_t))}},[Qt,We,xe,he]),dn=N.useCallback(function(_t){if(he&&ze.current){var Dt=iP(ze.current,_t),Nt=Dt[0],bt=Dt[1],Wt=D$(he,We,Nt,bt);Wt!==void 0&&(Y==null||Y($r({},Wt.data,{color:Wt.color}),_t))}},[We,Y,he]);return L.jsx("canvas",{ref:function(_t){ze.current=_t,Ke&&"current"in Ke&&(Ke.current=_t)},width:Ye*Re,height:Xe*Re,style:{width:Ye,height:Xe,cursor:qe?"auto":"normal"},onMouseEnter:qe?Ht:void 0,onMouseMove:qe?Ht:void 0,onMouseLeave:qe?pn:void 0,onClick:qe?dn:void 0})},dAt=N.forwardRef(function(t,e){var n=t.isInteractive,r=t.renderWrapper,i=t.theme,s=By(t,cAt);return L.jsx(my,{isInteractive:n,renderWrapper:r,theme:i,animate:!1,children:L.jsx(uAt,$r({},s,{canvasRef:e}))})}),Qpe=function(t){return L.jsx(gy,{children:function(e){var n=e.width,r=e.height;return L.jsx(lAt,$r({width:n,height:r},t))}})};N.forwardRef(function(t,e){return L.jsx(gy,{children:function(n){var r=n.width,i=n.height;return L.jsx(dAt,$r({width:r,height:i},t,{ref:e}))}})});const fAt=[{status:"Full Time",male:1449,maleColor:"hsl(131, 70%, 50%)",female:2133,femaleColor:"hsl(153, 70%, 50%)"},{status:"Part Time",male:2905,maleColor:"hsl(13, 70%, 50%)",female:3705,femaleColor:"hsl(267, 70%, 50%)"}],hAt=({data:t})=>L.jsx(Qpe,{data:t,theme:{background:"black",text:{fontSize:22,fill:"#b0bec5"},axis:{legend:{text:{fontSize:22}}},labels:{text:{fontSize:18}}},keys:["male","female"],indexBy:"status",margin:{top:20,right:125,bottom:75,left:95},padding:.25,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"set2"},borderRadius:4,borderWidth:1,borderColor:{theme:"labels.text.fill"},axisTop:null,axisRight:null,axisBottom:{tickSize:2,tickPadding:2,tickRotation:0,legend:"Enrollment Type",legendPosition:"middle",legendOffset:55,truncateTickAt:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Total Enrollment",legendPosition:"middle",legendOffset:-80,truncateTickAt:0},labelSkipWidth:8,labelSkipHeight:7,labelTextColor:"black",legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:-149,itemsSpacing:2,itemWidth:99,itemHeight:25,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],role:"application",ariaLabel:"Nivo bar chart demo",groupMode:"grouped",maxValue:7e3});function Gr(){return Gr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gr.apply(this,arguments)}var pAt={pointerEvents:"none"},mAt=function(t){var e=t.label,n=t.style,r=Rr();return L.jsx(nr.g,{transform:n.transform,opacity:n.progress,style:pAt,children:L.jsx(nr.text,{textAnchor:"middle",dominantBaseline:"central",style:Gr({},r.labels.text,{fill:n.textColor}),children:e})})},eme=function(t){var e=t%(2*Math.PI);return e<0&&(e+=2*Math.PI),e},gAt=function(t,e){return t.filter(function(n){return Math.abs(zA(n.arc.endAngle-n.arc.startAngle))>=e})},vAt={startAngle:{enter:function(t){return Gr({},t,{endAngle:t.startAngle})},update:function(t){return t},leave:function(t){return Gr({},t,{startAngle:t.endAngle})}},middleAngle:{enter:function(t){var e=t.startAngle+(t.endAngle-t.startAngle)/2;return Gr({},t,{startAngle:e,endAngle:e})},update:function(t){return t},leave:function(t){var e=t.startAngle+(t.endAngle-t.startAngle)/2;return Gr({},t,{startAngle:e,endAngle:e})}},endAngle:{enter:function(t){return Gr({},t,{startAngle:t.endAngle})},update:function(t){return t},leave:function(t){return Gr({},t,{endAngle:t.startAngle})}},innerRadius:{enter:function(t){return Gr({},t,{outerRadius:t.innerRadius})},update:function(t){return t},leave:function(t){return Gr({},t,{innerRadius:t.outerRadius})}},centerRadius:{enter:function(t){var e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;return Gr({},t,{innerRadius:e,outerRadius:e})},update:function(t){return t},leave:function(t){var e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;return Gr({},t,{innerRadius:e,outerRadius:e})}},outerRadius:{enter:function(t){return Gr({},t,{innerRadius:t.outerRadius})},update:function(t){return t},leave:function(t){return Gr({},t,{outerRadius:t.innerRadius})}},pushIn:{enter:function(t){return Gr({},t,{innerRadius:t.innerRadius-t.outerRadius+t.innerRadius,outerRadius:t.innerRadius})},update:function(t){return t},leave:function(t){return Gr({},t,{innerRadius:t.outerRadius,outerRadius:t.outerRadius+t.outerRadius-t.innerRadius})}},pushOut:{enter:function(t){return Gr({},t,{innerRadius:t.outerRadius,outerRadius:t.outerRadius+t.outerRadius-t.innerRadius})},update:function(t){return t},leave:function(t){return Gr({},t,{innerRadius:t.innerRadius-t.outerRadius+t.innerRadius,outerRadius:t.innerRadius})}}},tme=function(t,e){return N.useMemo(function(){var n=vAt[t];return{enter:function(r){return Gr({progress:0},n.enter(r.arc),e?e.enter(r):{})},update:function(r){return Gr({progress:1},n.update(r.arc),e?e.update(r):{})},leave:function(r){return Gr({progress:0},n.leave(r.arc),e?e.leave(r):{})}}},[t,e])},yAt=function(t,e){var n=a6e(t)-Math.PI/2,r=t.innerRadius+(t.outerRadius-t.innerRadius)*e;return Kp(n,r)},xAt=function(t){return function(e,n,r,i){return Gl([e,n,r,i],function(s,o,a,l){var c=yAt({startAngle:s,endAngle:o,innerRadius:a,outerRadius:l},t);return"translate("+c.x+","+c.y+")"})}},bAt=function(t,e,n,r){e===void 0&&(e=.5),n===void 0&&(n="innerRadius");var i=Ys(),s=i.animate,o=i.config,a=tme(n,r);return{transition:jm(t,{keys:function(l){return l.id},initial:a.update,from:a.enter,enter:a.update,update:a.update,leave:a.leave,config:o,immediate:!s}),interpolate:xAt(e)}},wAt=function(t){var e=t.center,n=t.data,r=t.transitionMode,i=t.label,s=t.radiusOffset,o=t.skipAngle,a=t.textColor,l=t.component,c=l===void 0?mAt:l,u=$d(i),d=Rr(),f=Ac(a,d),h=N.useMemo(function(){return n.filter(function(y){return Math.abs(zA(y.arc.endAngle-y.arc.startAngle))>=o})},[n,o]),p=bAt(h,s,r),v=p.transition,m=p.interpolate,g=c;return L.jsx("g",{transform:"translate("+e[0]+","+e[1]+")",children:v(function(y,x){return N.createElement(g,{key:x.id,datum:x,label:u(x),style:Gr({},y,{transform:m(y.startAngle,y.endAngle,y.innerRadius,y.outerRadius),textColor:f(x)})})})})},SAt=function(t){var e=t.label,n=t.style,r=Rr();return L.jsxs(nr.g,{opacity:n.opacity,children:[L.jsx(nr.path,{fill:"none",stroke:n.linkColor,strokeWidth:n.thickness,d:n.path}),L.jsx(nr.text,{transform:n.textPosition,textAnchor:n.textAnchor,dominantBaseline:"central",style:Gr({},r.labels.text,{fill:n.textColor}),children:e})]})},_At=function(t){var e=eme(t.startAngle+(t.endAngle-t.startAngle)/2-Math.PI/2);return e<Math.PI/2||e>1.5*Math.PI?"start":"end"},nme=function(t,e,n,r){var i,s,o=eme(t.startAngle+(t.endAngle-t.startAngle)/2-Math.PI/2),a=Kp(o,t.outerRadius+e),l=Kp(o,t.outerRadius+e+n);return o<Math.PI/2||o>1.5*Math.PI?(i="after",s={x:l.x+r,y:l.y}):(i="before",s={x:l.x-r,y:l.y}),{side:i,points:[a,l,s]}},CAt=pre().x(function(t){return t.x}).y(function(t){return t.y}),TAt=function(t,e,n,r,i,s,o){return Gl([t,e,n,r,i,s,o],function(a,l,c,u,d,f,h){var p=nme({startAngle:a,endAngle:l,innerRadius:c,outerRadius:u},d,f,h).points;return CAt(p)})},EAt=function(t,e,n,r){return Gl([t,e,n,r],function(i,s,o,a){return _At({startAngle:i,endAngle:s,innerRadius:o,outerRadius:a})})},MAt=function(t,e,n,r,i,s,o,a){return Gl([t,e,n,r,i,s,o,a],function(l,c,u,d,f,h,p,v){var m=nme({startAngle:l,endAngle:c,innerRadius:u,outerRadius:d},f,h,p),g=m.points,y=m.side,x=g[2];return y==="before"?x.x-=v:x.x+=v,"translate("+x.x+","+x.y+")"})},kAt=function(t){var e=t.data,n=t.offset,r=n===void 0?0:n,i=t.diagonalLength,s=t.straightLength,o=t.skipAngle,a=o===void 0?0:o,l=t.textOffset,c=t.linkColor,u=t.textColor,d=Ys(),f=d.animate,h=d.config,p=Rr(),v=Ac(c,p),m=Ac(u,p),g=function(x,S){return N.useMemo(function(){return gAt(x,S)},[x,S])}(e,a),y=function(x){var S=x.offset,_=x.diagonalLength,C=x.straightLength,T=x.textOffset,A=x.getLinkColor,k=x.getTextColor;return N.useMemo(function(){return{enter:function(M){return{startAngle:M.arc.startAngle,endAngle:M.arc.endAngle,innerRadius:M.arc.innerRadius,outerRadius:M.arc.outerRadius,offset:S,diagonalLength:0,straightLength:0,textOffset:T,linkColor:A(M),textColor:k(M),opacity:0}},update:function(M){return{startAngle:M.arc.startAngle,endAngle:M.arc.endAngle,innerRadius:M.arc.innerRadius,outerRadius:M.arc.outerRadius,offset:S,diagonalLength:_,straightLength:C,textOffset:T,linkColor:A(M),textColor:k(M),opacity:1}},leave:function(M){return{startAngle:M.arc.startAngle,endAngle:M.arc.endAngle,innerRadius:M.arc.innerRadius,outerRadius:M.arc.outerRadius,offset:S,diagonalLength:0,straightLength:0,textOffset:T,linkColor:A(M),textColor:k(M),opacity:0}}}},[_,C,T,A,k,S])}({offset:r,diagonalLength:i,straightLength:s,textOffset:l,getLinkColor:v,getTextColor:m});return{transition:jm(g,{keys:function(x){return x.id},initial:y.update,from:y.enter,enter:y.update,update:y.update,leave:y.leave,config:h,immediate:!f}),interpolateLink:TAt,interpolateTextAnchor:EAt,interpolateTextPosition:MAt}},AAt=function(t){var e=t.center,n=t.data,r=t.label,i=t.skipAngle,s=t.offset,o=t.diagonalLength,a=t.straightLength,l=t.strokeWidth,c=t.textOffset,u=t.textColor,d=t.linkColor,f=t.component,h=f===void 0?SAt:f,p=$d(r),v=kAt({data:n,skipAngle:i,offset:s,diagonalLength:o,straightLength:a,textOffset:c,linkColor:d,textColor:u}),m=v.transition,g=v.interpolateLink,y=v.interpolateTextAnchor,x=v.interpolateTextPosition,S=h;return L.jsx("g",{transform:"translate("+e[0]+","+e[1]+")",children:m(function(_,C){return N.createElement(S,{key:C.id,datum:C,label:p(C),style:Gr({},_,{thickness:l,path:g(_.startAngle,_.endAngle,_.innerRadius,_.outerRadius,_.offset,_.diagonalLength,_.straightLength),textAnchor:y(_.startAngle,_.endAngle,_.innerRadius,_.outerRadius),textPosition:x(_.startAngle,_.endAngle,_.innerRadius,_.outerRadius,_.offset,_.diagonalLength,_.straightLength,_.textOffset)})})})})},IAt=function(t){var e=t.datum,n=t.style,r=t.onClick,i=t.onMouseEnter,s=t.onMouseMove,o=t.onMouseLeave,a=N.useCallback(function(d){return r==null?void 0:r(e,d)},[r,e]),l=N.useCallback(function(d){return i==null?void 0:i(e,d)},[i,e]),c=N.useCallback(function(d){return s==null?void 0:s(e,d)},[s,e]),u=N.useCallback(function(d){return o==null?void 0:o(e,d)},[o,e]);return L.jsx(nr.path,{d:n.path,opacity:n.opacity,fill:e.fill||n.color,stroke:n.borderColor,strokeWidth:n.borderWidth,onClick:r?a:void 0,onMouseEnter:i?l:void 0,onMouseMove:s?c:void 0,onMouseLeave:o?u:void 0})},RAt=function(t,e,n,r,i){return Gl([t,e,n,r],function(s,o,a,l){return i({startAngle:s,endAngle:o,innerRadius:Math.max(0,a),outerRadius:Math.max(0,l)})})},NAt=function(t,e,n){e===void 0&&(e="innerRadius");var r=Ys(),i=r.animate,s=r.config,o=tme(e,n);return{transition:jm(t,{keys:function(a){return a.id},initial:o.update,from:o.enter,enter:o.update,update:o.update,leave:o.leave,config:s,immediate:!i}),interpolate:RAt}},PAt=function(t){var e=t.center,n=t.data,r=t.arcGenerator,i=t.borderWidth,s=t.borderColor,o=t.onClick,a=t.onMouseEnter,l=t.onMouseMove,c=t.onMouseLeave,u=t.transitionMode,d=t.component,f=d===void 0?IAt:d,h=Rr(),p=Ac(s,h),v=NAt(n,u,{enter:function(x){return{opacity:0,color:x.color,borderColor:p(x)}},update:function(x){return{opacity:1,color:x.color,borderColor:p(x)}},leave:function(x){return{opacity:0,color:x.color,borderColor:p(x)}}}),m=v.transition,g=v.interpolate,y=f;return L.jsx("g",{transform:"translate("+e[0]+","+e[1]+")",children:m(function(x,S){return N.createElement(y,{key:S.id,datum:S,style:Gr({},x,{borderWidth:i,path:g(x.startAngle,x.endAngle,x.innerRadius,x.outerRadius,r)}),onClick:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:c})})})},$At=function(t,e,n,r,i,s){s===void 0&&(s=!0);var o=[],a=Kp(Fl(r),n);o.push([a.x,a.y]);var l=Kp(Fl(i),n);o.push([l.x,l.y]);for(var c=Math.round(Math.min(r,i));c<=Math.round(Math.max(r,i));c++)if(c%90==0){var u=Kp(Fl(c),n);o.push([u.x,u.y])}o=o.map(function(m){var g=m[0],y=m[1];return[t+g,e+y]}),s&&o.push([t,e]);var d=o.map(function(m){return m[0]}),f=o.map(function(m){return m[1]}),h=Math.min.apply(Math,d),p=Math.max.apply(Math,d),v=Math.min.apply(Math,f);return{points:o,x:h,y:v,width:p-h,height:Math.max.apply(Math,f)-v}},DAt=function(t){var e=t===void 0?{}:t,n=e.cornerRadius,r=n===void 0?0:n,i=e.padAngle,s=i===void 0?0:i;return N.useMemo(function(){return kFe().innerRadius(function(o){return o.innerRadius}).outerRadius(function(o){return o.outerRadius}).cornerRadius(r).padAngle(s)},[r,s])};function vh(){return vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vh.apply(this,arguments)}function rme(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var OK,LAt=function(t){var e=t.width,n=t.height,r=t.legends,i=t.data,s=t.toggleSerie;return L.jsx(L.Fragment,{children:r.map(function(o,a){var l;return L.jsx(qU,vh({},o,{containerWidth:e,containerHeight:n,data:(l=o.data)!=null?l:i,toggleSerie:o.toggleSerie?s:void 0}),a)})})},yn={id:"id",value:"value",sortByValue:!1,innerRadius:0,padAngle:0,cornerRadius:0,layers:["arcs","arcLinkLabels","arcLabels","legends"],startAngle:0,endAngle:360,fit:!0,activeInnerRadiusOffset:0,activeOuterRadiusOffset:0,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableArcLabels:!0,arcLabel:"formattedValue",arcLabelsSkipAngle:0,arcLabelsRadiusOffset:.5,arcLabelsTextColor:{theme:"labels.text.fill"},enableArcLinkLabels:!0,arcLinkLabel:"id",arcLinkLabelsSkipAngle:0,arcLinkLabelsOffset:0,arcLinkLabelsDiagonalLength:16,arcLinkLabelsStraightLength:24,arcLinkLabelsThickness:1,arcLinkLabelsTextOffset:6,arcLinkLabelsTextColor:{theme:"labels.text.fill"},arcLinkLabelsColor:{theme:"axis.ticks.line.stroke"},colors:{scheme:"nivo"},defs:[],fill:[],isInteractive:!0,animate:!0,motionConfig:"gentle",transitionMode:"innerRadius",tooltip:function(t){var e=t.datum;return L.jsx(bA,{id:e.id,value:e.formattedValue,enableChip:!0,color:e.color})},legends:[],role:"img",pixelRatio:typeof window<"u"&&(OK=window.devicePixelRatio)!=null?OK:1},OAt=["points"],FAt=function(t){var e=t.data,n=t.id,r=n===void 0?yn.id:n,i=t.value,s=i===void 0?yn.value:i,o=t.valueFormat,a=t.colors,l=a===void 0?yn.colors:a,c=$d(r),u=$d(s),d=o2(o),f=HU(l,"id");return N.useMemo(function(){return e.map(function(h){var p,v=c(h),m=u(h),g={id:v,label:(p=h.label)!=null?p:v,hidden:!1,value:m,formattedValue:d(m),data:h};return vh({},g,{color:f(g)})})},[e,c,u,d,f])},UAt=function(t){var e=t.data,n=t.startAngle,r=t.endAngle,i=t.innerRadius,s=t.outerRadius,o=t.padAngle,a=t.sortByValue,l=t.activeId,c=t.activeInnerRadiusOffset,u=t.activeOuterRadiusOffset,d=t.hiddenIds,f=t.forwardLegendData,h=N.useMemo(function(){var g=NFe().value(function(y){return y.value}).startAngle(Fl(n)).endAngle(Fl(r)).padAngle(Fl(o));return a||g.sortValues(null),g},[n,r,o,a]),p=N.useMemo(function(){var g=e.filter(function(y){return!d.includes(y.id)});return{dataWithArc:h(g).map(function(y){var x=Math.abs(y.endAngle-y.startAngle);return vh({},y.data,{arc:{index:y.index,startAngle:y.startAngle,endAngle:y.endAngle,innerRadius:l===y.data.id?i-c:i,outerRadius:l===y.data.id?s+u:s,thickness:s-i,padAngle:y.padAngle,angle:x,angleDeg:zA(x)}})}),legendData:e.map(function(y){return{id:y.id,label:y.label,color:y.color,hidden:d.includes(y.id),data:y}})}},[h,e,d,l,i,c,s,u]),v=p.legendData,m=N.useRef(f);return N.useEffect(function(){typeof m.current=="function"&&m.current(v)},[m,v]),p},BAt=function(t){var e=t.activeId,n=t.onActiveIdChange,r=t.defaultActiveId,i=e!==void 0,s=N.useState(i||r===void 0?null:r),o=s[0],a=s[1];return{activeId:i?e:o,setActiveId:N.useCallback(function(l){n&&n(l),i||a(l)},[i,n,a])}},zAt=function(t){var e=t.data,n=t.width,r=t.height,i=t.innerRadius,s=i===void 0?yn.innerRadius:i,o=t.startAngle,a=o===void 0?yn.startAngle:o,l=t.endAngle,c=l===void 0?yn.endAngle:l,u=t.padAngle,d=u===void 0?yn.padAngle:u,f=t.sortByValue,h=f===void 0?yn.sortByValue:f,p=t.cornerRadius,v=p===void 0?yn.cornerRadius:p,m=t.fit,g=m===void 0?yn.fit:m,y=t.activeInnerRadiusOffset,x=y===void 0?yn.activeInnerRadiusOffset:y,S=t.activeOuterRadiusOffset,_=S===void 0?yn.activeOuterRadiusOffset:S,C=t.activeId,T=t.onActiveIdChange,A=t.defaultActiveId,k=t.forwardLegendData,M=BAt({activeId:C,onActiveIdChange:T,defaultActiveId:A}),R=M.activeId,P=M.setActiveId,O=N.useState([]),$=O[0],U=O[1],z=N.useMemo(function(){var F,W=Math.min(n,r)/2,V=W*Math.min(s,1),j=n/2,J=r/2;if(g){var Q=$At(j,J,W,a-90,c-90),te=Q.points,re=rme(Q,OAt),se=Math.min(n/re.width,r/re.height),fe={width:re.width*se,height:re.height*se};fe.x=(n-fe.width)/2,fe.y=(r-fe.height)/2,j=(j-re.x)/re.width*re.width*se+fe.x,J=(J-re.y)/re.height*re.height*se+fe.y,F={box:re,ratio:se,points:te},W*=se,V*=se}return{centerX:j,centerY:J,radius:W,innerRadius:V,debug:F}},[n,r,s,a,c,g]),X=UAt({data:e,startAngle:a,endAngle:c,innerRadius:z.innerRadius,outerRadius:z.radius,padAngle:d,sortByValue:h,activeId:R,activeInnerRadiusOffset:x,activeOuterRadiusOffset:_,hiddenIds:$,forwardLegendData:k}),D=N.useCallback(function(F){U(function(W){return W.indexOf(F)>-1?W.filter(function(V){return V!==F}):[].concat(W,[F])})},[]);return vh({arcGenerator:DAt({cornerRadius:v,padAngle:Fl(d)}),activeId:R,setActiveId:P,toggleSerie:D},X,z)},WAt=function(t){var e=t.dataWithArc,n=t.arcGenerator,r=t.centerX,i=t.centerY,s=t.radius,o=t.innerRadius;return N.useMemo(function(){return{dataWithArc:e,arcGenerator:n,centerX:r,centerY:i,radius:s,innerRadius:o}},[e,n,r,i,s,o])},VAt=function(t){var e=t.center,n=t.data,r=t.arcGenerator,i=t.borderWidth,s=t.borderColor,o=t.isInteractive,a=t.onClick,l=t.onMouseEnter,c=t.onMouseMove,u=t.onMouseLeave,d=t.setActiveId,f=t.tooltip,h=t.transitionMode,p=ry(),v=p.showTooltipFromEvent,m=p.hideTooltip,g=N.useMemo(function(){if(o)return function(_,C){a==null||a(_,C)}},[o,a]),y=N.useMemo(function(){if(o)return function(_,C){v(N.createElement(f,{datum:_}),C),d(_.id),l==null||l(_,C)}},[o,v,d,l,f]),x=N.useMemo(function(){if(o)return function(_,C){v(N.createElement(f,{datum:_}),C),c==null||c(_,C)}},[o,v,c,f]),S=N.useMemo(function(){if(o)return function(_,C){m(),d(null),u==null||u(_,C)}},[o,m,d,u]);return L.jsx(PAt,{center:e,data:n,arcGenerator:r,borderWidth:i,borderColor:s,transitionMode:h,onClick:g,onMouseEnter:y,onMouseMove:x,onMouseLeave:S})},GAt=["isInteractive","animate","motionConfig","theme","renderWrapper"],HAt=function(t){var e=t.data,n=t.id,r=n===void 0?yn.id:n,i=t.value,s=i===void 0?yn.value:i,o=t.valueFormat,a=t.sortByValue,l=a===void 0?yn.sortByValue:a,c=t.layers,u=c===void 0?yn.layers:c,d=t.startAngle,f=d===void 0?yn.startAngle:d,h=t.endAngle,p=h===void 0?yn.endAngle:h,v=t.padAngle,m=v===void 0?yn.padAngle:v,g=t.fit,y=g===void 0?yn.fit:g,x=t.innerRadius,S=x===void 0?yn.innerRadius:x,_=t.cornerRadius,C=_===void 0?yn.cornerRadius:_,T=t.activeInnerRadiusOffset,A=T===void 0?yn.activeInnerRadiusOffset:T,k=t.activeOuterRadiusOffset,M=k===void 0?yn.activeOuterRadiusOffset:k,R=t.width,P=t.height,O=t.margin,$=t.colors,U=$===void 0?yn.colors:$,z=t.borderWidth,X=z===void 0?yn.borderWidth:z,D=t.borderColor,F=D===void 0?yn.borderColor:D,W=t.enableArcLabels,V=W===void 0?yn.enableArcLabels:W,j=t.arcLabel,J=j===void 0?yn.arcLabel:j,Q=t.arcLabelsSkipAngle,te=Q===void 0?yn.arcLabelsSkipAngle:Q,re=t.arcLabelsTextColor,se=re===void 0?yn.arcLabelsTextColor:re,fe=t.arcLabelsRadiusOffset,ae=fe===void 0?yn.arcLabelsRadiusOffset:fe,ye=t.arcLabelsComponent,le=t.enableArcLinkLabels,H=le===void 0?yn.enableArcLinkLabels:le,Me=t.arcLinkLabel,we=Me===void 0?yn.arcLinkLabel:Me,Ee=t.arcLinkLabelsSkipAngle,me=Ee===void 0?yn.arcLinkLabelsSkipAngle:Ee,qe=t.arcLinkLabelsOffset,ke=qe===void 0?yn.arcLinkLabelsOffset:qe,ee=t.arcLinkLabelsDiagonalLength,Y=ee===void 0?yn.arcLinkLabelsDiagonalLength:ee,oe=t.arcLinkLabelsStraightLength,xe=oe===void 0?yn.arcLinkLabelsStraightLength:oe,Se=t.arcLinkLabelsThickness,be=Se===void 0?yn.arcLinkLabelsThickness:Se,Re=t.arcLinkLabelsTextOffset,Ke=Re===void 0?yn.arcLinkLabelsTextOffset:Re,ze=t.arcLinkLabelsTextColor,Pe=ze===void 0?yn.arcLinkLabelsTextColor:ze,De=t.arcLinkLabelsColor,We=De===void 0?yn.arcLinkLabelsColor:De,gt=t.arcLinkLabelComponent,ct=t.defs,Ye=ct===void 0?yn.defs:ct,Xe=t.fill,Le=Xe===void 0?yn.fill:Xe,he=t.isInteractive,He=he===void 0?yn.isInteractive:he,ot=t.onClick,et=t.onMouseEnter,Ie=t.onMouseMove,Ce=t.onMouseLeave,ut=t.tooltip,dt=ut===void 0?yn.tooltip:ut,yt=t.activeId,vt=t.onActiveIdChange,zt=t.defaultActiveId,It=t.transitionMode,Qt=It===void 0?yn.transitionMode:It,$t=t.legends,mt=$t===void 0?yn.legends:$t,Ht=t.forwardLegendData,pn=t.role,dn=pn===void 0?yn.role:pn,_t=s2(R,P,O),Dt=_t.outerWidth,Nt=_t.outerHeight,bt=_t.margin,Wt=_t.innerWidth,Sn=_t.innerHeight,Z=FAt({data:e,id:r,value:s,valueFormat:o,colors:U}),K=zAt({data:Z,width:Wt,height:Sn,fit:y,innerRadius:S,startAngle:f,endAngle:p,padAngle:m,sortByValue:l,cornerRadius:C,activeInnerRadiusOffset:A,activeOuterRadiusOffset:M,activeId:yt,onActiveIdChange:vt,defaultActiveId:zt,forwardLegendData:Ht}),ne=K.dataWithArc,G=K.legendData,ie=K.arcGenerator,ce=K.centerX,Te=K.centerY,de=K.radius,Ue=K.innerRadius,Je=K.setActiveId,nt=K.toggleSerie,$e=AU(Ye,ne,Le),Ct={arcs:null,arcLinkLabels:null,arcLabels:null,legends:null};u.includes("arcs")&&(Ct.arcs=L.jsx(VAt,{center:[ce,Te],data:ne,arcGenerator:ie,borderWidth:X,borderColor:F,isInteractive:He,onClick:ot,onMouseEnter:et,onMouseMove:Ie,onMouseLeave:Ce,setActiveId:Je,tooltip:dt,transitionMode:Qt},"arcs")),H&&u.includes("arcLinkLabels")&&(Ct.arcLinkLabels=L.jsx(AAt,{center:[ce,Te],data:ne,label:we,skipAngle:me,offset:ke,diagonalLength:Y,straightLength:xe,strokeWidth:be,textOffset:Ke,textColor:Pe,linkColor:We,component:gt},"arcLinkLabels")),V&&u.includes("arcLabels")&&(Ct.arcLabels=L.jsx(wAt,{center:[ce,Te],data:ne,label:J,radiusOffset:ae,skipAngle:te,textColor:se,transitionMode:Qt,component:ye},"arcLabels")),mt.length>0&&u.includes("legends")&&(Ct.legends=L.jsx(LAt,{width:Wt,height:Sn,data:G,legends:mt,toggleSerie:nt},"legends"));var ht=WAt({dataWithArc:ne,arcGenerator:ie,centerX:ce,centerY:Te,radius:de,innerRadius:Ue});return L.jsx(a2,{width:Dt,height:Nt,margin:bt,defs:$e,role:dn,children:u.map(function(ft,Lt){return Ct[ft]!==void 0?Ct[ft]:typeof ft=="function"?L.jsx(N.Fragment,{children:N.createElement(ft,ht)},Lt):null})})},jAt=function(t){var e=t.isInteractive,n=e===void 0?yn.isInteractive:e,r=t.animate,i=r===void 0?yn.animate:r,s=t.motionConfig,o=s===void 0?yn.motionConfig:s,a=t.theme,l=t.renderWrapper,c=rme(t,GAt);return L.jsx(my,{animate:i,isInteractive:n,motionConfig:o,renderWrapper:l,theme:a,children:L.jsx(HAt,vh({isInteractive:n},c))})},XAt=function(t){return L.jsx(gy,{children:function(e){var n=e.width,r=e.height;return L.jsx(jAt,vh({width:n,height:r},t))}})};const MT={"Academic Majors":{Male:3285,Female:4693},"Vocational Majors":{Male:740,Female:801},"Tech-Prep Majors":{Male:329,Female:344}},qAt=({data:t})=>L.jsx(XAt,{data:t,tooltip:({datum:{id:e,value:n,color:r}})=>L.jsxs(Qn,{style:{padding:12,color:r,background:"#222222"},children:[L.jsxs("strong",{children:[e,L.jsx("br",{})," Total Enrollment: ",MT[e].Female+MT[e].Male]}),L.jsx(En,{children:"-----------"}),L.jsxs("strong",{children:["Male: ",MT[e].Male]}),L.jsx("br",{}),L.jsxs("strong",{children:["Female: ",MT[e].Female]}),L.jsx(En,{children:"-----------"})]}),arcLabel:e=>e.value+"%",theme:{background:"black",text:{fontSize:22,fill:"#b0bec5"},labels:{text:{fontSize:22}},axis:{legend:{text:{fontSize:22}}}},margin:{top:35,right:55,bottom:70,left:95},cornerRadius:5,activeInnerRadiusOffset:22,activeOuterRadiusOffset:16,colors:{scheme:"accent"},borderColor:{from:"color",modifiers:[["darker","0.6"]]},arcLinkLabelsSkipAngle:15,arcLinkLabelsTextOffset:4,arcLinkLabelsTextColor:"#e3f2fd",arcLinkLabelsOffset:-7,arcLinkLabelsStraightLength:28,arcLinkLabelsThickness:5,arcLinkLabelsColor:{from:"color"},arcLabelsRadiusOffset:.75,arcLabelsSkipAngle:23,arcLabelsTextColor:"black",legends:[{anchor:"bottom",direction:"row",justify:!1,translateX:20,translateY:45,itemsSpacing:0,itemWidth:210,itemHeight:15,itemTextColor:"#e3f2fd",itemDirection:"left-to-right",itemOpacity:1,symbolSize:20,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}]}]}),YAt=[{id:"Academic Majors",label:"Academic Majors",value:78.28,color:"hsl(3, 70%, 50%)"},{id:"Vocational Majors",label:"Vocational Majors",value:15.12,color:"hsl(242, 70%, 50%)"},{id:"Tech-Prep Majors",label:"Tech-Prep Majors",value:6.6,color:"hsl(105, 70%, 50%)"}],KAt=[{age:"Under 18",male:1641,maleColor:"hsl(131, 70%, 50%)",female:2175,femaleColor:"hsl(153, 70%, 50%)"},{age:"18-20",male:1553,maleColor:"hsl(13, 70%, 50%)",female:1958,femaleColor:"hsl(267, 70%, 50%)"},{age:"21-25",male:806,maleColor:"hsl(131, 70%, 50%)",female:1020,femaleColor:"hsl(153, 70%, 50%)"},{age:"26-30",male:176,maleColor:"hsl(13, 70%, 50%)",female:304,femaleColor:"hsl(267, 70%, 50%)"},{age:"31-40",male:95,maleColor:"hsl(131, 70%, 50%)",female:258,femaleColor:"hsl(153, 70%, 50%)"},{age:"Over 40",male:83,maleColor:"hsl(13, 70%, 50%)",female:123,femaleColor:"hsl(267, 70%, 50%)"}],ZAt=({data:t})=>L.jsx(Qpe,{data:t,theme:{background:"black",text:{fontSize:18,fill:"#b0bec5"},axis:{legend:{text:{fontSize:30}}},labels:{text:{fontSize:15}}},keys:["male","female"],indexBy:"age",margin:{top:20,right:125,bottom:75,left:95},padding:.25,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"set2"},borderRadius:4,borderWidth:1,borderColor:{theme:"labels.text.fill"},axisTop:null,axisRight:null,axisBottom:{tickSize:2,tickPadding:2,tickRotation:0,legend:"Age",legendPosition:"middle",legendOffset:55,truncateTickAt:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Total Enrollment",legendPosition:"middle",legendOffset:-80,truncateTickAt:0},labelSkipWidth:8,labelSkipHeight:7,labelTextColor:"black",legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:-149,itemsSpacing:2,itemWidth:99,itemHeight:25,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],role:"application",ariaLabel:"Nivo bar chart demo",maxValue:4e3,enableLabel:!1,enableGridX:!1,enableGridY:!1}),JAt=()=>L.jsxs(L.Fragment,{children:[L.jsxs(Qn,{sx:{textAlign:"center",m:2,display:{xs:"none",sm:"block"}},children:[L.jsxs(En,{variant:"h6",gutterBottom:!0,sx:{textAlign:"left"},children:["Source:  ",L.jsx(Lu,{href:"https://www.laredo.edu/about/institutional-research-and-planning/_files/Students%20Demographics%20by%20Semester%20FALL%202023%20Nov%20171.pdf",target:"_blank",underline:"hover",children:"Laredo College Fall 2023 Data"})]}),L.jsx(En,{variant:"h6",gutterBottom:!0,sx:{textAlign:"left"},children:"This data provides an overview of the student population at Laredo College in Fall 2023, highlighting its diversity and educational preferences."}),L.jsxs(En,{variant:"h6",gutterBottom:!0,sx:{textAlign:"left"},children:[L.jsx("strong",{style:{color:"#009688"},children:" Gender Distribution: "})," There is a higher number of female students compared to male students, with females constituting over 57% of the total headcount."]}),L.jsxs(En,{variant:"h6",gutterBottom:!0,sx:{textAlign:"left"},children:[L.jsx("strong",{style:{color:"#009688"},children:"Enrollment Status: "}),"A significant majority of students are enrolled part-time, which may indicate that many students are balancing education with other commitments like work or family."]}),L.jsxs(En,{variant:"h6",gutterBottom:!0,sx:{textAlign:"left"},children:[L.jsx("strong",{style:{color:"#009688"},children:"Major Preferences:"})," Academic majors are the most popular choice among students, followed by vocational and tech-prep majors. This suggests a strong inclination towards academic and traditional educational paths."]}),L.jsxs(En,{variant:"h6",gutterBottom:!0,sx:{textAlign:"left"},children:[L.jsx("strong",{style:{color:"#009688"},children:" Age Diversity: "}),"The age distribution is varied, with the largest group being those aged under 18, followed closely by the 18-20 age group. The majority of students are in the traditional college age range, but there is also a notable presence of older students."]})]}),L.jsx(Qn,{sx:{height:75,color:"#f1f8e9",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"none",sm:"block"}},children:L.jsx(En,{sx:{pt:1},variant:"h3",gutterBottom:!0,children:"Enrollement Status"})}),L.jsx(Qn,{sx:{height:75,color:"#ffffff",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"block",sm:"none"}},children:L.jsxs(En,{sx:{pt:2},variant:"h4",gutterBottom:!0,children:["Please Rotate Phone ",L.jsx(XA,{})," or Enlarge Screen ",L.jsx(qA,{})]})}),L.jsx(Qn,{sx:{height:{sm:400,lg:800},width:"80%",color:"black",bgcolor:"white",display:{xs:"none",sm:"block"},aspectRatio:.99,m:"auto"},children:L.jsx(hAt,{data:fAt})}),L.jsx(Qn,{sx:{height:75,color:"#f1f8e9",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"none",sm:"block"},mt:10},children:L.jsx(En,{sx:{pt:2},variant:"h3",gutterBottom:!0,children:"Declared Major"})}),L.jsx(Qn,{sx:{height:{sm:400,lg:800},width:"80%",color:"black",bgcolor:"white",display:{xs:"none",sm:"block"},aspectRatio:.99,m:"auto"},children:L.jsx(qAt,{data:YAt})}),L.jsx(Qn,{sx:{height:75,color:"#f1f8e9",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"none",sm:"block"},mt:10},children:L.jsx(En,{sx:{pt:2},variant:"h3",gutterBottom:!0,children:"Age Distribution"})}),L.jsx(Qn,{sx:{height:{sm:400,lg:800},width:"80%",color:"black",bgcolor:"white",display:{xs:"none",sm:"block"},aspectRatio:.99,m:"auto"},children:L.jsx(ZAt,{data:KAt})})]});function QAt(){return L.jsxs(L.Fragment,{children:[L.jsx(DMe,{}),L.jsx(hee,{maxWidth:!1,disableGutters:!0,sx:{p:2,bgcolor:"black",color:"white"},children:L.jsxs(jve,{children:[L.jsx($o,{path:"/",element:L.jsx(PN,{})}),L.jsx($o,{path:"/home",element:L.jsx(PN,{})}),L.jsx($o,{path:"/projects",element:L.jsx(OMe,{})}),L.jsx($o,{path:"/jupyter-notebooks",element:L.jsx(kkt,{})}),L.jsx($o,{path:"/projects/ratings",element:L.jsx(PHe,{})}),L.jsx($o,{path:"/projects/lorenz",element:L.jsx(qtt,{})}),L.jsx($o,{path:"/projects/astar",element:L.jsx(Ztt,{})}),L.jsx($o,{path:"/projects/chaos",element:L.jsx(ent,{})}),L.jsx($o,{path:"/projects/spiral",element:L.jsx(rnt,{})}),L.jsx($o,{path:"/projects/mnist",element:L.jsx(Ekt,{})}),L.jsx($o,{path:"/projects/breakout",element:L.jsx(Akt,{})}),L.jsx($o,{path:"/projects/congress",element:L.jsx(zkt,{})}),L.jsx($o,{path:"/projects/college-demographics",element:L.jsx(JAt,{})}),L.jsx($o,{path:"*",element:L.jsx(PN,{})})]})})]})}L$.createRoot(document.getElementById("root")).render(L.jsx(wc.StrictMode,{children:L.jsx(Qve,{children:L.jsx(QAt,{})})}));
