function Dee(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ls(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Lee(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Oee={exports:{}},Sk={},Fee={exports:{}},tr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES=Symbol.for("react.element"),c1e=Symbol.for("react.portal"),u1e=Symbol.for("react.fragment"),d1e=Symbol.for("react.strict_mode"),f1e=Symbol.for("react.profiler"),h1e=Symbol.for("react.provider"),p1e=Symbol.for("react.context"),m1e=Symbol.for("react.forward_ref"),g1e=Symbol.for("react.suspense"),v1e=Symbol.for("react.memo"),y1e=Symbol.for("react.lazy"),YG=Symbol.iterator;function x1e(t){return t===null||typeof t!="object"?null:(t=YG&&t[YG]||t["@@iterator"],typeof t=="function"?t:null)}var Bee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uee=Object.assign,zee={};function Dy(t,e,n){this.props=t,this.context=e,this.refs=zee,this.updater=n||Bee}Dy.prototype.isReactComponent={};Dy.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dy.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vee(){}Vee.prototype=Dy.prototype;function b5(t,e,n){this.props=t,this.context=e,this.refs=zee,this.updater=n||Bee}var w5=b5.prototype=new Vee;w5.constructor=b5;Uee(w5,Dy.prototype);w5.isPureReactComponent=!0;var KG=Array.isArray,Wee=Object.prototype.hasOwnProperty,S5={current:null},Gee={key:!0,ref:!0,__self:!0,__source:!0};function Hee(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Wee.call(e,r)&&!Gee.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ES,type:t,key:s,ref:o,props:i,_owner:S5.current}}function b1e(t,e){return{$$typeof:ES,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _5(t){return typeof t=="object"&&t!==null&&t.$$typeof===ES}function w1e(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ZG=/\/+/g;function TN(t,e){return typeof t=="object"&&t!==null&&t.key!=null?w1e(""+t.key):e.toString(36)}function LE(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ES:case c1e:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+TN(o,0):r,KG(i)?(n="",t!=null&&(n=t.replace(ZG,"$&/")+"/"),LE(i,e,n,"",function(c){return c})):i!=null&&(_5(i)&&(i=b1e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ZG,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",KG(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+TN(s,a);o+=LE(s,e,n,l,i)}else if(l=x1e(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+TN(s,a++),o+=LE(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function LC(t,e,n){if(t==null)return t;var r=[],i=0;return LE(t,r,"","",function(s){return e.call(n,s,i++)}),r}function S1e(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ra={current:null},OE={transition:null},_1e={ReactCurrentDispatcher:ra,ReactCurrentBatchConfig:OE,ReactCurrentOwner:S5};tr.Children={map:LC,forEach:function(t,e,n){LC(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return LC(t,function(){e++}),e},toArray:function(t){return LC(t,function(e){return e})||[]},only:function(t){if(!_5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tr.Component=Dy;tr.Fragment=u1e;tr.Profiler=f1e;tr.PureComponent=b5;tr.StrictMode=d1e;tr.Suspense=g1e;tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_1e;tr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Uee({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=S5.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Wee.call(e,l)&&!Gee.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ES,type:t.type,key:i,ref:s,props:r,_owner:o}};tr.createContext=function(t){return t={$$typeof:p1e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:h1e,_context:t},t.Consumer=t};tr.createElement=Hee;tr.createFactory=function(t){var e=Hee.bind(null,t);return e.type=t,e};tr.createRef=function(){return{current:null}};tr.forwardRef=function(t){return{$$typeof:m1e,render:t}};tr.isValidElement=_5;tr.lazy=function(t){return{$$typeof:y1e,_payload:{_status:-1,_result:t},_init:S1e}};tr.memo=function(t,e){return{$$typeof:v1e,type:t,compare:e===void 0?null:e}};tr.startTransition=function(t){var e=OE.transition;OE.transition={};try{t()}finally{OE.transition=e}};tr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};tr.useCallback=function(t,e){return ra.current.useCallback(t,e)};tr.useContext=function(t){return ra.current.useContext(t)};tr.useDebugValue=function(){};tr.useDeferredValue=function(t){return ra.current.useDeferredValue(t)};tr.useEffect=function(t,e){return ra.current.useEffect(t,e)};tr.useId=function(){return ra.current.useId()};tr.useImperativeHandle=function(t,e,n){return ra.current.useImperativeHandle(t,e,n)};tr.useInsertionEffect=function(t,e){return ra.current.useInsertionEffect(t,e)};tr.useLayoutEffect=function(t,e){return ra.current.useLayoutEffect(t,e)};tr.useMemo=function(t,e){return ra.current.useMemo(t,e)};tr.useReducer=function(t,e,n){return ra.current.useReducer(t,e,n)};tr.useRef=function(t){return ra.current.useRef(t)};tr.useState=function(t){return ra.current.useState(t)};tr.useSyncExternalStore=function(t,e,n){return ra.current.useSyncExternalStore(t,e,n)};tr.useTransition=function(){return ra.current.useTransition()};tr.version="18.2.0";Fee.exports=tr;var R=Fee.exports;const $c=ls(R),wM=Dee({__proto__:null,default:$c},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1e=R,T1e=Symbol.for("react.element"),E1e=Symbol.for("react.fragment"),M1e=Object.prototype.hasOwnProperty,A1e=C1e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k1e={key:!0,ref:!0,__self:!0,__source:!0};function jee(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)M1e.call(e,r)&&!k1e.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:T1e,type:t,key:s,ref:o,props:i,_owner:A1e.current}}Sk.Fragment=E1e;Sk.jsx=jee;Sk.jsxs=jee;Oee.exports=Sk;var L=Oee.exports,TL={},Xee={exports:{}},pl={},qee={exports:{}},Yee={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,B){var V=D.length;D.push(B);e:for(;0<V;){var W=V-1>>>1,j=D[W];if(0<i(j,B))D[W]=B,D[V]=j,V=W;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var B=D[0],V=D.pop();if(V!==B){D[0]=V;e:for(var W=0,j=D.length,J=j>>>1;W<J;){var Q=2*(W+1)-1,te=D[Q],re=Q+1,se=D[re];if(0>i(te,V))re<j&&0>i(se,te)?(D[W]=se,D[re]=V,W=re):(D[W]=te,D[Q]=V,W=Q);else if(re<j&&0>i(se,V))D[W]=se,D[re]=V,W=re;else break e}}return B}function i(D,B){var V=D.sortIndex-B.sortIndex;return V!==0?V:D.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=D)r(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function S(D){if(v=!1,x(D),!p)if(n(l)!==null)p=!0,z(_);else{var B=n(c);B!==null&&X(S,B.startTime-D)}}function _(D,B){p=!1,v&&(v=!1,m(A),A=-1),h=!0;var V=f;try{for(x(B),d=n(l);d!==null&&(!(d.expirationTime>B)||D&&!P());){var W=d.callback;if(typeof W=="function"){d.callback=null,f=d.priorityLevel;var j=W(d.expirationTime<=B);B=t.unstable_now(),typeof j=="function"?d.callback=j:d===n(l)&&r(l),x(B)}else r(l);d=n(l)}if(d!==null)var J=!0;else{var Q=n(c);Q!==null&&X(S,Q.startTime-B),J=!1}return J}finally{d=null,f=V,h=!1}}var C=!1,T=null,A=-1,M=5,E=-1;function P(){return!(t.unstable_now()-E<M)}function N(){if(T!==null){var D=t.unstable_now();E=D;var B=!0;try{B=T(!0,D)}finally{B?F():(C=!1,T=null)}}else C=!1}var F;if(typeof y=="function")F=function(){y(N)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,O=$.port2;$.port1.onmessage=N,F=function(){O.postMessage(null)}}else F=function(){g(N,0)};function z(D){T=D,C||(C=!0,F())}function X(D,B){A=g(function(){D(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,z(_))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var V=f;f=B;try{return D()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,B){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var V=f;f=D;try{return B()}finally{f=V}},t.unstable_scheduleCallback=function(D,B,V){var W=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?W+V:W):V=W,D){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=V+j,D={id:u++,callback:B,priorityLevel:D,startTime:V,expirationTime:j,sortIndex:-1},V>W?(D.sortIndex=V,e(c,D),n(l)===null&&D===n(c)&&(v?(m(A),A=-1):v=!0,X(S,V-W))):(D.sortIndex=j,e(l,D),p||h||(p=!0,z(_))),D},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(D){var B=f;return function(){var V=f;f=B;try{return D.apply(this,arguments)}finally{f=V}}}})(Yee);qee.exports=Yee;var I1e=qee.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kee=R,ul=I1e;function St(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zee=new Set,Fb={};function bg(t,e){qv(t,e),qv(t+"Capture",e)}function qv(t,e){for(Fb[t]=e,t=0;t<e.length;t++)Zee.add(e[t])}var ef=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),EL=Object.prototype.hasOwnProperty,R1e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JG={},QG={};function P1e(t){return EL.call(QG,t)?!0:EL.call(JG,t)?!1:R1e.test(t)?QG[t]=!0:(JG[t]=!0,!1)}function N1e(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $1e(t,e,n,r){if(e===null||typeof e>"u"||N1e(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ia(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qs[t]=new ia(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qs[e]=new ia(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qs[t]=new ia(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qs[t]=new ia(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qs[t]=new ia(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qs[t]=new ia(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qs[t]=new ia(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qs[t]=new ia(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qs[t]=new ia(t,5,!1,t.toLowerCase(),null,!1,!1)});var C5=/[\-:]([a-z])/g;function T5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(C5,T5);Qs[e]=new ia(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(C5,T5);Qs[e]=new ia(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(C5,T5);Qs[e]=new ia(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qs[t]=new ia(t,1,!1,t.toLowerCase(),null,!1,!1)});Qs.xlinkHref=new ia("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qs[t]=new ia(t,1,!1,t.toLowerCase(),null,!0,!0)});function E5(t,e,n,r){var i=Qs.hasOwnProperty(e)?Qs[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($1e(e,n,i,r)&&(n=null),r||i===null?P1e(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hf=Kee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,OC=Symbol.for("react.element"),J0=Symbol.for("react.portal"),Q0=Symbol.for("react.fragment"),M5=Symbol.for("react.strict_mode"),ML=Symbol.for("react.profiler"),Jee=Symbol.for("react.provider"),Qee=Symbol.for("react.context"),A5=Symbol.for("react.forward_ref"),AL=Symbol.for("react.suspense"),kL=Symbol.for("react.suspense_list"),k5=Symbol.for("react.memo"),Vf=Symbol.for("react.lazy"),ete=Symbol.for("react.offscreen"),e9=Symbol.iterator;function Jx(t){return t===null||typeof t!="object"?null:(t=e9&&t[e9]||t["@@iterator"],typeof t=="function"?t:null)}var bi=Object.assign,EN;function U1(t){if(EN===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);EN=e&&e[1]||""}return`
`+EN+t}var MN=!1;function AN(t,e){if(!t||MN)return"";MN=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{MN=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?U1(t):""}function D1e(t){switch(t.tag){case 5:return U1(t.type);case 16:return U1("Lazy");case 13:return U1("Suspense");case 19:return U1("SuspenseList");case 0:case 2:case 15:return t=AN(t.type,!1),t;case 11:return t=AN(t.type.render,!1),t;case 1:return t=AN(t.type,!0),t;default:return""}}function IL(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Q0:return"Fragment";case J0:return"Portal";case ML:return"Profiler";case M5:return"StrictMode";case AL:return"Suspense";case kL:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qee:return(t.displayName||"Context")+".Consumer";case Jee:return(t._context.displayName||"Context")+".Provider";case A5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k5:return e=t.displayName||null,e!==null?e:IL(t.type)||"Memo";case Vf:e=t._payload,t=t._init;try{return IL(t(e))}catch{}}return null}function L1e(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return IL(e);case 8:return e===M5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sh(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tte(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function O1e(t){var e=tte(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function FC(t){t._valueTracker||(t._valueTracker=O1e(t))}function nte(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tte(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function SM(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function RL(t,e){var n=e.checked;return bi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function t9(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Sh(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rte(t,e){e=e.checked,e!=null&&E5(t,"checked",e,!1)}function PL(t,e){rte(t,e);var n=Sh(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?NL(t,e.type,n):e.hasOwnProperty("defaultValue")&&NL(t,e.type,Sh(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function n9(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function NL(t,e,n){(e!=="number"||SM(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var z1=Array.isArray;function Tv(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Sh(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $L(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(St(91));return bi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function r9(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(St(92));if(z1(n)){if(1<n.length)throw Error(St(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Sh(n)}}function ite(t,e){var n=Sh(e.value),r=Sh(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function i9(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ste(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function DL(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ste(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var BC,ote=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(BC=BC||document.createElement("div"),BC.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=BC.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bb(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F1e=["Webkit","ms","Moz","O"];Object.keys(tb).forEach(function(t){F1e.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tb[e]=tb[t]})});function ate(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||tb.hasOwnProperty(t)&&tb[t]?(""+e).trim():e+"px"}function lte(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ate(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var B1e=bi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function LL(t,e){if(e){if(B1e[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(St(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(St(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(St(61))}if(e.style!=null&&typeof e.style!="object")throw Error(St(62))}}function OL(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var FL=null;function I5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var BL=null,Ev=null,Mv=null;function s9(t){if(t=kS(t)){if(typeof BL!="function")throw Error(St(280));var e=t.stateNode;e&&(e=Mk(e),BL(t.stateNode,t.type,e))}}function cte(t){Ev?Mv?Mv.push(t):Mv=[t]:Ev=t}function ute(){if(Ev){var t=Ev,e=Mv;if(Mv=Ev=null,s9(t),e)for(t=0;t<e.length;t++)s9(e[t])}}function dte(t,e){return t(e)}function fte(){}var kN=!1;function hte(t,e,n){if(kN)return t(e,n);kN=!0;try{return dte(t,e,n)}finally{kN=!1,(Ev!==null||Mv!==null)&&(fte(),ute())}}function Ub(t,e){var n=t.stateNode;if(n===null)return null;var r=Mk(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(St(231,e,typeof n));return n}var UL=!1;if(ef)try{var Qx={};Object.defineProperty(Qx,"passive",{get:function(){UL=!0}}),window.addEventListener("test",Qx,Qx),window.removeEventListener("test",Qx,Qx)}catch{UL=!1}function U1e(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var nb=!1,_M=null,CM=!1,zL=null,z1e={onError:function(t){nb=!0,_M=t}};function V1e(t,e,n,r,i,s,o,a,l){nb=!1,_M=null,U1e.apply(z1e,arguments)}function W1e(t,e,n,r,i,s,o,a,l){if(V1e.apply(this,arguments),nb){if(nb){var c=_M;nb=!1,_M=null}else throw Error(St(198));CM||(CM=!0,zL=c)}}function wg(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pte(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function o9(t){if(wg(t)!==t)throw Error(St(188))}function G1e(t){var e=t.alternate;if(!e){if(e=wg(t),e===null)throw Error(St(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return o9(i),t;if(s===r)return o9(i),e;s=s.sibling}throw Error(St(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(St(189))}}if(n.alternate!==r)throw Error(St(190))}if(n.tag!==3)throw Error(St(188));return n.stateNode.current===n?t:e}function mte(t){return t=G1e(t),t!==null?gte(t):null}function gte(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gte(t);if(e!==null)return e;t=t.sibling}return null}var vte=ul.unstable_scheduleCallback,a9=ul.unstable_cancelCallback,H1e=ul.unstable_shouldYield,j1e=ul.unstable_requestPaint,Wi=ul.unstable_now,X1e=ul.unstable_getCurrentPriorityLevel,R5=ul.unstable_ImmediatePriority,yte=ul.unstable_UserBlockingPriority,TM=ul.unstable_NormalPriority,q1e=ul.unstable_LowPriority,xte=ul.unstable_IdlePriority,_k=null,Ru=null;function Y1e(t){if(Ru&&typeof Ru.onCommitFiberRoot=="function")try{Ru.onCommitFiberRoot(_k,t,void 0,(t.current.flags&128)===128)}catch{}}var Bc=Math.clz32?Math.clz32:J1e,K1e=Math.log,Z1e=Math.LN2;function J1e(t){return t>>>=0,t===0?32:31-(K1e(t)/Z1e|0)|0}var UC=64,zC=4194304;function V1(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function EM(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=V1(a):(s&=o,s!==0&&(r=V1(s)))}else o=n&~i,o!==0?r=V1(o):s!==0&&(r=V1(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bc(e),i=1<<n,r|=t[n],e&=~i;return r}function Q1e(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ebe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Bc(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Q1e(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function VL(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bte(){var t=UC;return UC<<=1,!(UC&4194240)&&(UC=64),t}function IN(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function MS(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bc(e),t[e]=n}function tbe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Bc(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function P5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bc(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ar=0;function wte(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ste,N5,_te,Cte,Tte,WL=!1,VC=[],ih=null,sh=null,oh=null,zb=new Map,Vb=new Map,Hf=[],nbe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l9(t,e){switch(t){case"focusin":case"focusout":ih=null;break;case"dragenter":case"dragleave":sh=null;break;case"mouseover":case"mouseout":oh=null;break;case"pointerover":case"pointerout":zb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vb.delete(e.pointerId)}}function e1(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=kS(e),e!==null&&N5(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function rbe(t,e,n,r,i){switch(e){case"focusin":return ih=e1(ih,t,e,n,r,i),!0;case"dragenter":return sh=e1(sh,t,e,n,r,i),!0;case"mouseover":return oh=e1(oh,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return zb.set(s,e1(zb.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Vb.set(s,e1(Vb.get(s)||null,t,e,n,r,i)),!0}return!1}function Ete(t){var e=sm(t.target);if(e!==null){var n=wg(e);if(n!==null){if(e=n.tag,e===13){if(e=pte(n),e!==null){t.blockedOn=e,Tte(t.priority,function(){_te(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function FE(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=GL(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);FL=r,n.target.dispatchEvent(r),FL=null}else return e=kS(n),e!==null&&N5(e),t.blockedOn=n,!1;e.shift()}return!0}function c9(t,e,n){FE(t)&&n.delete(e)}function ibe(){WL=!1,ih!==null&&FE(ih)&&(ih=null),sh!==null&&FE(sh)&&(sh=null),oh!==null&&FE(oh)&&(oh=null),zb.forEach(c9),Vb.forEach(c9)}function t1(t,e){t.blockedOn===e&&(t.blockedOn=null,WL||(WL=!0,ul.unstable_scheduleCallback(ul.unstable_NormalPriority,ibe)))}function Wb(t){function e(i){return t1(i,t)}if(0<VC.length){t1(VC[0],t);for(var n=1;n<VC.length;n++){var r=VC[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ih!==null&&t1(ih,t),sh!==null&&t1(sh,t),oh!==null&&t1(oh,t),zb.forEach(e),Vb.forEach(e),n=0;n<Hf.length;n++)r=Hf[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hf.length&&(n=Hf[0],n.blockedOn===null);)Ete(n),n.blockedOn===null&&Hf.shift()}var Av=hf.ReactCurrentBatchConfig,MM=!0;function sbe(t,e,n,r){var i=Ar,s=Av.transition;Av.transition=null;try{Ar=1,$5(t,e,n,r)}finally{Ar=i,Av.transition=s}}function obe(t,e,n,r){var i=Ar,s=Av.transition;Av.transition=null;try{Ar=4,$5(t,e,n,r)}finally{Ar=i,Av.transition=s}}function $5(t,e,n,r){if(MM){var i=GL(t,e,n,r);if(i===null)UN(t,e,r,AM,n),l9(t,r);else if(rbe(i,t,e,n,r))r.stopPropagation();else if(l9(t,r),e&4&&-1<nbe.indexOf(t)){for(;i!==null;){var s=kS(i);if(s!==null&&Ste(s),s=GL(t,e,n,r),s===null&&UN(t,e,r,AM,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else UN(t,e,r,null,n)}}var AM=null;function GL(t,e,n,r){if(AM=null,t=I5(r),t=sm(t),t!==null)if(e=wg(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pte(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return AM=t,null}function Mte(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X1e()){case R5:return 1;case yte:return 4;case TM:case q1e:return 16;case xte:return 536870912;default:return 16}default:return 16}}var Yf=null,D5=null,BE=null;function Ate(){if(BE)return BE;var t,e=D5,n=e.length,r,i="value"in Yf?Yf.value:Yf.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return BE=i.slice(t,1<r?1-r:void 0)}function UE(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function WC(){return!0}function u9(){return!1}function ml(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?WC:u9,this.isPropagationStopped=u9,this}return bi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=WC)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=WC)},persist:function(){},isPersistent:WC}),e}var Ly={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L5=ml(Ly),AS=bi({},Ly,{view:0,detail:0}),abe=ml(AS),RN,PN,n1,Ck=bi({},AS,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:O5,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==n1&&(n1&&t.type==="mousemove"?(RN=t.screenX-n1.screenX,PN=t.screenY-n1.screenY):PN=RN=0,n1=t),RN)},movementY:function(t){return"movementY"in t?t.movementY:PN}}),d9=ml(Ck),lbe=bi({},Ck,{dataTransfer:0}),cbe=ml(lbe),ube=bi({},AS,{relatedTarget:0}),NN=ml(ube),dbe=bi({},Ly,{animationName:0,elapsedTime:0,pseudoElement:0}),fbe=ml(dbe),hbe=bi({},Ly,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pbe=ml(hbe),mbe=bi({},Ly,{data:0}),f9=ml(mbe),gbe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vbe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ybe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xbe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ybe[t])?!!e[t]:!1}function O5(){return xbe}var bbe=bi({},AS,{key:function(t){if(t.key){var e=gbe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=UE(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vbe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:O5,charCode:function(t){return t.type==="keypress"?UE(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?UE(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wbe=ml(bbe),Sbe=bi({},Ck,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h9=ml(Sbe),_be=bi({},AS,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:O5}),Cbe=ml(_be),Tbe=bi({},Ly,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ebe=ml(Tbe),Mbe=bi({},Ck,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Abe=ml(Mbe),kbe=[9,13,27,32],F5=ef&&"CompositionEvent"in window,rb=null;ef&&"documentMode"in document&&(rb=document.documentMode);var Ibe=ef&&"TextEvent"in window&&!rb,kte=ef&&(!F5||rb&&8<rb&&11>=rb),p9=" ",m9=!1;function Ite(t,e){switch(t){case"keyup":return kbe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rte(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ev=!1;function Rbe(t,e){switch(t){case"compositionend":return Rte(e);case"keypress":return e.which!==32?null:(m9=!0,p9);case"textInput":return t=e.data,t===p9&&m9?null:t;default:return null}}function Pbe(t,e){if(ev)return t==="compositionend"||!F5&&Ite(t,e)?(t=Ate(),BE=D5=Yf=null,ev=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kte&&e.locale!=="ko"?null:e.data;default:return null}}var Nbe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g9(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Nbe[t.type]:e==="textarea"}function Pte(t,e,n,r){cte(r),e=kM(e,"onChange"),0<e.length&&(n=new L5("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ib=null,Gb=null;function $be(t){Wte(t,0)}function Tk(t){var e=rv(t);if(nte(e))return t}function Dbe(t,e){if(t==="change")return e}var Nte=!1;if(ef){var $N;if(ef){var DN="oninput"in document;if(!DN){var v9=document.createElement("div");v9.setAttribute("oninput","return;"),DN=typeof v9.oninput=="function"}$N=DN}else $N=!1;Nte=$N&&(!document.documentMode||9<document.documentMode)}function y9(){ib&&(ib.detachEvent("onpropertychange",$te),Gb=ib=null)}function $te(t){if(t.propertyName==="value"&&Tk(Gb)){var e=[];Pte(e,Gb,t,I5(t)),hte($be,e)}}function Lbe(t,e,n){t==="focusin"?(y9(),ib=e,Gb=n,ib.attachEvent("onpropertychange",$te)):t==="focusout"&&y9()}function Obe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tk(Gb)}function Fbe(t,e){if(t==="click")return Tk(e)}function Bbe(t,e){if(t==="input"||t==="change")return Tk(e)}function Ube(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hc=typeof Object.is=="function"?Object.is:Ube;function Hb(t,e){if(Hc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!EL.call(e,i)||!Hc(t[i],e[i]))return!1}return!0}function x9(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function b9(t,e){var n=x9(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=x9(n)}}function Dte(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dte(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Lte(){for(var t=window,e=SM();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=SM(t.document)}return e}function B5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zbe(t){var e=Lte(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Dte(n.ownerDocument.documentElement,n)){if(r!==null&&B5(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=b9(n,s);var o=b9(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Vbe=ef&&"documentMode"in document&&11>=document.documentMode,tv=null,HL=null,sb=null,jL=!1;function w9(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jL||tv==null||tv!==SM(r)||(r=tv,"selectionStart"in r&&B5(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sb&&Hb(sb,r)||(sb=r,r=kM(HL,"onSelect"),0<r.length&&(e=new L5("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=tv)))}function GC(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nv={animationend:GC("Animation","AnimationEnd"),animationiteration:GC("Animation","AnimationIteration"),animationstart:GC("Animation","AnimationStart"),transitionend:GC("Transition","TransitionEnd")},LN={},Ote={};ef&&(Ote=document.createElement("div").style,"AnimationEvent"in window||(delete nv.animationend.animation,delete nv.animationiteration.animation,delete nv.animationstart.animation),"TransitionEvent"in window||delete nv.transitionend.transition);function Ek(t){if(LN[t])return LN[t];if(!nv[t])return t;var e=nv[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ote)return LN[t]=e[n];return t}var Fte=Ek("animationend"),Bte=Ek("animationiteration"),Ute=Ek("animationstart"),zte=Ek("transitionend"),Vte=new Map,S9="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zh(t,e){Vte.set(t,e),bg(e,[t])}for(var ON=0;ON<S9.length;ON++){var FN=S9[ON],Wbe=FN.toLowerCase(),Gbe=FN[0].toUpperCase()+FN.slice(1);zh(Wbe,"on"+Gbe)}zh(Fte,"onAnimationEnd");zh(Bte,"onAnimationIteration");zh(Ute,"onAnimationStart");zh("dblclick","onDoubleClick");zh("focusin","onFocus");zh("focusout","onBlur");zh(zte,"onTransitionEnd");qv("onMouseEnter",["mouseout","mouseover"]);qv("onMouseLeave",["mouseout","mouseover"]);qv("onPointerEnter",["pointerout","pointerover"]);qv("onPointerLeave",["pointerout","pointerover"]);bg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bg("onBeforeInput",["compositionend","keypress","textInput","paste"]);bg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var W1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hbe=new Set("cancel close invalid load scroll toggle".split(" ").concat(W1));function _9(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,W1e(r,e,void 0,t),t.currentTarget=null}function Wte(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;_9(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;_9(i,a,c),s=l}}}if(CM)throw t=zL,CM=!1,zL=null,t}function Jr(t,e){var n=e[ZL];n===void 0&&(n=e[ZL]=new Set);var r=t+"__bubble";n.has(r)||(Gte(e,t,2,!1),n.add(r))}function BN(t,e,n){var r=0;e&&(r|=4),Gte(n,t,r,e)}var HC="_reactListening"+Math.random().toString(36).slice(2);function jb(t){if(!t[HC]){t[HC]=!0,Zee.forEach(function(n){n!=="selectionchange"&&(Hbe.has(n)||BN(n,!1,t),BN(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[HC]||(e[HC]=!0,BN("selectionchange",!1,e))}}function Gte(t,e,n,r){switch(Mte(e)){case 1:var i=sbe;break;case 4:i=obe;break;default:i=$5}n=i.bind(null,e,n,t),i=void 0,!UL||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function UN(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=sm(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}hte(function(){var c=s,u=I5(n),d=[];e:{var f=Vte.get(t);if(f!==void 0){var h=L5,p=t;switch(t){case"keypress":if(UE(n)===0)break e;case"keydown":case"keyup":h=wbe;break;case"focusin":p="focus",h=NN;break;case"focusout":p="blur",h=NN;break;case"beforeblur":case"afterblur":h=NN;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=d9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=cbe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Cbe;break;case Fte:case Bte:case Ute:h=fbe;break;case zte:h=Ebe;break;case"scroll":h=abe;break;case"wheel":h=Abe;break;case"copy":case"cut":case"paste":h=pbe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=h9}var v=(e&4)!==0,g=!v&&t==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var y=c,x;y!==null;){x=y;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,m!==null&&(S=Ub(y,m),S!=null&&v.push(Xb(y,S,x)))),g)break;y=y.return}0<v.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==FL&&(p=n.relatedTarget||n.fromElement)&&(sm(p)||p[tf]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?sm(p):null,p!==null&&(g=wg(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(v=d9,S="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=h9,S="onPointerLeave",m="onPointerEnter",y="pointer"),g=h==null?f:rv(h),x=p==null?f:rv(p),f=new v(S,y+"leave",h,n,u),f.target=g,f.relatedTarget=x,S=null,sm(u)===c&&(v=new v(m,y+"enter",p,n,u),v.target=x,v.relatedTarget=g,S=v),g=S,h&&p)t:{for(v=h,m=p,y=0,x=v;x;x=l0(x))y++;for(x=0,S=m;S;S=l0(S))x++;for(;0<y-x;)v=l0(v),y--;for(;0<x-y;)m=l0(m),x--;for(;y--;){if(v===m||m!==null&&v===m.alternate)break t;v=l0(v),m=l0(m)}v=null}else v=null;h!==null&&C9(d,f,h,v,!1),p!==null&&g!==null&&C9(d,g,p,v,!0)}}e:{if(f=c?rv(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=Dbe;else if(g9(f))if(Nte)_=Bbe;else{_=Obe;var C=Lbe}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Fbe);if(_&&(_=_(t,c))){Pte(d,_,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&NL(f,"number",f.value)}switch(C=c?rv(c):window,t){case"focusin":(g9(C)||C.contentEditable==="true")&&(tv=C,HL=c,sb=null);break;case"focusout":sb=HL=tv=null;break;case"mousedown":jL=!0;break;case"contextmenu":case"mouseup":case"dragend":jL=!1,w9(d,n,u);break;case"selectionchange":if(Vbe)break;case"keydown":case"keyup":w9(d,n,u)}var T;if(F5)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ev?Ite(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(kte&&n.locale!=="ko"&&(ev||A!=="onCompositionStart"?A==="onCompositionEnd"&&ev&&(T=Ate()):(Yf=u,D5="value"in Yf?Yf.value:Yf.textContent,ev=!0)),C=kM(c,A),0<C.length&&(A=new f9(A,t,null,n,u),d.push({event:A,listeners:C}),T?A.data=T:(T=Rte(n),T!==null&&(A.data=T)))),(T=Ibe?Rbe(t,n):Pbe(t,n))&&(c=kM(c,"onBeforeInput"),0<c.length&&(u=new f9("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=T))}Wte(d,e)})}function Xb(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kM(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ub(t,n),s!=null&&r.unshift(Xb(t,s,i)),s=Ub(t,e),s!=null&&r.push(Xb(t,s,i))),t=t.return}return r}function l0(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function C9(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ub(n,s),l!=null&&o.unshift(Xb(n,l,a))):i||(l=Ub(n,s),l!=null&&o.push(Xb(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jbe=/\r\n?/g,Xbe=/\u0000|\uFFFD/g;function T9(t){return(typeof t=="string"?t:""+t).replace(jbe,`
`).replace(Xbe,"")}function jC(t,e,n){if(e=T9(e),T9(t)!==e&&n)throw Error(St(425))}function IM(){}var XL=null,qL=null;function YL(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var KL=typeof setTimeout=="function"?setTimeout:void 0,qbe=typeof clearTimeout=="function"?clearTimeout:void 0,E9=typeof Promise=="function"?Promise:void 0,Ybe=typeof queueMicrotask=="function"?queueMicrotask:typeof E9<"u"?function(t){return E9.resolve(null).then(t).catch(Kbe)}:KL;function Kbe(t){setTimeout(function(){throw t})}function zN(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Wb(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wb(e)}function ah(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function M9(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oy=Math.random().toString(36).slice(2),Cu="__reactFiber$"+Oy,qb="__reactProps$"+Oy,tf="__reactContainer$"+Oy,ZL="__reactEvents$"+Oy,Zbe="__reactListeners$"+Oy,Jbe="__reactHandles$"+Oy;function sm(t){var e=t[Cu];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tf]||n[Cu]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=M9(t);t!==null;){if(n=t[Cu])return n;t=M9(t)}return e}t=n,n=t.parentNode}return null}function kS(t){return t=t[Cu]||t[tf],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rv(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(St(33))}function Mk(t){return t[qb]||null}var JL=[],iv=-1;function Vh(t){return{current:t}}function ni(t){0>iv||(t.current=JL[iv],JL[iv]=null,iv--)}function qr(t,e){iv++,JL[iv]=t.current,t.current=e}var _h={},No=Vh(_h),Ta=Vh(!1),Um=_h;function Yv(t,e){var n=t.type.contextTypes;if(!n)return _h;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ea(t){return t=t.childContextTypes,t!=null}function RM(){ni(Ta),ni(No)}function A9(t,e,n){if(No.current!==_h)throw Error(St(168));qr(No,e),qr(Ta,n)}function Hte(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(St(108,L1e(t)||"Unknown",i));return bi({},n,r)}function PM(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_h,Um=No.current,qr(No,t),qr(Ta,Ta.current),!0}function k9(t,e,n){var r=t.stateNode;if(!r)throw Error(St(169));n?(t=Hte(t,e,Um),r.__reactInternalMemoizedMergedChildContext=t,ni(Ta),ni(No),qr(No,t)):ni(Ta),qr(Ta,n)}var kd=null,Ak=!1,VN=!1;function jte(t){kd===null?kd=[t]:kd.push(t)}function Qbe(t){Ak=!0,jte(t)}function Wh(){if(!VN&&kd!==null){VN=!0;var t=0,e=Ar;try{var n=kd;for(Ar=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kd=null,Ak=!1}catch(i){throw kd!==null&&(kd=kd.slice(t+1)),vte(R5,Wh),i}finally{Ar=e,VN=!1}}return null}var sv=[],ov=0,NM=null,$M=0,$l=[],Dl=0,zm=null,Ld=1,Od="";function Vp(t,e){sv[ov++]=$M,sv[ov++]=NM,NM=t,$M=e}function Xte(t,e,n){$l[Dl++]=Ld,$l[Dl++]=Od,$l[Dl++]=zm,zm=t;var r=Ld;t=Od;var i=32-Bc(r)-1;r&=~(1<<i),n+=1;var s=32-Bc(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ld=1<<32-Bc(e)+i|n<<i|r,Od=s+t}else Ld=1<<s|n<<i|r,Od=t}function U5(t){t.return!==null&&(Vp(t,1),Xte(t,1,0))}function z5(t){for(;t===NM;)NM=sv[--ov],sv[ov]=null,$M=sv[--ov],sv[ov]=null;for(;t===zm;)zm=$l[--Dl],$l[Dl]=null,Od=$l[--Dl],$l[Dl]=null,Ld=$l[--Dl],$l[Dl]=null}var ol=null,nl=null,li=!1,Mc=null;function qte(t,e){var n=zl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function I9(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ol=t,nl=ah(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ol=t,nl=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zm!==null?{id:Ld,overflow:Od}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zl(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ol=t,nl=null,!0):!1;default:return!1}}function QL(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eO(t){if(li){var e=nl;if(e){var n=e;if(!I9(t,e)){if(QL(t))throw Error(St(418));e=ah(n.nextSibling);var r=ol;e&&I9(t,e)?qte(r,n):(t.flags=t.flags&-4097|2,li=!1,ol=t)}}else{if(QL(t))throw Error(St(418));t.flags=t.flags&-4097|2,li=!1,ol=t}}}function R9(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ol=t}function XC(t){if(t!==ol)return!1;if(!li)return R9(t),li=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!YL(t.type,t.memoizedProps)),e&&(e=nl)){if(QL(t))throw Yte(),Error(St(418));for(;e;)qte(t,e),e=ah(e.nextSibling)}if(R9(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(St(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nl=ah(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nl=null}}else nl=ol?ah(t.stateNode.nextSibling):null;return!0}function Yte(){for(var t=nl;t;)t=ah(t.nextSibling)}function Kv(){nl=ol=null,li=!1}function V5(t){Mc===null?Mc=[t]:Mc.push(t)}var ewe=hf.ReactCurrentBatchConfig;function Cc(t,e){if(t&&t.defaultProps){e=bi({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var DM=Vh(null),LM=null,av=null,W5=null;function G5(){W5=av=LM=null}function H5(t){var e=DM.current;ni(DM),t._currentValue=e}function tO(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function kv(t,e){LM=t,W5=av=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wa=!0),t.firstContext=null)}function Jl(t){var e=t._currentValue;if(W5!==t)if(t={context:t,memoizedValue:e,next:null},av===null){if(LM===null)throw Error(St(308));av=t,LM.dependencies={lanes:0,firstContext:t}}else av=av.next=t;return e}var om=null;function j5(t){om===null?om=[t]:om.push(t)}function Kte(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,j5(e)):(n.next=i.next,i.next=n),e.interleaved=n,nf(t,r)}function nf(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wf=!1;function X5(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zte(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xd(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,nf(t,n)}return i=r.interleaved,i===null?(e.next=e,j5(r)):(e.next=i.next,i.next=e),r.interleaved=e,nf(t,n)}function zE(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,P5(t,n)}}function P9(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function OM(t,e,n,r){var i=t.updateQueue;Wf=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,v=a;switch(f=e,h=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=bi({},d,f);break e;case 2:Wf=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Wm|=o,t.lanes=o,t.memoizedState=d}}function N9(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(St(191,i));i.call(r)}}}var Jte=new Kee.Component().refs;function nO(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:bi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kk={isMounted:function(t){return(t=t._reactInternals)?wg(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jo(),i=uh(t),s=Xd(r,i);s.payload=e,n!=null&&(s.callback=n),e=lh(t,s,i),e!==null&&(Uc(e,t,i,r),zE(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jo(),i=uh(t),s=Xd(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=lh(t,s,i),e!==null&&(Uc(e,t,i,r),zE(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jo(),r=uh(t),i=Xd(n,r);i.tag=2,e!=null&&(i.callback=e),e=lh(t,i,r),e!==null&&(Uc(e,t,r,n),zE(e,t,r))}};function $9(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Hb(n,r)||!Hb(i,s):!0}function Qte(t,e,n){var r=!1,i=_h,s=e.contextType;return typeof s=="object"&&s!==null?s=Jl(s):(i=Ea(e)?Um:No.current,r=e.contextTypes,s=(r=r!=null)?Yv(t,i):_h),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kk,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function D9(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kk.enqueueReplaceState(e,e.state,null)}function rO(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Jte,X5(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Jl(s):(s=Ea(e)?Um:No.current,i.context=Yv(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(nO(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&kk.enqueueReplaceState(i,i.state,null),OM(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function r1(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(St(309));var r=n.stateNode}if(!r)throw Error(St(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Jte&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(St(284));if(!n._owner)throw Error(St(290,t))}return t}function qC(t,e){throw t=Object.prototype.toString.call(e),Error(St(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function L9(t){var e=t._init;return e(t._payload)}function ene(t){function e(m,y){if(t){var x=m.deletions;x===null?(m.deletions=[y],m.flags|=16):x.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=dh(m,y),m.index=0,m.sibling=null,m}function s(m,y,x){return m.index=x,t?(x=m.alternate,x!==null?(x=x.index,x<y?(m.flags|=2,y):x):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,y,x,S){return y===null||y.tag!==6?(y=YN(x,m.mode,S),y.return=m,y):(y=i(y,x),y.return=m,y)}function l(m,y,x,S){var _=x.type;return _===Q0?u(m,y,x.props.children,S,x.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Vf&&L9(_)===y.type)?(S=i(y,x.props),S.ref=r1(m,y,x),S.return=m,S):(S=XE(x.type,x.key,x.props,null,m.mode,S),S.ref=r1(m,y,x),S.return=m,S)}function c(m,y,x,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=KN(x,m.mode,S),y.return=m,y):(y=i(y,x.children||[]),y.return=m,y)}function u(m,y,x,S,_){return y===null||y.tag!==7?(y=_m(x,m.mode,S,_),y.return=m,y):(y=i(y,x),y.return=m,y)}function d(m,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=YN(""+y,m.mode,x),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case OC:return x=XE(y.type,y.key,y.props,null,m.mode,x),x.ref=r1(m,null,y),x.return=m,x;case J0:return y=KN(y,m.mode,x),y.return=m,y;case Vf:var S=y._init;return d(m,S(y._payload),x)}if(z1(y)||Jx(y))return y=_m(y,m.mode,x,null),y.return=m,y;qC(m,y)}return null}function f(m,y,x,S){var _=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(m,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case OC:return x.key===_?l(m,y,x,S):null;case J0:return x.key===_?c(m,y,x,S):null;case Vf:return _=x._init,f(m,y,_(x._payload),S)}if(z1(x)||Jx(x))return _!==null?null:u(m,y,x,S,null);qC(m,x)}return null}function h(m,y,x,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(x)||null,a(y,m,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case OC:return m=m.get(S.key===null?x:S.key)||null,l(y,m,S,_);case J0:return m=m.get(S.key===null?x:S.key)||null,c(y,m,S,_);case Vf:var C=S._init;return h(m,y,x,C(S._payload),_)}if(z1(S)||Jx(S))return m=m.get(x)||null,u(y,m,S,_,null);qC(y,S)}return null}function p(m,y,x,S){for(var _=null,C=null,T=y,A=y=0,M=null;T!==null&&A<x.length;A++){T.index>A?(M=T,T=null):M=T.sibling;var E=f(m,T,x[A],S);if(E===null){T===null&&(T=M);break}t&&T&&E.alternate===null&&e(m,T),y=s(E,y,A),C===null?_=E:C.sibling=E,C=E,T=M}if(A===x.length)return n(m,T),li&&Vp(m,A),_;if(T===null){for(;A<x.length;A++)T=d(m,x[A],S),T!==null&&(y=s(T,y,A),C===null?_=T:C.sibling=T,C=T);return li&&Vp(m,A),_}for(T=r(m,T);A<x.length;A++)M=h(T,m,A,x[A],S),M!==null&&(t&&M.alternate!==null&&T.delete(M.key===null?A:M.key),y=s(M,y,A),C===null?_=M:C.sibling=M,C=M);return t&&T.forEach(function(P){return e(m,P)}),li&&Vp(m,A),_}function v(m,y,x,S){var _=Jx(x);if(typeof _!="function")throw Error(St(150));if(x=_.call(x),x==null)throw Error(St(151));for(var C=_=null,T=y,A=y=0,M=null,E=x.next();T!==null&&!E.done;A++,E=x.next()){T.index>A?(M=T,T=null):M=T.sibling;var P=f(m,T,E.value,S);if(P===null){T===null&&(T=M);break}t&&T&&P.alternate===null&&e(m,T),y=s(P,y,A),C===null?_=P:C.sibling=P,C=P,T=M}if(E.done)return n(m,T),li&&Vp(m,A),_;if(T===null){for(;!E.done;A++,E=x.next())E=d(m,E.value,S),E!==null&&(y=s(E,y,A),C===null?_=E:C.sibling=E,C=E);return li&&Vp(m,A),_}for(T=r(m,T);!E.done;A++,E=x.next())E=h(T,m,A,E.value,S),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?A:E.key),y=s(E,y,A),C===null?_=E:C.sibling=E,C=E);return t&&T.forEach(function(N){return e(m,N)}),li&&Vp(m,A),_}function g(m,y,x,S){if(typeof x=="object"&&x!==null&&x.type===Q0&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case OC:e:{for(var _=x.key,C=y;C!==null;){if(C.key===_){if(_=x.type,_===Q0){if(C.tag===7){n(m,C.sibling),y=i(C,x.props.children),y.return=m,m=y;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Vf&&L9(_)===C.type){n(m,C.sibling),y=i(C,x.props),y.ref=r1(m,C,x),y.return=m,m=y;break e}n(m,C);break}else e(m,C);C=C.sibling}x.type===Q0?(y=_m(x.props.children,m.mode,S,x.key),y.return=m,m=y):(S=XE(x.type,x.key,x.props,null,m.mode,S),S.ref=r1(m,y,x),S.return=m,m=S)}return o(m);case J0:e:{for(C=x.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(m,y.sibling),y=i(y,x.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=KN(x,m.mode,S),y.return=m,m=y}return o(m);case Vf:return C=x._init,g(m,y,C(x._payload),S)}if(z1(x))return p(m,y,x,S);if(Jx(x))return v(m,y,x,S);qC(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,x),y.return=m,m=y):(n(m,y),y=YN(x,m.mode,S),y.return=m,m=y),o(m)):n(m,y)}return g}var Zv=ene(!0),tne=ene(!1),IS={},Pu=Vh(IS),Yb=Vh(IS),Kb=Vh(IS);function am(t){if(t===IS)throw Error(St(174));return t}function q5(t,e){switch(qr(Kb,e),qr(Yb,t),qr(Pu,IS),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:DL(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=DL(e,t)}ni(Pu),qr(Pu,e)}function Jv(){ni(Pu),ni(Yb),ni(Kb)}function nne(t){am(Kb.current);var e=am(Pu.current),n=DL(e,t.type);e!==n&&(qr(Yb,t),qr(Pu,n))}function Y5(t){Yb.current===t&&(ni(Pu),ni(Yb))}var gi=Vh(0);function FM(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var WN=[];function K5(){for(var t=0;t<WN.length;t++)WN[t]._workInProgressVersionPrimary=null;WN.length=0}var VE=hf.ReactCurrentDispatcher,GN=hf.ReactCurrentBatchConfig,Vm=0,xi=null,fs=null,ks=null,BM=!1,ob=!1,Zb=0,twe=0;function uo(){throw Error(St(321))}function Z5(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hc(t[n],e[n]))return!1;return!0}function J5(t,e,n,r,i,s){if(Vm=s,xi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,VE.current=t===null||t.memoizedState===null?swe:owe,t=n(r,i),ob){s=0;do{if(ob=!1,Zb=0,25<=s)throw Error(St(301));s+=1,ks=fs=null,e.updateQueue=null,VE.current=awe,t=n(r,i)}while(ob)}if(VE.current=UM,e=fs!==null&&fs.next!==null,Vm=0,ks=fs=xi=null,BM=!1,e)throw Error(St(300));return t}function Q5(){var t=Zb!==0;return Zb=0,t}function pu(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ks===null?xi.memoizedState=ks=t:ks=ks.next=t,ks}function Ql(){if(fs===null){var t=xi.alternate;t=t!==null?t.memoizedState:null}else t=fs.next;var e=ks===null?xi.memoizedState:ks.next;if(e!==null)ks=e,fs=t;else{if(t===null)throw Error(St(310));fs=t,t={memoizedState:fs.memoizedState,baseState:fs.baseState,baseQueue:fs.baseQueue,queue:fs.queue,next:null},ks===null?xi.memoizedState=ks=t:ks=ks.next=t}return ks}function Jb(t,e){return typeof e=="function"?e(t):e}function HN(t){var e=Ql(),n=e.queue;if(n===null)throw Error(St(311));n.lastRenderedReducer=t;var r=fs,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Vm&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,xi.lanes|=u,Wm|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Hc(r,e.memoizedState)||(wa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,xi.lanes|=s,Wm|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jN(t){var e=Ql(),n=e.queue;if(n===null)throw Error(St(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hc(s,e.memoizedState)||(wa=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function rne(){}function ine(t,e){var n=xi,r=Ql(),i=e(),s=!Hc(r.memoizedState,i);if(s&&(r.memoizedState=i,wa=!0),r=r.queue,eB(ane.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ks!==null&&ks.memoizedState.tag&1){if(n.flags|=2048,Qb(9,one.bind(null,n,r,i,e),void 0,null),Ns===null)throw Error(St(349));Vm&30||sne(n,e,i)}return i}function sne(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xi.updateQueue,e===null?(e={lastEffect:null,stores:null},xi.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function one(t,e,n,r){e.value=n,e.getSnapshot=r,lne(e)&&cne(t)}function ane(t,e,n){return n(function(){lne(e)&&cne(t)})}function lne(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hc(t,n)}catch{return!0}}function cne(t){var e=nf(t,1);e!==null&&Uc(e,t,1,-1)}function O9(t){var e=pu();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jb,lastRenderedState:t},e.queue=t,t=t.dispatch=iwe.bind(null,xi,t),[e.memoizedState,t]}function Qb(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xi.updateQueue,e===null?(e={lastEffect:null,stores:null},xi.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function une(){return Ql().memoizedState}function WE(t,e,n,r){var i=pu();xi.flags|=t,i.memoizedState=Qb(1|e,n,void 0,r===void 0?null:r)}function Ik(t,e,n,r){var i=Ql();r=r===void 0?null:r;var s=void 0;if(fs!==null){var o=fs.memoizedState;if(s=o.destroy,r!==null&&Z5(r,o.deps)){i.memoizedState=Qb(e,n,s,r);return}}xi.flags|=t,i.memoizedState=Qb(1|e,n,s,r)}function F9(t,e){return WE(8390656,8,t,e)}function eB(t,e){return Ik(2048,8,t,e)}function dne(t,e){return Ik(4,2,t,e)}function fne(t,e){return Ik(4,4,t,e)}function hne(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pne(t,e,n){return n=n!=null?n.concat([t]):null,Ik(4,4,hne.bind(null,e,t),n)}function tB(){}function mne(t,e){var n=Ql();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Z5(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gne(t,e){var n=Ql();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Z5(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vne(t,e,n){return Vm&21?(Hc(n,e)||(n=bte(),xi.lanes|=n,Wm|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wa=!0),t.memoizedState=n)}function nwe(t,e){var n=Ar;Ar=n!==0&&4>n?n:4,t(!0);var r=GN.transition;GN.transition={};try{t(!1),e()}finally{Ar=n,GN.transition=r}}function yne(){return Ql().memoizedState}function rwe(t,e,n){var r=uh(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xne(t))bne(e,n);else if(n=Kte(t,e,n,r),n!==null){var i=Jo();Uc(n,t,r,i),wne(n,e,r)}}function iwe(t,e,n){var r=uh(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xne(t))bne(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hc(a,o)){var l=e.interleaved;l===null?(i.next=i,j5(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Kte(t,e,i,r),n!==null&&(i=Jo(),Uc(n,t,r,i),wne(n,e,r))}}function xne(t){var e=t.alternate;return t===xi||e!==null&&e===xi}function bne(t,e){ob=BM=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wne(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,P5(t,n)}}var UM={readContext:Jl,useCallback:uo,useContext:uo,useEffect:uo,useImperativeHandle:uo,useInsertionEffect:uo,useLayoutEffect:uo,useMemo:uo,useReducer:uo,useRef:uo,useState:uo,useDebugValue:uo,useDeferredValue:uo,useTransition:uo,useMutableSource:uo,useSyncExternalStore:uo,useId:uo,unstable_isNewReconciler:!1},swe={readContext:Jl,useCallback:function(t,e){return pu().memoizedState=[t,e===void 0?null:e],t},useContext:Jl,useEffect:F9,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,WE(4194308,4,hne.bind(null,e,t),n)},useLayoutEffect:function(t,e){return WE(4194308,4,t,e)},useInsertionEffect:function(t,e){return WE(4,2,t,e)},useMemo:function(t,e){var n=pu();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pu();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=rwe.bind(null,xi,t),[r.memoizedState,t]},useRef:function(t){var e=pu();return t={current:t},e.memoizedState=t},useState:O9,useDebugValue:tB,useDeferredValue:function(t){return pu().memoizedState=t},useTransition:function(){var t=O9(!1),e=t[0];return t=nwe.bind(null,t[1]),pu().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xi,i=pu();if(li){if(n===void 0)throw Error(St(407));n=n()}else{if(n=e(),Ns===null)throw Error(St(349));Vm&30||sne(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,F9(ane.bind(null,r,s,t),[t]),r.flags|=2048,Qb(9,one.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=pu(),e=Ns.identifierPrefix;if(li){var n=Od,r=Ld;n=(r&~(1<<32-Bc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zb++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=twe++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},owe={readContext:Jl,useCallback:mne,useContext:Jl,useEffect:eB,useImperativeHandle:pne,useInsertionEffect:dne,useLayoutEffect:fne,useMemo:gne,useReducer:HN,useRef:une,useState:function(){return HN(Jb)},useDebugValue:tB,useDeferredValue:function(t){var e=Ql();return vne(e,fs.memoizedState,t)},useTransition:function(){var t=HN(Jb)[0],e=Ql().memoizedState;return[t,e]},useMutableSource:rne,useSyncExternalStore:ine,useId:yne,unstable_isNewReconciler:!1},awe={readContext:Jl,useCallback:mne,useContext:Jl,useEffect:eB,useImperativeHandle:pne,useInsertionEffect:dne,useLayoutEffect:fne,useMemo:gne,useReducer:jN,useRef:une,useState:function(){return jN(Jb)},useDebugValue:tB,useDeferredValue:function(t){var e=Ql();return fs===null?e.memoizedState=t:vne(e,fs.memoizedState,t)},useTransition:function(){var t=jN(Jb)[0],e=Ql().memoizedState;return[t,e]},useMutableSource:rne,useSyncExternalStore:ine,useId:yne,unstable_isNewReconciler:!1};function Qv(t,e){try{var n="",r=e;do n+=D1e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function XN(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function iO(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lwe=typeof WeakMap=="function"?WeakMap:Map;function Sne(t,e,n){n=Xd(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){VM||(VM=!0,pO=r),iO(t,e)},n}function _ne(t,e,n){n=Xd(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){iO(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){iO(t,e),typeof r!="function"&&(ch===null?ch=new Set([this]):ch.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function B9(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lwe;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Swe.bind(null,t,e,n),e.then(t,t))}function U9(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function z9(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xd(-1,1),e.tag=2,lh(n,e,1))),n.lanes|=1),t)}var cwe=hf.ReactCurrentOwner,wa=!1;function Ho(t,e,n,r){e.child=t===null?tne(e,null,n,r):Zv(e,t.child,n,r)}function V9(t,e,n,r,i){n=n.render;var s=e.ref;return kv(e,i),r=J5(t,e,n,r,s,i),n=Q5(),t!==null&&!wa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rf(t,e,i)):(li&&n&&U5(e),e.flags|=1,Ho(t,e,r,i),e.child)}function W9(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!cB(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Cne(t,e,s,r,i)):(t=XE(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Hb,n(o,r)&&t.ref===e.ref)return rf(t,e,i)}return e.flags|=1,t=dh(s,r),t.ref=e.ref,t.return=e,e.child=t}function Cne(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Hb(s,r)&&t.ref===e.ref)if(wa=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(wa=!0);else return e.lanes=t.lanes,rf(t,e,i)}return sO(t,e,n,r,i)}function Tne(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qr(cv,qa),qa|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,qr(cv,qa),qa|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,qr(cv,qa),qa|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,qr(cv,qa),qa|=r;return Ho(t,e,i,n),e.child}function Ene(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sO(t,e,n,r,i){var s=Ea(n)?Um:No.current;return s=Yv(e,s),kv(e,i),n=J5(t,e,n,r,s,i),r=Q5(),t!==null&&!wa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rf(t,e,i)):(li&&r&&U5(e),e.flags|=1,Ho(t,e,n,i),e.child)}function G9(t,e,n,r,i){if(Ea(n)){var s=!0;PM(e)}else s=!1;if(kv(e,i),e.stateNode===null)GE(t,e),Qte(e,n,r),rO(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Jl(c):(c=Ea(n)?Um:No.current,c=Yv(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&D9(e,o,r,c),Wf=!1;var f=e.memoizedState;o.state=f,OM(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Ta.current||Wf?(typeof u=="function"&&(nO(e,n,u,r),l=e.memoizedState),(a=Wf||$9(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Zte(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Cc(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Jl(l):(l=Ea(n)?Um:No.current,l=Yv(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&D9(e,o,r,l),Wf=!1,f=e.memoizedState,o.state=f,OM(e,r,o,i);var p=e.memoizedState;a!==d||f!==p||Ta.current||Wf?(typeof h=="function"&&(nO(e,n,h,r),p=e.memoizedState),(c=Wf||$9(e,n,c,r,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return oO(t,e,n,r,s,i)}function oO(t,e,n,r,i,s){Ene(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&k9(e,n,!1),rf(t,e,s);r=e.stateNode,cwe.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Zv(e,t.child,null,s),e.child=Zv(e,null,a,s)):Ho(t,e,a,s),e.memoizedState=r.state,i&&k9(e,n,!0),e.child}function Mne(t){var e=t.stateNode;e.pendingContext?A9(t,e.pendingContext,e.pendingContext!==e.context):e.context&&A9(t,e.context,!1),q5(t,e.containerInfo)}function H9(t,e,n,r,i){return Kv(),V5(i),e.flags|=256,Ho(t,e,n,r),e.child}var aO={dehydrated:null,treeContext:null,retryLane:0};function lO(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ane(t,e,n){var r=e.pendingProps,i=gi.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),qr(gi,i&1),t===null)return eO(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Nk(o,r,0,null),t=_m(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=lO(n),e.memoizedState=aO,t):nB(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return uwe(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=dh(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=dh(a,s):(s=_m(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?lO(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=aO,r}return s=t.child,t=s.sibling,r=dh(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nB(t,e){return e=Nk({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function YC(t,e,n,r){return r!==null&&V5(r),Zv(e,t.child,null,n),t=nB(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uwe(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=XN(Error(St(422))),YC(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Nk({mode:"visible",children:r.children},i,0,null),s=_m(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Zv(e,t.child,null,o),e.child.memoizedState=lO(o),e.memoizedState=aO,s);if(!(e.mode&1))return YC(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(St(419)),r=XN(s,r,void 0),YC(t,e,o,r)}if(a=(o&t.childLanes)!==0,wa||a){if(r=Ns,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nf(t,i),Uc(r,t,i,-1))}return lB(),r=XN(Error(St(421))),YC(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=_we.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,nl=ah(i.nextSibling),ol=e,li=!0,Mc=null,t!==null&&($l[Dl++]=Ld,$l[Dl++]=Od,$l[Dl++]=zm,Ld=t.id,Od=t.overflow,zm=e),e=nB(e,r.children),e.flags|=4096,e)}function j9(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tO(t.return,e,n)}function qN(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function kne(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ho(t,e,r.children,n),r=gi.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j9(t,n,e);else if(t.tag===19)j9(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(qr(gi,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&FM(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),qN(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&FM(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}qN(e,!0,n,null,s);break;case"together":qN(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function GE(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rf(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wm|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(St(153));if(e.child!==null){for(t=e.child,n=dh(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=dh(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dwe(t,e,n){switch(e.tag){case 3:Mne(e),Kv();break;case 5:nne(e);break;case 1:Ea(e.type)&&PM(e);break;case 4:q5(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;qr(DM,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(qr(gi,gi.current&1),e.flags|=128,null):n&e.child.childLanes?Ane(t,e,n):(qr(gi,gi.current&1),t=rf(t,e,n),t!==null?t.sibling:null);qr(gi,gi.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return kne(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),qr(gi,gi.current),r)break;return null;case 22:case 23:return e.lanes=0,Tne(t,e,n)}return rf(t,e,n)}var Ine,cO,Rne,Pne;Ine=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cO=function(){};Rne=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,am(Pu.current);var s=null;switch(n){case"input":i=RL(t,i),r=RL(t,r),s=[];break;case"select":i=bi({},i,{value:void 0}),r=bi({},r,{value:void 0}),s=[];break;case"textarea":i=$L(t,i),r=$L(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=IM)}LL(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fb.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fb.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Jr("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Pne=function(t,e,n,r){n!==r&&(e.flags|=4)};function i1(t,e){if(!li)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function fo(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fwe(t,e,n){var r=e.pendingProps;switch(z5(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fo(e),null;case 1:return Ea(e.type)&&RM(),fo(e),null;case 3:return r=e.stateNode,Jv(),ni(Ta),ni(No),K5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(XC(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mc!==null&&(vO(Mc),Mc=null))),cO(t,e),fo(e),null;case 5:Y5(e);var i=am(Kb.current);if(n=e.type,t!==null&&e.stateNode!=null)Rne(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(St(166));return fo(e),null}if(t=am(Pu.current),XC(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Cu]=e,r[qb]=s,t=(e.mode&1)!==0,n){case"dialog":Jr("cancel",r),Jr("close",r);break;case"iframe":case"object":case"embed":Jr("load",r);break;case"video":case"audio":for(i=0;i<W1.length;i++)Jr(W1[i],r);break;case"source":Jr("error",r);break;case"img":case"image":case"link":Jr("error",r),Jr("load",r);break;case"details":Jr("toggle",r);break;case"input":t9(r,s),Jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Jr("invalid",r);break;case"textarea":r9(r,s),Jr("invalid",r)}LL(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&jC(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&jC(r.textContent,a,t),i=["children",""+a]):Fb.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Jr("scroll",r)}switch(n){case"input":FC(r),n9(r,s,!0);break;case"textarea":FC(r),i9(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=IM)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ste(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Cu]=e,t[qb]=r,Ine(t,e,!1,!1),e.stateNode=t;e:{switch(o=OL(n,r),n){case"dialog":Jr("cancel",t),Jr("close",t),i=r;break;case"iframe":case"object":case"embed":Jr("load",t),i=r;break;case"video":case"audio":for(i=0;i<W1.length;i++)Jr(W1[i],t);i=r;break;case"source":Jr("error",t),i=r;break;case"img":case"image":case"link":Jr("error",t),Jr("load",t),i=r;break;case"details":Jr("toggle",t),i=r;break;case"input":t9(t,r),i=RL(t,r),Jr("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=bi({},r,{value:void 0}),Jr("invalid",t);break;case"textarea":r9(t,r),i=$L(t,r),Jr("invalid",t);break;default:i=r}LL(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?lte(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ote(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Bb(t,l):typeof l=="number"&&Bb(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fb.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Jr("scroll",t):l!=null&&E5(t,s,l,o))}switch(n){case"input":FC(t),n9(t,r,!1);break;case"textarea":FC(t),i9(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Sh(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Tv(t,!!r.multiple,s,!1):r.defaultValue!=null&&Tv(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=IM)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fo(e),null;case 6:if(t&&e.stateNode!=null)Pne(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(St(166));if(n=am(Kb.current),am(Pu.current),XC(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cu]=e,(s=r.nodeValue!==n)&&(t=ol,t!==null))switch(t.tag){case 3:jC(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jC(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cu]=e,e.stateNode=r}return fo(e),null;case 13:if(ni(gi),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(li&&nl!==null&&e.mode&1&&!(e.flags&128))Yte(),Kv(),e.flags|=98560,s=!1;else if(s=XC(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(St(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(St(317));s[Cu]=e}else Kv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fo(e),s=!1}else Mc!==null&&(vO(Mc),Mc=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||gi.current&1?vs===0&&(vs=3):lB())),e.updateQueue!==null&&(e.flags|=4),fo(e),null);case 4:return Jv(),cO(t,e),t===null&&jb(e.stateNode.containerInfo),fo(e),null;case 10:return H5(e.type._context),fo(e),null;case 17:return Ea(e.type)&&RM(),fo(e),null;case 19:if(ni(gi),s=e.memoizedState,s===null)return fo(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)i1(s,!1);else{if(vs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=FM(t),o!==null){for(e.flags|=128,i1(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return qr(gi,gi.current&1|2),e.child}t=t.sibling}s.tail!==null&&Wi()>ey&&(e.flags|=128,r=!0,i1(s,!1),e.lanes=4194304)}else{if(!r)if(t=FM(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),i1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!li)return fo(e),null}else 2*Wi()-s.renderingStartTime>ey&&n!==1073741824&&(e.flags|=128,r=!0,i1(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Wi(),e.sibling=null,n=gi.current,qr(gi,r?n&1|2:n&1),e):(fo(e),null);case 22:case 23:return aB(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qa&1073741824&&(fo(e),e.subtreeFlags&6&&(e.flags|=8192)):fo(e),null;case 24:return null;case 25:return null}throw Error(St(156,e.tag))}function hwe(t,e){switch(z5(e),e.tag){case 1:return Ea(e.type)&&RM(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jv(),ni(Ta),ni(No),K5(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Y5(e),null;case 13:if(ni(gi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(St(340));Kv()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ni(gi),null;case 4:return Jv(),null;case 10:return H5(e.type._context),null;case 22:case 23:return aB(),null;case 24:return null;default:return null}}var KC=!1,_o=!1,pwe=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function lv(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ei(t,e,r)}else n.current=null}function uO(t,e,n){try{n()}catch(r){Ei(t,e,r)}}var X9=!1;function mwe(t,e){if(XL=MM,t=Lte(),B5(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(qL={focusedElem:t,selectionRange:n},MM=!1,Xt=e;Xt!==null;)if(e=Xt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Xt=t;else for(;Xt!==null;){e=Xt;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,g=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:Cc(e.type,v),g);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(St(163))}}catch(S){Ei(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Xt=t;break}Xt=e.return}return p=X9,X9=!1,p}function ab(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&uO(e,n,s)}i=i.next}while(i!==r)}}function Rk(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dO(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Nne(t){var e=t.alternate;e!==null&&(t.alternate=null,Nne(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cu],delete e[qb],delete e[ZL],delete e[Zbe],delete e[Jbe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $ne(t){return t.tag===5||t.tag===3||t.tag===4}function q9(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$ne(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fO(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=IM));else if(r!==4&&(t=t.child,t!==null))for(fO(t,e,n),t=t.sibling;t!==null;)fO(t,e,n),t=t.sibling}function hO(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hO(t,e,n),t=t.sibling;t!==null;)hO(t,e,n),t=t.sibling}var qs=null,Ec=!1;function If(t,e,n){for(n=n.child;n!==null;)Dne(t,e,n),n=n.sibling}function Dne(t,e,n){if(Ru&&typeof Ru.onCommitFiberUnmount=="function")try{Ru.onCommitFiberUnmount(_k,n)}catch{}switch(n.tag){case 5:_o||lv(n,e);case 6:var r=qs,i=Ec;qs=null,If(t,e,n),qs=r,Ec=i,qs!==null&&(Ec?(t=qs,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qs.removeChild(n.stateNode));break;case 18:qs!==null&&(Ec?(t=qs,n=n.stateNode,t.nodeType===8?zN(t.parentNode,n):t.nodeType===1&&zN(t,n),Wb(t)):zN(qs,n.stateNode));break;case 4:r=qs,i=Ec,qs=n.stateNode.containerInfo,Ec=!0,If(t,e,n),qs=r,Ec=i;break;case 0:case 11:case 14:case 15:if(!_o&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&uO(n,e,o),i=i.next}while(i!==r)}If(t,e,n);break;case 1:if(!_o&&(lv(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ei(n,e,a)}If(t,e,n);break;case 21:If(t,e,n);break;case 22:n.mode&1?(_o=(r=_o)||n.memoizedState!==null,If(t,e,n),_o=r):If(t,e,n);break;default:If(t,e,n)}}function Y9(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new pwe),e.forEach(function(r){var i=Cwe.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function gc(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qs=a.stateNode,Ec=!1;break e;case 3:qs=a.stateNode.containerInfo,Ec=!0;break e;case 4:qs=a.stateNode.containerInfo,Ec=!0;break e}a=a.return}if(qs===null)throw Error(St(160));Dne(s,o,i),qs=null,Ec=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ei(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Lne(e,t),e=e.sibling}function Lne(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gc(e,t),uu(t),r&4){try{ab(3,t,t.return),Rk(3,t)}catch(v){Ei(t,t.return,v)}try{ab(5,t,t.return)}catch(v){Ei(t,t.return,v)}}break;case 1:gc(e,t),uu(t),r&512&&n!==null&&lv(n,n.return);break;case 5:if(gc(e,t),uu(t),r&512&&n!==null&&lv(n,n.return),t.flags&32){var i=t.stateNode;try{Bb(i,"")}catch(v){Ei(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&rte(i,s),OL(a,o);var c=OL(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?lte(i,d):u==="dangerouslySetInnerHTML"?ote(i,d):u==="children"?Bb(i,d):E5(i,u,d,c)}switch(a){case"input":PL(i,s);break;case"textarea":ite(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Tv(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Tv(i,!!s.multiple,s.defaultValue,!0):Tv(i,!!s.multiple,s.multiple?[]:"",!1))}i[qb]=s}catch(v){Ei(t,t.return,v)}}break;case 6:if(gc(e,t),uu(t),r&4){if(t.stateNode===null)throw Error(St(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Ei(t,t.return,v)}}break;case 3:if(gc(e,t),uu(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wb(e.containerInfo)}catch(v){Ei(t,t.return,v)}break;case 4:gc(e,t),uu(t);break;case 13:gc(e,t),uu(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(sB=Wi())),r&4&&Y9(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(_o=(c=_o)||u,gc(e,t),_o=c):gc(e,t),uu(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Xt=t,u=t.child;u!==null;){for(d=Xt=u;Xt!==null;){switch(f=Xt,h=f.child,f.tag){case 0:case 11:case 14:case 15:ab(4,f,f.return);break;case 1:lv(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){Ei(r,n,v)}}break;case 5:lv(f,f.return);break;case 22:if(f.memoizedState!==null){Z9(d);continue}}h!==null?(h.return=f,Xt=h):Z9(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ate("display",o))}catch(v){Ei(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Ei(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(e,t),uu(t),r&4&&Y9(t);break;case 21:break;default:gc(e,t),uu(t)}}function uu(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($ne(n)){var r=n;break e}n=n.return}throw Error(St(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Bb(i,""),r.flags&=-33);var s=q9(t);hO(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=q9(t);fO(t,a,o);break;default:throw Error(St(161))}}catch(l){Ei(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gwe(t,e,n){Xt=t,One(t)}function One(t,e,n){for(var r=(t.mode&1)!==0;Xt!==null;){var i=Xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||KC;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||_o;a=KC;var c=_o;if(KC=o,(_o=l)&&!c)for(Xt=i;Xt!==null;)o=Xt,l=o.child,o.tag===22&&o.memoizedState!==null?J9(i):l!==null?(l.return=o,Xt=l):J9(i);for(;s!==null;)Xt=s,One(s),s=s.sibling;Xt=i,KC=a,_o=c}K9(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Xt=s):K9(t)}}function K9(t){for(;Xt!==null;){var e=Xt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_o||Rk(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_o)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Cc(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&N9(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}N9(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Wb(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(St(163))}_o||e.flags&512&&dO(e)}catch(f){Ei(e,e.return,f)}}if(e===t){Xt=null;break}if(n=e.sibling,n!==null){n.return=e.return,Xt=n;break}Xt=e.return}}function Z9(t){for(;Xt!==null;){var e=Xt;if(e===t){Xt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Xt=n;break}Xt=e.return}}function J9(t){for(;Xt!==null;){var e=Xt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rk(4,e)}catch(l){Ei(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ei(e,i,l)}}var s=e.return;try{dO(e)}catch(l){Ei(e,s,l)}break;case 5:var o=e.return;try{dO(e)}catch(l){Ei(e,o,l)}}}catch(l){Ei(e,e.return,l)}if(e===t){Xt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Xt=a;break}Xt=e.return}}var vwe=Math.ceil,zM=hf.ReactCurrentDispatcher,rB=hf.ReactCurrentOwner,ql=hf.ReactCurrentBatchConfig,fr=0,Ns=null,es=null,Zs=0,qa=0,cv=Vh(0),vs=0,ew=null,Wm=0,Pk=0,iB=0,lb=null,va=null,sB=0,ey=1/0,Md=null,VM=!1,pO=null,ch=null,ZC=!1,Kf=null,WM=0,cb=0,mO=null,HE=-1,jE=0;function Jo(){return fr&6?Wi():HE!==-1?HE:HE=Wi()}function uh(t){return t.mode&1?fr&2&&Zs!==0?Zs&-Zs:ewe.transition!==null?(jE===0&&(jE=bte()),jE):(t=Ar,t!==0||(t=window.event,t=t===void 0?16:Mte(t.type)),t):1}function Uc(t,e,n,r){if(50<cb)throw cb=0,mO=null,Error(St(185));MS(t,n,r),(!(fr&2)||t!==Ns)&&(t===Ns&&(!(fr&2)&&(Pk|=n),vs===4&&jf(t,Zs)),Ma(t,r),n===1&&fr===0&&!(e.mode&1)&&(ey=Wi()+500,Ak&&Wh()))}function Ma(t,e){var n=t.callbackNode;ebe(t,e);var r=EM(t,t===Ns?Zs:0);if(r===0)n!==null&&a9(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&a9(n),e===1)t.tag===0?Qbe(Q9.bind(null,t)):jte(Q9.bind(null,t)),Ybe(function(){!(fr&6)&&Wh()}),n=null;else{switch(wte(r)){case 1:n=R5;break;case 4:n=yte;break;case 16:n=TM;break;case 536870912:n=xte;break;default:n=TM}n=Hne(n,Fne.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Fne(t,e){if(HE=-1,jE=0,fr&6)throw Error(St(327));var n=t.callbackNode;if(Iv()&&t.callbackNode!==n)return null;var r=EM(t,t===Ns?Zs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=GM(t,r);else{e=r;var i=fr;fr|=2;var s=Une();(Ns!==t||Zs!==e)&&(Md=null,ey=Wi()+500,Sm(t,e));do try{bwe();break}catch(a){Bne(t,a)}while(!0);G5(),zM.current=s,fr=i,es!==null?e=0:(Ns=null,Zs=0,e=vs)}if(e!==0){if(e===2&&(i=VL(t),i!==0&&(r=i,e=gO(t,i))),e===1)throw n=ew,Sm(t,0),jf(t,r),Ma(t,Wi()),n;if(e===6)jf(t,r);else{if(i=t.current.alternate,!(r&30)&&!ywe(i)&&(e=GM(t,r),e===2&&(s=VL(t),s!==0&&(r=s,e=gO(t,s))),e===1))throw n=ew,Sm(t,0),jf(t,r),Ma(t,Wi()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(St(345));case 2:Wp(t,va,Md);break;case 3:if(jf(t,r),(r&130023424)===r&&(e=sB+500-Wi(),10<e)){if(EM(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Jo(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=KL(Wp.bind(null,t,va,Md),e);break}Wp(t,va,Md);break;case 4:if(jf(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Bc(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Wi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vwe(r/1960))-r,10<r){t.timeoutHandle=KL(Wp.bind(null,t,va,Md),r);break}Wp(t,va,Md);break;case 5:Wp(t,va,Md);break;default:throw Error(St(329))}}}return Ma(t,Wi()),t.callbackNode===n?Fne.bind(null,t):null}function gO(t,e){var n=lb;return t.current.memoizedState.isDehydrated&&(Sm(t,e).flags|=256),t=GM(t,e),t!==2&&(e=va,va=n,e!==null&&vO(e)),t}function vO(t){va===null?va=t:va.push.apply(va,t)}function ywe(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hc(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jf(t,e){for(e&=~iB,e&=~Pk,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bc(e),r=1<<n;t[n]=-1,e&=~r}}function Q9(t){if(fr&6)throw Error(St(327));Iv();var e=EM(t,0);if(!(e&1))return Ma(t,Wi()),null;var n=GM(t,e);if(t.tag!==0&&n===2){var r=VL(t);r!==0&&(e=r,n=gO(t,r))}if(n===1)throw n=ew,Sm(t,0),jf(t,e),Ma(t,Wi()),n;if(n===6)throw Error(St(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wp(t,va,Md),Ma(t,Wi()),null}function oB(t,e){var n=fr;fr|=1;try{return t(e)}finally{fr=n,fr===0&&(ey=Wi()+500,Ak&&Wh())}}function Gm(t){Kf!==null&&Kf.tag===0&&!(fr&6)&&Iv();var e=fr;fr|=1;var n=ql.transition,r=Ar;try{if(ql.transition=null,Ar=1,t)return t()}finally{Ar=r,ql.transition=n,fr=e,!(fr&6)&&Wh()}}function aB(){qa=cv.current,ni(cv)}function Sm(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qbe(n)),es!==null)for(n=es.return;n!==null;){var r=n;switch(z5(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&RM();break;case 3:Jv(),ni(Ta),ni(No),K5();break;case 5:Y5(r);break;case 4:Jv();break;case 13:ni(gi);break;case 19:ni(gi);break;case 10:H5(r.type._context);break;case 22:case 23:aB()}n=n.return}if(Ns=t,es=t=dh(t.current,null),Zs=qa=e,vs=0,ew=null,iB=Pk=Wm=0,va=lb=null,om!==null){for(e=0;e<om.length;e++)if(n=om[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}om=null}return t}function Bne(t,e){do{var n=es;try{if(G5(),VE.current=UM,BM){for(var r=xi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}BM=!1}if(Vm=0,ks=fs=xi=null,ob=!1,Zb=0,rB.current=null,n===null||n.return===null){vs=1,ew=e,es=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Zs,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=U9(o);if(h!==null){h.flags&=-257,z9(h,o,a,s,e),h.mode&1&&B9(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){B9(s,c,e),lB();break e}l=Error(St(426))}}else if(li&&a.mode&1){var g=U9(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),z9(g,o,a,s,e),V5(Qv(l,a));break e}}s=l=Qv(l,a),vs!==4&&(vs=2),lb===null?lb=[s]:lb.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=Sne(s,l,e);P9(s,m);break e;case 1:a=l;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ch===null||!ch.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=_ne(s,a,e);P9(s,S);break e}}s=s.return}while(s!==null)}Vne(n)}catch(_){e=_,es===n&&n!==null&&(es=n=n.return);continue}break}while(!0)}function Une(){var t=zM.current;return zM.current=UM,t===null?UM:t}function lB(){(vs===0||vs===3||vs===2)&&(vs=4),Ns===null||!(Wm&268435455)&&!(Pk&268435455)||jf(Ns,Zs)}function GM(t,e){var n=fr;fr|=2;var r=Une();(Ns!==t||Zs!==e)&&(Md=null,Sm(t,e));do try{xwe();break}catch(i){Bne(t,i)}while(!0);if(G5(),fr=n,zM.current=r,es!==null)throw Error(St(261));return Ns=null,Zs=0,vs}function xwe(){for(;es!==null;)zne(es)}function bwe(){for(;es!==null&&!H1e();)zne(es)}function zne(t){var e=Gne(t.alternate,t,qa);t.memoizedProps=t.pendingProps,e===null?Vne(t):es=e,rB.current=null}function Vne(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hwe(n,e),n!==null){n.flags&=32767,es=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vs=6,es=null;return}}else if(n=fwe(n,e,qa),n!==null){es=n;return}if(e=e.sibling,e!==null){es=e;return}es=e=t}while(e!==null);vs===0&&(vs=5)}function Wp(t,e,n){var r=Ar,i=ql.transition;try{ql.transition=null,Ar=1,wwe(t,e,n,r)}finally{ql.transition=i,Ar=r}return null}function wwe(t,e,n,r){do Iv();while(Kf!==null);if(fr&6)throw Error(St(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(St(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(tbe(t,s),t===Ns&&(es=Ns=null,Zs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ZC||(ZC=!0,Hne(TM,function(){return Iv(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ql.transition,ql.transition=null;var o=Ar;Ar=1;var a=fr;fr|=4,rB.current=null,mwe(t,n),Lne(n,t),zbe(qL),MM=!!XL,qL=XL=null,t.current=n,gwe(n),j1e(),fr=a,Ar=o,ql.transition=s}else t.current=n;if(ZC&&(ZC=!1,Kf=t,WM=i),s=t.pendingLanes,s===0&&(ch=null),Y1e(n.stateNode),Ma(t,Wi()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(VM)throw VM=!1,t=pO,pO=null,t;return WM&1&&t.tag!==0&&Iv(),s=t.pendingLanes,s&1?t===mO?cb++:(cb=0,mO=t):cb=0,Wh(),null}function Iv(){if(Kf!==null){var t=wte(WM),e=ql.transition,n=Ar;try{if(ql.transition=null,Ar=16>t?16:t,Kf===null)var r=!1;else{if(t=Kf,Kf=null,WM=0,fr&6)throw Error(St(331));var i=fr;for(fr|=4,Xt=t.current;Xt!==null;){var s=Xt,o=s.child;if(Xt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Xt=c;Xt!==null;){var u=Xt;switch(u.tag){case 0:case 11:case 15:ab(8,u,s)}var d=u.child;if(d!==null)d.return=u,Xt=d;else for(;Xt!==null;){u=Xt;var f=u.sibling,h=u.return;if(Nne(u),u===c){Xt=null;break}if(f!==null){f.return=h,Xt=f;break}Xt=h}}}var p=s.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(v!==null)}}Xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Xt=o;else e:for(;Xt!==null;){if(s=Xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ab(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Xt=m;break e}Xt=s.return}}var y=t.current;for(Xt=y;Xt!==null;){o=Xt;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Xt=x;else e:for(o=y;Xt!==null;){if(a=Xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Rk(9,a)}}catch(_){Ei(a,a.return,_)}if(a===o){Xt=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Xt=S;break e}Xt=a.return}}if(fr=i,Wh(),Ru&&typeof Ru.onPostCommitFiberRoot=="function")try{Ru.onPostCommitFiberRoot(_k,t)}catch{}r=!0}return r}finally{Ar=n,ql.transition=e}}return!1}function eH(t,e,n){e=Qv(n,e),e=Sne(t,e,1),t=lh(t,e,1),e=Jo(),t!==null&&(MS(t,1,e),Ma(t,e))}function Ei(t,e,n){if(t.tag===3)eH(t,t,n);else for(;e!==null;){if(e.tag===3){eH(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ch===null||!ch.has(r))){t=Qv(n,t),t=_ne(e,t,1),e=lh(e,t,1),t=Jo(),e!==null&&(MS(e,1,t),Ma(e,t));break}}e=e.return}}function Swe(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jo(),t.pingedLanes|=t.suspendedLanes&n,Ns===t&&(Zs&n)===n&&(vs===4||vs===3&&(Zs&130023424)===Zs&&500>Wi()-sB?Sm(t,0):iB|=n),Ma(t,e)}function Wne(t,e){e===0&&(t.mode&1?(e=zC,zC<<=1,!(zC&130023424)&&(zC=4194304)):e=1);var n=Jo();t=nf(t,e),t!==null&&(MS(t,e,n),Ma(t,n))}function _we(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Wne(t,n)}function Cwe(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(St(314))}r!==null&&r.delete(e),Wne(t,n)}var Gne;Gne=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ta.current)wa=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wa=!1,dwe(t,e,n);wa=!!(t.flags&131072)}else wa=!1,li&&e.flags&1048576&&Xte(e,$M,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;GE(t,e),t=e.pendingProps;var i=Yv(e,No.current);kv(e,n),i=J5(null,e,r,t,i,n);var s=Q5();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ea(r)?(s=!0,PM(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,X5(e),i.updater=kk,e.stateNode=i,i._reactInternals=e,rO(e,r,t,n),e=oO(null,e,r,!0,s,n)):(e.tag=0,li&&s&&U5(e),Ho(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(GE(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Ewe(r),t=Cc(r,t),i){case 0:e=sO(null,e,r,t,n);break e;case 1:e=G9(null,e,r,t,n);break e;case 11:e=V9(null,e,r,t,n);break e;case 14:e=W9(null,e,r,Cc(r.type,t),n);break e}throw Error(St(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cc(r,i),sO(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cc(r,i),G9(t,e,r,i,n);case 3:e:{if(Mne(e),t===null)throw Error(St(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Zte(t,e),OM(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Qv(Error(St(423)),e),e=H9(t,e,r,n,i);break e}else if(r!==i){i=Qv(Error(St(424)),e),e=H9(t,e,r,n,i);break e}else for(nl=ah(e.stateNode.containerInfo.firstChild),ol=e,li=!0,Mc=null,n=tne(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kv(),r===i){e=rf(t,e,n);break e}Ho(t,e,r,n)}e=e.child}return e;case 5:return nne(e),t===null&&eO(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,YL(r,i)?o=null:s!==null&&YL(r,s)&&(e.flags|=32),Ene(t,e),Ho(t,e,o,n),e.child;case 6:return t===null&&eO(e),null;case 13:return Ane(t,e,n);case 4:return q5(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Zv(e,null,r,n):Ho(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cc(r,i),V9(t,e,r,i,n);case 7:return Ho(t,e,e.pendingProps,n),e.child;case 8:return Ho(t,e,e.pendingProps.children,n),e.child;case 12:return Ho(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,qr(DM,r._currentValue),r._currentValue=o,s!==null)if(Hc(s.value,o)){if(s.children===i.children&&!Ta.current){e=rf(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Xd(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),tO(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(St(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tO(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ho(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,kv(e,n),i=Jl(i),r=r(i),e.flags|=1,Ho(t,e,r,n),e.child;case 14:return r=e.type,i=Cc(r,e.pendingProps),i=Cc(r.type,i),W9(t,e,r,i,n);case 15:return Cne(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cc(r,i),GE(t,e),e.tag=1,Ea(r)?(t=!0,PM(e)):t=!1,kv(e,n),Qte(e,r,i),rO(e,r,i,n),oO(null,e,r,!0,t,n);case 19:return kne(t,e,n);case 22:return Tne(t,e,n)}throw Error(St(156,e.tag))};function Hne(t,e){return vte(t,e)}function Twe(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zl(t,e,n,r){return new Twe(t,e,n,r)}function cB(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ewe(t){if(typeof t=="function")return cB(t)?1:0;if(t!=null){if(t=t.$$typeof,t===A5)return 11;if(t===k5)return 14}return 2}function dh(t,e){var n=t.alternate;return n===null?(n=zl(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function XE(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")cB(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Q0:return _m(n.children,i,s,e);case M5:o=8,i|=8;break;case ML:return t=zl(12,n,e,i|2),t.elementType=ML,t.lanes=s,t;case AL:return t=zl(13,n,e,i),t.elementType=AL,t.lanes=s,t;case kL:return t=zl(19,n,e,i),t.elementType=kL,t.lanes=s,t;case ete:return Nk(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jee:o=10;break e;case Qee:o=9;break e;case A5:o=11;break e;case k5:o=14;break e;case Vf:o=16,r=null;break e}throw Error(St(130,t==null?t:typeof t,""))}return e=zl(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function _m(t,e,n,r){return t=zl(7,t,r,e),t.lanes=n,t}function Nk(t,e,n,r){return t=zl(22,t,r,e),t.elementType=ete,t.lanes=n,t.stateNode={isHidden:!1},t}function YN(t,e,n){return t=zl(6,t,null,e),t.lanes=n,t}function KN(t,e,n){return e=zl(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Mwe(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=IN(0),this.expirationTimes=IN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=IN(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function uB(t,e,n,r,i,s,o,a,l){return t=new Mwe(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=zl(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},X5(s),t}function Awe(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J0,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jne(t){if(!t)return _h;t=t._reactInternals;e:{if(wg(t)!==t||t.tag!==1)throw Error(St(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ea(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(St(171))}if(t.tag===1){var n=t.type;if(Ea(n))return Hte(t,n,e)}return e}function Xne(t,e,n,r,i,s,o,a,l){return t=uB(n,r,!0,t,i,s,o,a,l),t.context=jne(null),n=t.current,r=Jo(),i=uh(n),s=Xd(r,i),s.callback=e??null,lh(n,s,i),t.current.lanes=i,MS(t,i,r),Ma(t,r),t}function $k(t,e,n,r){var i=e.current,s=Jo(),o=uh(i);return n=jne(n),e.context===null?e.context=n:e.pendingContext=n,e=Xd(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=lh(i,e,o),t!==null&&(Uc(t,i,o,s),zE(t,i,o)),o}function HM(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tH(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dB(t,e){tH(t,e),(t=t.alternate)&&tH(t,e)}function kwe(){return null}var qne=typeof reportError=="function"?reportError:function(t){console.error(t)};function fB(t){this._internalRoot=t}Dk.prototype.render=fB.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(St(409));$k(t,e,null,null)};Dk.prototype.unmount=fB.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gm(function(){$k(null,t,null,null)}),e[tf]=null}};function Dk(t){this._internalRoot=t}Dk.prototype.unstable_scheduleHydration=function(t){if(t){var e=Cte();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hf.length&&e!==0&&e<Hf[n].priority;n++);Hf.splice(n,0,t),n===0&&Ete(t)}};function hB(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nH(){}function Iwe(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=HM(o);s.call(c)}}var o=Xne(e,r,t,0,null,!1,!1,"",nH);return t._reactRootContainer=o,t[tf]=o.current,jb(t.nodeType===8?t.parentNode:t),Gm(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=HM(l);a.call(c)}}var l=uB(t,0,!1,null,null,!1,!1,"",nH);return t._reactRootContainer=l,t[tf]=l.current,jb(t.nodeType===8?t.parentNode:t),Gm(function(){$k(e,l,n,r)}),l}function Ok(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=HM(o);a.call(l)}}$k(e,o,t,i)}else o=Iwe(n,e,t,i,r);return HM(o)}Ste=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=V1(e.pendingLanes);n!==0&&(P5(e,n|1),Ma(e,Wi()),!(fr&6)&&(ey=Wi()+500,Wh()))}break;case 13:Gm(function(){var r=nf(t,1);if(r!==null){var i=Jo();Uc(r,t,1,i)}}),dB(t,1)}};N5=function(t){if(t.tag===13){var e=nf(t,134217728);if(e!==null){var n=Jo();Uc(e,t,134217728,n)}dB(t,134217728)}};_te=function(t){if(t.tag===13){var e=uh(t),n=nf(t,e);if(n!==null){var r=Jo();Uc(n,t,e,r)}dB(t,e)}};Cte=function(){return Ar};Tte=function(t,e){var n=Ar;try{return Ar=t,e()}finally{Ar=n}};BL=function(t,e,n){switch(e){case"input":if(PL(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Mk(r);if(!i)throw Error(St(90));nte(r),PL(r,i)}}}break;case"textarea":ite(t,n);break;case"select":e=n.value,e!=null&&Tv(t,!!n.multiple,e,!1)}};dte=oB;fte=Gm;var Rwe={usingClientEntryPoint:!1,Events:[kS,rv,Mk,cte,ute,oB]},s1={findFiberByHostInstance:sm,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Pwe={bundleType:s1.bundleType,version:s1.version,rendererPackageName:s1.rendererPackageName,rendererConfig:s1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hf.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mte(t),t===null?null:t.stateNode},findFiberByHostInstance:s1.findFiberByHostInstance||kwe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var JC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!JC.isDisabled&&JC.supportsFiber)try{_k=JC.inject(Pwe),Ru=JC}catch{}}pl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rwe;pl.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hB(e))throw Error(St(200));return Awe(t,e,null,n)};pl.createRoot=function(t,e){if(!hB(t))throw Error(St(299));var n=!1,r="",i=qne;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=uB(t,1,!1,null,null,n,!1,r,i),t[tf]=e.current,jb(t.nodeType===8?t.parentNode:t),new fB(e)};pl.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(St(188)):(t=Object.keys(t).join(","),Error(St(268,t)));return t=mte(e),t=t===null?null:t.stateNode,t};pl.flushSync=function(t){return Gm(t)};pl.hydrate=function(t,e,n){if(!Lk(e))throw Error(St(200));return Ok(null,t,e,!0,n)};pl.hydrateRoot=function(t,e,n){if(!hB(t))throw Error(St(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=qne;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Xne(e,null,t,1,n??null,i,!1,s,o),t[tf]=e.current,jb(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Dk(e)};pl.render=function(t,e,n){if(!Lk(e))throw Error(St(200));return Ok(null,t,e,!1,n)};pl.unmountComponentAtNode=function(t){if(!Lk(t))throw Error(St(40));return t._reactRootContainer?(Gm(function(){Ok(null,null,t,!1,function(){t._reactRootContainer=null,t[tf]=null})}),!0):!1};pl.unstable_batchedUpdates=oB;pl.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Lk(n))throw Error(St(200));if(t==null||t._reactInternals===void 0)throw Error(St(38));return Ok(t,e,n,!1,r)};pl.version="18.2.0-next-9e3b772b8-20220608";function Yne(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yne)}catch(t){console.error(t)}}Yne(),Xee.exports=pl;var RS=Xee.exports;const QC=ls(RS);var rH=RS;TL.createRoot=rH.createRoot,TL.hydrateRoot=rH.hydrateRoot;/**
 * @remix-run/router v1.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tw(){return tw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tw.apply(this,arguments)}var Zf;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Zf||(Zf={}));const iH="popstate";function Nwe(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Sg(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),yO("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:jM(s))}function r(i,s){Fk(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return Dwe(e,n,r,t)}function Ii(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fk(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $we(){return Math.random().toString(36).substr(2,8)}function sH(t,e){return{usr:t.state,key:t.key,idx:e}}function yO(t,e,n,r){return n===void 0&&(n=null),tw({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Sg(e):e,{state:n,key:e&&e.key||r||$we()})}function jM(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Sg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Dwe(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Zf.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(tw({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Zf.Pop;let g=u(),m=g==null?null:g-c;c=g,l&&l({action:a,location:v.location,delta:m})}function f(g,m){a=Zf.Push;let y=yO(v.location,g,m);n&&n(y,g),c=u()+1;let x=sH(y,c),S=v.createHref(y);try{o.pushState(x,"",S)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(S)}s&&l&&l({action:a,location:v.location,delta:1})}function h(g,m){a=Zf.Replace;let y=yO(v.location,g,m);n&&n(y,g),c=u();let x=sH(y,c),S=v.createHref(y);o.replaceState(x,"",S),s&&l&&l({action:a,location:v.location,delta:0})}function p(g){let m=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof g=="string"?g:jM(g);return Ii(m,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,m)}let v={get action(){return a},get location(){return t(i,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(iH,d),l=g,()=>{i.removeEventListener(iH,d),l=null}},createHref(g){return e(i,g)},createURL:p,encodeLocation(g){let m=p(g);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:h,go(g){return o.go(g)}};return v}var oH;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oH||(oH={}));function Lwe(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Sg(e):e,i=nw(r.pathname||"/",n);if(i==null)return null;let s=Kne(t);Owe(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=jwe(s[a],qwe(i));return o}function Kne(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ii(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=fh([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Ii(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Kne(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Gwe(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Zne(s.path))i(s,o,l)}),e}function Zne(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Zne(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Owe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Hwe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Fwe=/^:\w+$/,Bwe=3,Uwe=2,zwe=1,Vwe=10,Wwe=-2,aH=t=>t==="*";function Gwe(t,e){let n=t.split("/"),r=n.length;return n.some(aH)&&(r+=Wwe),e&&(r+=Uwe),n.filter(i=>!aH(i)).reduce((i,s)=>i+(Fwe.test(s)?Bwe:s===""?zwe:Vwe),r)}function Hwe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function jwe(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=xO({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:fh([i,u.pathname]),pathnameBase:Qwe(fh([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=fh([i,u.pathnameBase]))}return s}function xO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Xwe(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?c[f]=void 0:c[f]=Ywe(p||"",f),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Xwe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fk(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function qwe(t){try{return decodeURI(t)}catch(e){return Fk(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ywe(t,e){try{return decodeURIComponent(t)}catch(n){return Fk(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function nw(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Kwe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Sg(t):t;return{pathname:n?n.startsWith("/")?n:Zwe(n,e):e,search:eSe(r),hash:tSe(i)}}function Zwe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ZN(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Jwe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jne(t,e){let n=Jwe(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Qne(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Sg(t):(i=tw({},t),Ii(!i.pathname||!i.pathname.includes("?"),ZN("?","pathname","search",i)),Ii(!i.pathname||!i.pathname.includes("#"),ZN("#","pathname","hash",i)),Ii(!i.search||!i.search.includes("#"),ZN("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=Kwe(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const fh=t=>t.join("/").replace(/\/\/+/g,"/"),Qwe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),eSe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tSe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function nSe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ere=["post","put","patch","delete"];new Set(ere);const rSe=["get",...ere];new Set(rSe);/**
 * React Router v6.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rw(){return rw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rw.apply(this,arguments)}const Bk=R.createContext(null),tre=R.createContext(null),Gh=R.createContext(null),Uk=R.createContext(null),_g=R.createContext({outlet:null,matches:[],isDataRoute:!1}),nre=R.createContext(null);function iSe(t,e){let{relative:n}=e===void 0?{}:e;PS()||Ii(!1);let{basename:r,navigator:i}=R.useContext(Gh),{hash:s,pathname:o,search:a}=zk(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:fh([r,o])),i.createHref({pathname:l,search:a,hash:s})}function PS(){return R.useContext(Uk)!=null}function NS(){return PS()||Ii(!1),R.useContext(Uk).location}function rre(t){R.useContext(Gh).static||R.useLayoutEffect(t)}function sSe(){let{isDataRoute:t}=R.useContext(_g);return t?ySe():oSe()}function oSe(){PS()||Ii(!1);let t=R.useContext(Bk),{basename:e,future:n,navigator:r}=R.useContext(Gh),{matches:i}=R.useContext(_g),{pathname:s}=NS(),o=JSON.stringify(Jne(i,n.v7_relativeSplatPath)),a=R.useRef(!1);return rre(()=>{a.current=!0}),R.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Qne(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:fh([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}function zk(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(Gh),{matches:i}=R.useContext(_g),{pathname:s}=NS(),o=JSON.stringify(Jne(i,r.v7_relativeSplatPath));return R.useMemo(()=>Qne(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function aSe(t,e){return lSe(t,e)}function lSe(t,e,n,r){PS()||Ii(!1);let{navigator:i}=R.useContext(Gh),{matches:s}=R.useContext(_g),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=NS(),u;if(e){var d;let g=typeof e=="string"?Sg(e):e;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||Ii(!1),u=g}else u=c;let f=u.pathname||"/",h=l==="/"?f:f.slice(l.length)||"/",p=Lwe(t,{pathname:h}),v=hSe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:fh([l,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:fh([l,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return e&&v?R.createElement(Uk.Provider,{value:{location:rw({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Zf.Pop}},v):v}function cSe(){let t=vSe(),e=nSe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,s)}const uSe=R.createElement(cSe,null);class dSe extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(_g.Provider,{value:this.props.routeContext},R.createElement(nre.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fSe(t){let{routeContext:e,match:n,children:r}=t,i=R.useContext(Bk);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(_g.Provider,{value:e},r)}function hSe(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||Ii(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let h,p=!1,v=null,g=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||uSe,l&&(c<0&&f===0?(xSe("route-fallback",!1),p=!0,g=null):c===f&&(p=!0,g=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),y=()=>{let x;return h?x=v:p?x=g:d.route.Component?x=R.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=u,R.createElement(fSe,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:x})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?R.createElement(dSe,{location:n.location,revalidation:n.revalidation,component:v,error:h,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}var ire=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ire||{}),XM=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(XM||{});function pSe(t){let e=R.useContext(Bk);return e||Ii(!1),e}function mSe(t){let e=R.useContext(tre);return e||Ii(!1),e}function gSe(t){let e=R.useContext(_g);return e||Ii(!1),e}function sre(t){let e=gSe(),n=e.matches[e.matches.length-1];return n.route.id||Ii(!1),n.route.id}function vSe(){var t;let e=R.useContext(nre),n=mSe(XM.UseRouteError),r=sre(XM.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ySe(){let{router:t}=pSe(ire.UseNavigateStable),e=sre(XM.UseNavigateStable),n=R.useRef(!1);return rre(()=>{n.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,rw({fromRouteId:e},s)))},[t,e])}const lH={};function xSe(t,e,n){!e&&!lH[t]&&(lH[t]=!0)}function vo(t){Ii(!1)}function bSe(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Zf.Pop,navigator:s,static:o=!1,future:a}=t;PS()&&Ii(!1);let l=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:l,navigator:s,static:o,future:rw({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Sg(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,v=R.useMemo(()=>{let g=nw(u,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:p},navigationType:i}},[l,u,d,f,h,p,i]);return v==null?null:R.createElement(Gh.Provider,{value:c},R.createElement(Uk.Provider,{children:n,value:v}))}function wSe(t){let{children:e,location:n}=t;return aSe(bO(e),n)}new Promise(()=>{});function bO(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let s=[...e,i];if(r.type===R.Fragment){n.push.apply(n,bO(r.props.children,s));return}r.type!==vo&&Ii(!1),!r.props.index||!r.props.children||Ii(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=bO(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qM(){return qM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qM.apply(this,arguments)}function ore(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function SSe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _Se(t,e){return t.button===0&&(!e||e==="_self")&&!SSe(t)}const CSe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],TSe=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],ESe=R.createContext({isTransitioning:!1}),MSe="startTransition",cH=wM[MSe];function ASe(t){let{basename:e,children:n,future:r,window:i}=t,s=R.useRef();s.current==null&&(s.current=Nwe({window:i,v5Compat:!0}));let o=s.current,[a,l]=R.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=R.useCallback(d=>{c&&cH?cH(()=>l(d)):l(d)},[l,c]);return R.useLayoutEffect(()=>o.listen(u),[o,u]),R.createElement(bSe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const kSe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ISe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,RSe=R.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=e,f=ore(e,CSe),{basename:h}=R.useContext(Gh),p,v=!1;if(typeof c=="string"&&ISe.test(c)&&(p=c,kSe))try{let x=new URL(window.location.href),S=c.startsWith("//")?new URL(x.protocol+c):new URL(c),_=nw(S.pathname,h);S.origin===x.origin&&_!=null?c=_+S.search+S.hash:v=!0}catch{}let g=iSe(c,{relative:i}),m=NSe(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:d});function y(x){r&&r(x),x.defaultPrevented||m(x)}return R.createElement("a",qM({},f,{href:p||g,onClick:v||s?r:y,ref:n,target:l}))}),iw=R.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:c,children:u}=e,d=ore(e,TSe),f=zk(l,{relative:d.relative}),h=NS(),p=R.useContext(tre),{navigator:v}=R.useContext(Gh),g=p!=null&&$Se(f)&&c===!0,m=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,y=h.pathname,x=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;i||(y=y.toLowerCase(),x=x?x.toLowerCase():null,m=m.toLowerCase());const S=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let _=y===m||!o&&y.startsWith(m)&&y.charAt(S)==="/",C=x!=null&&(x===m||!o&&x.startsWith(m)&&x.charAt(m.length)==="/"),T={isActive:_,isPending:C,isTransitioning:g},A=_?r:void 0,M;typeof s=="function"?M=s(T):M=[s,_?"active":null,C?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let E=typeof a=="function"?a(T):a;return R.createElement(RSe,qM({},d,{"aria-current":A,className:M,ref:n,style:E,to:l,unstable_viewTransition:c}),typeof u=="function"?u(T):u)});var wO;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wO||(wO={}));var uH;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uH||(uH={}));function PSe(t){let e=R.useContext(Bk);return e||Ii(!1),e}function NSe(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=sSe(),c=NS(),u=zk(t,{relative:o});return R.useCallback(d=>{if(_Se(d,n)){d.preventDefault();let f=r!==void 0?r:jM(c)===jM(u);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function $Se(t,e){e===void 0&&(e={});let n=R.useContext(ESe);n==null&&Ii(!1);let{basename:r}=PSe(wO.useViewTransitionState),i=zk(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=nw(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=nw(n.nextLocation.pathname,r)||n.nextLocation.pathname;return xO(i.pathname,o)!=null||xO(i.pathname,s)!=null}const DSe={black:"#000",white:"#fff"},sw=DSe,LSe={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},c0=LSe,OSe={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},u0=OSe,FSe={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},d0=FSe,BSe={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},f0=BSe,USe={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},h0=USe,zSe={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},o1=zSe,VSe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},WSe=VSe;function Ch(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const Hm="$$material";function he(){return he=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},he.apply(this,arguments)}function Ht(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function are(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var GSe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,HSe=are(function(t){return GSe.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function jSe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function XSe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var qSe=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(XSe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=jSe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),yo="-ms-",YM="-moz-",Sr="-webkit-",lre="comm",pB="rule",mB="decl",YSe="@import",cre="@keyframes",KSe="@layer",ZSe=Math.abs,Vk=String.fromCharCode,JSe=Object.assign;function QSe(t,e){return Ks(t,0)^45?(((e<<2^Ks(t,0))<<2^Ks(t,1))<<2^Ks(t,2))<<2^Ks(t,3):0}function ure(t){return t.trim()}function e2e(t,e){return(t=e.exec(t))?t[0]:t}function _r(t,e,n){return t.replace(e,n)}function SO(t,e){return t.indexOf(e)}function Ks(t,e){return t.charCodeAt(e)|0}function ow(t,e,n){return t.slice(e,n)}function xu(t){return t.length}function gB(t){return t.length}function eT(t,e){return e.push(t),t}function t2e(t,e){return t.map(e).join("")}var Wk=1,ty=1,dre=0,Ra=0,Ji=0,Fy="";function Gk(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Wk,column:ty,length:o,return:""}}function a1(t,e){return JSe(Gk("",null,null,"",null,null,0),t,{length:-t.length},e)}function n2e(){return Ji}function r2e(){return Ji=Ra>0?Ks(Fy,--Ra):0,ty--,Ji===10&&(ty=1,Wk--),Ji}function al(){return Ji=Ra<dre?Ks(Fy,Ra++):0,ty++,Ji===10&&(ty=1,Wk++),Ji}function Nu(){return Ks(Fy,Ra)}function qE(){return Ra}function $S(t,e){return ow(Fy,t,e)}function aw(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function fre(t){return Wk=ty=1,dre=xu(Fy=t),Ra=0,[]}function hre(t){return Fy="",t}function YE(t){return ure($S(Ra-1,_O(t===91?t+2:t===40?t+1:t)))}function i2e(t){for(;(Ji=Nu())&&Ji<33;)al();return aw(t)>2||aw(Ji)>3?"":" "}function s2e(t,e){for(;--e&&al()&&!(Ji<48||Ji>102||Ji>57&&Ji<65||Ji>70&&Ji<97););return $S(t,qE()+(e<6&&Nu()==32&&al()==32))}function _O(t){for(;al();)switch(Ji){case t:return Ra;case 34:case 39:t!==34&&t!==39&&_O(Ji);break;case 40:t===41&&_O(t);break;case 92:al();break}return Ra}function o2e(t,e){for(;al()&&t+Ji!==57;)if(t+Ji===84&&Nu()===47)break;return"/*"+$S(e,Ra-1)+"*"+Vk(t===47?t:al())}function a2e(t){for(;!aw(Nu());)al();return $S(t,Ra)}function l2e(t){return hre(KE("",null,null,null,[""],t=fre(t),0,[0],t))}function KE(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,f=0,h=0,p=0,v=1,g=1,m=1,y=0,x="",S=i,_=s,C=r,T=x;g;)switch(p=y,y=al()){case 40:if(p!=108&&Ks(T,d-1)==58){SO(T+=_r(YE(y),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:T+=YE(y);break;case 9:case 10:case 13:case 32:T+=i2e(p);break;case 92:T+=s2e(qE()-1,7);continue;case 47:switch(Nu()){case 42:case 47:eT(c2e(o2e(al(),qE()),e,n),l);break;default:T+="/"}break;case 123*v:a[c++]=xu(T)*m;case 125*v:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:m==-1&&(T=_r(T,/\f/g,"")),h>0&&xu(T)-d&&eT(h>32?fH(T+";",r,n,d-1):fH(_r(T," ","")+";",r,n,d-2),l);break;case 59:T+=";";default:if(eT(C=dH(T,e,n,c,u,i,a,x,S=[],_=[],d),s),y===123)if(u===0)KE(T,e,C,C,S,s,d,a,_);else switch(f===99&&Ks(T,3)===110?100:f){case 100:case 108:case 109:case 115:KE(t,C,C,r&&eT(dH(t,C,C,0,0,i,a,x,i,S=[],d),_),i,_,d,a,r?S:_);break;default:KE(T,C,C,C,[""],_,0,a,_)}}c=u=h=0,v=m=1,x=T="",d=o;break;case 58:d=1+xu(T),h=p;default:if(v<1){if(y==123)--v;else if(y==125&&v++==0&&r2e()==125)continue}switch(T+=Vk(y),y*v){case 38:m=u>0?1:(T+="\f",-1);break;case 44:a[c++]=(xu(T)-1)*m,m=1;break;case 64:Nu()===45&&(T+=YE(al())),f=Nu(),u=d=xu(x=T+=a2e(qE())),y++;break;case 45:p===45&&xu(T)==2&&(v=0)}}return s}function dH(t,e,n,r,i,s,o,a,l,c,u){for(var d=i-1,f=i===0?s:[""],h=gB(f),p=0,v=0,g=0;p<r;++p)for(var m=0,y=ow(t,d+1,d=ZSe(v=o[p])),x=t;m<h;++m)(x=ure(v>0?f[m]+" "+y:_r(y,/&\f/g,f[m])))&&(l[g++]=x);return Gk(t,e,n,i===0?pB:a,l,c,u)}function c2e(t,e,n){return Gk(t,e,n,lre,Vk(n2e()),ow(t,2,-2),0)}function fH(t,e,n,r){return Gk(t,e,n,mB,ow(t,0,r),ow(t,r+1,-1),r)}function Rv(t,e){for(var n="",r=gB(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function u2e(t,e,n,r){switch(t.type){case KSe:if(t.children.length)break;case YSe:case mB:return t.return=t.return||t.value;case lre:return"";case cre:return t.return=t.value+"{"+Rv(t.children,r)+"}";case pB:t.value=t.props.join(",")}return xu(n=Rv(t.children,r))?t.return=t.value+"{"+n+"}":""}function d2e(t){var e=gB(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function f2e(t){return function(e){e.root||(e=e.return)&&t(e)}}var h2e=function(e,n,r){for(var i=0,s=0;i=s,s=Nu(),i===38&&s===12&&(n[r]=1),!aw(s);)al();return $S(e,Ra)},p2e=function(e,n){var r=-1,i=44;do switch(aw(i)){case 0:i===38&&Nu()===12&&(n[r]=1),e[r]+=h2e(Ra-1,n,r);break;case 2:e[r]+=YE(i);break;case 4:if(i===44){e[++r]=Nu()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Vk(i)}while(i=al());return e},m2e=function(e,n){return hre(p2e(fre(e),n))},hH=new WeakMap,g2e=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!hH.get(r))&&!i){hH.set(e,!0);for(var s=[],o=m2e(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},v2e=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function pre(t,e){switch(QSe(t,e)){case 5103:return Sr+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Sr+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Sr+t+YM+t+yo+t+t;case 6828:case 4268:return Sr+t+yo+t+t;case 6165:return Sr+t+yo+"flex-"+t+t;case 5187:return Sr+t+_r(t,/(\w+).+(:[^]+)/,Sr+"box-$1$2"+yo+"flex-$1$2")+t;case 5443:return Sr+t+yo+"flex-item-"+_r(t,/flex-|-self/,"")+t;case 4675:return Sr+t+yo+"flex-line-pack"+_r(t,/align-content|flex-|-self/,"")+t;case 5548:return Sr+t+yo+_r(t,"shrink","negative")+t;case 5292:return Sr+t+yo+_r(t,"basis","preferred-size")+t;case 6060:return Sr+"box-"+_r(t,"-grow","")+Sr+t+yo+_r(t,"grow","positive")+t;case 4554:return Sr+_r(t,/([^-])(transform)/g,"$1"+Sr+"$2")+t;case 6187:return _r(_r(_r(t,/(zoom-|grab)/,Sr+"$1"),/(image-set)/,Sr+"$1"),t,"")+t;case 5495:case 3959:return _r(t,/(image-set\([^]*)/,Sr+"$1$`$1");case 4968:return _r(_r(t,/(.+:)(flex-)?(.*)/,Sr+"box-pack:$3"+yo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Sr+t+t;case 4095:case 3583:case 4068:case 2532:return _r(t,/(.+)-inline(.+)/,Sr+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xu(t)-1-e>6)switch(Ks(t,e+1)){case 109:if(Ks(t,e+4)!==45)break;case 102:return _r(t,/(.+:)(.+)-([^]+)/,"$1"+Sr+"$2-$3$1"+YM+(Ks(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~SO(t,"stretch")?pre(_r(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Ks(t,e+1)!==115)break;case 6444:switch(Ks(t,xu(t)-3-(~SO(t,"!important")&&10))){case 107:return _r(t,":",":"+Sr)+t;case 101:return _r(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Sr+(Ks(t,14)===45?"inline-":"")+"box$3$1"+Sr+"$2$3$1"+yo+"$2box$3")+t}break;case 5936:switch(Ks(t,e+11)){case 114:return Sr+t+yo+_r(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Sr+t+yo+_r(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Sr+t+yo+_r(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Sr+t+yo+t+t}return t}var y2e=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case mB:e.return=pre(e.value,e.length);break;case cre:return Rv([a1(e,{value:_r(e.value,"@","@"+Sr)})],i);case pB:if(e.length)return t2e(e.props,function(s){switch(e2e(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Rv([a1(e,{props:[_r(s,/:(read-\w+)/,":"+YM+"$1")]})],i);case"::placeholder":return Rv([a1(e,{props:[_r(s,/:(plac\w+)/,":"+Sr+"input-$1")]}),a1(e,{props:[_r(s,/:(plac\w+)/,":"+YM+"$1")]}),a1(e,{props:[_r(s,/:(plac\w+)/,yo+"input-$1")]})],i)}return""})}},x2e=[y2e],b2e=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var g=v.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var i=e.stylisPlugins||x2e,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var g=v.getAttribute("data-emotion").split(" "),m=1;m<g.length;m++)s[g[m]]=!0;a.push(v)});var l,c=[g2e,v2e];{var u,d=[u2e,f2e(function(v){u.insert(v)})],f=d2e(c.concat(i,d)),h=function(g){return Rv(l2e(g),f)};l=function(g,m,y,x){u=y,h(g?g+"{"+m.styles+"}":m.styles),x&&(p.inserted[m.name]=!0)}}var p={key:n,sheet:new qSe({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},mre={exports:{}},Rr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ls=typeof Symbol=="function"&&Symbol.for,vB=Ls?Symbol.for("react.element"):60103,yB=Ls?Symbol.for("react.portal"):60106,Hk=Ls?Symbol.for("react.fragment"):60107,jk=Ls?Symbol.for("react.strict_mode"):60108,Xk=Ls?Symbol.for("react.profiler"):60114,qk=Ls?Symbol.for("react.provider"):60109,Yk=Ls?Symbol.for("react.context"):60110,xB=Ls?Symbol.for("react.async_mode"):60111,Kk=Ls?Symbol.for("react.concurrent_mode"):60111,Zk=Ls?Symbol.for("react.forward_ref"):60112,Jk=Ls?Symbol.for("react.suspense"):60113,w2e=Ls?Symbol.for("react.suspense_list"):60120,Qk=Ls?Symbol.for("react.memo"):60115,eI=Ls?Symbol.for("react.lazy"):60116,S2e=Ls?Symbol.for("react.block"):60121,_2e=Ls?Symbol.for("react.fundamental"):60117,C2e=Ls?Symbol.for("react.responder"):60118,T2e=Ls?Symbol.for("react.scope"):60119;function gl(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case vB:switch(t=t.type,t){case xB:case Kk:case Hk:case Xk:case jk:case Jk:return t;default:switch(t=t&&t.$$typeof,t){case Yk:case Zk:case eI:case Qk:case qk:return t;default:return e}}case yB:return e}}}function gre(t){return gl(t)===Kk}Rr.AsyncMode=xB;Rr.ConcurrentMode=Kk;Rr.ContextConsumer=Yk;Rr.ContextProvider=qk;Rr.Element=vB;Rr.ForwardRef=Zk;Rr.Fragment=Hk;Rr.Lazy=eI;Rr.Memo=Qk;Rr.Portal=yB;Rr.Profiler=Xk;Rr.StrictMode=jk;Rr.Suspense=Jk;Rr.isAsyncMode=function(t){return gre(t)||gl(t)===xB};Rr.isConcurrentMode=gre;Rr.isContextConsumer=function(t){return gl(t)===Yk};Rr.isContextProvider=function(t){return gl(t)===qk};Rr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===vB};Rr.isForwardRef=function(t){return gl(t)===Zk};Rr.isFragment=function(t){return gl(t)===Hk};Rr.isLazy=function(t){return gl(t)===eI};Rr.isMemo=function(t){return gl(t)===Qk};Rr.isPortal=function(t){return gl(t)===yB};Rr.isProfiler=function(t){return gl(t)===Xk};Rr.isStrictMode=function(t){return gl(t)===jk};Rr.isSuspense=function(t){return gl(t)===Jk};Rr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Hk||t===Kk||t===Xk||t===jk||t===Jk||t===w2e||typeof t=="object"&&t!==null&&(t.$$typeof===eI||t.$$typeof===Qk||t.$$typeof===qk||t.$$typeof===Yk||t.$$typeof===Zk||t.$$typeof===_2e||t.$$typeof===C2e||t.$$typeof===T2e||t.$$typeof===S2e)};Rr.typeOf=gl;mre.exports=Rr;var E2e=mre.exports,vre=E2e,M2e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},A2e={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},yre={};yre[vre.ForwardRef]=M2e;yre[vre.Memo]=A2e;var k2e=!0;function I2e(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var xre=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||k2e===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},bre=function(e,n,r){xre(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function R2e(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var P2e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},N2e=/[A-Z]|^ms/g,$2e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,wre=function(e){return e.charCodeAt(1)===45},pH=function(e){return e!=null&&typeof e!="boolean"},JN=are(function(t){return wre(t)?t:t.replace(N2e,"-$&").toLowerCase()}),mH=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace($2e,function(r,i,s){return bu={name:i,styles:s,next:bu},i})}return P2e[e]!==1&&!wre(e)&&typeof n=="number"&&n!==0?n+"px":n};function lw(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return bu={name:n.name,styles:n.styles,next:bu},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)bu={name:r.name,styles:r.styles,next:bu},r=r.next;var i=n.styles+";";return i}return D2e(t,e,n)}case"function":{if(t!==void 0){var s=bu,o=n(t);return bu=s,lw(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function D2e(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=lw(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":pH(o)&&(r+=JN(s)+":"+mH(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)pH(o[a])&&(r+=JN(s)+":"+mH(s,o[a])+";");else{var l=lw(t,e,o);switch(s){case"animation":case"animationName":{r+=JN(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var gH=/label:\s*([^\s;\n{]+)\s*(;|$)/g,bu,bB=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";bu=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=lw(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=lw(r,n,e[a]),i&&(s+=o[a]);gH.lastIndex=0;for(var l="",c;(c=gH.exec(s))!==null;)l+="-"+c[1];var u=R2e(s)+l;return{name:u,styles:s,next:bu}},L2e=function(e){return e()},Sre=wM.useInsertionEffect?wM.useInsertionEffect:!1,O2e=Sre||L2e,vH=Sre||R.useLayoutEffect,_re=R.createContext(typeof HTMLElement<"u"?b2e({key:"css"}):null);_re.Provider;var Cre=function(e){return R.forwardRef(function(n,r){var i=R.useContext(_re);return e(n,i,r)})},tI=R.createContext({}),F2e=Cre(function(t,e){var n=t.styles,r=bB([n],void 0,R.useContext(tI)),i=R.useRef();return vH(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),vH(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&bre(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function B2e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return bB(e)}var wB=function(){var e=B2e.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},U2e=HSe,z2e=function(e){return e!=="theme"},yH=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?U2e:z2e},xH=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},V2e=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return xre(n,r,i),O2e(function(){return bre(n,r,i)}),null},W2e=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=xH(e,n,r),l=a||yH(i),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var f=u.length,h=1;h<f;h++)d.push(u[h],u[0][h])}var p=Cre(function(v,g,m){var y=c&&v.as||i,x="",S=[],_=v;if(v.theme==null){_={};for(var C in v)_[C]=v[C];_.theme=R.useContext(tI)}typeof v.className=="string"?x=I2e(g.registered,S,v.className):v.className!=null&&(x=v.className+" ");var T=bB(d.concat(S),g.registered,_);x+=g.key+"-"+T.name,o!==void 0&&(x+=" "+o);var A=c&&a===void 0?yH(y):l,M={};for(var E in v)c&&E==="as"||A(E)&&(M[E]=v[E]);return M.className=x,M.ref=m,R.createElement(R.Fragment,null,R.createElement(V2e,{cache:g,serialized:T,isStringTag:typeof y=="string"}),R.createElement(y,M))});return p.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=d,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(v,g){return t(v,he({},n,g,{shouldForwardProp:xH(p,g,!0)})).apply(void 0,d)},p}},G2e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],CO=W2e.bind();G2e.forEach(function(t){CO[t]=CO(t)});var Tre={exports:{}},H2e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",j2e=H2e,X2e=j2e;function Ere(){}function Mre(){}Mre.resetWarningCache=Ere;var q2e=function(){function t(r,i,s,o,a,l){if(l!==X2e){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Mre,resetWarningCache:Ere};return n.PropTypes=n,n};Tre.exports=q2e();var Y2e=Tre.exports;const ve=ls(Y2e);function K2e(t){return t==null||Object.keys(t).length===0}function Z2e(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(K2e(i)?n:i):e;return L.jsx(F2e,{styles:r})}function Are(t,e){return CO(t,e)}const J2e=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))};function Pd(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function kre(t){if(!Pd(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=kre(t[n])}),e}function Aa(t,e,n={clone:!0}){const r=n.clone?he({},t):t;return Pd(t)&&Pd(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(Pd(e[i])&&i in t&&Pd(t[i])?r[i]=Aa(t[i],e[i],n):n.clone?r[i]=Pd(e[i])?kre(e[i]):e[i]:r[i]=e[i])}),r}function Et(t){if(typeof t!="string")throw new Error(Ch(7));return t.charAt(0).toUpperCase()+t.slice(1)}function TO(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function SB(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function Q2e(t,e){return()=>null}function ub(t,e){var n,r;return R.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function Io(t){return t&&t.ownerDocument||document}function Th(t){return Io(t).defaultView||window}function e_e(t,e){return()=>null}function cw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const t_e=typeof window<"u"?R.useLayoutEffect:R.useEffect,jc=t_e;let bH=0;function n_e(t){const[e,n]=R.useState(t),r=t||e;return R.useEffect(()=>{e==null&&(bH+=1,n(`mui-${bH}`))},[e]),r}const wH=wM.useId;function DS(t){if(wH!==void 0){const e=wH();return t??e}return n_e(t)}function r_e(t,e,n,r,i){return null}function Pv({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=R.useRef(t!==void 0),[s,o]=R.useState(e),a=i?t:s,l=R.useCallback(c=>{i||o(c)},[]);return[a,l]}function Dc(t){const e=R.useRef(t);return jc(()=>{e.current=t}),R.useRef((...n)=>(0,e.current)(...n)).current}function Hi(...t){return R.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{cw(n,e)})},t)}let nI=!0,EO=!1,SH;const i_e={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function s_e(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&i_e[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function o_e(t){t.metaKey||t.altKey||t.ctrlKey||(nI=!0)}function QN(){nI=!1}function a_e(){this.visibilityState==="hidden"&&EO&&(nI=!0)}function l_e(t){t.addEventListener("keydown",o_e,!0),t.addEventListener("mousedown",QN,!0),t.addEventListener("pointerdown",QN,!0),t.addEventListener("touchstart",QN,!0),t.addEventListener("visibilitychange",a_e,!0)}function c_e(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return nI||s_e(e)}function _B(){const t=R.useCallback(i=>{i!=null&&l_e(i.ownerDocument)},[]),e=R.useRef(!1);function n(){return e.current?(EO=!0,window.clearTimeout(SH),SH=window.setTimeout(()=>{EO=!1},100),e.current=!1,!0):!1}function r(i){return c_e(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function Ire(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}const u_e=t=>{const e=R.useRef({});return R.useEffect(()=>{e.current=t}),e.current},d_e=u_e;function CB(t,e){const n=he({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=he({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=he({},s),Object.keys(i).forEach(o=>{n[r][o]=CB(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function jn(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}const _H=t=>t,f_e=()=>{let t=_H;return{configure(e){t=e},generate(e){return t(e)},reset(){t=_H}}},h_e=f_e(),TB=h_e,p_e={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Un(t,e,n="Mui"){const r=p_e[e];return r?`${n}-${r}`:`${TB.generate(t)}-${e}`}function $n(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=Un(t,i,n)}),r}const m_e=["values","unit","step"],g_e=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>he({},n,{[r.key]:r.val}),{})};function v_e(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=Ht(t,m_e),s=g_e(e),o=Object.keys(s);function a(f){return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n})`}function l(f){return`@media (max-width:${(typeof e[f]=="number"?e[f]:f)-r/100}${n})`}function c(f,h){const p=o.indexOf(h);return`@media (min-width:${typeof e[f]=="number"?e[f]:f}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:h)-r/100}${n})`}function u(f){return o.indexOf(f)+1<o.length?c(f,o[o.indexOf(f)+1]):a(f)}function d(f){const h=o.indexOf(f);return h===0?a(o[1]):h===o.length-1?l(o[h]):c(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return he({keys:o,values:s,up:a,down:l,between:c,only:u,not:d,unit:n},i)}const y_e={borderRadius:4},x_e=y_e;function db(t,e){return e?Aa(t,e,{clone:!1}):t}const EB={xs:0,sm:600,md:900,lg:1200,xl:1536},CH={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${EB[t]}px)`};function ec(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||CH;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||CH;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||EB).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function b_e(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function w_e(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function S_e(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,s)=>{s<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function rI({values:t,breakpoints:e,base:n}){const r=n||S_e(t,e),i=Object.keys(r);if(i.length===0)return t;let s;return i.reduce((o,a,l)=>(Array.isArray(t)?(o[a]=t[l]!=null?t[l]:t[s],s=l):typeof t=="object"?(o[a]=t[a]!=null?t[a]:t[s],s=a):o[a]=t,o),{})}function ny(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function KM(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=ny(t,n)||r,e&&(i=e(i,r,t)),i}function Xi(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=ny(l,r)||{};return ec(o,a,d=>{let f=KM(c,i,d);return d===f&&typeof d=="string"&&(f=KM(c,i,`${e}${d==="default"?"":Et(d)}`,d)),n===!1?f:{[n]:f}})};return s.propTypes={},s.filterProps=[e],s}function __e(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const C_e={m:"margin",p:"padding"},T_e={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},TH={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},E_e=__e(t=>{if(t.length>2)if(TH[t])t=TH[t];else return[t];const[e,n]=t.split(""),r=C_e[e],i=T_e[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),MB=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],AB=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...MB,...AB];function LS(t,e,n,r){var i;const s=(i=ny(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function Rre(t){return LS(t,"spacing",8)}function OS(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function M_e(t,e){return n=>t.reduce((r,i)=>(r[i]=OS(e,n),r),{})}function A_e(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=E_e(n),s=M_e(i,r),o=t[n];return ec(t,o,s)}function Pre(t,e){const n=Rre(t.theme);return Object.keys(t).map(r=>A_e(t,e,r,n)).reduce(db,{})}function _i(t){return Pre(t,MB)}_i.propTypes={};_i.filterProps=MB;function Ci(t){return Pre(t,AB)}Ci.propTypes={};Ci.filterProps=AB;function k_e(t=8){if(t.mui)return t;const e=Rre({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function iI(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?db(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Ll(t){return typeof t!="number"?t:`${t}px solid`}function lc(t,e){return Xi({prop:t,themeKey:"borders",transform:e})}const I_e=lc("border",Ll),R_e=lc("borderTop",Ll),P_e=lc("borderRight",Ll),N_e=lc("borderBottom",Ll),$_e=lc("borderLeft",Ll),D_e=lc("borderColor"),L_e=lc("borderTopColor"),O_e=lc("borderRightColor"),F_e=lc("borderBottomColor"),B_e=lc("borderLeftColor"),U_e=lc("outline",Ll),z_e=lc("outlineColor"),sI=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=LS(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:OS(e,r)});return ec(t,t.borderRadius,n)}return null};sI.propTypes={};sI.filterProps=["borderRadius"];iI(I_e,R_e,P_e,N_e,$_e,D_e,L_e,O_e,F_e,B_e,sI,U_e,z_e);const oI=t=>{if(t.gap!==void 0&&t.gap!==null){const e=LS(t.theme,"spacing",8),n=r=>({gap:OS(e,r)});return ec(t,t.gap,n)}return null};oI.propTypes={};oI.filterProps=["gap"];const aI=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=LS(t.theme,"spacing",8),n=r=>({columnGap:OS(e,r)});return ec(t,t.columnGap,n)}return null};aI.propTypes={};aI.filterProps=["columnGap"];const lI=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=LS(t.theme,"spacing",8),n=r=>({rowGap:OS(e,r)});return ec(t,t.rowGap,n)}return null};lI.propTypes={};lI.filterProps=["rowGap"];const V_e=Xi({prop:"gridColumn"}),W_e=Xi({prop:"gridRow"}),G_e=Xi({prop:"gridAutoFlow"}),H_e=Xi({prop:"gridAutoColumns"}),j_e=Xi({prop:"gridAutoRows"}),X_e=Xi({prop:"gridTemplateColumns"}),q_e=Xi({prop:"gridTemplateRows"}),Y_e=Xi({prop:"gridTemplateAreas"}),K_e=Xi({prop:"gridArea"});iI(oI,aI,lI,V_e,W_e,G_e,H_e,j_e,X_e,q_e,Y_e,K_e);function Nv(t,e){return e==="grey"?e:t}const Z_e=Xi({prop:"color",themeKey:"palette",transform:Nv}),J_e=Xi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Nv}),Q_e=Xi({prop:"backgroundColor",themeKey:"palette",transform:Nv});iI(Z_e,J_e,Q_e);function Za(t){return t<=1&&t!==0?`${t*100}%`:t}const eCe=Xi({prop:"width",transform:Za}),kB=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||EB[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Za(n)}};return ec(t,t.maxWidth,e)}return null};kB.filterProps=["maxWidth"];const tCe=Xi({prop:"minWidth",transform:Za}),nCe=Xi({prop:"height",transform:Za}),rCe=Xi({prop:"maxHeight",transform:Za}),iCe=Xi({prop:"minHeight",transform:Za});Xi({prop:"size",cssProperty:"width",transform:Za});Xi({prop:"size",cssProperty:"height",transform:Za});const sCe=Xi({prop:"boxSizing"});iI(eCe,kB,tCe,nCe,rCe,iCe,sCe);const oCe={border:{themeKey:"borders",transform:Ll},borderTop:{themeKey:"borders",transform:Ll},borderRight:{themeKey:"borders",transform:Ll},borderBottom:{themeKey:"borders",transform:Ll},borderLeft:{themeKey:"borders",transform:Ll},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ll},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:sI},color:{themeKey:"palette",transform:Nv},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Nv},backgroundColor:{themeKey:"palette",transform:Nv},p:{style:Ci},pt:{style:Ci},pr:{style:Ci},pb:{style:Ci},pl:{style:Ci},px:{style:Ci},py:{style:Ci},padding:{style:Ci},paddingTop:{style:Ci},paddingRight:{style:Ci},paddingBottom:{style:Ci},paddingLeft:{style:Ci},paddingX:{style:Ci},paddingY:{style:Ci},paddingInline:{style:Ci},paddingInlineStart:{style:Ci},paddingInlineEnd:{style:Ci},paddingBlock:{style:Ci},paddingBlockStart:{style:Ci},paddingBlockEnd:{style:Ci},m:{style:_i},mt:{style:_i},mr:{style:_i},mb:{style:_i},ml:{style:_i},mx:{style:_i},my:{style:_i},margin:{style:_i},marginTop:{style:_i},marginRight:{style:_i},marginBottom:{style:_i},marginLeft:{style:_i},marginX:{style:_i},marginY:{style:_i},marginInline:{style:_i},marginInlineStart:{style:_i},marginInlineEnd:{style:_i},marginBlock:{style:_i},marginBlockStart:{style:_i},marginBlockEnd:{style:_i},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:oI},rowGap:{style:lI},columnGap:{style:aI},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Za},maxWidth:{style:kB},minWidth:{transform:Za},height:{transform:Za},maxHeight:{transform:Za},minHeight:{transform:Za},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},cI=oCe;function aCe(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function lCe(t,e){return typeof t=="function"?t(e):t}function cCe(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const f=ny(i,c)||{};return d?d(o):ec(o,r,p=>{let v=KM(f,u,p);return p===v&&typeof p=="string"&&(v=KM(f,u,`${n}${p==="default"?"":Et(p)}`,p)),l===!1?v:{[l]:v}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:cI;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const u=b_e(s.breakpoints),d=Object.keys(u);let f=u;return Object.keys(c).forEach(h=>{const p=lCe(c[h],s);if(p!=null)if(typeof p=="object")if(o[h])f=db(f,t(h,p,s,o));else{const v=ec({theme:s},p,g=>({[h]:g}));aCe(v,p)?f[h]=e({sx:p,theme:s}):f=db(f,v)}else f=db(f,t(h,p,s,o))}),w_e(d,f)}return Array.isArray(i)?i.map(a):a(i)}return e}const Nre=cCe();Nre.filterProps=["sx"];const uI=Nre,uCe=["breakpoints","palette","spacing","shape"];function FS(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=Ht(t,uCe),a=v_e(n),l=k_e(i);let c=Aa({breakpoints:a,direction:"ltr",components:{},palette:he({mode:"light"},r),spacing:l,shape:he({},x_e,s)},o);return c=e.reduce((u,d)=>Aa(u,d),c),c.unstable_sxConfig=he({},cI,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return uI({sx:d,theme:this})},c}function dCe(t){return Object.keys(t).length===0}function IB(t=null){const e=R.useContext(tI);return!e||dCe(e)?t:e}const fCe=FS();function BS(t=fCe){return IB(t)}function hCe({styles:t,themeId:e,defaultTheme:n={}}){const r=BS(n),i=typeof t=="function"?t(e&&r[e]||r):t;return L.jsx(Z2e,{styles:i})}const pCe=["sx"],mCe=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:cI;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function dI(t){const{sx:e}=t,n=Ht(t,pCe),{systemProps:r,otherProps:i}=mCe(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Pd(a)?he({},r,a):r}:s=he({},r,e),he({},i,{sx:s})}function $re(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=$re(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Yt(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=$re(t))&&(r&&(r+=" "),r+=e);return r}const gCe=["className","component"];function vCe(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=Are("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(uI);return R.forwardRef(function(l,c){const u=BS(n),d=dI(l),{className:f,component:h="div"}=d,p=Ht(d,gCe);return L.jsx(s,he({as:h,ref:c,className:Yt(f,i?i(r):r),theme:e&&u[e]||u},p))})}const yCe=["variant"];function EH(t){return t.length===0}function Dre(t){const{variant:e}=t,n=Ht(t,yCe);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=EH(r)?t[i]:Et(t[i]):r+=`${EH(r)?i:Et(i)}${Et(t[i].toString())}`}),r}const xCe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function bCe(t){return Object.keys(t).length===0}function wCe(t){return typeof t=="string"&&t.charCodeAt(0)>96}const SCe=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,ZM=t=>{let e=0;const n={};return t&&t.forEach(r=>{let i="";typeof r.props=="function"?(i=`callback${e}`,e+=1):i=Dre(r.props),n[i]=r.style}),n},_Ce=(t,e)=>{let n=[];return e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants),ZM(n)},JM=(t,e,n)=>{const{ownerState:r={}}=t,i=[];let s=0;return n&&n.forEach(o=>{let a=!0;if(typeof o.props=="function"){const l=he({},t,r);a=o.props(l)}else Object.keys(o.props).forEach(l=>{r[l]!==o.props[l]&&t[l]!==o.props[l]&&(a=!1)});a&&(typeof o.props=="function"?i.push(e[`callback${s}`]):i.push(e[Dre(o.props)])),typeof o.props=="function"&&(s+=1)}),i},CCe=(t,e,n,r)=>{var i;const s=n==null||(i=n.components)==null||(i=i[r])==null?void 0:i.variants;return JM(t,e,s)};function fb(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const TCe=FS(),ECe=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function ZE({defaultTheme:t,theme:e,themeId:n}){return bCe(e)?t:e[n]||e}function MCe(t){return t?(e,n)=>n[t]:null}const MH=({styledArg:t,props:e,defaultTheme:n,themeId:r})=>{const i=t(he({},e,{theme:ZE(he({},e,{defaultTheme:n,themeId:r}))}));let s;if(i&&i.variants&&(s=i.variants,delete i.variants),s){const o=JM(e,ZM(s),s);return[i,...o]}return i};function Lre(t={}){const{themeId:e,defaultTheme:n=TCe,rootShouldForwardProp:r=fb,slotShouldForwardProp:i=fb}=t,s=o=>uI(he({},o,{theme:ZE(he({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{J2e(o,S=>S.filter(_=>!(_!=null&&_.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:d,overridesResolver:f=MCe(ECe(c))}=a,h=Ht(a,xCe),p=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,v=d||!1;let g,m=fb;c==="Root"||c==="root"?m=r:c?m=i:wCe(o)&&(m=void 0);const y=Are(o,he({shouldForwardProp:m,label:g},h)),x=(S,..._)=>{const C=_?_.map(E=>{if(typeof E=="function"&&E.__emotion_real!==E)return P=>MH({styledArg:E,props:P,defaultTheme:n,themeId:e});if(Pd(E)){let P=E,N;return E&&E.variants&&(N=E.variants,delete P.variants,P=F=>{let $=E;return JM(F,ZM(N),N).forEach(z=>{$=Aa($,z)}),$}),P}return E}):[];let T=S;if(Pd(S)){let E;S&&S.variants&&(E=S.variants,delete T.variants,T=P=>{let N=S;return JM(P,ZM(E),E).forEach($=>{N=Aa(N,$)}),N})}else typeof S=="function"&&S.__emotion_real!==S&&(T=E=>MH({styledArg:S,props:E,defaultTheme:n,themeId:e}));l&&f&&C.push(E=>{const P=ZE(he({},E,{defaultTheme:n,themeId:e})),N=SCe(l,P);if(N){const F={};return Object.entries(N).forEach(([$,O])=>{F[$]=typeof O=="function"?O(he({},E,{theme:P})):O}),f(E,F)}return null}),l&&!p&&C.push(E=>{const P=ZE(he({},E,{defaultTheme:n,themeId:e}));return CCe(E,_Ce(l,P),P,l)}),v||C.push(s);const A=C.length-_.length;if(Array.isArray(S)&&A>0){const E=new Array(A).fill("");T=[...S,...E],T.raw=[...S.raw,...E]}const M=y(T,...C);return o.muiName&&(M.muiName=o.muiName),M};return y.withConfig&&(x.withConfig=y.withConfig),x}}const ACe=Lre(),RB=ACe;function kCe(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:CB(e.components[n].defaultProps,r)}function PB({props:t,name:e,defaultTheme:n,themeId:r}){let i=BS(n);return r&&(i=i[r]||i),kCe({theme:i,name:e,props:t})}function NB(t,e=0,n=1){return Math.min(Math.max(e,t),n)}function ICe(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function jm(t){if(t.type)return t;if(t.charAt(0)==="#")return jm(ICe(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Ch(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(Ch(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}function fI(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function RCe(t){t=jm(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,u=(c+n/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),fI({type:a,values:l})}function AH(t){t=jm(t);let e=t.type==="hsl"||t.type==="hsla"?jm(RCe(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function PCe(t,e){const n=AH(t),r=AH(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Xr(t,e){return t=jm(t),e=NB(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,fI(t)}function NCe(t,e){if(t=jm(t),e=NB(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return fI(t)}function $Ce(t,e){if(t=jm(t),e=NB(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return fI(t)}const DCe=R.createContext(null),Ore=DCe;function Fre(){return R.useContext(Ore)}const LCe=typeof Symbol=="function"&&Symbol.for,OCe=LCe?Symbol.for("mui.nested"):"__THEME_NESTED__";function FCe(t,e){return typeof e=="function"?e(t):he({},t,e)}function BCe(t){const{children:e,theme:n}=t,r=Fre(),i=R.useMemo(()=>{const s=r===null?n:FCe(r,n);return s!=null&&(s[OCe]=r!==null),s},[n,r]);return L.jsx(Ore.Provider,{value:i,children:e})}const kH={};function IH(t,e,n,r=!1){return R.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const s=n(i),o=t?he({},e,{[t]:s}):s;return r?()=>o:o}return t?he({},e,{[t]:n}):he({},e,n)},[t,e,n,r])}function UCe(t){const{children:e,theme:n,themeId:r}=t,i=IB(kH),s=Fre()||kH,o=IH(r,i,n),a=IH(r,s,n,!0);return L.jsx(BCe,{theme:a,children:L.jsx(tI.Provider,{value:o,children:e})})}const zCe=["className","component","disableGutters","fixed","maxWidth","classes"],VCe=FS(),WCe=RB("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${Et(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),GCe=t=>PB({props:t,name:"MuiContainer",defaultTheme:VCe}),HCe=(t,e)=>{const n=l=>Un(e,l),{classes:r,fixed:i,disableGutters:s,maxWidth:o}=t,a={root:["root",o&&`maxWidth${Et(String(o))}`,i&&"fixed",s&&"disableGutters"]};return jn(a,n,r)};function jCe(t={}){const{createStyledComponent:e=WCe,useThemeProps:n=GCe,componentName:r="MuiContainer"}=t,i=e(({theme:o,ownerState:a})=>he({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!a.disableGutters&&{paddingLeft:o.spacing(2),paddingRight:o.spacing(2),[o.breakpoints.up("sm")]:{paddingLeft:o.spacing(3),paddingRight:o.spacing(3)}}),({theme:o,ownerState:a})=>a.fixed&&Object.keys(o.breakpoints.values).reduce((l,c)=>{const u=c,d=o.breakpoints.values[u];return d!==0&&(l[o.breakpoints.up(u)]={maxWidth:`${d}${o.breakpoints.unit}`}),l},{}),({theme:o,ownerState:a})=>he({},a.maxWidth==="xs"&&{[o.breakpoints.up("xs")]:{maxWidth:Math.max(o.breakpoints.values.xs,444)}},a.maxWidth&&a.maxWidth!=="xs"&&{[o.breakpoints.up(a.maxWidth)]:{maxWidth:`${o.breakpoints.values[a.maxWidth]}${o.breakpoints.unit}`}}));return R.forwardRef(function(a,l){const c=n(a),{className:u,component:d="div",disableGutters:f=!1,fixed:h=!1,maxWidth:p="lg"}=c,v=Ht(c,zCe),g=he({},c,{component:d,disableGutters:f,fixed:h,maxWidth:p}),m=HCe(g,r);return L.jsx(i,he({as:d,ownerState:g,className:Yt(m.root,u),ref:l},v))})}const XCe=(t,e)=>t.filter(n=>e.includes(n)),By=(t,e,n)=>{const r=t.keys[0];Array.isArray(e)?e.forEach((i,s)=>{n((o,a)=>{s<=t.keys.length-1&&(s===0?Object.assign(o,a):o[t.up(t.keys[s])]=a)},i)}):e&&typeof e=="object"?(Object.keys(e).length>t.keys.length?t.keys:XCe(t.keys,Object.keys(e))).forEach(s=>{if(t.keys.indexOf(s)!==-1){const o=e[s];o!==void 0&&n((a,l)=>{r===s?Object.assign(a,l):a[t.up(s)]=l},o)}}):(typeof e=="number"||typeof e=="string")&&n((i,s)=>{Object.assign(i,s)},e)};function sf(t){return t?`Level${t}`:""}function US(t){return t.unstable_level>0&&t.container}function Bre(t){return function(n){return`var(--Grid-${n}Spacing${sf(t.unstable_level)})`}}function $B(t){return function(n){return t.unstable_level===0?`var(--Grid-${n}Spacing)`:`var(--Grid-${n}Spacing${sf(t.unstable_level-1)})`}}function DB(t){return t.unstable_level===0?"var(--Grid-columns)":`var(--Grid-columns${sf(t.unstable_level-1)})`}const qCe=({theme:t,ownerState:e})=>{const n=Bre(e),r={};return By(t.breakpoints,e.gridSize,(i,s)=>{let o={};s===!0&&(o={flexBasis:0,flexGrow:1,maxWidth:"100%"}),s==="auto"&&(o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof s=="number"&&(o={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${s} / ${DB(e)}${US(e)?` + ${n("column")}`:""})`}),i(r,o)}),r},YCe=({theme:t,ownerState:e})=>{const n={};return By(t.breakpoints,e.gridOffset,(r,i)=>{let s={};i==="auto"&&(s={marginLeft:"auto"}),typeof i=="number"&&(s={marginLeft:i===0?"0px":`calc(100% * ${i} / ${DB(e)})`}),r(n,s)}),n},KCe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n=US(e)?{[`--Grid-columns${sf(e.unstable_level)}`]:DB(e)}:{"--Grid-columns":12};return By(t.breakpoints,e.columns,(r,i)=>{r(n,{[`--Grid-columns${sf(e.unstable_level)}`]:i})}),n},ZCe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n=$B(e),r=US(e)?{[`--Grid-rowSpacing${sf(e.unstable_level)}`]:n("row")}:{};return By(t.breakpoints,e.rowSpacing,(i,s)=>{var o;i(r,{[`--Grid-rowSpacing${sf(e.unstable_level)}`]:typeof s=="string"?s:(o=t.spacing)==null?void 0:o.call(t,s)})}),r},JCe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n=$B(e),r=US(e)?{[`--Grid-columnSpacing${sf(e.unstable_level)}`]:n("column")}:{};return By(t.breakpoints,e.columnSpacing,(i,s)=>{var o;i(r,{[`--Grid-columnSpacing${sf(e.unstable_level)}`]:typeof s=="string"?s:(o=t.spacing)==null?void 0:o.call(t,s)})}),r},QCe=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return By(t.breakpoints,e.direction,(r,i)=>{r(n,{flexDirection:i})}),n},eTe=({ownerState:t})=>{const e=Bre(t),n=$B(t);return he({minWidth:0,boxSizing:"border-box"},t.container&&he({display:"flex",flexWrap:"wrap"},t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},{margin:`calc(${e("row")} / -2) calc(${e("column")} / -2)`},t.disableEqualOverflow&&{margin:`calc(${e("row")} * -1) 0px 0px calc(${e("column")} * -1)`}),(!t.container||US(t))&&he({padding:`calc(${n("row")} / 2) calc(${n("column")} / 2)`},(t.disableEqualOverflow||t.parentDisableEqualOverflow)&&{padding:`${n("row")} 0px 0px ${n("column")}`}))},tTe=t=>{const e=[];return Object.entries(t).forEach(([n,r])=>{r!==!1&&r!==void 0&&e.push(`grid-${n}-${String(r)}`)}),e},nTe=(t,e="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(t))return[`spacing-${e}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const r=[];return Object.entries(t).forEach(([i,s])=>{n(s)&&r.push(`spacing-${i}-${String(s)}`)}),r}return[]},rTe=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([e,n])=>`direction-${e}-${n}`):[`direction-xs-${String(t)}`],iTe=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],sTe=FS(),oTe=RB("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>e.root});function aTe(t){return PB({props:t,name:"MuiGrid",defaultTheme:sTe})}function lTe(t={}){const{createStyledComponent:e=oTe,useThemeProps:n=aTe,componentName:r="MuiGrid"}=t,i=R.createContext(void 0),s=(l,c)=>{const{container:u,direction:d,spacing:f,wrap:h,gridSize:p}=l,v={root:["root",u&&"container",h!=="wrap"&&`wrap-xs-${String(h)}`,...rTe(d),...tTe(p),...u?nTe(f,c.breakpoints.keys[0]):[]]};return jn(v,g=>Un(r,g),{})},o=e(KCe,JCe,ZCe,qCe,QCe,eTe,YCe),a=R.forwardRef(function(c,u){var d,f,h,p,v,g,m,y;const x=BS(),S=n(c),_=dI(S),C=R.useContext(i),{className:T,children:A,columns:M=12,container:E=!1,component:P="div",direction:N="row",wrap:F="wrap",spacing:$=0,rowSpacing:O=$,columnSpacing:z=$,disableEqualOverflow:X,unstable_level:D=0}=_,B=Ht(_,iTe);let V=X;D&&X!==void 0&&(V=c.disableEqualOverflow);const W={},j={},J={};Object.entries(B).forEach(([le,H])=>{x.breakpoints.values[le]!==void 0?W[le]=H:x.breakpoints.values[le.replace("Offset","")]!==void 0?j[le.replace("Offset","")]=H:J[le]=H});const Q=(d=c.columns)!=null?d:D?void 0:M,te=(f=c.spacing)!=null?f:D?void 0:$,re=(h=(p=c.rowSpacing)!=null?p:c.spacing)!=null?h:D?void 0:O,se=(v=(g=c.columnSpacing)!=null?g:c.spacing)!=null?v:D?void 0:z,fe=he({},_,{level:D,columns:Q,container:E,direction:N,wrap:F,spacing:te,rowSpacing:re,columnSpacing:se,gridSize:W,gridOffset:j,disableEqualOverflow:(m=(y=V)!=null?y:C)!=null?m:!1,parentDisableEqualOverflow:C}),ae=s(fe,x);let ye=L.jsx(o,he({ref:u,as:P,ownerState:fe,className:Yt(ae.root,T)},J,{children:R.Children.map(A,le=>{if(R.isValidElement(le)&&ub(le,["Grid"])){var H;return R.cloneElement(le,{unstable_level:(H=le.props.unstable_level)!=null?H:D+1})}return le})}));return V!==void 0&&V!==(C??!1)&&(ye=L.jsx(i.Provider,{value:V,children:ye})),ye});return a.muiName="Grid",a}function cTe(t,e){return he({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const uTe=["mode","contrastThreshold","tonalOffset"],RH={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:sw.white,default:sw.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},e$={text:{primary:sw.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:sw.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function PH(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=$Ce(t.main,i):e==="dark"&&(t.dark=NCe(t.main,s)))}function dTe(t="light"){return t==="dark"?{main:d0[200],light:d0[50],dark:d0[400]}:{main:d0[700],light:d0[400],dark:d0[800]}}function fTe(t="light"){return t==="dark"?{main:u0[200],light:u0[50],dark:u0[400]}:{main:u0[500],light:u0[300],dark:u0[700]}}function hTe(t="light"){return t==="dark"?{main:c0[500],light:c0[300],dark:c0[700]}:{main:c0[700],light:c0[400],dark:c0[800]}}function pTe(t="light"){return t==="dark"?{main:f0[400],light:f0[300],dark:f0[700]}:{main:f0[700],light:f0[500],dark:f0[900]}}function mTe(t="light"){return t==="dark"?{main:h0[400],light:h0[300],dark:h0[700]}:{main:h0[800],light:h0[500],dark:h0[900]}}function gTe(t="light"){return t==="dark"?{main:o1[400],light:o1[300],dark:o1[700]}:{main:"#ed6c02",light:o1[500],dark:o1[900]}}function vTe(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=Ht(t,uTe),s=t.primary||dTe(e),o=t.secondary||fTe(e),a=t.error||hTe(e),l=t.info||pTe(e),c=t.success||mTe(e),u=t.warning||gTe(e);function d(v){return PCe(v,e$.text.primary)>=n?e$.text.primary:RH.text.primary}const f=({color:v,name:g,mainShade:m=500,lightShade:y=300,darkShade:x=700})=>{if(v=he({},v),!v.main&&v[m]&&(v.main=v[m]),!v.hasOwnProperty("main"))throw new Error(Ch(11,g?` (${g})`:"",m));if(typeof v.main!="string")throw new Error(Ch(12,g?` (${g})`:"",JSON.stringify(v.main)));return PH(v,"light",y,r),PH(v,"dark",x,r),v.contrastText||(v.contrastText=d(v.main)),v},h={dark:e$,light:RH};return Aa(he({common:he({},sw),mode:e,primary:f({color:s,name:"primary"}),secondary:f({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:a,name:"error"}),warning:f({color:u,name:"warning"}),info:f({color:l,name:"info"}),success:f({color:c,name:"success"}),grey:WSe,contrastThreshold:n,getContrastText:d,augmentColor:f,tonalOffset:r},h[e]),i)}const yTe=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function xTe(t){return Math.round(t*1e5)/1e5}const NH={textTransform:"uppercase"},$H='"Roboto", "Helvetica", "Arial", sans-serif';function bTe(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=$H,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d}=n,f=Ht(n,yTe),h=i/14,p=d||(m=>`${m/c*h}rem`),v=(m,y,x,S,_)=>he({fontFamily:r,fontWeight:m,fontSize:p(y),lineHeight:x},r===$H?{letterSpacing:`${xTe(S/y)}em`}:{},_,u),g={h1:v(s,96,1.167,-1.5),h2:v(s,60,1.2,-.5),h3:v(o,48,1.167,0),h4:v(o,34,1.235,.25),h5:v(o,24,1.334,0),h6:v(a,20,1.6,.15),subtitle1:v(o,16,1.75,.15),subtitle2:v(a,14,1.57,.1),body1:v(o,16,1.5,.15),body2:v(o,14,1.43,.15),button:v(a,14,1.75,.4,NH),caption:v(o,12,1.66,.4),overline:v(o,12,2.66,1,NH),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Aa(he({htmlFontSize:c,pxToRem:p,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},g),f,{clone:!1})}const wTe=.2,STe=.14,_Te=.12;function oi(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${wTe})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${STe})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${_Te})`].join(",")}const CTe=["none",oi(0,2,1,-1,0,1,1,0,0,1,3,0),oi(0,3,1,-2,0,2,2,0,0,1,5,0),oi(0,3,3,-2,0,3,4,0,0,1,8,0),oi(0,2,4,-1,0,4,5,0,0,1,10,0),oi(0,3,5,-1,0,5,8,0,0,1,14,0),oi(0,3,5,-1,0,6,10,0,0,1,18,0),oi(0,4,5,-2,0,7,10,1,0,2,16,1),oi(0,5,5,-3,0,8,10,1,0,3,14,2),oi(0,5,6,-3,0,9,12,1,0,3,16,2),oi(0,6,6,-3,0,10,14,1,0,4,18,3),oi(0,6,7,-4,0,11,15,1,0,4,20,3),oi(0,7,8,-4,0,12,17,2,0,5,22,4),oi(0,7,8,-4,0,13,19,2,0,5,24,4),oi(0,7,9,-4,0,14,21,2,0,5,26,4),oi(0,8,9,-5,0,15,22,2,0,6,28,5),oi(0,8,10,-5,0,16,24,2,0,6,30,5),oi(0,8,11,-5,0,17,26,2,0,6,32,5),oi(0,9,11,-5,0,18,28,2,0,7,34,6),oi(0,9,12,-6,0,19,29,2,0,7,36,6),oi(0,10,13,-6,0,20,31,3,0,8,38,7),oi(0,10,13,-6,0,21,33,3,0,8,40,7),oi(0,10,14,-6,0,22,35,3,0,8,42,7),oi(0,11,14,-7,0,23,36,3,0,9,44,8),oi(0,11,15,-7,0,24,38,3,0,9,46,8)],TTe=CTe,ETe=["duration","easing","delay"],MTe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},ATe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function DH(t){return`${Math.round(t)}ms`}function kTe(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function ITe(t){const e=he({},MTe,t.easing),n=he({},ATe,t.duration);return he({getAutoHeightDuration:kTe,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return Ht(s,ETe),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof o=="string"?o:DH(o)} ${a} ${typeof l=="string"?l:DH(l)}`).join(",")}},t,{easing:e,duration:n})}const RTe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},PTe=RTe,NTe=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function LB(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=Ht(t,NTe);if(t.vars)throw new Error(Ch(18));const a=vTe(r),l=FS(t);let c=Aa(l,{mixins:cTe(l.breakpoints,n),palette:a,shadows:TTe.slice(),typography:bTe(a,s),transitions:ITe(i),zIndex:he({},PTe)});return c=Aa(c,o),c=e.reduce((u,d)=>Aa(u,d),c),c.unstable_sxConfig=he({},cI,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return uI({sx:d,theme:this})},c}const $Te=LB(),hI=$Te;function zS(){const t=BS(hI);return t[Hm]||t}function zn({props:t,name:e}){return PB({props:t,name:e,defaultTheme:hI,themeId:Hm})}const cc=t=>fb(t)&&t!=="classes",DTe=fb,LTe=Lre({themeId:Hm,defaultTheme:hI,rootShouldForwardProp:cc}),$t=LTe,OTe=["theme"];function FTe(t){let{theme:e}=t,n=Ht(t,OTe);const r=e[Hm];return L.jsx(UCe,he({},n,{themeId:r?Hm:void 0,theme:r||e}))}const BTe=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)},LH=BTe;function UTe(t){return Un("MuiSvgIcon",t)}$n("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const zTe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],VTe=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${Et(e)}`,`fontSize${Et(n)}`]};return jn(i,UTe,r)},WTe=$t("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Et(n.color)}`],e[`fontSize${Et(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,o,a,l,c,u,d,f,h,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=t.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[e.fontSize],color:(d=(f=(t.vars||t).palette)==null||(f=f[e.color])==null?void 0:f.main)!=null?d:{action:(h=(t.vars||t).palette)==null||(h=h.action)==null?void 0:h.active,disabled:(p=(t.vars||t).palette)==null||(p=p.action)==null?void 0:p.disabled,inherit:void 0}[e.color]}}),Ure=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:f="0 0 24 24"}=r,h=Ht(r,zTe),p=R.isValidElement(i)&&i.type==="svg",v=he({},r,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:p}),g={};u||(g.viewBox=f);const m=VTe(v);return L.jsxs(WTe,he({as:a,className:Yt(m.root,s),focusable:"false",color:c,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},g,h,p&&i.props,{ownerState:v,children:[p?i.props.children:i,d?L.jsx("title",{children:d}):null]}))});Ure.muiName="SvgIcon";const OH=Ure;function pI(t,e){function n(r,i){return L.jsx(OH,he({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=OH.muiName,R.memo(R.forwardRef(n))}const GTe={configure:t=>{TB.configure(t)}},HTe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Et,createChainedFunction:TO,createSvgIcon:pI,debounce:SB,deprecatedPropType:Q2e,isMuiElement:ub,ownerDocument:Io,ownerWindow:Th,requirePropFactory:e_e,setRef:cw,unstable_ClassNameGenerator:GTe,unstable_useEnhancedEffect:jc,unstable_useId:DS,unsupportedProp:r_e,useControlled:Pv,useEventCallback:Dc,useForkRef:Hi,useIsFocusVisible:_B},Symbol.toStringTag,{value:"Module"}));var Or={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OB=Symbol.for("react.element"),FB=Symbol.for("react.portal"),mI=Symbol.for("react.fragment"),gI=Symbol.for("react.strict_mode"),vI=Symbol.for("react.profiler"),yI=Symbol.for("react.provider"),xI=Symbol.for("react.context"),jTe=Symbol.for("react.server_context"),bI=Symbol.for("react.forward_ref"),wI=Symbol.for("react.suspense"),SI=Symbol.for("react.suspense_list"),_I=Symbol.for("react.memo"),CI=Symbol.for("react.lazy"),XTe=Symbol.for("react.offscreen"),zre;zre=Symbol.for("react.module.reference");function uc(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case OB:switch(t=t.type,t){case mI:case vI:case gI:case wI:case SI:return t;default:switch(t=t&&t.$$typeof,t){case jTe:case xI:case bI:case CI:case _I:case yI:return t;default:return e}}case FB:return e}}}Or.ContextConsumer=xI;Or.ContextProvider=yI;Or.Element=OB;Or.ForwardRef=bI;Or.Fragment=mI;Or.Lazy=CI;Or.Memo=_I;Or.Portal=FB;Or.Profiler=vI;Or.StrictMode=gI;Or.Suspense=wI;Or.SuspenseList=SI;Or.isAsyncMode=function(){return!1};Or.isConcurrentMode=function(){return!1};Or.isContextConsumer=function(t){return uc(t)===xI};Or.isContextProvider=function(t){return uc(t)===yI};Or.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===OB};Or.isForwardRef=function(t){return uc(t)===bI};Or.isFragment=function(t){return uc(t)===mI};Or.isLazy=function(t){return uc(t)===CI};Or.isMemo=function(t){return uc(t)===_I};Or.isPortal=function(t){return uc(t)===FB};Or.isProfiler=function(t){return uc(t)===vI};Or.isStrictMode=function(t){return uc(t)===gI};Or.isSuspense=function(t){return uc(t)===wI};Or.isSuspenseList=function(t){return uc(t)===SI};Or.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===mI||t===vI||t===gI||t===wI||t===SI||t===XTe||typeof t=="object"&&t!==null&&(t.$$typeof===CI||t.$$typeof===_I||t.$$typeof===yI||t.$$typeof===xI||t.$$typeof===bI||t.$$typeof===zre||t.getModuleId!==void 0)};Or.typeOf=uc;function MO(t,e){return MO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},MO(t,e)}function Vre(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,MO(t,e)}const FH={disabled:!1},QM=$c.createContext(null);var qTe=function(e){return e.scrollTop},G1="unmounted",Gp="exited",Hp="entering",j0="entered",AO="exiting",pf=function(t){Vre(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Gp,s.appearStatus=Hp):l=j0:r.unmountOnExit||r.mountOnEnter?l=G1:l=Gp,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===G1?{status:Gp}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Hp&&o!==j0&&(s=Hp):(o===Hp||o===j0)&&(s=AO)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Hp){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:QC.findDOMNode(this);o&&qTe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Gp&&this.setState({status:G1})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[QC.findDOMNode(this),a],c=l[0],u=l[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!i&&!o||FH.disabled){this.safeSetState({status:j0},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Hp},function(){s.props.onEntering(c,u),s.onTransitionEnd(f,function(){s.safeSetState({status:j0},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:QC.findDOMNode(this);if(!s||FH.disabled){this.safeSetState({status:Gp},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:AO},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Gp},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:QC.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===G1)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Ht(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return $c.createElement(QM.Provider,{value:null},typeof o=="function"?o(i,a):$c.cloneElement($c.Children.only(o),a))},e}($c.Component);pf.contextType=QM;pf.propTypes={};function p0(){}pf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p0,onEntering:p0,onEntered:p0,onExit:p0,onExiting:p0,onExited:p0};pf.UNMOUNTED=G1;pf.EXITED=Gp;pf.ENTERING=Hp;pf.ENTERED=j0;pf.EXITING=AO;const Wre=pf;function YTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BB(t,e){var n=function(s){return e&&R.isValidElement(s)?e(s):s},r=Object.create(null);return t&&R.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function KTe(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function lm(t,e,n){return n[e]!=null?n[e]:t.props[e]}function ZTe(t,e){return BB(t.children,function(n){return R.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:lm(n,"appear",t),enter:lm(n,"enter",t),exit:lm(n,"exit",t)})})}function JTe(t,e,n){var r=BB(t.children),i=KTe(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(R.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=R.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=R.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:lm(o,"exit",t),enter:lm(o,"enter",t)}):!l&&a&&!u?i[s]=R.cloneElement(o,{in:!1}):l&&a&&R.isValidElement(c)&&(i[s]=R.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:lm(o,"exit",t),enter:lm(o,"enter",t)}))}}),i}var QTe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},eEe={component:"div",childFactory:function(e){return e}},UB=function(t){Vre(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(YTe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?ZTe(i,a):JTe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=BB(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=he({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=Ht(i,["component","childFactory"]),l=this.state.contextValue,c=QTe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?$c.createElement(QM.Provider,{value:l},c):$c.createElement(QM.Provider,{value:l},$c.createElement(s,a,c))},e}($c.Component);UB.propTypes={};UB.defaultProps=eEe;const tEe=UB,Gre=t=>t.scrollTop;function eA(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function nEe(t){return Un("MuiPaper",t)}$n("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const rEe=["className","component","elevation","square","variant"],iEe=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return jn(s,nEe,i)},sEe=$t("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return he({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&he({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Xr("#fff",LH(e.elevation))}, ${Xr("#fff",LH(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),oEe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=r,c=Ht(r,rEe),u=he({},r,{component:s,elevation:o,square:a,variant:l}),d=iEe(u);return L.jsx(sEe,he({as:s,ownerState:u,className:Yt(d.root,i),ref:n},c))}),Hh=oEe;function aEe(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=t,[u,d]=R.useState(!1),f=Yt(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),h={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},p=Yt(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&d(!0),R.useEffect(()=>{if(!a&&l!=null){const v=setTimeout(l,c);return()=>{clearTimeout(v)}}},[l,a,c]),L.jsx("span",{className:f,style:h,children:L.jsx("span",{className:p})})}const lEe=$n("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Nl=lEe,cEe=["center","classes","className"];let TI=t=>t,BH,UH,zH,VH;const kO=550,uEe=80,dEe=wB(BH||(BH=TI`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),fEe=wB(UH||(UH=TI`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),hEe=wB(zH||(zH=TI`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),pEe=$t("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),mEe=$t(aEe,{name:"MuiTouchRipple",slot:"Ripple"})(VH||(VH=TI`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Nl.rippleVisible,dEe,kO,({theme:t})=>t.transitions.easing.easeInOut,Nl.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,Nl.child,Nl.childLeaving,fEe,kO,({theme:t})=>t.transitions.easing.easeInOut,Nl.childPulsate,hEe,({theme:t})=>t.transitions.easing.easeInOut),gEe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=Ht(r,cEe),[l,c]=R.useState([]),u=R.useRef(0),d=R.useRef(null);R.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const f=R.useRef(!1),h=R.useRef(0),p=R.useRef(null),v=R.useRef(null);R.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]);const g=R.useCallback(S=>{const{pulsate:_,rippleX:C,rippleY:T,rippleSize:A,cb:M}=S;c(E=>[...E,L.jsx(mEe,{classes:{ripple:Yt(s.ripple,Nl.ripple),rippleVisible:Yt(s.rippleVisible,Nl.rippleVisible),ripplePulsate:Yt(s.ripplePulsate,Nl.ripplePulsate),child:Yt(s.child,Nl.child),childLeaving:Yt(s.childLeaving,Nl.childLeaving),childPulsate:Yt(s.childPulsate,Nl.childPulsate)},timeout:kO,pulsate:_,rippleX:C,rippleY:T,rippleSize:A},u.current)]),u.current+=1,d.current=M},[s]),m=R.useCallback((S={},_={},C=()=>{})=>{const{pulsate:T=!1,center:A=i||_.pulsate,fakeElement:M=!1}=_;if((S==null?void 0:S.type)==="mousedown"&&f.current){f.current=!1;return}(S==null?void 0:S.type)==="touchstart"&&(f.current=!0);const E=M?null:v.current,P=E?E.getBoundingClientRect():{width:0,height:0,left:0,top:0};let N,F,$;if(A||S===void 0||S.clientX===0&&S.clientY===0||!S.clientX&&!S.touches)N=Math.round(P.width/2),F=Math.round(P.height/2);else{const{clientX:O,clientY:z}=S.touches&&S.touches.length>0?S.touches[0]:S;N=Math.round(O-P.left),F=Math.round(z-P.top)}if(A)$=Math.sqrt((2*P.width**2+P.height**2)/3),$%2===0&&($+=1);else{const O=Math.max(Math.abs((E?E.clientWidth:0)-N),N)*2+2,z=Math.max(Math.abs((E?E.clientHeight:0)-F),F)*2+2;$=Math.sqrt(O**2+z**2)}S!=null&&S.touches?p.current===null&&(p.current=()=>{g({pulsate:T,rippleX:N,rippleY:F,rippleSize:$,cb:C})},h.current=setTimeout(()=>{p.current&&(p.current(),p.current=null)},uEe)):g({pulsate:T,rippleX:N,rippleY:F,rippleSize:$,cb:C})},[i,g]),y=R.useCallback(()=>{m({},{pulsate:!0})},[m]),x=R.useCallback((S,_)=>{if(clearTimeout(h.current),(S==null?void 0:S.type)==="touchend"&&p.current){p.current(),p.current=null,h.current=setTimeout(()=>{x(S,_)});return}p.current=null,c(C=>C.length>0?C.slice(1):C),d.current=_},[]);return R.useImperativeHandle(n,()=>({pulsate:y,start:m,stop:x}),[y,m,x]),L.jsx(pEe,he({className:Yt(Nl.root,s.root,o),ref:v},a,{children:L.jsx(tEe,{component:null,exit:!0,children:l})}))}),vEe=gEe;function yEe(t){return Un("MuiButtonBase",t)}const xEe=$n("MuiButtonBase",["root","disabled","focusVisible"]),bEe=xEe,wEe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],SEe=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=jn({root:["root",e&&"disabled",n&&"focusVisible"]},yEe,i);return n&&r&&(o.root+=` ${r}`),o},_Ee=$t("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${bEe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),CEe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:f=!1,LinkComponent:h="a",onBlur:p,onClick:v,onContextMenu:g,onDragLeave:m,onFocus:y,onFocusVisible:x,onKeyDown:S,onKeyUp:_,onMouseDown:C,onMouseLeave:T,onMouseUp:A,onTouchEnd:M,onTouchMove:E,onTouchStart:P,tabIndex:N=0,TouchRippleProps:F,touchRippleRef:$,type:O}=r,z=Ht(r,wEe),X=R.useRef(null),D=R.useRef(null),B=Hi(D,$),{isFocusVisibleRef:V,onFocus:W,onBlur:j,ref:J}=_B(),[Q,te]=R.useState(!1);c&&Q&&te(!1),R.useImperativeHandle(i,()=>({focusVisible:()=>{te(!0),X.current.focus()}}),[]);const[re,se]=R.useState(!1);R.useEffect(()=>{se(!0)},[]);const fe=re&&!u&&!c;R.useEffect(()=>{Q&&f&&!u&&re&&D.current.pulsate()},[u,f,Q,re]);function ae(De,Ve,gt=d){return Dc(ct=>(Ve&&Ve(ct),!gt&&D.current&&D.current[De](ct),!0))}const ye=ae("start",C),le=ae("stop",g),H=ae("stop",m),Me=ae("stop",A),we=ae("stop",De=>{Q&&De.preventDefault(),T&&T(De)}),Ee=ae("start",P),ge=ae("stop",M),qe=ae("stop",E),Ae=ae("stop",De=>{j(De),V.current===!1&&te(!1),p&&p(De)},!1),ee=Dc(De=>{X.current||(X.current=De.currentTarget),W(De),V.current===!0&&(te(!0),x&&x(De)),y&&y(De)}),Y=()=>{const De=X.current;return l&&l!=="button"&&!(De.tagName==="A"&&De.href)},oe=R.useRef(!1),xe=Dc(De=>{f&&!oe.current&&Q&&D.current&&De.key===" "&&(oe.current=!0,D.current.stop(De,()=>{D.current.start(De)})),De.target===De.currentTarget&&Y()&&De.key===" "&&De.preventDefault(),S&&S(De),De.target===De.currentTarget&&Y()&&De.key==="Enter"&&!c&&(De.preventDefault(),v&&v(De))}),Se=Dc(De=>{f&&De.key===" "&&D.current&&Q&&!De.defaultPrevented&&(oe.current=!1,D.current.stop(De,()=>{D.current.pulsate(De)})),_&&_(De),v&&De.target===De.currentTarget&&Y()&&De.key===" "&&!De.defaultPrevented&&v(De)});let be=l;be==="button"&&(z.href||z.to)&&(be=h);const Re={};be==="button"?(Re.type=O===void 0?"button":O,Re.disabled=c):(!z.href&&!z.to&&(Re.role="button"),c&&(Re["aria-disabled"]=c));const Ke=Hi(n,J,X),ze=he({},r,{centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:f,tabIndex:N,focusVisible:Q}),Ne=SEe(ze);return L.jsxs(_Ee,he({as:be,className:Yt(Ne.root,a),ownerState:ze,onBlur:Ae,onClick:v,onContextMenu:le,onFocus:ee,onKeyDown:xe,onKeyUp:Se,onMouseDown:ye,onMouseLeave:we,onMouseUp:Me,onDragLeave:H,onTouchEnd:ge,onTouchMove:qe,onTouchStart:Ee,ref:Ke,tabIndex:c?-1:N,type:O},Re,z,{children:[o,fe?L.jsx(vEe,he({ref:B,center:s},F)):null]}))}),uw=CEe;function TEe(t){return Un("MuiIconButton",t)}const EEe=$n("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),MEe=EEe,AEe=["edge","children","className","color","disabled","disableFocusRipple","size"],kEe=t=>{const{classes:e,disabled:n,color:r,edge:i,size:s}=t,o={root:["root",n&&"disabled",r!=="default"&&`color${Et(r)}`,i&&`edge${Et(i)}`,`size${Et(s)}`]};return jn(o,TEe,e)},IEe=$t(uw,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${Et(n.color)}`],n.edge&&e[`edge${Et(n.edge)}`],e[`size${Et(n.size)}`]]}})(({theme:t,ownerState:e})=>he({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Xr(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return he({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&he({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":he({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Xr(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${MEe.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),REe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium"}=r,d=Ht(r,AEe),f=he({},r,{edge:i,color:a,disabled:l,disableFocusRipple:c,size:u}),h=kEe(f);return L.jsx(IEe,he({className:Yt(h.root,o),centerRipple:!0,focusRipple:!c,disabled:l,ref:n,ownerState:f},d,{children:s}))}),hb=REe,PEe=pI(L.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function NEe(t){return Un("MuiTypography",t)}$n("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const $Ee=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],DEe=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${Et(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return jn(a,NEe,o)},LEe=$t("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${Et(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>he({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),WH={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},OEe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},FEe=t=>OEe[t]||t,BEe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiTypography"}),i=FEe(r.color),s=dI(he({},r,{color:i})),{align:o="inherit",className:a,component:l,gutterBottom:c=!1,noWrap:u=!1,paragraph:d=!1,variant:f="body1",variantMapping:h=WH}=s,p=Ht(s,$Ee),v=he({},s,{align:o,color:i,className:a,component:l,gutterBottom:c,noWrap:u,paragraph:d,variant:f,variantMapping:h}),g=l||(d?"p":h[f]||WH[f])||"span",m=DEe(v);return L.jsx(LEe,he({as:g,ref:n,ownerState:v,className:Yt(m.root,a)},p))}),un=BEe;function UEe(t){return Un("MuiAppBar",t)}$n("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const zEe=["className","color","enableColorOnDark","position"],VEe=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${Et(e)}`,`position${Et(n)}`]};return jn(i,UEe,r)},tT=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,WEe=$t(Hh,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${Et(n.position)}`],e[`color${Et(n.color)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return he({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},e.position==="fixed"&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},e.position==="absolute"&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="sticky"&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="static"&&{position:"static"},e.position==="relative"&&{position:"relative"},!t.vars&&he({},e.color==="default"&&{backgroundColor:n,color:t.palette.getContrastText(n)},e.color&&e.color!=="default"&&e.color!=="inherit"&&e.color!=="transparent"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!e.enableColorOnDark&&{backgroundColor:null,color:null},e.color==="transparent"&&he({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"})),t.vars&&he({},e.color==="default"&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette.AppBar.defaultBg:tT(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":e.enableColorOnDark?t.vars.palette.text.primary:tT(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},e.color&&!e.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette[e.color].main:tT(t.vars.palette.AppBar.darkBg,t.vars.palette[e.color].main),"--AppBar-color":e.enableColorOnDark?t.vars.palette[e.color].contrastText:tT(t.vars.palette.AppBar.darkColor,t.vars.palette[e.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:e.color==="inherit"?"inherit":"var(--AppBar-color)"},e.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),GEe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiAppBar"}),{className:i,color:s="primary",enableColorOnDark:o=!1,position:a="fixed"}=r,l=Ht(r,zEe),c=he({},r,{color:s,position:a,enableColorOnDark:o}),u=VEe(c);return L.jsx(WEe,he({square:!0,component:"header",ownerState:c,elevation:4,className:Yt(u.root,i,a==="fixed"&&"mui-fixed"),ref:n},l))}),HEe=GEe;function tA(t){return typeof t=="string"}function jEe(t,e,n){return t===void 0||tA(t)?e:he({},e,{ownerState:he({},e.ownerState,n)})}const XEe={disableDefaultClasses:!1},qEe=R.createContext(XEe);function YEe(t){const{disableDefaultClasses:e}=R.useContext(qEe);return n=>e?"":t(n)}function Hre(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function KEe(t,e,n){return typeof t=="function"?t(e,n):t}function GH(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function ZEe(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const h=Yt(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),p=he({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),v=he({},n,i,r);return h.length>0&&(v.className=h),Object.keys(p).length>0&&(v.style=p),{props:v,internalRef:void 0}}const o=Hre(he({},i,r)),a=GH(r),l=GH(i),c=e(o),u=Yt(c==null?void 0:c.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d=he({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),f=he({},c,n,l,a);return u.length>0&&(f.className=u),Object.keys(d).length>0&&(f.style=d),{props:f,internalRef:c.ref}}const JEe=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Xm(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=Ht(t,JEe),a=s?{}:KEe(r,i),{props:l,internalRef:c}=ZEe(he({},o,{externalSlotProps:a})),u=Hi(c,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return jEe(n,he({},l,{ref:u}),i)}const QEe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function eMe(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function tMe(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function nMe(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||tMe(t))}function rMe(t){const e=[],n=[];return Array.from(t.querySelectorAll(QEe)).forEach((r,i)=>{const s=eMe(r);s===-1||!nMe(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function iMe(){return!0}function sMe(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=rMe,isEnabled:o=iMe,open:a}=t,l=R.useRef(!1),c=R.useRef(null),u=R.useRef(null),d=R.useRef(null),f=R.useRef(null),h=R.useRef(!1),p=R.useRef(null),v=Hi(e.ref,p),g=R.useRef(null);R.useEffect(()=>{!a||!p.current||(h.current=!n)},[n,a]),R.useEffect(()=>{if(!a||!p.current)return;const x=Io(p.current);return p.current.contains(x.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),h.current&&p.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[a]),R.useEffect(()=>{if(!a||!p.current)return;const x=Io(p.current),S=T=>{g.current=T,!(r||!o()||T.key!=="Tab")&&x.activeElement===p.current&&T.shiftKey&&(l.current=!0,u.current&&u.current.focus())},_=()=>{const T=p.current;if(T===null)return;if(!x.hasFocus()||!o()||l.current){l.current=!1;return}if(T.contains(x.activeElement)||r&&x.activeElement!==c.current&&x.activeElement!==u.current)return;if(x.activeElement!==f.current)f.current=null;else if(f.current!==null)return;if(!h.current)return;let A=[];if((x.activeElement===c.current||x.activeElement===u.current)&&(A=s(p.current)),A.length>0){var M,E;const P=!!((M=g.current)!=null&&M.shiftKey&&((E=g.current)==null?void 0:E.key)==="Tab"),N=A[0],F=A[A.length-1];typeof N!="string"&&typeof F!="string"&&(P?F.focus():N.focus())}else T.focus()};x.addEventListener("focusin",_),x.addEventListener("keydown",S,!0);const C=setInterval(()=>{x.activeElement&&x.activeElement.tagName==="BODY"&&_()},50);return()=>{clearInterval(C),x.removeEventListener("focusin",_),x.removeEventListener("keydown",S,!0)}},[n,r,i,o,a,s]);const m=x=>{d.current===null&&(d.current=x.relatedTarget),h.current=!0,f.current=x.target;const S=e.props.onFocus;S&&S(x)},y=x=>{d.current===null&&(d.current=x.relatedTarget),h.current=!0};return L.jsxs(R.Fragment,{children:[L.jsx("div",{tabIndex:a?0:-1,onFocus:y,ref:c,"data-testid":"sentinelStart"}),R.cloneElement(e,{ref:v,onFocus:m}),L.jsx("div",{tabIndex:a?0:-1,onFocus:y,ref:u,"data-testid":"sentinelEnd"})]})}var ka="top",tc="bottom",nc="right",Ia="left",zB="auto",VS=[ka,tc,nc,Ia],ry="start",dw="end",oMe="clippingParents",jre="viewport",l1="popper",aMe="reference",HH=VS.reduce(function(t,e){return t.concat([e+"-"+ry,e+"-"+dw])},[]),Xre=[].concat(VS,[zB]).reduce(function(t,e){return t.concat([e,e+"-"+ry,e+"-"+dw])},[]),lMe="beforeRead",cMe="read",uMe="afterRead",dMe="beforeMain",fMe="main",hMe="afterMain",pMe="beforeWrite",mMe="write",gMe="afterWrite",vMe=[lMe,cMe,uMe,dMe,fMe,hMe,pMe,mMe,gMe];function Yu(t){return t?(t.nodeName||"").toLowerCase():null}function dl(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function qm(t){var e=dl(t).Element;return t instanceof e||t instanceof Element}function Yl(t){var e=dl(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function VB(t){if(typeof ShadowRoot>"u")return!1;var e=dl(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function yMe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Yl(s)||!Yu(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function xMe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!Yl(i)||!Yu(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const bMe={name:"applyStyles",enabled:!0,phase:"write",fn:yMe,effect:xMe,requires:["computeStyles"]};function $u(t){return t.split("-")[0]}var Cm=Math.max,nA=Math.min,iy=Math.round;function IO(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function qre(){return!/^((?!chrome|android).)*safari/i.test(IO())}function sy(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Yl(t)&&(i=t.offsetWidth>0&&iy(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&iy(r.height)/t.offsetHeight||1);var o=qm(t)?dl(t):window,a=o.visualViewport,l=!qre()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/i,f=r.height/s;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function WB(t){var e=sy(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Yre(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&VB(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function of(t){return dl(t).getComputedStyle(t)}function wMe(t){return["table","td","th"].indexOf(Yu(t))>=0}function jh(t){return((qm(t)?t.ownerDocument:t.document)||window.document).documentElement}function EI(t){return Yu(t)==="html"?t:t.assignedSlot||t.parentNode||(VB(t)?t.host:null)||jh(t)}function jH(t){return!Yl(t)||of(t).position==="fixed"?null:t.offsetParent}function SMe(t){var e=/firefox/i.test(IO()),n=/Trident/i.test(IO());if(n&&Yl(t)){var r=of(t);if(r.position==="fixed")return null}var i=EI(t);for(VB(i)&&(i=i.host);Yl(i)&&["html","body"].indexOf(Yu(i))<0;){var s=of(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function WS(t){for(var e=dl(t),n=jH(t);n&&wMe(n)&&of(n).position==="static";)n=jH(n);return n&&(Yu(n)==="html"||Yu(n)==="body"&&of(n).position==="static")?e:n||SMe(t)||e}function GB(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function pb(t,e,n){return Cm(t,nA(e,n))}function _Me(t,e,n){var r=pb(t,e,n);return r>n?n:r}function Kre(){return{top:0,right:0,bottom:0,left:0}}function Zre(t){return Object.assign({},Kre(),t)}function Jre(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var CMe=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Zre(typeof e!="number"?e:Jre(e,VS))};function TMe(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=$u(n.placement),l=GB(a),c=[Ia,nc].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=CMe(i.padding,n),f=WB(s),h=l==="y"?ka:Ia,p=l==="y"?tc:nc,v=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],g=o[l]-n.rects.reference[l],m=WS(s),y=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,x=v/2-g/2,S=d[h],_=y-f[u]-d[p],C=y/2-f[u]/2+x,T=pb(S,C,_),A=l;n.modifiersData[r]=(e={},e[A]=T,e.centerOffset=T-C,e)}}function EMe(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Yre(e.elements.popper,i)&&(e.elements.arrow=i))}const MMe={name:"arrow",enabled:!0,phase:"main",fn:TMe,effect:EMe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function oy(t){return t.split("-")[1]}var AMe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function kMe(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:iy(n*i)/i||0,y:iy(r*i)/i||0}}function XH(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=o.x,h=f===void 0?0:f,p=o.y,v=p===void 0?0:p,g=typeof u=="function"?u({x:h,y:v}):{x:h,y:v};h=g.x,v=g.y;var m=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),x=Ia,S=ka,_=window;if(c){var C=WS(n),T="clientHeight",A="clientWidth";if(C===dl(n)&&(C=jh(n),of(C).position!=="static"&&a==="absolute"&&(T="scrollHeight",A="scrollWidth")),C=C,i===ka||(i===Ia||i===nc)&&s===dw){S=tc;var M=d&&C===_&&_.visualViewport?_.visualViewport.height:C[T];v-=M-r.height,v*=l?1:-1}if(i===Ia||(i===ka||i===tc)&&s===dw){x=nc;var E=d&&C===_&&_.visualViewport?_.visualViewport.width:C[A];h-=E-r.width,h*=l?1:-1}}var P=Object.assign({position:a},c&&AMe),N=u===!0?kMe({x:h,y:v},dl(n)):{x:h,y:v};if(h=N.x,v=N.y,l){var F;return Object.assign({},P,(F={},F[S]=y?"0":"",F[x]=m?"0":"",F.transform=(_.devicePixelRatio||1)<=1?"translate("+h+"px, "+v+"px)":"translate3d("+h+"px, "+v+"px, 0)",F))}return Object.assign({},P,(e={},e[S]=y?v+"px":"",e[x]=m?h+"px":"",e.transform="",e))}function IMe(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:$u(e.placement),variation:oy(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,XH(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,XH(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const RMe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:IMe,data:{}};var nT={passive:!0};function PMe(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=dl(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,nT)}),a&&l.addEventListener("resize",n.update,nT),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,nT)}),a&&l.removeEventListener("resize",n.update,nT)}}const NMe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:PMe,data:{}};var $Me={left:"right",right:"left",bottom:"top",top:"bottom"};function JE(t){return t.replace(/left|right|bottom|top/g,function(e){return $Me[e]})}var DMe={start:"end",end:"start"};function qH(t){return t.replace(/start|end/g,function(e){return DMe[e]})}function HB(t){var e=dl(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function jB(t){return sy(jh(t)).left+HB(t).scrollLeft}function LMe(t,e){var n=dl(t),r=jh(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=qre();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+jB(t),y:l}}function OMe(t){var e,n=jh(t),r=HB(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Cm(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Cm(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+jB(t),l=-r.scrollTop;return of(i||n).direction==="rtl"&&(a+=Cm(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function XB(t){var e=of(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Qre(t){return["html","body","#document"].indexOf(Yu(t))>=0?t.ownerDocument.body:Yl(t)&&XB(t)?t:Qre(EI(t))}function mb(t,e){var n;e===void 0&&(e=[]);var r=Qre(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=dl(r),o=i?[s].concat(s.visualViewport||[],XB(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(mb(EI(o)))}function RO(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function FMe(t,e){var n=sy(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function YH(t,e,n){return e===jre?RO(LMe(t,n)):qm(e)?FMe(e,n):RO(OMe(jh(t)))}function BMe(t){var e=mb(EI(t)),n=["absolute","fixed"].indexOf(of(t).position)>=0,r=n&&Yl(t)?WS(t):t;return qm(r)?e.filter(function(i){return qm(i)&&Yre(i,r)&&Yu(i)!=="body"}):[]}function UMe(t,e,n,r){var i=e==="clippingParents"?BMe(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=YH(t,c,r);return l.top=Cm(u.top,l.top),l.right=nA(u.right,l.right),l.bottom=nA(u.bottom,l.bottom),l.left=Cm(u.left,l.left),l},YH(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function eie(t){var e=t.reference,n=t.element,r=t.placement,i=r?$u(r):null,s=r?oy(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case ka:l={x:o,y:e.y-n.height};break;case tc:l={x:o,y:e.y+e.height};break;case nc:l={x:e.x+e.width,y:a};break;case Ia:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?GB(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case ry:l[c]=l[c]-(e[u]/2-n[u]/2);break;case dw:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function fw(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?oMe:a,c=n.rootBoundary,u=c===void 0?jre:c,d=n.elementContext,f=d===void 0?l1:d,h=n.altBoundary,p=h===void 0?!1:h,v=n.padding,g=v===void 0?0:v,m=Zre(typeof g!="number"?g:Jre(g,VS)),y=f===l1?aMe:l1,x=t.rects.popper,S=t.elements[p?y:f],_=UMe(qm(S)?S:S.contextElement||jh(t.elements.popper),l,u,o),C=sy(t.elements.reference),T=eie({reference:C,element:x,strategy:"absolute",placement:i}),A=RO(Object.assign({},x,T)),M=f===l1?A:C,E={top:_.top-M.top+m.top,bottom:M.bottom-_.bottom+m.bottom,left:_.left-M.left+m.left,right:M.right-_.right+m.right},P=t.modifiersData.offset;if(f===l1&&P){var N=P[i];Object.keys(E).forEach(function(F){var $=[nc,tc].indexOf(F)>=0?1:-1,O=[ka,tc].indexOf(F)>=0?"y":"x";E[F]+=N[O]*$})}return E}function zMe(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Xre:l,u=oy(r),d=u?a?HH:HH.filter(function(p){return oy(p)===u}):VS,f=d.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,v){return p[v]=fw(t,{placement:v,boundary:i,rootBoundary:s,padding:o})[$u(v)],p},{});return Object.keys(h).sort(function(p,v){return h[p]-h[v]})}function VMe(t){if($u(t)===zB)return[];var e=JE(t);return[qH(t),e,qH(e)]}function WMe(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,v=n.allowedAutoPlacements,g=e.options.placement,m=$u(g),y=m===g,x=l||(y||!p?[JE(g)]:VMe(g)),S=[g].concat(x).reduce(function(Q,te){return Q.concat($u(te)===zB?zMe(e,{placement:te,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:v}):te)},[]),_=e.rects.reference,C=e.rects.popper,T=new Map,A=!0,M=S[0],E=0;E<S.length;E++){var P=S[E],N=$u(P),F=oy(P)===ry,$=[ka,tc].indexOf(N)>=0,O=$?"width":"height",z=fw(e,{placement:P,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),X=$?F?nc:Ia:F?tc:ka;_[O]>C[O]&&(X=JE(X));var D=JE(X),B=[];if(s&&B.push(z[N]<=0),a&&B.push(z[X]<=0,z[D]<=0),B.every(function(Q){return Q})){M=P,A=!1;break}T.set(P,B)}if(A)for(var V=p?3:1,W=function(te){var re=S.find(function(se){var fe=T.get(se);if(fe)return fe.slice(0,te).every(function(ae){return ae})});if(re)return M=re,"break"},j=V;j>0;j--){var J=W(j);if(J==="break")break}e.placement!==M&&(e.modifiersData[r]._skip=!0,e.placement=M,e.reset=!0)}}const GMe={name:"flip",enabled:!0,phase:"main",fn:WMe,requiresIfExists:["offset"],data:{_skip:!1}};function KH(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function ZH(t){return[ka,nc,tc,Ia].some(function(e){return t[e]>=0})}function HMe(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=fw(e,{elementContext:"reference"}),a=fw(e,{altBoundary:!0}),l=KH(o,r),c=KH(a,i,s),u=ZH(l),d=ZH(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const jMe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:HMe};function XMe(t,e,n){var r=$u(t),i=[Ia,ka].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Ia,nc].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function qMe(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=Xre.reduce(function(u,d){return u[d]=XMe(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const YMe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:qMe};function KMe(t){var e=t.state,n=t.name;e.modifiersData[n]=eie({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const ZMe={name:"popperOffsets",enabled:!0,phase:"read",fn:KMe,data:{}};function JMe(t){return t==="x"?"y":"x"}function QMe(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,v=p===void 0?0:p,g=fw(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),m=$u(e.placement),y=oy(e.placement),x=!y,S=GB(m),_=JMe(S),C=e.modifiersData.popperOffsets,T=e.rects.reference,A=e.rects.popper,M=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,E=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),P=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,N={x:0,y:0};if(C){if(s){var F,$=S==="y"?ka:Ia,O=S==="y"?tc:nc,z=S==="y"?"height":"width",X=C[S],D=X+g[$],B=X-g[O],V=h?-A[z]/2:0,W=y===ry?T[z]:A[z],j=y===ry?-A[z]:-T[z],J=e.elements.arrow,Q=h&&J?WB(J):{width:0,height:0},te=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Kre(),re=te[$],se=te[O],fe=pb(0,T[z],Q[z]),ae=x?T[z]/2-V-fe-re-E.mainAxis:W-fe-re-E.mainAxis,ye=x?-T[z]/2+V+fe+se+E.mainAxis:j+fe+se+E.mainAxis,le=e.elements.arrow&&WS(e.elements.arrow),H=le?S==="y"?le.clientTop||0:le.clientLeft||0:0,Me=(F=P==null?void 0:P[S])!=null?F:0,we=X+ae-Me-H,Ee=X+ye-Me,ge=pb(h?nA(D,we):D,X,h?Cm(B,Ee):B);C[S]=ge,N[S]=ge-X}if(a){var qe,Ae=S==="x"?ka:Ia,ee=S==="x"?tc:nc,Y=C[_],oe=_==="y"?"height":"width",xe=Y+g[Ae],Se=Y-g[ee],be=[ka,Ia].indexOf(m)!==-1,Re=(qe=P==null?void 0:P[_])!=null?qe:0,Ke=be?xe:Y-T[oe]-A[oe]-Re+E.altAxis,ze=be?Y+T[oe]+A[oe]-Re-E.altAxis:Se,Ne=h&&be?_Me(Ke,Y,ze):pb(h?Ke:xe,Y,h?ze:Se);C[_]=Ne,N[_]=Ne-Y}e.modifiersData[r]=N}}const eAe={name:"preventOverflow",enabled:!0,phase:"main",fn:QMe,requiresIfExists:["offset"]};function tAe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function nAe(t){return t===dl(t)||!Yl(t)?HB(t):tAe(t)}function rAe(t){var e=t.getBoundingClientRect(),n=iy(e.width)/t.offsetWidth||1,r=iy(e.height)/t.offsetHeight||1;return n!==1||r!==1}function iAe(t,e,n){n===void 0&&(n=!1);var r=Yl(e),i=Yl(e)&&rAe(e),s=jh(e),o=sy(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Yu(e)!=="body"||XB(s))&&(a=nAe(e)),Yl(e)?(l=sy(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=jB(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function sAe(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function oAe(t){var e=sAe(t);return vMe.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function aAe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function lAe(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var JH={placement:"bottom",modifiers:[],strategy:"absolute"};function QH(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function cAe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?JH:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},JH,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(m){var y=typeof m=="function"?m(u.options):m;v(),u.options=Object.assign({},s,u.options,y),u.scrollParents={reference:qm(a)?mb(a):a.contextElement?mb(a.contextElement):[],popper:mb(l)};var x=oAe(lAe([].concat(r,u.options.modifiers)));return u.orderedModifiers=x.filter(function(S){return S.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var m=u.elements,y=m.reference,x=m.popper;if(QH(y,x)){u.rects={reference:iAe(y,WS(x),u.options.strategy==="fixed"),popper:WB(x)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(E){return u.modifiersData[E.name]=Object.assign({},E.data)});for(var S=0;S<u.orderedModifiers.length;S++){if(u.reset===!0){u.reset=!1,S=-1;continue}var _=u.orderedModifiers[S],C=_.fn,T=_.options,A=T===void 0?{}:T,M=_.name;typeof C=="function"&&(u=C({state:u,options:A,name:M,instance:h})||u)}}}},update:aAe(function(){return new Promise(function(g){h.forceUpdate(),g(u)})}),destroy:function(){v(),f=!0}};if(!QH(a,l))return h;h.setOptions(c).then(function(g){!f&&c.onFirstUpdate&&c.onFirstUpdate(g)});function p(){u.orderedModifiers.forEach(function(g){var m=g.name,y=g.options,x=y===void 0?{}:y,S=g.effect;if(typeof S=="function"){var _=S({state:u,name:m,instance:h,options:x}),C=function(){};d.push(_||C)}})}function v(){d.forEach(function(g){return g()}),d=[]}return h}}var uAe=[NMe,ZMe,RMe,bMe,YMe,GMe,eAe,MMe,jMe],dAe=cAe({defaultModifiers:uAe});function fAe(t){return typeof t=="function"?t():t}const tie=R.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=R.useState(null),l=Hi(R.isValidElement(r)?r.ref:null,n);if(jc(()=>{s||a(fAe(i)||document.body)},[i,s]),jc(()=>{if(o&&!s)return cw(n,o),()=>{cw(n,null)}},[n,o,s]),s){if(R.isValidElement(r)){const c={ref:l};return R.cloneElement(r,c)}return L.jsx(R.Fragment,{children:r})}return L.jsx(R.Fragment,{children:o&&RS.createPortal(r,o)})});function hAe(t){return Un("MuiPopper",t)}$n("MuiPopper",["root"]);const pAe=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],mAe=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function gAe(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function PO(t){return typeof t=="function"?t():t}function vAe(t){return t.nodeType!==void 0}const yAe=()=>jn({root:["root"]},YEe(hAe)),xAe={},bAe=R.forwardRef(function(e,n){var r;const{anchorEl:i,children:s,direction:o,disablePortal:a,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:f,slotProps:h={},slots:p={},TransitionProps:v}=e,g=Ht(e,pAe),m=R.useRef(null),y=Hi(m,n),x=R.useRef(null),S=Hi(x,f),_=R.useRef(S);jc(()=>{_.current=S},[S]),R.useImperativeHandle(f,()=>x.current,[]);const C=gAe(u,o),[T,A]=R.useState(C),[M,E]=R.useState(PO(i));R.useEffect(()=>{x.current&&x.current.forceUpdate()}),R.useEffect(()=>{i&&E(PO(i))},[i]),jc(()=>{if(!M||!c)return;const O=D=>{A(D.placement)};let z=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:D})=>{O(D)}}];l!=null&&(z=z.concat(l)),d&&d.modifiers!=null&&(z=z.concat(d.modifiers));const X=dAe(M,m.current,he({placement:C},d,{modifiers:z}));return _.current(X),()=>{X.destroy(),_.current(null)}},[M,a,l,c,d,C]);const P={placement:T};v!==null&&(P.TransitionProps=v);const N=yAe(),F=(r=p.root)!=null?r:"div",$=Xm({elementType:F,externalSlotProps:h.root,externalForwardedProps:g,additionalProps:{role:"tooltip",ref:y},ownerState:e,className:N.root});return L.jsx(F,he({},$,{children:typeof s=="function"?s(P):s}))}),wAe=R.forwardRef(function(e,n){const{anchorEl:r,children:i,container:s,direction:o="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:f=xAe,popperRef:h,style:p,transition:v=!1,slotProps:g={},slots:m={}}=e,y=Ht(e,mAe),[x,S]=R.useState(!0),_=()=>{S(!1)},C=()=>{S(!0)};if(!l&&!u&&(!v||x))return null;let T;if(s)T=s;else if(r){const E=PO(r);T=E&&vAe(E)?Io(E).body:Io(null).body}const A=!u&&l&&(!v||x)?"none":void 0,M=v?{in:u,onEnter:_,onExited:C}:void 0;return L.jsx(tie,{disablePortal:a,container:T,children:L.jsx(bAe,he({anchorEl:r,direction:o,disablePortal:a,modifiers:c,ref:n,open:v?!x:u,placement:d,popperOptions:f,popperRef:h,slotProps:g,slots:m},y,{style:he({position:"fixed",top:0,left:0,display:A},p),TransitionProps:M,children:i}))})});function SAe(t){const e=Io(t);return e.body===t?Th(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function gb(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function ej(t){return parseInt(Th(t).getComputedStyle(t).paddingRight,10)||0}function _Ae(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function tj(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,o=>{const a=s.indexOf(o)===-1,l=!_Ae(o);a&&l&&gb(o,i)})}function t$(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function CAe(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(SAe(r)){const o=Ire(Io(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${ej(r)+o}px`;const a=Io(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${ej(l)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=Io(r).body;else{const o=r.parentElement,a=Th(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function TAe(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class EAe{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&gb(e.modalRef,!1);const i=TAe(n);tj(n,e.mount,e.modalRef,i,!0);const s=t$(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=t$(this.containers,s=>s.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=CAe(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=t$(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&gb(e.modalRef,n),tj(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&gb(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function MAe(t){return typeof t=="function"?t():t}function AAe(t){return t?t.props.hasOwnProperty("in"):!1}const kAe=new EAe;function IAe(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=kAe,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:d}=t,f=R.useRef({}),h=R.useRef(null),p=R.useRef(null),v=Hi(p,d),[g,m]=R.useState(!u),y=AAe(l);let x=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(x=!1);const S=()=>Io(h.current),_=()=>(f.current.modalRef=p.current,f.current.mount=h.current,f.current),C=()=>{i.mount(_(),{disableScrollLock:r}),p.current&&(p.current.scrollTop=0)},T=Dc(()=>{const z=MAe(e)||S().body;i.add(_(),z),p.current&&C()}),A=R.useCallback(()=>i.isTopModal(_()),[i]),M=Dc(z=>{h.current=z,z&&(u&&A()?C():p.current&&gb(p.current,x))}),E=R.useCallback(()=>{i.remove(_(),x)},[x,i]);R.useEffect(()=>()=>{E()},[E]),R.useEffect(()=>{u?T():(!y||!s)&&E()},[u,E,y,s,T]);const P=z=>X=>{var D;(D=z.onKeyDown)==null||D.call(z,X),!(X.key!=="Escape"||X.which===229||!A())&&(n||(X.stopPropagation(),c&&c(X,"escapeKeyDown")))},N=z=>X=>{var D;(D=z.onClick)==null||D.call(z,X),X.target===X.currentTarget&&c&&c(X,"backdropClick")};return{getRootProps:(z={})=>{const X=Hre(t);delete X.onTransitionEnter,delete X.onTransitionExited;const D=he({},X,z);return he({role:"presentation"},D,{onKeyDown:P(D),ref:v})},getBackdropProps:(z={})=>{const X=z;return he({"aria-hidden":!0},X,{onClick:N(X),open:u})},getTransitionProps:()=>{const z=()=>{m(!1),o&&o()},X=()=>{m(!0),a&&a(),s&&E()};return{onEnter:TO(z,l==null?void 0:l.props.onEnter),onExited:TO(X,l==null?void 0:l.props.onExited)}},rootRef:v,portalRef:M,isTopModal:A,exited:g,hasTransition:y}}const RAe=["onChange","maxRows","minRows","style","value"];function rT(t){return parseInt(t,10)||0}const PAe={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function nj(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflow}const NAe=R.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a}=e,l=Ht(e,RAe),{current:c}=R.useRef(a!=null),u=R.useRef(null),d=Hi(n,u),f=R.useRef(null),h=R.useRef(0),[p,v]=R.useState({outerHeightStyle:0}),g=R.useCallback(()=>{const S=u.current,C=Th(S).getComputedStyle(S);if(C.width==="0px")return{outerHeightStyle:0};const T=f.current;T.style.width=C.width,T.value=S.value||e.placeholder||"x",T.value.slice(-1)===`
`&&(T.value+=" ");const A=C.boxSizing,M=rT(C.paddingBottom)+rT(C.paddingTop),E=rT(C.borderBottomWidth)+rT(C.borderTopWidth),P=T.scrollHeight;T.value="x";const N=T.scrollHeight;let F=P;s&&(F=Math.max(Number(s)*N,F)),i&&(F=Math.min(Number(i)*N,F)),F=Math.max(F,N);const $=F+(A==="border-box"?M+E:0),O=Math.abs(F-P)<=1;return{outerHeightStyle:$,overflow:O}},[i,s,e.placeholder]),m=(S,_)=>{const{outerHeightStyle:C,overflow:T}=_;return h.current<20&&(C>0&&Math.abs((S.outerHeightStyle||0)-C)>1||S.overflow!==T)?(h.current+=1,{overflow:T,outerHeightStyle:C}):S},y=R.useCallback(()=>{const S=g();nj(S)||v(_=>m(_,S))},[g]);jc(()=>{const S=()=>{const P=g();nj(P)||RS.flushSync(()=>{v(N=>m(N,P))})},_=()=>{h.current=0,S()};let C;const T=SB(_),A=u.current,M=Th(A);M.addEventListener("resize",T);let E;return typeof ResizeObserver<"u"&&(E=new ResizeObserver(_),E.observe(A)),()=>{T.clear(),cancelAnimationFrame(C),M.removeEventListener("resize",T),E&&E.disconnect()}},[g]),jc(()=>{y()}),R.useEffect(()=>{h.current=0},[a]);const x=S=>{h.current=0,c||y(),r&&r(S)};return L.jsxs(R.Fragment,{children:[L.jsx("textarea",he({value:a,onChange:x,ref:d,rows:s,style:he({height:p.outerHeightStyle,overflow:p.overflow?"hidden":void 0},o)},l)),L.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:he({},PAe.shadow,o,{paddingTop:0,paddingBottom:0})})]})});function rj(t){return typeof t.normalize<"u"?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):t}function $Ae(t={}){const{ignoreAccents:e=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:s,trim:o=!1}=t;return(a,{inputValue:l,getOptionLabel:c})=>{let u=o?l.trim():l;n&&(u=u.toLowerCase()),e&&(u=rj(u));const d=u?a.filter(f=>{let h=(s||c)(f);return n&&(h=h.toLowerCase()),e&&(h=rj(h)),i==="start"?h.indexOf(u)===0:h.indexOf(u)>-1}):a;return typeof r=="number"?d.slice(0,r):d}}function n$(t,e){for(let n=0;n<t.length;n+=1)if(e(t[n]))return n;return-1}const DAe=$Ae(),ij=5,LAe=t=>{var e;return t.current!==null&&((e=t.current.parentElement)==null?void 0:e.contains(document.activeElement))};function OAe(t){const{unstable_isActiveElementInListbox:e=LAe,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:i=!1,autoSelect:s=!1,blurOnSelect:o=!1,clearOnBlur:a=!t.freeSolo,clearOnEscape:l=!1,componentName:c="useAutocomplete",defaultValue:u=t.multiple?[]:null,disableClearable:d=!1,disableCloseOnSelect:f=!1,disabled:h,disabledItemsFocusable:p=!1,disableListWrap:v=!1,filterOptions:g=DAe,filterSelectedOptions:m=!1,freeSolo:y=!1,getOptionDisabled:x,getOptionKey:S,getOptionLabel:_=K=>{var ne;return(ne=K.label)!=null?ne:K},groupBy:C,handleHomeEndKeys:T=!t.freeSolo,id:A,includeInputInList:M=!1,inputValue:E,isOptionEqualToValue:P=(K,ne)=>K===ne,multiple:N=!1,onChange:F,onClose:$,onHighlightChange:O,onInputChange:z,onOpen:X,open:D,openOnFocus:B=!1,options:V,readOnly:W=!1,selectOnFocus:j=!t.freeSolo,value:J}=t,Q=DS(A);let te=_;te=K=>{const ne=_(K);return typeof ne!="string"?String(ne):ne};const re=R.useRef(!1),se=R.useRef(!0),fe=R.useRef(null),ae=R.useRef(null),[ye,le]=R.useState(null),[H,Me]=R.useState(-1),we=i?0:-1,Ee=R.useRef(we),[ge,qe]=Pv({controlled:J,default:u,name:c}),[Ae,ee]=Pv({controlled:E,default:"",name:c,state:"inputValue"}),[Y,oe]=R.useState(!1),xe=R.useCallback((K,ne)=>{if(!(N?ge.length<ne.length:ne!==null)&&!a)return;let ie;if(N)ie="";else if(ne==null)ie="";else{const ce=te(ne);ie=typeof ce=="string"?ce:""}Ae!==ie&&(ee(ie),z&&z(K,ie,"reset"))},[te,Ae,N,z,ee,a,ge]),[Se,be]=Pv({controlled:D,default:!1,name:c,state:"open"}),[Re,Ke]=R.useState(!0),ze=!N&&ge!=null&&Ae===te(ge),Ne=Se&&!W,De=Ne?g(V.filter(K=>!(m&&(N?ge:[ge]).some(ne=>ne!==null&&P(K,ne)))),{inputValue:ze&&Re?"":Ae,getOptionLabel:te}):[],Ve=d_e({filteredOptions:De,value:ge,inputValue:Ae});R.useEffect(()=>{const K=ge!==Ve.value;Y&&!K||y&&!K||xe(null,ge)},[ge,xe,Y,Ve.value,y]);const gt=Se&&De.length>0&&!W,ct=Dc(K=>{K===-1?fe.current.focus():ye.querySelector(`[data-tag-index="${K}"]`).focus()});R.useEffect(()=>{N&&H>ge.length-1&&(Me(-1),ct(-1))},[ge,N,H,ct]);function Ye(K,ne){if(!ae.current||K<0||K>=De.length)return-1;let G=K;for(;;){const ie=ae.current.querySelector(`[data-option-index="${G}"]`),ce=p?!1:!ie||ie.disabled||ie.getAttribute("aria-disabled")==="true";if(ie&&ie.hasAttribute("tabindex")&&!ce)return G;if(ne==="next"?G=(G+1)%De.length:G=(G-1+De.length)%De.length,G===K)return-1}}const Xe=Dc(({event:K,index:ne,reason:G="auto"})=>{if(Ee.current=ne,ne===-1?fe.current.removeAttribute("aria-activedescendant"):fe.current.setAttribute("aria-activedescendant",`${Q}-option-${ne}`),O&&O(K,ne===-1?null:De[ne],G),!ae.current)return;const ie=ae.current.querySelector(`[role="option"].${n}-focused`);ie&&(ie.classList.remove(`${n}-focused`),ie.classList.remove(`${n}-focusVisible`));let ce=ae.current;if(ae.current.getAttribute("role")!=="listbox"&&(ce=ae.current.parentElement.querySelector('[role="listbox"]')),!ce)return;if(ne===-1){ce.scrollTop=0;return}const Te=ae.current.querySelector(`[data-option-index="${ne}"]`);if(Te&&(Te.classList.add(`${n}-focused`),G==="keyboard"&&Te.classList.add(`${n}-focusVisible`),ce.scrollHeight>ce.clientHeight&&G!=="mouse"&&G!=="touch")){const de=Te,Be=ce.clientHeight+ce.scrollTop,Je=de.offsetTop+de.offsetHeight;Je>Be?ce.scrollTop=Je-ce.clientHeight:de.offsetTop-de.offsetHeight*(C?1.3:0)<ce.scrollTop&&(ce.scrollTop=de.offsetTop-de.offsetHeight*(C?1.3:0))}}),Le=Dc(({event:K,diff:ne,direction:G="next",reason:ie="auto"})=>{if(!Ne)return;const Te=Ye((()=>{const de=De.length-1;if(ne==="reset")return we;if(ne==="start")return 0;if(ne==="end")return de;const Be=Ee.current+ne;return Be<0?Be===-1&&M?-1:v&&Ee.current!==-1||Math.abs(ne)>1?0:de:Be>de?Be===de+1&&M?-1:v||Math.abs(ne)>1?de:0:Be})(),G);if(Xe({index:Te,reason:ie,event:K}),r&&ne!=="reset")if(Te===-1)fe.current.value=Ae;else{const de=te(De[Te]);fe.current.value=de,de.toLowerCase().indexOf(Ae.toLowerCase())===0&&Ae.length>0&&fe.current.setSelectionRange(Ae.length,de.length)}}),pe=()=>{const K=(ne,G)=>{const ie=ne?te(ne):"",ce=G?te(G):"";return ie===ce};if(Ee.current!==-1&&Ve.filteredOptions&&Ve.filteredOptions.length!==De.length&&Ve.inputValue===Ae&&(N?ge.length===Ve.value.length&&Ve.value.every((ne,G)=>te(ge[G])===te(ne)):K(Ve.value,ge))){const ne=Ve.filteredOptions[Ee.current];if(ne&&De.some(ie=>te(ie)===te(ne)))return!0}return!1},He=R.useCallback(()=>{if(!Ne||pe())return;const K=N?ge[0]:ge;if(De.length===0||K==null){Le({diff:"reset"});return}if(ae.current){if(K!=null){const ne=De[Ee.current];if(N&&ne&&n$(ge,ie=>P(ne,ie))!==-1)return;const G=n$(De,ie=>P(ie,K));G===-1?Le({diff:"reset"}):Xe({index:G});return}if(Ee.current>=De.length-1){Xe({index:De.length-1});return}Xe({index:Ee.current})}},[De.length,N?!1:ge,m,Le,Xe,Ne,Ae,N]),ot=Dc(K=>{cw(ae,K),K&&He()});R.useEffect(()=>{He()},[He]);const et=K=>{Se||(be(!0),Ke(!0),X&&X(K))},Ie=(K,ne)=>{Se&&(be(!1),$&&$(K,ne))},Ce=(K,ne,G,ie)=>{if(N){if(ge.length===ne.length&&ge.every((ce,Te)=>ce===ne[Te]))return}else if(ge===ne)return;F&&F(K,ne,G,ie),qe(ne)},ut=R.useRef(!1),dt=(K,ne,G="selectOption",ie="options")=>{let ce=G,Te=ne;if(N){Te=Array.isArray(ge)?ge.slice():[];const de=n$(Te,Be=>P(ne,Be));de===-1?Te.push(ne):ie!=="freeSolo"&&(Te.splice(de,1),ce="removeOption")}xe(K,Te),Ce(K,Te,ce,{option:ne}),!f&&(!K||!K.ctrlKey&&!K.metaKey)&&Ie(K,ce),(o===!0||o==="touch"&&ut.current||o==="mouse"&&!ut.current)&&fe.current.blur()};function yt(K,ne){if(K===-1)return-1;let G=K;for(;;){if(ne==="next"&&G===ge.length||ne==="previous"&&G===-1)return-1;const ie=ye.querySelector(`[data-tag-index="${G}"]`);if(!ie||!ie.hasAttribute("tabindex")||ie.disabled||ie.getAttribute("aria-disabled")==="true")G+=ne==="next"?1:-1;else return G}}const vt=(K,ne)=>{if(!N)return;Ae===""&&Ie(K,"toggleInput");let G=H;H===-1?Ae===""&&ne==="previous"&&(G=ge.length-1):(G+=ne==="next"?1:-1,G<0&&(G=0),G===ge.length&&(G=-1)),G=yt(G,ne),Me(G),ct(G)},Vt=K=>{re.current=!0,ee(""),z&&z(K,"","clear"),Ce(K,N?[]:null,"clear")},It=K=>ne=>{if(K.onKeyDown&&K.onKeyDown(ne),!ne.defaultMuiPrevented&&(H!==-1&&["ArrowLeft","ArrowRight"].indexOf(ne.key)===-1&&(Me(-1),ct(-1)),ne.which!==229))switch(ne.key){case"Home":Ne&&T&&(ne.preventDefault(),Le({diff:"start",direction:"next",reason:"keyboard",event:ne}));break;case"End":Ne&&T&&(ne.preventDefault(),Le({diff:"end",direction:"previous",reason:"keyboard",event:ne}));break;case"PageUp":ne.preventDefault(),Le({diff:-ij,direction:"previous",reason:"keyboard",event:ne}),et(ne);break;case"PageDown":ne.preventDefault(),Le({diff:ij,direction:"next",reason:"keyboard",event:ne}),et(ne);break;case"ArrowDown":ne.preventDefault(),Le({diff:1,direction:"next",reason:"keyboard",event:ne}),et(ne);break;case"ArrowUp":ne.preventDefault(),Le({diff:-1,direction:"previous",reason:"keyboard",event:ne}),et(ne);break;case"ArrowLeft":vt(ne,"previous");break;case"ArrowRight":vt(ne,"next");break;case"Enter":if(Ee.current!==-1&&Ne){const G=De[Ee.current],ie=x?x(G):!1;if(ne.preventDefault(),ie)return;dt(ne,G,"selectOption"),r&&fe.current.setSelectionRange(fe.current.value.length,fe.current.value.length)}else y&&Ae!==""&&ze===!1&&(N&&ne.preventDefault(),dt(ne,Ae,"createOption","freeSolo"));break;case"Escape":Ne?(ne.preventDefault(),ne.stopPropagation(),Ie(ne,"escape")):l&&(Ae!==""||N&&ge.length>0)&&(ne.preventDefault(),ne.stopPropagation(),Vt(ne));break;case"Backspace":if(N&&!W&&Ae===""&&ge.length>0){const G=H===-1?ge.length-1:H,ie=ge.slice();ie.splice(G,1),Ce(ne,ie,"removeOption",{option:ge[G]})}break;case"Delete":if(N&&!W&&Ae===""&&ge.length>0&&H!==-1){const G=H,ie=ge.slice();ie.splice(G,1),Ce(ne,ie,"removeOption",{option:ge[G]})}break}},en=K=>{oe(!0),B&&!re.current&&et(K)},Dt=K=>{if(e(ae)){fe.current.focus();return}oe(!1),se.current=!0,re.current=!1,s&&Ee.current!==-1&&Ne?dt(K,De[Ee.current],"blur"):s&&y&&Ae!==""?dt(K,Ae,"blur","freeSolo"):a&&xe(K,ge),Ie(K,"blur")},mt=K=>{const ne=K.target.value;Ae!==ne&&(ee(ne),Ke(!1),z&&z(K,ne,"input")),ne===""?!d&&!N&&Ce(K,null,"clear"):et(K)},jt=K=>{const ne=Number(K.currentTarget.getAttribute("data-option-index"));Ee.current!==ne&&Xe({event:K,index:ne,reason:"mouse"})},mn=K=>{Xe({event:K,index:Number(K.currentTarget.getAttribute("data-option-index")),reason:"touch"}),ut.current=!0},fn=K=>{const ne=Number(K.currentTarget.getAttribute("data-option-index"));dt(K,De[ne],"selectOption"),ut.current=!1},_t=K=>ne=>{const G=ge.slice();G.splice(K,1),Ce(ne,G,"removeOption",{option:ge[K]})},Lt=K=>{Se?Ie(K,"toggleInput"):et(K)},Pt=K=>{K.currentTarget.contains(K.target)&&K.target.getAttribute("id")!==Q&&K.preventDefault()},bt=K=>{K.currentTarget.contains(K.target)&&(fe.current.focus(),j&&se.current&&fe.current.selectionEnd-fe.current.selectionStart===0&&fe.current.select(),se.current=!1)},Wt=K=>{!h&&(Ae===""||!Se)&&Lt(K)};let Cn=y&&Ae.length>0;Cn=Cn||(N?ge.length>0:ge!==null);let Z=De;return C&&(Z=De.reduce((K,ne,G)=>{const ie=C(ne);return K.length>0&&K[K.length-1].group===ie?K[K.length-1].options.push(ne):K.push({key:G,index:G,group:ie,options:[ne]}),K},[])),h&&Y&&Dt(),{getRootProps:(K={})=>he({"aria-owns":gt?`${Q}-listbox`:null},K,{onKeyDown:It(K),onMouseDown:Pt,onClick:bt}),getInputLabelProps:()=>({id:`${Q}-label`,htmlFor:Q}),getInputProps:()=>({id:Q,value:Ae,onBlur:Dt,onFocus:en,onChange:mt,onMouseDown:Wt,"aria-activedescendant":Ne?"":null,"aria-autocomplete":r?"both":"list","aria-controls":gt?`${Q}-listbox`:void 0,"aria-expanded":gt,autoComplete:"off",ref:fe,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:h}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:Vt}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Lt}),getTagProps:({index:K})=>he({key:K,"data-tag-index":K,tabIndex:-1},!W&&{onDelete:_t(K)}),getListboxProps:()=>({role:"listbox",id:`${Q}-listbox`,"aria-labelledby":`${Q}-label`,ref:ot,onMouseDown:K=>{K.preventDefault()}}),getOptionProps:({index:K,option:ne})=>{var G;const ie=(N?ge:[ge]).some(Te=>Te!=null&&P(ne,Te)),ce=x?x(ne):!1;return{key:(G=S==null?void 0:S(ne))!=null?G:te(ne),tabIndex:-1,role:"option",id:`${Q}-option-${K}`,onMouseMove:jt,onClick:fn,onTouchStart:mn,"data-option-index":K,"aria-disabled":ce,"aria-selected":ie}},id:Q,inputValue:Ae,value:ge,dirty:Cn,expanded:Ne&&ye,popupOpen:Ne,focused:Y||H!==-1,anchorEl:ye,setAnchorEl:le,focusedTag:H,groupedOptions:Z}}const FAe=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],BAe=$t(wAe,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),UAe=R.forwardRef(function(e,n){var r;const i=IB(),s=zn({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:l,componentsProps:c,container:u,disablePortal:d,keepMounted:f,modifiers:h,open:p,placement:v,popperOptions:g,popperRef:m,transition:y,slots:x,slotProps:S}=s,_=Ht(s,FAe),C=(r=x==null?void 0:x.root)!=null?r:l==null?void 0:l.Root,T=he({anchorEl:o,container:u,disablePortal:d,keepMounted:f,modifiers:h,open:p,placement:v,popperOptions:g,popperRef:m,transition:y},_);return L.jsx(BAe,he({as:a,direction:i==null?void 0:i.direction,slots:{root:C},slotProps:S??c},T,{ref:n}))}),nie=UAe;function zAe(t){return Un("MuiListSubheader",t)}$n("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const VAe=["className","color","component","disableGutters","disableSticky","inset"],WAe=t=>{const{classes:e,color:n,disableGutters:r,inset:i,disableSticky:s}=t,o={root:["root",n!=="default"&&`color${Et(n)}`,!r&&"gutters",i&&"inset",!s&&"sticky"]};return jn(o,zAe,e)},GAe=$t("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${Et(n.color)}`],!n.disableGutters&&e.gutters,n.inset&&e.inset,!n.disableSticky&&e.sticky]}})(({theme:t,ownerState:e})=>he({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(t.vars||t).palette.text.secondary,fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(14)},e.color==="primary"&&{color:(t.vars||t).palette.primary.main},e.color==="inherit"&&{color:"inherit"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.inset&&{paddingLeft:72},!e.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(t.vars||t).palette.background.paper})),rie=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiListSubheader"}),{className:i,color:s="default",component:o="li",disableGutters:a=!1,disableSticky:l=!1,inset:c=!1}=r,u=Ht(r,VAe),d=he({},r,{color:s,component:o,disableGutters:a,disableSticky:l,inset:c}),f=WAe(d);return L.jsx(GAe,he({as:o,className:Yt(f.root,i),ref:n,ownerState:d},u))});rie.muiSkipListHighlight=!0;const HAe=rie,jAe=pI(L.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function XAe(t){return Un("MuiChip",t)}const qAe=$n("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),mr=qAe,YAe=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],KAe=t=>{const{classes:e,disabled:n,size:r,color:i,iconColor:s,onDelete:o,clickable:a,variant:l}=t,c={root:["root",l,n&&"disabled",`size${Et(r)}`,`color${Et(i)}`,a&&"clickable",a&&`clickableColor${Et(i)}`,o&&"deletable",o&&`deletableColor${Et(i)}`,`${l}${Et(i)}`],label:["label",`label${Et(r)}`],avatar:["avatar",`avatar${Et(r)}`,`avatarColor${Et(i)}`],icon:["icon",`icon${Et(r)}`,`iconColor${Et(s)}`],deleteIcon:["deleteIcon",`deleteIcon${Et(r)}`,`deleteIconColor${Et(i)}`,`deleteIcon${Et(l)}Color${Et(i)}`]};return jn(c,XAe,e)},ZAe=$t("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:i,clickable:s,onDelete:o,size:a,variant:l}=n;return[{[`& .${mr.avatar}`]:e.avatar},{[`& .${mr.avatar}`]:e[`avatar${Et(a)}`]},{[`& .${mr.avatar}`]:e[`avatarColor${Et(r)}`]},{[`& .${mr.icon}`]:e.icon},{[`& .${mr.icon}`]:e[`icon${Et(a)}`]},{[`& .${mr.icon}`]:e[`iconColor${Et(i)}`]},{[`& .${mr.deleteIcon}`]:e.deleteIcon},{[`& .${mr.deleteIcon}`]:e[`deleteIcon${Et(a)}`]},{[`& .${mr.deleteIcon}`]:e[`deleteIconColor${Et(r)}`]},{[`& .${mr.deleteIcon}`]:e[`deleteIcon${Et(l)}Color${Et(r)}`]},e.root,e[`size${Et(a)}`],e[`color${Et(r)}`],s&&e.clickable,s&&r!=="default"&&e[`clickableColor${Et(r)})`],o&&e.deletable,o&&r!=="default"&&e[`deletableColor${Et(r)}`],e[l],e[`${l}${Et(r)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return he({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${mr.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${mr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:n,fontSize:t.typography.pxToRem(12)},[`& .${mr.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${mr.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${mr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${mr.icon}`]:he({marginLeft:5,marginRight:-6},e.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},e.iconColor===e.color&&he({color:t.vars?t.vars.palette.Chip.defaultIconColor:n},e.color!=="default"&&{color:"inherit"})),[`& .${mr.deleteIcon}`]:he({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:Xr(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:Xr(t.palette.text.primary,.4)}},e.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},e.color!=="default"&&{color:t.vars?`rgba(${t.vars.palette[e.color].contrastTextChannel} / 0.7)`:Xr(t.palette[e.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].contrastText}})},e.size==="small"&&{height:24},e.color!=="default"&&{backgroundColor:(t.vars||t).palette[e.color].main,color:(t.vars||t).palette[e.color].contrastText},e.onDelete&&{[`&.${mr.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Xr(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},e.onDelete&&e.color!=="default"&&{[`&.${mr.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}})},({theme:t,ownerState:e})=>he({},e.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Xr(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${mr.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Xr(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},e.clickable&&e.color!=="default"&&{[`&:hover, &.${mr.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}}),({theme:t,ownerState:e})=>he({},e.variant==="outlined"&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${mr.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${mr.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${mr.avatar}`]:{marginLeft:4},[`& .${mr.avatarSmall}`]:{marginLeft:2},[`& .${mr.icon}`]:{marginLeft:4},[`& .${mr.iconSmall}`]:{marginLeft:2},[`& .${mr.deleteIcon}`]:{marginRight:5},[`& .${mr.deleteIconSmall}`]:{marginRight:3}},e.variant==="outlined"&&e.color!=="default"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:Xr(t.palette[e.color].main,.7)}`,[`&.${mr.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Xr(t.palette[e.color].main,t.palette.action.hoverOpacity)},[`&.${mr.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:Xr(t.palette[e.color].main,t.palette.action.focusOpacity)},[`& .${mr.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:Xr(t.palette[e.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].main}}})),JAe=$t("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${Et(r)}`]]}})(({ownerState:t})=>he({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},t.variant==="outlined"&&{paddingLeft:11,paddingRight:11},t.size==="small"&&{paddingLeft:8,paddingRight:8},t.size==="small"&&t.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function sj(t){return t.key==="Backspace"||t.key==="Delete"}const QAe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiChip"}),{avatar:i,className:s,clickable:o,color:a="default",component:l,deleteIcon:c,disabled:u=!1,icon:d,label:f,onClick:h,onDelete:p,onKeyDown:v,onKeyUp:g,size:m="medium",variant:y="filled",tabIndex:x,skipFocusWhenDisabled:S=!1}=r,_=Ht(r,YAe),C=R.useRef(null),T=Hi(C,n),A=B=>{B.stopPropagation(),p&&p(B)},M=B=>{B.currentTarget===B.target&&sj(B)&&B.preventDefault(),v&&v(B)},E=B=>{B.currentTarget===B.target&&(p&&sj(B)?p(B):B.key==="Escape"&&C.current&&C.current.blur()),g&&g(B)},P=o!==!1&&h?!0:o,N=P||p?uw:l||"div",F=he({},r,{component:N,disabled:u,size:m,color:a,iconColor:R.isValidElement(d)&&d.props.color||a,onDelete:!!p,clickable:P,variant:y}),$=KAe(F),O=N===uw?he({component:l||"div",focusVisibleClassName:$.focusVisible},p&&{disableRipple:!0}):{};let z=null;p&&(z=c&&R.isValidElement(c)?R.cloneElement(c,{className:Yt(c.props.className,$.deleteIcon),onClick:A}):L.jsx(jAe,{className:Yt($.deleteIcon),onClick:A}));let X=null;i&&R.isValidElement(i)&&(X=R.cloneElement(i,{className:Yt($.avatar,i.props.className)}));let D=null;return d&&R.isValidElement(d)&&(D=R.cloneElement(d,{className:Yt($.icon,d.props.className)})),L.jsxs(ZAe,he({as:N,className:Yt($.root,s),disabled:P&&u?!0:void 0,onClick:h,onKeyDown:M,onKeyUp:E,ref:T,tabIndex:S&&u?-1:x,ownerState:F},O,_,{children:[X||D,L.jsx(JAe,{className:Yt($.label),ownerState:F,children:f}),z]}))}),eke=QAe;function Uy({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const tke=R.createContext(void 0),qB=tke;function zy(){return R.useContext(qB)}function iie(t){return L.jsx(hCe,he({},t,{defaultTheme:hI,themeId:Hm}))}function oj(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function rA(t,e=!1){return t&&(oj(t.value)&&t.value!==""||e&&oj(t.defaultValue)&&t.defaultValue!=="")}function nke(t){return t.startAdornment}function rke(t){return Un("MuiInputBase",t)}const ike=$n("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Ya=ike,ske=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],MI=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${Et(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},AI=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},oke=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:f,startAdornment:h,type:p}=t,v={root:["root",`color${Et(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",f&&f!=="medium"&&`size${Et(f)}`,u&&"multiline",h&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",u&&"inputMultiline",f==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",h&&"inputAdornedStart",s&&"inputAdornedEnd",d&&"readOnly"]};return jn(v,rke,e)},kI=$t("div",{name:"MuiInputBase",slot:"Root",overridesResolver:MI})(({theme:t,ownerState:e})=>he({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Ya.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&he({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),II=$t("input",{name:"MuiInputBase",slot:"Input",overridesResolver:AI})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=he({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return he({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Ya.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${Ya.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),ake=L.jsx(iie,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),lke=R.forwardRef(function(e,n){var r;const i=zn({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:f,disableInjectingGlobalStyles:h,endAdornment:p,fullWidth:v=!1,id:g,inputComponent:m="input",inputProps:y={},inputRef:x,maxRows:S,minRows:_,multiline:C=!1,name:T,onBlur:A,onChange:M,onClick:E,onFocus:P,onKeyDown:N,onKeyUp:F,placeholder:$,readOnly:O,renderSuffix:z,rows:X,slotProps:D={},slots:B={},startAdornment:V,type:W="text",value:j}=i,J=Ht(i,ske),Q=y.value!=null?y.value:j,{current:te}=R.useRef(Q!=null),re=R.useRef(),se=R.useCallback(Ne=>{},[]),fe=Hi(re,x,y.ref,se),[ae,ye]=R.useState(!1),le=zy(),H=Uy({props:i,muiFormControl:le,states:["color","disabled","error","hiddenLabel","size","required","filled"]});H.focused=le?le.focused:ae,R.useEffect(()=>{!le&&f&&ae&&(ye(!1),A&&A())},[le,f,ae,A]);const Me=le&&le.onFilled,we=le&&le.onEmpty,Ee=R.useCallback(Ne=>{rA(Ne)?Me&&Me():we&&we()},[Me,we]);jc(()=>{te&&Ee({value:Q})},[Q,Ee,te]);const ge=Ne=>{if(H.disabled){Ne.stopPropagation();return}P&&P(Ne),y.onFocus&&y.onFocus(Ne),le&&le.onFocus?le.onFocus(Ne):ye(!0)},qe=Ne=>{A&&A(Ne),y.onBlur&&y.onBlur(Ne),le&&le.onBlur?le.onBlur(Ne):ye(!1)},Ae=(Ne,...De)=>{if(!te){const Ve=Ne.target||re.current;if(Ve==null)throw new Error(Ch(1));Ee({value:Ve.value})}y.onChange&&y.onChange(Ne,...De),M&&M(Ne,...De)};R.useEffect(()=>{Ee(re.current)},[]);const ee=Ne=>{re.current&&Ne.currentTarget===Ne.target&&re.current.focus(),E&&E(Ne)};let Y=m,oe=y;C&&Y==="input"&&(X?oe=he({type:void 0,minRows:X,maxRows:X},oe):oe=he({type:void 0,maxRows:S,minRows:_},oe),Y=NAe);const xe=Ne=>{Ee(Ne.animationName==="mui-auto-fill-cancel"?re.current:{value:"x"})};R.useEffect(()=>{le&&le.setAdornedStart(!!V)},[le,V]);const Se=he({},i,{color:H.color||"primary",disabled:H.disabled,endAdornment:p,error:H.error,focused:H.focused,formControl:le,fullWidth:v,hiddenLabel:H.hiddenLabel,multiline:C,size:H.size,startAdornment:V,type:W}),be=oke(Se),Re=B.root||c.Root||kI,Ke=D.root||u.root||{},ze=B.input||c.Input||II;return oe=he({},oe,(r=D.input)!=null?r:u.input),L.jsxs(R.Fragment,{children:[!h&&ake,L.jsxs(Re,he({},Ke,!tA(Re)&&{ownerState:he({},Se,Ke.ownerState)},{ref:n,onClick:ee},J,{className:Yt(be.root,Ke.className,l,O&&"MuiInputBase-readOnly"),children:[V,L.jsx(qB.Provider,{value:null,children:L.jsx(ze,he({ownerState:Se,"aria-invalid":H.error,"aria-describedby":s,autoComplete:o,autoFocus:a,defaultValue:d,disabled:H.disabled,id:g,onAnimationStart:xe,name:T,placeholder:$,readOnly:O,required:H.required,rows:X,value:Q,onKeyDown:N,onKeyUp:F,type:W},oe,!tA(ze)&&{as:Y,ownerState:he({},Se,oe.ownerState)},{ref:fe,className:Yt(be.input,oe.className,O&&"MuiInputBase-readOnly"),onBlur:qe,onChange:Ae,onFocus:ge}))}),p,z?z(he({},H,{startAdornment:V})):null]}))]})}),YB=lke;function cke(t){return Un("MuiInput",t)}const uke=he({},Ya,$n("MuiInput",["root","underline","input"])),Xf=uke;function dke(t){return Un("MuiOutlinedInput",t)}const fke=he({},Ya,$n("MuiOutlinedInput",["root","notchedOutline","input"])),mu=fke;function hke(t){return Un("MuiFilledInput",t)}const pke=he({},Ya,$n("MuiFilledInput",["root","underline","input"])),Ka=pke,sie=pI(L.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function mke(t){return Un("MuiAutocomplete",t)}const gke=$n("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),Qn=gke;var aj,lj;const vke=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],yke=["ref"],xke=["key"],bke=t=>{const{classes:e,disablePortal:n,expanded:r,focused:i,fullWidth:s,hasClearIcon:o,hasPopupIcon:a,inputFocused:l,popupOpen:c,size:u}=t,d={root:["root",r&&"expanded",i&&"focused",s&&"fullWidth",o&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag",`tagSize${Et(u)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return jn(d,mke,e)},wke=$t("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{fullWidth:r,hasClearIcon:i,hasPopupIcon:s,inputFocused:o,size:a}=n;return[{[`& .${Qn.tag}`]:e.tag},{[`& .${Qn.tag}`]:e[`tagSize${Et(a)}`]},{[`& .${Qn.inputRoot}`]:e.inputRoot},{[`& .${Qn.input}`]:e.input},{[`& .${Qn.input}`]:o&&e.inputFocused},e.root,r&&e.fullWidth,s&&e.hasPopupIcon,i&&e.hasClearIcon]}})(({ownerState:t})=>he({[`&.${Qn.focused} .${Qn.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${Qn.clearIndicator}`]:{visibility:"visible"}}},t.fullWidth&&{width:"100%"},{[`& .${Qn.tag}`]:he({margin:3,maxWidth:"calc(100% - 6px)"},t.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${Qn.inputRoot}`]:{flexWrap:"wrap",[`.${Qn.hasPopupIcon}&, .${Qn.hasClearIcon}&`]:{paddingRight:30},[`.${Qn.hasPopupIcon}.${Qn.hasClearIcon}&`]:{paddingRight:56},[`& .${Qn.input}`]:{width:0,minWidth:30}},[`& .${Xf.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Xf.root}.${Ya.sizeSmall}`]:{[`& .${Xf.input}`]:{padding:"2px 4px 3px 0"}},[`& .${mu.root}`]:{padding:9,[`.${Qn.hasPopupIcon}&, .${Qn.hasClearIcon}&`]:{paddingRight:39},[`.${Qn.hasPopupIcon}.${Qn.hasClearIcon}&`]:{paddingRight:65},[`& .${Qn.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${Qn.endAdornment}`]:{right:9}},[`& .${mu.root}.${Ya.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${Qn.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${Ka.root}`]:{paddingTop:19,paddingLeft:8,[`.${Qn.hasPopupIcon}&, .${Qn.hasClearIcon}&`]:{paddingRight:39},[`.${Qn.hasPopupIcon}.${Qn.hasClearIcon}&`]:{paddingRight:65},[`& .${Ka.input}`]:{padding:"7px 4px"},[`& .${Qn.endAdornment}`]:{right:9}},[`& .${Ka.root}.${Ya.sizeSmall}`]:{paddingBottom:1,[`& .${Ka.input}`]:{padding:"2.5px 4px"}},[`& .${Ya.hiddenLabel}`]:{paddingTop:8},[`& .${Ka.root}.${Ya.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${Qn.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Ka.root}.${Ya.hiddenLabel}.${Ya.sizeSmall}`]:{[`& .${Qn.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${Qn.input}`]:he({flexGrow:1,textOverflow:"ellipsis",opacity:0},t.inputFocused&&{opacity:1})})),Ske=$t("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(t,e)=>e.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),_ke=$t(hb,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(t,e)=>e.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),Cke=$t(hb,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:t},e)=>he({},e.popupIndicator,t.popupOpen&&e.popupIndicatorOpen)})(({ownerState:t})=>he({padding:2,marginRight:-2},t.popupOpen&&{transform:"rotate(180deg)"})),Tke=$t(nie,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Qn.option}`]:e.option},e.popper,n.disablePortal&&e.popperDisablePortal]}})(({theme:t,ownerState:e})=>he({zIndex:(t.vars||t).zIndex.modal},e.disablePortal&&{position:"absolute"})),Eke=$t(Hh,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(t,e)=>e.paper})(({theme:t})=>he({},t.typography.body1,{overflow:"auto"})),Mke=$t("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(t,e)=>e.loading})(({theme:t})=>({color:(t.vars||t).palette.text.secondary,padding:"14px 16px"})),Ake=$t("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(t,e)=>e.noOptions})(({theme:t})=>({color:(t.vars||t).palette.text.secondary,padding:"14px 16px"})),kke=$t("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(t,e)=>e.listbox})(({theme:t})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${Qn.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[t.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${Qn.focused}`]:{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Qn.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Xr(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Qn.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Xr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${Qn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Xr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}}})),Ike=$t(HAe,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(t,e)=>e.groupLabel})(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,top:-8})),Rke=$t("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(t,e)=>e.groupUl})({padding:0,[`& .${Qn.option}`]:{paddingLeft:24}}),Pke=R.forwardRef(function(e,n){var r,i,s,o;const a=zn({props:e,name:"MuiAutocomplete"}),{autoComplete:l=!1,autoHighlight:c=!1,autoSelect:u=!1,blurOnSelect:d=!1,ChipProps:f,className:h,clearIcon:p=aj||(aj=L.jsx(PEe,{fontSize:"small"})),clearOnBlur:v=!a.freeSolo,clearOnEscape:g=!1,clearText:m="Clear",closeText:y="Close",componentsProps:x={},defaultValue:S=a.multiple?[]:null,disableClearable:_=!1,disableCloseOnSelect:C=!1,disabled:T=!1,disabledItemsFocusable:A=!1,disableListWrap:M=!1,disablePortal:E=!1,filterSelectedOptions:P=!1,forcePopupIcon:N="auto",freeSolo:F=!1,fullWidth:$=!1,getLimitTagsText:O=ne=>`+${ne}`,getOptionLabel:z,groupBy:X,handleHomeEndKeys:D=!a.freeSolo,includeInputInList:B=!1,limitTags:V=-1,ListboxComponent:W="ul",ListboxProps:j,loading:J=!1,loadingText:Q="Loading",multiple:te=!1,noOptionsText:re="No options",openOnFocus:se=!1,openText:fe="Open",PaperComponent:ae=Hh,PopperComponent:ye=nie,popupIcon:le=lj||(lj=L.jsx(sie,{})),readOnly:H=!1,renderGroup:Me,renderInput:we,renderOption:Ee,renderTags:ge,selectOnFocus:qe=!a.freeSolo,size:Ae="medium",slotProps:ee={}}=a,Y=Ht(a,vke),{getRootProps:oe,getInputProps:xe,getInputLabelProps:Se,getPopupIndicatorProps:be,getClearProps:Re,getTagProps:Ke,getListboxProps:ze,getOptionProps:Ne,value:De,dirty:Ve,expanded:gt,id:ct,popupOpen:Ye,focused:Xe,focusedTag:Le,anchorEl:pe,setAnchorEl:He,inputValue:ot,groupedOptions:et}=OAe(he({},a,{componentName:"Autocomplete"})),Ie=!_&&!T&&Ve&&!H,Ce=(!F||N===!0)&&N!==!1,{onMouseDown:ut}=xe(),{ref:dt}=j??{},yt=ze(),{ref:vt}=yt,Vt=Ht(yt,yke),It=Hi(vt,dt),Dt=z||(ne=>{var G;return(G=ne.label)!=null?G:ne}),mt=he({},a,{disablePortal:E,expanded:gt,focused:Xe,fullWidth:$,getOptionLabel:Dt,hasClearIcon:Ie,hasPopupIcon:Ce,inputFocused:Le===-1,popupOpen:Ye,size:Ae}),jt=bke(mt);let mn;if(te&&De.length>0){const ne=G=>he({className:jt.tag,disabled:T},Ke(G));ge?mn=ge(De,ne,mt):mn=De.map((G,ie)=>L.jsx(eke,he({label:Dt(G),size:Ae},ne({index:ie}),f)))}if(V>-1&&Array.isArray(mn)){const ne=mn.length-V;!Xe&&ne>0&&(mn=mn.splice(0,V),mn.push(L.jsx("span",{className:jt.tag,children:O(ne)},mn.length)))}const _t=Me||(ne=>L.jsxs("li",{children:[L.jsx(Ike,{className:jt.groupLabel,ownerState:mt,component:"div",children:ne.group}),L.jsx(Rke,{className:jt.groupUl,ownerState:mt,children:ne.children})]},ne.key)),Pt=Ee||((ne,G)=>{const{key:ie}=ne,ce=Ht(ne,xke);return L.jsx("li",he({},ce,{children:Dt(G)}),ie)}),bt=(ne,G)=>{const ie=Ne({option:ne,index:G});return Pt(he({},ie,{className:jt.option}),ne,{selected:ie["aria-selected"],index:G,inputValue:ot},mt)},Wt=(r=ee.clearIndicator)!=null?r:x.clearIndicator,Cn=(i=ee.paper)!=null?i:x.paper,Z=(s=ee.popper)!=null?s:x.popper,K=(o=ee.popupIndicator)!=null?o:x.popupIndicator;return L.jsxs(R.Fragment,{children:[L.jsx(wke,he({ref:n,className:Yt(jt.root,h),ownerState:mt},oe(Y),{children:we({id:ct,disabled:T,fullWidth:!0,size:Ae==="small"?"small":void 0,InputLabelProps:Se(),InputProps:he({ref:He,className:jt.inputRoot,startAdornment:mn,onClick:ne=>{ne.target===ne.currentTarget&&ut(ne)}},(Ie||Ce)&&{endAdornment:L.jsxs(Ske,{className:jt.endAdornment,ownerState:mt,children:[Ie?L.jsx(_ke,he({},Re(),{"aria-label":m,title:m,ownerState:mt},Wt,{className:Yt(jt.clearIndicator,Wt==null?void 0:Wt.className),children:p})):null,Ce?L.jsx(Cke,he({},be(),{disabled:T,"aria-label":Ye?y:fe,title:Ye?y:fe,ownerState:mt},K,{className:Yt(jt.popupIndicator,K==null?void 0:K.className),children:le})):null]})}),inputProps:he({className:jt.input,disabled:T,readOnly:H},xe())})})),pe?L.jsx(Tke,he({as:ye,disablePortal:E,style:{width:pe?pe.clientWidth:null},ownerState:mt,role:"presentation",anchorEl:pe,open:Ye},Z,{className:Yt(jt.popper,Z==null?void 0:Z.className),children:L.jsxs(Eke,he({ownerState:mt,as:ae},Cn,{className:Yt(jt.paper,Cn==null?void 0:Cn.className),children:[J&&et.length===0?L.jsx(Mke,{className:jt.loading,ownerState:mt,children:Q}):null,et.length===0&&!F&&!J?L.jsx(Ake,{className:jt.noOptions,ownerState:mt,role:"presentation",onMouseDown:ne=>{ne.preventDefault()},children:re}):null,et.length>0?L.jsx(kke,he({as:W,className:jt.listbox,ownerState:mt},Vt,j,{ref:It,children:et.map((ne,G)=>X?_t({key:ne.key,group:ne.group,children:ne.options.map((ie,ce)=>bt(ie,ne.index+ce))}):bt(ne,G))})):null]}))})):null]})}),Nke=Pke,$ke=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Dke={entering:{opacity:1},entered:{opacity:1}},Lke=R.forwardRef(function(e,n){const r=zS(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:f,onExit:h,onExited:p,onExiting:v,style:g,timeout:m=i,TransitionComponent:y=Wre}=e,x=Ht(e,$ke),S=R.useRef(null),_=Hi(S,a.ref,n),C=$=>O=>{if($){const z=S.current;O===void 0?$(z):$(z,O)}},T=C(f),A=C(($,O)=>{Gre($);const z=eA({style:g,timeout:m,easing:l},{mode:"enter"});$.style.webkitTransition=r.transitions.create("opacity",z),$.style.transition=r.transitions.create("opacity",z),u&&u($,O)}),M=C(d),E=C(v),P=C($=>{const O=eA({style:g,timeout:m,easing:l},{mode:"exit"});$.style.webkitTransition=r.transitions.create("opacity",O),$.style.transition=r.transitions.create("opacity",O),h&&h($)}),N=C(p),F=$=>{s&&s(S.current,$)};return L.jsx(y,he({appear:o,in:c,nodeRef:S,onEnter:A,onEntered:M,onEntering:T,onExit:P,onExited:N,onExiting:E,addEndListener:F,timeout:m},x,{children:($,O)=>R.cloneElement(a,he({style:he({opacity:0,visibility:$==="exited"&&!c?"hidden":void 0},Dke[$],g,a.props.style),ref:_},O))}))}),oie=Lke;function Oke(t){return Un("MuiBackdrop",t)}$n("MuiBackdrop",["root","invisible"]);const Fke=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Bke=t=>{const{classes:e,invisible:n}=t;return jn({root:["root",n&&"invisible"]},Oke,e)},Uke=$t("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>he({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),zke=R.forwardRef(function(e,n){var r,i,s;const o=zn({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:c="div",components:u={},componentsProps:d={},invisible:f=!1,open:h,slotProps:p={},slots:v={},TransitionComponent:g=oie,transitionDuration:m}=o,y=Ht(o,Fke),x=he({},o,{component:c,invisible:f}),S=Bke(x),_=(r=p.root)!=null?r:d.root;return L.jsx(g,he({in:h,timeout:m},y,{children:L.jsx(Uke,he({"aria-hidden":!0},_,{as:(i=(s=v.root)!=null?s:u.Root)!=null?i:c,className:Yt(S.root,l,_==null?void 0:_.className),ownerState:he({},x,_==null?void 0:_.ownerState),classes:S,ref:n,children:a}))}))}),aie=zke,Vke=$n("MuiBox",["root"]),Wke=Vke,Gke=LB(),Hke=vCe({themeId:Hm,defaultTheme:Gke,defaultClassName:Wke.root,generateClassName:TB.generate}),Gn=Hke;function jke(t){return Un("MuiButton",t)}const Xke=$n("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),iT=Xke,qke=R.createContext({}),Yke=qke,Kke=R.createContext(void 0),Zke=Kke,Jke=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Qke=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,classes:o}=t,a={root:["root",s,`${s}${Et(e)}`,`size${Et(i)}`,`${s}Size${Et(i)}`,e==="inherit"&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Et(i)}`],endIcon:["endIcon",`iconSize${Et(i)}`]},l=jn(a,jke,o);return he({},o,l)},lie=t=>he({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),eIe=$t(uw,{shouldForwardProp:t=>cc(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${Et(n.color)}`],e[`size${Et(n.size)}`],e[`${n.variant}Size${Et(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],s=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return he({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":he({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:Xr(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Xr(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Xr(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":he({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${iT.focusVisible}`]:he({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${iT.disabled}`]:he({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${Xr(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${iT.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${iT.disabled}`]:{boxShadow:"none"}}),tIe=$t("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${Et(n.size)}`]]}})(({ownerState:t})=>he({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},lie(t))),nIe=$t("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${Et(n.size)}`]]}})(({ownerState:t})=>he({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},lie(t))),rIe=R.forwardRef(function(e,n){const r=R.useContext(Yke),i=R.useContext(Zke),s=CB(r,e),o=zn({props:s,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:f=!1,disableFocusRipple:h=!1,endIcon:p,focusVisibleClassName:v,fullWidth:g=!1,size:m="medium",startIcon:y,type:x,variant:S="text"}=o,_=Ht(o,Jke),C=he({},o,{color:l,component:c,disabled:d,disableElevation:f,disableFocusRipple:h,fullWidth:g,size:m,type:x,variant:S}),T=Qke(C),A=y&&L.jsx(tIe,{className:T.startIcon,ownerState:C,children:y}),M=p&&L.jsx(nIe,{className:T.endIcon,ownerState:C,children:p}),E=i||"";return L.jsxs(eIe,he({ownerState:C,className:Yt(r.className,T.root,u,E),component:c,disabled:d,focusRipple:!h,focusVisibleClassName:Yt(T.focusVisible,v),ref:n,type:x},_,{classes:T,children:[A,a,M]}))}),Is=rIe;function iIe(t){return Un("MuiCard",t)}$n("MuiCard",["root"]);const sIe=["className","raised"],oIe=t=>{const{classes:e}=t;return jn({root:["root"]},iIe,e)},aIe=$t(Hh,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),lIe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=r,o=Ht(r,sIe),a=he({},r,{raised:s}),l=oIe(a);return L.jsx(aIe,he({className:Yt(l.root,i),elevation:s?8:void 0,ref:n,ownerState:a},o))}),cie=lIe;function cIe(t){return Un("MuiCardActions",t)}$n("MuiCardActions",["root","spacing"]);const uIe=["disableSpacing","className"],dIe=t=>{const{classes:e,disableSpacing:n}=t;return jn({root:["root",!n&&"spacing"]},cIe,e)},fIe=$t("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>he({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),hIe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:s}=r,o=Ht(r,uIe),a=he({},r,{disableSpacing:i}),l=dIe(a);return L.jsx(fIe,he({className:Yt(l.root,s),ownerState:a,ref:n},o))}),uie=hIe;function pIe(t){return Un("MuiCardContent",t)}$n("MuiCardContent",["root"]);const mIe=["className","component"],gIe=t=>{const{classes:e}=t;return jn({root:["root"]},pIe,e)},vIe=$t("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),yIe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiCardContent"}),{className:i,component:s="div"}=r,o=Ht(r,mIe),a=he({},r,{component:s}),l=gIe(a);return L.jsx(vIe,he({as:s,className:Yt(l.root,i),ownerState:a,ref:n},o))}),die=yIe,xIe=jCe({createStyledComponent:$t("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${Et(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>zn({props:t,name:"MuiContainer"})}),KB=xIe,bIe=(t,e)=>he({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&!t.vars&&{colorScheme:t.palette.mode}),wIe=t=>he({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),SIe=(t,e=!1)=>{var n;const r={};e&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([o,a])=>{var l;r[t.getColorSchemeSelector(o).replace(/\s*&/,"")]={colorScheme:(l=a.palette)==null?void 0:l.mode}});let i=he({html:bIe(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:he({margin:0},wIe(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},r);const s=(n=t.components)==null||(n=n.MuiCssBaseline)==null?void 0:n.styleOverrides;return s&&(i=[i,s]),i};function _Ie(t){const e=zn({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return L.jsxs(R.Fragment,{children:[L.jsx(iie,{styles:i=>SIe(i,r)}),n]})}function CIe(t){return Un("MuiModal",t)}$n("MuiModal",["root","hidden","backdrop"]);const TIe=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],EIe=t=>{const{open:e,exited:n,classes:r}=t;return jn({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},CIe,r)},MIe=$t("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>he({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),AIe=$t(aie,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),kIe=R.forwardRef(function(e,n){var r,i,s,o,a,l;const c=zn({name:"MuiModal",props:e}),{BackdropComponent:u=AIe,BackdropProps:d,className:f,closeAfterTransition:h=!1,children:p,container:v,component:g,components:m={},componentsProps:y={},disableAutoFocus:x=!1,disableEnforceFocus:S=!1,disableEscapeKeyDown:_=!1,disablePortal:C=!1,disableRestoreFocus:T=!1,disableScrollLock:A=!1,hideBackdrop:M=!1,keepMounted:E=!1,onBackdropClick:P,open:N,slotProps:F,slots:$}=c,O=Ht(c,TIe),z=he({},c,{closeAfterTransition:h,disableAutoFocus:x,disableEnforceFocus:S,disableEscapeKeyDown:_,disablePortal:C,disableRestoreFocus:T,disableScrollLock:A,hideBackdrop:M,keepMounted:E}),{getRootProps:X,getBackdropProps:D,getTransitionProps:B,portalRef:V,isTopModal:W,exited:j,hasTransition:J}=IAe(he({},z,{rootRef:n})),Q=he({},z,{exited:j}),te=EIe(Q),re={};if(p.props.tabIndex===void 0&&(re.tabIndex="-1"),J){const{onEnter:Me,onExited:we}=B();re.onEnter=Me,re.onExited=we}const se=(r=(i=$==null?void 0:$.root)!=null?i:m.Root)!=null?r:MIe,fe=(s=(o=$==null?void 0:$.backdrop)!=null?o:m.Backdrop)!=null?s:u,ae=(a=F==null?void 0:F.root)!=null?a:y.root,ye=(l=F==null?void 0:F.backdrop)!=null?l:y.backdrop,le=Xm({elementType:se,externalSlotProps:ae,externalForwardedProps:O,getSlotProps:X,additionalProps:{ref:n,as:g},ownerState:Q,className:Yt(f,ae==null?void 0:ae.className,te==null?void 0:te.root,!Q.open&&Q.exited&&(te==null?void 0:te.hidden))}),H=Xm({elementType:fe,externalSlotProps:ye,additionalProps:d,getSlotProps:Me=>D(he({},Me,{onClick:we=>{P&&P(we),Me!=null&&Me.onClick&&Me.onClick(we)}})),className:Yt(ye==null?void 0:ye.className,d==null?void 0:d.className,te==null?void 0:te.backdrop),ownerState:Q});return!E&&!N&&(!J||j)?null:L.jsx(tie,{ref:V,container:v,disablePortal:C,children:L.jsxs(se,he({},le,{children:[!M&&u?L.jsx(fe,he({},H)):null,L.jsx(sMe,{disableEnforceFocus:S,disableAutoFocus:x,disableRestoreFocus:T,isEnabled:W,open:N,children:R.cloneElement(p,re)})]}))})}),fie=kIe;function IIe(t){return Un("MuiDialog",t)}const RIe=$n("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),r$=RIe,PIe=R.createContext({}),hie=PIe,NIe=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],$Ie=$t(aie,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),DIe=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:s}=t,o={root:["root"],container:["container",`scroll${Et(n)}`],paper:["paper",`paperScroll${Et(n)}`,`paperWidth${Et(String(r))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return jn(o,IIe,e)},LIe=$t(fie,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),OIe=$t("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${Et(n.scroll)}`]]}})(({ownerState:t})=>he({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),FIe=$t(Hh,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${Et(n.scroll)}`],e[`paperWidth${Et(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>he({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${r$.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`,[`&.${r$.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${r$.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),BIe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiDialog"}),i=zS(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":a,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:f=!1,fullScreen:h=!1,fullWidth:p=!1,maxWidth:v="sm",onBackdropClick:g,onClose:m,open:y,PaperComponent:x=Hh,PaperProps:S={},scroll:_="paper",TransitionComponent:C=oie,transitionDuration:T=s,TransitionProps:A}=r,M=Ht(r,NIe),E=he({},r,{disableEscapeKeyDown:f,fullScreen:h,fullWidth:p,maxWidth:v,scroll:_}),P=DIe(E),N=R.useRef(),F=X=>{N.current=X.target===X.currentTarget},$=X=>{N.current&&(N.current=null,g&&g(X),m&&m(X,"backdropClick"))},O=DS(a),z=R.useMemo(()=>({titleId:O}),[O]);return L.jsx(LIe,he({className:Yt(P.root,d),closeAfterTransition:!0,components:{Backdrop:$Ie},componentsProps:{backdrop:he({transitionDuration:T,as:l},c)},disableEscapeKeyDown:f,onClose:m,open:y,ref:n,onClick:$,ownerState:E},M,{children:L.jsx(C,he({appear:!0,in:y,timeout:T,role:"presentation"},A,{children:L.jsx(OIe,{className:Yt(P.container),onMouseDown:F,ownerState:E,children:L.jsx(FIe,he({as:x,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":O},S,{className:Yt(P.paper,S.className),ownerState:E,children:L.jsx(hie.Provider,{value:z,children:u})}))})}))}))}),UIe=BIe;function zIe(t){return Un("MuiDialogActions",t)}$n("MuiDialogActions",["root","spacing"]);const VIe=["className","disableSpacing"],WIe=t=>{const{classes:e,disableSpacing:n}=t;return jn({root:["root",!n&&"spacing"]},zIe,e)},GIe=$t("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>he({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),HIe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1}=r,o=Ht(r,VIe),a=he({},r,{disableSpacing:s}),l=WIe(a);return L.jsx(GIe,he({className:Yt(l.root,i),ownerState:a,ref:n},o))}),jIe=HIe;function XIe(t){return Un("MuiDialogContent",t)}$n("MuiDialogContent",["root","dividers"]);function qIe(t){return Un("MuiDialogTitle",t)}const YIe=$n("MuiDialogTitle",["root"]),KIe=YIe,ZIe=["className","dividers"],JIe=t=>{const{classes:e,dividers:n}=t;return jn({root:["root",n&&"dividers"]},XIe,e)},QIe=$t("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>he({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${KIe.root} + &`]:{paddingTop:0}})),eRe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1}=r,o=Ht(r,ZIe),a=he({},r,{dividers:s}),l=JIe(a);return L.jsx(QIe,he({className:Yt(l.root,i),ownerState:a,ref:n},o))}),tRe=eRe,nRe=["className","id"],rRe=t=>{const{classes:e}=t;return jn({root:["root"]},qIe,e)},iRe=$t(un,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),sRe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiDialogTitle"}),{className:i,id:s}=r,o=Ht(r,nRe),a=r,l=rRe(a),{titleId:c=s}=R.useContext(hie);return L.jsx(iRe,he({component:"h2",className:Yt(l.root,i),ownerState:a,ref:n,variant:"h6",id:s??c},o))}),oRe=sRe,aRe=$n("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),cj=aRe,lRe=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],cRe=t=>{const{classes:e,disableUnderline:n}=t,i=jn({root:["root",!n&&"underline"],input:["input"]},hke,e);return he({},e,i)},uRe=$t(kI,{shouldForwardProp:t=>cc(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...MI(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return he({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${Ka.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${Ka.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ka.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ka.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ka.disabled}, .${Ka.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Ka.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&he({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),dRe=$t(II,{name:"MuiFilledInput",slot:"Input",overridesResolver:AI})(({theme:t,ownerState:e})=>he({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),pie=R.forwardRef(function(e,n){var r,i,s,o;const a=zn({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:f=!1,slotProps:h,slots:p={},type:v="text"}=a,g=Ht(a,lRe),m=he({},a,{fullWidth:u,inputComponent:d,multiline:f,type:v}),y=cRe(a),x={root:{ownerState:m},input:{ownerState:m}},S=h??c?Aa(x,h??c):x,_=(r=(i=p.root)!=null?i:l.Root)!=null?r:uRe,C=(s=(o=p.input)!=null?o:l.Input)!=null?s:dRe;return L.jsx(YB,he({slots:{root:_,input:C},componentsProps:S,fullWidth:u,inputComponent:d,multiline:f,ref:n,type:v},g,{classes:y}))});pie.muiName="Input";const mie=pie;function fRe(t){return Un("MuiFormControl",t)}$n("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const hRe=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],pRe=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${Et(n)}`,r&&"fullWidth"]};return jn(i,fRe,e)},mRe=$t("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>he({},e.root,e[`margin${Et(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>he({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),gRe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:f=!1,margin:h="none",required:p=!1,size:v="medium",variant:g="outlined"}=r,m=Ht(r,hRe),y=he({},r,{color:o,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:f,margin:h,required:p,size:v,variant:g}),x=pRe(y),[S,_]=R.useState(()=>{let F=!1;return i&&R.Children.forEach(i,$=>{if(!ub($,["Input","Select"]))return;const O=ub($,["Select"])?$.props.input:$;O&&nke(O.props)&&(F=!0)}),F}),[C,T]=R.useState(()=>{let F=!1;return i&&R.Children.forEach(i,$=>{ub($,["Input","Select"])&&(rA($.props,!0)||rA($.props.inputProps,!0))&&(F=!0)}),F}),[A,M]=R.useState(!1);l&&A&&M(!1);const E=u!==void 0&&!l?u:A;let P;const N=R.useMemo(()=>({adornedStart:S,setAdornedStart:_,color:o,disabled:l,error:c,filled:C,focused:E,fullWidth:d,hiddenLabel:f,size:v,onBlur:()=>{M(!1)},onEmpty:()=>{T(!1)},onFilled:()=>{T(!0)},onFocus:()=>{M(!0)},registerEffect:P,required:p,variant:g}),[S,o,l,c,C,E,d,f,P,p,v,g]);return L.jsx(qB.Provider,{value:N,children:L.jsx(mRe,he({as:a,ownerState:y,className:Yt(x.root,s),ref:n},m,{children:i}))})}),vRe=gRe;function yRe(t){return Un("MuiFormHelperText",t)}const xRe=$n("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),uj=xRe;var dj;const bRe=["children","className","component","disabled","error","filled","focused","margin","required","variant"],wRe=t=>{const{classes:e,contained:n,size:r,disabled:i,error:s,filled:o,focused:a,required:l}=t,c={root:["root",i&&"disabled",s&&"error",r&&`size${Et(r)}`,n&&"contained",a&&"focused",o&&"filled",l&&"required"]};return jn(c,yRe,e)},SRe=$t("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${Et(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>he({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${uj.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${uj.error}`]:{color:(t.vars||t).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),_Re=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:o="p"}=r,a=Ht(r,bRe),l=zy(),c=Uy({props:r,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),u=he({},r,{component:o,contained:c.variant==="filled"||c.variant==="outlined",variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=wRe(u);return L.jsx(SRe,he({as:o,ownerState:u,className:Yt(d.root,s),ref:n},a,{children:i===" "?dj||(dj=L.jsx("span",{className:"notranslate",children:""})):i}))}),CRe=_Re;function TRe(t){return Un("MuiFormLabel",t)}const ERe=$n("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),vb=ERe,MRe=["children","className","color","component","disabled","error","filled","focused","required"],ARe=t=>{const{classes:e,color:n,focused:r,disabled:i,error:s,filled:o,required:a}=t,l={root:["root",`color${Et(n)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return jn(l,TRe,e)},kRe=$t("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>he({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>he({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${vb.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${vb.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${vb.error}`]:{color:(t.vars||t).palette.error.main}})),IRe=$t("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${vb.error}`]:{color:(t.vars||t).palette.error.main}})),RRe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiFormLabel"}),{children:i,className:s,component:o="label"}=r,a=Ht(r,MRe),l=zy(),c=Uy({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),u=he({},r,{color:c.color||"primary",component:o,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=ARe(u);return L.jsxs(kRe,he({as:o,ownerState:u,className:Yt(d.root,s),ref:n},a,{children:[i,c.required&&L.jsxs(IRe,{ownerState:u,"aria-hidden":!0,className:d.asterisk,children:["","*"]})]}))}),PRe=RRe,NRe=R.createContext(),fj=NRe;function $Re(t){return Un("MuiGrid",t)}const DRe=[0,1,2,3,4,5,6,7,8,9,10],LRe=["column-reverse","column","row-reverse","row"],ORe=["nowrap","wrap-reverse","wrap"],c1=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],FRe=$n("MuiGrid",["root","container","item","zeroMinWidth",...DRe.map(t=>`spacing-xs-${t}`),...LRe.map(t=>`direction-xs-${t}`),...ORe.map(t=>`wrap-xs-${t}`),...c1.map(t=>`grid-xs-${t}`),...c1.map(t=>`grid-sm-${t}`),...c1.map(t=>`grid-md-${t}`),...c1.map(t=>`grid-lg-${t}`),...c1.map(t=>`grid-xl-${t}`)]),hw=FRe,BRe=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function $v(t){const e=parseFloat(t);return`${e}${String(t).replace(String(e),"")||"px"}`}function URe({theme:t,ownerState:e}){let n;return t.breakpoints.keys.reduce((r,i)=>{let s={};if(e[i]&&(n=e[i]),!n)return r;if(n===!0)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=rI({values:e.columns,breakpoints:t.breakpoints.values}),a=typeof o=="object"?o[i]:o;if(a==null)return r;const l=`${Math.round(n/a*1e8)/1e6}%`;let c={};if(e.container&&e.item&&e.columnSpacing!==0){const u=t.spacing(e.columnSpacing);if(u!=="0px"){const d=`calc(${l} + ${$v(u)})`;c={flexBasis:d,maxWidth:d}}}s=he({flexBasis:l,flexGrow:0,maxWidth:l},c)}return t.breakpoints.values[i]===0?Object.assign(r,s):r[t.breakpoints.up(i)]=s,r},{})}function zRe({theme:t,ownerState:e}){const n=rI({values:e.direction,breakpoints:t.breakpoints.values});return ec({theme:t},n,r=>{const i={flexDirection:r};return r.indexOf("column")===0&&(i[`& > .${hw.item}`]={maxWidth:"none"}),i})}function gie({breakpoints:t,values:e}){let n="";Object.keys(e).forEach(i=>{n===""&&e[i]!==0&&(n=i)});const r=Object.keys(t).sort((i,s)=>t[i]-t[s]);return r.slice(0,r.indexOf(n))}function VRe({theme:t,ownerState:e}){const{container:n,rowSpacing:r}=e;let i={};if(n&&r!==0){const s=rI({values:r,breakpoints:t.breakpoints.values});let o;typeof s=="object"&&(o=gie({breakpoints:t.breakpoints.values,values:s})),i=ec({theme:t},s,(a,l)=>{var c;const u=t.spacing(a);return u!=="0px"?{marginTop:`-${$v(u)}`,[`& > .${hw.item}`]:{paddingTop:$v(u)}}:(c=o)!=null&&c.includes(l)?{}:{marginTop:0,[`& > .${hw.item}`]:{paddingTop:0}}})}return i}function WRe({theme:t,ownerState:e}){const{container:n,columnSpacing:r}=e;let i={};if(n&&r!==0){const s=rI({values:r,breakpoints:t.breakpoints.values});let o;typeof s=="object"&&(o=gie({breakpoints:t.breakpoints.values,values:s})),i=ec({theme:t},s,(a,l)=>{var c;const u=t.spacing(a);return u!=="0px"?{width:`calc(100% + ${$v(u)})`,marginLeft:`-${$v(u)}`,[`& > .${hw.item}`]:{paddingLeft:$v(u)}}:(c=o)!=null&&c.includes(l)?{}:{width:"100%",marginLeft:0,[`& > .${hw.item}`]:{paddingLeft:0}}})}return i}function GRe(t,e,n={}){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[n[`spacing-xs-${String(t)}`]];const r=[];return e.forEach(i=>{const s=t[i];Number(s)>0&&r.push(n[`spacing-${i}-${String(s)}`])}),r}const HRe=$t("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{container:r,direction:i,item:s,spacing:o,wrap:a,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=GRe(o,c,e));const d=[];return c.forEach(f=>{const h=n[f];h&&d.push(e[`grid-${f}-${String(h)}`])}),[e.root,r&&e.container,s&&e.item,l&&e.zeroMinWidth,...u,i!=="row"&&e[`direction-xs-${String(i)}`],a!=="wrap"&&e[`wrap-xs-${String(a)}`],...d]}})(({ownerState:t})=>he({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},t.wrap!=="wrap"&&{flexWrap:t.wrap}),zRe,VRe,WRe,URe);function jRe(t,e){if(!t||t<=0)return[];if(typeof t=="string"&&!Number.isNaN(Number(t))||typeof t=="number")return[`spacing-xs-${String(t)}`];const n=[];return e.forEach(r=>{const i=t[r];if(Number(i)>0){const s=`spacing-${r}-${String(i)}`;n.push(s)}}),n}const XRe=t=>{const{classes:e,container:n,direction:r,item:i,spacing:s,wrap:o,zeroMinWidth:a,breakpoints:l}=t;let c=[];n&&(c=jRe(s,l));const u=[];l.forEach(f=>{const h=t[f];h&&u.push(`grid-${f}-${String(h)}`)});const d={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...c,r!=="row"&&`direction-xs-${String(r)}`,o!=="wrap"&&`wrap-xs-${String(o)}`,...u]};return jn(d,$Re,e)},qRe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiGrid"}),{breakpoints:i}=zS(),s=dI(r),{className:o,columns:a,columnSpacing:l,component:c="div",container:u=!1,direction:d="row",item:f=!1,rowSpacing:h,spacing:p=0,wrap:v="wrap",zeroMinWidth:g=!1}=s,m=Ht(s,BRe),y=h||p,x=l||p,S=R.useContext(fj),_=u?a||12:S,C={},T=he({},m);i.keys.forEach(E=>{m[E]!=null&&(C[E]=m[E],delete T[E])});const A=he({},s,{columns:_,container:u,direction:d,item:f,rowSpacing:y,columnSpacing:x,wrap:v,zeroMinWidth:g,spacing:p},C,{breakpoints:i.keys}),M=XRe(A);return L.jsx(fj.Provider,{value:_,children:L.jsx(HRe,he({ownerState:A,className:Yt(M.root,o),as:c,ref:n},T))})}),i$=qRe,YRe=lTe({createStyledComponent:$t("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(t,e)=>e.root}),componentName:"MuiGrid2",useThemeProps:t=>zn({props:t,name:"MuiGrid2"})}),iA=YRe,KRe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function NO(t){return`scale(${t}, ${t**2})`}const ZRe={entering:{opacity:1,transform:NO(1)},entered:{opacity:1,transform:"none"}},s$=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),vie=R.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:f,onExiting:h,style:p,timeout:v="auto",TransitionComponent:g=Wre}=e,m=Ht(e,KRe),y=R.useRef(),x=R.useRef(),S=zS(),_=R.useRef(null),C=Hi(_,s.ref,n),T=O=>z=>{if(O){const X=_.current;z===void 0?O(X):O(X,z)}},A=T(u),M=T((O,z)=>{Gre(O);const{duration:X,delay:D,easing:B}=eA({style:p,timeout:v,easing:o},{mode:"enter"});let V;v==="auto"?(V=S.transitions.getAutoHeightDuration(O.clientHeight),x.current=V):V=X,O.style.transition=[S.transitions.create("opacity",{duration:V,delay:D}),S.transitions.create("transform",{duration:s$?V:V*.666,delay:D,easing:B})].join(","),l&&l(O,z)}),E=T(c),P=T(h),N=T(O=>{const{duration:z,delay:X,easing:D}=eA({style:p,timeout:v,easing:o},{mode:"exit"});let B;v==="auto"?(B=S.transitions.getAutoHeightDuration(O.clientHeight),x.current=B):B=z,O.style.transition=[S.transitions.create("opacity",{duration:B,delay:X}),S.transitions.create("transform",{duration:s$?B:B*.666,delay:s$?X:X||B*.333,easing:D})].join(","),O.style.opacity=0,O.style.transform=NO(.75),d&&d(O)}),F=T(f),$=O=>{v==="auto"&&(y.current=setTimeout(O,x.current||0)),r&&r(_.current,O)};return R.useEffect(()=>()=>{clearTimeout(y.current)},[]),L.jsx(g,he({appear:i,in:a,nodeRef:_,onEnter:M,onEntered:E,onEntering:A,onExit:N,onExited:F,onExiting:P,addEndListener:$,timeout:v==="auto"?null:v},m,{children:(O,z)=>R.cloneElement(s,he({style:he({opacity:0,transform:NO(.75),visibility:O==="exited"&&!a?"hidden":void 0},ZRe[O],p,s.props.style),ref:C},z))}))});vie.muiSupportAuto=!0;const JRe=vie,QRe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],e3e=t=>{const{classes:e,disableUnderline:n}=t,i=jn({root:["root",!n&&"underline"],input:["input"]},cke,e);return he({},e,i)},t3e=$t(kI,{shouldForwardProp:t=>cc(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...MI(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),he({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Xf.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Xf.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Xf.disabled}, .${Xf.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Xf.disabled}:before`]:{borderBottomStyle:"dotted"}})}),n3e=$t(II,{name:"MuiInput",slot:"Input",overridesResolver:AI})({}),yie=R.forwardRef(function(e,n){var r,i,s,o;const a=zn({props:e,name:"MuiInput"}),{disableUnderline:l,components:c={},componentsProps:u,fullWidth:d=!1,inputComponent:f="input",multiline:h=!1,slotProps:p,slots:v={},type:g="text"}=a,m=Ht(a,QRe),y=e3e(a),S={root:{ownerState:{disableUnderline:l}}},_=p??u?Aa(p??u,S):S,C=(r=(i=v.root)!=null?i:c.Root)!=null?r:t3e,T=(s=(o=v.input)!=null?o:c.Input)!=null?s:n3e;return L.jsx(YB,he({slots:{root:C,input:T},slotProps:_,fullWidth:d,inputComponent:f,multiline:h,ref:n,type:g},m,{classes:y}))});yie.muiName="Input";const xie=yie;function r3e(t){return Un("MuiInputLabel",t)}$n("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const i3e=["disableAnimation","margin","shrink","variant","className"],s3e=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=t,l={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="normal"&&`size${Et(r)}`,o],asterisk:[a&&"asterisk"]},c=jn(l,r3e,e);return he({},e,c)},o3e=$t(PRe,{shouldForwardProp:t=>cc(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${vb.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(({theme:t,ownerState:e})=>he({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&he({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&he({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&he({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),a3e=R.forwardRef(function(e,n){const r=zn({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:s,className:o}=r,a=Ht(r,i3e),l=zy();let c=s;typeof c>"u"&&l&&(c=l.filled||l.focused||l.adornedStart);const u=Uy({props:r,muiFormControl:l,states:["size","variant","required","focused"]}),d=he({},r,{disableAnimation:i,formControl:l,shrink:c,size:u.size,variant:u.variant,required:u.required,focused:u.focused}),f=s3e(d);return L.jsx(o3e,he({"data-shrink":c,ownerState:d,ref:n,className:Yt(f.root,o)},a,{classes:f}))}),l3e=a3e;function c3e(t){return Un("MuiLink",t)}const u3e=$n("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),d3e=u3e,bie={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},f3e=t=>bie[t]||t,h3e=({theme:t,ownerState:e})=>{const n=f3e(e.color),r=ny(t,`palette.${n}`,!1)||e.color,i=ny(t,`palette.${n}Channel`);return"vars"in t&&i?`rgba(${i} / 0.4)`:Xr(r,.4)},p3e=h3e,m3e=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],g3e=t=>{const{classes:e,component:n,focusVisible:r,underline:i}=t,s={root:["root",`underline${Et(i)}`,n==="button"&&"button",r&&"focusVisible"]};return jn(s,c3e,e)},v3e=$t(un,{name:"MuiLink",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`underline${Et(n.underline)}`],n.component==="button"&&e.button]}})(({theme:t,ownerState:e})=>he({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&he({textDecoration:"underline"},e.color!=="inherit"&&{textDecorationColor:p3e({theme:t,ownerState:e})},{"&:hover":{textDecorationColor:"inherit"}}),e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${d3e.focusVisible}`]:{outline:"auto"}})),y3e=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiLink"}),{className:i,color:s="primary",component:o="a",onBlur:a,onFocus:l,TypographyClasses:c,underline:u="always",variant:d="inherit",sx:f}=r,h=Ht(r,m3e),{isFocusVisibleRef:p,onBlur:v,onFocus:g,ref:m}=_B(),[y,x]=R.useState(!1),S=Hi(n,m),_=M=>{v(M),p.current===!1&&x(!1),a&&a(M)},C=M=>{g(M),p.current===!0&&x(!0),l&&l(M)},T=he({},r,{color:s,component:o,focusVisible:y,underline:u,variant:d}),A=g3e(T);return L.jsx(v3e,he({color:s,className:Yt(A.root,i),classes:c,component:o,onBlur:_,onFocus:C,ref:S,ownerState:T,variant:d,sx:[...Object.keys(bie).includes(s)?[]:[{color:s}],...Array.isArray(f)?f:[f]]},h))}),Xc=y3e,x3e=R.createContext({}),$O=x3e;function b3e(t){return Un("MuiList",t)}$n("MuiList",["root","padding","dense","subheader"]);const w3e=["children","className","component","dense","disablePadding","subheader"],S3e=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return jn({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},b3e,e)},_3e=$t("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>he({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),C3e=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=r,u=Ht(r,w3e),d=R.useMemo(()=>({dense:a}),[a]),f=he({},r,{component:o,dense:a,disablePadding:l}),h=S3e(f);return L.jsx($O.Provider,{value:d,children:L.jsxs(_3e,he({as:o,className:Yt(h.root,s),ref:n,ownerState:f},u,{children:[c,i]}))})}),T3e=C3e,E3e=$n("MuiListItemIcon",["root","alignItemsFlexStart"]),hj=E3e,M3e=$n("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),pj=M3e,A3e=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function o$(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function mj(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function wie(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function u1(t,e,n,r,i,s){let o=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!wie(a,s)||l)a=i(t,a,n);else return a.focus(),!0}return!1}const k3e=R.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,f=Ht(e,A3e),h=R.useRef(null),p=R.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});jc(()=>{i&&h.current.focus()},[i]),R.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(x,S)=>{const _=!h.current.style.width;if(x.clientHeight<h.current.clientHeight&&_){const C=`${Ire(Io(x))}px`;h.current.style[S.direction==="rtl"?"paddingLeft":"paddingRight"]=C,h.current.style.width=`calc(100% + ${C})`}return h.current}}),[]);const v=x=>{const S=h.current,_=x.key,C=Io(S).activeElement;if(_==="ArrowDown")x.preventDefault(),u1(S,C,c,l,o$);else if(_==="ArrowUp")x.preventDefault(),u1(S,C,c,l,mj);else if(_==="Home")x.preventDefault(),u1(S,null,c,l,o$);else if(_==="End")x.preventDefault(),u1(S,null,c,l,mj);else if(_.length===1){const T=p.current,A=_.toLowerCase(),M=performance.now();T.keys.length>0&&(M-T.lastTime>500?(T.keys=[],T.repeating=!0,T.previousKeyMatched=!0):T.repeating&&A!==T.keys[0]&&(T.repeating=!1)),T.lastTime=M,T.keys.push(A);const E=C&&!T.repeating&&wie(C,T);T.previousKeyMatched&&(E||u1(S,C,!1,l,o$,T))?x.preventDefault():T.previousKeyMatched=!1}u&&u(x)},g=Hi(h,n);let m=-1;R.Children.forEach(o,(x,S)=>{if(!R.isValidElement(x)){m===S&&(m+=1,m>=o.length&&(m=-1));return}x.props.disabled||(d==="selectedMenu"&&x.props.selected||m===-1)&&(m=S),m===S&&(x.props.disabled||x.props.muiSkipListHighlight||x.type.muiSkipListHighlight)&&(m+=1,m>=o.length&&(m=-1))});const y=R.Children.map(o,(x,S)=>{if(S===m){const _={};return s&&(_.autoFocus=!0),x.props.tabIndex===void 0&&d==="selectedMenu"&&(_.tabIndex=0),R.cloneElement(x,_)}return x});return L.jsx(T3e,he({role:"menu",ref:g,className:a,onKeyDown:v,tabIndex:i?0:-1},f,{children:y}))}),I3e=k3e;function R3e(t){return Un("MuiPopover",t)}$n("MuiPopover",["root","paper"]);const P3e=["onEntering"],N3e=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],$3e=["slotProps"];function gj(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function vj(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function yj(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function a$(t){return typeof t=="function"?t():t}const D3e=t=>{const{classes:e}=t;return jn({root:["root"],paper:["paper"]},R3e,e)},L3e=$t(fie,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Sie=$t(Hh,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),O3e=R.forwardRef(function(e,n){var r,i,s;const o=zn({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:f,className:h,container:p,elevation:v=8,marginThreshold:g=16,open:m,PaperProps:y={},slots:x,slotProps:S,transformOrigin:_={vertical:"top",horizontal:"left"},TransitionComponent:C=JRe,transitionDuration:T="auto",TransitionProps:{onEntering:A}={},disableScrollLock:M=!1}=o,E=Ht(o.TransitionProps,P3e),P=Ht(o,N3e),N=(r=S==null?void 0:S.paper)!=null?r:y,F=R.useRef(),$=Hi(F,N.ref),O=he({},o,{anchorOrigin:c,anchorReference:d,elevation:v,marginThreshold:g,externalPaperSlotProps:N,transformOrigin:_,TransitionComponent:C,transitionDuration:T,TransitionProps:E}),z=D3e(O),X=R.useCallback(()=>{if(d==="anchorPosition")return u;const Me=a$(l),Ee=(Me&&Me.nodeType===1?Me:Io(F.current).body).getBoundingClientRect();return{top:Ee.top+gj(Ee,c.vertical),left:Ee.left+vj(Ee,c.horizontal)}},[l,c.horizontal,c.vertical,u,d]),D=R.useCallback(Me=>({vertical:gj(Me,_.vertical),horizontal:vj(Me,_.horizontal)}),[_.horizontal,_.vertical]),B=R.useCallback(Me=>{const we={width:Me.offsetWidth,height:Me.offsetHeight},Ee=D(we);if(d==="none")return{top:null,left:null,transformOrigin:yj(Ee)};const ge=X();let qe=ge.top-Ee.vertical,Ae=ge.left-Ee.horizontal;const ee=qe+we.height,Y=Ae+we.width,oe=Th(a$(l)),xe=oe.innerHeight-g,Se=oe.innerWidth-g;if(g!==null&&qe<g){const be=qe-g;qe-=be,Ee.vertical+=be}else if(g!==null&&ee>xe){const be=ee-xe;qe-=be,Ee.vertical+=be}if(g!==null&&Ae<g){const be=Ae-g;Ae-=be,Ee.horizontal+=be}else if(Y>Se){const be=Y-Se;Ae-=be,Ee.horizontal+=be}return{top:`${Math.round(qe)}px`,left:`${Math.round(Ae)}px`,transformOrigin:yj(Ee)}},[l,d,X,D,g]),[V,W]=R.useState(m),j=R.useCallback(()=>{const Me=F.current;if(!Me)return;const we=B(Me);we.top!==null&&(Me.style.top=we.top),we.left!==null&&(Me.style.left=we.left),Me.style.transformOrigin=we.transformOrigin,W(!0)},[B]);R.useEffect(()=>(M&&window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)),[l,M,j]);const J=(Me,we)=>{A&&A(Me,we),j()},Q=()=>{W(!1)};R.useEffect(()=>{m&&j()}),R.useImperativeHandle(a,()=>m?{updatePosition:()=>{j()}}:null,[m,j]),R.useEffect(()=>{if(!m)return;const Me=SB(()=>{j()}),we=Th(l);return we.addEventListener("resize",Me),()=>{Me.clear(),we.removeEventListener("resize",Me)}},[l,m,j]);let te=T;T==="auto"&&!C.muiSupportAuto&&(te=void 0);const re=p||(l?Io(a$(l)).body:void 0),se=(i=x==null?void 0:x.root)!=null?i:L3e,fe=(s=x==null?void 0:x.paper)!=null?s:Sie,ae=Xm({elementType:fe,externalSlotProps:he({},N,{style:V?N.style:he({},N.style,{opacity:0})}),additionalProps:{elevation:v,ref:$},ownerState:O,className:Yt(z.paper,N==null?void 0:N.className)}),ye=Xm({elementType:se,externalSlotProps:(S==null?void 0:S.root)||{},externalForwardedProps:P,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:re,open:m},ownerState:O,className:Yt(z.root,h)}),{slotProps:le}=ye,H=Ht(ye,$3e);return L.jsx(se,he({},H,!tA(se)&&{slotProps:le,disableScrollLock:M},{children:L.jsx(C,he({appear:!0,in:m,onEntering:J,onExited:Q,timeout:te},E,{children:L.jsx(fe,he({},ae,{children:f}))}))}))}),F3e=O3e;function B3e(t){return Un("MuiMenu",t)}$n("MuiMenu",["root","paper","list"]);const U3e=["onEntering"],z3e=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],V3e={vertical:"top",horizontal:"right"},W3e={vertical:"top",horizontal:"left"},G3e=t=>{const{classes:e}=t;return jn({root:["root"],paper:["paper"],list:["list"]},B3e,e)},H3e=$t(F3e,{shouldForwardProp:t=>cc(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),j3e=$t(Sie,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),X3e=$t(I3e,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),q3e=R.forwardRef(function(e,n){var r,i;const s=zn({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:f,PaperProps:h={},PopoverClasses:p,transitionDuration:v="auto",TransitionProps:{onEntering:g}={},variant:m="selectedMenu",slots:y={},slotProps:x={}}=s,S=Ht(s.TransitionProps,U3e),_=Ht(s,z3e),C=zS(),T=C.direction==="rtl",A=he({},s,{autoFocus:o,disableAutoFocusItem:c,MenuListProps:u,onEntering:g,PaperProps:h,transitionDuration:v,TransitionProps:S,variant:m}),M=G3e(A),E=o&&!c&&f,P=R.useRef(null),N=(B,V)=>{P.current&&P.current.adjustStyleForScrollbar(B,C),g&&g(B,V)},F=B=>{B.key==="Tab"&&(B.preventDefault(),d&&d(B,"tabKeyDown"))};let $=-1;R.Children.map(a,(B,V)=>{R.isValidElement(B)&&(B.props.disabled||(m==="selectedMenu"&&B.props.selected||$===-1)&&($=V))});const O=(r=y.paper)!=null?r:j3e,z=(i=x.paper)!=null?i:h,X=Xm({elementType:y.root,externalSlotProps:x.root,ownerState:A,className:[M.root,l]}),D=Xm({elementType:O,externalSlotProps:z,ownerState:A,className:M.paper});return L.jsx(H3e,he({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:T?"right":"left"},transformOrigin:T?V3e:W3e,slots:{paper:O,root:y.root},slotProps:{root:X,paper:D},open:f,ref:n,transitionDuration:v,TransitionProps:he({onEntering:N},S),ownerState:A},_,{classes:p,children:L.jsx(X3e,he({onKeyDown:F,actions:P,autoFocus:o&&($===-1||c),autoFocusItem:E,variant:m},u,{className:Yt(M.list,u.className),children:a}))}))}),_ie=q3e;function Y3e(t){return Un("MuiMenuItem",t)}const K3e=$n("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),d1=K3e,Z3e=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],J3e=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},Q3e=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:s,classes:o}=t,l=jn({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},Y3e,o);return he({},o,l)},ePe=$t(uw,{shouldForwardProp:t=>cc(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:J3e})(({theme:t,ownerState:e})=>he({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${d1.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Xr(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${d1.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:Xr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${d1.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:Xr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:Xr(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${d1.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${d1.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${cj.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${cj.inset}`]:{marginLeft:52},[`& .${pj.root}`]:{marginTop:0,marginBottom:0},[`& .${pj.inset}`]:{paddingLeft:36},[`& .${hj.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&he({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${hj.root} svg`]:{fontSize:"1.25rem"}}))),tPe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:o=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:f}=r,h=Ht(r,Z3e),p=R.useContext($O),v=R.useMemo(()=>({dense:o||p.dense||!1,disableGutters:l}),[p.dense,o,l]),g=R.useRef(null);jc(()=>{i&&g.current&&g.current.focus()},[i]);const m=he({},r,{dense:v.dense,divider:a,disableGutters:l}),y=Q3e(r),x=Hi(g,n);let S;return r.disabled||(S=d!==void 0?d:-1),L.jsx($O.Provider,{value:v,children:L.jsx(ePe,he({ref:x,role:u,tabIndex:S,component:s,focusVisibleClassName:Yt(y.focusVisible,c),className:Yt(y.root,f)},h,{ownerState:m,classes:y}))})}),nPe=tPe;function rPe(t){return Un("MuiNativeSelect",t)}const iPe=$n("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),ZB=iPe,sPe=["className","disabled","error","IconComponent","inputRef","variant"],oPe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${Et(n)}`,s&&"iconOpen",r&&"disabled"]};return jn(a,rPe,e)},Cie=({ownerState:t,theme:e})=>he({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":he({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${ZB.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),aPe=$t("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:cc,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${ZB.multiple}`]:e.multiple}]}})(Cie),Tie=({ownerState:t,theme:e})=>he({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${ZB.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),lPe=$t("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Et(n.variant)}`],n.open&&e.iconOpen]}})(Tie),cPe=R.forwardRef(function(e,n){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:l="standard"}=e,c=Ht(e,sPe),u=he({},e,{disabled:i,variant:l,error:s}),d=oPe(u);return L.jsxs(R.Fragment,{children:[L.jsx(aPe,he({ownerState:u,className:Yt(d.select,r),disabled:i,ref:a||n},c)),e.multiple?null:L.jsx(lPe,{as:o,ownerState:u,className:d.icon})]})}),uPe=cPe;var xj;const dPe=["children","classes","className","label","notched"],fPe=$t("fieldset",{shouldForwardProp:cc})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),hPe=$t("legend",{shouldForwardProp:cc})(({ownerState:t,theme:e})=>he({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&he({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function pPe(t){const{className:e,label:n,notched:r}=t,i=Ht(t,dPe),s=n!=null&&n!=="",o=he({},t,{notched:r,withLabel:s});return L.jsx(fPe,he({"aria-hidden":!0,className:e,ownerState:o},i,{children:L.jsx(hPe,{ownerState:o,children:s?L.jsx("span",{children:n}):xj||(xj=L.jsx("span",{className:"notranslate",children:""}))})}))}const mPe=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],gPe=t=>{const{classes:e}=t,r=jn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},dke,e);return he({},e,r)},vPe=$t(kI,{shouldForwardProp:t=>cc(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:MI})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return he({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${mu.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${mu.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${mu.focused} .${mu.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${mu.error} .${mu.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${mu.disabled} .${mu.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&he({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),yPe=$t(pPe,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),xPe=$t(II,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:AI})(({theme:t,ownerState:e})=>he({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),Eie=R.forwardRef(function(e,n){var r,i,s,o,a;const l=zn({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:f,multiline:h=!1,notched:p,slots:v={},type:g="text"}=l,m=Ht(l,mPe),y=gPe(l),x=zy(),S=Uy({props:l,muiFormControl:x,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),_=he({},l,{color:S.color||"primary",disabled:S.disabled,error:S.error,focused:S.focused,formControl:x,fullWidth:u,hiddenLabel:S.hiddenLabel,multiline:h,size:S.size,type:g}),C=(r=(i=v.root)!=null?i:c.Root)!=null?r:vPe,T=(s=(o=v.input)!=null?o:c.Input)!=null?s:xPe;return L.jsx(YB,he({slots:{root:C,input:T},renderSuffix:A=>L.jsx(yPe,{ownerState:_,className:y.notchedOutline,label:f!=null&&f!==""&&S.required?a||(a=L.jsxs(R.Fragment,{children:[f,"","*"]})):f,notched:typeof p<"u"?p:!!(A.startAdornment||A.filled||A.focused)}),fullWidth:u,inputComponent:d,multiline:h,ref:n,type:g},m,{classes:he({},y,{notchedOutline:null})}))});Eie.muiName="Input";const Mie=Eie;function bPe(t){return Un("MuiSelect",t)}const wPe=$n("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),f1=wPe;var bj;const SPe=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],_Pe=$t("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${f1.select}`]:e.select},{[`&.${f1.select}`]:e[n.variant]},{[`&.${f1.error}`]:e.error},{[`&.${f1.multiple}`]:e.multiple}]}})(Cie,{[`&.${f1.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),CPe=$t("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${Et(n.variant)}`],n.open&&e.iconOpen]}})(Tie),TPe=$t("input",{shouldForwardProp:t=>DTe(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function wj(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function EPe(t){return t==null||typeof t=="string"&&!t.trim()}const MPe=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${Et(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return jn(a,bPe,e)},APe=R.forwardRef(function(e,n){var r;const{"aria-describedby":i,"aria-label":s,autoFocus:o,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:f,displayEmpty:h,error:p=!1,IconComponent:v,inputRef:g,labelId:m,MenuProps:y={},multiple:x,name:S,onBlur:_,onChange:C,onClose:T,onFocus:A,onOpen:M,open:E,readOnly:P,renderValue:N,SelectDisplayProps:F={},tabIndex:$,value:O,variant:z="standard"}=e,X=Ht(e,SPe),[D,B]=Pv({controlled:O,default:d,name:"Select"}),[V,W]=Pv({controlled:E,default:u,name:"Select"}),j=R.useRef(null),J=R.useRef(null),[Q,te]=R.useState(null),{current:re}=R.useRef(E!=null),[se,fe]=R.useState(),ae=Hi(n,g),ye=R.useCallback(Ye=>{J.current=Ye,Ye&&te(Ye)},[]),le=Q==null?void 0:Q.parentNode;R.useImperativeHandle(ae,()=>({focus:()=>{J.current.focus()},node:j.current,value:D}),[D]),R.useEffect(()=>{u&&V&&Q&&!re&&(fe(a?null:le.clientWidth),J.current.focus())},[Q,a]),R.useEffect(()=>{o&&J.current.focus()},[o]),R.useEffect(()=>{if(!m)return;const Ye=Io(J.current).getElementById(m);if(Ye){const Xe=()=>{getSelection().isCollapsed&&J.current.focus()};return Ye.addEventListener("click",Xe),()=>{Ye.removeEventListener("click",Xe)}}},[m]);const H=(Ye,Xe)=>{Ye?M&&M(Xe):T&&T(Xe),re||(fe(a?null:le.clientWidth),W(Ye))},Me=Ye=>{Ye.button===0&&(Ye.preventDefault(),J.current.focus(),H(!0,Ye))},we=Ye=>{H(!1,Ye)},Ee=R.Children.toArray(l),ge=Ye=>{const Xe=Ee.find(Le=>Le.props.value===Ye.target.value);Xe!==void 0&&(B(Xe.props.value),C&&C(Ye,Xe))},qe=Ye=>Xe=>{let Le;if(Xe.currentTarget.hasAttribute("tabindex")){if(x){Le=Array.isArray(D)?D.slice():[];const pe=D.indexOf(Ye.props.value);pe===-1?Le.push(Ye.props.value):Le.splice(pe,1)}else Le=Ye.props.value;if(Ye.props.onClick&&Ye.props.onClick(Xe),D!==Le&&(B(Le),C)){const pe=Xe.nativeEvent||Xe,He=new pe.constructor(pe.type,pe);Object.defineProperty(He,"target",{writable:!0,value:{value:Le,name:S}}),C(He,Ye)}x||H(!1,Xe)}},Ae=Ye=>{P||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Ye.key)!==-1&&(Ye.preventDefault(),H(!0,Ye))},ee=Q!==null&&V,Y=Ye=>{!ee&&_&&(Object.defineProperty(Ye,"target",{writable:!0,value:{value:D,name:S}}),_(Ye))};delete X["aria-invalid"];let oe,xe;const Se=[];let be=!1;(rA({value:D})||h)&&(N?oe=N(D):be=!0);const Re=Ee.map(Ye=>{if(!R.isValidElement(Ye))return null;let Xe;if(x){if(!Array.isArray(D))throw new Error(Ch(2));Xe=D.some(Le=>wj(Le,Ye.props.value)),Xe&&be&&Se.push(Ye.props.children)}else Xe=wj(D,Ye.props.value),Xe&&be&&(xe=Ye.props.children);return R.cloneElement(Ye,{"aria-selected":Xe?"true":"false",onClick:qe(Ye),onKeyUp:Le=>{Le.key===" "&&Le.preventDefault(),Ye.props.onKeyUp&&Ye.props.onKeyUp(Le)},role:"option",selected:Xe,value:void 0,"data-value":Ye.props.value})});be&&(x?Se.length===0?oe=null:oe=Se.reduce((Ye,Xe,Le)=>(Ye.push(Xe),Le<Se.length-1&&Ye.push(", "),Ye),[]):oe=xe);let Ke=se;!a&&re&&Q&&(Ke=le.clientWidth);let ze;typeof $<"u"?ze=$:ze=f?null:0;const Ne=F.id||(S?`mui-component-select-${S}`:void 0),De=he({},e,{variant:z,value:D,open:ee,error:p}),Ve=MPe(De),gt=he({},y.PaperProps,(r=y.slotProps)==null?void 0:r.paper),ct=DS();return L.jsxs(R.Fragment,{children:[L.jsx(_Pe,he({ref:ye,tabIndex:ze,role:"combobox","aria-controls":ct,"aria-disabled":f?"true":void 0,"aria-expanded":ee?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[m,Ne].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Ae,onMouseDown:f||P?null:Me,onBlur:Y,onFocus:A},F,{ownerState:De,className:Yt(F.className,Ve.select,c),id:Ne,children:EPe(oe)?bj||(bj=L.jsx("span",{className:"notranslate",children:""})):oe})),L.jsx(TPe,he({"aria-invalid":p,value:Array.isArray(D)?D.join(","):D,name:S,ref:j,"aria-hidden":!0,onChange:ge,tabIndex:-1,disabled:f,className:Ve.nativeInput,autoFocus:o,ownerState:De},X)),L.jsx(CPe,{as:v,className:Ve.icon,ownerState:De}),L.jsx(_ie,he({id:`menu-${S||""}`,anchorEl:le,open:ee,onClose:we,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:he({"aria-labelledby":m,role:"listbox","aria-multiselectable":x?"true":void 0,disableListWrap:!0,id:ct},y.MenuListProps),slotProps:he({},y.slotProps,{paper:he({},gt,{style:he({minWidth:Ke},gt!=null?gt.style:null)})}),children:Re}))]})}),kPe=APe,IPe=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],RPe=["root"],PPe=t=>{const{classes:e}=t;return e},JB={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>cc(t)&&t!=="variant",slot:"Root"},NPe=$t(xie,JB)(""),$Pe=$t(Mie,JB)(""),DPe=$t(mie,JB)(""),Aie=R.forwardRef(function(e,n){const r=zn({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=sie,id:d,input:f,inputProps:h,label:p,labelId:v,MenuProps:g,multiple:m=!1,native:y=!1,onClose:x,onOpen:S,open:_,renderValue:C,SelectDisplayProps:T,variant:A="outlined"}=r,M=Ht(r,IPe),E=y?uPe:kPe,P=zy(),N=Uy({props:r,muiFormControl:P,states:["variant","error"]}),F=N.variant||A,$=he({},r,{variant:F,classes:o}),O=PPe($),z=Ht(O,RPe),X=f||{standard:L.jsx(NPe,{ownerState:$}),outlined:L.jsx($Pe,{label:p,ownerState:$}),filled:L.jsx(DPe,{ownerState:$})}[F],D=Hi(n,X.ref);return L.jsx(R.Fragment,{children:R.cloneElement(X,he({inputComponent:E,inputProps:he({children:s,error:N.error,IconComponent:u,variant:F,type:void 0,multiple:m},y?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:v,MenuProps:g,onClose:x,onOpen:S,open:_,renderValue:C,SelectDisplayProps:he({id:d},T)},h,{classes:h?Aa(z,h.classes):z},f?f.props.inputProps:{})},m&&y&&F==="outlined"?{notched:!0}:{},{ref:D,className:Yt(X.props.className,a,O.root)},!f&&{variant:F},M))})});Aie.muiName="Select";const LPe=Aie;function OPe(t){return Un("MuiToolbar",t)}$n("MuiToolbar",["root","gutters","regular","dense"]);const FPe=["className","component","disableGutters","variant"],BPe=t=>{const{classes:e,disableGutters:n,variant:r}=t;return jn({root:["root",!n&&"gutters",r]},OPe,e)},UPe=$t("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(({theme:t,ownerState:e})=>he({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:t,ownerState:e})=>e.variant==="regular"&&t.mixins.toolbar),zPe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiToolbar"}),{className:i,component:s="div",disableGutters:o=!1,variant:a="regular"}=r,l=Ht(r,FPe),c=he({},r,{component:s,disableGutters:o,variant:a}),u=BPe(c);return L.jsx(UPe,he({as:s,className:Yt(u.root,i),ref:n,ownerState:c},l))}),VPe=zPe;function WPe(t){return Un("MuiTextField",t)}$n("MuiTextField",["root"]);const GPe=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],HPe={standard:xie,filled:mie,outlined:Mie},jPe=t=>{const{classes:e}=t;return jn({root:["root"]},WPe,e)},XPe=$t(vRe,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),qPe=R.forwardRef(function(e,n){const r=zn({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:o,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:d=!1,FormHelperTextProps:f,fullWidth:h=!1,helperText:p,id:v,InputLabelProps:g,inputProps:m,InputProps:y,inputRef:x,label:S,maxRows:_,minRows:C,multiline:T=!1,name:A,onBlur:M,onChange:E,onFocus:P,placeholder:N,required:F=!1,rows:$,select:O=!1,SelectProps:z,type:X,value:D,variant:B="outlined"}=r,V=Ht(r,GPe),W=he({},r,{autoFocus:s,color:l,disabled:u,error:d,fullWidth:h,multiline:T,required:F,select:O,variant:B}),j=jPe(W),J={};B==="outlined"&&(g&&typeof g.shrink<"u"&&(J.notched=g.shrink),J.label=S),O&&((!z||!z.native)&&(J.id=void 0),J["aria-describedby"]=void 0);const Q=DS(v),te=p&&Q?`${Q}-helper-text`:void 0,re=S&&Q?`${Q}-label`:void 0,se=HPe[B],fe=L.jsx(se,he({"aria-describedby":te,autoComplete:i,autoFocus:s,defaultValue:c,fullWidth:h,multiline:T,name:A,rows:$,maxRows:_,minRows:C,type:X,value:D,id:Q,inputRef:x,onBlur:M,onChange:E,onFocus:P,placeholder:N,inputProps:m},J,y));return L.jsxs(XPe,he({className:Yt(j.root,a),disabled:u,error:d,fullWidth:h,ref:n,required:F,color:l,variant:B,ownerState:W},V,{children:[S!=null&&S!==""&&L.jsx(l3e,he({htmlFor:Q,id:re},g,{children:S})),O?L.jsx(LPe,he({"aria-describedby":te,id:Q,labelId:re,value:D,input:fe},z,{children:o})):fe,p&&L.jsx(CRe,he({id:te},f,{children:p}))]}))}),YPe=qPe,KPe="/page/assets/popcorn-kcoz_2Ri.gif",l$=()=>L.jsx(L.Fragment,{children:L.jsxs(Gn,{sx:{textAlign:"center",justifyItems:"center"},children:[L.jsx(Gn,{component:"img",sx:{height:125,width:125,borderRadius:"150px"},alt:"edwin",src:KPe}),L.jsx(un,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left",maxWidth:"xl",mx:"auto"},children:"Hi, I'm Edwin. I am a math educator interested in computer science and machine learning.  During my free time, I like to ride my bike  and study the french language ."})]})});var QB={},kie={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(kie);var GS=kie.exports,c$={};const ZPe=Lee(HTe);var Sj;function HS(){return Sj||(Sj=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=ZPe}(c$)),c$}var JPe=GS;Object.defineProperty(QB,"__esModule",{value:!0});var Iie=QB.default=void 0,QPe=JPe(HS()),eNe=L,tNe=(0,QPe.default)((0,eNe.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");Iie=QB.default=tNe;var eU={},nNe=GS;Object.defineProperty(eU,"__esModule",{value:!0});var Rie=eU.default=void 0;sNe(R);var rNe=nNe(HS()),iNe=L;function Pie(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Pie=function(r){return r?n:e})(t)}function sNe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=Pie(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}var oNe=(0,rNe.default)((0,iNe.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub");Rie=eU.default=oNe;var tU={},aNe=GS;Object.defineProperty(tU,"__esModule",{value:!0});var Nie=tU.default=void 0;uNe(R);var lNe=aNe(HS()),cNe=L;function $ie(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return($ie=function(r){return r?n:e})(t)}function uNe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=$ie(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}var dNe=(0,lNe.default)((0,cNe.jsx)("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn");Nie=tU.default=dNe;const _j=["projects","jupyter-notebooks","about"];function fNe(){const[t,e]=R.useState(null),n=i=>{e(i.currentTarget)},r=()=>{e(null)};return L.jsx(HEe,{position:"static",sx:{bgcolor:"black"},children:L.jsx(KB,{maxWidth:"xl",children:L.jsxs(VPe,{disableGutters:!0,children:[L.jsx(un,{variant:"h6",noWrap:!0,component:"a",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"edwin-torres"}),L.jsx(hb,{href:"https://github.com/edwin-torres",target:"_blank",children:L.jsx(Rie,{sx:{color:"white",display:{xs:"none",md:"flex"},mr:1,"&:hover":{transform:"scale(1.1)",cursor:"pointer"}}})}),L.jsx(hb,{href:"https://www.linkedin.com/in/torres-edwin/",target:"_blank",children:L.jsx(Nie,{sx:{color:"white",display:{xs:"none",md:"flex","&:hover":{transform:"scale(1.1)",cursor:"pointer"}},mr:1}})}),L.jsxs(Gn,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[L.jsx(hb,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:n,color:"inherit",children:L.jsx(Iie,{})}),L.jsx(_ie,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!t,onClose:r,sx:{display:{xs:"block",md:"none"}},children:_j.map(i=>L.jsx(nPe,{component:iw,to:"/"+i,onClick:r,children:L.jsx(un,{textAlign:"center",children:i})},i))})]}),L.jsx(un,{variant:"h5",noWrap:!0,component:"a",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"edwin-torres"}),L.jsx(Gn,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:_j.map(i=>L.jsx(Is,{component:iw,to:"/"+i,onClick:r,sx:{my:2,color:"white",display:"block"},children:i},i))})]})})})}function hNe({name:t,description:e,appRoute:n,code_url:r}){return L.jsxs(cie,{sx:{p:0,m:0,bgcolor:"#d7ccc8",borderRadius:"16px",justifyContent:"center",textAlign:"center",display:"flex"},children:[L.jsx(die,{children:L.jsxs(Gn,{sx:{p:0,m:0,height:200,width:355},children:[L.jsx(un,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0}),L.jsx(un,{variant:"h5",component:"div",sx:{mt:3,mb:3},children:t}),L.jsxs(un,{sx:{mb:3},variant:"body2",children:[e,L.jsx("br",{})]}),L.jsx(Is,{component:iw,to:n,sx:{m:1,bgcolor:"#30a7d7","&.MuiButton-root:hover":{bgcolor:"#F15A59"}},variant:"contained",size:"small",children:" Web App"}),L.jsx(Is,{component:iw,to:r,target:"_blank",sx:{m:1,bgcolor:"#30a7d7","&.MuiButton-root:hover":{bgcolor:"#F15A59"}},variant:"contained",size:"small",children:" Code"})]})}),L.jsx(uie,{})]})}function pNe(){const t=[{name:"IMBD Episode Ratings",description:"Visualization of popular TV Series",appRoute:"/projects/ratings",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Ratings.jsx"},{name:"Congress Composition",description:"Congress members by generation",appRoute:"/projects/congress",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Congress.jsx"},{name:"Lorenz Attractor",description:"Sensitive dependence on initial condition.",appRoute:"/projects/lorenz",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Lorenz.jsx"},{name:"Path Finder",description:"Path finding algorithm using A*  ",appRoute:"/projects/astar",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Astar.jsx"},{name:"College Demographics",description:"Laredo College Student Demographics",appRoute:"/projects/college-demographics",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/CollegeDemographics.jsx"},{name:"Chaos",description:"Sierpinski triangle via chaos game.",appRoute:"/projects/chaos",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Chaos.jsx"},{name:"Spiral",description:"Just a cool rotating spiral",appRoute:"/projects/spiral",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Spiral.jsx"},{name:"Basic M.L. Model",description:"Predicts a digit 0-9.",appRoute:"/projects/mnist",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Minst.jsx"},{name:"Connections",description:"New York Times Puzzle",appRoute:"/projects/connections",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Connections.jsx"},{name:"Breakout Game",description:"Classic Game ",appRoute:"/projects/breakout",codeUrl:"https://github.com/edwin-torres/page/blob/main/src/components/projects/Breakout.jsx"}];return L.jsx(Gn,{sx:{p:0,m:0,flexGrow:1,bgcolor:"black",textAlign:"center",justifyContent:"center",display:"flex"},children:L.jsx(iA,{container:!0,sx:{bgcolor:"black"},spacing:{xs:1,md:2},columns:{xs:1,sm:2,md:3},children:t.map((e,n)=>L.jsx(iA,{sx:{bgcolor:"black"},xs:1,sm:1,md:1,children:L.jsx(hNe,{name:e.name,description:e.description,appRoute:e.appRoute,code_url:e.codeUrl})},n))})})}var mNe=Object.defineProperty,gNe=(t,e)=>{for(var n in e)mNe(t,n,{get:e[n],enumerable:!0})},qc={};gNe(qc,{assign:()=>xNe,colors:()=>hh,createStringInterpolator:()=>lU,skipAnimation:()=>zie,to:()=>Uie,willAdvance:()=>cU});var nU=XS(),Nn=t=>jS(t,nU),rU=XS();Nn.write=t=>jS(t,rU);var RI=XS();Nn.onStart=t=>jS(t,RI);var iU=XS();Nn.onFrame=t=>jS(t,iU);var sU=XS();Nn.onFinish=t=>jS(t,sU);var Dv=[];Nn.setTimeout=(t,e)=>{const n=Nn.now()+e,r=()=>{const s=Dv.findIndex(o=>o.cancel==r);~s&&Dv.splice(s,1),Qf-=~s?1:0},i={time:n,handler:t,cancel:r};return Dv.splice(Die(n),0,i),Qf+=1,Lie(),i};var Die=t=>~(~Dv.findIndex(e=>e.time>t)||~Dv.length);Nn.cancel=t=>{RI.delete(t),iU.delete(t),sU.delete(t),nU.delete(t),rU.delete(t)};Nn.sync=t=>{DO=!0,Nn.batchedUpdates(t),DO=!1};Nn.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,Nn.onStart(n)}return r.handler=t,r.cancel=()=>{RI.delete(n),e=null},r};var oU=typeof window<"u"?window.requestAnimationFrame:()=>{};Nn.use=t=>oU=t;Nn.now=typeof performance<"u"?()=>performance.now():Date.now;Nn.batchedUpdates=t=>t();Nn.catch=console.error;Nn.frameLoop="always";Nn.advance=()=>{Nn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Fie()};var Jf=-1,Qf=0,DO=!1;function jS(t,e){DO?(e.delete(t),t(0)):(e.add(t),Lie())}function Lie(){Jf<0&&(Jf=0,Nn.frameLoop!=="demand"&&oU(Oie))}function vNe(){Jf=-1}function Oie(){~Jf&&(oU(Oie),Nn.batchedUpdates(Fie))}function Fie(){const t=Jf;Jf=Nn.now();const e=Die(Jf);if(e&&(Bie(Dv.splice(0,e),n=>n.handler()),Qf-=e),!Qf){vNe();return}RI.flush(),nU.flush(t?Math.min(64,Jf-t):16.667),iU.flush(),rU.flush(),sU.flush()}function XS(){let t=new Set,e=t;return{add(n){Qf+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Qf-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Qf-=e.size,Bie(e,r=>r(n)&&t.add(r)),Qf+=t.size,e=t)}}}function Bie(t,e){t.forEach(n=>{try{e(n)}catch(r){Nn.catch(r)}})}function LO(){}var yNe=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),xt={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Ad(t,e){if(xt.arr(t)){if(!xt.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var An=(t,e)=>t.forEach(e);function Ku(t,e,n){if(xt.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var Yo=t=>xt.und(t)?[]:xt.arr(t)?t:[t];function yb(t,e){if(t.size){const n=Array.from(t);t.clear(),An(n,e)}}var H1=(t,...e)=>yb(t,n=>n(...e)),aU=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),lU,Uie,hh=null,zie=!1,cU=LO,xNe=t=>{t.to&&(Uie=t.to),t.now&&(Nn.now=t.now),t.colors!==void 0&&(hh=t.colors),t.skipAnimation!=null&&(zie=t.skipAnimation),t.createStringInterpolator&&(lU=t.createStringInterpolator),t.requestAnimationFrame&&Nn.use(t.requestAnimationFrame),t.batchedUpdates&&(Nn.batchedUpdates=t.batchedUpdates),t.willAdvance&&(cU=t.willAdvance),t.frameLoop&&(Nn.frameLoop=t.frameLoop)},xb=new Set,Fl=[],u$=[],sA=0,PI={get idle(){return!xb.size&&!Fl.length},start(t){sA>t.priority?(xb.add(t),Nn.onStart(bNe)):(Vie(t),Nn(OO))},advance:OO,sort(t){if(sA)Nn.onFrame(()=>PI.sort(t));else{const e=Fl.indexOf(t);~e&&(Fl.splice(e,1),Wie(t))}},clear(){Fl=[],xb.clear()}};function bNe(){xb.forEach(Vie),xb.clear(),Nn(OO)}function Vie(t){Fl.includes(t)||Wie(t)}function Wie(t){Fl.splice(wNe(Fl,e=>e.priority>t.priority),0,t)}function OO(t){const e=u$;for(let n=0;n<Fl.length;n++){const r=Fl[n];sA=r.priority,r.idle||(cU(r),r.advance(t),r.idle||e.push(r))}return sA=0,u$=Fl,u$.length=0,Fl=e,Fl.length>0}function wNe(t,e){const n=t.findIndex(e);return n<0?t.length:n}var SNe=(t,e,n)=>Math.min(Math.max(n,t),e),_Ne={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Lc="[-+]?\\d*\\.?\\d+",oA=Lc+"%";function NI(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var CNe=new RegExp("rgb"+NI(Lc,Lc,Lc)),TNe=new RegExp("rgba"+NI(Lc,Lc,Lc,Lc)),ENe=new RegExp("hsl"+NI(Lc,oA,oA)),MNe=new RegExp("hsla"+NI(Lc,oA,oA,Lc)),ANe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,kNe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,INe=/^#([0-9a-fA-F]{6})$/,RNe=/^#([0-9a-fA-F]{8})$/;function PNe(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=INe.exec(t))?parseInt(e[1]+"ff",16)>>>0:hh&&hh[t]!==void 0?hh[t]:(e=CNe.exec(t))?(m0(e[1])<<24|m0(e[2])<<16|m0(e[3])<<8|255)>>>0:(e=TNe.exec(t))?(m0(e[1])<<24|m0(e[2])<<16|m0(e[3])<<8|Ej(e[4]))>>>0:(e=ANe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=RNe.exec(t))?parseInt(e[1],16)>>>0:(e=kNe.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=ENe.exec(t))?(Cj(Tj(e[1]),sT(e[2]),sT(e[3]))|255)>>>0:(e=MNe.exec(t))?(Cj(Tj(e[1]),sT(e[2]),sT(e[3]))|Ej(e[4]))>>>0:null}function d$(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Cj(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=d$(i,r,t+1/3),o=d$(i,r,t),a=d$(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function m0(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function Tj(t){return(parseFloat(t)%360+360)%360/360}function Ej(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function sT(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function Mj(t){let e=PNe(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var pw=(t,e,n)=>{if(xt.fun(t))return t;if(xt.arr(t))return pw({range:t,output:e,extrapolate:n});if(xt.str(t.output[0]))return lU(t);const r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const u=$Ne(c,s);return NNe(c,s[u],s[u+1],i[u],i[u+1],l,o,a,r.map)}};function NNe(t,e,n,r,i,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function $Ne(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var DNe=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return SNe(0,1,i/t)},aA=1.70158,oT=aA*1.525,Aj=aA+1,kj=2*Math.PI/3,Ij=2*Math.PI/4.5,aT=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,LNe={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>Aj*t*t*t-aA*t*t,easeOutBack:t=>1+Aj*Math.pow(t-1,3)+aA*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((oT+1)*2*t-oT)/2:(Math.pow(2*t-2,2)*((oT+1)*(t*2-2)+oT)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*kj),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*kj)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Ij))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Ij)/2+1,easeInBounce:t=>1-aT(1-t),easeOutBounce:aT,easeInOutBounce:t=>t<.5?(1-aT(1-2*t))/2:(1+aT(2*t-1))/2,steps:DNe},mw=Symbol.for("FluidValue.get"),ay=Symbol.for("FluidValue.observers"),Ol=t=>!!(t&&t[mw]),ma=t=>t&&t[mw]?t[mw]():t,Rj=t=>t[ay]||null;function ONe(t,e){t.eventObserved?t.eventObserved(e):t(e)}function gw(t,e){const n=t[ay];n&&n.forEach(r=>{ONe(r,e)})}var Gie=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");FNe(this,t)}},FNe=(t,e)=>Hie(t,mw,e);function Vy(t,e){if(t[mw]){let n=t[ay];n||Hie(t,ay,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function vw(t,e){const n=t[ay];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[ay]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var Hie=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),QE=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,BNe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Pj=new RegExp(`(${QE.source})(%|[a-z]+)`,"i"),UNe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,$I=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,jie=t=>{const[e,n]=zNe(t);if(!e||aU())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&$I.test(n))return jie(n);if(n)return n}return t},zNe=t=>{const e=$I.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},f$,VNe=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,Xie=t=>{f$||(f$=hh?new RegExp(`(${Object.keys(hh).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>ma(s).replace($I,jie).replace(BNe,Mj).replace(f$,Mj)),n=e.map(s=>s.match(QE).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>pw({...t,output:s}));return s=>{var l;const o=!Pj.test(e[0])&&((l=e.find(c=>Pj.test(c)))==null?void 0:l.replace(QE,""));let a=0;return e[0].replace(QE,()=>`${i[a++](s)}${o||""}`).replace(UNe,VNe)}},uU="react-spring: ",qie=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${uU}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},WNe=qie(console.warn);function GNe(){WNe(`${uU}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var HNe=qie(console.warn);function jNe(){HNe(`${uU}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function DI(t){return xt.str(t)&&(t[0]=="#"||/\d/.test(t)||!aU()&&$I.test(t)||t in(hh||{}))}var cm=aU()?R.useEffect:R.useLayoutEffect,XNe=()=>{const t=R.useRef(!1);return cm(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function dU(){const t=R.useState()[1],e=XNe();return()=>{e.current&&t(Math.random())}}function qNe(t,e){const[n]=R.useState(()=>({inputs:e,result:t()})),r=R.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&YNe(e,s.inputs)||(s={inputs:e,result:t()}):s=n,R.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function YNe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var fU=t=>R.useEffect(t,KNe),KNe=[];function FO(t){const e=R.useRef();return R.useEffect(()=>{e.current=t}),e.current}var yw=Symbol.for("Animated:node"),ZNe=t=>!!t&&t[yw]===t,vu=t=>t&&t[yw],hU=(t,e)=>yNe(t,yw,e),LI=t=>t&&t[yw]&&t[yw].getPayload(),Yie=class{constructor(){hU(this,this)}getPayload(){return this.payload||[]}},qS=class extends Yie{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,xt.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new qS(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return xt.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,xt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},xw=class extends qS{constructor(t){super(0),this._string=null,this._toString=pw({output:[t,t]})}static create(t){return new xw(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(xt.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=pw({output:[this.getValue(),t]})),this._value=0,super.reset()}},lA={dependencies:null},OI=class extends Yie{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Ku(this.source,(n,r)=>{ZNe(n)?e[r]=n.getValue(t):Ol(n)?e[r]=ma(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&An(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Ku(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){lA.dependencies&&Ol(t)&&lA.dependencies.add(t);const e=LI(t);e&&An(e,n=>this.add(n))}},Kie=class extends OI{constructor(t){super(t)}static create(t){return new Kie(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(JNe)),!0)}};function JNe(t){return(DI(t)?xw:qS).create(t)}function BO(t){const e=vu(t);return e?e.constructor:xt.arr(t)?Kie:DI(t)?xw:qS}var Nj=(t,e)=>{const n=!xt.fun(t)||t.prototype&&t.prototype.isReactComponent;return R.forwardRef((r,i)=>{const s=R.useRef(null),o=n&&R.useCallback(p=>{s.current=t$e(i,p)},[i]),[a,l]=e$e(r,e),c=dU(),u=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},d=new QNe(u,l),f=R.useRef();cm(()=>(f.current=d,An(l,p=>Vy(p,d)),()=>{f.current&&(An(f.current.deps,p=>vw(p,f.current)),Nn.cancel(f.current.update))})),R.useEffect(u,[]),fU(()=>()=>{const p=f.current;An(p.deps,v=>vw(v,p))});const h=e.getComponentProps(a.getValue());return R.createElement(t,{...h,ref:o})})},QNe=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Nn.write(this.update)}};function e$e(t,e){const n=new Set;return lA.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new OI(t),lA.dependencies=null,[t,n]}function t$e(t,e){return t&&(xt.fun(t)?t(e):t.current=e),e}var $j=Symbol.for("AnimatedComponent"),n$e=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new OI(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=Dj(o)||"Anonymous";return xt.str(o)?o=s[o]||(s[o]=Nj(o,i)):o=o[$j]||(o[$j]=Nj(o,i)),o.displayName=`Animated(${a})`,o};return Ku(t,(o,a)=>{xt.arr(t)&&(a=Dj(o)),s[a]=s(o)}),{animated:s}},Dj=t=>xt.str(t)?t:t&&xt.str(t.displayName)?t.displayName:xt.fun(t)&&t.name||null;function ga(t,...e){return xt.fun(t)?t(...e):t}var bb=(t,e)=>t===!0||!!(e&&t&&(xt.fun(t)?t(e):Yo(t).includes(e))),Zie=(t,e)=>xt.obj(t)?e&&t[e]:t,Jie=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,r$e=t=>t,FI=(t,e=r$e)=>{let n=i$e;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);xt.und(s)||(r[i]=s)}return r},i$e=["config","onProps","onStart","onChange","onPause","onResume","onRest"],s$e={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function o$e(t){const e={};let n=0;if(Ku(t,(r,i)=>{s$e[i]||(e[i]=r,n++)}),n)return e}function pU(t){const e=o$e(t);if(e){const n={to:e};return Ku(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function bw(t){return t=ma(t),xt.arr(t)?t.map(bw):DI(t)?qc.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Qie(t){for(const e in t)return!0;return!1}function UO(t){return xt.fun(t)||xt.arr(t)&&xt.obj(t[0])}function zO(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function ese(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var mU={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},VO={...mU.default,mass:1,damping:1,easing:LNe.linear,clamp:!1},a$e=class{constructor(){this.velocity=0,Object.assign(this,VO)}};function l$e(t,e,n){n&&(n={...n},Lj(n,e),e={...n,...e}),Lj(t,e),Object.assign(t,e);for(const o in VO)t[o]==null&&(t[o]=VO[o]);let{frequency:r,damping:i}=t;const{mass:s}=t;return xt.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function Lj(t,e){if(!xt.und(e.decay))t.duration=void 0;else{const n=!xt.und(e.tension)||!xt.und(e.friction);(n||!xt.und(e.frequency)||!xt.und(e.damping)||!xt.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var Oj=[],c$e=class{constructor(){this.changed=!1,this.values=Oj,this.toValues=null,this.fromValues=Oj,this.config=new a$e,this.immediate=!1}};function tse(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,c,u=bb(n.cancel??(r==null?void 0:r.cancel),e);if(u)h();else{xt.und(n.pause)||(i.paused=bb(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=i.paused||bb(p,e)),l=ga(n.delay||0,e),p?(i.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){i.resumeQueue.add(f),i.timeouts.delete(c),c.cancel(),l=c.time-Nn.now()}function f(){l>0&&!qc.skipAnimation?(i.delayed=!0,c=Nn.setTimeout(h,l),i.pauseQueue.add(d),i.timeouts.add(c)):h()}function h(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(c),t<=(i.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(p){a(p)}}})}var gU=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Lv(t.get()):e.every(n=>n.noop)?nse(t.get()):Ac(t.get(),e.every(n=>n.finished)),nse=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Ac=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Lv=t=>({value:t,cancelled:!0,finished:!1});function rse(t,e,n,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const c=FI(e,(g,m)=>m==="onRest"?void 0:g);let u,d;const f=new Promise((g,m)=>(u=g,d=m)),h=g=>{const m=i<=(n.cancelId||0)&&Lv(r)||i!==n.asyncId&&Ac(r,!1);if(m)throw g.result=m,d(g),g},p=(g,m)=>{const y=new Fj,x=new Bj;return(async()=>{if(qc.skipAnimation)throw ww(n),x.result=Ac(r,!1),d(x),x;h(y);const S=xt.obj(g)?{...g}:{...m,to:g};S.parentId=i,Ku(c,(C,T)=>{xt.und(S[T])&&(S[T]=C)});const _=await r.start(S);return h(y),n.paused&&await new Promise(C=>{n.resumeQueue.add(C)}),_})()};let v;if(qc.skipAnimation)return ww(n),Ac(r,!1);try{let g;xt.arr(t)?g=(async m=>{for(const y of m)await p(y)})(t):g=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([g.then(u),f]),v=Ac(r.get(),!0,!1)}catch(g){if(g instanceof Fj)v=g.result;else if(g instanceof Bj)v=g.result;else throw g}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return xt.fun(o)&&Nn.batchedUpdates(()=>{o(v,r,r.item)}),v})()}function ww(t,e){yb(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var Fj=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Bj=class extends Error{constructor(){super("SkipAnimationSignal")}},WO=t=>t instanceof vU,u$e=1,vU=class extends Gie{constructor(){super(...arguments),this.id=u$e++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=vu(this);return t&&t.getValue()}to(...t){return qc.to(this,t)}interpolate(...t){return GNe(),qc.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){gw(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||PI.sort(this),gw(this,{type:"priority",parent:this,priority:t})}},Ym=Symbol.for("SpringPhase"),ise=1,GO=2,HO=4,h$=t=>(t[Ym]&ise)>0,Rf=t=>(t[Ym]&GO)>0,h1=t=>(t[Ym]&HO)>0,Uj=(t,e)=>e?t[Ym]|=GO|ise:t[Ym]&=~GO,zj=(t,e)=>e?t[Ym]|=HO:t[Ym]&=~HO,d$e=class extends vU{constructor(t,e){if(super(),this.animation=new c$e,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!xt.und(t)||!xt.und(e)){const n=xt.obj(t)?{...t}:{...e,from:t};xt.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Rf(this)||this._state.asyncTo)||h1(this)}get goal(){return ma(this.animation.to)}get velocity(){const t=vu(this);return t instanceof qS?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return h$(this)}get isAnimating(){return Rf(this)}get isPaused(){return h1(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=LI(r.to);!o&&Ol(r.to)&&(i=Yo(ma(r.to))),r.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==xw?1:o?o[u].lastPosition:i[u];let f=r.immediate,h=d;if(!f){if(h=c.lastPosition,s.tension<=0){c.done=!0;return}let p=c.elapsedTime+=t;const v=r.fromValues[u],g=c.v0!=null?c.v0:c.v0=xt.arr(s.velocity)?s.velocity[u]:s.velocity;let m;const y=s.precision||(v==d?.005:Math.min(1,Math.abs(d-v)*.001));if(xt.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,S=Math.exp(-(1-x)*p);h=v+g/(1-x)*(1-S),f=Math.abs(c.lastPosition-h)<=y,m=g*S}else{m=c.lastVelocity==null?g:c.lastVelocity;const x=s.restVelocity||y/10,S=s.clamp?0:s.bounce,_=!xt.und(S),C=v==d?c.v0>0:v<d;let T,A=!1;const M=1,E=Math.ceil(t/M);for(let P=0;P<E&&(T=Math.abs(m)>x,!(!T&&(f=Math.abs(d-h)<=y,f)));++P){_&&(A=h==d||h>d==C,A&&(m=-m*S,h=d));const N=-s.tension*1e-6*(h-d),F=-s.friction*.001*m,$=(N+F)/s.mass;m=m+$*M,h=h+m*M}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,p=c.elapsedTime+=t)),x=(s.progress||0)+p/this._memoizedDuration,x=x>1?1:x<0?0:x,c.durationProgress=x),h=v+s.easing(x)*(d-v),m=(h-c.lastPosition)/t,f=x==1}c.lastVelocity=m,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(h,s.round)&&(n=!0)});const a=vu(this),l=a.getValue();if(e){const c=ma(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Nn.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Rf(this)){const{to:t,config:e}=this.animation;Nn.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return xt.und(t)?(n=this.queue||[],this.queue=[]):n=[xt.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>gU(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),ww(this._state,t&&this._lastCallId),Nn.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=xt.obj(n)?n[e]:n,(n==null||UO(n))&&(n=void 0),r=xt.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return h$(this)||(t.reverse&&([n,r]=[r,n]),r=ma(r),xt.und(r)?vu(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,FI(t,(o,a)=>/^on/.test(a)?Zie(o,n):o)),Wj(this,t,"onProps"),m1(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return tse(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{h1(this)||(zj(this,!0),H1(s.pauseQueue),m1(this,"onPause",Ac(this,p1(this,this.animation.to)),this))},resume:()=>{h1(this)&&(zj(this,!1),Rf(this)&&this._resume(),H1(s.resumeQueue),m1(this,"onResume",Ac(this,p1(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=sse(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Lv(this));const r=!xt.und(t.to),i=!xt.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Lv(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;i&&!r&&(!e.default||xt.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!Ad(d,c);f&&(a.from=d),d=ma(d);const h=!Ad(u,l);h&&this._focus(u);const p=UO(e.to),{config:v}=a,{decay:g,velocity:m}=v;(r||i)&&(v.velocity=0),e.config&&!p&&l$e(v,ga(e.config,s),e.config!==o.config?ga(o.config,s):void 0);let y=vu(this);if(!y||xt.und(u))return n(Ac(this,!0));const x=xt.und(e.reset)?i&&!e.default:!xt.und(d)&&bb(e.reset,s),S=x?d:this.get(),_=bw(u),C=xt.num(_)||xt.arr(_)||DI(_),T=!p&&(!C||bb(o.immediate||e.immediate,s));if(h){const P=BO(u);if(P!==y.constructor)if(T)y=this._set(_);else throw Error(`Cannot animate between ${y.constructor.name} and ${P.name}, as the "to" prop suggests`)}const A=y.constructor;let M=Ol(u),E=!1;if(!M){const P=x||!h$(this)&&f;(h||P)&&(E=Ad(bw(S),_),M=!E),(!Ad(a.immediate,T)&&!T||!Ad(v.decay,g)||!Ad(v.velocity,m))&&(M=!0)}if(E&&Rf(this)&&(a.changed&&!x?M=!0:M||this._stop(l)),!p&&((M||Ol(l))&&(a.values=y.getPayload(),a.toValues=Ol(u)?null:A==xw?[1]:Yo(_)),a.immediate!=T&&(a.immediate=T,!T&&!x&&this._set(l)),M)){const{onRest:P}=a;An(h$e,F=>Wj(this,e,F));const N=Ac(this,p1(this,l));H1(this._pendingCalls,N),this._pendingCalls.add(n),a.changed&&Nn.batchedUpdates(()=>{var F;a.changed=!x,P==null||P(N,this),x?ga(o.onRest,N):(F=a.onStart)==null||F.call(a,N,this)})}x&&this._set(S),p?n(rse(e.to,e,this._state,this)):M?this._start():Rf(this)&&!h?this._pendingCalls.add(n):n(nse(S))}_focus(t){const e=this.animation;t!==e.to&&(Rj(this)&&this._detach(),e.to=t,Rj(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Ol(e)&&(Vy(e,this),WO(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Ol(t)&&vw(t,this)}_set(t,e=!0){const n=ma(t);if(!xt.und(n)){const r=vu(this);if(!r||!Ad(n,r.getValue())){const i=BO(n);!r||r.constructor!=i?hU(this,i.create(n)):r.setValue(n),r&&Nn.batchedUpdates(()=>{this._onChange(n,e)})}}return vu(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,m1(this,"onStart",Ac(this,p1(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),ga(this.animation.onChange,t,this)),ga(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;vu(this).reset(ma(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Rf(this)||(Uj(this,!0),h1(this)||this._resume())}_resume(){qc.skipAnimation?this.finish():PI.start(this)}_stop(t,e){if(Rf(this)){Uj(this,!1);const n=this.animation;An(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),gw(this,{type:"idle",parent:this});const r=e?Lv(this.get()):Ac(this.get(),p1(this,t??n.to));H1(this._pendingCalls,r),n.changed&&(n.changed=!1,m1(this,"onRest",r,this))}}};function p1(t,e){const n=bw(e),r=bw(t.get());return Ad(r,n)}function sse(t,e=t.loop,n=t.to){const r=ga(e);if(r){const i=r!==!0&&pU(r),s=(i||t).reverse,o=!i||i.reset;return Sw({...t,loop:e,default:!1,pause:void 0,to:!s||UO(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function Sw(t){const{to:e,from:n}=t=pU(t),r=new Set;return xt.obj(e)&&Vj(e,r),xt.obj(n)&&Vj(n,r),t.keys=r.size?Array.from(r):null,t}function f$e(t){const e=Sw(t);return xt.und(e.default)&&(e.default=FI(e)),e}function Vj(t,e){Ku(t,(n,r)=>n!=null&&e.add(r))}var h$e=["onStart","onRest","onChange","onPause","onResume"];function Wj(t,e,n){t.animation[n]=e[n]!==Jie(e,n)?Zie(e[n],t.key):void 0}function m1(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var p$e=["onStart","onChange","onRest"],m$e=1,ose=class{constructor(t,e){this.id=m$e++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];xt.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Sw(t)),this}start(t){let{queue:e}=this;return t?e=Yo(t).map(Sw):this.queue=[],this._flush?this._flush(this,e):(dse(this,e),jO(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;An(Yo(e),r=>n[r].stop(!!t))}else ww(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(xt.und(t))this.start({pause:!0});else{const e=this.springs;An(Yo(t),n=>e[n].pause())}return this}resume(t){if(xt.und(t))this.start({pause:!1});else{const e=this.springs;An(Yo(t),n=>e[n].resume())}return this}each(t){Ku(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,yb(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!r&&this._started,o=i||s&&n.size?this.get():null;i&&e.size&&yb(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,yb(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Nn.onFrame(this._onFrame)}};function jO(t,e){return Promise.all(e.map(n=>ase(t,n))).then(n=>gU(t,n))}async function ase(t,e,n){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:l}=e,c=xt.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const u=xt.arr(i)||xt.fun(i)?i:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):An(p$e,v=>{const g=e[v];if(xt.fun(g)){const m=t._events[v];e[v]=({finished:y,cancelled:x})=>{const S=m.get(g);S?(y||(S.finished=!1),x&&(S.cancelled=!0)):m.set(g,{value:null,finished:y||!1,cancelled:x||!1})},c&&(c[v]=e[v])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,H1(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const f=(r||Object.keys(t.springs)).map(v=>t.springs[v].start(e)),h=e.cancel===!0||Jie(e,"cancel")===!0;(u||h&&d.asyncId)&&f.push(tse(++t._lastAsyncId,{props:e,state:d,actions:{pause:LO,resume:LO,start(v,g){h?(ww(d,t._lastAsyncId),g(Lv(t))):(v.onRest=a,g(rse(u,v,d,t)))}}})),d.paused&&await new Promise(v=>{d.resumeQueue.add(v)});const p=gU(t,await Promise.all(f));if(o&&p.finished&&!(n&&p.noop)){const v=sse(e,o,i);if(v)return dse(t,[v]),ase(t,v,!0)}return l&&Nn.batchedUpdates(()=>l(p,t,t.item)),p}function XO(t,e){const n={...t.springs};return e&&An(Yo(e),r=>{xt.und(r.keys)&&(r=Sw(r)),xt.obj(r.to)||(r={...r,to:void 0}),use(n,r,i=>cse(i))}),lse(t,n),n}function lse(t,e){Ku(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,Vy(n,t))})}function cse(t,e){const n=new d$e;return n.key=t,e&&Vy(n,e),n}function use(t,e,n){e.keys&&An(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function dse(t,e){An(e,n=>{use(t.springs,n,r=>cse(r,t))})}var YS=({children:t,...e})=>{const n=R.useContext(cA),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=qNe(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=cA;return R.createElement(s,{value:e},t)},cA=g$e(YS,{});YS.Provider=cA.Provider;YS.Consumer=cA.Consumer;function g$e(t,e){return Object.assign(t,R.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var fse=()=>{const t=[],e=function(r){jNe();const i=[];return An(t,(s,o)=>{if(xt.und(r))i.push(s.start());else{const a=n(r,s,o);a&&i.push(s.start(a))}}),i};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return An(t,r=>r.pause(...arguments)),this},e.resume=function(){return An(t,r=>r.resume(...arguments)),this},e.set=function(r){An(t,(i,s)=>{const o=xt.fun(r)?r(s,i):r;o&&i.set(o)})},e.start=function(r){const i=[];return An(t,(s,o)=>{if(xt.und(r))i.push(s.start());else{const a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},e.stop=function(){return An(t,r=>r.stop(...arguments)),this},e.update=function(r){return An(t,(i,s)=>i.update(this._getProps(r,i,s))),this};const n=function(r,i,s){return xt.fun(r)?r(s,i):r};return e._getProps=n,e};function v$e(t,e,n){const r=xt.fun(e)&&e;r&&!n&&(n=[]);const i=R.useMemo(()=>r||arguments.length==3?fse():void 0,[]),s=R.useRef(0),o=dU(),a=R.useMemo(()=>({ctrls:[],queue:[],flush(m,y){const x=XO(m,y);return s.current>0&&!a.queue.length&&!Object.keys(x).some(_=>!m.springs[_])?jO(m,y):new Promise(_=>{lse(m,x),a.queue.push(()=>{_(jO(m,y))}),o()})}}),[]),l=R.useRef([...a.ctrls]),c=[],u=FO(t)||0;R.useMemo(()=>{An(l.current.slice(t,u),m=>{zO(m,i),m.stop(!0)}),l.current.length=t,d(u,t)},[t]),R.useMemo(()=>{d(0,Math.min(u,t))},n);function d(m,y){for(let x=m;x<y;x++){const S=l.current[x]||(l.current[x]=new ose(null,a.flush)),_=r?r(x,S):e[x];_&&(c[x]=f$e(_))}}const f=l.current.map((m,y)=>XO(m,c[y])),h=R.useContext(YS),p=FO(h),v=h!==p&&Qie(h);cm(()=>{s.current++,a.ctrls=l.current;const{queue:m}=a;m.length&&(a.queue=[],An(m,y=>y())),An(l.current,(y,x)=>{i==null||i.add(y),v&&y.start({default:h});const S=c[x];S&&(ese(y,S.ref),y.ref?y.queue.push(S):y.start(S))})}),fU(()=>()=>{An(a.ctrls,m=>m.stop(!0))});const g=f.map(m=>({...m}));return i?[g,i]:g}function Jc(t,e){const n=xt.fun(t),[[r],i]=v$e(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[r,i]:r}function Cg(t,e,n){const r=xt.fun(e)&&e,{reset:i,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:l=!1,onDestroyed:c,ref:u,config:d}=r?r():e,f=R.useMemo(()=>r||arguments.length==3?fse():void 0,[]),h=Yo(t),p=[],v=R.useRef(null),g=i?null:v.current;cm(()=>{v.current=p}),fU(()=>(An(p,$=>{f==null||f.add($.ctrl),$.ctrl.ref=f}),()=>{An(v.current,$=>{$.expired&&clearTimeout($.expirationId),zO($.ctrl,f),$.ctrl.stop(!0)})}));const m=x$e(h,r?r():e,g),y=i&&v.current||[];cm(()=>An(y,({ctrl:$,item:O,key:z})=>{zO($,f),ga(c,O,z)}));const x=[];if(g&&An(g,($,O)=>{$.expired?(clearTimeout($.expirationId),y.push($)):(O=x[O]=m.indexOf($.key),~O&&(p[O]=$))}),An(h,($,O)=>{p[O]||(p[O]={key:m[O],item:$,phase:"mount",ctrl:new ose},p[O].ctrl.item=$)}),x.length){let $=-1;const{leave:O}=r?r():e;An(x,(z,X)=>{const D=g[X];~z?($=p.indexOf(D),p[$]={...D,item:h[z]}):O&&p.splice(++$,0,D)})}xt.fun(s)&&p.sort(($,O)=>s($.item,O.item));let S=-o;const _=dU(),C=FI(e),T=new Map,A=R.useRef(new Map),M=R.useRef(!1);An(p,($,O)=>{const z=$.key,X=$.phase,D=r?r():e;let B,V;const W=ga(D.delay||0,z);if(X=="mount")B=D.enter,V="enter";else{const te=m.indexOf(z)<0;if(X!="leave")if(te)B=D.leave,V="leave";else if(B=D.update)V="update";else return;else if(!te)B=D.enter,V="enter";else return}if(B=ga(B,$.item,O),B=xt.obj(B)?pU(B):{to:B},!B.config){const te=d||C.config;B.config=ga(te,$.item,O,V)}S+=o;const j={...C,delay:W+S,ref:u,immediate:D.immediate,reset:!1,...B};if(V=="enter"&&xt.und(j.from)){const te=r?r():e,re=xt.und(te.initial)||g?te.from:te.initial;j.from=ga(re,$.item,O)}const{onResolve:J}=j;j.onResolve=te=>{ga(J,te);const re=v.current,se=re.find(fe=>fe.key===z);if(se&&!(te.cancelled&&se.phase!="update")&&se.ctrl.idle){const fe=re.every(ae=>ae.ctrl.idle);if(se.phase=="leave"){const ae=ga(a,se.item);if(ae!==!1){const ye=ae===!0?0:ae;if(se.expired=!0,!fe&&ye>0){ye<=2147483647&&(se.expirationId=setTimeout(_,ye));return}}}fe&&re.some(ae=>ae.expired)&&(A.current.delete(se),l&&(M.current=!0),_())}};const Q=XO($.ctrl,j);V==="leave"&&l?A.current.set($,{phase:V,springs:Q,payload:j}):T.set($,{phase:V,springs:Q,payload:j})});const E=R.useContext(YS),P=FO(E),N=E!==P&&Qie(E);cm(()=>{N&&An(p,$=>{$.ctrl.start({default:E})})},[E]),An(T,($,O)=>{if(A.current.size){const z=p.findIndex(X=>X.key===O.key);p.splice(z,1)}}),cm(()=>{An(A.current.size?A.current:T,({phase:$,payload:O},z)=>{const{ctrl:X}=z;z.phase=$,f==null||f.add(X),N&&$=="enter"&&X.start({default:E}),O&&(ese(X,O.ref),(X.ref||f)&&!M.current?X.update(O):(X.start(O),M.current&&(M.current=!1)))})},i?void 0:n);const F=$=>R.createElement(R.Fragment,null,p.map((O,z)=>{const{springs:X}=T.get(O)||O.ctrl,D=$({...X},O.item,O,z);return D&&D.type?R.createElement(D.type,{...D.props,key:xt.str(O.key)||xt.num(O.key)?O.key:O.ctrl.id,ref:D.ref}):D}));return f?[F,f]:F}var y$e=1;function x$e(t,{key:e,keys:n=e},r){if(n===null){const i=new Set;return t.map(s=>{const o=r&&r.find(a=>a.item===s&&a.phase!=="leave"&&!i.has(a));return o?(i.add(o),o.key):y$e++})}return xt.und(n)?t:xt.fun(n)?t.map(n):Yo(n)}var hse=class extends vU{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=pw(...e);const n=this._get(),r=BO(n);hU(this,r.create(n))}advance(t){const e=this._get(),n=this.get();Ad(e,n)||(vu(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&Gj(this._active)&&p$(this)}_get(){const t=xt.arr(this.source)?this.source.map(ma):Yo(ma(this.source));return this.calc(...t)}_start(){this.idle&&!Gj(this._active)&&(this.idle=!1,An(LI(this),t=>{t.done=!1}),qc.skipAnimation?(Nn.batchedUpdates(()=>this.advance()),p$(this)):PI.start(this))}_attach(){let t=1;An(Yo(this.source),e=>{Ol(e)&&Vy(e,this),WO(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){An(Yo(this.source),t=>{Ol(t)&&vw(t,this)}),this._active.clear(),p$(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Yo(this.source).reduce((e,n)=>Math.max(e,(WO(n)?n.priority:0)+1),0))}};function b$e(t){return t.idle!==!1}function Gj(t){return!t.size||Array.from(t).every(b$e)}function p$(t){t.idle||(t.idle=!0,An(LI(t),e=>{e.done=!0}),gw(t,{type:"idle",parent:t}))}var rc=(t,...e)=>new hse(t,e);qc.assign({createStringInterpolator:Xie,to:(t,e)=>new hse(t,e)});var pse=/^--/;function w$e(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!pse.test(t)&&!(wb.hasOwnProperty(t)&&wb[t])?e+"px":(""+e).trim()}var Hj={};function S$e(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,c=Object.values(l),u=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:Hj[d]||(Hj[d]=d.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));i!==void 0&&(t.textContent=i);for(const d in r)if(r.hasOwnProperty(d)){const f=w$e(d,r[d]);pse.test(d)?t.style.setProperty(d,f):t.style[d]=f}u.forEach((d,f)=>{t.setAttribute(d,c[f])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var wb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_$e=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),C$e=["Webkit","Ms","Moz","O"];wb=Object.keys(wb).reduce((t,e)=>(C$e.forEach(n=>t[_$e(n,e)]=t[e]),t),wb);var T$e=/^(matrix|translate|scale|rotate|skew)/,E$e=/^(translate)/,M$e=/^(rotate|skew)/,m$=(t,e)=>xt.num(t)&&t!==0?t+e:t,eM=(t,e)=>xt.arr(t)?t.every(n=>eM(n,e)):xt.num(t)?t===e:parseFloat(t)===e,A$e=class extends OI{constructor({x:t,y:e,z:n,...r}){const i=[],s=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>m$(a,"px")).join(",")})`,eM(o,0)])),Ku(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(l=>[l,l===""]);else if(T$e.test(a)){if(delete r[a],xt.und(o))return;const l=E$e.test(a)?"px":M$e.test(a)?"deg":"";i.push(Yo(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${m$(f,l)})`,eM(f,0)]:c=>[`${a}(${c.map(u=>m$(u,l)).join(",")})`,eM(c,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new k$e(i,s)),super(r)}},k$e=class extends Gie{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return An(this.inputs,(n,r)=>{const i=ma(n[0]),[s,o]=this.transforms[r](xt.arr(i)?i:n.map(ma));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&An(this.inputs,e=>An(e,n=>Ol(n)&&Vy(n,this)))}observerRemoved(t){t==0&&An(this.inputs,e=>An(e,n=>Ol(n)&&vw(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),gw(this,t)}},I$e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];qc.assign({batchedUpdates:RS.unstable_batchedUpdates,createStringInterpolator:Xie,colors:_Ne});var R$e=n$e(I$e,{applyAnimatedValues:S$e,createAnimatedStyle:t=>new A$e(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),sr=R$e.animated;function Km(){return Km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Km.apply(this,arguments)}var P$e={pointerEvents:"none",position:"absolute",zIndex:10,top:0,left:0},jj=function(t,e){return"translate("+t+"px, "+e+"px)"},mse=R.memo(function(t){var e,n=t.position,r=t.anchor,i=t.children,s=Pr(),o=no(),a=o.animate,l=o.config,c=Xae(),u=c[0],d=c[1],f=R.useRef(!1),h=void 0,p=!1,v=d.width>0&&d.height>0,g=Math.round(n[0]),m=Math.round(n[1]);v&&(r==="top"?(g-=d.width/2,m-=d.height+14):r==="right"?(g+=14,m-=d.height/2):r==="bottom"?(g-=d.width/2,m+=14):r==="left"?(g-=d.width+14,m-=d.height/2):r==="center"&&(g-=d.width/2,m-=d.height/2),h={transform:jj(g,m)},f.current||(p=!0),f.current=[g,m]);var y=Jc({to:h,config:l,immediate:!a||p}),x=Km({},P$e,s.tooltip,{transform:(e=y.transform)!=null?e:jj(g,m)});return L.jsx(sr.div,{ref:u,style:x,children:i})});mse.displayName="TooltipWrapper";var gse=R.memo(function(t){var e=t.size,n=e===void 0?12:e,r=t.color,i=t.style;return L.jsx("span",{style:Km({display:"block",width:n,height:n,background:r},i===void 0?{}:i)})}),BI=R.memo(function(t){var e,n=t.id,r=t.value,i=t.format,s=t.enableChip,o=s!==void 0&&s,a=t.color,l=t.renderContent,c=Pr(),u=a2(i);if(typeof l=="function")e=l();else{var d=r;u!==void 0&&d!==void 0&&(d=u(d)),e=L.jsxs("div",{style:c.tooltip.basic,children:[o&&L.jsx(gse,{color:a,style:c.tooltip.chip}),d!==void 0?L.jsxs("span",{children:[n,": ",L.jsx("strong",{children:""+d})]}):n]})}return L.jsx("div",{style:c.tooltip.container,children:e})}),N$e={width:"100%",borderCollapse:"collapse"},vse=R.memo(function(t){var e,n=t.title,r=t.rows,i=r===void 0?[]:r,s=t.renderContent,o=Pr();return i.length?(e=typeof s=="function"?s():L.jsxs("div",{children:[n&&n,L.jsx("table",{style:Km({},N$e,o.tooltip.table),children:L.jsx("tbody",{children:i.map(function(a,l){return L.jsx("tr",{children:a.map(function(c,u){return L.jsx("td",{style:o.tooltip.tableCell,children:c},u)})},l)})})})]}),L.jsx("div",{style:o.tooltip.container,children:e})):null});vse.displayName="TableTooltip";var qO=R.memo(function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1,s=Pr(),o=no(),a=o.animate,l=o.config,c=R.useMemo(function(){return Km({},s.crosshair.line,{pointerEvents:"none"})},[s.crosshair.line]),u=Jc({x1:e,x2:n,y1:r,y2:i,config:l,immediate:!a});return L.jsx(sr.line,Km({},u,{fill:"none",style:c}))});qO.displayName="CrosshairLine";var $$e=R.memo(function(t){var e,n,r=t.width,i=t.height,s=t.type,o=t.x,a=t.y;return s==="cross"?(e={x0:o,x1:o,y0:0,y1:i},n={x0:0,x1:r,y0:a,y1:a}):s==="top-left"?(e={x0:o,x1:o,y0:0,y1:a},n={x0:0,x1:o,y0:a,y1:a}):s==="top"?e={x0:o,x1:o,y0:0,y1:a}:s==="top-right"?(e={x0:o,x1:o,y0:0,y1:a},n={x0:o,x1:r,y0:a,y1:a}):s==="right"?n={x0:o,x1:r,y0:a,y1:a}:s==="bottom-right"?(e={x0:o,x1:o,y0:a,y1:i},n={x0:o,x1:r,y0:a,y1:a}):s==="bottom"?e={x0:o,x1:o,y0:a,y1:i}:s==="bottom-left"?(e={x0:o,x1:o,y0:a,y1:i},n={x0:0,x1:o,y0:a,y1:a}):s==="left"?n={x0:0,x1:o,y0:a,y1:a}:s==="x"?e={x0:o,x1:o,y0:0,y1:i}:s==="y"&&(n={x0:0,x1:r,y0:a,y1:a}),L.jsxs(L.Fragment,{children:[e&&L.jsx(qO,{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1}),n&&L.jsx(qO,{x0:n.x0,x1:n.x1,y0:n.y0,y1:n.y1})]})});$$e.displayName="Crosshair";var yse=R.createContext({showTooltipAt:function(){},showTooltipFromEvent:function(){},hideTooltip:function(){}}),YO={isVisible:!1,position:[null,null],content:null,anchor:null},xse=R.createContext(YO),D$e=function(t){var e=R.useState(YO),n=e[0],r=e[1],i=R.useCallback(function(a,l,c){var u=l[0],d=l[1];c===void 0&&(c="top"),r({isVisible:!0,position:[u,d],anchor:c,content:a})},[r]),s=R.useCallback(function(a,l,c){c===void 0&&(c="top");var u=t.current.getBoundingClientRect(),d=t.current.offsetWidth,f=d===u.width?1:d/u.width,h=(l.clientX-u.left)*f,p=(l.clientY-u.top)*f;c!=="left"&&c!=="right"||(c=h<u.width/2?"right":"left"),r({isVisible:!0,position:[h,p],anchor:c,content:a})},[t,r]),o=R.useCallback(function(){r(YO)},[r]);return{actions:R.useMemo(function(){return{showTooltipAt:i,showTooltipFromEvent:s,hideTooltip:o}},[i,s,o]),state:n}},Wy=function(){var t=R.useContext(yse);if(t===void 0)throw new Error("useTooltip must be used within a TooltipProvider");return t},L$e=function(){var t=R.useContext(xse);if(t===void 0)throw new Error("useTooltipState must be used within a TooltipProvider");return t},O$e=function(t){return t.isVisible},F$e=function(){var t=L$e();return O$e(t)?L.jsx(mse,{position:t.position,anchor:t.anchor,children:t.content}):null},B$e=function(t){var e=t.container,n=t.children,r=D$e(e),i=r.actions,s=r.state;return L.jsx(yse.Provider,{value:i,children:L.jsx(xse.Provider,{value:s,children:n})})};function U$e(){this.__data__=[],this.size=0}var z$e=U$e;function V$e(t,e){return t===e||t!==t&&e!==e}var KS=V$e,W$e=KS;function G$e(t,e){for(var n=t.length;n--;)if(W$e(t[n][0],e))return n;return-1}var UI=G$e,H$e=UI,j$e=Array.prototype,X$e=j$e.splice;function q$e(t){var e=this.__data__,n=H$e(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():X$e.call(e,n,1),--this.size,!0}var Y$e=q$e,K$e=UI;function Z$e(t){var e=this.__data__,n=K$e(e,t);return n<0?void 0:e[n][1]}var J$e=Z$e,Q$e=UI;function eDe(t){return Q$e(this.__data__,t)>-1}var tDe=eDe,nDe=UI;function rDe(t,e){var n=this.__data__,r=nDe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var iDe=rDe,sDe=z$e,oDe=Y$e,aDe=J$e,lDe=tDe,cDe=iDe;function Gy(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Gy.prototype.clear=sDe;Gy.prototype.delete=oDe;Gy.prototype.get=aDe;Gy.prototype.has=lDe;Gy.prototype.set=cDe;var zI=Gy,uDe=zI;function dDe(){this.__data__=new uDe,this.size=0}var fDe=dDe;function hDe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var pDe=hDe;function mDe(t){return this.__data__.get(t)}var gDe=mDe;function vDe(t){return this.__data__.has(t)}var yDe=vDe,xDe=typeof Nc=="object"&&Nc&&Nc.Object===Object&&Nc,bse=xDe,bDe=bse,wDe=typeof self=="object"&&self&&self.Object===Object&&self,SDe=bDe||wDe||Function("return this")(),od=SDe,_De=od,CDe=_De.Symbol,Hy=CDe,Xj=Hy,wse=Object.prototype,TDe=wse.hasOwnProperty,EDe=wse.toString,g1=Xj?Xj.toStringTag:void 0;function MDe(t){var e=TDe.call(t,g1),n=t[g1];try{t[g1]=void 0;var r=!0}catch{}var i=EDe.call(t);return r&&(e?t[g1]=n:delete t[g1]),i}var ADe=MDe,kDe=Object.prototype,IDe=kDe.toString;function RDe(t){return IDe.call(t)}var PDe=RDe,qj=Hy,NDe=ADe,$De=PDe,DDe="[object Null]",LDe="[object Undefined]",Yj=qj?qj.toStringTag:void 0;function ODe(t){return t==null?t===void 0?LDe:DDe:Yj&&Yj in Object(t)?NDe(t):$De(t)}var Xh=ODe;function FDe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ad=FDe,BDe=Xh,UDe=ad,zDe="[object AsyncFunction]",VDe="[object Function]",WDe="[object GeneratorFunction]",GDe="[object Proxy]";function HDe(t){if(!UDe(t))return!1;var e=BDe(t);return e==VDe||e==WDe||e==zDe||e==GDe}var VI=HDe;const Sse=ls(VI);var jDe=od,XDe=jDe["__core-js_shared__"],qDe=XDe,g$=qDe,Kj=function(){var t=/[^.]+$/.exec(g$&&g$.keys&&g$.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function YDe(t){return!!Kj&&Kj in t}var KDe=YDe,ZDe=Function.prototype,JDe=ZDe.toString;function QDe(t){if(t!=null){try{return JDe.call(t)}catch{}try{return t+""}catch{}}return""}var _se=QDe,eLe=VI,tLe=KDe,nLe=ad,rLe=_se,iLe=/[\\^$.*+?()[\]{}|]/g,sLe=/^\[object .+?Constructor\]$/,oLe=Function.prototype,aLe=Object.prototype,lLe=oLe.toString,cLe=aLe.hasOwnProperty,uLe=RegExp("^"+lLe.call(cLe).replace(iLe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dLe(t){if(!nLe(t)||tLe(t))return!1;var e=eLe(t)?uLe:sLe;return e.test(rLe(t))}var fLe=dLe;function hLe(t,e){return t==null?void 0:t[e]}var pLe=hLe,mLe=fLe,gLe=pLe;function vLe(t,e){var n=gLe(t,e);return mLe(n)?n:void 0}var Tg=vLe,yLe=Tg,xLe=od,bLe=yLe(xLe,"Map"),yU=bLe,wLe=Tg,SLe=wLe(Object,"create"),WI=SLe,Zj=WI;function _Le(){this.__data__=Zj?Zj(null):{},this.size=0}var CLe=_Le;function TLe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ELe=TLe,MLe=WI,ALe="__lodash_hash_undefined__",kLe=Object.prototype,ILe=kLe.hasOwnProperty;function RLe(t){var e=this.__data__;if(MLe){var n=e[t];return n===ALe?void 0:n}return ILe.call(e,t)?e[t]:void 0}var PLe=RLe,NLe=WI,$Le=Object.prototype,DLe=$Le.hasOwnProperty;function LLe(t){var e=this.__data__;return NLe?e[t]!==void 0:DLe.call(e,t)}var OLe=LLe,FLe=WI,BLe="__lodash_hash_undefined__";function ULe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=FLe&&e===void 0?BLe:e,this}var zLe=ULe,VLe=CLe,WLe=ELe,GLe=PLe,HLe=OLe,jLe=zLe;function jy(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}jy.prototype.clear=VLe;jy.prototype.delete=WLe;jy.prototype.get=GLe;jy.prototype.has=HLe;jy.prototype.set=jLe;var XLe=jy,Jj=XLe,qLe=zI,YLe=yU;function KLe(){this.size=0,this.__data__={hash:new Jj,map:new(YLe||qLe),string:new Jj}}var ZLe=KLe;function JLe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var QLe=JLe,eOe=QLe;function tOe(t,e){var n=t.__data__;return eOe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var GI=tOe,nOe=GI;function rOe(t){var e=nOe(this,t).delete(t);return this.size-=e?1:0,e}var iOe=rOe,sOe=GI;function oOe(t){return sOe(this,t).get(t)}var aOe=oOe,lOe=GI;function cOe(t){return lOe(this,t).has(t)}var uOe=cOe,dOe=GI;function fOe(t,e){var n=dOe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var hOe=fOe,pOe=ZLe,mOe=iOe,gOe=aOe,vOe=uOe,yOe=hOe;function Xy(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Xy.prototype.clear=pOe;Xy.prototype.delete=mOe;Xy.prototype.get=gOe;Xy.prototype.has=vOe;Xy.prototype.set=yOe;var xU=Xy,xOe=zI,bOe=yU,wOe=xU,SOe=200;function _Oe(t,e){var n=this.__data__;if(n instanceof xOe){var r=n.__data__;if(!bOe||r.length<SOe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wOe(r)}return n.set(t,e),this.size=n.size,this}var COe=_Oe,TOe=zI,EOe=fDe,MOe=pDe,AOe=gDe,kOe=yDe,IOe=COe;function qy(t){var e=this.__data__=new TOe(t);this.size=e.size}qy.prototype.clear=EOe;qy.prototype.delete=MOe;qy.prototype.get=AOe;qy.prototype.has=kOe;qy.prototype.set=IOe;var HI=qy,ROe=Tg,POe=function(){try{var t=ROe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Cse=POe,Qj=Cse;function NOe(t,e,n){e=="__proto__"&&Qj?Qj(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var bU=NOe,$Oe=bU,DOe=KS;function LOe(t,e,n){(n!==void 0&&!DOe(t[e],n)||n===void 0&&!(e in t))&&$Oe(t,e,n)}var Tse=LOe;function OOe(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[t?a:++i];if(n(s[l],l,s)===!1)break}return e}}var FOe=OOe,BOe=FOe,UOe=BOe(),Ese=UOe,uA={exports:{}};uA.exports;(function(t,e){var n=od,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var d=c.length,f=a?a(d):new c.constructor(d);return c.copy(f),f}t.exports=l})(uA,uA.exports);var Mse=uA.exports,zOe=od,VOe=zOe.Uint8Array,Ase=VOe,eX=Ase;function WOe(t){var e=new t.constructor(t.byteLength);return new eX(e).set(new eX(t)),e}var wU=WOe,GOe=wU;function HOe(t,e){var n=e?GOe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var kse=HOe;function jOe(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Ise=jOe,XOe=ad,tX=Object.create,qOe=function(){function t(){}return function(e){if(!XOe(e))return{};if(tX)return tX(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),YOe=qOe;function KOe(t,e){return function(n){return t(e(n))}}var Rse=KOe,ZOe=Rse,JOe=ZOe(Object.getPrototypeOf,Object),SU=JOe,QOe=Object.prototype;function e4e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||QOe;return t===n}var _U=e4e,t4e=YOe,n4e=SU,r4e=_U;function i4e(t){return typeof t.constructor=="function"&&!r4e(t)?t4e(n4e(t)):{}}var Pse=i4e;function s4e(t){return t!=null&&typeof t=="object"}var Qc=s4e,o4e=Xh,a4e=Qc,l4e="[object Arguments]";function c4e(t){return a4e(t)&&o4e(t)==l4e}var u4e=c4e,nX=u4e,d4e=Qc,Nse=Object.prototype,f4e=Nse.hasOwnProperty,h4e=Nse.propertyIsEnumerable,p4e=nX(function(){return arguments}())?nX:function(t){return d4e(t)&&f4e.call(t,"callee")&&!h4e.call(t,"callee")},jI=p4e,m4e=Array.isArray,Da=m4e,g4e=9007199254740991;function v4e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=g4e}var CU=v4e,y4e=VI,x4e=CU;function b4e(t){return t!=null&&x4e(t.length)&&!y4e(t)}var Yy=b4e,w4e=Yy,S4e=Qc;function _4e(t){return S4e(t)&&w4e(t)}var $se=_4e,dA={exports:{}};function C4e(){return!1}var T4e=C4e;dA.exports;(function(t,e){var n=od,r=T4e,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(dA,dA.exports);var XI=dA.exports,E4e=Xh,M4e=SU,A4e=Qc,k4e="[object Object]",I4e=Function.prototype,R4e=Object.prototype,Dse=I4e.toString,P4e=R4e.hasOwnProperty,N4e=Dse.call(Object);function $4e(t){if(!A4e(t)||E4e(t)!=k4e)return!1;var e=M4e(t);if(e===null)return!0;var n=P4e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Dse.call(n)==N4e}var TU=$4e;const EU=ls(TU);var D4e=Xh,L4e=CU,O4e=Qc,F4e="[object Arguments]",B4e="[object Array]",U4e="[object Boolean]",z4e="[object Date]",V4e="[object Error]",W4e="[object Function]",G4e="[object Map]",H4e="[object Number]",j4e="[object Object]",X4e="[object RegExp]",q4e="[object Set]",Y4e="[object String]",K4e="[object WeakMap]",Z4e="[object ArrayBuffer]",J4e="[object DataView]",Q4e="[object Float32Array]",eFe="[object Float64Array]",tFe="[object Int8Array]",nFe="[object Int16Array]",rFe="[object Int32Array]",iFe="[object Uint8Array]",sFe="[object Uint8ClampedArray]",oFe="[object Uint16Array]",aFe="[object Uint32Array]",Qr={};Qr[Q4e]=Qr[eFe]=Qr[tFe]=Qr[nFe]=Qr[rFe]=Qr[iFe]=Qr[sFe]=Qr[oFe]=Qr[aFe]=!0;Qr[F4e]=Qr[B4e]=Qr[Z4e]=Qr[U4e]=Qr[J4e]=Qr[z4e]=Qr[V4e]=Qr[W4e]=Qr[G4e]=Qr[H4e]=Qr[j4e]=Qr[X4e]=Qr[q4e]=Qr[Y4e]=Qr[K4e]=!1;function lFe(t){return O4e(t)&&L4e(t.length)&&!!Qr[D4e(t)]}var cFe=lFe;function uFe(t){return function(e){return t(e)}}var ZS=uFe,fA={exports:{}};fA.exports;(function(t,e){var n=bse,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(fA,fA.exports);var qI=fA.exports,dFe=cFe,fFe=ZS,rX=qI,iX=rX&&rX.isTypedArray,hFe=iX?fFe(iX):dFe,MU=hFe;function pFe(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Lse=pFe,mFe=bU,gFe=KS,vFe=Object.prototype,yFe=vFe.hasOwnProperty;function xFe(t,e,n){var r=t[e];(!(yFe.call(t,e)&&gFe(r,n))||n===void 0&&!(e in t))&&mFe(t,e,n)}var AU=xFe,bFe=AU,wFe=bU;function SFe(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),i?wFe(n,a,l):bFe(n,a,l)}return n}var Ky=SFe;function _Fe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var CFe=_Fe,TFe=9007199254740991,EFe=/^(?:0|[1-9]\d*)$/;function MFe(t,e){var n=typeof t;return e=e??TFe,!!e&&(n=="number"||n!="symbol"&&EFe.test(t))&&t>-1&&t%1==0&&t<e}var YI=MFe,AFe=CFe,kFe=jI,IFe=Da,RFe=XI,PFe=YI,NFe=MU,$Fe=Object.prototype,DFe=$Fe.hasOwnProperty;function LFe(t,e){var n=IFe(t),r=!n&&kFe(t),i=!n&&!r&&RFe(t),s=!n&&!r&&!i&&NFe(t),o=n||r||i||s,a=o?AFe(t.length,String):[],l=a.length;for(var c in t)(e||DFe.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||PFe(c,l)))&&a.push(c);return a}var Ose=LFe;function OFe(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var FFe=OFe,BFe=ad,UFe=_U,zFe=FFe,VFe=Object.prototype,WFe=VFe.hasOwnProperty;function GFe(t){if(!BFe(t))return zFe(t);var e=UFe(t),n=[];for(var r in t)r=="constructor"&&(e||!WFe.call(t,r))||n.push(r);return n}var HFe=GFe,jFe=Ose,XFe=HFe,qFe=Yy;function YFe(t){return qFe(t)?jFe(t,!0):XFe(t)}var JS=YFe,KFe=Ky,ZFe=JS;function JFe(t){return KFe(t,ZFe(t))}var QFe=JFe,sX=Tse,e5e=Mse,t5e=kse,n5e=Ise,r5e=Pse,oX=jI,aX=Da,i5e=$se,s5e=XI,o5e=VI,a5e=ad,l5e=TU,c5e=MU,lX=Lse,u5e=QFe;function d5e(t,e,n,r,i,s,o){var a=lX(t,n),l=lX(e,n),c=o.get(l);if(c){sX(t,n,c);return}var u=s?s(a,l,n+"",t,e,o):void 0,d=u===void 0;if(d){var f=aX(l),h=!f&&s5e(l),p=!f&&!h&&c5e(l);u=l,f||h||p?aX(a)?u=a:i5e(a)?u=n5e(a):h?(d=!1,u=e5e(l,!0)):p?(d=!1,u=t5e(l,!0)):u=[]:l5e(l)||oX(l)?(u=a,oX(a)?u=u5e(a):(!a5e(a)||o5e(a))&&(u=r5e(l))):d=!1}d&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),sX(t,n,u)}var f5e=d5e,h5e=HI,p5e=Tse,m5e=Ese,g5e=f5e,v5e=ad,y5e=JS,x5e=Lse;function Fse(t,e,n,r,i){t!==e&&m5e(e,function(s,o){if(i||(i=new h5e),v5e(s))g5e(t,e,o,n,Fse,r,i);else{var a=r?r(x5e(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),p5e(t,o,a)}},y5e)}var b5e=Fse;function w5e(t){return t}var KI=w5e;function S5e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var _5e=S5e,C5e=_5e,cX=Math.max;function T5e(t,e,n){return e=cX(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=cX(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),C5e(t,this,a)}}var Bse=T5e;function E5e(t){return function(){return t}}var M5e=E5e,A5e=M5e,uX=Cse,k5e=KI,I5e=uX?function(t,e){return uX(t,"toString",{configurable:!0,enumerable:!1,value:A5e(e),writable:!0})}:k5e,R5e=I5e,P5e=800,N5e=16,$5e=Date.now;function D5e(t){var e=0,n=0;return function(){var r=$5e(),i=N5e-(r-n);if(n=r,i>0){if(++e>=P5e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var L5e=D5e,O5e=R5e,F5e=L5e,B5e=F5e(O5e),Use=B5e,U5e=KI,z5e=Bse,V5e=Use;function W5e(t,e){return V5e(z5e(t,e,U5e),t+"")}var kU=W5e,G5e=KS,H5e=Yy,j5e=YI,X5e=ad;function q5e(t,e,n){if(!X5e(n))return!1;var r=typeof e;return(r=="number"?H5e(n)&&j5e(e,n.length):r=="string"&&e in n)?G5e(n[e],t):!1}var zse=q5e,Y5e=kU,K5e=zse;function Z5e(t){return Y5e(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&K5e(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var J5e=Z5e,Q5e=b5e,eBe=J5e,tBe=eBe(function(t,e,n){Q5e(t,e,n)}),nBe=tBe;const rBe=ls(nBe);var iBe=Xh,sBe=Qc,oBe="[object Symbol]";function aBe(t){return typeof t=="symbol"||sBe(t)&&iBe(t)==oBe}var ZI=aBe,lBe=Da,cBe=ZI,uBe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dBe=/^\w*$/;function fBe(t,e){if(lBe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||cBe(t)?!0:dBe.test(t)||!uBe.test(t)||e!=null&&t in Object(e)}var IU=fBe,Vse=xU,hBe="Expected a function";function RU(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(hBe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(RU.Cache||Vse),n}RU.Cache=Vse;var pBe=RU,mBe=pBe,gBe=500;function vBe(t){var e=mBe(t,function(r){return n.size===gBe&&n.clear(),r}),n=e.cache;return e}var yBe=vBe,xBe=yBe,bBe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wBe=/\\(\\)?/g,SBe=xBe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(bBe,function(n,r,i,s){e.push(i?s.replace(wBe,"$1"):r||n)}),e}),_Be=SBe;function CBe(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var JI=CBe,dX=Hy,TBe=JI,EBe=Da,MBe=ZI,ABe=1/0,fX=dX?dX.prototype:void 0,hX=fX?fX.toString:void 0;function Wse(t){if(typeof t=="string")return t;if(EBe(t))return TBe(t,Wse)+"";if(MBe(t))return hX?hX.call(t):"";var e=t+"";return e=="0"&&1/t==-ABe?"-0":e}var kBe=Wse,IBe=kBe;function RBe(t){return t==null?"":IBe(t)}var PBe=RBe,NBe=Da,$Be=IU,DBe=_Be,LBe=PBe;function OBe(t,e){return NBe(t)?t:$Be(t,e)?[t]:DBe(LBe(t))}var Zy=OBe,FBe=ZI,BBe=1/0;function UBe(t){if(typeof t=="string"||FBe(t))return t;var e=t+"";return e=="0"&&1/t==-BBe?"-0":e}var Jy=UBe,zBe=Zy,VBe=Jy;function WBe(t,e){e=zBe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[VBe(e[n++])];return n&&n==r?t:void 0}var QS=WBe,GBe=QS;function HBe(t,e,n){var r=t==null?void 0:GBe(t,e);return r===void 0?n:r}var Gse=HBe;const Ja=ls(Gse);var jBe=AU,XBe=Zy,qBe=YI,pX=ad,YBe=Jy;function KBe(t,e,n,r){if(!pX(t))return t;e=XBe(e,t);for(var i=-1,s=e.length,o=s-1,a=t;a!=null&&++i<s;){var l=YBe(e[i]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=o){var u=a[l];c=r?r(u,l,a):void 0,c===void 0&&(c=pX(u)?u:qBe(e[i+1])?[]:{})}jBe(a,l,c),a=a[l]}return t}var Hse=KBe,ZBe=Hse;function JBe(t,e,n){return t==null?t:ZBe(t,e,n)}var QBe=JBe;const Nd=ls(QBe);function PU(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function jse(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function e2(){}var _w=.7,hA=1/_w,Ov="\\s*([+-]?\\d+)\\s*",Cw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Du="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eUe=/^#([0-9a-f]{3,8})$/,tUe=new RegExp(`^rgb\\(${Ov},${Ov},${Ov}\\)$`),nUe=new RegExp(`^rgb\\(${Du},${Du},${Du}\\)$`),rUe=new RegExp(`^rgba\\(${Ov},${Ov},${Ov},${Cw}\\)$`),iUe=new RegExp(`^rgba\\(${Du},${Du},${Du},${Cw}\\)$`),sUe=new RegExp(`^hsl\\(${Cw},${Du},${Du}\\)$`),oUe=new RegExp(`^hsla\\(${Cw},${Du},${Du},${Cw}\\)$`),mX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};PU(e2,NU,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gX,formatHex:gX,formatHex8:aUe,formatHsl:lUe,formatRgb:vX,toString:vX});function gX(){return this.rgb().formatHex()}function aUe(){return this.rgb().formatHex8()}function lUe(){return Xse(this).formatHsl()}function vX(){return this.rgb().formatRgb()}function NU(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=eUe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?yX(e):n===3?new Sa(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?lT(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?lT(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=tUe.exec(t))?new Sa(e[1],e[2],e[3],1):(e=nUe.exec(t))?new Sa(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=rUe.exec(t))?lT(e[1],e[2],e[3],e[4]):(e=iUe.exec(t))?lT(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=sUe.exec(t))?wX(e[1],e[2]/100,e[3]/100,1):(e=oUe.exec(t))?wX(e[1],e[2]/100,e[3]/100,e[4]):mX.hasOwnProperty(t)?yX(mX[t]):t==="transparent"?new Sa(NaN,NaN,NaN,0):null}function yX(t){return new Sa(t>>16&255,t>>8&255,t&255,1)}function lT(t,e,n,r){return r<=0&&(t=e=n=NaN),new Sa(t,e,n,r)}function cUe(t){return t instanceof e2||(t=NU(t)),t?(t=t.rgb(),new Sa(t.r,t.g,t.b,t.opacity)):new Sa}function Tw(t,e,n,r){return arguments.length===1?cUe(t):new Sa(t,e,n,r??1)}function Sa(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}PU(Sa,Tw,jse(e2,{brighter(t){return t=t==null?hA:Math.pow(hA,t),new Sa(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_w:Math.pow(_w,t),new Sa(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Sa(Tm(this.r),Tm(this.g),Tm(this.b),pA(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xX,formatHex:xX,formatHex8:uUe,formatRgb:bX,toString:bX}));function xX(){return`#${um(this.r)}${um(this.g)}${um(this.b)}`}function uUe(){return`#${um(this.r)}${um(this.g)}${um(this.b)}${um((isNaN(this.opacity)?1:this.opacity)*255)}`}function bX(){const t=pA(this.opacity);return`${t===1?"rgb(":"rgba("}${Tm(this.r)}, ${Tm(this.g)}, ${Tm(this.b)}${t===1?")":`, ${t})`}`}function pA(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Tm(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function um(t){return t=Tm(t),(t<16?"0":"")+t.toString(16)}function wX(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Pc(t,e,n,r)}function Xse(t){if(t instanceof Pc)return new Pc(t.h,t.s,t.l,t.opacity);if(t instanceof e2||(t=NU(t)),!t)return new Pc;if(t instanceof Pc)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Pc(o,a,l,t.opacity)}function dUe(t,e,n,r){return arguments.length===1?Xse(t):new Pc(t,e,n,r??1)}function Pc(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}PU(Pc,dUe,jse(e2,{brighter(t){return t=t==null?hA:Math.pow(hA,t),new Pc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_w:Math.pow(_w,t),new Pc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Sa(v$(t>=240?t-240:t+120,i,r),v$(t,i,r),v$(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Pc(SX(this.h),cT(this.s),cT(this.l),pA(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=pA(this.opacity);return`${t===1?"hsl(":"hsla("}${SX(this.h)}, ${cT(this.s)*100}%, ${cT(this.l)*100}%${t===1?")":`, ${t})`}`}}));function SX(t){return t=(t||0)%360,t<0?t+360:t}function cT(t){return Math.max(0,Math.min(1,t||0))}function v$(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function fUe(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}function hUe(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],o=r>0?t[r-1]:2*i-s,a=r<e-1?t[r+2]:2*s-i;return fUe((n-r/e)*e,o,i,s,a)}}const qse=t=>()=>t;function pUe(t,e){return function(n){return t+n*e}}function mUe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function gUe(t){return(t=+t)==1?Yse:function(e,n){return n-e?mUe(e,n,t):qse(isNaN(e)?n:e)}}function Yse(t,e){var n=e-t;return n?pUe(t,n):qse(isNaN(t)?e:t)}(function t(e){var n=gUe(e);function r(i,s){var o=n((i=Tw(i)).r,(s=Tw(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Yse(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function vUe(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Tw(e[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=t(r),i=t(i),s=t(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var yUe=vUe(hUe);function xUe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var KO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,y$=new RegExp(KO.source,"g");function bUe(t){return function(){return t}}function wUe(t){return function(e){return t(e)+""}}function SUe(t,e){var n=KO.lastIndex=y$.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=KO.exec(t))&&(i=y$.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:xUe(r,i)})),n=y$.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?wUe(l[0].x):bUe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}var _Ue=Xh,CUe=Da,TUe=Qc,EUe="[object String]";function MUe(t){return typeof t=="string"||!CUe(t)&&TUe(t)&&_Ue(t)==EUe}var AUe=MUe;const kUe=ls(AUe);function IUe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Kse=IUe;const pn=ls(Kse);function Zse(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function $U(t){let e=t,n=t;t.length===1&&(e=(o,a)=>t(o)-a,n=RUe(t));function r(o,a,l,c){for(l==null&&(l=0),c==null&&(c=o.length);l<c;){const u=l+c>>>1;n(o[u],a)<0?l=u+1:c=u}return l}function i(o,a,l,c){for(l==null&&(l=0),c==null&&(c=o.length);l<c;){const u=l+c>>>1;n(o[u],a)>0?c=u:l=u+1}return l}function s(o,a,l,c){l==null&&(l=0),c==null&&(c=o.length);const u=r(o,a,l,c-1);return u>l&&e(o[u-1],a)>-e(o[u],a)?u-1:u}return{left:r,center:s,right:i}}function RUe(t){return(e,n)=>Zse(t(e),n)}function PUe(t){return t===null?NaN:+t}const NUe=$U(Zse),$Ue=NUe.right;$U(PUe).center;const Jse=$Ue;var ZO=Math.sqrt(50),JO=Math.sqrt(10),QO=Math.sqrt(2);function e4(t,e,n){var r,i=-1,s,o,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(s=t,t=e,e=s),(a=Qse(t,e,n))===0||!isFinite(a))return[];if(a>0){let l=Math.round(t/a),c=Math.round(e/a);for(l*a<t&&++l,c*a>e&&--c,o=new Array(s=c-l+1);++i<s;)o[i]=(l+i)*a}else{a=-a;let l=Math.round(t*a),c=Math.round(e*a);for(l/a<t&&++l,c/a>e&&--c,o=new Array(s=c-l+1);++i<s;)o[i]=(l+i)/a}return r&&o.reverse(),o}function Qse(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=ZO?10:s>=JO?5:s>=QO?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=ZO?10:s>=JO?5:s>=QO?2:1)}function t4(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=ZO?i*=10:s>=JO?i*=5:s>=QO&&(i*=2),e<t?-i:i}function DUe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function qh(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function eoe(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const _X=Symbol("implicit");function dm(){var t=new Map,e=[],n=[],r=_X;function i(s){var o=s+"",a=t.get(o);if(!a){if(r!==_X)return r;t.set(o,a=e.push(s))}return n[(a-1)%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Map;for(const o of s){const a=o+"";t.has(a)||t.set(a,e.push(o))}return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return dm(e,n).unknown(r)},qh.apply(i,arguments),i}function Ew(){var t=dm().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var f=e().length,h=i<r,p=h?i:r,v=h?r:i;s=(v-p)/Math.max(1,f-l+c*2),a&&(s=Math.floor(s)),p+=(v-p-s*(f-l))*u,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var g=DUe(f).map(function(m){return p+s*m});return n(h?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,d()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.copy=function(){return Ew(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},qh.apply(d(),arguments)}function toe(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return toe(e())},t}function LUe(){return toe(Ew.apply(null,arguments).paddingInner(1))}function DU(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function noe(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function t2(){}var Mw=.7,mA=1/Mw,Fv="\\s*([+-]?\\d+)\\s*",Aw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",OUe=/^#([0-9a-f]{3,8})$/,FUe=new RegExp("^rgb\\("+[Fv,Fv,Fv]+"\\)$"),BUe=new RegExp("^rgb\\("+[Lu,Lu,Lu]+"\\)$"),UUe=new RegExp("^rgba\\("+[Fv,Fv,Fv,Aw]+"\\)$"),zUe=new RegExp("^rgba\\("+[Lu,Lu,Lu,Aw]+"\\)$"),VUe=new RegExp("^hsl\\("+[Aw,Lu,Lu]+"\\)$"),WUe=new RegExp("^hsla\\("+[Aw,Lu,Lu,Aw]+"\\)$"),CX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};DU(t2,kw,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:TX,formatHex:TX,formatHsl:GUe,formatRgb:EX,toString:EX});function TX(){return this.rgb().formatHex()}function GUe(){return roe(this).formatHsl()}function EX(){return this.rgb().formatRgb()}function kw(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=OUe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?MX(e):n===3?new rl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?uT(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?uT(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=FUe.exec(t))?new rl(e[1],e[2],e[3],1):(e=BUe.exec(t))?new rl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=UUe.exec(t))?uT(e[1],e[2],e[3],e[4]):(e=zUe.exec(t))?uT(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=VUe.exec(t))?IX(e[1],e[2]/100,e[3]/100,1):(e=WUe.exec(t))?IX(e[1],e[2]/100,e[3]/100,e[4]):CX.hasOwnProperty(t)?MX(CX[t]):t==="transparent"?new rl(NaN,NaN,NaN,0):null}function MX(t){return new rl(t>>16&255,t>>8&255,t&255,1)}function uT(t,e,n,r){return r<=0&&(t=e=n=NaN),new rl(t,e,n,r)}function HUe(t){return t instanceof t2||(t=kw(t)),t?(t=t.rgb(),new rl(t.r,t.g,t.b,t.opacity)):new rl}function n4(t,e,n,r){return arguments.length===1?HUe(t):new rl(t,e,n,r??1)}function rl(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}DU(rl,n4,noe(t2,{brighter:function(t){return t=t==null?mA:Math.pow(mA,t),new rl(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?Mw:Math.pow(Mw,t),new rl(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:AX,formatHex:AX,formatRgb:kX,toString:kX}));function AX(){return"#"+x$(this.r)+x$(this.g)+x$(this.b)}function kX(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function x$(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function IX(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Tu(t,e,n,r)}function roe(t){if(t instanceof Tu)return new Tu(t.h,t.s,t.l,t.opacity);if(t instanceof t2||(t=kw(t)),!t)return new Tu;if(t instanceof Tu)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Tu(o,a,l,t.opacity)}function jUe(t,e,n,r){return arguments.length===1?roe(t):new Tu(t,e,n,r??1)}function Tu(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}DU(Tu,jUe,noe(t2,{brighter:function(t){return t=t==null?mA:Math.pow(mA,t),new Tu(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?Mw:Math.pow(Mw,t),new Tu(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new rl(b$(t>=240?t-240:t+120,i,r),b$(t,i,r),b$(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function b$(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const LU=t=>()=>t;function XUe(t,e){return function(n){return t+n*e}}function qUe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function YUe(t){return(t=+t)==1?ioe:function(e,n){return n-e?qUe(e,n,t):LU(isNaN(e)?n:e)}}function ioe(t,e){var n=e-t;return n?XUe(t,n):LU(isNaN(t)?e:t)}const RX=function t(e){var n=YUe(e);function r(i,s){var o=n((i=n4(i)).r,(s=n4(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=ioe(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function KUe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function ZUe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function JUe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Qy(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function QUe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function gA(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function eze(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Qy(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var r4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w$=new RegExp(r4.source,"g");function tze(t){return function(){return t}}function nze(t){return function(e){return t(e)+""}}function rze(t,e){var n=r4.lastIndex=w$.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=r4.exec(t))&&(i=w$.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:gA(r,i)})),n=w$.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?nze(l[0].x):tze(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function Qy(t,e){var n=typeof e,r;return e==null||n==="boolean"?LU(e):(n==="number"?gA:n==="string"?(r=kw(e))?(e=r,RX):rze:e instanceof kw?RX:e instanceof Date?QUe:ZUe(e)?KUe:Array.isArray(e)?JUe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?eze:gA)(t,e)}function OU(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function ize(t,e){e===void 0&&(e=t,t=Qy);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function sze(t){return function(){return t}}function oze(t){return+t}var PX=[0,1];function ku(t){return t}function i4(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:sze(isNaN(e)?NaN:.5)}function aze(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function lze(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=i4(i,r),s=n(o,s)):(r=i4(r,i),s=n(s,o)),function(a){return s(r(a))}}function cze(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=i4(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Jse(t,a,1,r)-1;return s[l](i[l](a))}}function QI(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function FU(){var t=PX,e=PX,n=Qy,r,i,s,o=ku,a,l,c;function u(){var f=Math.min(t.length,e.length);return o!==ku&&(o=aze(t[0],t[f-1])),a=f>2?cze:lze,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=a(t.map(r),e,n)))(r(o(f)))}return d.invert=function(f){return o(i((c||(c=a(e,t.map(r),gA)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,oze),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=OU,u()},d.clamp=function(f){return arguments.length?(o=f?!0:ku,u()):o!==ku},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,h){return r=f,i=h,u()}}function soe(){return FU()(ku,ku)}function uze(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function vA(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ly(t){return t=vA(Math.abs(t)),t?t[1]:NaN}function dze(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function fze(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var hze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yA(t){if(!(e=hze.exec(t)))throw new Error("invalid format: "+t);var e;return new BU({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}yA.prototype=BU.prototype;function BU(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}BU.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pze(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ooe;function mze(t,e){var n=vA(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(ooe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+vA(t,Math.max(0,e+s-1))[0]}function NX(t,e){var n=vA(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const $X={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:uze,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return NX(t*100,e)},r:NX,s:mze,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function DX(t){return t}var LX=Array.prototype.map,OX=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function gze(t){var e=t.grouping===void 0||t.thousands===void 0?DX:dze(LX.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?DX:fze(LX.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"-":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=yA(d);var f=d.fill,h=d.align,p=d.sign,v=d.symbol,g=d.zero,m=d.width,y=d.comma,x=d.precision,S=d.trim,_=d.type;_==="n"?(y=!0,_="g"):$X[_]||(x===void 0&&(x=12),S=!0,_="g"),(g||f==="0"&&h==="=")&&(g=!0,f="0",h="=");var C=v==="$"?n:v==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",T=v==="$"?r:/[%p]/.test(_)?o:"",A=$X[_],M=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function E(P){var N=C,F=T,$,O,z;if(_==="c")F=A(P)+F,P="";else{P=+P;var X=P<0||1/P<0;if(P=isNaN(P)?l:A(Math.abs(P),x),S&&(P=pze(P)),X&&+P==0&&p!=="+"&&(X=!1),N=(X?p==="("?p:a:p==="-"||p==="("?"":p)+N,F=(_==="s"?OX[8+ooe/3]:"")+F+(X&&p==="("?")":""),M){for($=-1,O=P.length;++$<O;)if(z=P.charCodeAt($),48>z||z>57){F=(z===46?i+P.slice($+1):P.slice($))+F,P=P.slice(0,$);break}}}y&&!g&&(P=e(P,1/0));var D=N.length+P.length+F.length,B=D<m?new Array(m-D+1).join(f):"";switch(y&&g&&(P=e(B+P,B.length?m-F.length:1/0),B=""),h){case"<":P=N+P+F+B;break;case"=":P=N+B+P+F;break;case"^":P=B.slice(0,D=B.length>>1)+N+P+F+B.slice(D);break;default:P=B+N+P+F;break}return s(P)}return E.toString=function(){return d+""},E}function u(d,f){var h=c((d=yA(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(ly(f)/3)))*3,v=Math.pow(10,-p),g=OX[8+p/3];return function(m){return h(v*m)+g}}return{format:c,formatPrefix:u}}var dT,n2,aoe;vze({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function vze(t){return dT=gze(t),n2=dT.format,aoe=dT.formatPrefix,dT}function yze(t){return Math.max(0,-ly(Math.abs(t)))}function xze(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ly(e)/3)))*3-ly(Math.abs(t)))}function bze(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ly(e)-ly(t))+1}function wze(t,e,n,r){var i=t4(t,e,n),s;switch(r=yA(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=xze(i,o))&&(r.precision=s),aoe(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=bze(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=yze(i))&&(r.precision=s-(r.type==="%")*2);break}}return n2(r)}function r2(t){var e=t.domain;return t.ticks=function(n){var r=e();return e4(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return wze(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=i,i=s,s=c);u-- >0;){if(c=Qse(o,a,n),c===l)return r[i]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function i2(){var t=soe();return t.copy=function(){return QI(t,i2())},qh.apply(t,arguments),r2(t)}function loe(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function FX(t){return Math.log(t)}function BX(t){return Math.exp(t)}function Sze(t){return-Math.log(-t)}function _ze(t){return-Math.exp(-t)}function Cze(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Tze(t){return t===10?Cze:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Eze(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function UX(t){return function(e){return-t(-e)}}function Mze(t){var e=t(FX,BX),n=e.domain,r=10,i,s;function o(){return i=Eze(r),s=Tze(r),n()[0]<0?(i=UX(i),s=UX(s),t(Sze,_ze)):t(FX,BX),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=function(a){var l=n(),c=l[0],u=l[l.length-1],d;(d=u<c)&&(f=c,c=u,u=f);var f=i(c),h=i(u),p,v,g,m=a==null?10:+a,y=[];if(!(r%1)&&h-f<m){if(f=Math.floor(f),h=Math.ceil(h),c>0){for(;f<=h;++f)for(v=1,p=s(f);v<r;++v)if(g=p*v,!(g<c)){if(g>u)break;y.push(g)}}else for(;f<=h;++f)for(v=r-1,p=s(f);v>=1;--v)if(g=p*v,!(g<c)){if(g>u)break;y.push(g)}y.length*2<m&&(y=e4(c,u,m))}else y=e4(f,h,Math.min(h-f,m)).map(s);return d?y.reverse():y},e.tickFormat=function(a,l){if(l==null&&(l=r===10?".0e":","),typeof l!="function"&&(l=n2(l)),a===1/0)return l;a==null&&(a=10);var c=Math.max(1,r*a/e.ticks().length);return function(u){var d=u/s(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=function(){return n(loe(n(),{floor:function(a){return s(Math.floor(i(a)))},ceil:function(a){return s(Math.ceil(i(a)))}}))},e}function coe(){var t=Mze(FU()).domain([1,10]);return t.copy=function(){return QI(t,coe()).base(t.base())},qh.apply(t,arguments),t}function zX(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function VX(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Aze(t){var e=1,n=t(zX(e),VX(e));return n.constant=function(r){return arguments.length?t(zX(e=+r),VX(e)):e},r2(n)}function uoe(){var t=Aze(FU());return t.copy=function(){return QI(t,uoe()).constant(t.constant())},qh.apply(t,arguments)}function doe(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[Jse(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return doe().domain([t,e]).range(i).unknown(s)},qh.apply(r2(o),arguments)}var S$=new Date,_$=new Date;function Os(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return e(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var l=[],c;if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=function(s){return Os(function(o){if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););})},n&&(i.count=function(s,o){return S$.setTime(+s),_$.setTime(+o),t(S$),t(_$),Math.floor(n(S$,_$))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}var xA=Os(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});xA.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Os(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):xA};const kze=xA;xA.range;const Fd=1e3,Vl=Fd*60,Bd=Vl*60,Zm=Bd*24,UU=Zm*7,WX=Zm*30,C$=Zm*365;var foe=Os(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*Fd)},function(t,e){return(e-t)/Fd},function(t){return t.getUTCSeconds()});const uv=foe;foe.range;var hoe=Os(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Fd)},function(t,e){t.setTime(+t+e*Vl)},function(t,e){return(e-t)/Vl},function(t){return t.getMinutes()});const poe=hoe;hoe.range;var moe=Os(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Fd-t.getMinutes()*Vl)},function(t,e){t.setTime(+t+e*Bd)},function(t,e){return(e-t)/Bd},function(t){return t.getHours()});const goe=moe;moe.range;var voe=Os(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Vl)/Zm,t=>t.getDate()-1);const yoe=voe;voe.range;function Eg(t){return Os(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Vl)/UU})}var zU=Eg(0),Ize=Eg(1),Rze=Eg(2),Pze=Eg(3),Nze=Eg(4),$ze=Eg(5),Dze=Eg(6);zU.range;Ize.range;Rze.range;Pze.range;Nze.range;$ze.range;Dze.range;var xoe=Os(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const boe=xoe;xoe.range;var VU=Os(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});VU.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Os(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const woe=VU;VU.range;var Soe=Os(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Vl)},function(t,e){return(e-t)/Vl},function(t){return t.getUTCMinutes()});const _oe=Soe;Soe.range;var Coe=Os(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Bd)},function(t,e){return(e-t)/Bd},function(t){return t.getUTCHours()});const Toe=Coe;Coe.range;var Eoe=Os(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Zm},function(t){return t.getUTCDate()-1});const Moe=Eoe;Eoe.range;function Mg(t){return Os(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/UU})}var WU=Mg(0),Lze=Mg(1),Oze=Mg(2),Fze=Mg(3),Bze=Mg(4),Uze=Mg(5),zze=Mg(6);WU.range;Lze.range;Oze.range;Fze.range;Bze.range;Uze.range;zze.range;var Aoe=Os(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const koe=Aoe;Aoe.range;var GU=Os(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});GU.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Os(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const Ioe=GU;GU.range;function Roe(t,e,n,r,i,s){const o=[[uv,1,Fd],[uv,5,5*Fd],[uv,15,15*Fd],[uv,30,30*Fd],[s,1,Vl],[s,5,5*Vl],[s,15,15*Vl],[s,30,30*Vl],[i,1,Bd],[i,3,3*Bd],[i,6,6*Bd],[i,12,12*Bd],[r,1,Zm],[r,2,2*Zm],[n,1,UU],[e,1,WX],[e,3,3*WX],[t,1,C$]];function a(c,u,d){const f=u<c;f&&([c,u]=[u,c]);const h=d&&typeof d.range=="function"?d:l(c,u,d),p=h?h.range(c,+u+1):[];return f?p.reverse():p}function l(c,u,d){const f=Math.abs(u-c)/d,h=$U(([,,g])=>g).right(o,f);if(h===o.length)return t.every(t4(c/C$,u/C$,d));if(h===0)return kze.every(Math.max(t4(c,u,d),1));const[p,v]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return p.every(v)}return[a,l]}const[Vze,Wze]=Roe(Ioe,koe,WU,Moe,Toe,_oe),[Gze,Hze]=Roe(woe,boe,zU,yoe,goe,poe);var T$=new Date,E$=new Date;function os(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return t(s=new Date(+s)),s},i.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return e(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var l=[],c;if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<o);return l},i.filter=function(s){return os(function(o){if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););})},n&&(i.count=function(s,o){return T$.setTime(+s),E$.setTime(+o),t(T$),t(E$),Math.floor(n(T$,E$))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}var bA=os(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});bA.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?os(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):bA};const GX=bA;bA.range;var wA=1e3,Jm=6e4,SA=36e5,Poe=864e5,Noe=6048e5,$oe=os(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*wA)},function(t,e){return(e-t)/wA},function(t){return t.getUTCSeconds()});const HX=$oe;$oe.range;var Doe=os(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*wA)},function(t,e){t.setTime(+t+e*Jm)},function(t,e){return(e-t)/Jm},function(t){return t.getMinutes()});const jze=Doe;Doe.range;var Loe=os(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*wA-t.getMinutes()*Jm)},function(t,e){t.setTime(+t+e*SA)},function(t,e){return(e-t)/SA},function(t){return t.getHours()});const Xze=Loe;Loe.range;var Ooe=os(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Jm)/Poe},function(t){return t.getDate()-1});const Foe=Ooe;Ooe.range;function Ag(t){return os(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Jm)/Noe})}var _A=Ag(0),Iw=Ag(1),Boe=Ag(2),Uoe=Ag(3),Qm=Ag(4),zoe=Ag(5),Voe=Ag(6);_A.range;Iw.range;Boe.range;Uoe.range;Qm.range;zoe.range;Voe.range;var Woe=os(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});const qze=Woe;Woe.range;var HU=os(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});HU.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:os(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};const cy=HU;HU.range;var Goe=os(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Jm)},function(t,e){return(e-t)/Jm},function(t){return t.getUTCMinutes()});const Yze=Goe;Goe.range;var Hoe=os(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*SA)},function(t,e){return(e-t)/SA},function(t){return t.getUTCHours()});const Kze=Hoe;Hoe.range;var joe=os(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Poe},function(t){return t.getUTCDate()-1});const Xoe=joe;joe.range;function kg(t){return os(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/Noe})}var CA=kg(0),Rw=kg(1),qoe=kg(2),Yoe=kg(3),eg=kg(4),Koe=kg(5),Zoe=kg(6);CA.range;Rw.range;qoe.range;Yoe.range;eg.range;Koe.range;Zoe.range;var Joe=os(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});const Zze=Joe;Joe.range;var jU=os(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});jU.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:os(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};const uy=jU;jU.range;function M$(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function A$(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function v1(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Jze(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,c=y1(i),u=x1(i),d=y1(s),f=x1(s),h=y1(o),p=x1(o),v=y1(a),g=x1(a),m=y1(l),y=x1(l),x={a:X,A:D,b:B,B:V,c:null,d:ZX,e:ZX,f:w6e,g:R6e,G:N6e,H:y6e,I:x6e,j:b6e,L:Qoe,m:S6e,M:_6e,p:W,q:j,Q:eq,s:tq,S:C6e,u:T6e,U:E6e,V:M6e,w:A6e,W:k6e,x:null,X:null,y:I6e,Y:P6e,Z:$6e,"%":QX},S={a:J,A:Q,b:te,B:re,c:null,d:JX,e:JX,f:F6e,g:q6e,G:K6e,H:D6e,I:L6e,j:O6e,L:tae,m:B6e,M:U6e,p:se,q:fe,Q:eq,s:tq,S:z6e,u:V6e,U:W6e,V:G6e,w:H6e,W:j6e,x:null,X:null,y:X6e,Y:Y6e,Z:Z6e,"%":QX},_={a:E,A:P,b:N,B:F,c:$,d:YX,e:YX,f:p6e,g:qX,G:XX,H:KX,I:KX,j:u6e,L:h6e,m:c6e,M:d6e,p:M,q:l6e,Q:g6e,s:v6e,S:f6e,u:r6e,U:i6e,V:s6e,w:n6e,W:o6e,x:O,X:z,y:qX,Y:XX,Z:a6e,"%":m6e};x.x=C(n,x),x.X=C(r,x),x.c=C(e,x),S.x=C(n,S),S.X=C(r,S),S.c=C(e,S);function C(ae,ye){return function(le){var H=[],Me=-1,we=0,Ee=ae.length,ge,qe,Ae;for(le instanceof Date||(le=new Date(+le));++Me<Ee;)ae.charCodeAt(Me)===37&&(H.push(ae.slice(we,Me)),(qe=jX[ge=ae.charAt(++Me)])!=null?ge=ae.charAt(++Me):qe=ge==="e"?" ":"0",(Ae=ye[ge])&&(ge=Ae(le,qe)),H.push(ge),we=Me+1);return H.push(ae.slice(we,Me)),H.join("")}}function T(ae,ye){return function(le){var H=v1(1900,void 0,1),Me=A(H,ae,le+="",0),we,Ee;if(Me!=le.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(ye&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(we=A$(v1(H.y,0,1)),Ee=we.getUTCDay(),we=Ee>4||Ee===0?Rw.ceil(we):Rw(we),we=Xoe.offset(we,(H.V-1)*7),H.y=we.getUTCFullYear(),H.m=we.getUTCMonth(),H.d=we.getUTCDate()+(H.w+6)%7):(we=M$(v1(H.y,0,1)),Ee=we.getDay(),we=Ee>4||Ee===0?Iw.ceil(we):Iw(we),we=Foe.offset(we,(H.V-1)*7),H.y=we.getFullYear(),H.m=we.getMonth(),H.d=we.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),Ee="Z"in H?A$(v1(H.y,0,1)).getUTCDay():M$(v1(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(Ee+5)%7:H.w+H.U*7-(Ee+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,A$(H)):M$(H)}}function A(ae,ye,le,H){for(var Me=0,we=ye.length,Ee=le.length,ge,qe;Me<we;){if(H>=Ee)return-1;if(ge=ye.charCodeAt(Me++),ge===37){if(ge=ye.charAt(Me++),qe=_[ge in jX?ye.charAt(Me++):ge],!qe||(H=qe(ae,le,H))<0)return-1}else if(ge!=le.charCodeAt(H++))return-1}return H}function M(ae,ye,le){var H=c.exec(ye.slice(le));return H?(ae.p=u.get(H[0].toLowerCase()),le+H[0].length):-1}function E(ae,ye,le){var H=h.exec(ye.slice(le));return H?(ae.w=p.get(H[0].toLowerCase()),le+H[0].length):-1}function P(ae,ye,le){var H=d.exec(ye.slice(le));return H?(ae.w=f.get(H[0].toLowerCase()),le+H[0].length):-1}function N(ae,ye,le){var H=m.exec(ye.slice(le));return H?(ae.m=y.get(H[0].toLowerCase()),le+H[0].length):-1}function F(ae,ye,le){var H=v.exec(ye.slice(le));return H?(ae.m=g.get(H[0].toLowerCase()),le+H[0].length):-1}function $(ae,ye,le){return A(ae,e,ye,le)}function O(ae,ye,le){return A(ae,n,ye,le)}function z(ae,ye,le){return A(ae,r,ye,le)}function X(ae){return o[ae.getDay()]}function D(ae){return s[ae.getDay()]}function B(ae){return l[ae.getMonth()]}function V(ae){return a[ae.getMonth()]}function W(ae){return i[+(ae.getHours()>=12)]}function j(ae){return 1+~~(ae.getMonth()/3)}function J(ae){return o[ae.getUTCDay()]}function Q(ae){return s[ae.getUTCDay()]}function te(ae){return l[ae.getUTCMonth()]}function re(ae){return a[ae.getUTCMonth()]}function se(ae){return i[+(ae.getUTCHours()>=12)]}function fe(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var ye=C(ae+="",x);return ye.toString=function(){return ae},ye},parse:function(ae){var ye=T(ae+="",!1);return ye.toString=function(){return ae},ye},utcFormat:function(ae){var ye=C(ae+="",S);return ye.toString=function(){return ae},ye},utcParse:function(ae){var ye=T(ae+="",!0);return ye.toString=function(){return ae},ye}}}var jX={"-":"",_:" ",0:"0"},Fs=/^\s*\d+/,Qze=/^%/,e6e=/[\\^$*+?|[\]().{}]/g;function br(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function t6e(t){return t.replace(e6e,"\\$&")}function y1(t){return new RegExp("^(?:"+t.map(t6e).join("|")+")","i")}function x1(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function n6e(t,e,n){var r=Fs.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function r6e(t,e,n){var r=Fs.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function i6e(t,e,n){var r=Fs.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function s6e(t,e,n){var r=Fs.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function o6e(t,e,n){var r=Fs.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function XX(t,e,n){var r=Fs.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qX(t,e,n){var r=Fs.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function a6e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function l6e(t,e,n){var r=Fs.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function c6e(t,e,n){var r=Fs.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function YX(t,e,n){var r=Fs.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function u6e(t,e,n){var r=Fs.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function KX(t,e,n){var r=Fs.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function d6e(t,e,n){var r=Fs.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function f6e(t,e,n){var r=Fs.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function h6e(t,e,n){var r=Fs.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function p6e(t,e,n){var r=Fs.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function m6e(t,e,n){var r=Qze.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function g6e(t,e,n){var r=Fs.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function v6e(t,e,n){var r=Fs.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ZX(t,e){return br(t.getDate(),e,2)}function y6e(t,e){return br(t.getHours(),e,2)}function x6e(t,e){return br(t.getHours()%12||12,e,2)}function b6e(t,e){return br(1+Foe.count(cy(t),t),e,3)}function Qoe(t,e){return br(t.getMilliseconds(),e,3)}function w6e(t,e){return Qoe(t,e)+"000"}function S6e(t,e){return br(t.getMonth()+1,e,2)}function _6e(t,e){return br(t.getMinutes(),e,2)}function C6e(t,e){return br(t.getSeconds(),e,2)}function T6e(t){var e=t.getDay();return e===0?7:e}function E6e(t,e){return br(_A.count(cy(t)-1,t),e,2)}function eae(t){var e=t.getDay();return e>=4||e===0?Qm(t):Qm.ceil(t)}function M6e(t,e){return t=eae(t),br(Qm.count(cy(t),t)+(cy(t).getDay()===4),e,2)}function A6e(t){return t.getDay()}function k6e(t,e){return br(Iw.count(cy(t)-1,t),e,2)}function I6e(t,e){return br(t.getFullYear()%100,e,2)}function R6e(t,e){return t=eae(t),br(t.getFullYear()%100,e,2)}function P6e(t,e){return br(t.getFullYear()%1e4,e,4)}function N6e(t,e){var n=t.getDay();return t=n>=4||n===0?Qm(t):Qm.ceil(t),br(t.getFullYear()%1e4,e,4)}function $6e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+br(e/60|0,"0",2)+br(e%60,"0",2)}function JX(t,e){return br(t.getUTCDate(),e,2)}function D6e(t,e){return br(t.getUTCHours(),e,2)}function L6e(t,e){return br(t.getUTCHours()%12||12,e,2)}function O6e(t,e){return br(1+Xoe.count(uy(t),t),e,3)}function tae(t,e){return br(t.getUTCMilliseconds(),e,3)}function F6e(t,e){return tae(t,e)+"000"}function B6e(t,e){return br(t.getUTCMonth()+1,e,2)}function U6e(t,e){return br(t.getUTCMinutes(),e,2)}function z6e(t,e){return br(t.getUTCSeconds(),e,2)}function V6e(t){var e=t.getUTCDay();return e===0?7:e}function W6e(t,e){return br(CA.count(uy(t)-1,t),e,2)}function nae(t){var e=t.getUTCDay();return e>=4||e===0?eg(t):eg.ceil(t)}function G6e(t,e){return t=nae(t),br(eg.count(uy(t),t)+(uy(t).getUTCDay()===4),e,2)}function H6e(t){return t.getUTCDay()}function j6e(t,e){return br(Rw.count(uy(t)-1,t),e,2)}function X6e(t,e){return br(t.getUTCFullYear()%100,e,2)}function q6e(t,e){return t=nae(t),br(t.getUTCFullYear()%100,e,2)}function Y6e(t,e){return br(t.getUTCFullYear()%1e4,e,4)}function K6e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?eg(t):eg.ceil(t),br(t.getUTCFullYear()%1e4,e,4)}function Z6e(){return"+0000"}function QX(){return"%"}function eq(t){return+t}function tq(t){return Math.floor(+t/1e3)}var g0,eR,rae,iae,sae;J6e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function J6e(t){return g0=Jze(t),eR=g0.format,rae=g0.parse,iae=g0.utcFormat,sae=g0.utcParse,g0}function Q6e(t){return new Date(t)}function e8e(t){return t instanceof Date?+t:+new Date(+t)}function XU(t,e,n,r,i,s,o,a,l,c){var u=soe(),d=u.invert,f=u.domain,h=c(".%L"),p=c(":%S"),v=c("%I:%M"),g=c("%I %p"),m=c("%a %d"),y=c("%b %d"),x=c("%B"),S=c("%Y");function _(C){return(l(C)<C?h:a(C)<C?p:o(C)<C?v:s(C)<C?g:r(C)<C?i(C)<C?m:y:n(C)<C?x:S)(C)}return u.invert=function(C){return new Date(d(C))},u.domain=function(C){return arguments.length?f(Array.from(C,e8e)):f().map(Q6e)},u.ticks=function(C){var T=f();return t(T[0],T[T.length-1],C??10)},u.tickFormat=function(C,T){return T==null?_:c(T)},u.nice=function(C){var T=f();return(!C||typeof C.range!="function")&&(C=e(T[0],T[T.length-1],C??10)),C?f(loe(T,C)):u},u.copy=function(){return QI(u,XU(t,e,n,r,i,s,o,a,l,c))},u}function t8e(){return qh.apply(XU(Gze,Hze,woe,boe,zU,yoe,goe,poe,uv,eR).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function n8e(){return qh.apply(XU(Vze,Wze,Ioe,koe,WU,Moe,Toe,_oe,uv,iae).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function r8e(){var t=0,e=1,n,r,i,s,o=ku,a=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(s(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(o=d,c):o};function u(d){return function(f){var h,p;return arguments.length?([h,p]=f,o=d(h,p),c):[o(0),o(1)]}}return c.range=u(Qy),c.rangeRound=u(OU),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return s=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function oae(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function aae(){var t=r2(r8e()(ku));return t.copy=function(){return oae(t,aae())},eoe.apply(t,arguments)}function i8e(){var t=0,e=.5,n=1,r=1,i,s,o,a,l,c=ku,u,d=!1,f;function h(v){return isNaN(v=+v)?f:(v=.5+((v=+u(v))-s)*(r*v<r*s?a:l),c(d?Math.max(0,Math.min(1,v)):v))}h.domain=function(v){return arguments.length?([t,e,n]=v,i=u(t=+t),s=u(e=+e),o=u(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[t,e,n]},h.clamp=function(v){return arguments.length?(d=!!v,h):d},h.interpolator=function(v){return arguments.length?(c=v,h):c};function p(v){return function(g){var m,y,x;return arguments.length?([m,y,x]=g,c=ize(v,[m,y,x]),h):[c(0),c(.5),c(1)]}}return h.range=p(Qy),h.rangeRound=p(OU),h.unknown=function(v){return arguments.length?(f=v,h):f},function(v){return u=v,i=v(t),s=v(e),o=v(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function s4(){var t=r2(i8e()(ku));return t.copy=function(){return oae(t,s4())},eoe.apply(t,arguments)}function nr(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const s8e=nr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),o8e=nr("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),a8e=nr("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),l8e=nr("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),c8e=nr("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),u8e=nr("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),d8e=nr("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),f8e=nr("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),lae=nr("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Vr=t=>yUe(t[t.length-1]);var qU=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(nr);Vr(qU);var YU=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(nr);Vr(YU);var KU=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(nr);Vr(KU);var ZU=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(nr);Vr(ZU);var JU=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(nr);Vr(JU);var QU=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(nr);Vr(QU);var ez=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(nr);Vr(ez);var tz=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(nr);Vr(tz);var nz=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(nr);Vr(nz);var rz=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(nr);Vr(rz);var iz=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(nr);Vr(iz);var sz=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(nr);Vr(sz);var oz=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(nr);Vr(oz);var az=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(nr);Vr(az);var lz=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(nr);Vr(lz);var cz=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(nr);Vr(cz);var uz=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(nr);Vr(uz);var dz=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(nr);Vr(dz);var fz=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(nr);Vr(fz);var hz=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(nr);Vr(hz);var pz=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(nr);Vr(pz);var mz=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(nr);Vr(mz);var gz=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(nr);Vr(gz);var vz=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(nr);Vr(vz);var yz=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(nr);Vr(yz);var xz=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(nr);Vr(xz);var bz=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(nr);Vr(bz);var h8e="__lodash_hash_undefined__";function p8e(t){return this.__data__.set(t,h8e),this}var m8e=p8e;function g8e(t){return this.__data__.has(t)}var v8e=g8e,y8e=xU,x8e=m8e,b8e=v8e;function TA(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new y8e;++e<n;)this.add(t[e])}TA.prototype.add=TA.prototype.push=x8e;TA.prototype.has=b8e;var wz=TA;function w8e(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var S8e=w8e;function _8e(t){return t!==t}var C8e=_8e;function T8e(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var E8e=T8e,M8e=S8e,A8e=C8e,k8e=E8e;function I8e(t,e,n){return e===e?k8e(t,e,n):M8e(t,A8e,n)}var R8e=I8e,P8e=R8e;function N8e(t,e){var n=t==null?0:t.length;return!!n&&P8e(t,e,0)>-1}var cae=N8e;function $8e(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var uae=$8e;function D8e(t,e){return t.has(e)}var Sz=D8e,L8e=wz,O8e=cae,F8e=uae,B8e=JI,U8e=ZS,z8e=Sz,V8e=200;function W8e(t,e,n,r){var i=-1,s=O8e,o=!0,a=t.length,l=[],c=e.length;if(!a)return l;n&&(e=B8e(e,U8e(n))),r?(s=F8e,o=!1):e.length>=V8e&&(s=z8e,o=!1,e=new L8e(e));e:for(;++i<a;){var u=t[i],d=n==null?u:n(u);if(u=r||u!==0?u:0,o&&d===d){for(var f=c;f--;)if(e[f]===d)continue e;l.push(u)}else s(e,d,r)||l.push(u)}return l}var G8e=W8e,H8e=G8e,j8e=kU,X8e=$se,q8e=j8e(function(t,e){return X8e(t)?H8e(t,e):[]}),Y8e=q8e;const dae=ls(Y8e);var o4=Math.PI,a4=2*o4,jp=1e-6,K8e=a4-jp;function l4(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function tR(){return new l4}l4.prototype=tR.prototype={constructor:l4,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var s=this._x1,o=this._y1,a=n-t,l=r-e,c=s-t,u=o-e,d=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>jp)if(!(Math.abs(u*a-l*c)>jp)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var f=n-s,h=r-o,p=a*a+l*l,v=f*f+h*h,g=Math.sqrt(p),m=Math.sqrt(d),y=i*Math.tan((o4-Math.acos((p+d-v)/(2*g*m)))/2),x=y/m,S=y/g;Math.abs(x-1)>jp&&(this._+="L"+(t+x*c)+","+(e+x*u)),this._+="A"+i+","+i+",0,0,"+ +(u*f>c*h)+","+(this._x1=t+S*a)+","+(this._y1=e+S*l)}},arc:function(t,e,n,r,i,s){t=+t,e=+e,n=+n,s=!!s;var o=n*Math.cos(r),a=n*Math.sin(r),l=t+o,c=e+a,u=1^s,d=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>jp||Math.abs(this._y1-c)>jp)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%a4+a4),d>K8e?this._+="A"+n+","+n+",0,1,"+u+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>jp&&(this._+="A"+n+","+n+",0,"+ +(d>=o4)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function gr(t){return function(){return t}}var nq=Math.abs,ho=Math.atan2,Mp=Math.cos,Z8e=Math.max,k$=Math.min,du=Math.sin,dv=Math.sqrt,xo=1e-12,Pw=Math.PI,EA=Pw/2,tM=2*Pw;function J8e(t){return t>1?0:t<-1?Pw:Math.acos(t)}function rq(t){return t>=1?EA:t<=-1?-EA:Math.asin(t)}function Q8e(t){return t.innerRadius}function eVe(t){return t.outerRadius}function tVe(t){return t.startAngle}function nVe(t){return t.endAngle}function rVe(t){return t&&t.padAngle}function iVe(t,e,n,r,i,s,o,a){var l=n-t,c=r-e,u=o-i,d=a-s,f=d*l-u*c;if(!(f*f<xo))return f=(u*(e-s)-d*(t-i))/f,[t+f*l,e+f*c]}function fT(t,e,n,r,i,s,o){var a=t-n,l=e-r,c=(o?s:-s)/dv(a*a+l*l),u=c*l,d=-c*a,f=t+u,h=e+d,p=n+u,v=r+d,g=(f+p)/2,m=(h+v)/2,y=p-f,x=v-h,S=y*y+x*x,_=i-s,C=f*v-p*h,T=(x<0?-1:1)*dv(Z8e(0,_*_*S-C*C)),A=(C*x-y*T)/S,M=(-C*y-x*T)/S,E=(C*x+y*T)/S,P=(-C*y+x*T)/S,N=A-g,F=M-m,$=E-g,O=P-m;return N*N+F*F>$*$+O*O&&(A=E,M=P),{cx:A,cy:M,x01:-u,y01:-d,x11:A*(i/_-1),y11:M*(i/_-1)}}function sVe(){var t=Q8e,e=eVe,n=gr(0),r=null,i=tVe,s=nVe,o=rVe,a=null;function l(){var c,u,d=+t.apply(this,arguments),f=+e.apply(this,arguments),h=i.apply(this,arguments)-EA,p=s.apply(this,arguments)-EA,v=nq(p-h),g=p>h;if(a||(a=c=tR()),f<d&&(u=f,f=d,d=u),!(f>xo))a.moveTo(0,0);else if(v>tM-xo)a.moveTo(f*Mp(h),f*du(h)),a.arc(0,0,f,h,p,!g),d>xo&&(a.moveTo(d*Mp(p),d*du(p)),a.arc(0,0,d,p,h,g));else{var m=h,y=p,x=h,S=p,_=v,C=v,T=o.apply(this,arguments)/2,A=T>xo&&(r?+r.apply(this,arguments):dv(d*d+f*f)),M=k$(nq(f-d)/2,+n.apply(this,arguments)),E=M,P=M,N,F;if(A>xo){var $=rq(A/d*du(T)),O=rq(A/f*du(T));(_-=$*2)>xo?($*=g?1:-1,x+=$,S-=$):(_=0,x=S=(h+p)/2),(C-=O*2)>xo?(O*=g?1:-1,m+=O,y-=O):(C=0,m=y=(h+p)/2)}var z=f*Mp(m),X=f*du(m),D=d*Mp(S),B=d*du(S);if(M>xo){var V=f*Mp(y),W=f*du(y),j=d*Mp(x),J=d*du(x),Q;if(v<Pw&&(Q=iVe(z,X,j,J,V,W,D,B))){var te=z-Q[0],re=X-Q[1],se=V-Q[0],fe=W-Q[1],ae=1/du(J8e((te*se+re*fe)/(dv(te*te+re*re)*dv(se*se+fe*fe)))/2),ye=dv(Q[0]*Q[0]+Q[1]*Q[1]);E=k$(M,(d-ye)/(ae-1)),P=k$(M,(f-ye)/(ae+1))}}C>xo?P>xo?(N=fT(j,J,z,X,f,P,g),F=fT(V,W,D,B,f,P,g),a.moveTo(N.cx+N.x01,N.cy+N.y01),P<M?a.arc(N.cx,N.cy,P,ho(N.y01,N.x01),ho(F.y01,F.x01),!g):(a.arc(N.cx,N.cy,P,ho(N.y01,N.x01),ho(N.y11,N.x11),!g),a.arc(0,0,f,ho(N.cy+N.y11,N.cx+N.x11),ho(F.cy+F.y11,F.cx+F.x11),!g),a.arc(F.cx,F.cy,P,ho(F.y11,F.x11),ho(F.y01,F.x01),!g))):(a.moveTo(z,X),a.arc(0,0,f,m,y,!g)):a.moveTo(z,X),!(d>xo)||!(_>xo)?a.lineTo(D,B):E>xo?(N=fT(D,B,V,W,d,-E,g),F=fT(z,X,j,J,d,-E,g),a.lineTo(N.cx+N.x01,N.cy+N.y01),E<M?a.arc(N.cx,N.cy,E,ho(N.y01,N.x01),ho(F.y01,F.x01),!g):(a.arc(N.cx,N.cy,E,ho(N.y01,N.x01),ho(N.y11,N.x11),!g),a.arc(0,0,d,ho(N.cy+N.y11,N.cx+N.x11),ho(F.cy+F.y11,F.cx+F.x11),g),a.arc(F.cx,F.cy,E,ho(F.y11,F.x11),ho(F.y01,F.x01),!g))):a.arc(0,0,d,S,x,g)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,u=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Pw/2;return[Mp(u)*c,du(u)*c]},l.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:gr(+c),l):t},l.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:gr(+c),l):e},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:gr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:gr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:gr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:gr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:gr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function fae(t){this._context=t}fae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function _z(t){return new fae(t)}function hae(t){return t[0]}function pae(t){return t[1]}function mae(){var t=hae,e=pae,n=gr(!0),r=null,i=_z,s=null;function o(a){var l,c=a.length,u,d=!1,f;for(r==null&&(s=i(f=tR())),l=0;l<=c;++l)!(l<c&&n(u=a[l],l,a))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(u,l,a),+e(u,l,a));if(f)return s=null,f+""||null}return o.x=function(a){return arguments.length?(t=typeof a=="function"?a:gr(+a),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:gr(+a),o):e},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:gr(!!a),o):n},o.curve=function(a){return arguments.length?(i=a,r!=null&&(s=i(r)),o):i},o.context=function(a){return arguments.length?(a==null?r=s=null:s=i(r=a),o):r},o}function oVe(){var t=hae,e=null,n=gr(0),r=pae,i=gr(!0),s=null,o=_z,a=null;function l(u){var d,f,h,p=u.length,v,g=!1,m,y=new Array(p),x=new Array(p);for(s==null&&(a=o(m=tR())),d=0;d<=p;++d){if(!(d<p&&i(v=u[d],d,u))===g)if(g=!g)f=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=d-1;h>=f;--h)a.point(y[h],x[h]);a.lineEnd(),a.areaEnd()}g&&(y[d]=+t(v,d,u),x[d]=+n(v,d,u),a.point(e?+e(v,d,u):y[d],r?+r(v,d,u):x[d]))}if(m)return a=null,m+""||null}function c(){return mae().defined(i).curve(o).context(s)}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:gr(+u),e=null,l):t},l.x0=function(u){return arguments.length?(t=typeof u=="function"?u:gr(+u),l):t},l.x1=function(u){return arguments.length?(e=u==null?null:typeof u=="function"?u:gr(+u),l):e},l.y=function(u){return arguments.length?(n=typeof u=="function"?u:gr(+u),r=null,l):n},l.y0=function(u){return arguments.length?(n=typeof u=="function"?u:gr(+u),l):n},l.y1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:gr(+u),l):r},l.lineX0=l.lineY0=function(){return c().x(t).y(n)},l.lineY1=function(){return c().x(t).y(r)},l.lineX1=function(){return c().x(e).y(n)},l.defined=function(u){return arguments.length?(i=typeof u=="function"?u:gr(!!u),l):i},l.curve=function(u){return arguments.length?(o=u,s!=null&&(a=o(s)),l):o},l.context=function(u){return arguments.length?(u==null?s=a=null:a=o(s=u),l):s},l}function aVe(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function lVe(t){return t}function cVe(){var t=lVe,e=aVe,n=null,r=gr(0),i=gr(tM),s=gr(0);function o(a){var l,c=a.length,u,d,f=0,h=new Array(c),p=new Array(c),v=+r.apply(this,arguments),g=Math.min(tM,Math.max(-tM,i.apply(this,arguments)-v)),m,y=Math.min(Math.abs(g)/c,s.apply(this,arguments)),x=y*(g<0?-1:1),S;for(l=0;l<c;++l)(S=p[h[l]=l]=+t(a[l],l,a))>0&&(f+=S);for(e!=null?h.sort(function(_,C){return e(p[_],p[C])}):n!=null&&h.sort(function(_,C){return n(a[_],a[C])}),l=0,d=f?(g-c*x)/f:0;l<c;++l,v=m)u=h[l],S=p[u],m=v+(S>0?S*d:0)+x,p[u]={data:a[u],index:l,value:S,startAngle:v,endAngle:m,padAngle:y};return p}return o.value=function(a){return arguments.length?(t=typeof a=="function"?a:gr(+a),o):t},o.sortValues=function(a){return arguments.length?(e=a,n=null,o):e},o.sort=function(a){return arguments.length?(n=a,e=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:gr(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:gr(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:gr(+a),o):s},o}var iq=Array.prototype.slice;function Eh(){}function MA(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function nR(t){this._context=t}nR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:MA(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:MA(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function uVe(t){return new nR(t)}function gae(t){this._context=t}gae.prototype={areaStart:Eh,areaEnd:Eh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:MA(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function dVe(t){return new gae(t)}function vae(t){this._context=t}vae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:MA(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function fVe(t){return new vae(t)}function yae(t,e){this._basis=new nR(t),this._beta=e}yae.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(r+l*s),this._beta*e[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const hVe=function t(e){function n(r){return e===1?new nR(r):new yae(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function AA(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Cz(t,e){this._context=t,this._k=(1-e)/6}Cz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:AA(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:AA(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const pVe=function t(e){function n(r){return new Cz(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Tz(t,e){this._context=t,this._k=(1-e)/6}Tz.prototype={areaStart:Eh,areaEnd:Eh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:AA(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const mVe=function t(e){function n(r){return new Tz(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Ez(t,e){this._context=t,this._k=(1-e)/6}Ez.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:AA(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const gVe=function t(e){function n(r){return new Ez(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Mz(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>xo){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>xo){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function xae(t,e){this._context=t,this._alpha=e}xae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Mz(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const vVe=function t(e){function n(r){return e?new xae(r,e):new Cz(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function bae(t,e){this._context=t,this._alpha=e}bae.prototype={areaStart:Eh,areaEnd:Eh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Mz(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const yVe=function t(e){function n(r){return e?new bae(r,e):new Tz(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function wae(t,e){this._context=t,this._alpha=e}wae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Mz(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const xVe=function t(e){function n(r){return e?new wae(r,e):new Ez(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Sae(t){this._context=t}Sae.prototype={areaStart:Eh,areaEnd:Eh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function bVe(t){return new Sae(t)}function sq(t){return t<0?-1:1}function oq(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(sq(s)+sq(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function aq(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function I$(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function kA(t){this._context=t}kA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:I$(this,this._t0,aq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,I$(this,aq(this,n=oq(this,t,e)),n);break;default:I$(this,this._t0,n=oq(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function _ae(t){this._context=new Cae(t)}(_ae.prototype=Object.create(kA.prototype)).point=function(t,e){kA.prototype.point.call(this,e,t)};function Cae(t){this._context=t}Cae.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function wVe(t){return new kA(t)}function SVe(t){return new _ae(t)}function Tae(t){this._context=t}Tae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=lq(t),i=lq(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function lq(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function _Ve(t){return new Tae(t)}function rR(t,e){this._context=t,this._t=e}rR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function CVe(t){return new rR(t,.5)}function TVe(t){return new rR(t,0)}function EVe(t){return new rR(t,1)}function dy(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,a=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function fy(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function MVe(t,e){return t[e]}function Eae(){var t=gr([]),e=fy,n=dy,r=MVe;function i(s){var o=t.apply(this,arguments),a,l=s.length,c=o.length,u=new Array(c),d;for(a=0;a<c;++a){for(var f=o[a],h=u[a]=new Array(l),p=0,v;p<l;++p)h[p]=v=[0,+r(s[p],f,p,s)],v.data=s[p];h.key=f}for(a=0,d=e(u);a<c;++a)u[d[a]].index=a;return n(u,d),u}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:gr(iq.call(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:gr(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?fy:typeof s=="function"?s:gr(iq.call(s)),i):e},i.offset=function(s){return arguments.length?(n=s??dy,i):n},i}function AVe(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}dy(t,e)}}function Mae(t,e){if((l=t.length)>0)for(var n,r=0,i,s,o,a,l,c=t[e[0]].length;r<c;++r)for(o=a=0,n=0;n<l;++n)(s=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=o,i[1]=o+=s):s<0?(i[1]=a,i[0]=a+=s):(i[0]=0,i[1]=s)}function kVe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,a=0;o<i;++o)a+=t[o][n][1]||0;r[n][1]+=r[n][0]=-a/2}dy(t,e)}}function IVe(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var a=0,l=0,c=0;a<o;++a){for(var u=t[e[a]],d=u[r][1]||0,f=u[r-1][1]||0,h=(d-f)/2,p=0;p<a;++p){var v=t[e[p]],g=v[r][1]||0,m=v[r-1][1]||0;h+=g-m}l+=d,c+=h*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,dy(t,e)}}function RVe(t){var e=t.map(PVe);return fy(t).sort(function(n,r){return e[n]-e[r]})}function PVe(t){for(var e=-1,n=0,r=t.length,i,s=-1/0;++e<r;)(i=+t[e][1])>s&&(s=i,n=e);return n}function Aae(t){var e=t.map(kae);return fy(t).sort(function(n,r){return e[n]-e[r]})}function kae(t){for(var e=0,n=-1,r=t.length,i;++n<r;)(i=+t[n][1])&&(e+=i);return e}function NVe(t){return Aae(t).reverse()}function $Ve(t){var e=t.length,n,r,i=t.map(kae),s=RVe(t),o=0,a=0,l=[],c=[];for(n=0;n<e;++n)r=s[n],o<a?(o+=i[r],l.push(r)):(a+=i[r],c.push(r));return c.reverse().concat(l)}function DVe(t){return fy(t).reverse()}var LVe=QS,OVe=Hse,FVe=Zy;function BVe(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var o=e[r],a=LVe(t,o);n(a,o)&&OVe(s,FVe(o,t),a)}return s}var UVe=BVe;function zVe(t,e){return t!=null&&e in Object(t)}var VVe=zVe,WVe=Zy,GVe=jI,HVe=Da,jVe=YI,XVe=CU,qVe=Jy;function YVe(t,e,n){e=WVe(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=qVe(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&XVe(i)&&jVe(o,i)&&(HVe(t)||GVe(t)))}var KVe=YVe,ZVe=VVe,JVe=KVe;function QVe(t,e){return t!=null&&JVe(t,e,ZVe)}var Iae=QVe,eWe=UVe,tWe=Iae;function nWe(t,e){return eWe(t,e,function(n,r){return tWe(t,r)})}var rWe=nWe;function iWe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Az=iWe,cq=Hy,sWe=jI,oWe=Da,uq=cq?cq.isConcatSpreadable:void 0;function aWe(t){return oWe(t)||sWe(t)||!!(uq&&t&&t[uq])}var lWe=aWe,cWe=Az,uWe=lWe;function Rae(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=uWe),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?Rae(a,e-1,n,r,i):cWe(i,a):r||(i[i.length]=a)}return i}var Pae=Rae,dWe=Pae;function fWe(t){var e=t==null?0:t.length;return e?dWe(t,1):[]}var hWe=fWe,pWe=hWe,mWe=Bse,gWe=Use;function vWe(t){return gWe(mWe(t,void 0,pWe),t+"")}var Nae=vWe,yWe=rWe,xWe=Nae,bWe=xWe(function(t,e){return t==null?{}:yWe(t,e)}),wWe=bWe;const SWe=ls(wWe);function _We(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var CWe=_We,TWe=wz,EWe=CWe,MWe=Sz,AWe=1,kWe=2;function IWe(t,e,n,r,i,s){var o=n&AWe,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,h=n&kWe?new TWe:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var p=t[d],v=e[d];if(r)var g=o?r(v,p,d,e,t,s):r(p,v,d,t,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(h){if(!EWe(e,function(m,y){if(!MWe(h,y)&&(p===m||i(p,m,n,r,s)))return h.push(y)})){f=!1;break}}else if(!(p===v||i(p,v,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var $ae=IWe;function RWe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var PWe=RWe;function NWe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var kz=NWe,dq=Hy,fq=Ase,$We=KS,DWe=$ae,LWe=PWe,OWe=kz,FWe=1,BWe=2,UWe="[object Boolean]",zWe="[object Date]",VWe="[object Error]",WWe="[object Map]",GWe="[object Number]",HWe="[object RegExp]",jWe="[object Set]",XWe="[object String]",qWe="[object Symbol]",YWe="[object ArrayBuffer]",KWe="[object DataView]",hq=dq?dq.prototype:void 0,R$=hq?hq.valueOf:void 0;function ZWe(t,e,n,r,i,s,o){switch(n){case KWe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case YWe:return!(t.byteLength!=e.byteLength||!s(new fq(t),new fq(e)));case UWe:case zWe:case GWe:return $We(+t,+e);case VWe:return t.name==e.name&&t.message==e.message;case HWe:case XWe:return t==e+"";case WWe:var a=LWe;case jWe:var l=r&FWe;if(a||(a=OWe),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=BWe,o.set(t,e);var u=DWe(a(t),a(e),r,i,s,o);return o.delete(t),u;case qWe:if(R$)return R$.call(t)==R$.call(e)}return!1}var JWe=ZWe,QWe=Az,e7e=Da;function t7e(t,e,n){var r=e(t);return e7e(t)?r:QWe(r,n(t))}var Dae=t7e;function n7e(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}var Lae=n7e;function r7e(){return[]}var Oae=r7e,i7e=Lae,s7e=Oae,o7e=Object.prototype,a7e=o7e.propertyIsEnumerable,pq=Object.getOwnPropertySymbols,l7e=pq?function(t){return t==null?[]:(t=Object(t),i7e(pq(t),function(e){return a7e.call(t,e)}))}:s7e,Iz=l7e,c7e=Rse,u7e=c7e(Object.keys,Object),d7e=u7e,f7e=_U,h7e=d7e,p7e=Object.prototype,m7e=p7e.hasOwnProperty;function g7e(t){if(!f7e(t))return h7e(t);var e=[];for(var n in Object(t))m7e.call(t,n)&&n!="constructor"&&e.push(n);return e}var v7e=g7e,y7e=Ose,x7e=v7e,b7e=Yy;function w7e(t){return b7e(t)?y7e(t):x7e(t)}var s2=w7e,S7e=Dae,_7e=Iz,C7e=s2;function T7e(t){return S7e(t,C7e,_7e)}var Fae=T7e,mq=Fae,E7e=1,M7e=Object.prototype,A7e=M7e.hasOwnProperty;function k7e(t,e,n,r,i,s){var o=n&E7e,a=mq(t),l=a.length,c=mq(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in e:A7e.call(e,f)))return!1}var h=s.get(t),p=s.get(e);if(h&&p)return h==e&&p==t;var v=!0;s.set(t,e),s.set(e,t);for(var g=o;++d<l;){f=a[d];var m=t[f],y=e[f];if(r)var x=o?r(y,m,f,e,t,s):r(m,y,f,t,e,s);if(!(x===void 0?m===y||i(m,y,n,r,s):x)){v=!1;break}g||(g=f=="constructor")}if(v&&!g){var S=t.constructor,_=e.constructor;S!=_&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof _=="function"&&_ instanceof _)&&(v=!1)}return s.delete(t),s.delete(e),v}var I7e=k7e,R7e=Tg,P7e=od,N7e=R7e(P7e,"DataView"),$7e=N7e,D7e=Tg,L7e=od,O7e=D7e(L7e,"Promise"),F7e=O7e,B7e=Tg,U7e=od,z7e=B7e(U7e,"Set"),Bae=z7e,V7e=Tg,W7e=od,G7e=V7e(W7e,"WeakMap"),H7e=G7e,c4=$7e,u4=yU,d4=F7e,f4=Bae,h4=H7e,Uae=Xh,ex=_se,gq="[object Map]",j7e="[object Object]",vq="[object Promise]",yq="[object Set]",xq="[object WeakMap]",bq="[object DataView]",X7e=ex(c4),q7e=ex(u4),Y7e=ex(d4),K7e=ex(f4),Z7e=ex(h4),Xp=Uae;(c4&&Xp(new c4(new ArrayBuffer(1)))!=bq||u4&&Xp(new u4)!=gq||d4&&Xp(d4.resolve())!=vq||f4&&Xp(new f4)!=yq||h4&&Xp(new h4)!=xq)&&(Xp=function(t){var e=Uae(t),n=e==j7e?t.constructor:void 0,r=n?ex(n):"";if(r)switch(r){case X7e:return bq;case q7e:return gq;case Y7e:return vq;case K7e:return yq;case Z7e:return xq}return e});var iR=Xp,P$=HI,J7e=$ae,Q7e=JWe,eGe=I7e,wq=iR,Sq=Da,_q=XI,tGe=MU,nGe=1,Cq="[object Arguments]",Tq="[object Array]",hT="[object Object]",rGe=Object.prototype,Eq=rGe.hasOwnProperty;function iGe(t,e,n,r,i,s){var o=Sq(t),a=Sq(e),l=o?Tq:wq(t),c=a?Tq:wq(e);l=l==Cq?hT:l,c=c==Cq?hT:c;var u=l==hT,d=c==hT,f=l==c;if(f&&_q(t)){if(!_q(e))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new P$),o||tGe(t)?J7e(t,e,n,r,i,s):Q7e(t,e,l,n,r,i,s);if(!(n&nGe)){var h=u&&Eq.call(t,"__wrapped__"),p=d&&Eq.call(e,"__wrapped__");if(h||p){var v=h?t.value():t,g=p?e.value():e;return s||(s=new P$),i(v,g,n,r,s)}}return f?(s||(s=new P$),eGe(t,e,n,r,i,s)):!1}var sGe=iGe,oGe=sGe,Mq=Qc;function zae(t,e,n,r,i){return t===e?!0:t==null||e==null||!Mq(t)&&!Mq(e)?t!==t&&e!==e:oGe(t,e,n,r,zae,i)}var Rz=zae,aGe=Rz;function lGe(t,e){return aGe(t,e)}var cGe=lGe;const uGe=ls(cGe);function $s(){return $s=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$s.apply(this,arguments)}function Vae(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var Mh={fill:ve.string,fontSize:ve.number,fontFamily:ve.string},dGe=ve.shape({domain:ve.shape({line:ve.shape({stroke:ve.string.isRequired,strokeWidth:ve.number.isRequired,strokeDasharray:ve.string}).isRequired}).isRequired,ticks:ve.shape({line:ve.shape({stroke:ve.string.isRequired,strokeWidth:ve.number.isRequired,strokeDasharray:ve.string}).isRequired,text:ve.shape($s({},Mh)).isRequired}).isRequired,legend:ve.shape({text:ve.shape($s({},Mh)).isRequired}).isRequired}),fGe=ve.shape({line:ve.shape({stroke:ve.string.isRequired,strokeWidth:ve.number.isRequired,strokeDasharray:ve.string}).isRequired}),hGe=ve.shape({hidden:ve.shape({symbol:ve.shape({fill:ve.string.isRequired,opacity:ve.number}).isRequired,text:ve.shape($s({},Mh,{opacity:ve.number})).isRequired}).isRequired,text:ve.shape($s({},Mh)).isRequired}),pGe=ve.shape({text:ve.shape($s({},Mh)).isRequired}),mGe=ve.shape({text:ve.shape($s({},Mh)).isRequired}),gGe=ve.shape({text:ve.shape($s({},Mh)).isRequired}),vGe=ve.shape({line:ve.shape({stroke:ve.string.isRequired,strokeWidth:ve.number.isRequired,strokeDasharray:ve.string}).isRequired}),yGe=ve.shape({text:ve.shape($s({},Mh,{outlineWidth:ve.number.isRequired,outlineColor:ve.string.isRequired})).isRequired,link:ve.shape({stroke:ve.string.isRequired,strokeWidth:ve.number.isRequired,outlineWidth:ve.number.isRequired,outlineColor:ve.string.isRequired}).isRequired,outline:ve.shape({stroke:ve.string.isRequired,strokeWidth:ve.number.isRequired,outlineWidth:ve.number.isRequired,outlineColor:ve.string.isRequired}).isRequired,symbol:ve.shape({fill:ve.string.isRequired,outlineWidth:ve.number.isRequired,outlineColor:ve.string.isRequired}).isRequired});ve.shape({background:ve.string.isRequired,fontFamily:ve.string.isRequired,fontSize:ve.number.isRequired,textColor:ve.string.isRequired,axis:dGe.isRequired,grid:fGe.isRequired,legends:hGe.isRequired,labels:pGe.isRequired,dots:mGe.isRequired,markers:gGe,crosshair:vGe.isRequired,annotations:yGe.isRequired});var xGe={background:"transparent",text:{fontFamily:"sans-serif",fontSize:11,fill:"#333333",outlineWidth:0,outlineColor:"transparent"},axis:{domain:{line:{stroke:"transparent",strokeWidth:1}},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{}},legend:{text:{fontSize:12}}},grid:{line:{stroke:"#dddddd",strokeWidth:1}},legends:{hidden:{symbol:{fill:"#333333",opacity:.6},text:{fill:"#333333",opacity:.6}},text:{},ticks:{line:{stroke:"#777777",strokeWidth:1},text:{fontSize:10}},title:{text:{}}},labels:{text:{}},markers:{lineColor:"#000000",lineStrokeWidth:1,text:{}},dots:{text:{}},tooltip:{container:{background:"white",color:"inherit",fontSize:"inherit",borderRadius:"2px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.25)",padding:"5px 9px"},basic:{whiteSpace:"pre",display:"flex",alignItems:"center"},chip:{marginRight:7},table:{},tableCell:{padding:"3px 5px"},tableCellValue:{fontWeight:"bold"}},crosshair:{line:{stroke:"#000000",strokeWidth:1,strokeOpacity:.75,strokeDasharray:"6 6"}},annotations:{text:{fontSize:13,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},link:{stroke:"#000000",strokeWidth:1,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},outline:{fill:"none",stroke:"#000000",strokeWidth:2,outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1},symbol:{fill:"#000000",outlineWidth:2,outlineColor:"#ffffff",outlineOpacity:1}}},bGe=["axis.ticks.text","axis.legend.text","legends.title.text","legends.text","legends.ticks.text","legends.title.text","labels.text","dots.text","markers.text","annotations.text"],wGe=function(t,e){var n=rBe({},t,e);return bGe.forEach(function(r){Ja(n,r+".fontFamily")===void 0&&Nd(n,r+".fontFamily",n.text.fontFamily),Ja(n,r+".fontSize")===void 0&&Nd(n,r+".fontSize",n.text.fontSize),Ja(n,r+".fill")===void 0&&Nd(n,r+".fill",n.text.fill),Ja(n,r+".outlineWidth")===void 0&&Nd(n,r+".outlineWidth",n.text.outlineWidth),Ja(n,r+".outlineColor")===void 0&&Nd(n,r+".outlineColor",n.text.outlineColor)}),n},Wae=R.createContext(),Pz=function(t){var e=t.children,n=t.animate,r=t.config,i=R.useMemo(function(){var s=kUe(r)?mU[r]:r;return{animate:n,config:s}},[n,r]);return L.jsx(Wae.Provider,{value:i,children:e})},Aq={animate:ve.bool,motionConfig:ve.oneOfType([ve.oneOf(Object.keys(mU)),ve.shape({mass:ve.number,tension:ve.number,friction:ve.number,clamp:ve.bool,precision:ve.number,velocity:ve.number,duration:ve.number,easing:ve.func})])};Pz.propTypes={children:ve.node.isRequired,animate:Aq.animate,config:Aq.motionConfig};var SGe={animate:!0,config:"default"};Pz.defaultProps=SGe;var no=function(){return R.useContext(Wae)},Gae=function(t){var e=no(),n=e.animate,r=e.config,i=function(a){var l=R.useRef();return R.useEffect(function(){l.current=a},[a]),l.current}(t),s=R.useMemo(function(){return SUe(i,t)},[i,t]),o=Jc({from:{value:0},to:{value:1},reset:!0,config:r,immediate:!n}).value;return rc(o,s)},_Ge={nivo:["#d76445","#f47560","#e8c1a0","#97e3d5","#61cdbb","#00b0a7"],BrBG:pn(qU),PRGn:pn(YU),PiYG:pn(KU),PuOr:pn(ZU),RdBu:pn(JU),RdGy:pn(QU),RdYlBu:pn(ez),RdYlGn:pn(tz),spectral:pn(nz),blues:pn(mz),greens:pn(gz),greys:pn(vz),oranges:pn(bz),purples:pn(yz),reds:pn(xz),BuGn:pn(rz),BuPu:pn(iz),GnBu:pn(sz),OrRd:pn(oz),PuBuGn:pn(az),PuBu:pn(lz),PuRd:pn(cz),RdPu:pn(uz),YlGnBu:pn(dz),YlGn:pn(fz),YlOrBr:pn(hz),YlOrRd:pn(pz)},CGe=Object.keys(_Ge);pn(qU),pn(YU),pn(KU),pn(ZU),pn(JU),pn(QU),pn(ez),pn(tz),pn(nz),pn(mz),pn(gz),pn(vz),pn(bz),pn(yz),pn(xz),pn(rz),pn(iz),pn(sz),pn(oz),pn(az),pn(lz),pn(cz),pn(uz),pn(dz),pn(fz),pn(hz),pn(pz);ve.oneOfType([ve.oneOf(CGe),ve.func,ve.arrayOf(ve.string)]);var p4={basis:uVe,basisClosed:dVe,basisOpen:fVe,bundle:hVe,cardinal:pVe,cardinalClosed:mVe,cardinalOpen:gVe,catmullRom:vVe,catmullRomClosed:yVe,catmullRomOpen:xVe,linear:_z,linearClosed:bVe,monotoneX:wVe,monotoneY:SVe,natural:_Ve,step:CVe,stepAfter:EVe,stepBefore:TVe},sR=Object.keys(p4);ve.oneOf(sR);sR.filter(function(t){return t.endsWith("Closed")});dae(sR,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");var TGe=dae(sR,"bundle","basisClosed","basisOpen","cardinalClosed","cardinalOpen","catmullRomClosed","catmullRomOpen","linearClosed");ve.oneOf(TGe);var EGe=function(t){if(!p4[t])throw new TypeError("'"+t+"', is not a valid curve interpolator identifier.");return p4[t]};ve.arrayOf(ve.shape({id:ve.string.isRequired})).isRequired,ve.arrayOf(ve.shape({id:ve.string.isRequired,match:ve.oneOfType([ve.oneOf(["*"]),ve.object,ve.func]).isRequired})).isRequired;var Hae={ascending:Aae,descending:NVe,insideOut:$Ve,none:fy,reverse:DVe},MGe=Object.keys(Hae);ve.oneOf(MGe);var AGe=function(t){return Hae[t]},jae={expand:AVe,diverging:Mae,none:dy,silhouette:kVe,wiggle:IVe},kGe=Object.keys(jae);ve.oneOf(kGe);var IGe=function(t){return jae[t]};ve.shape({top:ve.number,right:ve.number,bottom:ve.number,left:ve.number}).isRequired;var RGe=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];ve.oneOf(RGe);var PGe=function(t){return R.useMemo(function(){return EGe(t)},[t])};dm(lae);var NGe={top:0,right:0,bottom:0,left:0},o2=function(t,e,n){return n===void 0&&(n={}),R.useMemo(function(){var r=$s({},NGe,n);return{margin:r,innerWidth:t-r.left-r.right,innerHeight:e-r.top-r.bottom,outerWidth:t,outerHeight:e}},[t,e,n.top,n.right,n.bottom,n.left])},Xae=function(){var t=R.useRef(null),e=R.useState({left:0,top:0,width:0,height:0}),n=e[0],r=e[1],i=R.useState(function(){return typeof ResizeObserver>"u"?null:new ResizeObserver(function(s){var o=s[0];return r(o.contentRect)})})[0];return R.useEffect(function(){return t.current&&i!==null&&i.observe(t.current),function(){i!==null&&i.disconnect()}},[]),[t,n]},$Ge=function(t){return R.useMemo(function(){return wGe(xGe,t)},[t])},qae=function(t){return typeof t=="function"?t:typeof t=="string"?t.indexOf("time:")===0?eR(t.slice("5")):n2(t):function(e){return""+e}},a2=function(t){return R.useMemo(function(){return qae(t)},[t])},Yae=R.createContext(),DGe={},Kae=function(t){var e=t.theme,n=e===void 0?DGe:e,r=t.children,i=$Ge(n);return L.jsx(Yae.Provider,{value:i,children:r})};Kae.propTypes={children:ve.node.isRequired,theme:ve.object};var Pr=function(){return R.useContext(Yae)},Zae=function(t){var e=t.children,n=t.condition,r=t.wrapper;return n?R.cloneElement(r,{},e):e};Zae.propTypes={children:ve.node.isRequired,condition:ve.bool.isRequired,wrapper:ve.element.isRequired};var LGe={position:"relative"},tx=function(t){var e=t.children,n=t.theme,r=t.renderWrapper,i=r===void 0||r,s=t.isInteractive,o=s===void 0||s,a=t.animate,l=t.motionConfig,c=R.useRef(null);return L.jsx(Kae,{theme:n,children:L.jsx(Pz,{animate:a,config:l,children:L.jsx(B$e,{container:c,children:L.jsxs(Zae,{condition:i,wrapper:L.jsx("div",{style:LGe,ref:c}),children:[e,o&&L.jsx(F$e,{})]})})})})};tx.propTypes={children:ve.element.isRequired,isInteractive:ve.bool,renderWrapper:ve.bool,theme:ve.object,animate:ve.bool,motionConfig:ve.string};ve.func.isRequired,ve.bool,ve.bool,ve.object.isRequired,ve.bool.isRequired,ve.string;var nx=function(t){var e=t.children,n=Xae(),r=n[0],i=n[1],s=i.width>0&&i.height>0;return L.jsx("div",{ref:r,style:{width:"100%",height:"100%"},children:s&&e({width:i.width,height:i.height})})};nx.propTypes={children:ve.func.isRequired};var OGe=["id","colors"],Jae=function(t){var e=t.id,n=t.colors,r=Vae(t,OGe);return L.jsx("linearGradient",$s({id:e,x1:0,x2:0,y1:0,y2:1},r,{children:n.map(function(i){var s=i.offset,o=i.color,a=i.opacity;return L.jsx("stop",{offset:s+"%",stopColor:o,stopOpacity:a!==void 0?a:1},s)})}))};Jae.propTypes={id:ve.string.isRequired,colors:ve.arrayOf(ve.shape({offset:ve.number.isRequired,color:ve.string.isRequired,opacity:ve.number})).isRequired,gradientTransform:ve.string};var Qae={linearGradient:Jae},nM=R.memo(function(t){var e=t.id,n=t.background,r=t.color,i=t.size,s=t.padding,o=t.stagger,a=i+s,l=i/2,c=s/2;return o===!0&&(a=2*i+2*s),L.jsxs("pattern",{id:e,width:a,height:a,patternUnits:"userSpaceOnUse",children:[L.jsx("rect",{width:a,height:a,fill:n}),L.jsx("circle",{cx:c+l,cy:c+l,r:l,fill:r}),o&&L.jsx("circle",{cx:1.5*s+i+l,cy:1.5*s+i+l,r:l,fill:r})]})});nM.displayName="PatternDots",nM.propTypes={id:ve.string.isRequired,color:ve.string.isRequired,background:ve.string.isRequired,size:ve.number.isRequired,padding:ve.number.isRequired,stagger:ve.bool.isRequired},nM.defaultProps={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1};var Kl=function(t){return t*Math.PI/180},oR=function(t){return 180*t/Math.PI},FGe=function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},Em=function(t,e){return{x:Math.cos(t)*e,y:Math.sin(t)*e}},BGe=function(t){var e=t%360;return e<0&&(e+=360),e},UGe={svg:{align:{left:"start",center:"middle",right:"end",start:"start",middle:"middle",end:"end"},baseline:{top:"text-before-edge",center:"central",bottom:"alphabetic"}},canvas:{align:{left:"left",center:"center",right:"right",start:"left",middle:"center",end:"right"},baseline:{top:"top",center:"middle",bottom:"bottom"}}},rM=R.memo(function(t){var e=t.id,n=t.spacing,r=t.rotation,i=t.background,s=t.color,o=t.lineWidth,a=Math.round(r)%360,l=Math.abs(n);a>180?a-=360:a>90?a-=180:a<-180?a+=360:a<-90&&(a+=180);var c,u=l,d=l;return a===0?c=`
                M 0 0 L `+u+` 0
                M 0 `+d+" L "+u+" "+d+`
            `:a===90?c=`
                M 0 0 L 0 `+d+`
                M `+u+" 0 L "+u+" "+d+`
            `:(u=Math.abs(l/Math.sin(Kl(a))),d=l/Math.sin(Kl(90-a)),c=a>0?`
                    M 0 `+-d+" L "+2*u+" "+d+`
                    M `+-u+" "+-d+" L "+u+" "+d+`
                    M `+-u+" 0 L "+u+" "+2*d+`
                `:`
                    M `+-u+" "+d+" L "+u+" "+-d+`
                    M `+-u+" "+2*d+" L "+2*u+" "+-d+`
                    M 0 `+2*d+" L "+2*u+` 0
                `),L.jsxs("pattern",{id:e,width:u,height:d,patternUnits:"userSpaceOnUse",children:[L.jsx("rect",{width:u,height:d,fill:i,stroke:"rgba(255, 0, 0, 0.1)",strokeWidth:0}),L.jsx("path",{d:c,strokeWidth:o,stroke:s,strokeLinecap:"square"})]})});rM.displayName="PatternLines",rM.propTypes={id:ve.string.isRequired,spacing:ve.number.isRequired,rotation:ve.number.isRequired,background:ve.string.isRequired,color:ve.string.isRequired,lineWidth:ve.number.isRequired},rM.defaultProps={spacing:5,rotation:0,color:"#000000",background:"#ffffff",lineWidth:2};var iM=R.memo(function(t){var e=t.id,n=t.background,r=t.color,i=t.size,s=t.padding,o=t.stagger,a=i+s,l=s/2;return o===!0&&(a=2*i+2*s),L.jsxs("pattern",{id:e,width:a,height:a,patternUnits:"userSpaceOnUse",children:[L.jsx("rect",{width:a,height:a,fill:n}),L.jsx("rect",{x:l,y:l,width:i,height:i,fill:r}),o&&L.jsx("rect",{x:1.5*s+i,y:1.5*s+i,width:i,height:i,fill:r})]})});iM.displayName="PatternSquares",iM.propTypes={id:ve.string.isRequired,color:ve.string.isRequired,background:ve.string.isRequired,size:ve.number.isRequired,padding:ve.number.isRequired,stagger:ve.bool.isRequired},iM.defaultProps={color:"#000000",background:"#ffffff",size:4,padding:4,stagger:!1};var ele={patternDots:nM,patternLines:rM,patternSquares:iM},zGe=["type"],m4=$s({},Qae,ele),tle=function(t){var e=t.defs;return!e||e.length<1?null:L.jsx("defs",{"aria-hidden":!0,children:e.map(function(n){var r=n.type,i=Vae(n,zGe);return m4[r]?R.createElement(m4[r],$s({key:i.id},i)):null})})};tle.propTypes={defs:ve.arrayOf(ve.shape({type:ve.oneOf(Object.keys(m4)).isRequired,id:ve.string.isRequired}))};var VGe=R.memo(tle),l2=function(t){var e=t.width,n=t.height,r=t.margin,i=t.defs,s=t.children,o=t.role,a=t.ariaLabel,l=t.ariaLabelledBy,c=t.ariaDescribedBy,u=t.isFocusable,d=Pr();return L.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:n,role:o,"aria-label":a,"aria-labelledby":l,"aria-describedby":c,focusable:u,tabIndex:u?0:void 0,children:[L.jsx(VGe,{defs:i}),L.jsx("rect",{width:e,height:n,fill:d.background}),L.jsx("g",{transform:"translate("+r.left+","+r.top+")",children:s})]})};l2.propTypes={width:ve.number.isRequired,height:ve.number.isRequired,margin:ve.shape({top:ve.number.isRequired,left:ve.number.isRequired}).isRequired,defs:ve.array,children:ve.oneOfType([ve.arrayOf(ve.node),ve.node]).isRequired,role:ve.string,isFocusable:ve.bool,ariaLabel:ve.string,ariaLabelledBy:ve.string,ariaDescribedBy:ve.string};var nle=function(t){var e=t.size,n=t.color,r=t.borderWidth,i=t.borderColor;return L.jsx("circle",{r:e/2,fill:n,stroke:i,strokeWidth:r,style:{pointerEvents:"none"}})};nle.propTypes={size:ve.number.isRequired,color:ve.string.isRequired,borderWidth:ve.number.isRequired,borderColor:ve.string.isRequired};var WGe=R.memo(nle),rle=function(t){var e=t.x,n=t.y,r=t.symbol,i=r===void 0?WGe:r,s=t.size,o=t.datum,a=t.color,l=t.borderWidth,c=t.borderColor,u=t.label,d=t.labelTextAnchor,f=d===void 0?"middle":d,h=t.labelYOffset,p=h===void 0?-12:h,v=Pr(),g=no(),m=g.animate,y=g.config,x=Jc({transform:"translate("+e+", "+n+")",config:y,immediate:!m});return L.jsxs(sr.g,{transform:x.transform,style:{pointerEvents:"none"},children:[R.createElement(i,{size:s,color:a,datum:o,borderWidth:l,borderColor:c}),u&&L.jsx("text",{textAnchor:f,y:p,style:v.dots.text,children:u})]})};rle.propTypes={x:ve.number.isRequired,y:ve.number.isRequired,datum:ve.object.isRequired,size:ve.number.isRequired,color:ve.string.isRequired,borderWidth:ve.number.isRequired,borderColor:ve.string.isRequired,symbol:ve.oneOfType([ve.func,ve.object]),label:ve.oneOfType([ve.string,ve.number]),labelTextAnchor:ve.oneOf(["start","middle","end"]),labelYOffset:ve.number};R.memo(rle);var g4=function(t){var e=t.width,n=t.height,r=t.axis,i=t.scale,s=t.value,o=t.lineStyle,a=t.textStyle,l=t.legend,c=t.legendPosition,u=t.legendOffsetX,d=t.legendOffsetY,f=t.legendOrientation,h=Pr(),p=0,v=0,g=0,m=0;r==="y"?(g=i(s),v=e):(p=i(s),m=n);var y=null;if(l){var x=function(S){var _=S.axis,C=S.width,T=S.height,A=S.position,M=S.offsetX,E=S.offsetY,P=S.orientation,N=0,F=0,$=P==="vertical"?-90:0,O="start";if(_==="x")switch(A){case"top-left":N=-M,F=E,O="end";break;case"top":F=-E,O=P==="horizontal"?"middle":"start";break;case"top-right":N=M,F=E,O=P==="horizontal"?"start":"end";break;case"right":N=M,F=T/2,O=P==="horizontal"?"start":"middle";break;case"bottom-right":N=M,F=T-E,O="start";break;case"bottom":F=T+E,O=P==="horizontal"?"middle":"end";break;case"bottom-left":F=T-E,N=-M,O=P==="horizontal"?"end":"start";break;case"left":N=-M,F=T/2,O=P==="horizontal"?"end":"middle"}else switch(A){case"top-left":N=M,F=-E,O="start";break;case"top":N=C/2,F=-E,O=P==="horizontal"?"middle":"start";break;case"top-right":N=C-M,F=-E,O=P==="horizontal"?"end":"start";break;case"right":N=C+M,O=P==="horizontal"?"start":"middle";break;case"bottom-right":N=C-M,F=E,O="end";break;case"bottom":N=C/2,F=E,O=P==="horizontal"?"middle":"end";break;case"bottom-left":N=M,F=E,O=P==="horizontal"?"start":"end";break;case"left":N=-M,O=P==="horizontal"?"end":"middle"}return{x:N,y:F,rotation:$,textAnchor:O}}({axis:r,width:e,height:n,position:c,offsetX:u,offsetY:d,orientation:f});y=L.jsx("text",{transform:"translate("+x.x+", "+x.y+") rotate("+x.rotation+")",textAnchor:x.textAnchor,dominantBaseline:"central",style:a,children:l})}return L.jsxs("g",{transform:"translate("+p+", "+g+")",children:[L.jsx("line",{x1:0,x2:v,y1:0,y2:m,stroke:h.markers.lineColor,strokeWidth:h.markers.lineStrokeWidth,style:o}),y]})};g4.propTypes={width:ve.number.isRequired,height:ve.number.isRequired,axis:ve.oneOf(["x","y"]).isRequired,scale:ve.func.isRequired,value:ve.oneOfType([ve.number,ve.string,ve.instanceOf(Date)]).isRequired,lineStyle:ve.object,textStyle:ve.object,legend:ve.string,legendPosition:ve.oneOf(["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"]),legendOffsetX:ve.number.isRequired,legendOffsetY:ve.number.isRequired,legendOrientation:ve.oneOf(["horizontal","vertical"]).isRequired},g4.defaultProps={legendPosition:"top-right",legendOffsetX:14,legendOffsetY:14,legendOrientation:"horizontal"};var GGe=R.memo(g4),ile=function(t){var e=t.markers,n=t.width,r=t.height,i=t.xScale,s=t.yScale;return e&&e.length!==0?e.map(function(o,a){return L.jsx(GGe,$s({},o,{width:n,height:r,scale:o.axis==="y"?s:i}),a)}):null};ile.propTypes={width:ve.number.isRequired,height:ve.number.isRequired,xScale:ve.func.isRequired,yScale:ve.func.isRequired,markers:ve.arrayOf(ve.shape({axis:ve.oneOf(["x","y"]).isRequired,value:ve.oneOfType([ve.number,ve.string,ve.instanceOf(Date)]).isRequired,lineStyle:ve.object,textStyle:ve.object}))};var HGe=R.memo(ile),sle=function(t){return Sse(t)?t:function(e){return Ja(e,t)}},qd=function(t){return R.useMemo(function(){return sle(t)},[t])},jGe=function(t,e,n,r,i,s){return t<=i&&i<=t+n&&e<=s&&s<=e+r},N$=function(t,e){var n,r=e.clientX,i=e.clientY,s=t.getBoundingClientRect(),o=(n=t.getBBox!==void 0?t.getBBox():{width:t.offsetWidth,height:t.offsetHeight}).width===s.width?1:n.width/s.width;return[(r-s.left)*o,(i-s.top)*o]},XGe=Object.keys(Qae),qGe=Object.keys(ele),YGe=function(t,e,n){if(t==="*")return!0;if(Sse(t))return t(e);if(EU(t)){var r=n?Ja(e,n):e;return uGe(SWe(r,Object.keys(t)),t)}return!1},Nz=function(t,e,n,r){var i=r===void 0?{}:r,s=i.dataKey,o=i.colorKey,a=o===void 0?"color":o,l=i.targetKey,c=l===void 0?"fill":l,u=[],d={};return t.length&&e.length&&(u=[].concat(t),e.forEach(function(f){for(var h=function(){var v=n[p],g=v.id,m=v.match;if(YGe(m,f,s)){var y=t.find(function(E){return E.id===g});if(y){if(qGe.includes(y.type))if(y.background==="inherit"||y.color==="inherit"){var x=Ja(f,a),S=y.background,_=y.color,C=g;y.background==="inherit"&&(C=C+".bg."+x,S=x),y.color==="inherit"&&(C=C+".fg."+x,_=x),Nd(f,c,"url(#"+C+")"),d[C]||(u.push($s({},y,{id:C,background:S,color:_})),d[C]=1)}else Nd(f,c,"url(#"+g+")");else if(XGe.includes(y.type))if(y.colors.map(function(E){return E.color}).includes("inherit")){var T=Ja(f,a),A=g,M=$s({},y,{colors:y.colors.map(function(E,P){return E.color!=="inherit"?E:(A=A+"."+P+"."+T,$s({},E,{color:E.color==="inherit"?T:E.color}))})});M.id=A,Nd(f,c,"url(#"+A+")"),d[A]||(u.push(M),d[A]=1)}else Nd(f,c,"url(#"+g+")")}return"break"}},p=0;p<n.length&&h()!=="break";p++);})),u};function KGe(){}var ZGe=KGe,$$=Bae,JGe=ZGe,QGe=kz,e9e=1/0,t9e=$$&&1/QGe(new $$([,-0]))[1]==e9e?function(t){return new $$(t)}:JGe,n9e=t9e,r9e=wz,i9e=cae,s9e=uae,o9e=Sz,a9e=n9e,l9e=kz,c9e=200;function u9e(t,e,n){var r=-1,i=i9e,s=t.length,o=!0,a=[],l=a;if(n)o=!1,i=s9e;else if(s>=c9e){var c=e?null:a9e(t);if(c)return l9e(c);o=!1,i=o9e,l=new r9e}else l=e?[]:a;e:for(;++r<s;){var u=t[r],d=e?e(u):u;if(u=n||u!==0?u:0,o&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}var d9e=u9e,f9e=HI,h9e=Rz,p9e=1,m9e=2;function g9e(t,e,n,r){var i=n.length,s=i,o=!r;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var l=a[0],c=t[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new f9e;if(r)var f=r(c,u,l,t,e,d);if(!(f===void 0?h9e(u,c,p9e|m9e,r,d):f))return!1}}return!0}var v9e=g9e,y9e=ad;function x9e(t){return t===t&&!y9e(t)}var ole=x9e,b9e=ole,w9e=s2;function S9e(t){for(var e=w9e(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,b9e(i)]}return e}var _9e=S9e;function C9e(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var ale=C9e,T9e=v9e,E9e=_9e,M9e=ale;function A9e(t){var e=E9e(t);return e.length==1&&e[0][2]?M9e(e[0][0],e[0][1]):function(n){return n===t||T9e(n,t,e)}}var k9e=A9e,I9e=Rz,R9e=Gse,P9e=Iae,N9e=IU,$9e=ole,D9e=ale,L9e=Jy,O9e=1,F9e=2;function B9e(t,e){return N9e(t)&&$9e(e)?D9e(L9e(t),e):function(n){var r=R9e(n,t);return r===void 0&&r===e?P9e(n,t):I9e(e,r,O9e|F9e)}}var U9e=B9e;function z9e(t){return function(e){return e==null?void 0:e[t]}}var V9e=z9e,W9e=QS;function G9e(t){return function(e){return W9e(e,t)}}var H9e=G9e,j9e=V9e,X9e=H9e,q9e=IU,Y9e=Jy;function K9e(t){return q9e(t)?j9e(Y9e(t)):X9e(t)}var Z9e=K9e,J9e=k9e,Q9e=U9e,eHe=KI,tHe=Da,nHe=Z9e;function rHe(t){return typeof t=="function"?t:t==null?eHe:typeof t=="object"?tHe(t)?Q9e(t[0],t[1]):J9e(t):nHe(t)}var $z=rHe,iHe=$z,sHe=d9e;function oHe(t,e){return t&&t.length?sHe(t,iHe(e)):[]}var aHe=oHe;const kq=ls(aHe);var lHe=Ese,cHe=s2;function uHe(t,e){return t&&lHe(t,e,cHe)}var dHe=uHe,fHe=Yy;function hHe(t,e){return function(n,r){if(n==null)return n;if(!fHe(n))return t(n,r);for(var i=n.length,s=e?i:-1,o=Object(n);(e?s--:++s<i)&&r(o[s],s,o)!==!1;);return n}}var pHe=hHe,mHe=dHe,gHe=pHe,vHe=gHe(mHe),lle=vHe,yHe=lle,xHe=Yy;function bHe(t,e){var n=-1,r=xHe(t)?Array(t.length):[];return yHe(t,function(i,s,o){r[++n]=e(i,s,o)}),r}var wHe=bHe;function SHe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var _He=SHe,Iq=ZI;function CHe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=Iq(t),o=e!==void 0,a=e===null,l=e===e,c=Iq(e);if(!a&&!c&&!s&&t>e||s&&o&&l&&!a&&!c||r&&o&&l||!n&&l||!i)return 1;if(!r&&!s&&!c&&t<e||c&&n&&i&&!r&&!s||a&&n&&i||!o&&i||!l)return-1}return 0}var THe=CHe,EHe=THe;function MHe(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,o=i.length,a=n.length;++r<o;){var l=EHe(i[r],s[r]);if(l){if(r>=a)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var AHe=MHe,D$=JI,kHe=QS,IHe=$z,RHe=wHe,PHe=_He,NHe=ZS,$He=AHe,DHe=KI,LHe=Da;function OHe(t,e,n){e.length?e=D$(e,function(s){return LHe(s)?function(o){return kHe(o,s.length===1?s[0]:s)}:s}):e=[DHe];var r=-1;e=D$(e,NHe(IHe));var i=RHe(t,function(s,o,a){var l=D$(e,function(c){return c(s)});return{criteria:l,index:++r,value:s}});return PHe(i,function(s,o){return $He(s,o,n)})}var FHe=OHe,BHe=Pae,UHe=FHe,zHe=kU,Rq=zse;zHe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&Rq(t,e[0],e[1])?e=[]:n>2&&Rq(e[0],e[1],e[2])&&(e=[e[0]]),UHe(t,BHe(e,1),[])});var Pq=qI;Pq&&Pq.isDate;var v0=[function(t){return t.setMilliseconds(0)},function(t){return t.setSeconds(0)},function(t){return t.setMinutes(0)},function(t){return t.setHours(0)},function(t){return t.setDate(1)},function(t){return t.setMonth(0)}],VHe={millisecond:[],second:v0.slice(0,1),minute:v0.slice(0,2),hour:v0.slice(0,3),day:v0.slice(0,4),month:v0.slice(0,5),year:v0.slice(0,6)},WHe=function(t){return function(e){return VHe[t].forEach(function(n){n(e)}),e}},GHe=function(t){var e=t.format,n=e===void 0?"native":e,r=t.precision,i=r===void 0?"millisecond":r,s=t.useUTC,o=s===void 0||s,a=WHe(i);return function(l){if(l===void 0)return l;if(n==="native"||l instanceof Date)return a(l);var c=o?sae(n):rae(n);return a(c(l))}},cle=function(t,e,n,r){var i,s,o,a,l=t.min,c=l===void 0?0:l,u=t.max,d=u===void 0?"auto":u,f=t.stacked,h=f!==void 0&&f,p=t.reverse,v=p!==void 0&&p,g=t.clamp,m=g!==void 0&&g,y=t.nice,x=y!==void 0&&y;c==="auto"?i=h===!0?(s=e.minStacked)!=null?s:0:e.min:i=c,d==="auto"?o=h===!0?(a=e.maxStacked)!=null?a:0:e.max:o=d;var S=i2().rangeRound(r==="x"?[0,n]:[n,0]).domain(v?[o,i]:[i,o]).clamp(m);return x===!0?S.nice():typeof x=="number"&&S.nice(x),HHe(S,h)},HHe=function(t,e){e===void 0&&(e=!1);var n=t;return n.type="linear",n.stacked=e,n},ule=function(t,e,n){var r=LUe().range([0,n]).domain(e.all);return r.type="point",r},jHe=function(t,e,n,r){var i=t.round,s=i===void 0||i,o=Ew().range(r==="x"?[0,n]:[n,0]).domain(e.all).round(s);return v4(o)},v4=function(t){var e=t;return e.type="band",e},XHe=function(t,e,n){var r,i,s=t.format,o=s===void 0?"native":s,a=t.precision,l=a===void 0?"millisecond":a,c=t.min,u=c===void 0?"auto":c,d=t.max,f=d===void 0?"auto":d,h=t.useUTC,p=h===void 0||h,v=t.nice,g=v!==void 0&&v,m=GHe({format:o,precision:l,useUTC:p});r=u==="auto"?m(e.min):o!=="native"?m(u):u,i=f==="auto"?m(e.max):o!=="native"?m(f):f;var y=p?n8e():t8e();y.range([0,n]),r&&i&&y.domain([r,i]),g===!0?y.nice():typeof g!="object"&&typeof g!="number"||y.nice(g);var x=y;return x.type="time",x.useUTC=p,x},qHe=function(t,e,n,r){var i,s=t.base,o=s===void 0?10:s,a=t.min,l=a===void 0?"auto":a,c=t.max,u=c===void 0?"auto":c;if(e.all.some(function(v){return v===0}))throw new Error("a log scale domain must not include or cross zero");var d,f,h=!1;if(e.all.filter(function(v){return v!=null}).forEach(function(v){h||(i===void 0?i=Math.sign(v):Math.sign(v)!==i&&(h=!0))}),h)throw new Error("a log scale domain must be strictly-positive or strictly-negative");d=l==="auto"?e.min:l,f=u==="auto"?e.max:u;var p=coe().domain([d,f]).rangeRound(r==="x"?[0,n]:[n,0]).base(o).nice();return p.type="log",p},YHe=function(t,e,n,r){var i,s,o=t.constant,a=o===void 0?1:o,l=t.min,c=l===void 0?"auto":l,u=t.max,d=u===void 0?"auto":u,f=t.reverse,h=f!==void 0&&f;i=c==="auto"?e.min:c,s=d==="auto"?e.max:d;var p=uoe().constant(a).rangeRound(r==="x"?[0,n]:[n,0]).nice();h===!0?p.domain([s,i]):p.domain([i,s]);var v=p;return v.type="symlog",v};function Dz(t,e,n,r){switch(t.type){case"linear":return cle(t,e,n,r);case"point":return ule(t,e,n);case"band":return jHe(t,e,n,r);case"time":return XHe(t,e,n);case"log":return qHe(t,e,n,r);case"symlog":return YHe(t,e,n,r);default:throw new Error("invalid scale spec")}}var dle=function(t){var e=t.bandwidth();if(e===0)return t;var n=e/2;return t.round()&&(n=Math.round(n)),function(r){var i;return((i=t(r))!=null?i:0)+n}},fle={millisecond:[GX,GX],second:[HX,HX],minute:[jze,Yze],hour:[Xze,Kze],day:[os(function(t){return t.setHours(0,0,0,0)},function(t,e){return t.setDate(t.getDate()+e)},function(t,e){return(e.getTime()-t.getTime())/864e5},function(t){return Math.floor(t.getTime()/864e5)}),os(function(t){return t.setUTCHours(0,0,0,0)},function(t,e){return t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e.getTime()-t.getTime())/864e5},function(t){return Math.floor(t.getTime()/864e5)})],week:[_A,CA],sunday:[_A,CA],monday:[Iw,Rw],tuesday:[Boe,qoe],wednesday:[Uoe,Yoe],thursday:[Qm,eg],friday:[zoe,Koe],saturday:[Voe,Zoe],month:[qze,Zze],year:[cy,uy]},KHe=Object.keys(fle),ZHe=new RegExp("^every\\s*(\\d+)?\\s*("+KHe.join("|")+")s?$","i"),hle=function(t,e){if(Array.isArray(e))return e;if(typeof e=="string"&&"useUTC"in t){var n=e.match(ZHe);if(n){var r=n[1],i=n[2],s=fle[i][t.useUTC?1:0];if(i==="day"){var o,a,l=t.domain(),c=l[0],u=l[1],d=new Date(u);return d.setDate(d.getDate()+1),(o=(a=s.every(Number(r??1)))==null?void 0:a.range(c,d))!=null?o:[]}if(r===void 0)return t.ticks(s);var f=s.every(Number(r));if(f)return t.ticks(f)}throw new Error("Invalid tickValues: "+e)}if("ticks"in t){if(e===void 0)return t.ticks();if(typeof(h=e)=="number"&&isFinite(h)&&Math.floor(h)===h)return t.ticks(e)}var h;return t.domain()};function Zl(){return Zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zl.apply(this,arguments)}var ple=function(t){var e,n=t.axis,r=t.scale,i=t.ticksPosition,s=t.tickValues,o=t.tickSize,a=t.tickPadding,l=t.tickRotation,c=t.truncateTickAt,u=t.engine,d=u===void 0?"svg":u,f=hle(r,s),h=UGe[d],p="bandwidth"in r?dle(r):r,v={lineX:0,lineY:0},g={textX:0,textY:0},m=typeof document=="object"&&document.dir==="rtl",y=h.align.center,x=h.baseline.center;return n==="x"?(e=function(S){var _;return{x:(_=p(S))!=null?_:0,y:0}},v.lineY=o*(i==="after"?1:-1),g.textY=(o+a)*(i==="after"?1:-1),x=i==="after"?h.baseline.top:h.baseline.bottom,l===0?y=h.align.center:i==="after"&&l<0||i==="before"&&l>0?(y=h.align[m?"left":"right"],x=h.baseline.center):(i==="after"&&l>0||i==="before"&&l<0)&&(y=h.align[m?"right":"left"],x=h.baseline.center)):(e=function(S){var _;return{x:0,y:(_=p(S))!=null?_:0}},v.lineX=o*(i==="after"?1:-1),g.textX=(o+a)*(i==="after"?1:-1),y=i==="after"?h.align.left:h.align.right),{ticks:f.map(function(S){var _=typeof S=="string"?function(C){var T=String(C).length;return c&&c>0&&T>c?""+String(C).slice(0,c).concat("..."):""+C}(S):S;return Zl({key:S instanceof Date?""+S.valueOf():""+S,value:_},e(S),v,g)}),textAlign:y,textBaseline:x}},mle=function(t,e){if(t===void 0||typeof t=="function")return t;if(e.type==="time"){var n=eR(t);return function(r){return n(r instanceof Date?r:new Date(r))}}return n2(t)},y4=function(t){var e,n=t.width,r=t.height,i=t.scale,s=t.axis,o=t.values,a=(e=o,(Array.isArray(e)?o:void 0)||hle(i,o)),l="bandwidth"in i?dle(i):i,c=s==="x"?a.map(function(u){var d,f;return{key:u instanceof Date?""+u.valueOf():""+u,x1:(d=l(u))!=null?d:0,x2:(f=l(u))!=null?f:0,y1:0,y2:r}}):a.map(function(u){var d,f;return{key:u instanceof Date?""+u.valueOf():""+u,x1:0,x2:n,y1:(d=l(u))!=null?d:0,y2:(f=l(u))!=null?f:0}});return c},JHe=R.memo(function(t){var e,n=t.value,r=t.format,i=t.lineX,s=t.lineY,o=t.onClick,a=t.textBaseline,l=t.textAnchor,c=t.animatedProps,u=Pr(),d=u.axis.ticks.line,f=u.axis.ticks.text,h=(e=r==null?void 0:r(n))!=null?e:n,p=R.useMemo(function(){var v={opacity:c.opacity};return o?{style:Zl({},v,{cursor:"pointer"}),onClick:function(g){return o(g,h)}}:{style:v}},[c.opacity,o,h]);return L.jsxs(sr.g,Zl({transform:c.transform},p,{children:[L.jsx("line",{x1:0,x2:i,y1:0,y2:s,style:d}),f.outlineWidth>0&&L.jsx(sr.text,{dominantBaseline:a,textAnchor:l,transform:c.textTransform,style:f,strokeWidth:2*f.outlineWidth,stroke:f.outlineColor,strokeLinejoin:"round",children:""+h}),L.jsx(sr.text,{dominantBaseline:a,textAnchor:l,transform:c.textTransform,style:f,children:""+h})]}))}),QHe=function(t){var e=t.axis,n=t.scale,r=t.x,i=r===void 0?0:r,s=t.y,o=s===void 0?0:s,a=t.length,l=t.ticksPosition,c=t.tickValues,u=t.tickSize,d=u===void 0?5:u,f=t.tickPadding,h=f===void 0?5:f,p=t.tickRotation,v=p===void 0?0:p,g=t.format,m=t.renderTick,y=m===void 0?JHe:m,x=t.truncateTickAt,S=t.legend,_=t.legendPosition,C=_===void 0?"end":_,T=t.legendOffset,A=T===void 0?0:T,M=t.onClick,E=t.ariaHidden,P=Pr(),N=P.axis.legend.text,F=R.useMemo(function(){return mle(g,n)},[g,n]),$=ple({axis:e,scale:n,ticksPosition:l,tickValues:c,tickSize:d,tickPadding:h,tickRotation:v,truncateTickAt:x}),O=$.ticks,z=$.textAlign,X=$.textBaseline,D=null;if(S!==void 0){var B,V=0,W=0,j=0;e==="y"?(j=-90,V=A,C==="start"?(B="start",W=a):C==="middle"?(B="middle",W=a/2):C==="end"&&(B="end")):(W=A,C==="start"?B="start":C==="middle"?(B="middle",V=a/2):C==="end"&&(B="end",V=a)),D=L.jsxs(L.Fragment,{children:[N.outlineWidth>0&&L.jsx("text",{transform:"translate("+V+", "+W+") rotate("+j+")",textAnchor:B,style:Zl({dominantBaseline:"central"},N),strokeWidth:2*N.outlineWidth,stroke:N.outlineColor,strokeLinejoin:"round",children:S}),L.jsx("text",{transform:"translate("+V+", "+W+") rotate("+j+")",textAnchor:B,style:Zl({dominantBaseline:"central"},N),children:S})]})}var J=no(),Q=J.animate,te=J.config,re=Jc({transform:"translate("+i+","+o+")",lineX2:e==="x"?a:0,lineY2:e==="x"?0:a,config:te,immediate:!Q}),se=R.useCallback(function(ye){return{opacity:1,transform:"translate("+ye.x+","+ye.y+")",textTransform:"translate("+ye.textX+","+ye.textY+") rotate("+v+")"}},[v]),fe=R.useCallback(function(ye){return{opacity:0,transform:"translate("+ye.x+","+ye.y+")",textTransform:"translate("+ye.textX+","+ye.textY+") rotate("+v+")"}},[v]),ae=Cg(O,{keys:function(ye){return ye.key},initial:se,from:fe,enter:se,update:se,leave:{opacity:0},config:te,immediate:!Q});return L.jsxs(sr.g,{transform:re.transform,"aria-hidden":E,children:[ae(function(ye,le,H,Me){return R.createElement(y,Zl({tickIndex:Me,format:F,rotate:v,textBaseline:X,textAnchor:z,truncateTickAt:x,animatedProps:ye},le,M?{onClick:M}:{}))}),L.jsx(sr.line,{style:P.axis.domain.line,x1:0,x2:re.lineX2,y1:0,y2:re.lineY2}),D]})},eje=R.memo(QHe),tje={ticksPosition:ve.oneOf(["before","after"]),tickValues:ve.oneOfType([ve.number,ve.arrayOf(ve.oneOfType([ve.number,ve.string,ve.instanceOf(Date)])),ve.string]),rotateOnTickLength:ve.shape({angle:ve.number,length:ve.number}),tickSize:ve.number,tickPadding:ve.number,tickRotation:ve.number,format:ve.oneOfType([ve.func,ve.string]),renderTick:ve.func,legend:ve.node,legendPosition:ve.oneOf(["start","middle","end"]),legendOffset:ve.number,ariaHidden:ve.bool};ve.shape(tje);var gle=["top","right","bottom","left"],Lz=R.memo(function(t){var e=t.xScale,n=t.yScale,r=t.width,i=t.height,s={top:t.top,right:t.right,bottom:t.bottom,left:t.left};return L.jsx(L.Fragment,{children:gle.map(function(o){var a=s[o];if(!a)return null;var l=o==="top"||o==="bottom";return L.jsx(eje,Zl({},a,{axis:l?"x":"y",x:o==="right"?r:0,y:o==="bottom"?i:0,scale:l?e:n,length:l?r:i,ticksPosition:o==="top"||o==="left"?"before":"after",truncateTickAt:a.truncateTickAt}),o)})})}),nje=R.memo(function(t){var e=t.animatedProps,n=Pr();return L.jsx(sr.line,Zl({},e,n.grid.line))}),Nq=R.memo(function(t){var e=t.lines,n=no(),r=n.animate,i=n.config,s=Cg(e,{keys:function(o){return o.key},initial:function(o){return{opacity:1,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2}},from:function(o){return{opacity:0,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2}},enter:function(o){return{opacity:1,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2}},update:function(o){return{opacity:1,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2}},leave:{opacity:0},config:i,immediate:!r});return L.jsx("g",{children:s(function(o,a){return R.createElement(nje,Zl({},a,{key:a.key,animatedProps:o}))})})}),Oz=R.memo(function(t){var e=t.width,n=t.height,r=t.xScale,i=t.yScale,s=t.xValues,o=t.yValues,a=R.useMemo(function(){return!!r&&y4({width:e,height:n,scale:r,axis:"x",values:s})},[r,s,e,n]),l=R.useMemo(function(){return!!i&&y4({width:e,height:n,scale:i,axis:"y",values:o})},[n,e,i,o]);return L.jsxs(L.Fragment,{children:[a&&L.jsx(Nq,{lines:a}),l&&L.jsx(Nq,{lines:l})]})}),rje=function(t,e){var n,r=e.axis,i=e.scale,s=e.x,o=s===void 0?0:s,a=e.y,l=a===void 0?0:a,c=e.length,u=e.ticksPosition,d=e.tickValues,f=e.tickSize,h=f===void 0?5:f,p=e.tickPadding,v=p===void 0?5:p,g=e.tickRotation,m=g===void 0?0:g,y=e.format,x=e.legend,S=e.legendPosition,_=S===void 0?"end":S,C=e.legendOffset,T=C===void 0?0:C,A=e.theme,M=ple({axis:r,scale:i,ticksPosition:u,tickValues:d,tickSize:h,tickPadding:v,tickRotation:m,engine:"canvas"}),E=M.ticks,P=M.textAlign,N=M.textBaseline;t.save(),t.translate(o,l),t.textAlign=P,t.textBaseline=N;var F=A.axis.ticks.text;t.font=(F.fontWeight?F.fontWeight+" ":"")+F.fontSize+"px "+F.fontFamily,((n=A.axis.domain.line.strokeWidth)!=null?n:0)>0&&(t.lineWidth=Number(A.axis.domain.line.strokeWidth),t.lineCap="square",A.axis.domain.line.stroke&&(t.strokeStyle=A.axis.domain.line.stroke),t.beginPath(),t.moveTo(0,0),t.lineTo(r==="x"?c:0,r==="x"?0:c),t.stroke());var $=typeof y=="function"?y:function(B){return""+B};if(E.forEach(function(B){var V;((V=A.axis.ticks.line.strokeWidth)!=null?V:0)>0&&(t.lineWidth=Number(A.axis.ticks.line.strokeWidth),t.lineCap="square",A.axis.ticks.line.stroke&&(t.strokeStyle=A.axis.ticks.line.stroke),t.beginPath(),t.moveTo(B.x,B.y),t.lineTo(B.x+B.lineX,B.y+B.lineY),t.stroke());var W=$(B.value);t.save(),t.translate(B.x+B.textX,B.y+B.textY),t.rotate(Kl(m)),F.outlineWidth>0&&(t.strokeStyle=F.outlineColor,t.lineWidth=2*F.outlineWidth,t.lineJoin="round",t.strokeText(""+W,0,0)),A.axis.ticks.text.fill&&(t.fillStyle=F.fill),t.fillText(""+W,0,0),t.restore()}),x!==void 0){var O=0,z=0,X=0,D="center";r==="y"?(X=-90,O=T,_==="start"?(D="start",z=c):_==="middle"?(D="center",z=c/2):_==="end"&&(D="end")):(z=T,_==="start"?D="start":_==="middle"?(D="center",O=c/2):_==="end"&&(D="end",O=c)),t.translate(O,z),t.rotate(Kl(X)),t.font=(A.axis.legend.text.fontWeight?A.axis.legend.text.fontWeight+" ":"")+A.axis.legend.text.fontSize+"px "+A.axis.legend.text.fontFamily,A.axis.legend.text.fill&&(t.fillStyle=A.axis.legend.text.fill),t.textAlign=D,t.textBaseline="middle",t.fillText(x,0,0)}t.restore()},ije=function(t,e){var n=e.xScale,r=e.yScale,i=e.width,s=e.height,o=e.top,a=e.right,l=e.bottom,c=e.left,u=e.theme,d={top:o,right:a,bottom:l,left:c};gle.forEach(function(f){var h=d[f];if(!h)return null;var p=f==="top"||f==="bottom",v=f==="top"||f==="left"?"before":"after",g=p?n:r,m=mle(h.format,g);rje(t,Zl({},h,{axis:p?"x":"y",x:f==="right"?i:0,y:f==="bottom"?s:0,scale:g,format:m,length:p?i:s,ticksPosition:v,theme:u}))})},$q=function(t,e){var n=e.width,r=e.height,i=e.scale,s=e.axis,o=e.values;y4({width:n,height:r,scale:i,axis:s,values:o}).forEach(function(a){t.beginPath(),t.moveTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.stroke()})};function Xn(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const sje=Xn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),oje=Xn("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),aje=Xn("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),lje=Xn("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),cje=Xn("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),uje=Xn("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),dje=Xn("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),fje=Xn("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),hje=Xn("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function aR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Fz(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function rx(){}var tg=.7,hy=1/tg,Bv="\\s*([+-]?\\d+)\\s*",Nw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ou="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pje=/^#([0-9a-f]{3,8})$/,mje=new RegExp("^rgb\\("+[Bv,Bv,Bv]+"\\)$"),gje=new RegExp("^rgb\\("+[Ou,Ou,Ou]+"\\)$"),vje=new RegExp("^rgba\\("+[Bv,Bv,Bv,Nw]+"\\)$"),yje=new RegExp("^rgba\\("+[Ou,Ou,Ou,Nw]+"\\)$"),xje=new RegExp("^hsl\\("+[Nw,Ou,Ou]+"\\)$"),bje=new RegExp("^hsla\\("+[Nw,Ou,Ou,Nw]+"\\)$"),Dq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aR(rx,Bz,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Lq,formatHex:Lq,formatHsl:wje,formatRgb:Oq,toString:Oq});function Lq(){return this.rgb().formatHex()}function wje(){return yle(this).formatHsl()}function Oq(){return this.rgb().formatRgb()}function Bz(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=pje.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Fq(e):n===3?new Ko(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?pT(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?pT(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=mje.exec(t))?new Ko(e[1],e[2],e[3],1):(e=gje.exec(t))?new Ko(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vje.exec(t))?pT(e[1],e[2],e[3],e[4]):(e=yje.exec(t))?pT(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xje.exec(t))?zq(e[1],e[2]/100,e[3]/100,1):(e=bje.exec(t))?zq(e[1],e[2]/100,e[3]/100,e[4]):Dq.hasOwnProperty(t)?Fq(Dq[t]):t==="transparent"?new Ko(NaN,NaN,NaN,0):null}function Fq(t){return new Ko(t>>16&255,t>>8&255,t&255,1)}function pT(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ko(t,e,n,r)}function vle(t){return t instanceof rx||(t=Bz(t)),t?(t=t.rgb(),new Ko(t.r,t.g,t.b,t.opacity)):new Ko}function IA(t,e,n,r){return arguments.length===1?vle(t):new Ko(t,e,n,r??1)}function Ko(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}aR(Ko,IA,Fz(rx,{brighter:function(t){return t=t==null?hy:Math.pow(hy,t),new Ko(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?tg:Math.pow(tg,t),new Ko(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bq,formatHex:Bq,formatRgb:Uq,toString:Uq}));function Bq(){return"#"+L$(this.r)+L$(this.g)+L$(this.b)}function Uq(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function L$(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function zq(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Eu(t,e,n,r)}function yle(t){if(t instanceof Eu)return new Eu(t.h,t.s,t.l,t.opacity);if(t instanceof rx||(t=Bz(t)),!t)return new Eu;if(t instanceof Eu)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Eu(o,a,l,t.opacity)}function Sje(t,e,n,r){return arguments.length===1?yle(t):new Eu(t,e,n,r??1)}function Eu(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}aR(Eu,Sje,Fz(rx,{brighter:function(t){return t=t==null?hy:Math.pow(hy,t),new Eu(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?tg:Math.pow(tg,t),new Eu(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ko(O$(t>=240?t-240:t+120,i,r),O$(t,i,r),O$(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function O$(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const _je=Math.PI/180,Cje=180/Math.PI;var xle=-.14861,Uz=1.78277,zz=-.29227,lR=-.90649,$w=1.97294,Vq=$w*lR,Wq=$w*Uz,Gq=Uz*zz-lR*xle;function Tje(t){if(t instanceof Mm)return new Mm(t.h,t.s,t.l,t.opacity);t instanceof Ko||(t=vle(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Gq*r+Vq*e-Wq*n)/(Gq+Vq-Wq),s=r-i,o=($w*(n-i)-zz*s)/lR,a=Math.sqrt(o*o+s*s)/($w*i*(1-i)),l=a?Math.atan2(o,s)*Cje-120:NaN;return new Mm(l<0?l+360:l,a,i,t.opacity)}function x4(t,e,n,r){return arguments.length===1?Tje(t):new Mm(t,e,n,r??1)}function Mm(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}aR(Mm,x4,Fz(rx,{brighter:function(t){return t=t==null?hy:Math.pow(hy,t),new Mm(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?tg:Math.pow(tg,t),new Mm(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*_je,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Ko(255*(e+n*(xle*r+Uz*i)),255*(e+n*(zz*r+lR*i)),255*(e+n*($w*r)),this.opacity)}}));function Eje(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}function Mje(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],o=r>0?t[r-1]:2*i-s,a=r<e-1?t[r+2]:2*s-i;return Eje((n-r/e)*e,o,i,s,a)}}const Vz=t=>()=>t;function ble(t,e){return function(n){return t+n*e}}function Aje(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function kje(t,e){var n=e-t;return n?ble(t,n>180||n<-180?n-360*Math.round(n/360):n):Vz(isNaN(t)?e:t)}function Ije(t){return(t=+t)==1?Uv:function(e,n){return n-e?Aje(e,n,t):Vz(isNaN(e)?n:e)}}function Uv(t,e){var n=e-t;return n?ble(t,n):Vz(isNaN(t)?e:t)}(function t(e){var n=Ije(e);function r(i,s){var o=n((i=IA(i)).r,(s=IA(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),c=Uv(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function Rje(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=IA(e[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=t(r),i=t(i),s=t(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var Pje=Rje(Mje);function wle(t){return function e(n){n=+n;function r(i,s){var o=t((i=x4(i)).h,(s=x4(s)).h),a=Uv(i.s,s.s),l=Uv(i.l,s.l),c=Uv(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=e,r}(1)}wle(kje);var Wz=wle(Uv);const Wr=t=>Pje(t[t.length-1]);var Sle=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Xn);const Nje=Wr(Sle);var _le=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Xn);const $je=Wr(_le);var Cle=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Xn);const Dje=Wr(Cle);var Tle=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Xn);const Lje=Wr(Tle);var Ele=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Xn);const Oje=Wr(Ele);var Mle=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Xn);const Fje=Wr(Mle);var Ale=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Xn);const Bje=Wr(Ale);var kle=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Xn);const Uje=Wr(kle);var Ile=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Xn);const zje=Wr(Ile);var Rle=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Xn);const Vje=Wr(Rle);var Ple=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Xn);const Wje=Wr(Ple);var Nle=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Xn);const Gje=Wr(Nle);var $le=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Xn);const Hje=Wr($le);var Dle=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Xn);const jje=Wr(Dle);var Lle=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Xn);const Xje=Wr(Lle);var Ole=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Xn);const qje=Wr(Ole);var Fle=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Xn);const Yje=Wr(Fle);var Ble=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Xn);const Kje=Wr(Ble);var Ule=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Xn);const Zje=Wr(Ule);var zle=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Xn);const Jje=Wr(zle);var Vle=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Xn);const Qje=Wr(Vle);var Wle=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Xn);const eXe=Wr(Wle);var Gle=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Xn);const tXe=Wr(Gle);var Hle=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Xn);const nXe=Wr(Hle);var jle=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Xn);const rXe=Wr(jle);var Xle=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Xn);const iXe=Wr(Xle);var qle=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Xn);const sXe=Wr(qle);function oXe(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}function cR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Gz(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ix(){}var ng=.7,py=1/ng,zv="\\s*([+-]?\\d+)\\s*",Dw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fu="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aXe=/^#([0-9a-f]{3,8})$/,lXe=new RegExp("^rgb\\("+[zv,zv,zv]+"\\)$"),cXe=new RegExp("^rgb\\("+[Fu,Fu,Fu]+"\\)$"),uXe=new RegExp("^rgba\\("+[zv,zv,zv,Dw]+"\\)$"),dXe=new RegExp("^rgba\\("+[Fu,Fu,Fu,Dw]+"\\)$"),fXe=new RegExp("^hsl\\("+[Dw,Fu,Fu]+"\\)$"),hXe=new RegExp("^hsla\\("+[Dw,Fu,Fu,Dw]+"\\)$"),Hq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cR(ix,Hz,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:jq,formatHex:jq,formatHsl:pXe,formatRgb:Xq,toString:Xq});function jq(){return this.rgb().formatHex()}function pXe(){return Zle(this).formatHsl()}function Xq(){return this.rgb().formatRgb()}function Hz(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=aXe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?qq(e):n===3?new Zo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?mT(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?mT(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=lXe.exec(t))?new Zo(e[1],e[2],e[3],1):(e=cXe.exec(t))?new Zo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uXe.exec(t))?mT(e[1],e[2],e[3],e[4]):(e=dXe.exec(t))?mT(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=fXe.exec(t))?Zq(e[1],e[2]/100,e[3]/100,1):(e=hXe.exec(t))?Zq(e[1],e[2]/100,e[3]/100,e[4]):Hq.hasOwnProperty(t)?qq(Hq[t]):t==="transparent"?new Zo(NaN,NaN,NaN,0):null}function qq(t){return new Zo(t>>16&255,t>>8&255,t&255,1)}function mT(t,e,n,r){return r<=0&&(t=e=n=NaN),new Zo(t,e,n,r)}function Yle(t){return t instanceof ix||(t=Hz(t)),t?(t=t.rgb(),new Zo(t.r,t.g,t.b,t.opacity)):new Zo}function Kle(t,e,n,r){return arguments.length===1?Yle(t):new Zo(t,e,n,r??1)}function Zo(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}cR(Zo,Kle,Gz(ix,{brighter:function(t){return t=t==null?py:Math.pow(py,t),new Zo(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?ng:Math.pow(ng,t),new Zo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yq,formatHex:Yq,formatRgb:Kq,toString:Kq}));function Yq(){return"#"+F$(this.r)+F$(this.g)+F$(this.b)}function Kq(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function F$(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Zq(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Mu(t,e,n,r)}function Zle(t){if(t instanceof Mu)return new Mu(t.h,t.s,t.l,t.opacity);if(t instanceof ix||(t=Hz(t)),!t)return new Mu;if(t instanceof Mu)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Mu(o,a,l,t.opacity)}function mXe(t,e,n,r){return arguments.length===1?Zle(t):new Mu(t,e,n,r??1)}function Mu(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}cR(Mu,mXe,Gz(ix,{brighter:function(t){return t=t==null?py:Math.pow(py,t),new Mu(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ng:Math.pow(ng,t),new Mu(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Zo(B$(t>=240?t-240:t+120,i,r),B$(t,i,r),B$(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function B$(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const gXe=Math.PI/180,vXe=180/Math.PI;var Jle=-.14861,jz=1.78277,Xz=-.29227,uR=-.90649,Lw=1.97294,Jq=Lw*uR,Qq=Lw*jz,eY=jz*Xz-uR*Jle;function yXe(t){if(t instanceof Am)return new Am(t.h,t.s,t.l,t.opacity);t instanceof Zo||(t=Yle(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(eY*r+Jq*e-Qq*n)/(eY+Jq-Qq),s=r-i,o=(Lw*(n-i)-Xz*s)/uR,a=Math.sqrt(o*o+s*s)/(Lw*i*(1-i)),l=a?Math.atan2(o,s)*vXe-120:NaN;return new Am(l<0?l+360:l,a,i,t.opacity)}function Ah(t,e,n,r){return arguments.length===1?yXe(t):new Am(t,e,n,r??1)}function Am(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}cR(Am,Ah,Gz(ix,{brighter:function(t){return t=t==null?py:Math.pow(py,t),new Am(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?ng:Math.pow(ng,t),new Am(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*gXe,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Zo(255*(e+n*(Jle*r+jz*i)),255*(e+n*(Xz*r+uR*i)),255*(e+n*(Lw*r)),this.opacity)}}));const xXe=Wz(Ah(300,.5,0),Ah(-240,.5,1));var bXe=Wz(Ah(-100,.75,.35),Ah(80,1.5,.8)),wXe=Wz(Ah(260,.75,.35),Ah(80,1.5,.8)),gT=Ah();function SXe(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return gT.h=360*t-100,gT.s=1.5-1.5*e,gT.l=.8-.9*e,gT+""}var vT=Kle(),_Xe=Math.PI/3,CXe=Math.PI*2/3;function TXe(t){var e;return t=(.5-t)*Math.PI,vT.r=255*(e=Math.sin(t))*e,vT.g=255*(e=Math.sin(t+_Xe))*e,vT.b=255*(e=Math.sin(t+CXe))*e,vT+""}function EXe(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function dR(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const MXe=dR(Xn("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var AXe=dR(Xn("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),kXe=dR(Xn("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),IXe=dR(Xn("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function RA(){return RA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RA.apply(this,arguments)}function tY(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function RXe(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(i,s){if(i){if(typeof i=="string")return tY(i,s);var o=Object.prototype.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(i):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?tY(i,s):void 0}}(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Qle={nivo:["#e8c1a0","#f47560","#f1e15b","#e8a838","#61cdbb","#97e3d5"],category10:sje,accent:oje,dark2:aje,paired:lje,pastel1:cje,pastel2:uje,set1:dje,set2:fje,set3:hje},PXe=Object.keys(Qle),ece={brown_blueGreen:Sle,purpleRed_green:_le,pink_yellowGreen:Cle,purple_orange:Tle,red_blue:Ele,red_grey:Mle,red_yellow_blue:Ale,red_yellow_green:kle,spectral:Ile},NXe=Object.keys(ece),$Xe={brown_blueGreen:Nje,purpleRed_green:$je,pink_yellowGreen:Dje,purple_orange:Lje,red_blue:Oje,red_grey:Fje,red_yellow_blue:Bje,red_yellow_green:Uje,spectral:zje},tce={blues:Wle,greens:Gle,greys:Hle,oranges:qle,purples:jle,reds:Xle,blue_green:Rle,blue_purple:Ple,green_blue:Nle,orange_red:$le,purple_blue_green:Dle,purple_blue:Lle,purple_red:Ole,red_purple:Fle,yellow_green_blue:Ble,yellow_green:Ule,yellow_orange_brown:zle,yellow_orange_red:Vle},DXe=Object.keys(tce),LXe={blues:eXe,greens:tXe,greys:nXe,oranges:sXe,purples:rXe,reds:iXe,turbo:EXe,viridis:MXe,inferno:kXe,magma:AXe,plasma:IXe,cividis:oXe,warm:bXe,cool:wXe,cubehelixDefault:xXe,blue_green:Vje,blue_purple:Wje,green_blue:Gje,orange_red:Hje,purple_blue_green:jje,purple_blue:Xje,purple_red:qje,red_purple:Yje,yellow_green_blue:Kje,yellow_green:Zje,yellow_orange_brown:Jje,yellow_orange_red:Qje},sM=RA({},Qle,ece,tce),OXe=Object.keys(sM),FXe=function(t){return PXe.includes(t)},BXe=function(t){return NXe.includes(t)},UXe=function(t){return DXe.includes(t)},zXe={rainbow:SXe,sinebow:TXe},qz=RA({},$Xe,LXe,zXe),VXe=function(t,e){if(typeof t=="function")return t;if(EU(t)){if(function(l){return l.theme!==void 0}(t)){if(e===void 0)throw new Error("Unable to use color from theme as no theme was provided");var n=Ja(e,t.theme);if(n===void 0)throw new Error("Color from theme is undefined at path: '"+t.theme+"'");return function(){return n}}if(function(l){return l.from!==void 0}(t)){var r=function(l){return Ja(l,t.from)};if(Array.isArray(t.modifiers)){for(var i,s=[],o=function(){var l=i.value,c=l[0],u=l[1];if(c==="brighter")s.push(function(d){return d.brighter(u)});else if(c==="darker")s.push(function(d){return d.darker(u)});else{if(c!=="opacity")throw new Error("Invalid color modifier: '"+c+"', must be one of: 'brighter', 'darker', 'opacity'");s.push(function(d){return d.opacity=u,d})}},a=RXe(t.modifiers);!(i=a()).done;)o();return s.length===0?r:function(l){return s.reduce(function(c,u){return u(c)},Tw(r(l))).toString()}}return r}throw new Error("Invalid color spec, you should either specify 'theme' or 'from' when using a config object")}return function(){return t}},zc=function(t,e){return R.useMemo(function(){return VXe(t,e)},[t,e])};ve.oneOfType([ve.func,ve.arrayOf(ve.string),ve.shape({scheme:ve.oneOf(OXe).isRequired,size:ve.number}),ve.shape({datum:ve.string.isRequired}),ve.string]);ve.oneOfType([ve.string,ve.func,ve.shape({theme:ve.string.isRequired}),ve.shape({from:ve.string.isRequired,modifiers:ve.arrayOf(ve.array)})]);var WXe={scheme:"turbo"},GXe=function(t,e){var n=t.minValue,r=t.maxValue,i=n!==void 0?n:e.min,s=r!==void 0?r:e.max,o=aae().domain([i,s]).clamp(!0);if("colors"in t)o.range(t.colors);else if("interpolator"in t)o.interpolator(t.interpolator);else{var a,l=(a=t.scheme)!=null?a:WXe.scheme;o.interpolator(qz[l])}return o},nY={scheme:"red_yellow_blue",divergeAt:.5},HXe=function(t,e){var n,r=t.minValue,i=t.maxValue,s=r!==void 0?r:e.min,o=i!==void 0?i:e.max,a=[s,s+(o-s)/2,o],l=.5-((n=t.divergeAt)!=null?n:nY.divergeAt),c=s4().domain(a).clamp(!0),u=function(h){return String(h)};if("colors"in t)u=s4().domain(a.map(function(h){return h-l*(o-s)})).range(t.colors).interpolator();else if("interpolator"in t)u=t.interpolator;else{var d,f=(d=t.scheme)!=null?d:nY.scheme;u=qz[f]}return c.interpolator(function(h){return u(h+l)})},rY={scheme:"turbo",steps:7},jXe=function(t,e){var n=doe().domain(t.domain||[e.min,e.max]).nice();if("colors"in t)n.range(t.colors);else{var r=t.scheme||rY.scheme,i=t.steps===void 0?rY.steps:t.steps,s=qz[r],o=Array.from({length:i}).map(function(a,l){return s(l*(1/(i-1)))});n.range(o)}return n},XXe=function(t,e){if(function(n){return n.type==="sequential"}(t))return GXe(t,e);if(function(n){return n.type==="diverging"}(t))return HXe(t,e);if(function(n){return n.type==="quantize"}(t))return jXe(t,e);throw new Error("Invalid continuous color scale config")},qXe=function(t,e){e===void 0&&(e=16);var n=t.domain();if("thresholds"in t){var r=[],i=i2().domain(n).range([0,1]);return t.range().forEach(function(o,a){var l=t.invertExtent(o),c=l[0],u=l[1];r.push({key:a+".0",offset:i(c),stopColor:o}),r.push({key:a+".1",offset:i(u),stopColor:o})}),r}var s=t.copy();return n.length===2?s.domain([0,1]):n.length===3&&s.domain([0,.5,1]),s.ticks(e).map(function(o){return{key:""+o,offset:o,stopColor:""+s(o)}})},YXe=function(t,e){if(typeof t=="function")return t;var n=typeof e=="function"?e:function(d){return Ja(d,e)};if(Array.isArray(t)){var r=dm(t),i=function(d){return r(n(d))};return i.scale=r,i}if(EU(t)){if(function(d){return d.datum!==void 0}(t))return function(d){return Ja(d,t.datum)};if(function(d){return d.scheme!==void 0}(t)){if(FXe(t.scheme)){var s=dm(sM[t.scheme]),o=function(d){return s(n(d))};return o.scale=s,o}if(BXe(t.scheme)){if(t.size!==void 0&&(t.size<3||t.size>11))throw new Error("Invalid size '"+t.size+"' for diverging color scheme '"+t.scheme+"', must be between 3~11");var a=dm(sM[t.scheme][t.size||11]),l=function(d){return a(n(d))};return l.scale=a,l}if(UXe(t.scheme)){if(t.size!==void 0&&(t.size<3||t.size>9))throw new Error("Invalid size '"+t.size+"' for sequential color scheme '"+t.scheme+"', must be between 3~9");var c=dm(sM[t.scheme][t.size||9]),u=function(d){return c(n(d))};return u.scale=c,u}}throw new Error("Invalid colors, when using an object, you should either pass a 'datum' or a 'scheme' property")}return function(){return t}},Yz=function(t,e){return R.useMemo(function(){return YXe(t,e)},[t,e])},KXe=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,o=s===void 0?1:s,a=t.borderWidth,l=a===void 0?0:a,c=t.borderColor;return L.jsx("circle",{r:r/2,cx:e+r/2,cy:n+r/2,fill:i,opacity:o,strokeWidth:l,stroke:c===void 0?"transparent":c,style:{pointerEvents:"none"}})},ZXe=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,o=s===void 0?1:s,a=t.borderWidth,l=a===void 0?0:a,c=t.borderColor;return L.jsx("g",{transform:"translate("+e+","+n+")",children:L.jsx("path",{d:`
                    M`+r/2+` 0
                    L`+.8*r+" "+r/2+`
                    L`+r/2+" "+r+`
                    L`+.2*r+" "+r/2+`
                    L`+r/2+` 0
                `,fill:i,opacity:o,strokeWidth:l,stroke:c===void 0?"transparent":c,style:{pointerEvents:"none"}})})},JXe=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,o=s===void 0?1:s,a=t.borderWidth,l=a===void 0?0:a,c=t.borderColor;return L.jsx("rect",{x:e,y:n,fill:i,opacity:o,strokeWidth:l,stroke:c===void 0?"transparent":c,width:r,height:r,style:{pointerEvents:"none"}})},QXe=function(t){var e=t.x,n=t.y,r=t.size,i=t.fill,s=t.opacity,o=s===void 0?1:s,a=t.borderWidth,l=a===void 0?0:a,c=t.borderColor;return L.jsx("g",{transform:"translate("+e+","+n+")",children:L.jsx("path",{d:`
                M`+r/2+` 0
                L`+r+" "+r+`
                L0 `+r+`
                L`+r/2+` 0
            `,fill:i,opacity:o,strokeWidth:l,stroke:c===void 0?"transparent":c,style:{pointerEvents:"none"}})})};function Ud(){return Ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ud.apply(this,arguments)}var mi={length:200,thickness:16,direction:"row",tickPosition:"after",tickSize:4,tickSpacing:3,tickOverlap:!1,tickFormat:function(t){return""+t},titleAlign:"start",titleOffset:4},eqe={top:0,right:0,bottom:0,left:0},Kz=function(t){var e,n=t.direction,r=t.itemsSpacing,i=t.padding,s=t.itemCount,o=t.itemWidth,a=t.itemHeight;if(typeof i!="number"&&(typeof(e=i)!="object"||Array.isArray(e)||e===null))throw new Error("Invalid property padding, must be one of: number, object");var l=typeof i=="number"?{top:i,right:i,bottom:i,left:i}:Ud({},eqe,i),c=l.left+l.right,u=l.top+l.bottom,d=o+c,f=a+u,h=(s-1)*r;return n==="row"?d=o*s+h+c:n==="column"&&(f=a*s+h+u),{width:d,height:f,padding:l}},Zz=function(t){var e=t.anchor,n=t.translateX,r=t.translateY,i=t.containerWidth,s=t.containerHeight,o=t.width,a=t.height,l=n,c=r;switch(e){case"top":l+=(i-o)/2;break;case"top-right":l+=i-o;break;case"right":l+=i-o,c+=(s-a)/2;break;case"bottom-right":l+=i-o,c+=s-a;break;case"bottom":l+=(i-o)/2,c+=s-a;break;case"bottom-left":c+=s-a;break;case"left":c+=(s-a)/2;break;case"center":l+=(i-o)/2,c+=(s-a)/2}return{x:l,y:c}},nce=function(t){var e,n,r,i,s,o,a=t.direction,l=t.justify,c=t.symbolSize,u=t.symbolSpacing,d=t.width,f=t.height;switch(a){case"left-to-right":e=0,n=(f-c)/2,i=f/2,o="central",l?(r=d,s="end"):(r=c+u,s="start");break;case"right-to-left":e=d-c,n=(f-c)/2,i=f/2,o="central",l?(r=0,s="start"):(r=d-c-u,s="end");break;case"top-to-bottom":e=(d-c)/2,n=0,r=d/2,s="middle",l?(i=f,o="alphabetic"):(i=c+u,o="text-before-edge");break;case"bottom-to-top":e=(d-c)/2,n=f-c,r=d/2,s="middle",l?(i=0,o="text-before-edge"):(i=f-c-u,o="alphabetic")}return{symbolX:e,symbolY:n,labelX:r,labelY:i,labelAnchor:s,labelAlignment:o}},tqe=function(t){var e,n=t.scale,r=t.ticks,i=t.length,s=i===void 0?mi.length:i,o=t.thickness,a=o===void 0?mi.thickness:o,l=t.direction,c=l===void 0?mi.direction:l,u=t.tickPosition,d=u===void 0?mi.tickPosition:u,f=t.tickSize,h=f===void 0?mi.tickSize:f,p=t.tickSpacing,v=p===void 0?mi.tickSpacing:p,g=t.tickOverlap,m=g===void 0?mi.tickOverlap:g,y=t.tickFormat,x=y===void 0?mi.tickFormat:y,S=t.title,_=t.titleAlign,C=_===void 0?mi.titleAlign:_,T=t.titleOffset,A=T===void 0?mi.titleOffset:T,M=c==="column"?[].concat(n.domain()).reverse():n.domain(),E=i2().domain(M);M.length===2?E.range([0,s]):M.length===3&&E.range([0,s/2,s]),e="thresholds"in n?[M[0]].concat(n.thresholds(),[M[1]]):Array.isArray(r)?r:n.ticks(r);var P,N,F,$,O,z,X=qXe(n,32),D=qae(x),B=[],V=0,W=0;if(c==="row"){var j,J,Q;P=s,N=a,W=1;var te;O=0,F=C==="start"?0:C==="middle"?s/2:s,d==="before"?(j=-h,J=m?a:0,Q=-h-v,te="alphabetic",$=a+A,z="hanging"):(j=m?0:a,Q=(J=a+h)+v,te="hanging",$=-A,z="alphabetic"),e.forEach(function(ye){var le=E(ye);B.push({x1:le,y1:j,x2:le,y2:J,text:D(ye),textX:le,textY:Q,textHorizontalAlign:"middle",textVerticalAlign:te})})}else{var re,se,fe,ae;P=a,N=s,V=1,O=-90,$=C==="start"?s:C==="middle"?s/2:0,d==="before"?(se=m?a:0,fe=(re=-h)-v,ae="end",F=a+A,z="hanging"):(re=m?0:a,fe=(se=a+h)+v,ae="start",F=-A,z="alphabetic"),e.forEach(function(ye){var le=E(ye);B.push({x1:re,y1:le,x2:se,y2:le,text:D(ye),textX:fe,textY:le,textHorizontalAlign:ae,textVerticalAlign:"central"})})}return{width:P,height:N,gradientX1:0,gradientY1:V,gradientX2:W,gradientY2:0,colorStops:X,ticks:B,titleText:S,titleX:F,titleY:$,titleRotation:O,titleHorizontalAlign:C,titleVerticalAlign:z}},nqe=function(t){var e=t.scale,n=t.ticks,r=t.length,i=r===void 0?mi.length:r,s=t.thickness,o=s===void 0?mi.thickness:s,a=t.direction,l=a===void 0?mi.direction:a,c=t.tickPosition,u=c===void 0?mi.tickPosition:c,d=t.tickSize,f=d===void 0?mi.tickSize:d,h=t.tickSpacing,p=h===void 0?mi.tickSpacing:h,v=t.tickOverlap,g=v===void 0?mi.tickOverlap:v,m=t.tickFormat,y=m===void 0?mi.tickFormat:m,x=t.title,S=t.titleAlign,_=S===void 0?mi.titleAlign:S,C=t.titleOffset,T=tqe({scale:e,ticks:n,length:i,thickness:o,direction:l,tickPosition:u,tickSize:f,tickSpacing:p,tickOverlap:g,tickFormat:y,title:x,titleAlign:_,titleOffset:C===void 0?mi.titleOffset:C}),A=T.width,M=T.height,E=T.gradientX1,P=T.gradientY1,N=T.gradientX2,F=T.gradientY2,$=T.ticks,O=T.colorStops,z=T.titleText,X=T.titleX,D=T.titleY,B=T.titleRotation,V=T.titleVerticalAlign,W=T.titleHorizontalAlign,j=Pr(),J="ContinuousColorsLegendSvgGradient."+l+"."+O.map(function(Q){return Q.offset}).join("_");return L.jsxs("g",{children:[L.jsx("defs",{children:L.jsx("linearGradient",{id:J,x1:E,y1:P,x2:N,y2:F,children:O.map(function(Q){return L.jsx("stop",Ud({},Q))})})}),z&&L.jsx("text",{transform:"translate("+X+", "+D+") rotate("+B+")",textAnchor:W,dominantBaseline:V,style:j.legends.title.text,children:z}),L.jsx("rect",{width:A,height:M,fill:"url(#"+J}),$.map(function(Q,te){return L.jsxs(R.Fragment,{children:[L.jsx("line",{x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,style:j.legends.ticks.line}),L.jsx("text",{x:Q.textX,y:Q.textY,textAnchor:Q.textHorizontalAlign,dominantBaseline:Q.textVerticalAlign,style:j.legends.ticks.text,children:Q.text})]},te)})]})},rqe=["containerWidth","containerHeight","anchor","translateX","translateY","length","thickness","direction"],iqe=function(t){var e,n,r=t.containerWidth,i=t.containerHeight,s=t.anchor,o=t.translateX,a=o===void 0?0:o,l=t.translateY,c=l===void 0?0:l,u=t.length,d=u===void 0?mi.length:u,f=t.thickness,h=f===void 0?mi.thickness:f,p=t.direction,v=p===void 0?mi.direction:p,g=function(S,_){if(S==null)return{};var C,T,A={},M=Object.keys(S);for(T=0;T<M.length;T++)C=M[T],_.indexOf(C)>=0||(A[C]=S[C]);return A}(t,rqe);v==="row"?(e=d,n=h):(e=h,n=d);var m=Zz({anchor:s,translateX:a,translateY:c,containerWidth:r,containerHeight:i,width:e,height:n}),y=m.x,x=m.y;return L.jsx("g",{transform:"translate("+y+", "+x+")",children:L.jsx(nqe,Ud({length:d,thickness:h,direction:v},g))})},sqe={circle:KXe,diamond:ZXe,square:JXe,triangle:QXe},oqe=function(t){var e,n,r,i,s,o,a,l,c,u,d,f=t.x,h=t.y,p=t.width,v=t.height,g=t.data,m=t.direction,y=m===void 0?"left-to-right":m,x=t.justify,S=x!==void 0&&x,_=t.textColor,C=t.background,T=C===void 0?"transparent":C,A=t.opacity,M=A===void 0?1:A,E=t.symbolShape,P=E===void 0?"square":E,N=t.symbolSize,F=N===void 0?16:N,$=t.symbolSpacing,O=$===void 0?8:$,z=t.symbolBorderWidth,X=z===void 0?0:z,D=t.symbolBorderColor,B=D===void 0?"transparent":D,V=t.onClick,W=t.onMouseEnter,j=t.onMouseLeave,J=t.toggleSerie,Q=t.effects,te=R.useState({}),re=te[0],se=te[1],fe=Pr(),ae=R.useCallback(function(Y){if(Q){var oe=Q.filter(function(xe){return xe.on==="hover"}).reduce(function(xe,Se){return Ud({},xe,Se.style)},{});se(oe)}W==null||W(g,Y)},[W,g,Q]),ye=R.useCallback(function(Y){if(Q){var oe=Q.filter(function(xe){return xe.on!=="hover"}).reduce(function(xe,Se){return Ud({},xe,Se.style)},{});se(oe)}j==null||j(g,Y)},[j,g,Q]),le=nce({direction:y,justify:S,symbolSize:(e=re.symbolSize)!=null?e:F,symbolSpacing:O,width:p,height:v}),H=le.symbolX,Me=le.symbolY,we=le.labelX,Ee=le.labelY,ge=le.labelAnchor,qe=le.labelAlignment,Ae=[V,W,j,J].some(function(Y){return Y!==void 0}),ee=typeof P=="function"?P:sqe[P];return L.jsxs("g",{transform:"translate("+f+","+h+")",style:{opacity:(n=re.itemOpacity)!=null?n:M},children:[L.jsx("rect",{width:p,height:v,fill:(r=re.itemBackground)!=null?r:T,style:{cursor:Ae?"pointer":"auto"},onClick:function(Y){V==null||V(g,Y),J==null||J(g.id)},onMouseEnter:ae,onMouseLeave:ye}),R.createElement(ee,Ud({id:g.id,x:H,y:Me,size:(i=re.symbolSize)!=null?i:F,fill:(s=(o=g.fill)!=null?o:g.color)!=null?s:"black",borderWidth:(a=re.symbolBorderWidth)!=null?a:X,borderColor:(l=re.symbolBorderColor)!=null?l:B},g.hidden?fe.legends.hidden.symbol:void 0)),L.jsx("text",{textAnchor:ge,style:Ud({},fe.legends.text,{fill:(c=(u=(d=re.itemTextColor)!=null?d:_)!=null?u:fe.legends.text.fill)!=null?c:"black",dominantBaseline:qe,pointerEvents:"none",userSelect:"none"},g.hidden?fe.legends.hidden.text:void 0),x:we,y:Ee,children:g.label})]})},aqe=function(t){var e=t.data,n=t.x,r=t.y,i=t.direction,s=t.padding,o=s===void 0?0:s,a=t.justify,l=t.effects,c=t.itemWidth,u=t.itemHeight,d=t.itemDirection,f=d===void 0?"left-to-right":d,h=t.itemsSpacing,p=h===void 0?0:h,v=t.itemTextColor,g=t.itemBackground,m=g===void 0?"transparent":g,y=t.itemOpacity,x=y===void 0?1:y,S=t.symbolShape,_=t.symbolSize,C=t.symbolSpacing,T=t.symbolBorderWidth,A=t.symbolBorderColor,M=t.onClick,E=t.onMouseEnter,P=t.onMouseLeave,N=t.toggleSerie,F=Kz({itemCount:e.length,itemWidth:c,itemHeight:u,itemsSpacing:p,direction:i,padding:o}).padding,$=i==="row"?c+p:0,O=i==="column"?u+p:0;return L.jsx("g",{transform:"translate("+n+","+r+")",children:e.map(function(z,X){return L.jsx(oqe,{data:z,x:X*$+F.left,y:X*O+F.top,width:c,height:u,direction:f,justify:a,effects:l,textColor:v,background:m,opacity:x,symbolShape:S,symbolSize:_,symbolSpacing:C,symbolBorderWidth:T,symbolBorderColor:A,onClick:M,onMouseEnter:E,onMouseLeave:P,toggleSerie:N},X)})})},Jz=function(t){var e=t.data,n=t.containerWidth,r=t.containerHeight,i=t.translateX,s=i===void 0?0:i,o=t.translateY,a=o===void 0?0:o,l=t.anchor,c=t.direction,u=t.padding,d=u===void 0?0:u,f=t.justify,h=t.itemsSpacing,p=h===void 0?0:h,v=t.itemWidth,g=t.itemHeight,m=t.itemDirection,y=t.itemTextColor,x=t.itemBackground,S=t.itemOpacity,_=t.symbolShape,C=t.symbolSize,T=t.symbolSpacing,A=t.symbolBorderWidth,M=t.symbolBorderColor,E=t.onClick,P=t.onMouseEnter,N=t.onMouseLeave,F=t.toggleSerie,$=t.effects,O=Kz({itemCount:e.length,itemsSpacing:p,itemWidth:v,itemHeight:g,direction:c,padding:d}),z=O.width,X=O.height,D=Zz({anchor:l,translateX:s,translateY:a,containerWidth:n,containerHeight:r,width:z,height:X}),B=D.x,V=D.y;return L.jsx(aqe,{data:e,x:B,y:V,direction:c,padding:d,justify:f,effects:$,itemsSpacing:p,itemWidth:v,itemHeight:g,itemDirection:m,itemTextColor:y,itemBackground:x,itemOpacity:S,symbolShape:_,symbolSize:C,symbolSpacing:T,symbolBorderWidth:A,symbolBorderColor:M,onClick:E,onMouseEnter:P,onMouseLeave:N,toggleSerie:typeof F=="boolean"?void 0:F})},lqe={start:"left",middle:"center",end:"right"},cqe=function(t,e){var n=e.data,r=e.containerWidth,i=e.containerHeight,s=e.translateX,o=s===void 0?0:s,a=e.translateY,l=a===void 0?0:a,c=e.anchor,u=e.direction,d=e.padding,f=d===void 0?0:d,h=e.justify,p=h!==void 0&&h,v=e.itemsSpacing,g=v===void 0?0:v,m=e.itemWidth,y=e.itemHeight,x=e.itemDirection,S=x===void 0?"left-to-right":x,_=e.itemTextColor,C=e.symbolSize,T=C===void 0?16:C,A=e.symbolSpacing,M=A===void 0?8:A,E=e.theme,P=Kz({itemCount:n.length,itemWidth:m,itemHeight:y,itemsSpacing:g,direction:u,padding:f}),N=P.width,F=P.height,$=P.padding,O=Zz({anchor:c,translateX:o,translateY:l,containerWidth:r,containerHeight:i,width:N,height:F}),z=O.x,X=O.y,D=u==="row"?m+g:0,B=u==="column"?y+g:0;t.save(),t.translate(z,X),t.font=E.legends.text.fontSize+"px "+(E.legends.text.fontFamily||"sans-serif"),n.forEach(function(V,W){var j,J,Q=W*D+$.left,te=W*B+$.top,re=nce({direction:S,justify:p,symbolSize:T,symbolSpacing:M,width:m,height:y}),se=re.symbolX,fe=re.symbolY,ae=re.labelX,ye=re.labelY,le=re.labelAnchor,H=re.labelAlignment;t.fillStyle=(j=V.color)!=null?j:"black",t.fillRect(Q+se,te+fe,T,T),t.textAlign=lqe[le],H==="central"&&(t.textBaseline="middle"),t.fillStyle=(J=_??E.legends.text.fill)!=null?J:"black",t.fillText(String(V.label),Q+ae,te+ye)}),t.restore()};ve.arrayOf(ve.object),ve.oneOf(["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left","center"]).isRequired,ve.number,ve.number,ve.oneOf(["row","column"]).isRequired,ve.number,ve.number.isRequired,ve.number.isRequired,ve.oneOf(["left-to-right","right-to-left","top-to-bottom","bottom-to-top"]),ve.string,ve.string,ve.number,ve.oneOfType([ve.oneOf(["circle","diamond","square","triangle"]),ve.func]),ve.number,ve.number,ve.number,ve.string,ve.func,ve.func,ve.func,ve.arrayOf(ve.shape({on:ve.oneOfType([ve.oneOf(["hover"])]).isRequired,style:ve.shape({itemTextColor:ve.string,itemBackground:ve.string,itemOpacity:ve.number,symbolSize:ve.number,symbolBorderWidth:ve.number,symbolBorderColor:ve.string}).isRequired}));var uqe=lle;function dqe(t,e){var n=[];return uqe(t,function(r,i,s){e(r,i,s)&&n.push(r)}),n}var fqe=dqe,hqe=Lae,pqe=fqe,mqe=$z,gqe=Da;function vqe(t,e){var n=gqe(t)?hqe:pqe;return n(t,mqe(e))}var yqe=vqe;const xqe=ls(yqe);var bqe=Xh,wqe=Qc,Sqe="[object Number]";function _qe(t){return typeof t=="number"||wqe(t)&&bqe(t)==Sqe}var Cqe=_qe;const iY=ls(Cqe);function Tqe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var Eqe=Tqe,Mqe=Ky,Aqe=s2;function kqe(t,e){return t&&Mqe(e,Aqe(e),t)}var Iqe=kqe,Rqe=Ky,Pqe=JS;function Nqe(t,e){return t&&Rqe(e,Pqe(e),t)}var $qe=Nqe,Dqe=Ky,Lqe=Iz;function Oqe(t,e){return Dqe(t,Lqe(t),e)}var Fqe=Oqe,Bqe=Az,Uqe=SU,zqe=Iz,Vqe=Oae,Wqe=Object.getOwnPropertySymbols,Gqe=Wqe?function(t){for(var e=[];t;)Bqe(e,zqe(t)),t=Uqe(t);return e}:Vqe,rce=Gqe,Hqe=Ky,jqe=rce;function Xqe(t,e){return Hqe(t,jqe(t),e)}var qqe=Xqe,Yqe=Dae,Kqe=rce,Zqe=JS;function Jqe(t){return Yqe(t,Zqe,Kqe)}var ice=Jqe,Qqe=Object.prototype,eYe=Qqe.hasOwnProperty;function tYe(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&eYe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var nYe=tYe,rYe=wU;function iYe(t,e){var n=e?rYe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var sYe=iYe,oYe=/\w*$/;function aYe(t){var e=new t.constructor(t.source,oYe.exec(t));return e.lastIndex=t.lastIndex,e}var lYe=aYe,sY=Hy,oY=sY?sY.prototype:void 0,aY=oY?oY.valueOf:void 0;function cYe(t){return aY?Object(aY.call(t)):{}}var uYe=cYe,dYe=wU,fYe=sYe,hYe=lYe,pYe=uYe,mYe=kse,gYe="[object Boolean]",vYe="[object Date]",yYe="[object Map]",xYe="[object Number]",bYe="[object RegExp]",wYe="[object Set]",SYe="[object String]",_Ye="[object Symbol]",CYe="[object ArrayBuffer]",TYe="[object DataView]",EYe="[object Float32Array]",MYe="[object Float64Array]",AYe="[object Int8Array]",kYe="[object Int16Array]",IYe="[object Int32Array]",RYe="[object Uint8Array]",PYe="[object Uint8ClampedArray]",NYe="[object Uint16Array]",$Ye="[object Uint32Array]";function DYe(t,e,n){var r=t.constructor;switch(e){case CYe:return dYe(t);case gYe:case vYe:return new r(+t);case TYe:return fYe(t,n);case EYe:case MYe:case AYe:case kYe:case IYe:case RYe:case PYe:case NYe:case $Ye:return mYe(t,n);case yYe:return new r;case xYe:case SYe:return new r(t);case bYe:return hYe(t);case wYe:return new r;case _Ye:return pYe(t)}}var LYe=DYe,OYe=iR,FYe=Qc,BYe="[object Map]";function UYe(t){return FYe(t)&&OYe(t)==BYe}var zYe=UYe,VYe=zYe,WYe=ZS,lY=qI,cY=lY&&lY.isMap,GYe=cY?WYe(cY):VYe,HYe=GYe,jYe=iR,XYe=Qc,qYe="[object Set]";function YYe(t){return XYe(t)&&jYe(t)==qYe}var KYe=YYe,ZYe=KYe,JYe=ZS,uY=qI,dY=uY&&uY.isSet,QYe=dY?JYe(dY):ZYe,eKe=QYe,tKe=HI,nKe=Eqe,rKe=AU,iKe=Iqe,sKe=$qe,oKe=Mse,aKe=Ise,lKe=Fqe,cKe=qqe,uKe=Fae,dKe=ice,fKe=iR,hKe=nYe,pKe=LYe,mKe=Pse,gKe=Da,vKe=XI,yKe=HYe,xKe=ad,bKe=eKe,wKe=s2,SKe=JS,_Ke=1,CKe=2,TKe=4,sce="[object Arguments]",EKe="[object Array]",MKe="[object Boolean]",AKe="[object Date]",kKe="[object Error]",oce="[object Function]",IKe="[object GeneratorFunction]",RKe="[object Map]",PKe="[object Number]",ace="[object Object]",NKe="[object RegExp]",$Ke="[object Set]",DKe="[object String]",LKe="[object Symbol]",OKe="[object WeakMap]",FKe="[object ArrayBuffer]",BKe="[object DataView]",UKe="[object Float32Array]",zKe="[object Float64Array]",VKe="[object Int8Array]",WKe="[object Int16Array]",GKe="[object Int32Array]",HKe="[object Uint8Array]",jKe="[object Uint8ClampedArray]",XKe="[object Uint16Array]",qKe="[object Uint32Array]",Gr={};Gr[sce]=Gr[EKe]=Gr[FKe]=Gr[BKe]=Gr[MKe]=Gr[AKe]=Gr[UKe]=Gr[zKe]=Gr[VKe]=Gr[WKe]=Gr[GKe]=Gr[RKe]=Gr[PKe]=Gr[ace]=Gr[NKe]=Gr[$Ke]=Gr[DKe]=Gr[LKe]=Gr[HKe]=Gr[jKe]=Gr[XKe]=Gr[qKe]=!0;Gr[kKe]=Gr[oce]=Gr[OKe]=!1;function oM(t,e,n,r,i,s){var o,a=e&_Ke,l=e&CKe,c=e&TKe;if(n&&(o=i?n(t,r,i,s):n(t)),o!==void 0)return o;if(!xKe(t))return t;var u=gKe(t);if(u){if(o=hKe(t),!a)return aKe(t,o)}else{var d=fKe(t),f=d==oce||d==IKe;if(vKe(t))return oKe(t,a);if(d==ace||d==sce||f&&!i){if(o=l||f?{}:mKe(t),!a)return l?cKe(t,sKe(o,t)):lKe(t,iKe(o,t))}else{if(!Gr[d])return i?t:{};o=pKe(t,d,a)}}s||(s=new tKe);var h=s.get(t);if(h)return h;s.set(t,o),bKe(t)?t.forEach(function(g){o.add(oM(g,e,n,g,t,s))}):yKe(t)&&t.forEach(function(g,m){o.set(m,oM(g,e,n,m,t,s))});var p=c?l?dKe:uKe:l?SKe:wKe,v=u?void 0:p(t);return nKe(v||t,function(g,m){v&&(m=g,g=t[m]),rKe(o,m,oM(g,e,n,m,t,s))}),o}var YKe=oM;function KKe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var ZKe=KKe,JKe=QS,QKe=ZKe;function eZe(t,e){return e.length<2?t:JKe(t,QKe(e,0,-1))}var tZe=eZe,nZe=Zy,rZe=Kse,iZe=tZe,sZe=Jy;function oZe(t,e){return e=nZe(e,t),t=iZe(t,e),t==null||delete t[sZe(rZe(e))]}var aZe=oZe,lZe=TU;function cZe(t){return lZe(t)?void 0:t}var uZe=cZe,dZe=JI,fZe=YKe,hZe=aZe,pZe=Zy,mZe=Ky,gZe=uZe,vZe=Nae,yZe=ice,xZe=1,bZe=2,wZe=4,SZe=vZe(function(t,e){var n={};if(t==null)return n;var r=!1;e=dZe(e,function(s){return s=pZe(s,t),r||(r=s.length>1),s}),mZe(t,yZe(t),n),r&&(n=fZe(n,xZe|bZe|wZe,gZe));for(var i=e.length;i--;)hZe(n,e[i]);return n}),_Ze=SZe;const lce=ls(_Ze);function Zu(){return Zu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zu.apply(this,arguments)}var b4={dotSize:4,noteWidth:120,noteTextOffset:8,animate:!0},CZe=function(t){var e=typeof t;return R.isValidElement(t)||e==="string"||e==="function"||e==="object"},TZe=function(t){var e=typeof t;return e==="string"||e==="function"},Ow=function(t){return t.type==="circle"},w4=function(t){return t.type==="dot"},Fw=function(t){return t.type==="rect"},EZe=function(t){var e=t.data,n=t.annotations,r=t.getPosition,i=t.getDimensions;return n.reduce(function(s,o){var a=o.offset||0;return[].concat(s,xqe(e,o.match).map(function(l){var c=r(l),u=i(l);return(Ow(o)||Fw(o))&&(u.size=u.size+2*a,u.width=u.width+2*a,u.height=u.height+2*a),Zu({},lce(o,["match","offset"]),c,u,{size:o.size||u.size,datum:l})}))},[])},MZe=function(t,e,n,r){var i=Math.atan2(r-e,n-t);return BGe(oR(i))},cce=function(t){var e,n,r=t.x,i=t.y,s=t.noteX,o=t.noteY,a=t.noteWidth,l=a===void 0?b4.noteWidth:a,c=t.noteTextOffset,u=c===void 0?b4.noteTextOffset:c;if(iY(s))e=r+s;else{if(s.abs===void 0)throw new Error("noteX should be either a number or an object containing an 'abs' property");e=s.abs}if(iY(o))n=i+o;else{if(o.abs===void 0)throw new Error("noteY should be either a number or an object containing an 'abs' property");n=o.abs}var d=r,f=i,h=MZe(r,i,e,n);if(Ow(t)){var p=Em(Kl(h),t.size/2);d+=p.x,f+=p.y}if(Fw(t)){var v=Math.round((h+90)/45)%8;v===0&&(f-=t.height/2),v===1&&(d+=t.width/2,f-=t.height/2),v===2&&(d+=t.width/2),v===3&&(d+=t.width/2,f+=t.height/2),v===4&&(f+=t.height/2),v===5&&(d-=t.width/2,f+=t.height/2),v===6&&(d-=t.width/2),v===7&&(d-=t.width/2,f-=t.height/2)}var g=e,m=e;return(h+90)%360>180?(g-=l,m-=l):m+=l,{points:[[d,f],[e,n],[m,n]],text:[g,n-u],angle:h+90}},Qz=function(t){var e=t.data,n=t.annotations,r=t.getPosition,i=t.getDimensions;return R.useMemo(function(){return EZe({data:e,annotations:n,getPosition:r,getDimensions:i})},[e,n,r,i])},AZe=function(t){var e=t.annotations;return R.useMemo(function(){return e.map(function(n){return Zu({},n,{computed:cce(Zu({},n))})})},[e])},kZe=function(t){return R.useMemo(function(){return cce(t)},[t])},IZe=function(t){var e=t.datum,n=t.x,r=t.y,i=t.note,s=Pr(),o=no(),a=o.animate,l=o.config,c=Jc({x:n,y:r,config:l,immediate:!a});return typeof i=="function"?R.createElement(i,{x:n,y:r,datum:e}):L.jsxs(L.Fragment,{children:[s.annotations.text.outlineWidth>0&&L.jsx(sr.text,{x:c.x,y:c.y,style:Zu({},s.annotations.text,{strokeLinejoin:"round",strokeWidth:2*s.annotations.text.outlineWidth,stroke:s.annotations.text.outlineColor}),children:i}),L.jsx(sr.text,{x:c.x,y:c.y,style:lce(s.annotations.text,["outlineWidth","outlineColor"]),children:i})]})},fY=function(t){var e=t.points,n=t.isOutline,r=n!==void 0&&n,i=Pr(),s=R.useMemo(function(){var l=e[0];return e.slice(1).reduce(function(c,u){return c+" L"+u[0]+","+u[1]},"M"+l[0]+","+l[1])},[e]),o=Gae(s);if(r&&i.annotations.link.outlineWidth<=0)return null;var a=Zu({},i.annotations.link);return r&&(a.strokeLinecap="square",a.strokeWidth=i.annotations.link.strokeWidth+2*i.annotations.link.outlineWidth,a.stroke=i.annotations.link.outlineColor,a.opacity=i.annotations.link.outlineOpacity),L.jsx(sr.path,{fill:"none",d:o,style:a})},RZe=function(t){var e=t.x,n=t.y,r=t.size,i=Pr(),s=no(),o=s.animate,a=s.config,l=Jc({x:e,y:n,radius:r/2,config:a,immediate:!o});return L.jsxs(L.Fragment,{children:[i.annotations.outline.outlineWidth>0&&L.jsx(sr.circle,{cx:l.x,cy:l.y,r:l.radius,style:Zu({},i.annotations.outline,{fill:"none",strokeWidth:i.annotations.outline.strokeWidth+2*i.annotations.outline.outlineWidth,stroke:i.annotations.outline.outlineColor,opacity:i.annotations.outline.outlineOpacity})}),L.jsx(sr.circle,{cx:l.x,cy:l.y,r:l.radius,style:i.annotations.outline})]})},PZe=function(t){var e=t.x,n=t.y,r=t.size,i=r===void 0?b4.dotSize:r,s=Pr(),o=no(),a=o.animate,l=o.config,c=Jc({x:e,y:n,radius:i/2,config:l,immediate:!a});return L.jsxs(L.Fragment,{children:[s.annotations.outline.outlineWidth>0&&L.jsx(sr.circle,{cx:c.x,cy:c.y,r:c.radius,style:Zu({},s.annotations.outline,{fill:"none",strokeWidth:2*s.annotations.outline.outlineWidth,stroke:s.annotations.outline.outlineColor,opacity:s.annotations.outline.outlineOpacity})}),L.jsx(sr.circle,{cx:c.x,cy:c.y,r:c.radius,style:s.annotations.symbol})]})},NZe=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,s=t.borderRadius,o=s===void 0?6:s,a=Pr(),l=no(),c=l.animate,u=l.config,d=Jc({x:e-r/2,y:n-i/2,width:r,height:i,config:u,immediate:!c});return L.jsxs(L.Fragment,{children:[a.annotations.outline.outlineWidth>0&&L.jsx(sr.rect,{x:d.x,y:d.y,rx:o,ry:o,width:d.width,height:d.height,style:Zu({},a.annotations.outline,{fill:"none",strokeWidth:a.annotations.outline.strokeWidth+2*a.annotations.outline.outlineWidth,stroke:a.annotations.outline.outlineColor,opacity:a.annotations.outline.outlineOpacity})}),L.jsx(sr.rect,{x:d.x,y:d.y,rx:o,ry:o,width:d.width,height:d.height,style:a.annotations.outline})]})},uce=function(t){var e=t.datum,n=t.x,r=t.y,i=t.note,s=kZe(t);if(!CZe(i))throw new Error("note should be a valid react element");return L.jsxs(L.Fragment,{children:[L.jsx(fY,{points:s.points,isOutline:!0}),Ow(t)&&L.jsx(RZe,{x:n,y:r,size:t.size}),w4(t)&&L.jsx(PZe,{x:n,y:r,size:t.size}),Fw(t)&&L.jsx(NZe,{x:n,y:r,width:t.width,height:t.height,borderRadius:t.borderRadius}),L.jsx(fY,{points:s.points}),L.jsx(IZe,{datum:e,x:s.text[0],y:s.text[1],note:i})]})},hY=function(t,e){e.forEach(function(n,r){var i=n[0],s=n[1];r===0?t.moveTo(i,s):t.lineTo(i,s)})},$Ze=function(t,e){var n=e.annotations,r=e.theme;n.length!==0&&(t.save(),n.forEach(function(i){if(!TZe(i.note))throw new Error("note is invalid for canvas implementation");r.annotations.link.outlineWidth>0&&(t.lineCap="square",t.strokeStyle=r.annotations.link.outlineColor,t.lineWidth=r.annotations.link.strokeWidth+2*r.annotations.link.outlineWidth,t.beginPath(),hY(t,i.computed.points),t.stroke(),t.lineCap="butt"),Ow(i)&&r.annotations.outline.outlineWidth>0&&(t.strokeStyle=r.annotations.outline.outlineColor,t.lineWidth=r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,t.beginPath(),t.arc(i.x,i.y,i.size/2,0,2*Math.PI),t.stroke()),w4(i)&&r.annotations.symbol.outlineWidth>0&&(t.strokeStyle=r.annotations.symbol.outlineColor,t.lineWidth=2*r.annotations.symbol.outlineWidth,t.beginPath(),t.arc(i.x,i.y,i.size/2,0,2*Math.PI),t.stroke()),Fw(i)&&r.annotations.outline.outlineWidth>0&&(t.strokeStyle=r.annotations.outline.outlineColor,t.lineWidth=r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,t.beginPath(),t.rect(i.x-i.width/2,i.y-i.height/2,i.width,i.height),t.stroke()),t.strokeStyle=r.annotations.link.stroke,t.lineWidth=r.annotations.link.strokeWidth,t.beginPath(),hY(t,i.computed.points),t.stroke(),Ow(i)&&(t.strokeStyle=r.annotations.outline.stroke,t.lineWidth=r.annotations.outline.strokeWidth,t.beginPath(),t.arc(i.x,i.y,i.size/2,0,2*Math.PI),t.stroke()),w4(i)&&(t.fillStyle=r.annotations.symbol.fill,t.beginPath(),t.arc(i.x,i.y,i.size/2,0,2*Math.PI),t.fill()),Fw(i)&&(t.strokeStyle=r.annotations.outline.stroke,t.lineWidth=r.annotations.outline.strokeWidth,t.beginPath(),t.rect(i.x-i.width/2,i.y-i.height/2,i.width,i.height),t.stroke()),typeof i.note=="function"?i.note(t,{datum:i.datum,x:i.computed.text[0],y:i.computed.text[1],theme:r}):(t.font=r.annotations.text.fontSize+"px "+r.annotations.text.fontFamily,t.textAlign="left",t.textBaseline="alphabetic",t.fillStyle=r.annotations.text.fill,t.strokeStyle=r.annotations.text.outlineColor,t.lineWidth=2*r.annotations.text.outlineWidth,r.annotations.text.outlineWidth>0&&(t.lineJoin="round",t.strokeText(i.note,i.computed.text[0],i.computed.text[1]),t.lineJoin="miter"),t.fillText(i.note,i.computed.text[0],i.computed.text[1]))}),t.restore())};function ea(){return ea=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ea.apply(this,arguments)}function DZe(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var Xs={layers:["grid","axes","cells","legends","annotations"],forceSquare:!1,xInnerPadding:0,xOuterPadding:0,yInnerPadding:0,yOuterPadding:0,sizeVariation:!1,opacity:1,activeOpacity:1,inactiveOpacity:.15,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",.8]]},enableGridX:!1,enableGridY:!1,enableLabels:!0,label:"formattedValue",labelTextColor:{from:"color",modifiers:[["darker",2]]},colors:{type:"sequential",scheme:"brown_blueGreen"},emptyColor:"#000000",legends:[],annotations:[],isInteractive:!0,hoverTarget:"rowColumn",tooltip:R.memo(function(t){var e=t.cell;return e.formattedValue===null?null:L.jsx(BI,{id:e.serieId+" - "+e.data.x,value:e.formattedValue,enableChip:!0,color:e.color})}),animate:!0,motionConfig:"gentle"},ur=ea({},Xs,{axisTop:{},axisRight:null,axisBottom:null,axisLeft:{},borderRadius:0,cellComponent:"rect"});ea({},Xs,{axisTop:{},axisRight:null,axisBottom:null,axisLeft:{},renderCell:"rect",pixelRatio:typeof window<"u"&&window.devicePixelRatio||1});var LZe=function(t){var e=t.width,n=t.height,r=t.rows,i=t.columns,s=e,o=n,a=0,l=0;if(t.forceSquare){var c=Math.max(e/i,0),u=Math.max(n/r,0),d=Math.min(c,u);a=(e-(s=d*i))/2,l=(n-(o=d*r))/2}return{offsetX:a,offsetY:l,width:s,height:o}},OZe=function(t){var e=t.data,n=t.width,r=t.height,i=t.xInnerPadding,s=t.xOuterPadding,o=t.yInnerPadding,a=t.yOuterPadding,l=t.forceSquare,c=new Set,u=[],d=[],f=[];e.forEach(function(A){u.push(A.id),A.data.forEach(function(M){c.add(M.x);var E=null;M.y!==void 0&&M.y!==null&&(d.push(M.y),E=M.y),f.push({id:A.id+"."+M.x,serieId:A.id,value:E,data:M})})});var h=Array.from(c),p=LZe({width:n,height:r,columns:h.length,rows:u.length,forceSquare:l}),v=p.width,g=p.height,m=p.offsetX,y=p.offsetY,x=v4(Ew().domain(h).range([0,v]).paddingOuter(s).paddingInner(i)),S=v4(Ew().domain(u).range([0,g]).paddingOuter(a).paddingInner(o)),_=x.bandwidth(),C=S.bandwidth(),T=f.map(function(A){return ea({},A,{x:x(A.data.x)+_/2,y:S(A.serieId)+C/2,width:_,height:C})});return{width:v,height:g,offsetX:m,offsetY:y,xScale:x,yScale:S,minValue:Math.min.apply(Math,d),maxValue:Math.max.apply(Math,d),cells:T}},FZe=function(t,e,n){if(!t)return function(){return 1};var r=i2().domain(t.values?t.values:[e,n]).range(t.sizes);return function(i){return i===null?1:r(i)}},BZe=function(t){return{x:t.x,y:t.y}},UZe=function(t){return{size:Math.max(t.width,t.height),width:t.width,height:t.height}},zZe=function(t){var e=t.data,n=t.width,r=t.height,i=t.xInnerPadding,s=t.xOuterPadding,o=t.yInnerPadding,a=t.yOuterPadding,l=t.forceSquare;return R.useMemo(function(){return OZe({data:e,width:n,height:r,xInnerPadding:i,xOuterPadding:s,yInnerPadding:o,yOuterPadding:a,forceSquare:l})},[e,n,r,i,s,o,a,l])},VZe={cell:function(t,e){return t.id===e.id},row:function(t,e){return t.serieId===e.serieId},column:function(t,e){return t.data.x===e.data.x},rowColumn:function(t,e){return t.serieId===e.serieId||t.data.x===e.data.x}},WZe=function(t){var e,n,r,i=t.cells,s=t.minValue,o=t.maxValue,a=t.sizeVariation,l=t.colors,c=t.emptyColor,u=t.opacity,d=t.activeOpacity,f=t.inactiveOpacity,h=t.borderColor,p=t.label,v=t.labelTextColor,g=t.valueFormat,m=t.activeIds,y=R.useMemo(function(){return FZe(e,n,r)},[e=a,n=s,r=o]),x=R.useMemo(function(){return typeof l=="function"?null:XXe(l,{min:s,max:o})},[l,s,o]),S=R.useCallback(function(E){if(E.value!==null){if(typeof l=="function")return l(E);if(x!==null)return x(E.value)}return c},[l,x,c]),_=Pr(),C=zc(h,_),T=zc(v,_),A=a2(g),M=qd(p);return{cells:R.useMemo(function(){return i.map(function(E){var P=u;m.length>0&&(P=m.includes(E.id)?d:f);var N=y(E.value),F=ea({},E,{width:E.width*N,height:E.height*N,formattedValue:E.value!==null?A(E.value):null,opacity:P});return F.label=M(F),F.color=S(F),F.borderColor=C(F),F.labelTextColor=T(F),F})},[i,y,S,C,T,A,M,m,u,d,f]),colorScale:x}},GZe=function(t){var e=t.data,n=t.valueFormat,r=t.width,i=t.height,s=t.xOuterPadding,o=s===void 0?Xs.xOuterPadding:s,a=t.xInnerPadding,l=a===void 0?Xs.xInnerPadding:a,c=t.yOuterPadding,u=c===void 0?Xs.yOuterPadding:c,d=t.yInnerPadding,f=d===void 0?Xs.yInnerPadding:d,h=t.forceSquare,p=h===void 0?Xs.forceSquare:h,v=t.sizeVariation,g=v===void 0?Xs.sizeVariation:v,m=t.colors,y=m===void 0?Xs.colors:m,x=t.emptyColor,S=x===void 0?Xs.emptyColor:x,_=t.opacity,C=_===void 0?Xs.opacity:_,T=t.activeOpacity,A=T===void 0?Xs.activeOpacity:T,M=t.inactiveOpacity,E=M===void 0?Xs.inactiveOpacity:M,P=t.borderColor,N=P===void 0?Xs.borderColor:P,F=t.label,$=F===void 0?Xs.label:F,O=t.labelTextColor,z=O===void 0?Xs.labelTextColor:O,X=t.hoverTarget,D=X===void 0?Xs.hoverTarget:X,B=R.useState(null),V=B[0],W=B[1],j=zZe({data:e,width:r,height:i,xOuterPadding:o,xInnerPadding:l,yOuterPadding:u,yInnerPadding:f,forceSquare:p}),J=j.width,Q=j.height,te=j.offsetX,re=j.offsetY,se=j.cells,fe=j.xScale,ae=j.yScale,ye=j.minValue,le=j.maxValue,H=R.useMemo(function(){if(!V)return[];var we=VZe[D];return se.filter(function(Ee){return we(Ee,V)}).map(function(Ee){return Ee.id})},[se,V,D]),Me=WZe({cells:se,minValue:ye,maxValue:le,sizeVariation:g,colors:y,emptyColor:S,opacity:C,activeOpacity:A,inactiveOpacity:E,borderColor:N,label:$,labelTextColor:z,valueFormat:n,activeIds:H});return{width:J,height:Q,offsetX:te,offsetY:re,cells:Me.cells,xScale:fe,yScale:ae,colorScale:Me.colorScale,activeCell:V,setActiveCell:W}},HZe=function(t,e){return Qz({data:t,annotations:e,getPosition:BZe,getDimensions:UZe})},jZe=R.memo(function(t){var e=t.cell,n=t.borderWidth,r=t.borderRadius,i=t.animatedProps,s=t.onMouseEnter,o=t.onMouseMove,a=t.onMouseLeave,l=t.onClick,c=t.enableLabels,u=Pr(),d=R.useMemo(function(){return{onMouseEnter:s?s(e):void 0,onMouseMove:o?o(e):void 0,onMouseLeave:a?a(e):void 0,onClick:l?l(e):void 0}},[e,s,o,a,l]);return L.jsxs(sr.g,ea({"data-testid":"cell."+e.id,style:{cursor:"pointer"},opacity:i.opacity},d,{transform:rc([i.x,i.y,i.scale],function(f,h,p){return"translate("+f+", "+h+") scale("+p+")"}),children:[L.jsx(sr.rect,{transform:rc([i.width,i.height],function(f,h){return"translate("+-.5*f+", "+-.5*h+")"}),fill:i.color,width:i.width,height:i.height,stroke:i.borderColor,strokeWidth:n,rx:r,ry:r},e.id),c&&L.jsx(sr.text,{textAnchor:"middle",dominantBaseline:"central",fill:i.labelTextColor,style:ea({},u.labels.text,{fill:void 0,userSelect:"none"}),children:e.label})]}))}),XZe=R.memo(function(t){var e=t.cell,n=t.borderWidth,r=t.animatedProps,i=t.onMouseEnter,s=t.onMouseMove,o=t.onMouseLeave,a=t.onClick,l=t.enableLabels,c=Pr(),u=R.useMemo(function(){return{onMouseEnter:i?i(e):void 0,onMouseMove:s?s(e):void 0,onMouseLeave:o?o(e):void 0,onClick:a?a(e):void 0}},[e,i,s,o,a]);return L.jsxs(sr.g,ea({"data-testid":"cell."+e.id,style:{cursor:"pointer"},opacity:r.opacity},u,{transform:rc([r.x,r.y],function(d,f){return"translate("+d+", "+f+")"}),children:[L.jsx(sr.circle,{r:rc([r.width,r.height],function(d,f){return Math.min(d,f)/2}),fill:r.color,fillOpacity:r.opacity,strokeWidth:n,stroke:r.borderColor}),l&&L.jsx(sr.text,{dominantBaseline:"central",textAnchor:"middle",fill:r.labelTextColor,style:ea({},c.labels.text,{fill:void 0}),children:e.label})]}))}),qZe=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height,color:t.color,opacity:0,borderColor:t.borderColor,labelTextColor:t.labelTextColor,scale:0}},U$=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height,color:t.color,opacity:t.opacity,borderColor:t.borderColor,labelTextColor:t.labelTextColor,scale:1}},YZe=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height,color:t.color,opacity:0,borderColor:t.borderColor,labelTextColor:t.labelTextColor,scale:0}},KZe=function(t){var e,n=t.cells,r=t.cellComponent,i=t.borderRadius,s=t.borderWidth,o=t.isInteractive,a=t.setActiveCell,l=t.onMouseEnter,c=t.onMouseMove,u=t.onMouseLeave,d=t.onClick,f=t.tooltip,h=t.enableLabels,p=no(),v=p.animate,g=p.config,m=Cg(n,{keys:function(M){return M.id},initial:U$,from:qZe,enter:U$,update:U$,leave:YZe,config:g,immediate:!v}),y=Wy(),x=y.showTooltipFromEvent,S=y.hideTooltip,_=R.useMemo(function(){if(o)return function(M){return function(E){x(R.createElement(f,{cell:M}),E),a(M),l==null||l(M,E)}}},[o,x,f,a,l]),C=R.useMemo(function(){if(o)return function(M){return function(E){x(R.createElement(f,{cell:M}),E),c==null||c(M,E)}}},[o,x,f,c]),T=R.useMemo(function(){if(o)return function(M){return function(E){S(),a(null),u==null||u(M,E)}}},[o,S,a,u]),A=R.useMemo(function(){if(o)return function(M){return function(E){d==null||d(M,E)}}},[o,d]);return e=r==="rect"?jZe:r==="circle"?XZe:r,L.jsx(L.Fragment,{children:m(function(M,E){return R.createElement(e,{cell:E,borderRadius:i,borderWidth:s,animatedProps:M,enableLabels:h,onMouseEnter:_,onMouseMove:C,onMouseLeave:T,onClick:A})})})},ZZe=function(t){var e=t.cells,n=t.annotations,r=HZe(e,n);return L.jsx(L.Fragment,{children:r.map(function(i,s){return L.jsx(uce,ea({},i),s)})})},JZe=["isInteractive","animate","motionConfig","theme","renderWrapper"],QZe=function(t){var e=t.data,n=t.layers,r=n===void 0?ur.layers:n,i=t.valueFormat,s=t.width,o=t.height,a=t.margin,l=t.forceSquare,c=l===void 0?ur.forceSquare:l,u=t.xInnerPadding,d=u===void 0?ur.xInnerPadding:u,f=t.xOuterPadding,h=f===void 0?ur.xOuterPadding:f,p=t.yInnerPadding,v=p===void 0?ur.yInnerPadding:p,g=t.yOuterPadding,m=g===void 0?ur.yOuterPadding:g,y=t.sizeVariation,x=y===void 0?ur.sizeVariation:y,S=t.cellComponent,_=S===void 0?ur.cellComponent:S,C=t.opacity,T=C===void 0?ur.opacity:C,A=t.activeOpacity,M=A===void 0?ur.activeOpacity:A,E=t.inactiveOpacity,P=E===void 0?ur.inactiveOpacity:E,N=t.borderRadius,F=N===void 0?ur.borderRadius:N,$=t.borderWidth,O=$===void 0?ur.borderWidth:$,z=t.borderColor,X=z===void 0?ur.borderColor:z,D=t.enableGridX,B=D===void 0?ur.enableGridX:D,V=t.enableGridY,W=V===void 0?ur.enableGridY:V,j=t.axisTop,J=j===void 0?ur.axisTop:j,Q=t.axisRight,te=Q===void 0?ur.axisRight:Q,re=t.axisBottom,se=re===void 0?ur.axisBottom:re,fe=t.axisLeft,ae=fe===void 0?ur.axisLeft:fe,ye=t.enableLabels,le=ye===void 0?ur.enableLabels:ye,H=t.label,Me=H===void 0?ur.label:H,we=t.labelTextColor,Ee=we===void 0?ur.labelTextColor:we,ge=t.colors,qe=ge===void 0?ur.colors:ge,Ae=t.emptyColor,ee=Ae===void 0?ur.emptyColor:Ae,Y=t.legends,oe=Y===void 0?ur.legends:Y,xe=t.annotations,Se=xe===void 0?ur.annotations:xe,be=t.isInteractive,Re=be===void 0?ur.isInteractive:be,Ke=t.onMouseEnter,ze=t.onMouseMove,Ne=t.onMouseLeave,De=t.onClick,Ve=t.hoverTarget,gt=Ve===void 0?ur.hoverTarget:Ve,ct=t.tooltip,Ye=ct===void 0?ur.tooltip:ct,Xe=t.role,Le=t.ariaLabel,pe=t.ariaLabelledBy,He=t.ariaDescribedBy,ot=o2(s,o,a),et=ot.margin,Ie=ot.innerWidth,Ce=ot.innerHeight,ut=ot.outerWidth,dt=ot.outerHeight,yt=GZe({data:e,valueFormat:i,width:Ie,height:Ce,forceSquare:c,xInnerPadding:d,xOuterPadding:h,yInnerPadding:v,yOuterPadding:m,sizeVariation:x,colors:qe,emptyColor:ee,opacity:T,activeOpacity:M,inactiveOpacity:P,borderColor:X,label:Me,labelTextColor:Ee,hoverTarget:gt}),vt=yt.width,Vt=yt.height,It=yt.offsetX,en=yt.offsetY,Dt=yt.xScale,mt=yt.yScale,jt=yt.cells,mn=yt.colorScale,fn=yt.activeCell,_t=yt.setActiveCell,Lt=R.useMemo(function(){return ea({},et,{top:et.top+en,left:et.left+It})},[et,It,en]),Pt={grid:null,axes:null,cells:null,legends:null,annotations:null};r.includes("grid")&&(Pt.grid=L.jsx(Oz,{width:vt,height:Vt,xScale:B?Dt:null,yScale:W?mt:null},"grid")),r.includes("axes")&&(Pt.axes=L.jsx(Lz,{xScale:Dt,yScale:mt,width:vt,height:Vt,top:J,right:te,bottom:se,left:ae},"axes")),r.includes("cells")&&(Pt.cells=L.jsx(R.Fragment,{children:L.jsx(KZe,{cells:jt,cellComponent:_,borderRadius:F,borderWidth:O,isInteractive:Re,setActiveCell:_t,onMouseEnter:Ke,onMouseMove:ze,onMouseLeave:Ne,onClick:De,tooltip:Ye,enableLabels:le})},"cells")),r.includes("legends")&&mn!==null&&(Pt.legends=L.jsx(R.Fragment,{children:oe.map(function(Wt,Cn){return R.createElement(iqe,ea({},Wt,{key:Cn,containerWidth:vt,containerHeight:Vt,scale:mn}))})},"legends")),r.includes("annotations")&&Se.length>0&&(Pt.annotations=L.jsx(ZZe,{cells:jt,annotations:Se},"annotations"));var bt={cells:jt,activeCell:fn,setActiveCell:_t};return L.jsx(l2,{width:ut,height:dt,margin:Object.assign({},Lt,{top:Lt.top,left:Lt.left}),role:Xe,ariaLabel:Le,ariaLabelledBy:pe,ariaDescribedBy:He,children:r.map(function(Wt,Cn){var Z;return typeof Wt=="function"?L.jsx(R.Fragment,{children:R.createElement(Wt,bt)},Cn):(Z=Pt==null?void 0:Pt[Wt])!=null?Z:null})})},eJe=function(t){var e=t.isInteractive,n=e===void 0?ur.isInteractive:e,r=t.animate,i=r===void 0?ur.animate:r,s=t.motionConfig,o=s===void 0?ur.motionConfig:s,a=t.theme,l=t.renderWrapper,c=DZe(t,JZe);return L.jsx(tx,{animate:i,isInteractive:n,motionConfig:o,renderWrapper:l,theme:a,children:L.jsx(QZe,ea({isInteractive:n},c))})},tJe=function(t){return L.jsx(nx,{children:function(e){var n=e.width,r=e.height;return L.jsx(eJe,ea({width:n,height:r},t))}})},e6={},nJe=GS;Object.defineProperty(e6,"__esModule",{value:!0});var fR=e6.default=void 0,rJe=nJe(HS()),iJe=L,sJe=(0,rJe.default)((0,iJe.jsx)("path",{d:"M16.48 2.52c3.27 1.55 5.61 4.72 5.97 8.48h1.5C23.44 4.84 18.29 0 12 0l-.66.03 3.81 3.81 1.33-1.32zm-6.25-.77c-.59-.59-1.54-.59-2.12 0L1.75 8.11c-.59.59-.59 1.54 0 2.12l12.02 12.02c.59.59 1.54.59 2.12 0l6.36-6.36c.59-.59.59-1.54 0-2.12L10.23 1.75zm4.6 19.44L2.81 9.17l6.36-6.36 12.02 12.02-6.36 6.36zm-7.31.29C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32z"}),"ScreenRotation");fR=e6.default=sJe;var t6={},oJe=GS;Object.defineProperty(t6,"__esModule",{value:!0});var hR=t6.default=void 0,aJe=oJe(HS()),lJe=L,cJe=(0,aJe.default)((0,lJe.jsx)("path",{d:"M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z"}),"AspectRatio");hR=t6.default=cJe;const uJe=()=>{const[t,e]=R.useState(null),[n,r]=R.useState("Game of Thrones"),[i,s]=R.useState([]),[o,a]=R.useState(dJe),[l,c]=R.useState(!1),u=(d,f)=>{const h=Object.keys(f.Tv_Show_Name).filter(g=>f.Tv_Show_Name[g]===d).map(Number);var p=[];h.forEach(g=>{var m={},y=[],x={},S=p.findIndex(_=>_.id===`Season ${f.seasonNumber[g]}`);S>-1?(x.x=`Ep. ${f.episodeNumber[g]}`,x.y=f.averageRating[g],y=p[S].data,y.push(x),p[S].data=y):(m.id=`Season ${f.seasonNumber[g]}`,x.x=`Ep. ${f.episodeNumber[g]}`,x.y=f.averageRating[g],y.push(x),m.data=y,p.push(m))});var v=!1;p.forEach(g=>{g.data.length>35&&(v=!0,console.log("Exited"))}),!v&&(p.sort((g,m)=>{const y=g.id.toUpperCase(),x=m.id.toUpperCase(),S=y.split(" "),_=x.split(" "),C=parseInt(S.slice(-1)[0]),T=parseInt(_.slice(-1)[0]);return C<T?-1:C>T?1:0}),p.forEach(g=>{g.data.sort((m,y)=>{const x=m.x.toUpperCase(),S=y.x.toUpperCase(),_=x.split(" "),C=S.split(" "),T=parseInt(_.slice(-1)[0]),A=parseInt(C.slice(-1)[0]);return T<A?-1:T>A?1:0})}),a(p))};return R.useEffect(()=>{(async()=>await pJe(hJe).then(d=>{const f=[];Array.from(new Set(Object.values(d.Tv_Show_Name))).forEach(h=>{const p={};p.title=h,f.push(p)}),e(d),f.sort((h,p)=>{const v=h.title.toUpperCase(),g=p.title.toUpperCase();return v<g?-1:v>g?1:0}),s(f)}))()},[]),L.jsx(L.Fragment,{children:i.length>0?L.jsxs(L.Fragment,{children:[L.jsx(Gn,{sx:{bgcolor:"white",width:250,m:"auto",borderRadius:"16px"},children:L.jsx(Nke,{open:l,onInputChange:(d,f)=>{f.length===0?l&&c(!1):l||c(!0)},onClose:()=>c(!1),id:"free-solo-2-demo",onChange:(d,f)=>r(f),options:i.map(d=>d.title),renderInput:d=>L.jsx(YPe,{...d,label:"Search input",InputProps:{...d.InputProps,type:"search"}})})}),L.jsx(Gn,{sx:{p:2,bgcolor:"black",width:250,m:"auto",borderRadius:"16px"},children:L.jsx(Is,{sx:{width:250,m:"auto",borderRadius:"16px"},variant:"contained",onClick:()=>{n&&u(n,t)},children:"Create Heat Map"})}),L.jsx(Gn,{sx:{height:75,color:"#ffffff",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"none",sm:"block"}},children:L.jsxs(un,{sx:{pt:2},variant:"h4",gutterBottom:!0,children:[n," Episode Ratings"]})}),L.jsx(Gn,{sx:{height:75,color:"#ffffff",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"block",sm:"none"}},children:L.jsxs(un,{sx:{pt:2},variant:"h4",gutterBottom:!0,children:["Please Rotate Phone ",L.jsx(fR,{})," or Enlarge Screen ",L.jsx(hR,{})]})}),L.jsx(Gn,{sx:{height:800,color:"black",bgcolor:"white",mt:5,display:{xs:"none",sm:"block"}},children:L.jsx(fJe,{data:o,seriesTitle:n})})]}):L.jsx(un,{children:"LOADING..."})})},dJe=[{id:"Season 1",data:[{x:"Ep. 1",y:8.9},{x:"Ep. 2",y:8.6},{x:"Ep. 3",y:8.5},{x:"Ep. 4",y:8.6},{x:"Ep. 5",y:9},{x:"Ep. 6",y:9.1},{x:"Ep. 7",y:9.1},{x:"Ep. 8",y:8.9},{x:"Ep. 9",y:9.6},{x:"Ep. 10",y:9.4}]},{id:"Season 2",data:[{x:"Ep. 1",y:8.6},{x:"Ep. 2",y:8.4},{x:"Ep. 3",y:8.7},{x:"Ep. 4",y:8.6},{x:"Ep. 5",y:8.6},{x:"Ep. 6",y:8.9},{x:"Ep. 7",y:8.8},{x:"Ep. 8",y:8.6},{x:"Ep. 9",y:9.7},{x:"Ep. 10",y:9.3}]},{id:"Season 3",data:[{x:"Ep. 1",y:8.6},{x:"Ep. 2",y:8.5},{x:"Ep. 3",y:8.7},{x:"Ep. 4",y:9.5},{x:"Ep. 5",y:8.9},{x:"Ep. 6",y:8.7},{x:"Ep. 7",y:8.6},{x:"Ep. 8",y:8.9},{x:"Ep. 9",y:9.9},{x:"Ep. 10",y:9.1}]},{id:"Season 4",data:[{x:"Ep. 1",y:9},{x:"Ep. 2",y:9.7},{x:"Ep. 3",y:8.7},{x:"Ep. 4",y:8.7},{x:"Ep. 5",y:8.6},{x:"Ep. 6",y:9.7},{x:"Ep. 7",y:9},{x:"Ep. 8",y:9.7},{x:"Ep. 9",y:9.6},{x:"Ep. 10",y:9.6}]},{id:"Season 5",data:[{x:"Ep. 1",y:8.3},{x:"Ep. 2",y:8.3},{x:"Ep. 3",y:8.4},{x:"Ep. 4",y:8.5},{x:"Ep. 5",y:8.5},{x:"Ep. 6",y:7.9},{x:"Ep. 7",y:8.8},{x:"Ep. 8",y:9.8},{x:"Ep. 9",y:9.4},{x:"Ep. 10",y:9.1}]},{id:"Season 6",data:[{x:"Ep. 1",y:8.4},{x:"Ep. 2",y:9.3},{x:"Ep. 3",y:8.6},{x:"Ep. 4",y:9},{x:"Ep. 5",y:9.7},{x:"Ep. 6",y:8.3},{x:"Ep. 7",y:8.5},{x:"Ep. 8",y:8.3},{x:"Ep. 9",y:9.9},{x:"Ep. 10",y:9.9}]},{id:"Season 7",data:[{x:"Ep. 1",y:8.5},{x:"Ep. 2",y:8.8},{x:"Ep. 3",y:9.1},{x:"Ep. 4",y:9.7},{x:"Ep. 5",y:8.7},{x:"Ep. 6",y:9},{x:"Ep. 7",y:9.4}]},{id:"Season 8",data:[{x:"Ep. 1",y:7.6},{x:"Ep. 2",y:7.9},{x:"Ep. 3",y:7.5},{x:"Ep. 4",y:5.5},{x:"Ep. 5",y:6},{x:"Ep. 6",y:4}]}],fJe=({data:t,seriesTitle:e})=>L.jsx(tJe,{data:t,theme:{background:"black",text:{fontSize:20,fill:"#85d5f5"},legends:{title:{text:{fontSize:20}}}},margin:{top:75,right:90,bottom:75,left:150},valueFormat:">-.2s",axisTop:{tickSize:5,tickPadding:5,tickRotation:-90,legend:" ",legendPosition:"left",legendOffset:-55},borderRadius:15,xInnerPadding:.05,yOuterPadding:.05,yInnerPadding:.05,forceSquare:!0,borderColor:{from:"color",modifiers:[["darker","0.5"]]},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:" ",legendPosition:"middle",legendOffset:-72},colors:{type:"diverging",scheme:"red_yellow_green",divergeAt:.55,minValue:0,maxValue:10},emptyColor:"#555555",labelTextColor:{from:"color",modifiers:[["darker","50"]]},legends:[{anchor:"bottom",translateX:0,translateY:40,length:500,thickness:15,direction:"row",tickPosition:"after",tickSize:9,tickSpacing:6,tickOverlap:!1,tickFormat:" >-.2s",title:"Ratings",titleAlign:"start",titleOffset:5}]}),hJe="https://raw.githubusercontent.com/edwin-torres/ratings/main/episodes.json";async function pJe(t){return new Promise((e,n)=>{fetch(t).then(r=>r.json()).then(r=>e(r))})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const sx="160",qp={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Yp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},dce=0,S4=1,fce=2,mJe=3,hce=0,pR=1,Sb=2,Tc=3,Ju=0,rs=1,Qa=2,gJe=2,Yd=0,km=1,_4=2,C4=3,T4=4,pce=5,qf=100,mce=101,gce=102,E4=103,M4=104,vce=200,yce=201,xce=202,bce=203,PA=204,NA=205,wce=206,Sce=207,_ce=208,Cce=209,Tce=210,Ece=211,Mce=212,Ace=213,kce=214,Ice=0,Rce=1,Pce=2,Bw=3,Nce=4,$ce=5,Dce=6,Lce=7,c2=0,Oce=1,Fce=2,Bu=0,Bce=1,Uce=2,zce=3,n6=4,Vce=5,Wce=6,A4="attached",Gce="detached",mR=300,Qu=301,kh=302,my=303,Uw=304,ox=306,zw=1e3,To=1001,Vw=1002,Vi=1003,$A=1004,vJe=1004,_b=1005,yJe=1005,Mr=1006,r6=1007,xJe=1007,Ih=1008,bJe=1008,Uu=1009,Hce=1010,jce=1011,gR=1012,i6=1013,zd=1014,Ps=1015,Ao=1016,s6=1017,o6=1018,ph=1020,Xce=1021,Eo=1023,qce=1024,Yce=1025,mh=1026,rg=1027,a6=1028,l6=1029,Kce=1030,c6=1031,u6=1033,aM=33776,lM=33777,cM=33778,uM=33779,k4=35840,I4=35841,R4=35842,P4=35843,d6=36196,N4=37492,$4=37496,D4=37808,L4=37809,O4=37810,F4=37811,B4=37812,U4=37813,z4=37814,V4=37815,W4=37816,G4=37817,H4=37818,j4=37819,X4=37820,q4=37821,dM=36492,Y4=36494,K4=36495,Zce=36283,Z4=36284,J4=36285,Q4=36286,Jce=2200,Qce=2201,eue=2202,Ww=2300,Gw=2301,fM=2302,fm=2400,hm=2401,Hw=2402,vR=2500,f6=2501,wJe=0,SJe=1,_Je=2,h6=3e3,gh=3001,tue=3200,p6=3201,Yh=0,nue=1,el="",ps="srgb",ed="srgb-linear",yR="display-p3",u2="display-p3-linear",jw="linear",Hr="srgb",Xw="rec709",qw="p3",CJe=0,Kp=7680,TJe=7681,EJe=7682,MJe=7683,AJe=34055,kJe=34056,IJe=5386,RJe=512,PJe=513,NJe=514,$Je=515,DJe=516,LJe=517,OJe=518,eF=519,rue=512,iue=513,sue=514,m6=515,oue=516,aue=517,lue=518,cue=519,Yw=35044,FJe=35048,BJe=35040,UJe=35045,zJe=35049,VJe=35041,WJe=35046,GJe=35050,HJe=35042,jJe="100",tF="300 es",DA=1035,Oc=2e3,gy=2001;class ld{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const po=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let pY=1234567;const Im=Math.PI/180,vy=180/Math.PI;function ll(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(po[t&255]+po[t>>8&255]+po[t>>16&255]+po[t>>24&255]+"-"+po[e&255]+po[e>>8&255]+"-"+po[e>>16&15|64]+po[e>>24&255]+"-"+po[n&63|128]+po[n>>8&255]+"-"+po[n>>16&255]+po[n>>24&255]+po[r&255]+po[r>>8&255]+po[r>>16&255]+po[r>>24&255]).toLowerCase()}function Mi(t,e,n){return Math.max(e,Math.min(n,t))}function g6(t,e){return(t%e+e)%e}function XJe(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function qJe(t,e,n){return t!==e?(n-t)/(e-t):0}function Cb(t,e,n){return(1-n)*t+n*e}function YJe(t,e,n,r){return Cb(t,e,1-Math.exp(-n*r))}function KJe(t,e=1){return e-Math.abs(g6(t,e*2)-e)}function ZJe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function JJe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function QJe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function eQe(t,e){return t+Math.random()*(e-t)}function tQe(t){return t*(.5-Math.random())}function nQe(t){t!==void 0&&(pY=t);let e=pY+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function rQe(t){return t*Im}function iQe(t){return t*vy}function nF(t){return(t&t-1)===0&&t!==0}function sQe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function LA(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function oQe(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),f=o((e-r)/2),h=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":t.set(a*u,l*d,l*f,a*c);break;case"YZY":t.set(l*f,a*u,l*d,a*c);break;case"ZXZ":t.set(l*d,l*f,a*u,a*c);break;case"XZX":t.set(a*u,l*p,l*h,a*c);break;case"YXY":t.set(l*h,a*u,l*p,a*c);break;case"ZYZ":t.set(l*p,l*h,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function xa(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Fn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const uue={DEG2RAD:Im,RAD2DEG:vy,generateUUID:ll,clamp:Mi,euclideanModulo:g6,mapLinear:XJe,inverseLerp:qJe,lerp:Cb,damp:YJe,pingpong:KJe,smoothstep:ZJe,smootherstep:JJe,randInt:QJe,randFloat:eQe,randFloatSpread:tQe,seededRandom:nQe,degToRad:rQe,radToDeg:iQe,isPowerOfTwo:nF,ceilPowerOfTwo:sQe,floorPowerOfTwo:LA,setQuaternionFromProperEuler:oQe,normalize:Fn,denormalize:xa};class lt{constructor(e=0,n=0){lt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Mi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class On{constructor(e,n,r,i,s,o,a,l,c){On.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c)}set(e,n,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],f=r[2],h=r[5],p=r[8],v=i[0],g=i[3],m=i[6],y=i[1],x=i[4],S=i[7],_=i[2],C=i[5],T=i[8];return s[0]=o*v+a*y+l*_,s[3]=o*g+a*x+l*C,s[6]=o*m+a*S+l*T,s[1]=c*v+u*y+d*_,s[4]=c*g+u*x+d*C,s[7]=c*m+u*S+d*T,s[2]=f*v+h*y+p*_,s[5]=f*g+h*x+p*C,s[8]=f*m+h*S+p*T,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,f=a*l-u*s,h=c*s-o*l,p=n*d+r*f+i*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/p;return e[0]=d*v,e[1]=(i*c-u*r)*v,e[2]=(a*r-i*o)*v,e[3]=f*v,e[4]=(u*n-i*l)*v,e[5]=(i*s-a*n)*v,e[6]=h*v,e[7]=(r*l-c*n)*v,e[8]=(o*n-r*s)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(z$.makeScale(e,n)),this}rotate(e){return this.premultiply(z$.makeRotation(-e)),this}translate(e,n){return this.premultiply(z$.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const z$=new On;function due(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const aQe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function fv(t,e){return new aQe[t](e)}function Kw(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function fue(){const t=Kw("canvas");return t.style.display="block",t}const mY={};function Tb(t){t in mY||(mY[t]=!0,console.warn(t))}const gY=new On().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),vY=new On().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),yT={[ed]:{transfer:jw,primaries:Xw,toReference:t=>t,fromReference:t=>t},[ps]:{transfer:Hr,primaries:Xw,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[u2]:{transfer:jw,primaries:qw,toReference:t=>t.applyMatrix3(vY),fromReference:t=>t.applyMatrix3(gY)},[yR]:{transfer:Hr,primaries:qw,toReference:t=>t.convertSRGBToLinear().applyMatrix3(vY),fromReference:t=>t.applyMatrix3(gY).convertLinearToSRGB()}},lQe=new Set([ed,u2]),Er={enabled:!0,_workingColorSpace:ed,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!lQe.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=yT[e].toReference,i=yT[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return yT[t].primaries},getTransfer:function(t){return t===el?jw:yT[t].transfer}};function Vv(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function V$(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let y0;class v6{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{y0===void 0&&(y0=Kw("canvas")),y0.width=e.width,y0.height=e.height;const r=y0.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=y0}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Kw("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Vv(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Vv(n[r]/255)*255):n[r]=Vv(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let cQe=0;class pm{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:cQe++}),this.uuid=ll(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(W$(i[o].image)):s.push(W$(i[o]))}else s=W$(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function W$(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?v6.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let uQe=0;class di extends ld{constructor(e=di.DEFAULT_IMAGE,n=di.DEFAULT_MAPPING,r=To,i=To,s=Mr,o=Ih,a=Eo,l=Uu,c=di.DEFAULT_ANISOTROPY,u=el){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uQe++}),this.uuid=ll(),this.name="",this.source=new pm(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new lt(0,0),this.repeat=new lt(1,1),this.center=new lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new On,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(Tb("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===gh?ps:el),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==mR)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case zw:e.x=e.x-Math.floor(e.x);break;case To:e.x=e.x<0?0:1;break;case Vw:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case zw:e.y=e.y-Math.floor(e.y);break;case To:e.y=e.y<0?0:1;break;case Vw:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Tb("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===ps?gh:h6}set encoding(e){Tb("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===gh?ps:el}}di.DEFAULT_IMAGE=null;di.DEFAULT_MAPPING=mR;di.DEFAULT_ANISOTROPY=1;class rr{constructor(e=0,n=0,r=0,i=1){rr.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],h=l[5],p=l[9],v=l[2],g=l[6],m=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-v)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+v)<.1&&Math.abs(p+g)<.1&&Math.abs(c+h+m-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(c+1)/2,S=(h+1)/2,_=(m+1)/2,C=(u+f)/4,T=(d+v)/4,A=(p+g)/4;return x>S&&x>_?x<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(x),i=C/r,s=T/r):S>_?S<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(S),r=C/i,s=A/i):_<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(_),r=T/s,i=A/s),this.set(r,i,s,n),this}let y=Math.sqrt((g-p)*(g-p)+(d-v)*(d-v)+(f-u)*(f-u));return Math.abs(y)<.001&&(y=1),this.x=(g-p)/y,this.y=(d-v)/y,this.z=(f-u)/y,this.w=Math.acos((c+h+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class hue extends ld{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new rr(0,0,e,n),this.scissorTest=!1,this.viewport=new rr(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(Tb("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===gh?ps:el),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Mr,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new di(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new pm(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ic extends hue{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class xR extends di{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Vi,this.minFilter=Vi,this.wrapR=To,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class dQe extends ic{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new xR(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class y6 extends di{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Vi,this.minFilter=Vi,this.wrapR=To,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fQe extends ic{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new y6(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class hQe extends ic{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Ro{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const f=s[o+0],h=s[o+1],p=s[o+2],v=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=f,e[n+1]=h,e[n+2]=p,e[n+3]=v;return}if(d!==v||l!==f||c!==h||u!==p){let g=1-a;const m=l*f+c*h+u*p+d*v,y=m>=0?1:-1,x=1-m*m;if(x>Number.EPSILON){const _=Math.sqrt(x),C=Math.atan2(_,m*y);g=Math.sin(g*C)/_,a=Math.sin(a*C)/_}const S=a*y;if(l=l*g+f*S,c=c*g+h*S,u=u*g+p*S,d=d*g+v*S,g===1-a){const _=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=_,c*=_,u*=_,d*=_}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],f=s[o+1],h=s[o+2],p=s[o+3];return e[n]=a*p+u*d+l*h-c*f,e[n+1]=l*p+u*f+c*d-a*h,e[n+2]=c*p+u*h+a*f-l*d,e[n+3]=u*p-a*d-l*f-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),f=l(r/2),h=l(i/2),p=l(s/2);switch(o){case"XYZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"YXZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"ZXY":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"ZYX":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"YZX":this._x=f*u*d+c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d-f*h*p;break;case"XZY":this._x=f*u*d-c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],f=r+a+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(u-l)*h,this._y=(s-c)*h,this._z=(o-i)*h}else if(r>a&&r>d){const h=2*Math.sqrt(1+r-a-d);this._w=(u-l)/h,this._x=.25*h,this._y=(i+o)/h,this._z=(s+c)/h}else if(a>d){const h=2*Math.sqrt(1+a-r-d);this._w=(s-c)/h,this._x=(i+o)/h,this._y=.25*h,this._z=(l+u)/h}else{const h=2*Math.sqrt(1+d-r-a);this._w=(o-i)/h,this._x=(s+c)/h,this._y=(l+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Mi(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const h=1-n;return this._w=h*o+n*this._w,this._x=h*r+n*this._x,this._y=h*i+n*this._y,this._z=h*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,f=Math.sin(n*u)/c;return this._w=o*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class me{constructor(e=0,n=0,r=0){me.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(yY.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(yY.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*n-s*i),d=2*(s*r-o*n);return this.x=n+l*c+o*d-a*u,this.y=r+l*u+a*c-s*d,this.z=i+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return G$.copy(this).projectOnVector(e),this.sub(G$)}reflect(e){return this.sub(G$.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Mi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const G$=new me,yY=new Ro;class xs{constructor(e=new me(1/0,1/0,1/0),n=new me(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(vc.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(vc.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=vc.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,vc):vc.fromBufferAttribute(s,o),vc.applyMatrix4(e.matrixWorld),this.expandByPoint(vc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),xT.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),xT.copy(r.boundingBox)),xT.applyMatrix4(e.matrixWorld),this.union(xT)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,vc),vc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(b1),bT.subVectors(this.max,b1),x0.subVectors(e.a,b1),b0.subVectors(e.b,b1),w0.subVectors(e.c,b1),Pf.subVectors(b0,x0),Nf.subVectors(w0,b0),Ap.subVectors(x0,w0);let n=[0,-Pf.z,Pf.y,0,-Nf.z,Nf.y,0,-Ap.z,Ap.y,Pf.z,0,-Pf.x,Nf.z,0,-Nf.x,Ap.z,0,-Ap.x,-Pf.y,Pf.x,0,-Nf.y,Nf.x,0,-Ap.y,Ap.x,0];return!H$(n,x0,b0,w0,bT)||(n=[1,0,0,0,1,0,0,0,1],!H$(n,x0,b0,w0,bT))?!1:(wT.crossVectors(Pf,Nf),n=[wT.x,wT.y,wT.z],H$(n,x0,b0,w0,bT))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(vc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(wd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),wd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),wd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),wd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),wd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),wd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),wd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),wd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(wd),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const wd=[new me,new me,new me,new me,new me,new me,new me,new me],vc=new me,xT=new xs,x0=new me,b0=new me,w0=new me,Pf=new me,Nf=new me,Ap=new me,b1=new me,bT=new me,wT=new me,kp=new me;function H$(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){kp.fromArray(t,s);const a=i.x*Math.abs(kp.x)+i.y*Math.abs(kp.y)+i.z*Math.abs(kp.z),l=e.dot(kp),c=n.dot(kp),u=r.dot(kp);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const pQe=new xs,w1=new me,j$=new me;class bs{constructor(e=new me,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):pQe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;w1.subVectors(e,this.center);const n=w1.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(w1,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(j$.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(w1.copy(e.center).add(j$)),this.expandByPoint(w1.copy(e.center).sub(j$))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Sd=new me,X$=new me,ST=new me,$f=new me,q$=new me,_T=new me,Y$=new me;class Ig{constructor(e=new me,n=new me(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Sd)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Sd.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Sd.copy(this.origin).addScaledVector(this.direction,n),Sd.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){X$.copy(e).add(n).multiplyScalar(.5),ST.copy(n).sub(e).normalize(),$f.copy(this.origin).sub(X$);const s=e.distanceTo(n)*.5,o=-this.direction.dot(ST),a=$f.dot(this.direction),l=-$f.dot(ST),c=$f.lengthSq(),u=Math.abs(1-o*o);let d,f,h,p;if(u>0)if(d=o*l-a,f=o*a-l,p=s*u,d>=0)if(f>=-p)if(f<=p){const v=1/u;d*=v,f*=v,h=d*(d+o*f+2*a)+f*(o*d+f+2*l)+c}else f=s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*l)+c;else f<=-p?(d=Math.max(0,-(-o*s+a)),f=d>0?-s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c):f<=p?(d=0,f=Math.min(Math.max(-s,-l),s),h=f*(f+2*l)+c):(d=Math.max(0,-(o*s+a)),f=d>0?s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c);else f=o>0?-s:s,d=Math.max(0,-(o*f+a)),h=-d*d+f*(f+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(X$).addScaledVector(ST,f),h}intersectSphere(e,n){Sd.subVectors(e.center,this.origin);const r=Sd.dot(this.direction),i=Sd.dot(Sd)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(r=(e.min.x-f.x)*c,i=(e.max.x-f.x)*c):(r=(e.max.x-f.x)*c,i=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Sd)!==null}intersectTriangle(e,n,r,i,s){q$.subVectors(n,e),_T.subVectors(r,e),Y$.crossVectors(q$,_T);let o=this.direction.dot(Y$),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;$f.subVectors(this.origin,e);const l=a*this.direction.dot(_T.crossVectors($f,_T));if(l<0)return null;const c=a*this.direction.dot(q$.cross($f));if(c<0||l+c>o)return null;const u=-a*$f.dot(Y$);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class _n{constructor(e,n,r,i,s,o,a,l,c,u,d,f,h,p,v,g){_n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c,u,d,f,h,p,v,g)}set(e,n,r,i,s,o,a,l,c,u,d,f,h,p,v,g){const m=this.elements;return m[0]=e,m[4]=n,m[8]=r,m[12]=i,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=u,m[10]=d,m[14]=f,m[3]=h,m[7]=p,m[11]=v,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new _n().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/S0.setFromMatrixColumn(e,0).length(),s=1/S0.setFromMatrixColumn(e,1).length(),o=1/S0.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=o*u,h=o*d,p=a*u,v=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=h+p*c,n[5]=f-v*c,n[9]=-a*l,n[2]=v-f*c,n[6]=p+h*c,n[10]=o*l}else if(e.order==="YXZ"){const f=l*u,h=l*d,p=c*u,v=c*d;n[0]=f+v*a,n[4]=p*a-h,n[8]=o*c,n[1]=o*d,n[5]=o*u,n[9]=-a,n[2]=h*a-p,n[6]=v+f*a,n[10]=o*l}else if(e.order==="ZXY"){const f=l*u,h=l*d,p=c*u,v=c*d;n[0]=f-v*a,n[4]=-o*d,n[8]=p+h*a,n[1]=h+p*a,n[5]=o*u,n[9]=v-f*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const f=o*u,h=o*d,p=a*u,v=a*d;n[0]=l*u,n[4]=p*c-h,n[8]=f*c+v,n[1]=l*d,n[5]=v*c+f,n[9]=h*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const f=o*l,h=o*c,p=a*l,v=a*c;n[0]=l*u,n[4]=v-f*d,n[8]=p*d+h,n[1]=d,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=h*d+p,n[10]=f-v*d}else if(e.order==="XZY"){const f=o*l,h=o*c,p=a*l,v=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=f*d+v,n[5]=o*u,n[9]=h*d-p,n[2]=p*d-h,n[6]=a*u,n[10]=v*d+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mQe,e,gQe)}lookAt(e,n,r){const i=this.elements;return ja.subVectors(e,n),ja.lengthSq()===0&&(ja.z=1),ja.normalize(),Df.crossVectors(r,ja),Df.lengthSq()===0&&(Math.abs(r.z)===1?ja.x+=1e-4:ja.z+=1e-4,ja.normalize(),Df.crossVectors(r,ja)),Df.normalize(),CT.crossVectors(ja,Df),i[0]=Df.x,i[4]=CT.x,i[8]=ja.x,i[1]=Df.y,i[5]=CT.y,i[9]=ja.y,i[2]=Df.z,i[6]=CT.z,i[10]=ja.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],f=r[9],h=r[13],p=r[2],v=r[6],g=r[10],m=r[14],y=r[3],x=r[7],S=r[11],_=r[15],C=i[0],T=i[4],A=i[8],M=i[12],E=i[1],P=i[5],N=i[9],F=i[13],$=i[2],O=i[6],z=i[10],X=i[14],D=i[3],B=i[7],V=i[11],W=i[15];return s[0]=o*C+a*E+l*$+c*D,s[4]=o*T+a*P+l*O+c*B,s[8]=o*A+a*N+l*z+c*V,s[12]=o*M+a*F+l*X+c*W,s[1]=u*C+d*E+f*$+h*D,s[5]=u*T+d*P+f*O+h*B,s[9]=u*A+d*N+f*z+h*V,s[13]=u*M+d*F+f*X+h*W,s[2]=p*C+v*E+g*$+m*D,s[6]=p*T+v*P+g*O+m*B,s[10]=p*A+v*N+g*z+m*V,s[14]=p*M+v*F+g*X+m*W,s[3]=y*C+x*E+S*$+_*D,s[7]=y*T+x*P+S*O+_*B,s[11]=y*A+x*N+S*z+_*V,s[15]=y*M+x*F+S*X+_*W,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],h=e[14],p=e[3],v=e[7],g=e[11],m=e[15];return p*(+s*l*d-i*c*d-s*a*f+r*c*f+i*a*h-r*l*h)+v*(+n*l*h-n*c*f+s*o*f-i*o*h+i*c*u-s*l*u)+g*(+n*c*d-n*a*h-s*o*d+r*o*h+s*a*u-r*c*u)+m*(-i*a*u-n*l*d+n*a*f+i*o*d-r*o*f+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],v=e[13],g=e[14],m=e[15],y=d*g*c-v*f*c+v*l*h-a*g*h-d*l*m+a*f*m,x=p*f*c-u*g*c-p*l*h+o*g*h+u*l*m-o*f*m,S=u*v*c-p*d*c+p*a*h-o*v*h-u*a*m+o*d*m,_=p*d*l-u*v*l-p*a*f+o*v*f+u*a*g-o*d*g,C=n*y+r*x+i*S+s*_;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/C;return e[0]=y*T,e[1]=(v*f*s-d*g*s-v*i*h+r*g*h+d*i*m-r*f*m)*T,e[2]=(a*g*s-v*l*s+v*i*c-r*g*c-a*i*m+r*l*m)*T,e[3]=(d*l*s-a*f*s-d*i*c+r*f*c+a*i*h-r*l*h)*T,e[4]=x*T,e[5]=(u*g*s-p*f*s+p*i*h-n*g*h-u*i*m+n*f*m)*T,e[6]=(p*l*s-o*g*s-p*i*c+n*g*c+o*i*m-n*l*m)*T,e[7]=(o*f*s-u*l*s+u*i*c-n*f*c-o*i*h+n*l*h)*T,e[8]=S*T,e[9]=(p*d*s-u*v*s-p*r*h+n*v*h+u*r*m-n*d*m)*T,e[10]=(o*v*s-p*a*s+p*r*c-n*v*c-o*r*m+n*a*m)*T,e[11]=(u*a*s-o*d*s-u*r*c+n*d*c+o*r*h-n*a*h)*T,e[12]=_*T,e[13]=(u*v*i-p*d*i+p*r*f-n*v*f-u*r*g+n*d*g)*T,e[14]=(p*a*i-o*v*i-p*r*l+n*v*l+o*r*g-n*a*g)*T,e[15]=(o*d*i-u*a*i+u*r*l-n*d*l-o*r*f+n*a*f)*T,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,d=a+a,f=s*c,h=s*u,p=s*d,v=o*u,g=o*d,m=a*d,y=l*c,x=l*u,S=l*d,_=r.x,C=r.y,T=r.z;return i[0]=(1-(v+m))*_,i[1]=(h+S)*_,i[2]=(p-x)*_,i[3]=0,i[4]=(h-S)*C,i[5]=(1-(f+m))*C,i[6]=(g+y)*C,i[7]=0,i[8]=(p+x)*T,i[9]=(g-y)*T,i[10]=(1-(f+v))*T,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=S0.set(i[0],i[1],i[2]).length();const o=S0.set(i[4],i[5],i[6]).length(),a=S0.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],yc.copy(this);const c=1/s,u=1/o,d=1/a;return yc.elements[0]*=c,yc.elements[1]*=c,yc.elements[2]*=c,yc.elements[4]*=u,yc.elements[5]*=u,yc.elements[6]*=u,yc.elements[8]*=d,yc.elements[9]*=d,yc.elements[10]*=d,n.setFromRotationMatrix(yc),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=Oc){const l=this.elements,c=2*s/(n-e),u=2*s/(r-i),d=(n+e)/(n-e),f=(r+i)/(r-i);let h,p;if(a===Oc)h=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===gy)h=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=Oc){const l=this.elements,c=1/(n-e),u=1/(r-i),d=1/(o-s),f=(n+e)*c,h=(r+i)*u;let p,v;if(a===Oc)p=(o+s)*d,v=-2*d;else if(a===gy)p=s*d,v=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=v,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const S0=new me,yc=new _n,mQe=new me(0,0,0),gQe=new me(1,1,1),Df=new me,CT=new me,ja=new me,xY=new _n,bY=new Ro;class d2{constructor(e=0,n=0,r=0,i=d2.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],f=i[6],h=i[10];switch(n){case"XYZ":this._y=Math.asin(Mi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Mi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Mi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Mi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Mi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-Mi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return xY.makeRotationFromQuaternion(e),this.setFromRotationMatrix(xY,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return bY.setFromEuler(this),this.setFromQuaternion(bY,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}d2.DEFAULT_ORDER="XYZ";class Rm{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let vQe=0;const wY=new me,_0=new Ro,_d=new _n,TT=new me,S1=new me,yQe=new me,xQe=new Ro,SY=new me(1,0,0),_Y=new me(0,1,0),CY=new me(0,0,1),bQe={type:"added"},wQe={type:"removed"};class xr extends ld{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vQe++}),this.uuid=ll(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xr.DEFAULT_UP.clone();const e=new me,n=new d2,r=new Ro,i=new me(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new _n},normalMatrix:{value:new On}}),this.matrix=new _n,this.matrixWorld=new _n,this.matrixAutoUpdate=xr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=xr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Rm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return _0.setFromAxisAngle(e,n),this.quaternion.multiply(_0),this}rotateOnWorldAxis(e,n){return _0.setFromAxisAngle(e,n),this.quaternion.premultiply(_0),this}rotateX(e){return this.rotateOnAxis(SY,e)}rotateY(e){return this.rotateOnAxis(_Y,e)}rotateZ(e){return this.rotateOnAxis(CY,e)}translateOnAxis(e,n){return wY.copy(e).applyQuaternion(this.quaternion),this.position.add(wY.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(SY,e)}translateY(e){return this.translateOnAxis(_Y,e)}translateZ(e){return this.translateOnAxis(CY,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_d.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?TT.copy(e):TT.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),S1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_d.lookAt(S1,TT,this.up):_d.lookAt(TT,S1,this.up),this.quaternion.setFromRotationMatrix(_d),i&&(_d.extractRotation(i.matrixWorld),_0.setFromRotationMatrix(_d),this.quaternion.premultiply(_0.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(bQe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(wQe)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_d.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_d.multiply(e.parent.matrixWorld)),e.applyMatrix4(_d),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(S1,e,yQe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(S1,xQe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),f=o(e.skeletons),h=o(e.animations),p=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),f.length>0&&(r.skeletons=f),h.length>0&&(r.animations=h),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}xr.DEFAULT_UP=new me(0,1,0);xr.DEFAULT_MATRIX_AUTO_UPDATE=!0;xr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const xc=new me,Cd=new me,K$=new me,Td=new me,C0=new me,T0=new me,TY=new me,Z$=new me,J$=new me,Q$=new me;let ET=!1;class ya{constructor(e=new me,n=new me,r=new me){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),xc.subVectors(e,n),i.cross(xc);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){xc.subVectors(i,n),Cd.subVectors(r,n),K$.subVectors(e,n);const o=xc.dot(xc),a=xc.dot(Cd),l=xc.dot(K$),c=Cd.dot(Cd),u=Cd.dot(K$),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const f=1/d,h=(c*l-a*u)*f,p=(o*u-a*l)*f;return s.set(1-h-p,p,h)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Td)===null?!1:Td.x>=0&&Td.y>=0&&Td.x+Td.y<=1}static getUV(e,n,r,i,s,o,a,l){return ET===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ET=!0),this.getInterpolation(e,n,r,i,s,o,a,l)}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,Td)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Td.x),l.addScaledVector(o,Td.y),l.addScaledVector(a,Td.z),l)}static isFrontFacing(e,n,r,i){return xc.subVectors(r,n),Cd.subVectors(e,n),xc.cross(Cd).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return xc.subVectors(this.c,this.b),Cd.subVectors(this.a,this.b),xc.cross(Cd).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ya.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return ya.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return ET===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),ET=!0),ya.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}getInterpolation(e,n,r,i,s){return ya.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return ya.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ya.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;C0.subVectors(i,r),T0.subVectors(s,r),Z$.subVectors(e,r);const l=C0.dot(Z$),c=T0.dot(Z$);if(l<=0&&c<=0)return n.copy(r);J$.subVectors(e,i);const u=C0.dot(J$),d=T0.dot(J$);if(u>=0&&d<=u)return n.copy(i);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(r).addScaledVector(C0,o);Q$.subVectors(e,s);const h=C0.dot(Q$),p=T0.dot(Q$);if(p>=0&&h<=p)return n.copy(s);const v=h*c-l*p;if(v<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(r).addScaledVector(T0,a);const g=u*p-h*d;if(g<=0&&d-u>=0&&h-p>=0)return TY.subVectors(s,i),a=(d-u)/(d-u+(h-p)),n.copy(i).addScaledVector(TY,a);const m=1/(g+v+f);return o=v*m,a=f*m,n.copy(r).addScaledVector(C0,o).addScaledVector(T0,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const pue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Lf={h:0,s:0,l:0},MT={h:0,s:0,l:0};function eD(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class zt{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ps){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Er.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Er.workingColorSpace){return this.r=e,this.g=n,this.b=r,Er.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Er.workingColorSpace){if(e=g6(e,1),n=Mi(n,0,1),r=Mi(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=eD(o,s,e+1/3),this.g=eD(o,s,e),this.b=eD(o,s,e-1/3)}return Er.toWorkingColorSpace(this,i),this}setStyle(e,n=ps){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=ps){const r=pue[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Vv(e.r),this.g=Vv(e.g),this.b=Vv(e.b),this}copyLinearToSRGB(e){return this.r=V$(e.r),this.g=V$(e.g),this.b=V$(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ps){return Er.fromWorkingColorSpace(mo.copy(this),e),Math.round(Mi(mo.r*255,0,255))*65536+Math.round(Mi(mo.g*255,0,255))*256+Math.round(Mi(mo.b*255,0,255))}getHexString(e=ps){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Er.workingColorSpace){Er.fromWorkingColorSpace(mo.copy(this),n);const r=mo.r,i=mo.g,s=mo.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=Er.workingColorSpace){return Er.fromWorkingColorSpace(mo.copy(this),n),e.r=mo.r,e.g=mo.g,e.b=mo.b,e}getStyle(e=ps){Er.fromWorkingColorSpace(mo.copy(this),e);const n=mo.r,r=mo.g,i=mo.b;return e!==ps?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Lf),this.setHSL(Lf.h+e,Lf.s+n,Lf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Lf),e.getHSL(MT);const r=Cb(Lf.h,MT.h,n),i=Cb(Lf.s,MT.s,n),s=Cb(Lf.l,MT.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const mo=new zt;zt.NAMES=pue;let SQe=0;class ro extends ld{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:SQe++}),this.uuid=ll(),this.name="",this.type="Material",this.blending=km,this.side=Ju,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=PA,this.blendDst=NA,this.blendEquation=qf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new zt(0,0,0),this.blendAlpha=0,this.depthFunc=Bw,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=eF,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Kp,this.stencilZFail=Kp,this.stencilZPass=Kp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==km&&(r.blending=this.blending),this.side!==Ju&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==PA&&(r.blendSrc=this.blendSrc),this.blendDst!==NA&&(r.blendDst=this.blendDst),this.blendEquation!==qf&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Bw&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==eF&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Kp&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Kp&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Kp&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class mf extends ro{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=c2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const $d=_Qe();function _Qe(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function pa(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Mi(t,-65504,65504),$d.floatView[0]=t;const e=$d.uint32View[0],n=e>>23&511;return $d.baseTable[n]+((e&8388607)>>$d.shiftTable[n])}function j1(t){const e=t>>10;return $d.uint32View[0]=$d.mantissaTable[$d.offsetTable[e]+(t&1023)]+$d.exponentTable[e],$d.floatView[0]}const mm={toHalfFloat:pa,fromHalfFloat:j1},Ki=new me,AT=new lt;class kr{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=Yw,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Ps,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)AT.fromBufferAttribute(this,n),AT.applyMatrix3(e),this.setXY(n,AT.x,AT.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Ki.fromBufferAttribute(this,n),Ki.applyMatrix3(e),this.setXYZ(n,Ki.x,Ki.y,Ki.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Ki.fromBufferAttribute(this,n),Ki.applyMatrix4(e),this.setXYZ(n,Ki.x,Ki.y,Ki.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Ki.fromBufferAttribute(this,n),Ki.applyNormalMatrix(e),this.setXYZ(n,Ki.x,Ki.y,Ki.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Ki.fromBufferAttribute(this,n),Ki.transformDirection(e),this.setXYZ(n,Ki.x,Ki.y,Ki.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=xa(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Fn(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=xa(n,this.array)),n}setX(e,n){return this.normalized&&(n=Fn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=xa(n,this.array)),n}setY(e,n){return this.normalized&&(n=Fn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=xa(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Fn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=xa(n,this.array)),n}setW(e,n){return this.normalized&&(n=Fn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Fn(n,this.array),r=Fn(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Fn(n,this.array),r=Fn(r,this.array),i=Fn(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Fn(n,this.array),r=Fn(r,this.array),i=Fn(i,this.array),s=Fn(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Yw&&(e.usage=this.usage),e}}class CQe extends kr{constructor(e,n,r){super(new Int8Array(e),n,r)}}class TQe extends kr{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class EQe extends kr{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class MQe extends kr{constructor(e,n,r){super(new Int16Array(e),n,r)}}class x6 extends kr{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class AQe extends kr{constructor(e,n,r){super(new Int32Array(e),n,r)}}class b6 extends kr{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class kQe extends kr{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=j1(this.array[e*this.itemSize]);return this.normalized&&(n=xa(n,this.array)),n}setX(e,n){return this.normalized&&(n=Fn(n,this.array)),this.array[e*this.itemSize]=pa(n),this}getY(e){let n=j1(this.array[e*this.itemSize+1]);return this.normalized&&(n=xa(n,this.array)),n}setY(e,n){return this.normalized&&(n=Fn(n,this.array)),this.array[e*this.itemSize+1]=pa(n),this}getZ(e){let n=j1(this.array[e*this.itemSize+2]);return this.normalized&&(n=xa(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Fn(n,this.array)),this.array[e*this.itemSize+2]=pa(n),this}getW(e){let n=j1(this.array[e*this.itemSize+3]);return this.normalized&&(n=xa(n,this.array)),n}setW(e,n){return this.normalized&&(n=Fn(n,this.array)),this.array[e*this.itemSize+3]=pa(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Fn(n,this.array),r=Fn(r,this.array)),this.array[e+0]=pa(n),this.array[e+1]=pa(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Fn(n,this.array),r=Fn(r,this.array),i=Fn(i,this.array)),this.array[e+0]=pa(n),this.array[e+1]=pa(r),this.array[e+2]=pa(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Fn(n,this.array),r=Fn(r,this.array),i=Fn(i,this.array),s=Fn(s,this.array)),this.array[e+0]=pa(n),this.array[e+1]=pa(r),this.array[e+2]=pa(i),this.array[e+3]=pa(s),this}}class Zt extends kr{constructor(e,n,r){super(new Float32Array(e),n,r)}}class IQe extends kr{constructor(e,n,r){super(new Float64Array(e),n,r)}}let RQe=0;const Ml=new _n,tD=new xr,E0=new me,Xa=new xs,_1=new xs,As=new me;class Ln extends ld{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:RQe++}),this.uuid=ll(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(due(e)?b6:x6)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new On().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ml.makeRotationFromQuaternion(e),this.applyMatrix4(Ml),this}rotateX(e){return Ml.makeRotationX(e),this.applyMatrix4(Ml),this}rotateY(e){return Ml.makeRotationY(e),this.applyMatrix4(Ml),this}rotateZ(e){return Ml.makeRotationZ(e),this.applyMatrix4(Ml),this}translate(e,n,r){return Ml.makeTranslation(e,n,r),this.applyMatrix4(Ml),this}scale(e,n,r){return Ml.makeScale(e,n,r),this.applyMatrix4(Ml),this}lookAt(e){return tD.lookAt(e),tD.updateMatrix(),this.applyMatrix4(tD.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(E0).negate(),this.translate(E0.x,E0.y,E0.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Zt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xs);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new me(-1/0,-1/0,-1/0),new me(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];Xa.setFromBufferAttribute(s),this.morphTargetsRelative?(As.addVectors(this.boundingBox.min,Xa.min),this.boundingBox.expandByPoint(As),As.addVectors(this.boundingBox.max,Xa.max),this.boundingBox.expandByPoint(As)):(this.boundingBox.expandByPoint(Xa.min),this.boundingBox.expandByPoint(Xa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bs);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new me,1/0);return}if(e){const r=this.boundingSphere.center;if(Xa.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];_1.setFromBufferAttribute(a),this.morphTargetsRelative?(As.addVectors(Xa.min,_1.min),Xa.expandByPoint(As),As.addVectors(Xa.max,_1.max),Xa.expandByPoint(As)):(Xa.expandByPoint(_1.min),Xa.expandByPoint(_1.max))}Xa.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)As.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(As));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)As.fromBufferAttribute(a,c),l&&(E0.fromBufferAttribute(e,c),As.add(E0)),i=Math.max(i,r.distanceToSquared(As))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,o=n.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new kr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let E=0;E<a;E++)c[E]=new me,u[E]=new me;const d=new me,f=new me,h=new me,p=new lt,v=new lt,g=new lt,m=new me,y=new me;function x(E,P,N){d.fromArray(i,E*3),f.fromArray(i,P*3),h.fromArray(i,N*3),p.fromArray(o,E*2),v.fromArray(o,P*2),g.fromArray(o,N*2),f.sub(d),h.sub(d),v.sub(p),g.sub(p);const F=1/(v.x*g.y-g.x*v.y);isFinite(F)&&(m.copy(f).multiplyScalar(g.y).addScaledVector(h,-v.y).multiplyScalar(F),y.copy(h).multiplyScalar(v.x).addScaledVector(f,-g.x).multiplyScalar(F),c[E].add(m),c[P].add(m),c[N].add(m),u[E].add(y),u[P].add(y),u[N].add(y))}let S=this.groups;S.length===0&&(S=[{start:0,count:r.length}]);for(let E=0,P=S.length;E<P;++E){const N=S[E],F=N.start,$=N.count;for(let O=F,z=F+$;O<z;O+=3)x(r[O+0],r[O+1],r[O+2])}const _=new me,C=new me,T=new me,A=new me;function M(E){T.fromArray(s,E*3),A.copy(T);const P=c[E];_.copy(P),_.sub(T.multiplyScalar(T.dot(P))).normalize(),C.crossVectors(A,P);const F=C.dot(u[E])<0?-1:1;l[E*4]=_.x,l[E*4+1]=_.y,l[E*4+2]=_.z,l[E*4+3]=F}for(let E=0,P=S.length;E<P;++E){const N=S[E],F=N.start,$=N.count;for(let O=F,z=F+$;O<z;O+=3)M(r[O+0]),M(r[O+1]),M(r[O+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new kr(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let f=0,h=r.count;f<h;f++)r.setXYZ(f,0,0,0);const i=new me,s=new me,o=new me,a=new me,l=new me,c=new me,u=new me,d=new me;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),v=e.getX(f+1),g=e.getX(f+2);i.fromBufferAttribute(n,p),s.fromBufferAttribute(n,v),o.fromBufferAttribute(n,g),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,p),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,g),a.add(u),l.add(u),c.add(u),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(g,c.x,c.y,c.z)}else for(let f=0,h=n.count;f<h;f+=3)i.fromBufferAttribute(n,f+0),s.fromBufferAttribute(n,f+1),o.fromBufferAttribute(n,f+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(f+0,u.x,u.y,u.z),r.setXYZ(f+1,u.x,u.y,u.z),r.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)As.fromBufferAttribute(e,n),As.normalize(),e.setXYZ(n,As.x,As.y,As.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let h=0,p=0;for(let v=0,g=l.length;v<g;v++){a.isInterleavedBufferAttribute?h=l[v]*a.data.stride+a.offset:h=l[v]*u;for(let m=0;m<u;m++)f[p++]=c[h++]}return new kr(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Ln,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=c[u],h=e(f,r);l.push(h)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d];u.push(h.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,h=d.length;f<h;f++)u.push(d[f].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const EY=new _n,Ip=new Ig,kT=new bs,MY=new me,M0=new me,A0=new me,k0=new me,nD=new me,IT=new me,RT=new lt,PT=new lt,NT=new lt,AY=new me,kY=new me,IY=new me,$T=new me,DT=new me;class ci extends xr{constructor(e=new Ln,n=new mf){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){IT.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(nD.fromBufferAttribute(d,e),o?IT.addScaledVector(nD,u):IT.addScaledVector(nD.sub(n),u))}n.add(IT)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),kT.copy(r.boundingSphere),kT.applyMatrix4(s),Ip.copy(e.ray).recast(e.near),!(kT.containsPoint(Ip.origin)===!1&&(Ip.intersectSphere(kT,MY)===null||Ip.origin.distanceToSquared(MY)>(e.far-e.near)**2))&&(EY.copy(s).invert(),Ip.copy(e.ray).applyMatrix4(EY),!(r.boundingBox!==null&&Ip.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Ip)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,f=s.groups,h=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,v=f.length;p<v;p++){const g=f[p],m=o[g.materialIndex],y=Math.max(g.start,h.start),x=Math.min(a.count,Math.min(g.start+g.count,h.start+h.count));for(let S=y,_=x;S<_;S+=3){const C=a.getX(S),T=a.getX(S+1),A=a.getX(S+2);i=LT(this,m,e,r,c,u,d,C,T,A),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const p=Math.max(0,h.start),v=Math.min(a.count,h.start+h.count);for(let g=p,m=v;g<m;g+=3){const y=a.getX(g),x=a.getX(g+1),S=a.getX(g+2);i=LT(this,o,e,r,c,u,d,y,x,S),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,v=f.length;p<v;p++){const g=f[p],m=o[g.materialIndex],y=Math.max(g.start,h.start),x=Math.min(l.count,Math.min(g.start+g.count,h.start+h.count));for(let S=y,_=x;S<_;S+=3){const C=S,T=S+1,A=S+2;i=LT(this,m,e,r,c,u,d,C,T,A),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const p=Math.max(0,h.start),v=Math.min(l.count,h.start+h.count);for(let g=p,m=v;g<m;g+=3){const y=g,x=g+1,S=g+2;i=LT(this,o,e,r,c,u,d,y,x,S),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}}}function PQe(t,e,n,r,i,s,o,a){let l;if(e.side===rs?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Ju,a),l===null)return null;DT.copy(a),DT.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(DT);return c<n.near||c>n.far?null:{distance:c,point:DT.clone(),object:t}}function LT(t,e,n,r,i,s,o,a,l,c){t.getVertexPosition(a,M0),t.getVertexPosition(l,A0),t.getVertexPosition(c,k0);const u=PQe(t,e,n,r,M0,A0,k0,$T);if(u){i&&(RT.fromBufferAttribute(i,a),PT.fromBufferAttribute(i,l),NT.fromBufferAttribute(i,c),u.uv=ya.getInterpolation($T,M0,A0,k0,RT,PT,NT,new lt)),s&&(RT.fromBufferAttribute(s,a),PT.fromBufferAttribute(s,l),NT.fromBufferAttribute(s,c),u.uv1=ya.getInterpolation($T,M0,A0,k0,RT,PT,NT,new lt),u.uv2=u.uv1),o&&(AY.fromBufferAttribute(o,a),kY.fromBufferAttribute(o,l),IY.fromBufferAttribute(o,c),u.normal=ya.getInterpolation($T,M0,A0,k0,AY,kY,IY,new me),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new me,materialIndex:0};ya.getNormal(M0,A0,k0,d.normal),u.face=d}return u}class Rg extends Ln{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,r,n,e,o,s,0),p("z","y","x",1,-1,r,n,-e,o,s,1),p("x","z","y",1,1,e,r,n,i,o,2),p("x","z","y",1,-1,e,r,-n,i,o,3),p("x","y","z",1,-1,e,n,r,i,s,4),p("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Zt(c,3)),this.setAttribute("normal",new Zt(u,3)),this.setAttribute("uv",new Zt(d,2));function p(v,g,m,y,x,S,_,C,T,A,M){const E=S/T,P=_/A,N=S/2,F=_/2,$=C/2,O=T+1,z=A+1;let X=0,D=0;const B=new me;for(let V=0;V<z;V++){const W=V*P-F;for(let j=0;j<O;j++){const J=j*E-N;B[v]=J*y,B[g]=W*x,B[m]=$,c.push(B.x,B.y,B.z),B[v]=0,B[g]=0,B[m]=C>0?1:-1,u.push(B.x,B.y,B.z),d.push(j/T),d.push(1-V/A),X+=1}}for(let V=0;V<A;V++)for(let W=0;W<T;W++){const j=f+W+O*V,J=f+W+O*(V+1),Q=f+(W+1)+O*(V+1),te=f+(W+1)+O*V;l.push(j,J,te),l.push(J,Q,te),D+=6}a.addGroup(h,D,M),h+=D,f+=X}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function yy(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Go(t){const e={};for(let n=0;n<t.length;n++){const r=yy(t[n]);for(const i in r)e[i]=r[i]}return e}function NQe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function mue(t){return t.getRenderTarget()===null?t.outputColorSpace:Er.workingColorSpace}const Zw={clone:yy,merge:Go};var $Qe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,DQe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class sc extends ro{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=$Qe,this.fragmentShader=DQe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=yy(e.uniforms),this.uniformsGroups=NQe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class f2 extends xr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new _n,this.projectionMatrix=new _n,this.projectionMatrixInverse=new _n,this.coordinateSystem=Oc}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let Ai=class extends f2{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=vy*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Im*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return vy*2*Math.atan(Math.tan(Im*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Im*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const I0=-90,R0=1;class gue extends xr{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ai(I0,R0,e,n);i.layers=this.layers,this.add(i);const s=new Ai(I0,R0,e,n);s.layers=this.layers,this.add(s);const o=new Ai(I0,R0,e,n);o.layers=this.layers,this.add(o);const a=new Ai(I0,R0,e,n);a.layers=this.layers,this.add(a);const l=new Ai(I0,R0,e,n);l.layers=this.layers,this.add(l);const c=new Ai(I0,R0,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,l]=n;for(const c of n)this.remove(c);if(e===Oc)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===gy)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,o),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(d,f,h),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class h2 extends di{constructor(e,n,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:Qu,super(e,n,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class w6 extends ic{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(Tb("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===gh?ps:el),this.texture=new h2(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Mr}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Rg(5,5,5),s=new sc({name:"CubemapFromEquirect",uniforms:yy(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:rs,blending:Yd});s.uniforms.tEquirect.value=n;const o=new ci(i,s),a=n.minFilter;return n.minFilter===Ih&&(n.minFilter=Mr),new gue(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const rD=new me,LQe=new me,OQe=new On;class Id{constructor(e=new me(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=rD.subVectors(r,n).cross(LQe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(rD),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||OQe.getNormalMatrix(e),i=this.coplanarPoint(rD).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Rp=new bs,OT=new me;class p2{constructor(e=new Id,n=new Id,r=new Id,i=new Id,s=new Id,o=new Id){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Oc){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],f=i[7],h=i[8],p=i[9],v=i[10],g=i[11],m=i[12],y=i[13],x=i[14],S=i[15];if(r[0].setComponents(l-s,f-c,g-h,S-m).normalize(),r[1].setComponents(l+s,f+c,g+h,S+m).normalize(),r[2].setComponents(l+o,f+u,g+p,S+y).normalize(),r[3].setComponents(l-o,f-u,g-p,S-y).normalize(),r[4].setComponents(l-a,f-d,g-v,S-x).normalize(),n===Oc)r[5].setComponents(l+a,f+d,g+v,S+x).normalize();else if(n===gy)r[5].setComponents(a,d,v,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Rp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Rp.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Rp)}intersectsSprite(e){return Rp.center.set(0,0,0),Rp.radius=.7071067811865476,Rp.applyMatrix4(e.matrixWorld),this.intersectsSphere(Rp)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(OT.x=i.normal.x>0?e.max.x:e.min.x,OT.y=i.normal.y>0?e.max.y:e.min.y,OT.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(OT)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function vue(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function FQe(t,e){const n=e.isWebGL2,r=new WeakMap;function i(c,u){const d=c.array,f=c.usage,h=d.byteLength,p=t.createBuffer();t.bindBuffer(u,p),t.bufferData(u,d,f),c.onUploadCallback();let v;if(d instanceof Float32Array)v=t.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(n)v=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=t.UNSIGNED_SHORT;else if(d instanceof Int16Array)v=t.SHORT;else if(d instanceof Uint32Array)v=t.UNSIGNED_INT;else if(d instanceof Int32Array)v=t.INT;else if(d instanceof Int8Array)v=t.BYTE;else if(d instanceof Uint8Array)v=t.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)v=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:p,type:v,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version,size:h}}function s(c,u,d){const f=u.array,h=u._updateRange,p=u.updateRanges;if(t.bindBuffer(d,c),h.count===-1&&p.length===0&&t.bufferSubData(d,0,f),p.length!==0){for(let v=0,g=p.length;v<g;v++){const m=p[v];n?t.bufferSubData(d,m.start*f.BYTES_PER_ELEMENT,f,m.start,m.count):t.bufferSubData(d,m.start*f.BYTES_PER_ELEMENT,f.subarray(m.start,m.start+m.count))}u.clearUpdateRanges()}h.count!==-1&&(n?t.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f,h.offset,h.count):t.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f.subarray(h.offset,h.offset+h.count)),h.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(t.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const f=r.get(c);(!f||f.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);if(d===void 0)r.set(c,i(c,u));else if(d.version<c.version){if(d.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(d.buffer,c,u),d.version=c.version}}return{get:o,remove:a,update:l}}class Kh extends Ln{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,f=n/l,h=[],p=[],v=[],g=[];for(let m=0;m<u;m++){const y=m*f-o;for(let x=0;x<c;x++){const S=x*d-s;p.push(S,-y,0),v.push(0,0,1),g.push(x/a),g.push(1-m/l)}}for(let m=0;m<l;m++)for(let y=0;y<a;y++){const x=y+c*m,S=y+c*(m+1),_=y+1+c*(m+1),C=y+1+c*m;h.push(x,S,C),h.push(S,_,C)}this.setIndex(h),this.setAttribute("position",new Zt(p,3)),this.setAttribute("normal",new Zt(v,3)),this.setAttribute("uv",new Zt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kh(e.width,e.height,e.widthSegments,e.heightSegments)}}var BQe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,UQe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,zQe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,VQe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,WQe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,GQe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,HQe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,jQe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,XQe=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,qQe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,YQe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,KQe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ZQe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,JQe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,QQe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,eet=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,tet=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,net=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ret=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,iet=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,set=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,oet=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,aet=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,cet=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,uet=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,det=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,fet=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,het=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,pet=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,met=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,get="gl_FragColor = linearToOutputTexel( gl_FragColor );",vet=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,yet=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,xet=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,bet=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,wet=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,_et=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Cet=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Tet=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Eet=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Met=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Aet=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ket=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Iet=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Ret=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Pet=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Net=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,$et=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Det=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Let=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Oet=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Fet=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Bet=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Uet=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,zet=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Vet=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Wet=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Get=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Het=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,jet=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Xet=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,qet=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Yet=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Ket=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Zet=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Jet=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Qet=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,ett=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,ttt=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,ntt=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,rtt=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,itt=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,stt=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ott=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,att=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ltt=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ctt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,utt=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,dtt=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ftt=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,htt=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ptt=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,mtt=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,gtt=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,vtt=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ytt=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,xtt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,btt=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,wtt=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Stt=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,_tt=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Ctt=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Ttt=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Ett=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Mtt=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Att=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ktt=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Itt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Rtt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Ptt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Ntt=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,$tt=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Dtt=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Ltt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ott=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ftt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Btt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Utt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ztt=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Vtt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Wtt=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Gtt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Htt=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,jtt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Xtt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,qtt=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Ytt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Ktt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ztt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Jtt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Qtt=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ent=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,tnt=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nnt=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rnt=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,int=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,snt=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ont=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ant=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,lnt=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cnt=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,unt=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,dnt=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fnt=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hnt=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pnt=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,mnt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,gnt=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vnt=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ynt=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xnt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Dn={alphahash_fragment:BQe,alphahash_pars_fragment:UQe,alphamap_fragment:zQe,alphamap_pars_fragment:VQe,alphatest_fragment:WQe,alphatest_pars_fragment:GQe,aomap_fragment:HQe,aomap_pars_fragment:jQe,batching_pars_vertex:XQe,batching_vertex:qQe,begin_vertex:YQe,beginnormal_vertex:KQe,bsdfs:ZQe,iridescence_fragment:JQe,bumpmap_pars_fragment:QQe,clipping_planes_fragment:eet,clipping_planes_pars_fragment:tet,clipping_planes_pars_vertex:net,clipping_planes_vertex:ret,color_fragment:iet,color_pars_fragment:set,color_pars_vertex:oet,color_vertex:aet,common:cet,cube_uv_reflection_fragment:uet,defaultnormal_vertex:det,displacementmap_pars_vertex:fet,displacementmap_vertex:het,emissivemap_fragment:pet,emissivemap_pars_fragment:met,colorspace_fragment:get,colorspace_pars_fragment:vet,envmap_fragment:yet,envmap_common_pars_fragment:xet,envmap_pars_fragment:bet,envmap_pars_vertex:wet,envmap_physical_pars_fragment:$et,envmap_vertex:_et,fog_vertex:Cet,fog_pars_vertex:Tet,fog_fragment:Eet,fog_pars_fragment:Met,gradientmap_pars_fragment:Aet,lightmap_fragment:ket,lightmap_pars_fragment:Iet,lights_lambert_fragment:Ret,lights_lambert_pars_fragment:Pet,lights_pars_begin:Net,lights_toon_fragment:Det,lights_toon_pars_fragment:Let,lights_phong_fragment:Oet,lights_phong_pars_fragment:Fet,lights_physical_fragment:Bet,lights_physical_pars_fragment:Uet,lights_fragment_begin:zet,lights_fragment_maps:Vet,lights_fragment_end:Wet,logdepthbuf_fragment:Get,logdepthbuf_pars_fragment:Het,logdepthbuf_pars_vertex:jet,logdepthbuf_vertex:Xet,map_fragment:qet,map_pars_fragment:Yet,map_particle_fragment:Ket,map_particle_pars_fragment:Zet,metalnessmap_fragment:Jet,metalnessmap_pars_fragment:Qet,morphcolor_vertex:ett,morphnormal_vertex:ttt,morphtarget_pars_vertex:ntt,morphtarget_vertex:rtt,normal_fragment_begin:itt,normal_fragment_maps:stt,normal_pars_fragment:ott,normal_pars_vertex:att,normal_vertex:ltt,normalmap_pars_fragment:ctt,clearcoat_normal_fragment_begin:utt,clearcoat_normal_fragment_maps:dtt,clearcoat_pars_fragment:ftt,iridescence_pars_fragment:htt,opaque_fragment:ptt,packing:mtt,premultiplied_alpha_fragment:gtt,project_vertex:vtt,dithering_fragment:ytt,dithering_pars_fragment:xtt,roughnessmap_fragment:btt,roughnessmap_pars_fragment:wtt,shadowmap_pars_fragment:Stt,shadowmap_pars_vertex:_tt,shadowmap_vertex:Ctt,shadowmask_pars_fragment:Ttt,skinbase_vertex:Ett,skinning_pars_vertex:Mtt,skinning_vertex:Att,skinnormal_vertex:ktt,specularmap_fragment:Itt,specularmap_pars_fragment:Rtt,tonemapping_fragment:Ptt,tonemapping_pars_fragment:Ntt,transmission_fragment:$tt,transmission_pars_fragment:Dtt,uv_pars_fragment:Ltt,uv_pars_vertex:Ott,uv_vertex:Ftt,worldpos_vertex:Btt,background_vert:Utt,background_frag:ztt,backgroundCube_vert:Vtt,backgroundCube_frag:Wtt,cube_vert:Gtt,cube_frag:Htt,depth_vert:jtt,depth_frag:Xtt,distanceRGBA_vert:qtt,distanceRGBA_frag:Ytt,equirect_vert:Ktt,equirect_frag:Ztt,linedashed_vert:Jtt,linedashed_frag:Qtt,meshbasic_vert:ent,meshbasic_frag:tnt,meshlambert_vert:nnt,meshlambert_frag:rnt,meshmatcap_vert:int,meshmatcap_frag:snt,meshnormal_vert:ont,meshnormal_frag:ant,meshphong_vert:lnt,meshphong_frag:cnt,meshphysical_vert:unt,meshphysical_frag:dnt,meshtoon_vert:fnt,meshtoon_frag:hnt,points_vert:pnt,points_frag:mnt,shadow_vert:gnt,shadow_frag:vnt,sprite_vert:ynt,sprite_frag:xnt},At={common:{diffuse:{value:new zt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new On},alphaMap:{value:null},alphaMapTransform:{value:new On},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new On}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new On}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new On}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new On},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new On},normalScale:{value:new lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new On},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new On}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new On}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new On}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new On},alphaTest:{value:0},uvTransform:{value:new On}},sprite:{diffuse:{value:new zt(16777215)},opacity:{value:1},center:{value:new lt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new On},alphaMap:{value:null},alphaMapTransform:{value:new On},alphaTest:{value:0}}},kc={basic:{uniforms:Go([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.fog]),vertexShader:Dn.meshbasic_vert,fragmentShader:Dn.meshbasic_frag},lambert:{uniforms:Go([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new zt(0)}}]),vertexShader:Dn.meshlambert_vert,fragmentShader:Dn.meshlambert_frag},phong:{uniforms:Go([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new zt(0)},specular:{value:new zt(1118481)},shininess:{value:30}}]),vertexShader:Dn.meshphong_vert,fragmentShader:Dn.meshphong_frag},standard:{uniforms:Go([At.common,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.roughnessmap,At.metalnessmap,At.fog,At.lights,{emissive:{value:new zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Dn.meshphysical_vert,fragmentShader:Dn.meshphysical_frag},toon:{uniforms:Go([At.common,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.gradientmap,At.fog,At.lights,{emissive:{value:new zt(0)}}]),vertexShader:Dn.meshtoon_vert,fragmentShader:Dn.meshtoon_frag},matcap:{uniforms:Go([At.common,At.bumpmap,At.normalmap,At.displacementmap,At.fog,{matcap:{value:null}}]),vertexShader:Dn.meshmatcap_vert,fragmentShader:Dn.meshmatcap_frag},points:{uniforms:Go([At.points,At.fog]),vertexShader:Dn.points_vert,fragmentShader:Dn.points_frag},dashed:{uniforms:Go([At.common,At.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Dn.linedashed_vert,fragmentShader:Dn.linedashed_frag},depth:{uniforms:Go([At.common,At.displacementmap]),vertexShader:Dn.depth_vert,fragmentShader:Dn.depth_frag},normal:{uniforms:Go([At.common,At.bumpmap,At.normalmap,At.displacementmap,{opacity:{value:1}}]),vertexShader:Dn.meshnormal_vert,fragmentShader:Dn.meshnormal_frag},sprite:{uniforms:Go([At.sprite,At.fog]),vertexShader:Dn.sprite_vert,fragmentShader:Dn.sprite_frag},background:{uniforms:{uvTransform:{value:new On},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Dn.background_vert,fragmentShader:Dn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Dn.backgroundCube_vert,fragmentShader:Dn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Dn.cube_vert,fragmentShader:Dn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Dn.equirect_vert,fragmentShader:Dn.equirect_frag},distanceRGBA:{uniforms:Go([At.common,At.displacementmap,{referencePosition:{value:new me},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Dn.distanceRGBA_vert,fragmentShader:Dn.distanceRGBA_frag},shadow:{uniforms:Go([At.lights,At.fog,{color:{value:new zt(0)},opacity:{value:1}}]),vertexShader:Dn.shadow_vert,fragmentShader:Dn.shadow_frag}};kc.physical={uniforms:Go([kc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new On},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new On},clearcoatNormalScale:{value:new lt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new On},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new On},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new On},sheen:{value:0},sheenColor:{value:new zt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new On},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new On},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new On},transmissionSamplerSize:{value:new lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new On},attenuationDistance:{value:0},attenuationColor:{value:new zt(0)},specularColor:{value:new zt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new On},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new On},anisotropyVector:{value:new lt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new On}}]),vertexShader:Dn.meshphysical_vert,fragmentShader:Dn.meshphysical_frag};const FT={r:0,b:0,g:0};function bnt(t,e,n,r,i,s,o){const a=new zt(0);let l=s===!0?0:1,c,u,d=null,f=0,h=null;function p(g,m){let y=!1,x=m.isScene===!0?m.background:null;x&&x.isTexture&&(x=(m.backgroundBlurriness>0?n:e).get(x)),x===null?v(a,l):x&&x.isColor&&(v(x,1),y=!0);const S=t.xr.getEnvironmentBlendMode();S==="additive"?r.buffers.color.setClear(0,0,0,1,o):S==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||y)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),x&&(x.isCubeTexture||x.mapping===ox)?(u===void 0&&(u=new ci(new Rg(1,1,1),new sc({name:"BackgroundCubeMaterial",uniforms:yy(kc.backgroundCube.uniforms),vertexShader:kc.backgroundCube.vertexShader,fragmentShader:kc.backgroundCube.fragmentShader,side:rs,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(_,C,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,u.material.toneMapped=Er.getTransfer(x.colorSpace)!==Hr,(d!==x||f!==x.version||h!==t.toneMapping)&&(u.material.needsUpdate=!0,d=x,f=x.version,h=t.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new ci(new Kh(2,2),new sc({name:"BackgroundMaterial",uniforms:yy(kc.background.uniforms),vertexShader:kc.background.vertexShader,fragmentShader:kc.background.fragmentShader,side:Ju,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=Er.getTransfer(x.colorSpace)!==Hr,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(d!==x||f!==x.version||h!==t.toneMapping)&&(c.material.needsUpdate=!0,d=x,f=x.version,h=t.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}function v(g,m){g.getRGB(FT,mue(t)),r.buffers.color.setClear(FT.r,FT.g,FT.b,m,o)}return{getClearColor:function(){return a},setClearColor:function(g,m=1){a.set(g),l=m,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,v(a,l)},render:p}}function wnt(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=g(null);let c=l,u=!1;function d($,O,z,X,D){let B=!1;if(o){const V=v(X,z,O);c!==V&&(c=V,h(c.object)),B=m($,X,z,D),B&&y($,X,z,D)}else{const V=O.wireframe===!0;(c.geometry!==X.id||c.program!==z.id||c.wireframe!==V)&&(c.geometry=X.id,c.program=z.id,c.wireframe=V,B=!0)}D!==null&&n.update(D,t.ELEMENT_ARRAY_BUFFER),(B||u)&&(u=!1,A($,O,z,X),D!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(D).buffer))}function f(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function h($){return r.isWebGL2?t.bindVertexArray($):s.bindVertexArrayOES($)}function p($){return r.isWebGL2?t.deleteVertexArray($):s.deleteVertexArrayOES($)}function v($,O,z){const X=z.wireframe===!0;let D=a[$.id];D===void 0&&(D={},a[$.id]=D);let B=D[O.id];B===void 0&&(B={},D[O.id]=B);let V=B[X];return V===void 0&&(V=g(f()),B[X]=V),V}function g($){const O=[],z=[],X=[];for(let D=0;D<i;D++)O[D]=0,z[D]=0,X[D]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:O,enabledAttributes:z,attributeDivisors:X,object:$,attributes:{},index:null}}function m($,O,z,X){const D=c.attributes,B=O.attributes;let V=0;const W=z.getAttributes();for(const j in W)if(W[j].location>=0){const Q=D[j];let te=B[j];if(te===void 0&&(j==="instanceMatrix"&&$.instanceMatrix&&(te=$.instanceMatrix),j==="instanceColor"&&$.instanceColor&&(te=$.instanceColor)),Q===void 0||Q.attribute!==te||te&&Q.data!==te.data)return!0;V++}return c.attributesNum!==V||c.index!==X}function y($,O,z,X){const D={},B=O.attributes;let V=0;const W=z.getAttributes();for(const j in W)if(W[j].location>=0){let Q=B[j];Q===void 0&&(j==="instanceMatrix"&&$.instanceMatrix&&(Q=$.instanceMatrix),j==="instanceColor"&&$.instanceColor&&(Q=$.instanceColor));const te={};te.attribute=Q,Q&&Q.data&&(te.data=Q.data),D[j]=te,V++}c.attributes=D,c.attributesNum=V,c.index=X}function x(){const $=c.newAttributes;for(let O=0,z=$.length;O<z;O++)$[O]=0}function S($){_($,0)}function _($,O){const z=c.newAttributes,X=c.enabledAttributes,D=c.attributeDivisors;z[$]=1,X[$]===0&&(t.enableVertexAttribArray($),X[$]=1),D[$]!==O&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"]($,O),D[$]=O)}function C(){const $=c.newAttributes,O=c.enabledAttributes;for(let z=0,X=O.length;z<X;z++)O[z]!==$[z]&&(t.disableVertexAttribArray(z),O[z]=0)}function T($,O,z,X,D,B,V){V===!0?t.vertexAttribIPointer($,O,z,D,B):t.vertexAttribPointer($,O,z,X,D,B)}function A($,O,z,X){if(r.isWebGL2===!1&&($.isInstancedMesh||X.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const D=X.attributes,B=z.getAttributes(),V=O.defaultAttributeValues;for(const W in B){const j=B[W];if(j.location>=0){let J=D[W];if(J===void 0&&(W==="instanceMatrix"&&$.instanceMatrix&&(J=$.instanceMatrix),W==="instanceColor"&&$.instanceColor&&(J=$.instanceColor)),J!==void 0){const Q=J.normalized,te=J.itemSize,re=n.get(J);if(re===void 0)continue;const se=re.buffer,fe=re.type,ae=re.bytesPerElement,ye=r.isWebGL2===!0&&(fe===t.INT||fe===t.UNSIGNED_INT||J.gpuType===i6);if(J.isInterleavedBufferAttribute){const le=J.data,H=le.stride,Me=J.offset;if(le.isInstancedInterleavedBuffer){for(let we=0;we<j.locationSize;we++)_(j.location+we,le.meshPerAttribute);$.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let we=0;we<j.locationSize;we++)S(j.location+we);t.bindBuffer(t.ARRAY_BUFFER,se);for(let we=0;we<j.locationSize;we++)T(j.location+we,te/j.locationSize,fe,Q,H*ae,(Me+te/j.locationSize*we)*ae,ye)}else{if(J.isInstancedBufferAttribute){for(let le=0;le<j.locationSize;le++)_(j.location+le,J.meshPerAttribute);$.isInstancedMesh!==!0&&X._maxInstanceCount===void 0&&(X._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let le=0;le<j.locationSize;le++)S(j.location+le);t.bindBuffer(t.ARRAY_BUFFER,se);for(let le=0;le<j.locationSize;le++)T(j.location+le,te/j.locationSize,fe,Q,te*ae,te/j.locationSize*le*ae,ye)}}else if(V!==void 0){const Q=V[W];if(Q!==void 0)switch(Q.length){case 2:t.vertexAttrib2fv(j.location,Q);break;case 3:t.vertexAttrib3fv(j.location,Q);break;case 4:t.vertexAttrib4fv(j.location,Q);break;default:t.vertexAttrib1fv(j.location,Q)}}}}C()}function M(){N();for(const $ in a){const O=a[$];for(const z in O){const X=O[z];for(const D in X)p(X[D].object),delete X[D];delete O[z]}delete a[$]}}function E($){if(a[$.id]===void 0)return;const O=a[$.id];for(const z in O){const X=O[z];for(const D in X)p(X[D].object),delete X[D];delete O[z]}delete a[$.id]}function P($){for(const O in a){const z=a[O];if(z[$.id]===void 0)continue;const X=z[$.id];for(const D in X)p(X[D].object),delete X[D];delete z[$.id]}}function N(){F(),u=!0,c!==l&&(c=l,h(c.object))}function F(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:N,resetDefaultState:F,dispose:M,releaseStatesOfGeometry:E,releaseStatesOfProgram:P,initAttributes:x,enableAttribute:S,disableUnusedAttributes:C}}function Snt(t,e,n,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,d){t.drawArrays(s,u,d),n.update(d,s,1)}function l(u,d,f){if(f===0)return;let h,p;if(i)h=t,p="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[p](s,u,d,f),n.update(d,s,f)}function c(u,d,f){if(f===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let p=0;p<f;p++)this.render(u[p],d[p]);else{h.multiDrawArraysWEBGL(s,u,0,d,0,f);let p=0;for(let v=0;v<f;v++)p+=d[v];n.update(p,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function _nt(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(T){if(T==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return T==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=n.logarithmicDepthBuffer===!0,d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),v=t.getParameter(t.MAX_VERTEX_ATTRIBS),g=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),y=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),x=f>0,S=o||e.has("OES_texture_float"),_=x&&S,C=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:v,maxVertexUniforms:g,maxVaryings:m,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:S,floatVertexTextures:_,maxSamples:C}}function Cnt(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new Id,a=new On,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const h=d.length!==0||f||r!==0||i;return i=f,r=d.length,h},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){n=u(d,f,0)},this.setState=function(d,f,h){const p=d.clippingPlanes,v=d.clipIntersection,g=d.clipShadows,m=t.get(d);if(!i||p===null||p.length===0||s&&!g)s?u(null):c();else{const y=s?0:r,x=y*4;let S=m.clippingState||null;l.value=S,S=u(p,f,x,h);for(let _=0;_!==x;++_)S[_]=n[_];m.clippingState=S,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,f,h,p){const v=d!==null?d.length:0;let g=null;if(v!==0){if(g=l.value,p!==!0||g===null){const m=h+v*4,y=f.matrixWorldInverse;a.getNormalMatrix(y),(g===null||g.length<m)&&(g=new Float32Array(m));for(let x=0,S=h;x!==v;++x,S+=4)o.copy(d[x]).applyMatrix4(y,a),o.normal.toArray(g,S),g[S+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,g}}function Tnt(t){let e=new WeakMap;function n(o,a){return a===my?o.mapping=Qu:a===Uw&&(o.mapping=kh),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===my||a===Uw)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new w6(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Vd extends f2{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const hv=4,RY=[.125,.215,.35,.446,.526,.582],tm=20,iD=new Vd,PY=new zt;let sD=null,oD=0,aD=0;const Zp=(1+Math.sqrt(5))/2,P0=1/Zp,NY=[new me(1,1,1),new me(-1,1,1),new me(1,1,-1),new me(-1,1,-1),new me(0,Zp,P0),new me(0,Zp,-P0),new me(P0,0,Zp),new me(-P0,0,Zp),new me(Zp,P0,0),new me(-Zp,P0,0)];class rF{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){sD=this._renderer.getRenderTarget(),oD=this._renderer.getActiveCubeFace(),aD=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=LY(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=DY(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(sD,oD,aD),e.scissorTest=!1,BT(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Qu||e.mapping===kh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),sD=this._renderer.getRenderTarget(),oD=this._renderer.getActiveCubeFace(),aD=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Mr,minFilter:Mr,generateMipmaps:!1,type:Ao,format:Eo,colorSpace:ed,depthBuffer:!1},i=$Y(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=$Y(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ent(s)),this._blurMaterial=Mnt(s,e,n)}return i}_compileMaterial(e){const n=new ci(this._lodPlanes[0],e);this._renderer.compile(n,iD)}_sceneToCubeUV(e,n,r,i){const a=new Ai(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(PY),u.toneMapping=Bu,u.autoClear=!1;const h=new mf({name:"PMREM.Background",side:rs,depthWrite:!1,depthTest:!1}),p=new ci(new Rg,h);let v=!1;const g=e.background;g?g.isColor&&(h.color.copy(g),e.background=null,v=!0):(h.color.copy(PY),v=!0);for(let m=0;m<6;m++){const y=m%3;y===0?(a.up.set(0,l[m],0),a.lookAt(c[m],0,0)):y===1?(a.up.set(0,0,l[m]),a.lookAt(0,c[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,c[m]));const x=this._cubeSize;BT(i,y*x,m>2?x:0,x,x),u.setRenderTarget(i),v&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=g}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Qu||e.mapping===kh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=LY()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=DY());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new ci(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;BT(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,iD)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=NY[(i-1)%NY.length];this._blur(e,i-1,i,s,o)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new ci(this._lodPlanes[i],c),f=c.uniforms,h=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*tm-1),v=s/p,g=isFinite(s)?1+Math.floor(u*v):tm;g>tm&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${tm}`);const m=[];let y=0;for(let T=0;T<tm;++T){const A=T/v,M=Math.exp(-A*A/2);m.push(M),T===0?y+=M:T<g&&(y+=2*M)}for(let T=0;T<m.length;T++)m[T]=m[T]/y;f.envMap.value=e.texture,f.samples.value=g,f.weights.value=m,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:x}=this;f.dTheta.value=p,f.mipInt.value=x-r;const S=this._sizeLods[i],_=3*S*(i>x-hv?i-x+hv:0),C=4*(this._cubeSize-S);BT(n,_,C,3*S,2*S),l.setRenderTarget(n),l.render(d,iD)}}function Ent(t){const e=[],n=[],r=[];let i=t;const s=t-hv+1+RY.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-hv?l=RY[o-t+hv-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],h=6,p=6,v=3,g=2,m=1,y=new Float32Array(v*p*h),x=new Float32Array(g*p*h),S=new Float32Array(m*p*h);for(let C=0;C<h;C++){const T=C%3*2/3-1,A=C>2?0:-1,M=[T,A,0,T+2/3,A,0,T+2/3,A+1,0,T,A,0,T+2/3,A+1,0,T,A+1,0];y.set(M,v*p*C),x.set(f,g*p*C);const E=[C,C,C,C,C,C];S.set(E,m*p*C)}const _=new Ln;_.setAttribute("position",new kr(y,v)),_.setAttribute("uv",new kr(x,g)),_.setAttribute("faceIndex",new kr(S,m)),e.push(_),i>hv&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function $Y(t,e,n){const r=new ic(t,e,n);return r.texture.mapping=ox,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function BT(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Mnt(t,e,n){const r=new Float32Array(tm),i=new me(0,1,0);return new sc({name:"SphericalGaussianBlur",defines:{n:tm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:S6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Yd,depthTest:!1,depthWrite:!1})}function DY(){return new sc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:S6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Yd,depthTest:!1,depthWrite:!1})}function LY(){return new sc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:S6(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Yd,depthTest:!1,depthWrite:!1})}function S6(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Ant(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===my||l===Uw,u=l===Qu||l===kh;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return n===null&&(n=new rF(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&i(d)){n===null&&(n=new rF(t));const f=c?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",s),f.texture}else return null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function knt(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Int(t,e,n,r){const i={},s=new WeakMap;function o(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);for(const p in f.morphAttributes){const v=f.morphAttributes[p];for(let g=0,m=v.length;g<m;g++)e.remove(v[g])}f.removeEventListener("dispose",o),delete i[f.id];const h=s.get(f);h&&(e.remove(h),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function a(d,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,n.memory.geometries++),f}function l(d){const f=d.attributes;for(const p in f)e.update(f[p],t.ARRAY_BUFFER);const h=d.morphAttributes;for(const p in h){const v=h[p];for(let g=0,m=v.length;g<m;g++)e.update(v[g],t.ARRAY_BUFFER)}}function c(d){const f=[],h=d.index,p=d.attributes.position;let v=0;if(h!==null){const y=h.array;v=h.version;for(let x=0,S=y.length;x<S;x+=3){const _=y[x+0],C=y[x+1],T=y[x+2];f.push(_,C,C,T,T,_)}}else if(p!==void 0){const y=p.array;v=p.version;for(let x=0,S=y.length/3-1;x<S;x+=3){const _=x+0,C=x+1,T=x+2;f.push(_,C,C,T,T,_)}}else return;const g=new(due(f)?b6:x6)(f,1);g.version=v;const m=s.get(d);m&&e.remove(m),s.set(d,g)}function u(d){const f=s.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function Rnt(t,e,n,r){const i=r.isWebGL2;let s;function o(h){s=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function u(h,p){t.drawElements(s,p,a,h*l),n.update(p,s,1)}function d(h,p,v){if(v===0)return;let g,m;if(i)g=t,m="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[m](s,p,a,h*l,v),n.update(p,s,v)}function f(h,p,v){if(v===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let m=0;m<v;m++)this.render(h[m]/l,p[m]);else{g.multiDrawElementsWEBGL(s,p,0,a,h,0,v);let m=0;for(let y=0;y<v;y++)m+=p[y];n.update(m,s,1)}}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=d,this.renderMultiDraw=f}function Pnt(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Nnt(t,e){return t[0]-e[0]}function $nt(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Dnt(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new rr,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,d){const f=c.morphTargetInfluences;if(e.isWebGL2===!0){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,v=p!==void 0?p.length:0;let g=s.get(u);if(g===void 0||g.count!==v){let O=function(){F.dispose(),s.delete(u),u.removeEventListener("dispose",O)};var h=O;g!==void 0&&g.texture.dispose();const x=u.morphAttributes.position!==void 0,S=u.morphAttributes.normal!==void 0,_=u.morphAttributes.color!==void 0,C=u.morphAttributes.position||[],T=u.morphAttributes.normal||[],A=u.morphAttributes.color||[];let M=0;x===!0&&(M=1),S===!0&&(M=2),_===!0&&(M=3);let E=u.attributes.position.count*M,P=1;E>e.maxTextureSize&&(P=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const N=new Float32Array(E*P*4*v),F=new xR(N,E,P,v);F.type=Ps,F.needsUpdate=!0;const $=M*4;for(let z=0;z<v;z++){const X=C[z],D=T[z],B=A[z],V=E*P*4*z;for(let W=0;W<X.count;W++){const j=W*$;x===!0&&(o.fromBufferAttribute(X,W),N[V+j+0]=o.x,N[V+j+1]=o.y,N[V+j+2]=o.z,N[V+j+3]=0),S===!0&&(o.fromBufferAttribute(D,W),N[V+j+4]=o.x,N[V+j+5]=o.y,N[V+j+6]=o.z,N[V+j+7]=0),_===!0&&(o.fromBufferAttribute(B,W),N[V+j+8]=o.x,N[V+j+9]=o.y,N[V+j+10]=o.z,N[V+j+11]=B.itemSize===4?o.w:1)}}g={count:v,texture:F,size:new lt(E,P)},s.set(u,g),u.addEventListener("dispose",O)}let m=0;for(let x=0;x<f.length;x++)m+=f[x];const y=u.morphTargetsRelative?1:1-m;d.getUniforms().setValue(t,"morphTargetBaseInfluence",y),d.getUniforms().setValue(t,"morphTargetInfluences",f),d.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),d.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}else{const p=f===void 0?0:f.length;let v=r[u.id];if(v===void 0||v.length!==p){v=[];for(let S=0;S<p;S++)v[S]=[S,0];r[u.id]=v}for(let S=0;S<p;S++){const _=v[S];_[0]=S,_[1]=f[S]}v.sort($nt);for(let S=0;S<8;S++)S<p&&v[S][1]?(a[S][0]=v[S][0],a[S][1]=v[S][1]):(a[S][0]=Number.MAX_SAFE_INTEGER,a[S][1]=0);a.sort(Nnt);const g=u.morphAttributes.position,m=u.morphAttributes.normal;let y=0;for(let S=0;S<8;S++){const _=a[S],C=_[0],T=_[1];C!==Number.MAX_SAFE_INTEGER&&T?(g&&u.getAttribute("morphTarget"+S)!==g[C]&&u.setAttribute("morphTarget"+S,g[C]),m&&u.getAttribute("morphNormal"+S)!==m[C]&&u.setAttribute("morphNormal"+S,m[C]),i[S]=T,y+=T):(g&&u.hasAttribute("morphTarget"+S)===!0&&u.deleteAttribute("morphTarget"+S),m&&u.hasAttribute("morphNormal"+S)===!0&&u.deleteAttribute("morphNormal"+S),i[S]=0)}const x=u.morphTargetsRelative?1:1-y;d.getUniforms().setValue(t,"morphTargetBaseInfluence",x),d.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function Lnt(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==c&&(f.update(),i.set(f,c))}return d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}class bR extends di{constructor(e,n,r,i,s,o,a,l,c,u){if(u=u!==void 0?u:mh,u!==mh&&u!==rg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===mh&&(r=zd),r===void 0&&u===rg&&(r=ph),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Vi,this.minFilter=l!==void 0?l:Vi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const yue=new di,xue=new bR(1,1);xue.compareFunction=m6;const bue=new xR,wue=new y6,Sue=new h2,OY=[],FY=[],BY=new Float32Array(16),UY=new Float32Array(9),zY=new Float32Array(4);function ax(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=OY[i];if(s===void 0&&(s=new Float32Array(i),OY[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function ws(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Ss(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function wR(t,e){let n=FY[e];n===void 0&&(n=new Int32Array(e),FY[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Ont(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Fnt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ws(n,e))return;t.uniform2fv(this.addr,e),Ss(n,e)}}function Bnt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ws(n,e))return;t.uniform3fv(this.addr,e),Ss(n,e)}}function Unt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ws(n,e))return;t.uniform4fv(this.addr,e),Ss(n,e)}}function znt(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ws(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ss(n,e)}else{if(ws(n,r))return;zY.set(r),t.uniformMatrix2fv(this.addr,!1,zY),Ss(n,r)}}function Vnt(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ws(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ss(n,e)}else{if(ws(n,r))return;UY.set(r),t.uniformMatrix3fv(this.addr,!1,UY),Ss(n,r)}}function Wnt(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ws(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ss(n,e)}else{if(ws(n,r))return;BY.set(r),t.uniformMatrix4fv(this.addr,!1,BY),Ss(n,r)}}function Gnt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Hnt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ws(n,e))return;t.uniform2iv(this.addr,e),Ss(n,e)}}function jnt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ws(n,e))return;t.uniform3iv(this.addr,e),Ss(n,e)}}function Xnt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ws(n,e))return;t.uniform4iv(this.addr,e),Ss(n,e)}}function qnt(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ynt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ws(n,e))return;t.uniform2uiv(this.addr,e),Ss(n,e)}}function Knt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ws(n,e))return;t.uniform3uiv(this.addr,e),Ss(n,e)}}function Znt(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ws(n,e))return;t.uniform4uiv(this.addr,e),Ss(n,e)}}function Jnt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const s=this.type===t.SAMPLER_2D_SHADOW?xue:yue;n.setTexture2D(e||s,i)}function Qnt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||wue,i)}function ert(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Sue,i)}function trt(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||bue,i)}function nrt(t){switch(t){case 5126:return Ont;case 35664:return Fnt;case 35665:return Bnt;case 35666:return Unt;case 35674:return znt;case 35675:return Vnt;case 35676:return Wnt;case 5124:case 35670:return Gnt;case 35667:case 35671:return Hnt;case 35668:case 35672:return jnt;case 35669:case 35673:return Xnt;case 5125:return qnt;case 36294:return Ynt;case 36295:return Knt;case 36296:return Znt;case 35678:case 36198:case 36298:case 36306:case 35682:return Jnt;case 35679:case 36299:case 36307:return Qnt;case 35680:case 36300:case 36308:case 36293:return ert;case 36289:case 36303:case 36311:case 36292:return trt}}function rrt(t,e){t.uniform1fv(this.addr,e)}function irt(t,e){const n=ax(e,this.size,2);t.uniform2fv(this.addr,n)}function srt(t,e){const n=ax(e,this.size,3);t.uniform3fv(this.addr,n)}function ort(t,e){const n=ax(e,this.size,4);t.uniform4fv(this.addr,n)}function art(t,e){const n=ax(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function lrt(t,e){const n=ax(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function crt(t,e){const n=ax(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function urt(t,e){t.uniform1iv(this.addr,e)}function drt(t,e){t.uniform2iv(this.addr,e)}function frt(t,e){t.uniform3iv(this.addr,e)}function hrt(t,e){t.uniform4iv(this.addr,e)}function prt(t,e){t.uniform1uiv(this.addr,e)}function mrt(t,e){t.uniform2uiv(this.addr,e)}function grt(t,e){t.uniform3uiv(this.addr,e)}function vrt(t,e){t.uniform4uiv(this.addr,e)}function yrt(t,e,n){const r=this.cache,i=e.length,s=wR(n,i);ws(r,s)||(t.uniform1iv(this.addr,s),Ss(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||yue,s[o])}function xrt(t,e,n){const r=this.cache,i=e.length,s=wR(n,i);ws(r,s)||(t.uniform1iv(this.addr,s),Ss(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||wue,s[o])}function brt(t,e,n){const r=this.cache,i=e.length,s=wR(n,i);ws(r,s)||(t.uniform1iv(this.addr,s),Ss(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||Sue,s[o])}function wrt(t,e,n){const r=this.cache,i=e.length,s=wR(n,i);ws(r,s)||(t.uniform1iv(this.addr,s),Ss(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||bue,s[o])}function Srt(t){switch(t){case 5126:return rrt;case 35664:return irt;case 35665:return srt;case 35666:return ort;case 35674:return art;case 35675:return lrt;case 35676:return crt;case 5124:case 35670:return urt;case 35667:case 35671:return drt;case 35668:case 35672:return frt;case 35669:case 35673:return hrt;case 5125:return prt;case 36294:return mrt;case 36295:return grt;case 36296:return vrt;case 35678:case 36198:case 36298:case 36306:case 35682:return yrt;case 35679:case 36299:case 36307:return xrt;case 35680:case 36300:case 36308:case 36293:return brt;case 36289:case 36303:case 36311:case 36292:return wrt}}class _rt{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=nrt(n.type)}}class Crt{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Srt(n.type)}}class Trt{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const lD=/(\w+)(\])?(\[|\.)?/g;function VY(t,e){t.seq.push(e),t.map[e.id]=e}function Ert(t,e,n){const r=t.name,i=r.length;for(lD.lastIndex=0;;){const s=lD.exec(r),o=lD.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){VY(n,c===void 0?new _rt(a,t,e):new Crt(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new Trt(a),VY(n,d)),n=d}}}class hM{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);Ert(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function WY(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Mrt=37297;let Art=0;function krt(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}function Irt(t){const e=Er.getPrimaries(Er.workingColorSpace),n=Er.getPrimaries(t);let r;switch(e===n?r="":e===qw&&n===Xw?r="LinearDisplayP3ToLinearSRGB":e===Xw&&n===qw&&(r="LinearSRGBToLinearDisplayP3"),t){case ed:case u2:return[r,"LinearTransferOETF"];case ps:case yR:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function GY(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+krt(t.getShaderSource(e),o)}else return i}function Rrt(t,e){const n=Irt(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Prt(t,e){let n;switch(e){case Bce:n="Linear";break;case Uce:n="Reinhard";break;case zce:n="OptimizedCineon";break;case n6:n="ACESFilmic";break;case Wce:n="AgX";break;case Vce:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Nrt(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(pv).join(`
`)}function $rt(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(pv).join(`
`)}function Drt(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function Lrt(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function pv(t){return t!==""}function HY(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function jY(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Ort=/^[ \t]*#include +<([\w\d./]+)>/gm;function iF(t){return t.replace(Ort,Brt)}const Frt=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Brt(t,e){let n=Dn[e];if(n===void 0){const r=Frt.get(e);if(r!==void 0)n=Dn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return iF(n)}const Urt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function XY(t){return t.replace(Urt,zrt)}function zrt(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function qY(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Vrt(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===pR?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Sb?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Tc&&(e="SHADOWMAP_TYPE_VSM"),e}function Wrt(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Qu:case kh:e="ENVMAP_TYPE_CUBE";break;case ox:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Grt(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case kh:e="ENVMAP_MODE_REFRACTION";break}return e}function Hrt(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case c2:e="ENVMAP_BLENDING_MULTIPLY";break;case Oce:e="ENVMAP_BLENDING_MIX";break;case Fce:e="ENVMAP_BLENDING_ADD";break}return e}function jrt(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Xrt(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=Vrt(n),c=Wrt(n),u=Grt(n),d=Hrt(n),f=jrt(n),h=n.isWebGL2?"":Nrt(n),p=$rt(n),v=Drt(s),g=i.createProgram();let m,y,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(pv).join(`
`),m.length>0&&(m+=`
`),y=[h,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(pv).join(`
`),y.length>0&&(y+=`
`)):(m=[qY(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(pv).join(`
`),y=[h,qY(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Bu?"#define TONE_MAPPING":"",n.toneMapping!==Bu?Dn.tonemapping_pars_fragment:"",n.toneMapping!==Bu?Prt("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Dn.colorspace_pars_fragment,Rrt("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(pv).join(`
`)),o=iF(o),o=HY(o,n),o=jY(o,n),a=iF(a),a=HY(a,n),a=jY(a,n),o=XY(o),a=XY(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,m=[p,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,y=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===tF?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===tF?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const S=x+m+o,_=x+y+a,C=WY(i,i.VERTEX_SHADER,S),T=WY(i,i.FRAGMENT_SHADER,_);i.attachShader(g,C),i.attachShader(g,T),n.index0AttributeName!==void 0?i.bindAttribLocation(g,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g);function A(N){if(t.debug.checkShaderErrors){const F=i.getProgramInfoLog(g).trim(),$=i.getShaderInfoLog(C).trim(),O=i.getShaderInfoLog(T).trim();let z=!0,X=!0;if(i.getProgramParameter(g,i.LINK_STATUS)===!1)if(z=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,g,C,T);else{const D=GY(i,C,"vertex"),B=GY(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,i.VALIDATE_STATUS)+`

Program Info Log: `+F+`
`+D+`
`+B)}else F!==""?console.warn("THREE.WebGLProgram: Program Info Log:",F):($===""||O==="")&&(X=!1);X&&(N.diagnostics={runnable:z,programLog:F,vertexShader:{log:$,prefix:m},fragmentShader:{log:O,prefix:y}})}i.deleteShader(C),i.deleteShader(T),M=new hM(i,g),E=Lrt(i,g)}let M;this.getUniforms=function(){return M===void 0&&A(this),M};let E;this.getAttributes=function(){return E===void 0&&A(this),E};let P=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=i.getProgramParameter(g,Mrt)),P},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Art++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=C,this.fragmentShader=T,this}let qrt=0;class Yrt{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Krt(e),n.set(e,r)),r}}class Krt{constructor(e){this.id=qrt++,this.code=e,this.usedTimes=0}}function Zrt(t,e,n,r,i,s,o){const a=new Rm,l=new Yrt,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,f=i.vertexTextures;let h=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(M){return M===0?"uv":`uv${M}`}function g(M,E,P,N,F){const $=N.fog,O=F.geometry,z=M.isMeshStandardMaterial?N.environment:null,X=(M.isMeshStandardMaterial?n:e).get(M.envMap||z),D=X&&X.mapping===ox?X.image.height:null,B=p[M.type];M.precision!==null&&(h=i.getMaxPrecision(M.precision),h!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",h,"instead."));const V=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,W=V!==void 0?V.length:0;let j=0;O.morphAttributes.position!==void 0&&(j=1),O.morphAttributes.normal!==void 0&&(j=2),O.morphAttributes.color!==void 0&&(j=3);let J,Q,te,re;if(B){const Dt=kc[B];J=Dt.vertexShader,Q=Dt.fragmentShader}else J=M.vertexShader,Q=M.fragmentShader,l.update(M),te=l.getVertexShaderID(M),re=l.getFragmentShaderID(M);const se=t.getRenderTarget(),fe=F.isInstancedMesh===!0,ae=F.isBatchedMesh===!0,ye=!!M.map,le=!!M.matcap,H=!!X,Me=!!M.aoMap,we=!!M.lightMap,Ee=!!M.bumpMap,ge=!!M.normalMap,qe=!!M.displacementMap,Ae=!!M.emissiveMap,ee=!!M.metalnessMap,Y=!!M.roughnessMap,oe=M.anisotropy>0,xe=M.clearcoat>0,Se=M.iridescence>0,be=M.sheen>0,Re=M.transmission>0,Ke=oe&&!!M.anisotropyMap,ze=xe&&!!M.clearcoatMap,Ne=xe&&!!M.clearcoatNormalMap,De=xe&&!!M.clearcoatRoughnessMap,Ve=Se&&!!M.iridescenceMap,gt=Se&&!!M.iridescenceThicknessMap,ct=be&&!!M.sheenColorMap,Ye=be&&!!M.sheenRoughnessMap,Xe=!!M.specularMap,Le=!!M.specularColorMap,pe=!!M.specularIntensityMap,He=Re&&!!M.transmissionMap,ot=Re&&!!M.thicknessMap,et=!!M.gradientMap,Ie=!!M.alphaMap,Ce=M.alphaTest>0,ut=!!M.alphaHash,dt=!!M.extensions,yt=!!O.attributes.uv1,vt=!!O.attributes.uv2,Vt=!!O.attributes.uv3;let It=Bu;return M.toneMapped&&(se===null||se.isXRRenderTarget===!0)&&(It=t.toneMapping),{isWebGL2:u,shaderID:B,shaderType:M.type,shaderName:M.name,vertexShader:J,fragmentShader:Q,defines:M.defines,customVertexShaderID:te,customFragmentShaderID:re,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:h,batching:ae,instancing:fe,instancingColor:fe&&F.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:se===null?t.outputColorSpace:se.isXRRenderTarget===!0?se.texture.colorSpace:ed,map:ye,matcap:le,envMap:H,envMapMode:H&&X.mapping,envMapCubeUVHeight:D,aoMap:Me,lightMap:we,bumpMap:Ee,normalMap:ge,displacementMap:f&&qe,emissiveMap:Ae,normalMapObjectSpace:ge&&M.normalMapType===nue,normalMapTangentSpace:ge&&M.normalMapType===Yh,metalnessMap:ee,roughnessMap:Y,anisotropy:oe,anisotropyMap:Ke,clearcoat:xe,clearcoatMap:ze,clearcoatNormalMap:Ne,clearcoatRoughnessMap:De,iridescence:Se,iridescenceMap:Ve,iridescenceThicknessMap:gt,sheen:be,sheenColorMap:ct,sheenRoughnessMap:Ye,specularMap:Xe,specularColorMap:Le,specularIntensityMap:pe,transmission:Re,transmissionMap:He,thicknessMap:ot,gradientMap:et,opaque:M.transparent===!1&&M.blending===km,alphaMap:Ie,alphaTest:Ce,alphaHash:ut,combine:M.combine,mapUv:ye&&v(M.map.channel),aoMapUv:Me&&v(M.aoMap.channel),lightMapUv:we&&v(M.lightMap.channel),bumpMapUv:Ee&&v(M.bumpMap.channel),normalMapUv:ge&&v(M.normalMap.channel),displacementMapUv:qe&&v(M.displacementMap.channel),emissiveMapUv:Ae&&v(M.emissiveMap.channel),metalnessMapUv:ee&&v(M.metalnessMap.channel),roughnessMapUv:Y&&v(M.roughnessMap.channel),anisotropyMapUv:Ke&&v(M.anisotropyMap.channel),clearcoatMapUv:ze&&v(M.clearcoatMap.channel),clearcoatNormalMapUv:Ne&&v(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:De&&v(M.clearcoatRoughnessMap.channel),iridescenceMapUv:Ve&&v(M.iridescenceMap.channel),iridescenceThicknessMapUv:gt&&v(M.iridescenceThicknessMap.channel),sheenColorMapUv:ct&&v(M.sheenColorMap.channel),sheenRoughnessMapUv:Ye&&v(M.sheenRoughnessMap.channel),specularMapUv:Xe&&v(M.specularMap.channel),specularColorMapUv:Le&&v(M.specularColorMap.channel),specularIntensityMapUv:pe&&v(M.specularIntensityMap.channel),transmissionMapUv:He&&v(M.transmissionMap.channel),thicknessMapUv:ot&&v(M.thicknessMap.channel),alphaMapUv:Ie&&v(M.alphaMap.channel),vertexTangents:!!O.attributes.tangent&&(ge||oe),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!O.attributes.color&&O.attributes.color.itemSize===4,vertexUv1s:yt,vertexUv2s:vt,vertexUv3s:Vt,pointsUvs:F.isPoints===!0&&!!O.attributes.uv&&(ye||Ie),fog:!!$,useFog:M.fog===!0,fogExp2:$&&$.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:F.isSkinnedMesh===!0,morphTargets:O.morphAttributes.position!==void 0,morphNormals:O.morphAttributes.normal!==void 0,morphColors:O.morphAttributes.color!==void 0,morphTargetsCount:W,morphTextureStride:j,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:t.shadowMap.enabled&&P.length>0,shadowMapType:t.shadowMap.type,toneMapping:It,useLegacyLights:t._useLegacyLights,decodeVideoTexture:ye&&M.map.isVideoTexture===!0&&Er.getTransfer(M.map.colorSpace)===Hr,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===Qa,flipSided:M.side===rs,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:dt&&M.extensions.derivatives===!0,extensionFragDepth:dt&&M.extensions.fragDepth===!0,extensionDrawBuffers:dt&&M.extensions.drawBuffers===!0,extensionShaderTextureLOD:dt&&M.extensions.shaderTextureLOD===!0,extensionClipCullDistance:dt&&M.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()}}function m(M){const E=[];if(M.shaderID?E.push(M.shaderID):(E.push(M.customVertexShaderID),E.push(M.customFragmentShaderID)),M.defines!==void 0)for(const P in M.defines)E.push(P),E.push(M.defines[P]);return M.isRawShaderMaterial===!1&&(y(E,M),x(E,M),E.push(t.outputColorSpace)),E.push(M.customProgramCacheKey),E.join()}function y(M,E){M.push(E.precision),M.push(E.outputColorSpace),M.push(E.envMapMode),M.push(E.envMapCubeUVHeight),M.push(E.mapUv),M.push(E.alphaMapUv),M.push(E.lightMapUv),M.push(E.aoMapUv),M.push(E.bumpMapUv),M.push(E.normalMapUv),M.push(E.displacementMapUv),M.push(E.emissiveMapUv),M.push(E.metalnessMapUv),M.push(E.roughnessMapUv),M.push(E.anisotropyMapUv),M.push(E.clearcoatMapUv),M.push(E.clearcoatNormalMapUv),M.push(E.clearcoatRoughnessMapUv),M.push(E.iridescenceMapUv),M.push(E.iridescenceThicknessMapUv),M.push(E.sheenColorMapUv),M.push(E.sheenRoughnessMapUv),M.push(E.specularMapUv),M.push(E.specularColorMapUv),M.push(E.specularIntensityMapUv),M.push(E.transmissionMapUv),M.push(E.thicknessMapUv),M.push(E.combine),M.push(E.fogExp2),M.push(E.sizeAttenuation),M.push(E.morphTargetsCount),M.push(E.morphAttributeCount),M.push(E.numDirLights),M.push(E.numPointLights),M.push(E.numSpotLights),M.push(E.numSpotLightMaps),M.push(E.numHemiLights),M.push(E.numRectAreaLights),M.push(E.numDirLightShadows),M.push(E.numPointLightShadows),M.push(E.numSpotLightShadows),M.push(E.numSpotLightShadowsWithMaps),M.push(E.numLightProbes),M.push(E.shadowMapType),M.push(E.toneMapping),M.push(E.numClippingPlanes),M.push(E.numClipIntersection),M.push(E.depthPacking)}function x(M,E){a.disableAll(),E.isWebGL2&&a.enable(0),E.supportsVertexTextures&&a.enable(1),E.instancing&&a.enable(2),E.instancingColor&&a.enable(3),E.matcap&&a.enable(4),E.envMap&&a.enable(5),E.normalMapObjectSpace&&a.enable(6),E.normalMapTangentSpace&&a.enable(7),E.clearcoat&&a.enable(8),E.iridescence&&a.enable(9),E.alphaTest&&a.enable(10),E.vertexColors&&a.enable(11),E.vertexAlphas&&a.enable(12),E.vertexUv1s&&a.enable(13),E.vertexUv2s&&a.enable(14),E.vertexUv3s&&a.enable(15),E.vertexTangents&&a.enable(16),E.anisotropy&&a.enable(17),E.alphaHash&&a.enable(18),E.batching&&a.enable(19),M.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.skinning&&a.enable(4),E.morphTargets&&a.enable(5),E.morphNormals&&a.enable(6),E.morphColors&&a.enable(7),E.premultipliedAlpha&&a.enable(8),E.shadowMapEnabled&&a.enable(9),E.useLegacyLights&&a.enable(10),E.doubleSided&&a.enable(11),E.flipSided&&a.enable(12),E.useDepthPacking&&a.enable(13),E.dithering&&a.enable(14),E.transmission&&a.enable(15),E.sheen&&a.enable(16),E.opaque&&a.enable(17),E.pointsUvs&&a.enable(18),E.decodeVideoTexture&&a.enable(19),M.push(a.mask)}function S(M){const E=p[M.type];let P;if(E){const N=kc[E];P=Zw.clone(N.uniforms)}else P=M.uniforms;return P}function _(M,E){let P;for(let N=0,F=c.length;N<F;N++){const $=c[N];if($.cacheKey===E){P=$,++P.usedTimes;break}}return P===void 0&&(P=new Xrt(t,E,M,s),c.push(P)),P}function C(M){if(--M.usedTimes===0){const E=c.indexOf(M);c[E]=c[c.length-1],c.pop(),M.destroy()}}function T(M){l.remove(M)}function A(){l.dispose()}return{getParameters:g,getProgramCacheKey:m,getUniforms:S,acquireProgram:_,releaseProgram:C,releaseShaderCache:T,programs:c,dispose:A}}function Jrt(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function Qrt(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function YY(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function KY(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(d,f,h,p,v,g){let m=t[e];return m===void 0?(m={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:v,group:g},t[e]=m):(m.id=d.id,m.object=d,m.geometry=f,m.material=h,m.groupOrder=p,m.renderOrder=d.renderOrder,m.z=v,m.group=g),e++,m}function a(d,f,h,p,v,g){const m=o(d,f,h,p,v,g);h.transmission>0?r.push(m):h.transparent===!0?i.push(m):n.push(m)}function l(d,f,h,p,v,g){const m=o(d,f,h,p,v,g);h.transmission>0?r.unshift(m):h.transparent===!0?i.unshift(m):n.unshift(m)}function c(d,f){n.length>1&&n.sort(d||Qrt),r.length>1&&r.sort(f||YY),i.length>1&&i.sort(f||YY)}function u(){for(let d=e,f=t.length;d<f;d++){const h=t[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function eit(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new KY,t.set(r,[o])):i>=s.length?(o=new KY,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function tit(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new me,color:new zt};break;case"SpotLight":n={position:new me,direction:new me,color:new zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new me,color:new zt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new me,skyColor:new zt,groundColor:new zt};break;case"RectAreaLight":n={color:new zt,position:new me,halfWidth:new me,halfHeight:new me};break}return t[e.id]=n,n}}}function nit(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let rit=0;function iit(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function sit(t,e){const n=new tit,r=nit(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new me);const s=new me,o=new _n,a=new _n;function l(u,d){let f=0,h=0,p=0;for(let N=0;N<9;N++)i.probe[N].set(0,0,0);let v=0,g=0,m=0,y=0,x=0,S=0,_=0,C=0,T=0,A=0,M=0;u.sort(iit);const E=d===!0?Math.PI:1;for(let N=0,F=u.length;N<F;N++){const $=u[N],O=$.color,z=$.intensity,X=$.distance,D=$.shadow&&$.shadow.map?$.shadow.map.texture:null;if($.isAmbientLight)f+=O.r*z*E,h+=O.g*z*E,p+=O.b*z*E;else if($.isLightProbe){for(let B=0;B<9;B++)i.probe[B].addScaledVector($.sh.coefficients[B],z);M++}else if($.isDirectionalLight){const B=n.get($);if(B.color.copy($.color).multiplyScalar($.intensity*E),$.castShadow){const V=$.shadow,W=r.get($);W.shadowBias=V.bias,W.shadowNormalBias=V.normalBias,W.shadowRadius=V.radius,W.shadowMapSize=V.mapSize,i.directionalShadow[v]=W,i.directionalShadowMap[v]=D,i.directionalShadowMatrix[v]=$.shadow.matrix,S++}i.directional[v]=B,v++}else if($.isSpotLight){const B=n.get($);B.position.setFromMatrixPosition($.matrixWorld),B.color.copy(O).multiplyScalar(z*E),B.distance=X,B.coneCos=Math.cos($.angle),B.penumbraCos=Math.cos($.angle*(1-$.penumbra)),B.decay=$.decay,i.spot[m]=B;const V=$.shadow;if($.map&&(i.spotLightMap[T]=$.map,T++,V.updateMatrices($),$.castShadow&&A++),i.spotLightMatrix[m]=V.matrix,$.castShadow){const W=r.get($);W.shadowBias=V.bias,W.shadowNormalBias=V.normalBias,W.shadowRadius=V.radius,W.shadowMapSize=V.mapSize,i.spotShadow[m]=W,i.spotShadowMap[m]=D,C++}m++}else if($.isRectAreaLight){const B=n.get($);B.color.copy(O).multiplyScalar(z),B.halfWidth.set($.width*.5,0,0),B.halfHeight.set(0,$.height*.5,0),i.rectArea[y]=B,y++}else if($.isPointLight){const B=n.get($);if(B.color.copy($.color).multiplyScalar($.intensity*E),B.distance=$.distance,B.decay=$.decay,$.castShadow){const V=$.shadow,W=r.get($);W.shadowBias=V.bias,W.shadowNormalBias=V.normalBias,W.shadowRadius=V.radius,W.shadowMapSize=V.mapSize,W.shadowCameraNear=V.camera.near,W.shadowCameraFar=V.camera.far,i.pointShadow[g]=W,i.pointShadowMap[g]=D,i.pointShadowMatrix[g]=$.shadow.matrix,_++}i.point[g]=B,g++}else if($.isHemisphereLight){const B=n.get($);B.skyColor.copy($.color).multiplyScalar(z*E),B.groundColor.copy($.groundColor).multiplyScalar(z*E),i.hemi[x]=B,x++}}y>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=At.LTC_FLOAT_1,i.rectAreaLTC2=At.LTC_FLOAT_2):(i.rectAreaLTC1=At.LTC_HALF_1,i.rectAreaLTC2=At.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=At.LTC_FLOAT_1,i.rectAreaLTC2=At.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=At.LTC_HALF_1,i.rectAreaLTC2=At.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=p;const P=i.hash;(P.directionalLength!==v||P.pointLength!==g||P.spotLength!==m||P.rectAreaLength!==y||P.hemiLength!==x||P.numDirectionalShadows!==S||P.numPointShadows!==_||P.numSpotShadows!==C||P.numSpotMaps!==T||P.numLightProbes!==M)&&(i.directional.length=v,i.spot.length=m,i.rectArea.length=y,i.point.length=g,i.hemi.length=x,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=C+T-A,i.spotLightMap.length=T,i.numSpotLightShadowsWithMaps=A,i.numLightProbes=M,P.directionalLength=v,P.pointLength=g,P.spotLength=m,P.rectAreaLength=y,P.hemiLength=x,P.numDirectionalShadows=S,P.numPointShadows=_,P.numSpotShadows=C,P.numSpotMaps=T,P.numLightProbes=M,i.version=rit++)}function c(u,d){let f=0,h=0,p=0,v=0,g=0;const m=d.matrixWorldInverse;for(let y=0,x=u.length;y<x;y++){const S=u[y];if(S.isDirectionalLight){const _=i.directional[f];_.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(m),f++}else if(S.isSpotLight){const _=i.spot[p];_.position.setFromMatrixPosition(S.matrixWorld),_.position.applyMatrix4(m),_.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(m),p++}else if(S.isRectAreaLight){const _=i.rectArea[v];_.position.setFromMatrixPosition(S.matrixWorld),_.position.applyMatrix4(m),a.identity(),o.copy(S.matrixWorld),o.premultiply(m),a.extractRotation(o),_.halfWidth.set(S.width*.5,0,0),_.halfHeight.set(0,S.height*.5,0),_.halfWidth.applyMatrix4(a),_.halfHeight.applyMatrix4(a),v++}else if(S.isPointLight){const _=i.point[h];_.position.setFromMatrixPosition(S.matrixWorld),_.position.applyMatrix4(m),h++}else if(S.isHemisphereLight){const _=i.hemi[g];_.direction.setFromMatrixPosition(S.matrixWorld),_.direction.transformDirection(m),g++}}}return{setup:l,setupView:c,state:i}}function ZY(t,e){const n=new sit(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(d){r.push(d)}function a(d){i.push(d)}function l(d){n.setup(r,d)}function c(d){n.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function oit(t,e){let n=new WeakMap;function r(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new ZY(t,e),n.set(s,[l])):o>=a.length?(l=new ZY(t,e),a.push(l)):l=a[o],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class SR extends ro{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=tue,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class _R extends ro{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const ait=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,lit=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function cit(t,e,n){let r=new p2;const i=new lt,s=new lt,o=new rr,a=new SR({depthPacking:p6}),l=new _R,c={},u=n.maxTextureSize,d={[Ju]:rs,[rs]:Ju,[Qa]:Qa},f=new sc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new lt},radius:{value:4}},vertexShader:ait,fragmentShader:lit}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new Ln;p.setAttribute("position",new kr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new ci(p,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=pR;let m=this.type;this.render=function(C,T,A){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||C.length===0)return;const M=t.getRenderTarget(),E=t.getActiveCubeFace(),P=t.getActiveMipmapLevel(),N=t.state;N.setBlending(Yd),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);const F=m!==Tc&&this.type===Tc,$=m===Tc&&this.type!==Tc;for(let O=0,z=C.length;O<z;O++){const X=C[O],D=X.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",X,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;i.copy(D.mapSize);const B=D.getFrameExtents();if(i.multiply(B),s.copy(D.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/B.x),i.x=s.x*B.x,D.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/B.y),i.y=s.y*B.y,D.mapSize.y=s.y)),D.map===null||F===!0||$===!0){const W=this.type!==Tc?{minFilter:Vi,magFilter:Vi}:{};D.map!==null&&D.map.dispose(),D.map=new ic(i.x,i.y,W),D.map.texture.name=X.name+".shadowMap",D.camera.updateProjectionMatrix()}t.setRenderTarget(D.map),t.clear();const V=D.getViewportCount();for(let W=0;W<V;W++){const j=D.getViewport(W);o.set(s.x*j.x,s.y*j.y,s.x*j.z,s.y*j.w),N.viewport(o),D.updateMatrices(X,W),r=D.getFrustum(),S(T,A,D.camera,X,this.type)}D.isPointLightShadow!==!0&&this.type===Tc&&y(D,A),D.needsUpdate=!1}m=this.type,g.needsUpdate=!1,t.setRenderTarget(M,E,P)};function y(C,T){const A=e.update(v);f.defines.VSM_SAMPLES!==C.blurSamples&&(f.defines.VSM_SAMPLES=C.blurSamples,h.defines.VSM_SAMPLES=C.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new ic(i.x,i.y)),f.uniforms.shadow_pass.value=C.map.texture,f.uniforms.resolution.value=C.mapSize,f.uniforms.radius.value=C.radius,t.setRenderTarget(C.mapPass),t.clear(),t.renderBufferDirect(T,null,A,f,v,null),h.uniforms.shadow_pass.value=C.mapPass.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,t.setRenderTarget(C.map),t.clear(),t.renderBufferDirect(T,null,A,h,v,null)}function x(C,T,A,M){let E=null;const P=A.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(P!==void 0)E=P;else if(E=A.isPointLight===!0?l:a,t.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const N=E.uuid,F=T.uuid;let $=c[N];$===void 0&&($={},c[N]=$);let O=$[F];O===void 0&&(O=E.clone(),$[F]=O,T.addEventListener("dispose",_)),E=O}if(E.visible=T.visible,E.wireframe=T.wireframe,M===Tc?E.side=T.shadowSide!==null?T.shadowSide:T.side:E.side=T.shadowSide!==null?T.shadowSide:d[T.side],E.alphaMap=T.alphaMap,E.alphaTest=T.alphaTest,E.map=T.map,E.clipShadows=T.clipShadows,E.clippingPlanes=T.clippingPlanes,E.clipIntersection=T.clipIntersection,E.displacementMap=T.displacementMap,E.displacementScale=T.displacementScale,E.displacementBias=T.displacementBias,E.wireframeLinewidth=T.wireframeLinewidth,E.linewidth=T.linewidth,A.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const N=t.properties.get(E);N.light=A}return E}function S(C,T,A,M,E){if(C.visible===!1)return;if(C.layers.test(T.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&E===Tc)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,C.matrixWorld);const F=e.update(C),$=C.material;if(Array.isArray($)){const O=F.groups;for(let z=0,X=O.length;z<X;z++){const D=O[z],B=$[D.materialIndex];if(B&&B.visible){const V=x(C,B,M,E);C.onBeforeShadow(t,C,T,A,F,V,D),t.renderBufferDirect(A,null,F,V,C,D),C.onAfterShadow(t,C,T,A,F,V,D)}}}else if($.visible){const O=x(C,$,M,E);C.onBeforeShadow(t,C,T,A,F,O,null),t.renderBufferDirect(A,null,F,O,C,null),C.onAfterShadow(t,C,T,A,F,O,null)}}const N=C.children;for(let F=0,$=N.length;F<$;F++)S(N[F],T,A,M,E)}function _(C){C.target.removeEventListener("dispose",_);for(const A in c){const M=c[A],E=C.target.uuid;E in M&&(M[E].dispose(),delete M[E])}}}function uit(t,e,n){const r=n.isWebGL2;function i(){let Ce=!1;const ut=new rr;let dt=null;const yt=new rr(0,0,0,0);return{setMask:function(vt){dt!==vt&&!Ce&&(t.colorMask(vt,vt,vt,vt),dt=vt)},setLocked:function(vt){Ce=vt},setClear:function(vt,Vt,It,en,Dt){Dt===!0&&(vt*=en,Vt*=en,It*=en),ut.set(vt,Vt,It,en),yt.equals(ut)===!1&&(t.clearColor(vt,Vt,It,en),yt.copy(ut))},reset:function(){Ce=!1,dt=null,yt.set(-1,0,0,0)}}}function s(){let Ce=!1,ut=null,dt=null,yt=null;return{setTest:function(vt){vt?ae(t.DEPTH_TEST):ye(t.DEPTH_TEST)},setMask:function(vt){ut!==vt&&!Ce&&(t.depthMask(vt),ut=vt)},setFunc:function(vt){if(dt!==vt){switch(vt){case Ice:t.depthFunc(t.NEVER);break;case Rce:t.depthFunc(t.ALWAYS);break;case Pce:t.depthFunc(t.LESS);break;case Bw:t.depthFunc(t.LEQUAL);break;case Nce:t.depthFunc(t.EQUAL);break;case $ce:t.depthFunc(t.GEQUAL);break;case Dce:t.depthFunc(t.GREATER);break;case Lce:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}dt=vt}},setLocked:function(vt){Ce=vt},setClear:function(vt){yt!==vt&&(t.clearDepth(vt),yt=vt)},reset:function(){Ce=!1,ut=null,dt=null,yt=null}}}function o(){let Ce=!1,ut=null,dt=null,yt=null,vt=null,Vt=null,It=null,en=null,Dt=null;return{setTest:function(mt){Ce||(mt?ae(t.STENCIL_TEST):ye(t.STENCIL_TEST))},setMask:function(mt){ut!==mt&&!Ce&&(t.stencilMask(mt),ut=mt)},setFunc:function(mt,jt,mn){(dt!==mt||yt!==jt||vt!==mn)&&(t.stencilFunc(mt,jt,mn),dt=mt,yt=jt,vt=mn)},setOp:function(mt,jt,mn){(Vt!==mt||It!==jt||en!==mn)&&(t.stencilOp(mt,jt,mn),Vt=mt,It=jt,en=mn)},setLocked:function(mt){Ce=mt},setClear:function(mt){Dt!==mt&&(t.clearStencil(mt),Dt=mt)},reset:function(){Ce=!1,ut=null,dt=null,yt=null,vt=null,Vt=null,It=null,en=null,Dt=null}}}const a=new i,l=new s,c=new o,u=new WeakMap,d=new WeakMap;let f={},h={},p=new WeakMap,v=[],g=null,m=!1,y=null,x=null,S=null,_=null,C=null,T=null,A=null,M=new zt(0,0,0),E=0,P=!1,N=null,F=null,$=null,O=null,z=null;const X=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let D=!1,B=0;const V=t.getParameter(t.VERSION);V.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(V)[1]),D=B>=1):V.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),D=B>=2);let W=null,j={};const J=t.getParameter(t.SCISSOR_BOX),Q=t.getParameter(t.VIEWPORT),te=new rr().fromArray(J),re=new rr().fromArray(Q);function se(Ce,ut,dt,yt){const vt=new Uint8Array(4),Vt=t.createTexture();t.bindTexture(Ce,Vt),t.texParameteri(Ce,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Ce,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let It=0;It<dt;It++)r&&(Ce===t.TEXTURE_3D||Ce===t.TEXTURE_2D_ARRAY)?t.texImage3D(ut,0,t.RGBA,1,1,yt,0,t.RGBA,t.UNSIGNED_BYTE,vt):t.texImage2D(ut+It,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,vt);return Vt}const fe={};fe[t.TEXTURE_2D]=se(t.TEXTURE_2D,t.TEXTURE_2D,1),fe[t.TEXTURE_CUBE_MAP]=se(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(fe[t.TEXTURE_2D_ARRAY]=se(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),fe[t.TEXTURE_3D]=se(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ae(t.DEPTH_TEST),l.setFunc(Bw),Ae(!1),ee(S4),ae(t.CULL_FACE),ge(Yd);function ae(Ce){f[Ce]!==!0&&(t.enable(Ce),f[Ce]=!0)}function ye(Ce){f[Ce]!==!1&&(t.disable(Ce),f[Ce]=!1)}function le(Ce,ut){return h[Ce]!==ut?(t.bindFramebuffer(Ce,ut),h[Ce]=ut,r&&(Ce===t.DRAW_FRAMEBUFFER&&(h[t.FRAMEBUFFER]=ut),Ce===t.FRAMEBUFFER&&(h[t.DRAW_FRAMEBUFFER]=ut)),!0):!1}function H(Ce,ut){let dt=v,yt=!1;if(Ce)if(dt=p.get(ut),dt===void 0&&(dt=[],p.set(ut,dt)),Ce.isWebGLMultipleRenderTargets){const vt=Ce.texture;if(dt.length!==vt.length||dt[0]!==t.COLOR_ATTACHMENT0){for(let Vt=0,It=vt.length;Vt<It;Vt++)dt[Vt]=t.COLOR_ATTACHMENT0+Vt;dt.length=vt.length,yt=!0}}else dt[0]!==t.COLOR_ATTACHMENT0&&(dt[0]=t.COLOR_ATTACHMENT0,yt=!0);else dt[0]!==t.BACK&&(dt[0]=t.BACK,yt=!0);yt&&(n.isWebGL2?t.drawBuffers(dt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(dt))}function Me(Ce){return g!==Ce?(t.useProgram(Ce),g=Ce,!0):!1}const we={[qf]:t.FUNC_ADD,[mce]:t.FUNC_SUBTRACT,[gce]:t.FUNC_REVERSE_SUBTRACT};if(r)we[E4]=t.MIN,we[M4]=t.MAX;else{const Ce=e.get("EXT_blend_minmax");Ce!==null&&(we[E4]=Ce.MIN_EXT,we[M4]=Ce.MAX_EXT)}const Ee={[vce]:t.ZERO,[yce]:t.ONE,[xce]:t.SRC_COLOR,[PA]:t.SRC_ALPHA,[Tce]:t.SRC_ALPHA_SATURATE,[_ce]:t.DST_COLOR,[wce]:t.DST_ALPHA,[bce]:t.ONE_MINUS_SRC_COLOR,[NA]:t.ONE_MINUS_SRC_ALPHA,[Cce]:t.ONE_MINUS_DST_COLOR,[Sce]:t.ONE_MINUS_DST_ALPHA,[Ece]:t.CONSTANT_COLOR,[Mce]:t.ONE_MINUS_CONSTANT_COLOR,[Ace]:t.CONSTANT_ALPHA,[kce]:t.ONE_MINUS_CONSTANT_ALPHA};function ge(Ce,ut,dt,yt,vt,Vt,It,en,Dt,mt){if(Ce===Yd){m===!0&&(ye(t.BLEND),m=!1);return}if(m===!1&&(ae(t.BLEND),m=!0),Ce!==pce){if(Ce!==y||mt!==P){if((x!==qf||C!==qf)&&(t.blendEquation(t.FUNC_ADD),x=qf,C=qf),mt)switch(Ce){case km:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case _4:t.blendFunc(t.ONE,t.ONE);break;case C4:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case T4:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}else switch(Ce){case km:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case _4:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case C4:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case T4:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ce);break}S=null,_=null,T=null,A=null,M.set(0,0,0),E=0,y=Ce,P=mt}return}vt=vt||ut,Vt=Vt||dt,It=It||yt,(ut!==x||vt!==C)&&(t.blendEquationSeparate(we[ut],we[vt]),x=ut,C=vt),(dt!==S||yt!==_||Vt!==T||It!==A)&&(t.blendFuncSeparate(Ee[dt],Ee[yt],Ee[Vt],Ee[It]),S=dt,_=yt,T=Vt,A=It),(en.equals(M)===!1||Dt!==E)&&(t.blendColor(en.r,en.g,en.b,Dt),M.copy(en),E=Dt),y=Ce,P=!1}function qe(Ce,ut){Ce.side===Qa?ye(t.CULL_FACE):ae(t.CULL_FACE);let dt=Ce.side===rs;ut&&(dt=!dt),Ae(dt),Ce.blending===km&&Ce.transparent===!1?ge(Yd):ge(Ce.blending,Ce.blendEquation,Ce.blendSrc,Ce.blendDst,Ce.blendEquationAlpha,Ce.blendSrcAlpha,Ce.blendDstAlpha,Ce.blendColor,Ce.blendAlpha,Ce.premultipliedAlpha),l.setFunc(Ce.depthFunc),l.setTest(Ce.depthTest),l.setMask(Ce.depthWrite),a.setMask(Ce.colorWrite);const yt=Ce.stencilWrite;c.setTest(yt),yt&&(c.setMask(Ce.stencilWriteMask),c.setFunc(Ce.stencilFunc,Ce.stencilRef,Ce.stencilFuncMask),c.setOp(Ce.stencilFail,Ce.stencilZFail,Ce.stencilZPass)),oe(Ce.polygonOffset,Ce.polygonOffsetFactor,Ce.polygonOffsetUnits),Ce.alphaToCoverage===!0?ae(t.SAMPLE_ALPHA_TO_COVERAGE):ye(t.SAMPLE_ALPHA_TO_COVERAGE)}function Ae(Ce){N!==Ce&&(Ce?t.frontFace(t.CW):t.frontFace(t.CCW),N=Ce)}function ee(Ce){Ce!==dce?(ae(t.CULL_FACE),Ce!==F&&(Ce===S4?t.cullFace(t.BACK):Ce===fce?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):ye(t.CULL_FACE),F=Ce}function Y(Ce){Ce!==$&&(D&&t.lineWidth(Ce),$=Ce)}function oe(Ce,ut,dt){Ce?(ae(t.POLYGON_OFFSET_FILL),(O!==ut||z!==dt)&&(t.polygonOffset(ut,dt),O=ut,z=dt)):ye(t.POLYGON_OFFSET_FILL)}function xe(Ce){Ce?ae(t.SCISSOR_TEST):ye(t.SCISSOR_TEST)}function Se(Ce){Ce===void 0&&(Ce=t.TEXTURE0+X-1),W!==Ce&&(t.activeTexture(Ce),W=Ce)}function be(Ce,ut,dt){dt===void 0&&(W===null?dt=t.TEXTURE0+X-1:dt=W);let yt=j[dt];yt===void 0&&(yt={type:void 0,texture:void 0},j[dt]=yt),(yt.type!==Ce||yt.texture!==ut)&&(W!==dt&&(t.activeTexture(dt),W=dt),t.bindTexture(Ce,ut||fe[Ce]),yt.type=Ce,yt.texture=ut)}function Re(){const Ce=j[W];Ce!==void 0&&Ce.type!==void 0&&(t.bindTexture(Ce.type,null),Ce.type=void 0,Ce.texture=void 0)}function Ke(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ze(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Ne(){try{t.texSubImage2D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function De(){try{t.texSubImage3D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Ve(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function gt(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function ct(){try{t.texStorage2D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Ye(){try{t.texStorage3D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Xe(){try{t.texImage2D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function Le(){try{t.texImage3D.apply(t,arguments)}catch(Ce){console.error("THREE.WebGLState:",Ce)}}function pe(Ce){te.equals(Ce)===!1&&(t.scissor(Ce.x,Ce.y,Ce.z,Ce.w),te.copy(Ce))}function He(Ce){re.equals(Ce)===!1&&(t.viewport(Ce.x,Ce.y,Ce.z,Ce.w),re.copy(Ce))}function ot(Ce,ut){let dt=d.get(ut);dt===void 0&&(dt=new WeakMap,d.set(ut,dt));let yt=dt.get(Ce);yt===void 0&&(yt=t.getUniformBlockIndex(ut,Ce.name),dt.set(Ce,yt))}function et(Ce,ut){const yt=d.get(ut).get(Ce);u.get(ut)!==yt&&(t.uniformBlockBinding(ut,yt,Ce.__bindingPointIndex),u.set(ut,yt))}function Ie(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),f={},W=null,j={},h={},p=new WeakMap,v=[],g=null,m=!1,y=null,x=null,S=null,_=null,C=null,T=null,A=null,M=new zt(0,0,0),E=0,P=!1,N=null,F=null,$=null,O=null,z=null,te.set(0,0,t.canvas.width,t.canvas.height),re.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ae,disable:ye,bindFramebuffer:le,drawBuffers:H,useProgram:Me,setBlending:ge,setMaterial:qe,setFlipSided:Ae,setCullFace:ee,setLineWidth:Y,setPolygonOffset:oe,setScissorTest:xe,activeTexture:Se,bindTexture:be,unbindTexture:Re,compressedTexImage2D:Ke,compressedTexImage3D:ze,texImage2D:Xe,texImage3D:Le,updateUBOMapping:ot,uniformBlockBinding:et,texStorage2D:ct,texStorage3D:Ye,texSubImage2D:Ne,texSubImage3D:De,compressedTexSubImage2D:Ve,compressedTexSubImage3D:gt,scissor:pe,viewport:He,reset:Ie}}function dit(t,e,n,r,i,s,o){const a=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let d;const f=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(ee,Y){return h?new OffscreenCanvas(ee,Y):Kw("canvas")}function v(ee,Y,oe,xe){let Se=1;if((ee.width>xe||ee.height>xe)&&(Se=xe/Math.max(ee.width,ee.height)),Se<1||Y===!0)if(typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ee instanceof ImageBitmap){const be=Y?LA:Math.floor,Re=be(Se*ee.width),Ke=be(Se*ee.height);d===void 0&&(d=p(Re,Ke));const ze=oe?p(Re,Ke):d;return ze.width=Re,ze.height=Ke,ze.getContext("2d").drawImage(ee,0,0,Re,Ke),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ee.width+"x"+ee.height+") to ("+Re+"x"+Ke+")."),ze}else return"data"in ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ee.width+"x"+ee.height+")."),ee;return ee}function g(ee){return nF(ee.width)&&nF(ee.height)}function m(ee){return a?!1:ee.wrapS!==To||ee.wrapT!==To||ee.minFilter!==Vi&&ee.minFilter!==Mr}function y(ee,Y){return ee.generateMipmaps&&Y&&ee.minFilter!==Vi&&ee.minFilter!==Mr}function x(ee){t.generateMipmap(ee)}function S(ee,Y,oe,xe,Se=!1){if(a===!1)return Y;if(ee!==null){if(t[ee]!==void 0)return t[ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ee+"'")}let be=Y;if(Y===t.RED&&(oe===t.FLOAT&&(be=t.R32F),oe===t.HALF_FLOAT&&(be=t.R16F),oe===t.UNSIGNED_BYTE&&(be=t.R8)),Y===t.RED_INTEGER&&(oe===t.UNSIGNED_BYTE&&(be=t.R8UI),oe===t.UNSIGNED_SHORT&&(be=t.R16UI),oe===t.UNSIGNED_INT&&(be=t.R32UI),oe===t.BYTE&&(be=t.R8I),oe===t.SHORT&&(be=t.R16I),oe===t.INT&&(be=t.R32I)),Y===t.RG&&(oe===t.FLOAT&&(be=t.RG32F),oe===t.HALF_FLOAT&&(be=t.RG16F),oe===t.UNSIGNED_BYTE&&(be=t.RG8)),Y===t.RGBA){const Re=Se?jw:Er.getTransfer(xe);oe===t.FLOAT&&(be=t.RGBA32F),oe===t.HALF_FLOAT&&(be=t.RGBA16F),oe===t.UNSIGNED_BYTE&&(be=Re===Hr?t.SRGB8_ALPHA8:t.RGBA8),oe===t.UNSIGNED_SHORT_4_4_4_4&&(be=t.RGBA4),oe===t.UNSIGNED_SHORT_5_5_5_1&&(be=t.RGB5_A1)}return(be===t.R16F||be===t.R32F||be===t.RG16F||be===t.RG32F||be===t.RGBA16F||be===t.RGBA32F)&&e.get("EXT_color_buffer_float"),be}function _(ee,Y,oe){return y(ee,oe)===!0||ee.isFramebufferTexture&&ee.minFilter!==Vi&&ee.minFilter!==Mr?Math.log2(Math.max(Y.width,Y.height))+1:ee.mipmaps!==void 0&&ee.mipmaps.length>0?ee.mipmaps.length:ee.isCompressedTexture&&Array.isArray(ee.image)?Y.mipmaps.length:1}function C(ee){return ee===Vi||ee===$A||ee===_b?t.NEAREST:t.LINEAR}function T(ee){const Y=ee.target;Y.removeEventListener("dispose",T),M(Y),Y.isVideoTexture&&u.delete(Y)}function A(ee){const Y=ee.target;Y.removeEventListener("dispose",A),P(Y)}function M(ee){const Y=r.get(ee);if(Y.__webglInit===void 0)return;const oe=ee.source,xe=f.get(oe);if(xe){const Se=xe[Y.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&E(ee),Object.keys(xe).length===0&&f.delete(oe)}r.remove(ee)}function E(ee){const Y=r.get(ee);t.deleteTexture(Y.__webglTexture);const oe=ee.source,xe=f.get(oe);delete xe[Y.__cacheKey],o.memory.textures--}function P(ee){const Y=ee.texture,oe=r.get(ee),xe=r.get(Y);if(xe.__webglTexture!==void 0&&(t.deleteTexture(xe.__webglTexture),o.memory.textures--),ee.depthTexture&&ee.depthTexture.dispose(),ee.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(oe.__webglFramebuffer[Se]))for(let be=0;be<oe.__webglFramebuffer[Se].length;be++)t.deleteFramebuffer(oe.__webglFramebuffer[Se][be]);else t.deleteFramebuffer(oe.__webglFramebuffer[Se]);oe.__webglDepthbuffer&&t.deleteRenderbuffer(oe.__webglDepthbuffer[Se])}else{if(Array.isArray(oe.__webglFramebuffer))for(let Se=0;Se<oe.__webglFramebuffer.length;Se++)t.deleteFramebuffer(oe.__webglFramebuffer[Se]);else t.deleteFramebuffer(oe.__webglFramebuffer);if(oe.__webglDepthbuffer&&t.deleteRenderbuffer(oe.__webglDepthbuffer),oe.__webglMultisampledFramebuffer&&t.deleteFramebuffer(oe.__webglMultisampledFramebuffer),oe.__webglColorRenderbuffer)for(let Se=0;Se<oe.__webglColorRenderbuffer.length;Se++)oe.__webglColorRenderbuffer[Se]&&t.deleteRenderbuffer(oe.__webglColorRenderbuffer[Se]);oe.__webglDepthRenderbuffer&&t.deleteRenderbuffer(oe.__webglDepthRenderbuffer)}if(ee.isWebGLMultipleRenderTargets)for(let Se=0,be=Y.length;Se<be;Se++){const Re=r.get(Y[Se]);Re.__webglTexture&&(t.deleteTexture(Re.__webglTexture),o.memory.textures--),r.remove(Y[Se])}r.remove(Y),r.remove(ee)}let N=0;function F(){N=0}function $(){const ee=N;return ee>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ee+" texture units while this GPU supports only "+i.maxTextures),N+=1,ee}function O(ee){const Y=[];return Y.push(ee.wrapS),Y.push(ee.wrapT),Y.push(ee.wrapR||0),Y.push(ee.magFilter),Y.push(ee.minFilter),Y.push(ee.anisotropy),Y.push(ee.internalFormat),Y.push(ee.format),Y.push(ee.type),Y.push(ee.generateMipmaps),Y.push(ee.premultiplyAlpha),Y.push(ee.flipY),Y.push(ee.unpackAlignment),Y.push(ee.colorSpace),Y.join()}function z(ee,Y){const oe=r.get(ee);if(ee.isVideoTexture&&qe(ee),ee.isRenderTargetTexture===!1&&ee.version>0&&oe.__version!==ee.version){const xe=ee.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{te(oe,ee,Y);return}}n.bindTexture(t.TEXTURE_2D,oe.__webglTexture,t.TEXTURE0+Y)}function X(ee,Y){const oe=r.get(ee);if(ee.version>0&&oe.__version!==ee.version){te(oe,ee,Y);return}n.bindTexture(t.TEXTURE_2D_ARRAY,oe.__webglTexture,t.TEXTURE0+Y)}function D(ee,Y){const oe=r.get(ee);if(ee.version>0&&oe.__version!==ee.version){te(oe,ee,Y);return}n.bindTexture(t.TEXTURE_3D,oe.__webglTexture,t.TEXTURE0+Y)}function B(ee,Y){const oe=r.get(ee);if(ee.version>0&&oe.__version!==ee.version){re(oe,ee,Y);return}n.bindTexture(t.TEXTURE_CUBE_MAP,oe.__webglTexture,t.TEXTURE0+Y)}const V={[zw]:t.REPEAT,[To]:t.CLAMP_TO_EDGE,[Vw]:t.MIRRORED_REPEAT},W={[Vi]:t.NEAREST,[$A]:t.NEAREST_MIPMAP_NEAREST,[_b]:t.NEAREST_MIPMAP_LINEAR,[Mr]:t.LINEAR,[r6]:t.LINEAR_MIPMAP_NEAREST,[Ih]:t.LINEAR_MIPMAP_LINEAR},j={[rue]:t.NEVER,[cue]:t.ALWAYS,[iue]:t.LESS,[m6]:t.LEQUAL,[sue]:t.EQUAL,[lue]:t.GEQUAL,[oue]:t.GREATER,[aue]:t.NOTEQUAL};function J(ee,Y,oe){if(oe?(t.texParameteri(ee,t.TEXTURE_WRAP_S,V[Y.wrapS]),t.texParameteri(ee,t.TEXTURE_WRAP_T,V[Y.wrapT]),(ee===t.TEXTURE_3D||ee===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ee,t.TEXTURE_WRAP_R,V[Y.wrapR]),t.texParameteri(ee,t.TEXTURE_MAG_FILTER,W[Y.magFilter]),t.texParameteri(ee,t.TEXTURE_MIN_FILTER,W[Y.minFilter])):(t.texParameteri(ee,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(ee,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(ee===t.TEXTURE_3D||ee===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ee,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(Y.wrapS!==To||Y.wrapT!==To)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(ee,t.TEXTURE_MAG_FILTER,C(Y.magFilter)),t.texParameteri(ee,t.TEXTURE_MIN_FILTER,C(Y.minFilter)),Y.minFilter!==Vi&&Y.minFilter!==Mr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Y.compareFunction&&(t.texParameteri(ee,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(ee,t.TEXTURE_COMPARE_FUNC,j[Y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const xe=e.get("EXT_texture_filter_anisotropic");if(Y.magFilter===Vi||Y.minFilter!==_b&&Y.minFilter!==Ih||Y.type===Ps&&e.has("OES_texture_float_linear")===!1||a===!1&&Y.type===Ao&&e.has("OES_texture_half_float_linear")===!1)return;(Y.anisotropy>1||r.get(Y).__currentAnisotropy)&&(t.texParameterf(ee,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,i.getMaxAnisotropy())),r.get(Y).__currentAnisotropy=Y.anisotropy)}}function Q(ee,Y){let oe=!1;ee.__webglInit===void 0&&(ee.__webglInit=!0,Y.addEventListener("dispose",T));const xe=Y.source;let Se=f.get(xe);Se===void 0&&(Se={},f.set(xe,Se));const be=O(Y);if(be!==ee.__cacheKey){Se[be]===void 0&&(Se[be]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,oe=!0),Se[be].usedTimes++;const Re=Se[ee.__cacheKey];Re!==void 0&&(Se[ee.__cacheKey].usedTimes--,Re.usedTimes===0&&E(Y)),ee.__cacheKey=be,ee.__webglTexture=Se[be].texture}return oe}function te(ee,Y,oe){let xe=t.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(xe=t.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(xe=t.TEXTURE_3D);const Se=Q(ee,Y),be=Y.source;n.bindTexture(xe,ee.__webglTexture,t.TEXTURE0+oe);const Re=r.get(be);if(be.version!==Re.__version||Se===!0){n.activeTexture(t.TEXTURE0+oe);const Ke=Er.getPrimaries(Er.workingColorSpace),ze=Y.colorSpace===el?null:Er.getPrimaries(Y.colorSpace),Ne=Y.colorSpace===el||Ke===ze?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Y.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Y.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ne);const De=m(Y)&&g(Y.image)===!1;let Ve=v(Y.image,De,!1,i.maxTextureSize);Ve=Ae(Y,Ve);const gt=g(Ve)||a,ct=s.convert(Y.format,Y.colorSpace);let Ye=s.convert(Y.type),Xe=S(Y.internalFormat,ct,Ye,Y.colorSpace,Y.isVideoTexture);J(xe,Y,gt);let Le;const pe=Y.mipmaps,He=a&&Y.isVideoTexture!==!0&&Xe!==d6,ot=Re.__version===void 0||Se===!0,et=_(Y,Ve,gt);if(Y.isDepthTexture)Xe=t.DEPTH_COMPONENT,a?Y.type===Ps?Xe=t.DEPTH_COMPONENT32F:Y.type===zd?Xe=t.DEPTH_COMPONENT24:Y.type===ph?Xe=t.DEPTH24_STENCIL8:Xe=t.DEPTH_COMPONENT16:Y.type===Ps&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Y.format===mh&&Xe===t.DEPTH_COMPONENT&&Y.type!==gR&&Y.type!==zd&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Y.type=zd,Ye=s.convert(Y.type)),Y.format===rg&&Xe===t.DEPTH_COMPONENT&&(Xe=t.DEPTH_STENCIL,Y.type!==ph&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Y.type=ph,Ye=s.convert(Y.type))),ot&&(He?n.texStorage2D(t.TEXTURE_2D,1,Xe,Ve.width,Ve.height):n.texImage2D(t.TEXTURE_2D,0,Xe,Ve.width,Ve.height,0,ct,Ye,null));else if(Y.isDataTexture)if(pe.length>0&&gt){He&&ot&&n.texStorage2D(t.TEXTURE_2D,et,Xe,pe[0].width,pe[0].height);for(let Ie=0,Ce=pe.length;Ie<Ce;Ie++)Le=pe[Ie],He?n.texSubImage2D(t.TEXTURE_2D,Ie,0,0,Le.width,Le.height,ct,Ye,Le.data):n.texImage2D(t.TEXTURE_2D,Ie,Xe,Le.width,Le.height,0,ct,Ye,Le.data);Y.generateMipmaps=!1}else He?(ot&&n.texStorage2D(t.TEXTURE_2D,et,Xe,Ve.width,Ve.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ve.width,Ve.height,ct,Ye,Ve.data)):n.texImage2D(t.TEXTURE_2D,0,Xe,Ve.width,Ve.height,0,ct,Ye,Ve.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){He&&ot&&n.texStorage3D(t.TEXTURE_2D_ARRAY,et,Xe,pe[0].width,pe[0].height,Ve.depth);for(let Ie=0,Ce=pe.length;Ie<Ce;Ie++)Le=pe[Ie],Y.format!==Eo?ct!==null?He?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ie,0,0,0,Le.width,Le.height,Ve.depth,ct,Le.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ie,Xe,Le.width,Le.height,Ve.depth,0,Le.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ie,0,0,0,Le.width,Le.height,Ve.depth,ct,Ye,Le.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ie,Xe,Le.width,Le.height,Ve.depth,0,ct,Ye,Le.data)}else{He&&ot&&n.texStorage2D(t.TEXTURE_2D,et,Xe,pe[0].width,pe[0].height);for(let Ie=0,Ce=pe.length;Ie<Ce;Ie++)Le=pe[Ie],Y.format!==Eo?ct!==null?He?n.compressedTexSubImage2D(t.TEXTURE_2D,Ie,0,0,Le.width,Le.height,ct,Le.data):n.compressedTexImage2D(t.TEXTURE_2D,Ie,Xe,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?n.texSubImage2D(t.TEXTURE_2D,Ie,0,0,Le.width,Le.height,ct,Ye,Le.data):n.texImage2D(t.TEXTURE_2D,Ie,Xe,Le.width,Le.height,0,ct,Ye,Le.data)}else if(Y.isDataArrayTexture)He?(ot&&n.texStorage3D(t.TEXTURE_2D_ARRAY,et,Xe,Ve.width,Ve.height,Ve.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Ve.width,Ve.height,Ve.depth,ct,Ye,Ve.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Xe,Ve.width,Ve.height,Ve.depth,0,ct,Ye,Ve.data);else if(Y.isData3DTexture)He?(ot&&n.texStorage3D(t.TEXTURE_3D,et,Xe,Ve.width,Ve.height,Ve.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Ve.width,Ve.height,Ve.depth,ct,Ye,Ve.data)):n.texImage3D(t.TEXTURE_3D,0,Xe,Ve.width,Ve.height,Ve.depth,0,ct,Ye,Ve.data);else if(Y.isFramebufferTexture){if(ot)if(He)n.texStorage2D(t.TEXTURE_2D,et,Xe,Ve.width,Ve.height);else{let Ie=Ve.width,Ce=Ve.height;for(let ut=0;ut<et;ut++)n.texImage2D(t.TEXTURE_2D,ut,Xe,Ie,Ce,0,ct,Ye,null),Ie>>=1,Ce>>=1}}else if(pe.length>0&&gt){He&&ot&&n.texStorage2D(t.TEXTURE_2D,et,Xe,pe[0].width,pe[0].height);for(let Ie=0,Ce=pe.length;Ie<Ce;Ie++)Le=pe[Ie],He?n.texSubImage2D(t.TEXTURE_2D,Ie,0,0,ct,Ye,Le):n.texImage2D(t.TEXTURE_2D,Ie,Xe,ct,Ye,Le);Y.generateMipmaps=!1}else He?(ot&&n.texStorage2D(t.TEXTURE_2D,et,Xe,Ve.width,Ve.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,ct,Ye,Ve)):n.texImage2D(t.TEXTURE_2D,0,Xe,ct,Ye,Ve);y(Y,gt)&&x(xe),Re.__version=be.version,Y.onUpdate&&Y.onUpdate(Y)}ee.__version=Y.version}function re(ee,Y,oe){if(Y.image.length!==6)return;const xe=Q(ee,Y),Se=Y.source;n.bindTexture(t.TEXTURE_CUBE_MAP,ee.__webglTexture,t.TEXTURE0+oe);const be=r.get(Se);if(Se.version!==be.__version||xe===!0){n.activeTexture(t.TEXTURE0+oe);const Re=Er.getPrimaries(Er.workingColorSpace),Ke=Y.colorSpace===el?null:Er.getPrimaries(Y.colorSpace),ze=Y.colorSpace===el||Re===Ke?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Y.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Y.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);const Ne=Y.isCompressedTexture||Y.image[0].isCompressedTexture,De=Y.image[0]&&Y.image[0].isDataTexture,Ve=[];for(let Ie=0;Ie<6;Ie++)!Ne&&!De?Ve[Ie]=v(Y.image[Ie],!1,!0,i.maxCubemapSize):Ve[Ie]=De?Y.image[Ie].image:Y.image[Ie],Ve[Ie]=Ae(Y,Ve[Ie]);const gt=Ve[0],ct=g(gt)||a,Ye=s.convert(Y.format,Y.colorSpace),Xe=s.convert(Y.type),Le=S(Y.internalFormat,Ye,Xe,Y.colorSpace),pe=a&&Y.isVideoTexture!==!0,He=be.__version===void 0||xe===!0;let ot=_(Y,gt,ct);J(t.TEXTURE_CUBE_MAP,Y,ct);let et;if(Ne){pe&&He&&n.texStorage2D(t.TEXTURE_CUBE_MAP,ot,Le,gt.width,gt.height);for(let Ie=0;Ie<6;Ie++){et=Ve[Ie].mipmaps;for(let Ce=0;Ce<et.length;Ce++){const ut=et[Ce];Y.format!==Eo?Ye!==null?pe?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce,0,0,ut.width,ut.height,Ye,ut.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce,Le,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce,0,0,ut.width,ut.height,Ye,Xe,ut.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce,Le,ut.width,ut.height,0,Ye,Xe,ut.data)}}}else{et=Y.mipmaps,pe&&He&&(et.length>0&&ot++,n.texStorage2D(t.TEXTURE_CUBE_MAP,ot,Le,Ve[0].width,Ve[0].height));for(let Ie=0;Ie<6;Ie++)if(De){pe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,Ve[Ie].width,Ve[Ie].height,Ye,Xe,Ve[Ie].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,Le,Ve[Ie].width,Ve[Ie].height,0,Ye,Xe,Ve[Ie].data);for(let Ce=0;Ce<et.length;Ce++){const dt=et[Ce].image[Ie].image;pe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce+1,0,0,dt.width,dt.height,Ye,Xe,dt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce+1,Le,dt.width,dt.height,0,Ye,Xe,dt.data)}}else{pe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,Ye,Xe,Ve[Ie]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,Le,Ye,Xe,Ve[Ie]);for(let Ce=0;Ce<et.length;Ce++){const ut=et[Ce];pe?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce+1,0,0,Ye,Xe,ut.image[Ie]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ce+1,Le,Ye,Xe,ut.image[Ie])}}}y(Y,ct)&&x(t.TEXTURE_CUBE_MAP),be.__version=Se.version,Y.onUpdate&&Y.onUpdate(Y)}ee.__version=Y.version}function se(ee,Y,oe,xe,Se,be){const Re=s.convert(oe.format,oe.colorSpace),Ke=s.convert(oe.type),ze=S(oe.internalFormat,Re,Ke,oe.colorSpace);if(!r.get(Y).__hasExternalTextures){const De=Math.max(1,Y.width>>be),Ve=Math.max(1,Y.height>>be);Se===t.TEXTURE_3D||Se===t.TEXTURE_2D_ARRAY?n.texImage3D(Se,be,ze,De,Ve,Y.depth,0,Re,Ke,null):n.texImage2D(Se,be,ze,De,Ve,0,Re,Ke,null)}n.bindFramebuffer(t.FRAMEBUFFER,ee),ge(Y)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,xe,Se,r.get(oe).__webglTexture,0,Ee(Y)):(Se===t.TEXTURE_2D||Se>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Se<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,xe,Se,r.get(oe).__webglTexture,be),n.bindFramebuffer(t.FRAMEBUFFER,null)}function fe(ee,Y,oe){if(t.bindRenderbuffer(t.RENDERBUFFER,ee),Y.depthBuffer&&!Y.stencilBuffer){let xe=a===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(oe||ge(Y)){const Se=Y.depthTexture;Se&&Se.isDepthTexture&&(Se.type===Ps?xe=t.DEPTH_COMPONENT32F:Se.type===zd&&(xe=t.DEPTH_COMPONENT24));const be=Ee(Y);ge(Y)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,be,xe,Y.width,Y.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,be,xe,Y.width,Y.height)}else t.renderbufferStorage(t.RENDERBUFFER,xe,Y.width,Y.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,ee)}else if(Y.depthBuffer&&Y.stencilBuffer){const xe=Ee(Y);oe&&ge(Y)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,xe,t.DEPTH24_STENCIL8,Y.width,Y.height):ge(Y)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,xe,t.DEPTH24_STENCIL8,Y.width,Y.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,Y.width,Y.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,ee)}else{const xe=Y.isWebGLMultipleRenderTargets===!0?Y.texture:[Y.texture];for(let Se=0;Se<xe.length;Se++){const be=xe[Se],Re=s.convert(be.format,be.colorSpace),Ke=s.convert(be.type),ze=S(be.internalFormat,Re,Ke,be.colorSpace),Ne=Ee(Y);oe&&ge(Y)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ne,ze,Y.width,Y.height):ge(Y)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ne,ze,Y.width,Y.height):t.renderbufferStorage(t.RENDERBUFFER,ze,Y.width,Y.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ae(ee,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,ee),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Y.depthTexture).__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),z(Y.depthTexture,0);const xe=r.get(Y.depthTexture).__webglTexture,Se=Ee(Y);if(Y.depthTexture.format===mh)ge(Y)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,xe,0,Se):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,xe,0);else if(Y.depthTexture.format===rg)ge(Y)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,xe,0,Se):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function ye(ee){const Y=r.get(ee),oe=ee.isWebGLCubeRenderTarget===!0;if(ee.depthTexture&&!Y.__autoAllocateDepthBuffer){if(oe)throw new Error("target.depthTexture not supported in Cube render targets");ae(Y.__webglFramebuffer,ee)}else if(oe){Y.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)n.bindFramebuffer(t.FRAMEBUFFER,Y.__webglFramebuffer[xe]),Y.__webglDepthbuffer[xe]=t.createRenderbuffer(),fe(Y.__webglDepthbuffer[xe],ee,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer=t.createRenderbuffer(),fe(Y.__webglDepthbuffer,ee,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function le(ee,Y,oe){const xe=r.get(ee);Y!==void 0&&se(xe.__webglFramebuffer,ee,ee.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),oe!==void 0&&ye(ee)}function H(ee){const Y=ee.texture,oe=r.get(ee),xe=r.get(Y);ee.addEventListener("dispose",A),ee.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=t.createTexture()),xe.__version=Y.version,o.memory.textures++);const Se=ee.isWebGLCubeRenderTarget===!0,be=ee.isWebGLMultipleRenderTargets===!0,Re=g(ee)||a;if(Se){oe.__webglFramebuffer=[];for(let Ke=0;Ke<6;Ke++)if(a&&Y.mipmaps&&Y.mipmaps.length>0){oe.__webglFramebuffer[Ke]=[];for(let ze=0;ze<Y.mipmaps.length;ze++)oe.__webglFramebuffer[Ke][ze]=t.createFramebuffer()}else oe.__webglFramebuffer[Ke]=t.createFramebuffer()}else{if(a&&Y.mipmaps&&Y.mipmaps.length>0){oe.__webglFramebuffer=[];for(let Ke=0;Ke<Y.mipmaps.length;Ke++)oe.__webglFramebuffer[Ke]=t.createFramebuffer()}else oe.__webglFramebuffer=t.createFramebuffer();if(be)if(i.drawBuffers){const Ke=ee.texture;for(let ze=0,Ne=Ke.length;ze<Ne;ze++){const De=r.get(Ke[ze]);De.__webglTexture===void 0&&(De.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&ee.samples>0&&ge(ee)===!1){const Ke=be?Y:[Y];oe.__webglMultisampledFramebuffer=t.createFramebuffer(),oe.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,oe.__webglMultisampledFramebuffer);for(let ze=0;ze<Ke.length;ze++){const Ne=Ke[ze];oe.__webglColorRenderbuffer[ze]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,oe.__webglColorRenderbuffer[ze]);const De=s.convert(Ne.format,Ne.colorSpace),Ve=s.convert(Ne.type),gt=S(Ne.internalFormat,De,Ve,Ne.colorSpace,ee.isXRRenderTarget===!0),ct=Ee(ee);t.renderbufferStorageMultisample(t.RENDERBUFFER,ct,gt,ee.width,ee.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ze,t.RENDERBUFFER,oe.__webglColorRenderbuffer[ze])}t.bindRenderbuffer(t.RENDERBUFFER,null),ee.depthBuffer&&(oe.__webglDepthRenderbuffer=t.createRenderbuffer(),fe(oe.__webglDepthRenderbuffer,ee,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Se){n.bindTexture(t.TEXTURE_CUBE_MAP,xe.__webglTexture),J(t.TEXTURE_CUBE_MAP,Y,Re);for(let Ke=0;Ke<6;Ke++)if(a&&Y.mipmaps&&Y.mipmaps.length>0)for(let ze=0;ze<Y.mipmaps.length;ze++)se(oe.__webglFramebuffer[Ke][ze],ee,Y,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,ze);else se(oe.__webglFramebuffer[Ke],ee,Y,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0);y(Y,Re)&&x(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(be){const Ke=ee.texture;for(let ze=0,Ne=Ke.length;ze<Ne;ze++){const De=Ke[ze],Ve=r.get(De);n.bindTexture(t.TEXTURE_2D,Ve.__webglTexture),J(t.TEXTURE_2D,De,Re),se(oe.__webglFramebuffer,ee,De,t.COLOR_ATTACHMENT0+ze,t.TEXTURE_2D,0),y(De,Re)&&x(t.TEXTURE_2D)}n.unbindTexture()}else{let Ke=t.TEXTURE_2D;if((ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(a?Ke=ee.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ke,xe.__webglTexture),J(Ke,Y,Re),a&&Y.mipmaps&&Y.mipmaps.length>0)for(let ze=0;ze<Y.mipmaps.length;ze++)se(oe.__webglFramebuffer[ze],ee,Y,t.COLOR_ATTACHMENT0,Ke,ze);else se(oe.__webglFramebuffer,ee,Y,t.COLOR_ATTACHMENT0,Ke,0);y(Y,Re)&&x(Ke),n.unbindTexture()}ee.depthBuffer&&ye(ee)}function Me(ee){const Y=g(ee)||a,oe=ee.isWebGLMultipleRenderTargets===!0?ee.texture:[ee.texture];for(let xe=0,Se=oe.length;xe<Se;xe++){const be=oe[xe];if(y(be,Y)){const Re=ee.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Ke=r.get(be).__webglTexture;n.bindTexture(Re,Ke),x(Re),n.unbindTexture()}}}function we(ee){if(a&&ee.samples>0&&ge(ee)===!1){const Y=ee.isWebGLMultipleRenderTargets?ee.texture:[ee.texture],oe=ee.width,xe=ee.height;let Se=t.COLOR_BUFFER_BIT;const be=[],Re=ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ke=r.get(ee),ze=ee.isWebGLMultipleRenderTargets===!0;if(ze)for(let Ne=0;Ne<Y.length;Ne++)n.bindFramebuffer(t.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ke.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ke.__webglFramebuffer);for(let Ne=0;Ne<Y.length;Ne++){be.push(t.COLOR_ATTACHMENT0+Ne),ee.depthBuffer&&be.push(Re);const De=Ke.__ignoreDepthValues!==void 0?Ke.__ignoreDepthValues:!1;if(De===!1&&(ee.depthBuffer&&(Se|=t.DEPTH_BUFFER_BIT),ee.stencilBuffer&&(Se|=t.STENCIL_BUFFER_BIT)),ze&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ke.__webglColorRenderbuffer[Ne]),De===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[Re]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[Re])),ze){const Ve=r.get(Y[Ne]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Ve,0)}t.blitFramebuffer(0,0,oe,xe,0,0,oe,xe,Se,t.NEAREST),c&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,be)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),ze)for(let Ne=0;Ne<Y.length;Ne++){n.bindFramebuffer(t.FRAMEBUFFER,Ke.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.RENDERBUFFER,Ke.__webglColorRenderbuffer[Ne]);const De=r.get(Y[Ne]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ke.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.TEXTURE_2D,De,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ke.__webglMultisampledFramebuffer)}}function Ee(ee){return Math.min(i.maxSamples,ee.samples)}function ge(ee){const Y=r.get(ee);return a&&ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function qe(ee){const Y=o.render.frame;u.get(ee)!==Y&&(u.set(ee,Y),ee.update())}function Ae(ee,Y){const oe=ee.colorSpace,xe=ee.format,Se=ee.type;return ee.isCompressedTexture===!0||ee.isVideoTexture===!0||ee.format===DA||oe!==ed&&oe!==el&&(Er.getTransfer(oe)===Hr?a===!1?e.has("EXT_sRGB")===!0&&xe===Eo?(ee.format=DA,ee.minFilter=Mr,ee.generateMipmaps=!1):Y=v6.sRGBToLinear(Y):(xe!==Eo||Se!==Uu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",oe)),Y}this.allocateTextureUnit=$,this.resetTextureUnits=F,this.setTexture2D=z,this.setTexture2DArray=X,this.setTexture3D=D,this.setTextureCube=B,this.rebindTextures=le,this.setupRenderTarget=H,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=we,this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=se,this.useMultisampledRTT=ge}function _ue(t,e,n){const r=n.isWebGL2;function i(s,o=el){let a;const l=Er.getTransfer(o);if(s===Uu)return t.UNSIGNED_BYTE;if(s===s6)return t.UNSIGNED_SHORT_4_4_4_4;if(s===o6)return t.UNSIGNED_SHORT_5_5_5_1;if(s===Hce)return t.BYTE;if(s===jce)return t.SHORT;if(s===gR)return t.UNSIGNED_SHORT;if(s===i6)return t.INT;if(s===zd)return t.UNSIGNED_INT;if(s===Ps)return t.FLOAT;if(s===Ao)return r?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===Xce)return t.ALPHA;if(s===Eo)return t.RGBA;if(s===qce)return t.LUMINANCE;if(s===Yce)return t.LUMINANCE_ALPHA;if(s===mh)return t.DEPTH_COMPONENT;if(s===rg)return t.DEPTH_STENCIL;if(s===DA)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===a6)return t.RED;if(s===l6)return t.RED_INTEGER;if(s===Kce)return t.RG;if(s===c6)return t.RG_INTEGER;if(s===u6)return t.RGBA_INTEGER;if(s===aM||s===lM||s===cM||s===uM)if(l===Hr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===aM)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===lM)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===cM)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===uM)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===aM)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===lM)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===cM)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===uM)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===k4||s===I4||s===R4||s===P4)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===k4)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===I4)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===R4)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===P4)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===d6)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===N4||s===$4)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===N4)return l===Hr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===$4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===D4||s===L4||s===O4||s===F4||s===B4||s===U4||s===z4||s===V4||s===W4||s===G4||s===H4||s===j4||s===X4||s===q4)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===D4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===L4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===O4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===F4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===B4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===U4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===z4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===V4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===W4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===G4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===H4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===j4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===X4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===q4)return l===Hr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===dM||s===Y4||s===K4)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===dM)return l===Hr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===Y4)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===K4)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===Zce||s===Z4||s===J4||s===Q4)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===dM)return a.COMPRESSED_RED_RGTC1_EXT;if(s===Z4)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===J4)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Q4)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===ph?r?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class Cue extends Ai{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class mv extends xr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const fit={type:"move"};class cD{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new mv,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new mv,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new me,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new me),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new mv,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new me,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new me),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const g=n.getJointPose(v,r),m=this._getHandJoint(c,v);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=g!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),h=.02,p=.005;c.inputState.pinching&&f>h+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=h-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(fit)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new mv;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class hit extends ld{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,h=null,p=null;const v=n.getContextAttributes();let g=null,m=null;const y=[],x=[],S=new lt;let _=null;const C=new Ai;C.layers.enable(1),C.viewport=new rr;const T=new Ai;T.layers.enable(2),T.viewport=new rr;const A=[C,T],M=new Cue;M.layers.enable(1),M.layers.enable(2);let E=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let Q=y[J];return Q===void 0&&(Q=new cD,y[J]=Q),Q.getTargetRaySpace()},this.getControllerGrip=function(J){let Q=y[J];return Q===void 0&&(Q=new cD,y[J]=Q),Q.getGripSpace()},this.getHand=function(J){let Q=y[J];return Q===void 0&&(Q=new cD,y[J]=Q),Q.getHandSpace()};function N(J){const Q=x.indexOf(J.inputSource);if(Q===-1)return;const te=y[Q];te!==void 0&&(te.update(J.inputSource,J.frame,c||o),te.dispatchEvent({type:J.type,data:J.inputSource}))}function F(){i.removeEventListener("select",N),i.removeEventListener("selectstart",N),i.removeEventListener("selectend",N),i.removeEventListener("squeeze",N),i.removeEventListener("squeezestart",N),i.removeEventListener("squeezeend",N),i.removeEventListener("end",F),i.removeEventListener("inputsourceschange",$);for(let J=0;J<y.length;J++){const Q=x[J];Q!==null&&(x[J]=null,y[J].disconnect(Q))}E=null,P=null,e.setRenderTarget(g),h=null,f=null,d=null,i=null,m=null,j.stop(),r.isPresenting=!1,e.setPixelRatio(_),e.setSize(S.width,S.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(J){s=J,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){a=J,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(J){c=J},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(J){if(i=J,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",N),i.addEventListener("selectstart",N),i.addEventListener("selectend",N),i.addEventListener("squeeze",N),i.addEventListener("squeezestart",N),i.addEventListener("squeezeend",N),i.addEventListener("end",F),i.addEventListener("inputsourceschange",$),v.xrCompatible!==!0&&await n.makeXRCompatible(),_=e.getPixelRatio(),e.getSize(S),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Q={antialias:i.renderState.layers===void 0?v.antialias:!0,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(i,n,Q),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),m=new ic(h.framebufferWidth,h.framebufferHeight,{format:Eo,type:Uu,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let Q=null,te=null,re=null;v.depth&&(re=v.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Q=v.stencil?rg:mh,te=v.stencil?ph:zd);const se={colorFormat:n.RGBA8,depthFormat:re,scaleFactor:s};d=new XRWebGLBinding(i,n),f=d.createProjectionLayer(se),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),m=new ic(f.textureWidth,f.textureHeight,{format:Eo,type:Uu,depthTexture:new bR(f.textureWidth,f.textureHeight,te,void 0,void 0,void 0,void 0,void 0,void 0,Q),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0});const fe=e.properties.get(m);fe.__ignoreDepthValues=f.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),j.setContext(i),j.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function $(J){for(let Q=0;Q<J.removed.length;Q++){const te=J.removed[Q],re=x.indexOf(te);re>=0&&(x[re]=null,y[re].disconnect(te))}for(let Q=0;Q<J.added.length;Q++){const te=J.added[Q];let re=x.indexOf(te);if(re===-1){for(let fe=0;fe<y.length;fe++)if(fe>=x.length){x.push(te),re=fe;break}else if(x[fe]===null){x[fe]=te,re=fe;break}if(re===-1)break}const se=y[re];se&&se.connect(te)}}const O=new me,z=new me;function X(J,Q,te){O.setFromMatrixPosition(Q.matrixWorld),z.setFromMatrixPosition(te.matrixWorld);const re=O.distanceTo(z),se=Q.projectionMatrix.elements,fe=te.projectionMatrix.elements,ae=se[14]/(se[10]-1),ye=se[14]/(se[10]+1),le=(se[9]+1)/se[5],H=(se[9]-1)/se[5],Me=(se[8]-1)/se[0],we=(fe[8]+1)/fe[0],Ee=ae*Me,ge=ae*we,qe=re/(-Me+we),Ae=qe*-Me;Q.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(Ae),J.translateZ(qe),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert();const ee=ae+qe,Y=ye+qe,oe=Ee-Ae,xe=ge+(re-Ae),Se=le*ye/Y*ee,be=H*ye/Y*ee;J.projectionMatrix.makePerspective(oe,xe,Se,be,ee,Y),J.projectionMatrixInverse.copy(J.projectionMatrix).invert()}function D(J,Q){Q===null?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(Q.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(i===null)return;M.near=T.near=C.near=J.near,M.far=T.far=C.far=J.far,(E!==M.near||P!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),E=M.near,P=M.far);const Q=J.parent,te=M.cameras;D(M,Q);for(let re=0;re<te.length;re++)D(te[re],Q);te.length===2?X(M,C,T):M.projectionMatrix.copy(C.projectionMatrix),B(J,M,Q)};function B(J,Q,te){te===null?J.matrix.copy(Q.matrixWorld):(J.matrix.copy(te.matrixWorld),J.matrix.invert(),J.matrix.multiply(Q.matrixWorld)),J.matrix.decompose(J.position,J.quaternion,J.scale),J.updateMatrixWorld(!0),J.projectionMatrix.copy(Q.projectionMatrix),J.projectionMatrixInverse.copy(Q.projectionMatrixInverse),J.isPerspectiveCamera&&(J.fov=vy*2*Math.atan(1/J.projectionMatrix.elements[5]),J.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(f===null&&h===null))return l},this.setFoveation=function(J){l=J,f!==null&&(f.fixedFoveation=J),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=J)};let V=null;function W(J,Q){if(u=Q.getViewerPose(c||o),p=Q,u!==null){const te=u.views;h!==null&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let re=!1;te.length!==M.cameras.length&&(M.cameras.length=0,re=!0);for(let se=0;se<te.length;se++){const fe=te[se];let ae=null;if(h!==null)ae=h.getViewport(fe);else{const le=d.getViewSubImage(f,fe);ae=le.viewport,se===0&&(e.setRenderTargetTextures(m,le.colorTexture,f.ignoreDepthValues?void 0:le.depthStencilTexture),e.setRenderTarget(m))}let ye=A[se];ye===void 0&&(ye=new Ai,ye.layers.enable(se),ye.viewport=new rr,A[se]=ye),ye.matrix.fromArray(fe.transform.matrix),ye.matrix.decompose(ye.position,ye.quaternion,ye.scale),ye.projectionMatrix.fromArray(fe.projectionMatrix),ye.projectionMatrixInverse.copy(ye.projectionMatrix).invert(),ye.viewport.set(ae.x,ae.y,ae.width,ae.height),se===0&&(M.matrix.copy(ye.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),re===!0&&M.cameras.push(ye)}}for(let te=0;te<y.length;te++){const re=x[te],se=y[te];re!==null&&se!==void 0&&se.update(re,Q,c||o)}V&&V(J,Q),Q.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Q}),p=null}const j=new vue;j.setAnimationLoop(W),this.setAnimationLoop=function(J){V=J},this.dispose=function(){}}}function pit(t,e){function n(g,m){g.matrixAutoUpdate===!0&&g.updateMatrix(),m.value.copy(g.matrix)}function r(g,m){m.color.getRGB(g.fogColor.value,mue(t)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function i(g,m,y,x,S){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(g,m):m.isMeshToonMaterial?(s(g,m),d(g,m)):m.isMeshPhongMaterial?(s(g,m),u(g,m)):m.isMeshStandardMaterial?(s(g,m),f(g,m),m.isMeshPhysicalMaterial&&h(g,m,S)):m.isMeshMatcapMaterial?(s(g,m),p(g,m)):m.isMeshDepthMaterial?s(g,m):m.isMeshDistanceMaterial?(s(g,m),v(g,m)):m.isMeshNormalMaterial?s(g,m):m.isLineBasicMaterial?(o(g,m),m.isLineDashedMaterial&&a(g,m)):m.isPointsMaterial?l(g,m,y,x):m.isSpriteMaterial?c(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,n(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,n(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,n(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===rs&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,n(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===rs&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,n(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,n(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,n(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const y=e.get(m).envMap;if(y&&(g.envMap.value=y,g.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap){g.lightMap.value=m.lightMap;const x=t._useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=m.lightMapIntensity*x,n(m.lightMap,g.lightMapTransform)}m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,n(m.aoMap,g.aoMapTransform))}function o(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,n(m.map,g.mapTransform))}function a(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function l(g,m,y,x){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*y,g.scale.value=x*.5,m.map&&(g.map.value=m.map,n(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,n(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function c(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,n(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,n(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function u(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}function d(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}function f(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,n(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,n(m.roughnessMap,g.roughnessMapTransform)),e.get(m).envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function h(g,m,y){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,n(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,n(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,n(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,n(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,n(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===rs&&g.clearcoatNormalScale.value.negate())),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,n(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,n(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=y.texture,g.transmissionSamplerSize.value.set(y.width,y.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,n(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,n(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(g.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(g.anisotropyMap.value=m.anisotropyMap,n(m.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,n(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,n(m.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,m){m.matcap&&(g.matcap.value=m.matcap)}function v(g,m){const y=e.get(m).light;g.referencePosition.value.setFromMatrixPosition(y.matrixWorld),g.nearDistance.value=y.shadow.camera.near,g.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function mit(t,e,n,r){let i={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(y,x){const S=x.program;r.uniformBlockBinding(y,S)}function c(y,x){let S=i[y.id];S===void 0&&(p(y),S=u(y),i[y.id]=S,y.addEventListener("dispose",g));const _=x.program;r.updateUBOMapping(y,_);const C=e.render.frame;s[y.id]!==C&&(f(y),s[y.id]=C)}function u(y){const x=d();y.__bindingPointIndex=x;const S=t.createBuffer(),_=y.__size,C=y.usage;return t.bindBuffer(t.UNIFORM_BUFFER,S),t.bufferData(t.UNIFORM_BUFFER,_,C),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,x,S),S}function d(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const x=i[y.id],S=y.uniforms,_=y.__cache;t.bindBuffer(t.UNIFORM_BUFFER,x);for(let C=0,T=S.length;C<T;C++){const A=Array.isArray(S[C])?S[C]:[S[C]];for(let M=0,E=A.length;M<E;M++){const P=A[M];if(h(P,C,M,_)===!0){const N=P.__offset,F=Array.isArray(P.value)?P.value:[P.value];let $=0;for(let O=0;O<F.length;O++){const z=F[O],X=v(z);typeof z=="number"||typeof z=="boolean"?(P.__data[0]=z,t.bufferSubData(t.UNIFORM_BUFFER,N+$,P.__data)):z.isMatrix3?(P.__data[0]=z.elements[0],P.__data[1]=z.elements[1],P.__data[2]=z.elements[2],P.__data[3]=0,P.__data[4]=z.elements[3],P.__data[5]=z.elements[4],P.__data[6]=z.elements[5],P.__data[7]=0,P.__data[8]=z.elements[6],P.__data[9]=z.elements[7],P.__data[10]=z.elements[8],P.__data[11]=0):(z.toArray(P.__data,$),$+=X.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,N,P.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function h(y,x,S,_){const C=y.value,T=x+"_"+S;if(_[T]===void 0)return typeof C=="number"||typeof C=="boolean"?_[T]=C:_[T]=C.clone(),!0;{const A=_[T];if(typeof C=="number"||typeof C=="boolean"){if(A!==C)return _[T]=C,!0}else if(A.equals(C)===!1)return A.copy(C),!0}return!1}function p(y){const x=y.uniforms;let S=0;const _=16;for(let T=0,A=x.length;T<A;T++){const M=Array.isArray(x[T])?x[T]:[x[T]];for(let E=0,P=M.length;E<P;E++){const N=M[E],F=Array.isArray(N.value)?N.value:[N.value];for(let $=0,O=F.length;$<O;$++){const z=F[$],X=v(z),D=S%_;D!==0&&_-D<X.boundary&&(S+=_-D),N.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),N.__offset=S,S+=X.storage}}}const C=S%_;return C>0&&(S+=_-C),y.__size=S,y.__cache={},this}function v(y){const x={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function g(y){const x=y.target;x.removeEventListener("dispose",g);const S=o.indexOf(x.__bindingPointIndex);o.splice(S,1),t.deleteBuffer(i[x.id]),delete i[x.id],delete s[x.id]}function m(){for(const y in i)t.deleteBuffer(i[y]);o=[],i={},s={}}return{bind:l,update:c,dispose:m}}class _6{constructor(e={}){const{canvas:n=fue(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let f;r!==null?f=r.getContextAttributes().alpha:f=o;const h=new Uint32Array(4),p=new Int32Array(4);let v=null,g=null;const m=[],y=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ps,this._useLegacyLights=!1,this.toneMapping=Bu,this.toneMappingExposure=1;const x=this;let S=!1,_=0,C=0,T=null,A=-1,M=null;const E=new rr,P=new rr;let N=null;const F=new zt(0);let $=0,O=n.width,z=n.height,X=1,D=null,B=null;const V=new rr(0,0,O,z),W=new rr(0,0,O,z);let j=!1;const J=new p2;let Q=!1,te=!1,re=null;const se=new _n,fe=new lt,ae=new me,ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function le(){return T===null?X:1}let H=r;function Me(G,ie){for(let ce=0;ce<G.length;ce++){const Te=G[ce],de=n.getContext(Te,ie);if(de!==null)return de}return null}try{const G={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${sx}`),n.addEventListener("webglcontextlost",Ie,!1),n.addEventListener("webglcontextrestored",Ce,!1),n.addEventListener("webglcontextcreationerror",ut,!1),H===null){const ie=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&ie.shift(),H=Me(ie,G),H===null)throw Me(ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&H instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),H.getShaderPrecisionFormat===void 0&&(H.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let we,Ee,ge,qe,Ae,ee,Y,oe,xe,Se,be,Re,Ke,ze,Ne,De,Ve,gt,ct,Ye,Xe,Le,pe,He;function ot(){we=new knt(H),Ee=new _nt(H,we,e),we.init(Ee),Le=new _ue(H,we,Ee),ge=new uit(H,we,Ee),qe=new Pnt(H),Ae=new Jrt,ee=new dit(H,we,ge,Ae,Ee,Le,qe),Y=new Tnt(x),oe=new Ant(x),xe=new FQe(H,Ee),pe=new wnt(H,we,xe,Ee),Se=new Int(H,xe,qe,pe),be=new Lnt(H,Se,xe,qe),ct=new Dnt(H,Ee,ee),De=new Cnt(Ae),Re=new Zrt(x,Y,oe,we,Ee,pe,De),Ke=new pit(x,Ae),ze=new eit,Ne=new oit(we,Ee),gt=new bnt(x,Y,oe,ge,be,f,l),Ve=new cit(x,be,Ee),He=new mit(H,qe,Ee,ge),Ye=new Snt(H,we,qe,Ee),Xe=new Rnt(H,we,qe,Ee),qe.programs=Re.programs,x.capabilities=Ee,x.extensions=we,x.properties=Ae,x.renderLists=ze,x.shadowMap=Ve,x.state=ge,x.info=qe}ot();const et=new hit(x,H);this.xr=et,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){const G=we.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=we.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(G){G!==void 0&&(X=G,this.setSize(O,z,!1))},this.getSize=function(G){return G.set(O,z)},this.setSize=function(G,ie,ce=!0){if(et.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}O=G,z=ie,n.width=Math.floor(G*X),n.height=Math.floor(ie*X),ce===!0&&(n.style.width=G+"px",n.style.height=ie+"px"),this.setViewport(0,0,G,ie)},this.getDrawingBufferSize=function(G){return G.set(O*X,z*X).floor()},this.setDrawingBufferSize=function(G,ie,ce){O=G,z=ie,X=ce,n.width=Math.floor(G*ce),n.height=Math.floor(ie*ce),this.setViewport(0,0,G,ie)},this.getCurrentViewport=function(G){return G.copy(E)},this.getViewport=function(G){return G.copy(V)},this.setViewport=function(G,ie,ce,Te){G.isVector4?V.set(G.x,G.y,G.z,G.w):V.set(G,ie,ce,Te),ge.viewport(E.copy(V).multiplyScalar(X).floor())},this.getScissor=function(G){return G.copy(W)},this.setScissor=function(G,ie,ce,Te){G.isVector4?W.set(G.x,G.y,G.z,G.w):W.set(G,ie,ce,Te),ge.scissor(P.copy(W).multiplyScalar(X).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(G){ge.setScissorTest(j=G)},this.setOpaqueSort=function(G){D=G},this.setTransparentSort=function(G){B=G},this.getClearColor=function(G){return G.copy(gt.getClearColor())},this.setClearColor=function(){gt.setClearColor.apply(gt,arguments)},this.getClearAlpha=function(){return gt.getClearAlpha()},this.setClearAlpha=function(){gt.setClearAlpha.apply(gt,arguments)},this.clear=function(G=!0,ie=!0,ce=!0){let Te=0;if(G){let de=!1;if(T!==null){const Be=T.texture.format;de=Be===u6||Be===c6||Be===l6}if(de){const Be=T.texture.type,Je=Be===Uu||Be===zd||Be===gR||Be===ph||Be===s6||Be===o6,nt=gt.getClearColor(),$e=gt.getClearAlpha(),Ct=nt.r,ht=nt.g,ft=nt.b;Je?(h[0]=Ct,h[1]=ht,h[2]=ft,h[3]=$e,H.clearBufferuiv(H.COLOR,0,h)):(p[0]=Ct,p[1]=ht,p[2]=ft,p[3]=$e,H.clearBufferiv(H.COLOR,0,p))}else Te|=H.COLOR_BUFFER_BIT}ie&&(Te|=H.DEPTH_BUFFER_BIT),ce&&(Te|=H.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),H.clear(Te)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ie,!1),n.removeEventListener("webglcontextrestored",Ce,!1),n.removeEventListener("webglcontextcreationerror",ut,!1),ze.dispose(),Ne.dispose(),Ae.dispose(),Y.dispose(),oe.dispose(),be.dispose(),pe.dispose(),He.dispose(),Re.dispose(),et.dispose(),et.removeEventListener("sessionstart",Dt),et.removeEventListener("sessionend",mt),re&&(re.dispose(),re=null),jt.stop()};function Ie(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Ce(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const G=qe.autoReset,ie=Ve.enabled,ce=Ve.autoUpdate,Te=Ve.needsUpdate,de=Ve.type;ot(),qe.autoReset=G,Ve.enabled=ie,Ve.autoUpdate=ce,Ve.needsUpdate=Te,Ve.type=de}function ut(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function dt(G){const ie=G.target;ie.removeEventListener("dispose",dt),yt(ie)}function yt(G){vt(G),Ae.remove(G)}function vt(G){const ie=Ae.get(G).programs;ie!==void 0&&(ie.forEach(function(ce){Re.releaseProgram(ce)}),G.isShaderMaterial&&Re.releaseShaderCache(G))}this.renderBufferDirect=function(G,ie,ce,Te,de,Be){ie===null&&(ie=ye);const Je=de.isMesh&&de.matrixWorld.determinant()<0,nt=Z(G,ie,ce,Te,de);ge.setMaterial(Te,Je);let $e=ce.index,Ct=1;if(Te.wireframe===!0){if($e=Se.getWireframeAttribute(ce),$e===void 0)return;Ct=2}const ht=ce.drawRange,ft=ce.attributes.position;let Ot=ht.start*Ct,Qt=(ht.start+ht.count)*Ct;Be!==null&&(Ot=Math.max(Ot,Be.start*Ct),Qt=Math.min(Qt,(Be.start+Be.count)*Ct)),$e!==null?(Ot=Math.max(Ot,0),Qt=Math.min(Qt,$e.count)):ft!=null&&(Ot=Math.max(Ot,0),Qt=Math.min(Qt,ft.count));const nn=Qt-Ot;if(nn<0||nn===1/0)return;pe.setup(de,Te,nt,ce,$e);let vn,Nt=Ye;if($e!==null&&(vn=xe.get($e),Nt=Xe,Nt.setIndex(vn)),de.isMesh)Te.wireframe===!0?(ge.setLineWidth(Te.wireframeLinewidth*le()),Nt.setMode(H.LINES)):Nt.setMode(H.TRIANGLES);else if(de.isLine){let Mt=Te.linewidth;Mt===void 0&&(Mt=1),ge.setLineWidth(Mt*le()),de.isLineSegments?Nt.setMode(H.LINES):de.isLineLoop?Nt.setMode(H.LINE_LOOP):Nt.setMode(H.LINE_STRIP)}else de.isPoints?Nt.setMode(H.POINTS):de.isSprite&&Nt.setMode(H.TRIANGLES);if(de.isBatchedMesh)Nt.renderMultiDraw(de._multiDrawStarts,de._multiDrawCounts,de._multiDrawCount);else if(de.isInstancedMesh)Nt.renderInstances(Ot,nn,de.count);else if(ce.isInstancedBufferGeometry){const Mt=ce._maxInstanceCount!==void 0?ce._maxInstanceCount:1/0,En=Math.min(ce.instanceCount,Mt);Nt.renderInstances(Ot,nn,En)}else Nt.render(Ot,nn)};function Vt(G,ie,ce){G.transparent===!0&&G.side===Qa&&G.forceSinglePass===!1?(G.side=rs,G.needsUpdate=!0,bt(G,ie,ce),G.side=Ju,G.needsUpdate=!0,bt(G,ie,ce),G.side=Qa):bt(G,ie,ce)}this.compile=function(G,ie,ce=null){ce===null&&(ce=G),g=Ne.get(ce),g.init(),y.push(g),ce.traverseVisible(function(de){de.isLight&&de.layers.test(ie.layers)&&(g.pushLight(de),de.castShadow&&g.pushShadow(de))}),G!==ce&&G.traverseVisible(function(de){de.isLight&&de.layers.test(ie.layers)&&(g.pushLight(de),de.castShadow&&g.pushShadow(de))}),g.setupLights(x._useLegacyLights);const Te=new Set;return G.traverse(function(de){const Be=de.material;if(Be)if(Array.isArray(Be))for(let Je=0;Je<Be.length;Je++){const nt=Be[Je];Vt(nt,ce,de),Te.add(nt)}else Vt(Be,ce,de),Te.add(Be)}),y.pop(),g=null,Te},this.compileAsync=function(G,ie,ce=null){const Te=this.compile(G,ie,ce);return new Promise(de=>{function Be(){if(Te.forEach(function(Je){Ae.get(Je).currentProgram.isReady()&&Te.delete(Je)}),Te.size===0){de(G);return}setTimeout(Be,10)}we.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let It=null;function en(G){It&&It(G)}function Dt(){jt.stop()}function mt(){jt.start()}const jt=new vue;jt.setAnimationLoop(en),typeof self<"u"&&jt.setContext(self),this.setAnimationLoop=function(G){It=G,et.setAnimationLoop(G),G===null?jt.stop():jt.start()},et.addEventListener("sessionstart",Dt),et.addEventListener("sessionend",mt),this.render=function(G,ie){if(ie!==void 0&&ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),ie.parent===null&&ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),et.enabled===!0&&et.isPresenting===!0&&(et.cameraAutoUpdate===!0&&et.updateCamera(ie),ie=et.getCamera()),G.isScene===!0&&G.onBeforeRender(x,G,ie,T),g=Ne.get(G,y.length),g.init(),y.push(g),se.multiplyMatrices(ie.projectionMatrix,ie.matrixWorldInverse),J.setFromProjectionMatrix(se),te=this.localClippingEnabled,Q=De.init(this.clippingPlanes,te),v=ze.get(G,m.length),v.init(),m.push(v),mn(G,ie,0,x.sortObjects),v.finish(),x.sortObjects===!0&&v.sort(D,B),this.info.render.frame++,Q===!0&&De.beginShadows();const ce=g.state.shadowsArray;if(Ve.render(ce,G,ie),Q===!0&&De.endShadows(),this.info.autoReset===!0&&this.info.reset(),gt.render(v,G),g.setupLights(x._useLegacyLights),ie.isArrayCamera){const Te=ie.cameras;for(let de=0,Be=Te.length;de<Be;de++){const Je=Te[de];fn(v,G,Je,Je.viewport)}}else fn(v,G,ie);T!==null&&(ee.updateMultisampleRenderTarget(T),ee.updateRenderTargetMipmap(T)),G.isScene===!0&&G.onAfterRender(x,G,ie),pe.resetDefaultState(),A=-1,M=null,y.pop(),y.length>0?g=y[y.length-1]:g=null,m.pop(),m.length>0?v=m[m.length-1]:v=null};function mn(G,ie,ce,Te){if(G.visible===!1)return;if(G.layers.test(ie.layers)){if(G.isGroup)ce=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(ie);else if(G.isLight)g.pushLight(G),G.castShadow&&g.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||J.intersectsSprite(G)){Te&&ae.setFromMatrixPosition(G.matrixWorld).applyMatrix4(se);const Je=be.update(G),nt=G.material;nt.visible&&v.push(G,Je,nt,ce,ae.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||J.intersectsObject(G))){const Je=be.update(G),nt=G.material;if(Te&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),ae.copy(G.boundingSphere.center)):(Je.boundingSphere===null&&Je.computeBoundingSphere(),ae.copy(Je.boundingSphere.center)),ae.applyMatrix4(G.matrixWorld).applyMatrix4(se)),Array.isArray(nt)){const $e=Je.groups;for(let Ct=0,ht=$e.length;Ct<ht;Ct++){const ft=$e[Ct],Ot=nt[ft.materialIndex];Ot&&Ot.visible&&v.push(G,Je,Ot,ce,ae.z,ft)}}else nt.visible&&v.push(G,Je,nt,ce,ae.z,null)}}const Be=G.children;for(let Je=0,nt=Be.length;Je<nt;Je++)mn(Be[Je],ie,ce,Te)}function fn(G,ie,ce,Te){const de=G.opaque,Be=G.transmissive,Je=G.transparent;g.setupLightsView(ce),Q===!0&&De.setGlobalState(x.clippingPlanes,ce),Be.length>0&&_t(de,Be,ie,ce),Te&&ge.viewport(E.copy(Te)),de.length>0&&Lt(de,ie,ce),Be.length>0&&Lt(Be,ie,ce),Je.length>0&&Lt(Je,ie,ce),ge.buffers.depth.setTest(!0),ge.buffers.depth.setMask(!0),ge.buffers.color.setMask(!0),ge.setPolygonOffset(!1)}function _t(G,ie,ce,Te){if((ce.isScene===!0?ce.overrideMaterial:null)!==null)return;const Be=Ee.isWebGL2;re===null&&(re=new ic(1,1,{generateMipmaps:!0,type:we.has("EXT_color_buffer_half_float")?Ao:Uu,minFilter:Ih,samples:Be?4:0})),x.getDrawingBufferSize(fe),Be?re.setSize(fe.x,fe.y):re.setSize(LA(fe.x),LA(fe.y));const Je=x.getRenderTarget();x.setRenderTarget(re),x.getClearColor(F),$=x.getClearAlpha(),$<1&&x.setClearColor(16777215,.5),x.clear();const nt=x.toneMapping;x.toneMapping=Bu,Lt(G,ce,Te),ee.updateMultisampleRenderTarget(re),ee.updateRenderTargetMipmap(re);let $e=!1;for(let Ct=0,ht=ie.length;Ct<ht;Ct++){const ft=ie[Ct],Ot=ft.object,Qt=ft.geometry,nn=ft.material,vn=ft.group;if(nn.side===Qa&&Ot.layers.test(Te.layers)){const Nt=nn.side;nn.side=rs,nn.needsUpdate=!0,Pt(Ot,ce,Te,Qt,nn,vn),nn.side=Nt,nn.needsUpdate=!0,$e=!0}}$e===!0&&(ee.updateMultisampleRenderTarget(re),ee.updateRenderTargetMipmap(re)),x.setRenderTarget(Je),x.setClearColor(F,$),x.toneMapping=nt}function Lt(G,ie,ce){const Te=ie.isScene===!0?ie.overrideMaterial:null;for(let de=0,Be=G.length;de<Be;de++){const Je=G[de],nt=Je.object,$e=Je.geometry,Ct=Te===null?Je.material:Te,ht=Je.group;nt.layers.test(ce.layers)&&Pt(nt,ie,ce,$e,Ct,ht)}}function Pt(G,ie,ce,Te,de,Be){G.onBeforeRender(x,ie,ce,Te,de,Be),G.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),de.onBeforeRender(x,ie,ce,Te,G,Be),de.transparent===!0&&de.side===Qa&&de.forceSinglePass===!1?(de.side=rs,de.needsUpdate=!0,x.renderBufferDirect(ce,ie,Te,de,G,Be),de.side=Ju,de.needsUpdate=!0,x.renderBufferDirect(ce,ie,Te,de,G,Be),de.side=Qa):x.renderBufferDirect(ce,ie,Te,de,G,Be),G.onAfterRender(x,ie,ce,Te,de,Be)}function bt(G,ie,ce){ie.isScene!==!0&&(ie=ye);const Te=Ae.get(G),de=g.state.lights,Be=g.state.shadowsArray,Je=de.state.version,nt=Re.getParameters(G,de.state,Be,ie,ce),$e=Re.getProgramCacheKey(nt);let Ct=Te.programs;Te.environment=G.isMeshStandardMaterial?ie.environment:null,Te.fog=ie.fog,Te.envMap=(G.isMeshStandardMaterial?oe:Y).get(G.envMap||Te.environment),Ct===void 0&&(G.addEventListener("dispose",dt),Ct=new Map,Te.programs=Ct);let ht=Ct.get($e);if(ht!==void 0){if(Te.currentProgram===ht&&Te.lightsStateVersion===Je)return Cn(G,nt),ht}else nt.uniforms=Re.getUniforms(G),G.onBuild(ce,nt,x),G.onBeforeCompile(nt,x),ht=Re.acquireProgram(nt,$e),Ct.set($e,ht),Te.uniforms=nt.uniforms;const ft=Te.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(ft.clippingPlanes=De.uniform),Cn(G,nt),Te.needsLights=ne(G),Te.lightsStateVersion=Je,Te.needsLights&&(ft.ambientLightColor.value=de.state.ambient,ft.lightProbe.value=de.state.probe,ft.directionalLights.value=de.state.directional,ft.directionalLightShadows.value=de.state.directionalShadow,ft.spotLights.value=de.state.spot,ft.spotLightShadows.value=de.state.spotShadow,ft.rectAreaLights.value=de.state.rectArea,ft.ltc_1.value=de.state.rectAreaLTC1,ft.ltc_2.value=de.state.rectAreaLTC2,ft.pointLights.value=de.state.point,ft.pointLightShadows.value=de.state.pointShadow,ft.hemisphereLights.value=de.state.hemi,ft.directionalShadowMap.value=de.state.directionalShadowMap,ft.directionalShadowMatrix.value=de.state.directionalShadowMatrix,ft.spotShadowMap.value=de.state.spotShadowMap,ft.spotLightMatrix.value=de.state.spotLightMatrix,ft.spotLightMap.value=de.state.spotLightMap,ft.pointShadowMap.value=de.state.pointShadowMap,ft.pointShadowMatrix.value=de.state.pointShadowMatrix),Te.currentProgram=ht,Te.uniformsList=null,ht}function Wt(G){if(G.uniformsList===null){const ie=G.currentProgram.getUniforms();G.uniformsList=hM.seqWithValue(ie.seq,G.uniforms)}return G.uniformsList}function Cn(G,ie){const ce=Ae.get(G);ce.outputColorSpace=ie.outputColorSpace,ce.batching=ie.batching,ce.instancing=ie.instancing,ce.instancingColor=ie.instancingColor,ce.skinning=ie.skinning,ce.morphTargets=ie.morphTargets,ce.morphNormals=ie.morphNormals,ce.morphColors=ie.morphColors,ce.morphTargetsCount=ie.morphTargetsCount,ce.numClippingPlanes=ie.numClippingPlanes,ce.numIntersection=ie.numClipIntersection,ce.vertexAlphas=ie.vertexAlphas,ce.vertexTangents=ie.vertexTangents,ce.toneMapping=ie.toneMapping}function Z(G,ie,ce,Te,de){ie.isScene!==!0&&(ie=ye),ee.resetTextureUnits();const Be=ie.fog,Je=Te.isMeshStandardMaterial?ie.environment:null,nt=T===null?x.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:ed,$e=(Te.isMeshStandardMaterial?oe:Y).get(Te.envMap||Je),Ct=Te.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,ht=!!ce.attributes.tangent&&(!!Te.normalMap||Te.anisotropy>0),ft=!!ce.morphAttributes.position,Ot=!!ce.morphAttributes.normal,Qt=!!ce.morphAttributes.color;let nn=Bu;Te.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(nn=x.toneMapping);const vn=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,Nt=vn!==void 0?vn.length:0,Mt=Ae.get(Te),En=g.state.lights;if(Q===!0&&(te===!0||G!==M)){const rn=G===M&&Te.id===A;De.setState(Te,G,rn)}let tn=!1;Te.version===Mt.__version?(Mt.needsLights&&Mt.lightsStateVersion!==En.state.version||Mt.outputColorSpace!==nt||de.isBatchedMesh&&Mt.batching===!1||!de.isBatchedMesh&&Mt.batching===!0||de.isInstancedMesh&&Mt.instancing===!1||!de.isInstancedMesh&&Mt.instancing===!0||de.isSkinnedMesh&&Mt.skinning===!1||!de.isSkinnedMesh&&Mt.skinning===!0||de.isInstancedMesh&&Mt.instancingColor===!0&&de.instanceColor===null||de.isInstancedMesh&&Mt.instancingColor===!1&&de.instanceColor!==null||Mt.envMap!==$e||Te.fog===!0&&Mt.fog!==Be||Mt.numClippingPlanes!==void 0&&(Mt.numClippingPlanes!==De.numPlanes||Mt.numIntersection!==De.numIntersection)||Mt.vertexAlphas!==Ct||Mt.vertexTangents!==ht||Mt.morphTargets!==ft||Mt.morphNormals!==Ot||Mt.morphColors!==Qt||Mt.toneMapping!==nn||Ee.isWebGL2===!0&&Mt.morphTargetsCount!==Nt)&&(tn=!0):(tn=!0,Mt.__version=Te.version);let cn=Mt.currentProgram;tn===!0&&(cn=bt(Te,ie,de));let lr=!1,Vn=!1,Zn=!1;const Tn=cn.getUniforms(),hn=Mt.uniforms;if(ge.useProgram(cn.program)&&(lr=!0,Vn=!0,Zn=!0),Te.id!==A&&(A=Te.id,Vn=!0),lr||M!==G){Tn.setValue(H,"projectionMatrix",G.projectionMatrix),Tn.setValue(H,"viewMatrix",G.matrixWorldInverse);const rn=Tn.map.cameraPosition;rn!==void 0&&rn.setValue(H,ae.setFromMatrixPosition(G.matrixWorld)),Ee.logarithmicDepthBuffer&&Tn.setValue(H,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(Te.isMeshPhongMaterial||Te.isMeshToonMaterial||Te.isMeshLambertMaterial||Te.isMeshBasicMaterial||Te.isMeshStandardMaterial||Te.isShaderMaterial)&&Tn.setValue(H,"isOrthographic",G.isOrthographicCamera===!0),M!==G&&(M=G,Vn=!0,Zn=!0)}if(de.isSkinnedMesh){Tn.setOptional(H,de,"bindMatrix"),Tn.setOptional(H,de,"bindMatrixInverse");const rn=de.skeleton;rn&&(Ee.floatVertexTextures?(rn.boneTexture===null&&rn.computeBoneTexture(),Tn.setValue(H,"boneTexture",rn.boneTexture,ee)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}de.isBatchedMesh&&(Tn.setOptional(H,de,"batchingTexture"),Tn.setValue(H,"batchingTexture",de._matricesTexture,ee));const er=ce.morphAttributes;if((er.position!==void 0||er.normal!==void 0||er.color!==void 0&&Ee.isWebGL2===!0)&&ct.update(de,ce,cn),(Vn||Mt.receiveShadow!==de.receiveShadow)&&(Mt.receiveShadow=de.receiveShadow,Tn.setValue(H,"receiveShadow",de.receiveShadow)),Te.isMeshGouraudMaterial&&Te.envMap!==null&&(hn.envMap.value=$e,hn.flipEnvMap.value=$e.isCubeTexture&&$e.isRenderTargetTexture===!1?-1:1),Vn&&(Tn.setValue(H,"toneMappingExposure",x.toneMappingExposure),Mt.needsLights&&K(hn,Zn),Be&&Te.fog===!0&&Ke.refreshFogUniforms(hn,Be),Ke.refreshMaterialUniforms(hn,Te,X,z,re),hM.upload(H,Wt(Mt),hn,ee)),Te.isShaderMaterial&&Te.uniformsNeedUpdate===!0&&(hM.upload(H,Wt(Mt),hn,ee),Te.uniformsNeedUpdate=!1),Te.isSpriteMaterial&&Tn.setValue(H,"center",de.center),Tn.setValue(H,"modelViewMatrix",de.modelViewMatrix),Tn.setValue(H,"normalMatrix",de.normalMatrix),Tn.setValue(H,"modelMatrix",de.matrixWorld),Te.isShaderMaterial||Te.isRawShaderMaterial){const rn=Te.uniformsGroups;for(let an=0,Nr=rn.length;an<Nr;an++)if(Ee.isWebGL2){const Vs=rn[an];He.update(Vs,cn),He.bind(Vs,cn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return cn}function K(G,ie){G.ambientLightColor.needsUpdate=ie,G.lightProbe.needsUpdate=ie,G.directionalLights.needsUpdate=ie,G.directionalLightShadows.needsUpdate=ie,G.pointLights.needsUpdate=ie,G.pointLightShadows.needsUpdate=ie,G.spotLights.needsUpdate=ie,G.spotLightShadows.needsUpdate=ie,G.rectAreaLights.needsUpdate=ie,G.hemisphereLights.needsUpdate=ie}function ne(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(G,ie,ce){Ae.get(G.texture).__webglTexture=ie,Ae.get(G.depthTexture).__webglTexture=ce;const Te=Ae.get(G);Te.__hasExternalTextures=!0,Te.__hasExternalTextures&&(Te.__autoAllocateDepthBuffer=ce===void 0,Te.__autoAllocateDepthBuffer||we.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Te.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(G,ie){const ce=Ae.get(G);ce.__webglFramebuffer=ie,ce.__useDefaultFramebuffer=ie===void 0},this.setRenderTarget=function(G,ie=0,ce=0){T=G,_=ie,C=ce;let Te=!0,de=null,Be=!1,Je=!1;if(G){const $e=Ae.get(G);$e.__useDefaultFramebuffer!==void 0?(ge.bindFramebuffer(H.FRAMEBUFFER,null),Te=!1):$e.__webglFramebuffer===void 0?ee.setupRenderTarget(G):$e.__hasExternalTextures&&ee.rebindTextures(G,Ae.get(G.texture).__webglTexture,Ae.get(G.depthTexture).__webglTexture);const Ct=G.texture;(Ct.isData3DTexture||Ct.isDataArrayTexture||Ct.isCompressedArrayTexture)&&(Je=!0);const ht=Ae.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(ht[ie])?de=ht[ie][ce]:de=ht[ie],Be=!0):Ee.isWebGL2&&G.samples>0&&ee.useMultisampledRTT(G)===!1?de=Ae.get(G).__webglMultisampledFramebuffer:Array.isArray(ht)?de=ht[ce]:de=ht,E.copy(G.viewport),P.copy(G.scissor),N=G.scissorTest}else E.copy(V).multiplyScalar(X).floor(),P.copy(W).multiplyScalar(X).floor(),N=j;if(ge.bindFramebuffer(H.FRAMEBUFFER,de)&&Ee.drawBuffers&&Te&&ge.drawBuffers(G,de),ge.viewport(E),ge.scissor(P),ge.setScissorTest(N),Be){const $e=Ae.get(G.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_CUBE_MAP_POSITIVE_X+ie,$e.__webglTexture,ce)}else if(Je){const $e=Ae.get(G.texture),Ct=ie||0;H.framebufferTextureLayer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,$e.__webglTexture,ce||0,Ct)}A=-1},this.readRenderTargetPixels=function(G,ie,ce,Te,de,Be,Je){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let nt=Ae.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&Je!==void 0&&(nt=nt[Je]),nt){ge.bindFramebuffer(H.FRAMEBUFFER,nt);try{const $e=G.texture,Ct=$e.format,ht=$e.type;if(Ct!==Eo&&Le.convert(Ct)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ft=ht===Ao&&(we.has("EXT_color_buffer_half_float")||Ee.isWebGL2&&we.has("EXT_color_buffer_float"));if(ht!==Uu&&Le.convert(ht)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ht===Ps&&(Ee.isWebGL2||we.has("OES_texture_float")||we.has("WEBGL_color_buffer_float")))&&!ft){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ie>=0&&ie<=G.width-Te&&ce>=0&&ce<=G.height-de&&H.readPixels(ie,ce,Te,de,Le.convert(Ct),Le.convert(ht),Be)}finally{const $e=T!==null?Ae.get(T).__webglFramebuffer:null;ge.bindFramebuffer(H.FRAMEBUFFER,$e)}}},this.copyFramebufferToTexture=function(G,ie,ce=0){const Te=Math.pow(2,-ce),de=Math.floor(ie.image.width*Te),Be=Math.floor(ie.image.height*Te);ee.setTexture2D(ie,0),H.copyTexSubImage2D(H.TEXTURE_2D,ce,0,0,G.x,G.y,de,Be),ge.unbindTexture()},this.copyTextureToTexture=function(G,ie,ce,Te=0){const de=ie.image.width,Be=ie.image.height,Je=Le.convert(ce.format),nt=Le.convert(ce.type);ee.setTexture2D(ce,0),H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,ce.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,ce.unpackAlignment),ie.isDataTexture?H.texSubImage2D(H.TEXTURE_2D,Te,G.x,G.y,de,Be,Je,nt,ie.image.data):ie.isCompressedTexture?H.compressedTexSubImage2D(H.TEXTURE_2D,Te,G.x,G.y,ie.mipmaps[0].width,ie.mipmaps[0].height,Je,ie.mipmaps[0].data):H.texSubImage2D(H.TEXTURE_2D,Te,G.x,G.y,Je,nt,ie.image),Te===0&&ce.generateMipmaps&&H.generateMipmap(H.TEXTURE_2D),ge.unbindTexture()},this.copyTextureToTexture3D=function(G,ie,ce,Te,de=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Be=G.max.x-G.min.x+1,Je=G.max.y-G.min.y+1,nt=G.max.z-G.min.z+1,$e=Le.convert(Te.format),Ct=Le.convert(Te.type);let ht;if(Te.isData3DTexture)ee.setTexture3D(Te,0),ht=H.TEXTURE_3D;else if(Te.isDataArrayTexture||Te.isCompressedArrayTexture)ee.setTexture2DArray(Te,0),ht=H.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,Te.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Te.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,Te.unpackAlignment);const ft=H.getParameter(H.UNPACK_ROW_LENGTH),Ot=H.getParameter(H.UNPACK_IMAGE_HEIGHT),Qt=H.getParameter(H.UNPACK_SKIP_PIXELS),nn=H.getParameter(H.UNPACK_SKIP_ROWS),vn=H.getParameter(H.UNPACK_SKIP_IMAGES),Nt=ce.isCompressedTexture?ce.mipmaps[de]:ce.image;H.pixelStorei(H.UNPACK_ROW_LENGTH,Nt.width),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Nt.height),H.pixelStorei(H.UNPACK_SKIP_PIXELS,G.min.x),H.pixelStorei(H.UNPACK_SKIP_ROWS,G.min.y),H.pixelStorei(H.UNPACK_SKIP_IMAGES,G.min.z),ce.isDataTexture||ce.isData3DTexture?H.texSubImage3D(ht,de,ie.x,ie.y,ie.z,Be,Je,nt,$e,Ct,Nt.data):ce.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),H.compressedTexSubImage3D(ht,de,ie.x,ie.y,ie.z,Be,Je,nt,$e,Nt.data)):H.texSubImage3D(ht,de,ie.x,ie.y,ie.z,Be,Je,nt,$e,Ct,Nt),H.pixelStorei(H.UNPACK_ROW_LENGTH,ft),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Ot),H.pixelStorei(H.UNPACK_SKIP_PIXELS,Qt),H.pixelStorei(H.UNPACK_SKIP_ROWS,nn),H.pixelStorei(H.UNPACK_SKIP_IMAGES,vn),de===0&&Te.generateMipmaps&&H.generateMipmap(ht),ge.unbindTexture()},this.initTexture=function(G){G.isCubeTexture?ee.setTextureCube(G,0):G.isData3DTexture?ee.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?ee.setTexture2DArray(G,0):ee.setTexture2D(G,0),ge.unbindTexture()},this.resetState=function(){_=0,C=0,T=null,ge.reset(),pe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Oc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===yR?"display-p3":"srgb",n.unpackColorSpace=Er.workingColorSpace===u2?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===ps?gh:h6}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===gh?ps:ed}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Tue extends _6{}Tue.prototype.isWebGL1Renderer=!0;class CR{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new zt(e),this.density=n}clone(){return new CR(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class TR{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new zt(e),this.near=n,this.far=r}clone(){return new TR(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Jw extends xr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class ER{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Yw,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=ll()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ll()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ll()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Wo=new me;class il{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Wo.fromBufferAttribute(this,n),Wo.applyMatrix4(e),this.setXYZ(n,Wo.x,Wo.y,Wo.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Wo.fromBufferAttribute(this,n),Wo.applyNormalMatrix(e),this.setXYZ(n,Wo.x,Wo.y,Wo.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Wo.fromBufferAttribute(this,n),Wo.transformDirection(e),this.setXYZ(n,Wo.x,Wo.y,Wo.z);return this}setX(e,n){return this.normalized&&(n=Fn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Fn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Fn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Fn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=xa(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=xa(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=xa(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=xa(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Fn(n,this.array),r=Fn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Fn(n,this.array),r=Fn(r,this.array),i=Fn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Fn(n,this.array),r=Fn(r,this.array),i=Fn(i,this.array),s=Fn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new kr(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new il(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class C6 extends ro{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new zt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let N0;const C1=new me,$0=new me,D0=new me,L0=new lt,T1=new lt,Eue=new _n,UT=new me,E1=new me,zT=new me,JY=new lt,uD=new lt,QY=new lt;class Mue extends xr{constructor(e=new C6){if(super(),this.isSprite=!0,this.type="Sprite",N0===void 0){N0=new Ln;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new ER(n,5);N0.setIndex([0,1,2,0,2,3]),N0.setAttribute("position",new il(r,3,0,!1)),N0.setAttribute("uv",new il(r,2,3,!1))}this.geometry=N0,this.material=e,this.center=new lt(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),$0.setFromMatrixScale(this.matrixWorld),Eue.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),D0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&$0.multiplyScalar(-D0.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;VT(UT.set(-.5,-.5,0),D0,o,$0,i,s),VT(E1.set(.5,-.5,0),D0,o,$0,i,s),VT(zT.set(.5,.5,0),D0,o,$0,i,s),JY.set(0,0),uD.set(1,0),QY.set(1,1);let a=e.ray.intersectTriangle(UT,E1,zT,!1,C1);if(a===null&&(VT(E1.set(-.5,.5,0),D0,o,$0,i,s),uD.set(0,1),a=e.ray.intersectTriangle(UT,zT,E1,!1,C1),a===null))return;const l=e.ray.origin.distanceTo(C1);l<e.near||l>e.far||n.push({distance:l,point:C1.clone(),uv:ya.getInterpolation(C1,UT,E1,zT,JY,uD,QY,new lt),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function VT(t,e,n,r,i,s){L0.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(T1.x=s*L0.x-i*L0.y,T1.y=i*L0.x+s*L0.y):T1.copy(L0),t.copy(e),t.x+=T1.x,t.y+=T1.y,t.applyMatrix4(Eue)}const WT=new me,eK=new me;class Aue extends xr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){WT.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(WT);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){WT.setFromMatrixPosition(e.matrixWorld),eK.setFromMatrixPosition(this.matrixWorld);const r=WT.distanceTo(eK)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const tK=new me,nK=new rr,rK=new rr,git=new me,iK=new _n,GT=new me,dD=new bs,sK=new _n,fD=new Ig;class kue extends ci{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=A4,this.bindMatrix=new _n,this.bindMatrixInverse=new _n,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new xs),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,GT),this.boundingBox.expandByPoint(GT)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new bs),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,GT),this.boundingSphere.expandByPoint(GT)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),dD.copy(this.boundingSphere),dD.applyMatrix4(i),e.ray.intersectsSphere(dD)!==!1&&(sK.copy(i).invert(),fD.copy(e.ray).applyMatrix4(sK),!(this.boundingBox!==null&&fD.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,fD)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new rr,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===A4?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Gce?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;nK.fromBufferAttribute(i.attributes.skinIndex,e),rK.fromBufferAttribute(i.attributes.skinWeight,e),tK.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=rK.getComponent(s);if(o!==0){const a=nK.getComponent(s);iK.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(git.copy(tK).applyMatrix4(iK),o)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class T6 extends xr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Pm extends di{constructor(e=null,n=1,r=1,i,s,o,a,l,c=Vi,u=Vi,d,f){super(null,o,a,l,c,u,i,s,d,f),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const oK=new _n,vit=new _n;class MR{constructor(e=[],n=[]){this.uuid=ll(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new _n)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new _n;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:vit;oK.multiplyMatrices(a,n[s]),oK.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new MR(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Pm(n,e,e,Eo,Ps);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new T6),this.bones.push(o),this.boneInverses.push(new _n().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class ig extends kr{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const O0=new _n,aK=new _n,HT=[],lK=new xs,yit=new _n,M1=new ci,A1=new bs;class Iue extends ci{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new ig(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,yit)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new xs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,O0),lK.copy(e.boundingBox).applyMatrix4(O0),this.boundingBox.union(lK)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new bs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,O0),A1.copy(e.boundingSphere).applyMatrix4(O0),this.boundingSphere.union(A1)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(M1.geometry=this.geometry,M1.material=this.material,M1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),A1.copy(this.boundingSphere),A1.applyMatrix4(r),e.ray.intersectsSphere(A1)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,O0),aK.multiplyMatrices(r,O0),M1.matrixWorld=aK,M1.raycast(e,HT);for(let o=0,a=HT.length;o<a;o++){const l=HT[o];l.instanceId=s,l.object=this,n.push(l)}HT.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new ig(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function xit(t,e){return t.z-e.z}function bit(t,e){return e.z-t.z}class wit{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const s=r[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=n}reset(){this.list.length=0,this.index=0}}const F0="batchId",Of=new _n,cK=new _n,Sit=new _n,uK=new _n,hD=new p2,jT=new xs,Pp=new bs,k1=new me,pD=new wit,go=new ci,XT=[];function _it(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class Rue extends ci{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new Ln,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new Pm(n,e,e,Eo,Ps);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:u,normalized:d}=l,f=new c.constructor(r*u),h=new l.constructor(f,u,d);h.setUsage(l.usage),n.setAttribute(a,h)}if(e.getIndex()!==null){const a=r>65536?new Uint32Array(s):new Uint16Array(s);n.setIndex(new kr(a,1))}const o=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(F0,new kr(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(F0))throw new Error(`BatchedMesh: Geometry cannot use attribute "${F0}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===F0)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=n.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xs);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Of),this.getBoundingBoxAt(i,jT).applyMatrix4(Of),n.union(jT))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bs);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Of),this.getBoundingSphereAt(i,Pp).applyMatrix4(Of),n.union(Pp))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),u=c!==null;if(u&&(r===-1?i.indexCount=c.count:i.indexCount=r,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,f=this._active,h=this._matricesTexture,p=this._matricesTexture.image.data;d.push(!0),f.push(!0);const v=this._geometryCount;this._geometryCount++,Sit.toArray(p,v*16),h.needsUpdate=!0,o.push(i),a.push({start:u?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new xs,sphereInitialized:!1,sphere:new bs});const g=this.geometry.getAttribute(F0);for(let m=0;m<i.vertexCount;m++)g.setX(i.vertexStart+m,v);return g.needsUpdate=!0,this.setGeometryAt(v,e),v}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=n.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||n.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const h in r.attributes){if(h===F0)continue;const p=n.getAttribute(h),v=r.getAttribute(h);_it(p,v,l);const g=p.itemSize;for(let m=p.count,y=c;m<y;m++){const x=l+m;for(let S=0;S<g;S++)v.setComponent(x,S,0)}v.needsUpdate=!0}if(i){const h=a.indexStart;for(let p=0;p<o.count;p++)s.setX(h+p,l+o.getX(p));for(let p=o.count,v=a.indexCount;p<v;p++)s.setX(h+p,l);s.needsUpdate=!0}const u=this._bounds[e];n.boundingBox!==null?(u.box.copy(n.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,n.boundingSphere!==null?(u.sphere.copy(n.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const d=this._drawRanges[e],f=n.getAttribute("position");return d.count=i?o.count:f.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let u=c.start,d=c.start+c.count;u<d;u++){let f=u;a&&(f=a.getX(f)),s.expandByPoint(k1.fromBufferAttribute(l,f))}i.boxInitialized=!0}return n.copy(s),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,jT),jT.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let u=0;for(let d=c.start,f=c.start+c.count;d<f;d++){let h=d;a&&(h=a.getX(h)),k1.fromBufferAttribute(l,h),u=Math.max(u,s.center.distanceToSquared(k1))}s.radius=Math.sqrt(u),i.sphereInitialized=!0}return n.copy(s),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||r[e]===!1?this:(n.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;go.material=this.material,go.geometry.index=l.index,go.geometry.attributes=l.attributes,go.geometry.boundingBox===null&&(go.geometry.boundingBox=new xs),go.geometry.boundingSphere===null&&(go.geometry.boundingSphere=new bs);for(let c=0;c<o;c++){if(!r[c]||!i[c])continue;const u=s[c];go.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(c,go.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,go.geometry.boundingBox),this.getBoundingSphereAt(c,go.geometry.boundingSphere),go.raycast(e,XT);for(let d=0,f=XT.length;d<f;d++){const h=XT[d];h.object=this,h.batchId=c,n.push(h)}XT.length=0}go.material=null,go.geometry.index=null,go.geometry.attributes={},go.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._visibility,c=this._multiDrawStarts,u=this._multiDrawCounts,d=this._drawRanges,f=this.perObjectFrustumCulled;f&&(uK.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),hD.setFromProjectionMatrix(uK,e.isWebGPURenderer?gy:Oc));let h=0;if(this.sortObjects){cK.copy(this.matrixWorld).invert(),k1.setFromMatrixPosition(r.matrixWorld).applyMatrix4(cK);for(let g=0,m=l.length;g<m;g++)if(l[g]){this.getMatrixAt(g,Of),this.getBoundingSphereAt(g,Pp).applyMatrix4(Of);let y=!1;if(f&&(y=!hD.intersectsSphere(Pp)),!y){const x=k1.distanceTo(Pp.center);pD.push(d[g],x)}}const p=pD.list,v=this.customSort;v===null?p.sort(s.transparent?bit:xit):v.call(this,p,r);for(let g=0,m=p.length;g<m;g++){const y=p[g];c[h]=y.start*a,u[h]=y.count,h++}pD.reset()}else for(let p=0,v=l.length;p<v;p++)if(l[p]){let g=!1;if(f&&(this.getMatrixAt(p,Of),this.getBoundingSphereAt(p,Pp).applyMatrix4(Of),g=!hD.intersectsSphere(Pp)),!g){const m=d[p];c[h]=m.start*a,u[h]=m.count,h++}}this._multiDrawCount=h,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class sa extends ro{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new zt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const dK=new me,fK=new me,hK=new _n,mD=new Ig,qT=new bs;let Rh=class extends xr{constructor(e=new Ln,n=new sa){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)dK.fromBufferAttribute(n,i-1),fK.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=dK.distanceTo(fK);e.setAttribute("lineDistance",new Zt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),qT.copy(r.boundingSphere),qT.applyMatrix4(i),qT.radius+=s,e.ray.intersectsSphere(qT)===!1)return;hK.copy(i).invert(),mD.copy(e.ray).applyMatrix4(hK);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new me,u=new me,d=new me,f=new me,h=this.isLineSegments?2:1,p=r.index,g=r.attributes.position;if(p!==null){const m=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let x=m,S=y-1;x<S;x+=h){const _=p.getX(x),C=p.getX(x+1);if(c.fromBufferAttribute(g,_),u.fromBufferAttribute(g,C),mD.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(f);A<e.near||A>e.far||n.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const m=Math.max(0,o.start),y=Math.min(g.count,o.start+o.count);for(let x=m,S=y-1;x<S;x+=h){if(c.fromBufferAttribute(g,x),u.fromBufferAttribute(g,x+1),mD.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(f);C<e.near||C>e.far||n.push({distance:C,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const pK=new me,mK=new me;class cd extends Rh{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)pK.fromBufferAttribute(n,i),mK.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+pK.distanceTo(mK);e.setAttribute("lineDistance",new Zt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Pue extends Rh{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class E6 extends ro{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new zt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const gK=new _n,sF=new Ig,YT=new bs,KT=new me;class Nue extends xr{constructor(e=new Ln,n=new E6){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),YT.copy(r.boundingSphere),YT.applyMatrix4(i),YT.radius+=s,e.ray.intersectsSphere(YT)===!1)return;gK.copy(i).invert(),sF.copy(e.ray).applyMatrix4(gK);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,d=r.attributes.position;if(c!==null){const f=Math.max(0,o.start),h=Math.min(c.count,o.start+o.count);for(let p=f,v=h;p<v;p++){const g=c.getX(p);KT.fromBufferAttribute(d,g),vK(KT,g,l,i,e,n,this)}}else{const f=Math.max(0,o.start),h=Math.min(d.count,o.start+o.count);for(let p=f,v=h;p<v;p++)KT.fromBufferAttribute(d,p),vK(KT,p,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function vK(t,e,n,r,i,s,o){const a=sF.distanceSqToPoint(t);if(a<n){const l=new me;sF.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Cit extends di{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Mr,this.magFilter=s!==void 0?s:Mr,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Tit extends di{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Vi,this.minFilter=Vi,this.generateMipmaps=!1,this.needsUpdate=!0}}class AR extends di{constructor(e,n,r,i,s,o,a,l,c,u,d,f){super(null,o,a,l,c,u,i,s,d,f),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Eit extends AR{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=To}}class Mit extends AR{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,Qu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Ait extends di{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class eu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],f=r[i+1]-u,h=(o-u)/f;return(i+h)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new lt:new me);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new me,i=[],s=[],o=[],a=new me,l=new _n;for(let h=0;h<=e;h++){const p=h/e;i[h]=this.getTangentAt(p,new me)}s[0]=new me,o[0]=new me;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),f=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),f<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),o[h]=o[h-1].clone(),a.crossVectors(i[h-1],i[h]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(Mi(i[h-1].dot(i[h]),-1,1));s[h].applyMatrix4(l.makeRotationAxis(a,p))}o[h].crossVectors(i[h],s[h])}if(n===!0){let h=Math.acos(Mi(s[0].dot(s[e]),-1,1));h/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(h=-h);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(i[p],h*p)),o[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class kR extends eu{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const r=n||new lt,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,h=c-this.aY;l=f*u-h*d+this.aX,c=f*d+h*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class $ue extends kR{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function M6(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let f=(o-s)/c-(a-s)/(c+u)+(a-o)/u,h=(a-o)/u-(l-o)/(u+d)+(l-a)/d;f*=u,h*=u,i(o,a,f,h)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const ZT=new me,gD=new M6,vD=new M6,yD=new M6;class Due extends eu{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new me){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(ZT.subVectors(i[0],i[1]).add(i[0]),c=ZT);const d=i[a%s],f=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(ZT.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=ZT),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(d),h),v=Math.pow(d.distanceToSquared(f),h),g=Math.pow(f.distanceToSquared(u),h);v<1e-4&&(v=1),p<1e-4&&(p=v),g<1e-4&&(g=v),gD.initNonuniformCatmullRom(c.x,d.x,f.x,u.x,p,v,g),vD.initNonuniformCatmullRom(c.y,d.y,f.y,u.y,p,v,g),yD.initNonuniformCatmullRom(c.z,d.z,f.z,u.z,p,v,g)}else this.curveType==="catmullrom"&&(gD.initCatmullRom(c.x,d.x,f.x,u.x,this.tension),vD.initCatmullRom(c.y,d.y,f.y,u.y,this.tension),yD.initCatmullRom(c.z,d.z,f.z,u.z,this.tension));return r.set(gD.calc(l),vD.calc(l),yD.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new me().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function yK(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function kit(t,e){const n=1-t;return n*n*e}function Iit(t,e){return 2*(1-t)*t*e}function Rit(t,e){return t*t*e}function Eb(t,e,n,r){return kit(t,e)+Iit(t,n)+Rit(t,r)}function Pit(t,e){const n=1-t;return n*n*n*e}function Nit(t,e){const n=1-t;return 3*n*n*t*e}function $it(t,e){return 3*(1-t)*t*t*e}function Dit(t,e){return t*t*t*e}function Mb(t,e,n,r,i){return Pit(t,e)+Nit(t,n)+$it(t,r)+Dit(t,i)}class A6 extends eu{constructor(e=new lt,n=new lt,r=new lt,i=new lt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new lt){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Mb(e,i.x,s.x,o.x,a.x),Mb(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Lue extends eu{constructor(e=new me,n=new me,r=new me,i=new me){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new me){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Mb(e,i.x,s.x,o.x,a.x),Mb(e,i.y,s.y,o.y,a.y),Mb(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class k6 extends eu{constructor(e=new lt,n=new lt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new lt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new lt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Oue extends eu{constructor(e=new me,n=new me){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new me){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new me){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class I6 extends eu{constructor(e=new lt,n=new lt,r=new lt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new lt){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Eb(e,i.x,s.x,o.x),Eb(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class R6 extends eu{constructor(e=new me,n=new me,r=new me){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new me){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Eb(e,i.x,s.x,o.x),Eb(e,i.y,s.y,o.y),Eb(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class P6 extends eu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new lt){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(yK(a,l.x,c.x,u.x,d.x),yK(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new lt().fromArray(i))}return this}}var OA=Object.freeze({__proto__:null,ArcCurve:$ue,CatmullRomCurve3:Due,CubicBezierCurve:A6,CubicBezierCurve3:Lue,EllipseCurve:kR,LineCurve:k6,LineCurve3:Oue,QuadraticBezierCurve:I6,QuadraticBezierCurve3:R6,SplineCurve:P6});class Fue extends eu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new OA[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new OA[i.type]().fromJSON(i))}return this}}class Qw extends Fue{constructor(e){super(),this.type="Path",this.currentPoint=new lt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new k6(this.currentPoint.clone(),new lt(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new I6(this.currentPoint.clone(),new lt(e,n),new lt(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new A6(this.currentPoint.clone(),new lt(e,n),new lt(r,i),new lt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new P6(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const c=new kR(e,n,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class m2 extends Ln{constructor(e=[new lt(0,-.5),new lt(.5,0),new lt(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Mi(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/n,d=new me,f=new lt,h=new me,p=new me,v=new me;let g=0,m=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:g=e[y+1].x-e[y].x,m=e[y+1].y-e[y].y,h.x=m*1,h.y=-g,h.z=m*0,v.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:g=e[y+1].x-e[y].x,m=e[y+1].y-e[y].y,h.x=m*1,h.y=-g,h.z=m*0,p.copy(h),h.x+=v.x,h.y+=v.y,h.z+=v.z,h.normalize(),l.push(h.x,h.y,h.z),v.copy(p)}for(let y=0;y<=n;y++){const x=r+y*u*i,S=Math.sin(x),_=Math.cos(x);for(let C=0;C<=e.length-1;C++){d.x=e[C].x*S,d.y=e[C].y,d.z=e[C].x*_,o.push(d.x,d.y,d.z),f.x=y/n,f.y=C/(e.length-1),a.push(f.x,f.y);const T=l[3*C+0]*S,A=l[3*C+1],M=l[3*C+0]*_;c.push(T,A,M)}}for(let y=0;y<n;y++)for(let x=0;x<e.length-1;x++){const S=x+y*e.length,_=S,C=S+e.length,T=S+e.length+1,A=S+1;s.push(_,C,A),s.push(T,A,C)}this.setIndex(s),this.setAttribute("position",new Zt(o,3)),this.setAttribute("uv",new Zt(a,2)),this.setAttribute("normal",new Zt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new m2(e.points,e.segments,e.phiStart,e.phiLength)}}class IR extends m2{constructor(e=1,n=1,r=4,i=8){const s=new Qw;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new IR(e.radius,e.length,e.capSegments,e.radialSegments)}}class RR extends Ln{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new me,u=new lt;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=n;d++,f+=3){const h=r+d/n*i;c.x=e*Math.cos(h),c.y=e*Math.sin(h),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[f]/e+1)/2,u.y=(o[f+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=n;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Zt(o,3)),this.setAttribute("normal",new Zt(a,3)),this.setAttribute("uv",new Zt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new RR(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class lx extends Ln{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],d=[],f=[],h=[];let p=0;const v=[],g=r/2;let m=0;y(),o===!1&&(e>0&&x(!0),n>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new Zt(d,3)),this.setAttribute("normal",new Zt(f,3)),this.setAttribute("uv",new Zt(h,2));function y(){const S=new me,_=new me;let C=0;const T=(n-e)/r;for(let A=0;A<=s;A++){const M=[],E=A/s,P=E*(n-e)+e;for(let N=0;N<=i;N++){const F=N/i,$=F*l+a,O=Math.sin($),z=Math.cos($);_.x=P*O,_.y=-E*r+g,_.z=P*z,d.push(_.x,_.y,_.z),S.set(O,T,z).normalize(),f.push(S.x,S.y,S.z),h.push(F,1-E),M.push(p++)}v.push(M)}for(let A=0;A<i;A++)for(let M=0;M<s;M++){const E=v[M][A],P=v[M+1][A],N=v[M+1][A+1],F=v[M][A+1];u.push(E,P,F),u.push(P,N,F),C+=6}c.addGroup(m,C,0),m+=C}function x(S){const _=p,C=new lt,T=new me;let A=0;const M=S===!0?e:n,E=S===!0?1:-1;for(let N=1;N<=i;N++)d.push(0,g*E,0),f.push(0,E,0),h.push(.5,.5),p++;const P=p;for(let N=0;N<=i;N++){const $=N/i*l+a,O=Math.cos($),z=Math.sin($);T.x=M*z,T.y=g*E,T.z=M*O,d.push(T.x,T.y,T.z),f.push(0,E,0),C.x=O*.5+.5,C.y=z*.5*E+.5,h.push(C.x,C.y),p++}for(let N=0;N<i;N++){const F=_+N,$=P+N;S===!0?u.push($,$+1,F):u.push($+1,$,F),A+=3}c.addGroup(m,A,S===!0?1:2),m+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lx(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class PR extends lx{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new PR(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Zh extends Ln{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new Zt(s,3)),this.setAttribute("normal",new Zt(s.slice(),3)),this.setAttribute("uv",new Zt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(y){const x=new me,S=new me,_=new me;for(let C=0;C<n.length;C+=3)h(n[C+0],x),h(n[C+1],S),h(n[C+2],_),l(x,S,_,y)}function l(y,x,S,_){const C=_+1,T=[];for(let A=0;A<=C;A++){T[A]=[];const M=y.clone().lerp(S,A/C),E=x.clone().lerp(S,A/C),P=C-A;for(let N=0;N<=P;N++)N===0&&A===C?T[A][N]=M:T[A][N]=M.clone().lerp(E,N/P)}for(let A=0;A<C;A++)for(let M=0;M<2*(C-A)-1;M++){const E=Math.floor(M/2);M%2===0?(f(T[A][E+1]),f(T[A+1][E]),f(T[A][E])):(f(T[A][E+1]),f(T[A+1][E+1]),f(T[A+1][E]))}}function c(y){const x=new me;for(let S=0;S<s.length;S+=3)x.x=s[S+0],x.y=s[S+1],x.z=s[S+2],x.normalize().multiplyScalar(y),s[S+0]=x.x,s[S+1]=x.y,s[S+2]=x.z}function u(){const y=new me;for(let x=0;x<s.length;x+=3){y.x=s[x+0],y.y=s[x+1],y.z=s[x+2];const S=g(y)/2/Math.PI+.5,_=m(y)/Math.PI+.5;o.push(S,1-_)}p(),d()}function d(){for(let y=0;y<o.length;y+=6){const x=o[y+0],S=o[y+2],_=o[y+4],C=Math.max(x,S,_),T=Math.min(x,S,_);C>.9&&T<.1&&(x<.2&&(o[y+0]+=1),S<.2&&(o[y+2]+=1),_<.2&&(o[y+4]+=1))}}function f(y){s.push(y.x,y.y,y.z)}function h(y,x){const S=y*3;x.x=e[S+0],x.y=e[S+1],x.z=e[S+2]}function p(){const y=new me,x=new me,S=new me,_=new me,C=new lt,T=new lt,A=new lt;for(let M=0,E=0;M<s.length;M+=9,E+=6){y.set(s[M+0],s[M+1],s[M+2]),x.set(s[M+3],s[M+4],s[M+5]),S.set(s[M+6],s[M+7],s[M+8]),C.set(o[E+0],o[E+1]),T.set(o[E+2],o[E+3]),A.set(o[E+4],o[E+5]),_.copy(y).add(x).add(S).divideScalar(3);const P=g(_);v(C,E+0,y,P),v(T,E+2,x,P),v(A,E+4,S,P)}}function v(y,x,S,_){_<0&&y.x===1&&(o[x]=y.x-1),S.x===0&&S.z===0&&(o[x]=_/2/Math.PI+.5)}function g(y){return Math.atan2(y.z,-y.x)}function m(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zh(e.vertices,e.indices,e.radius,e.details)}}class NR extends Zh{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new NR(e.radius,e.detail)}}const JT=new me,QT=new me,xD=new me,eE=new ya;class Bue extends Ln{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(Im*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),f={},h=[];for(let p=0;p<l;p+=3){o?(c[0]=o.getX(p),c[1]=o.getX(p+1),c[2]=o.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:v,b:g,c:m}=eE;if(v.fromBufferAttribute(a,c[0]),g.fromBufferAttribute(a,c[1]),m.fromBufferAttribute(a,c[2]),eE.getNormal(xD),d[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,d[1]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,d[2]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let y=0;y<3;y++){const x=(y+1)%3,S=d[y],_=d[x],C=eE[u[y]],T=eE[u[x]],A=`${S}_${_}`,M=`${_}_${S}`;M in f&&f[M]?(xD.dot(f[M].normal)<=s&&(h.push(C.x,C.y,C.z),h.push(T.x,T.y,T.z)),f[M]=null):A in f||(f[A]={index0:c[y],index1:c[x],normal:xD.clone()})}}for(const p in f)if(f[p]){const{index0:v,index1:g}=f[p];JT.fromBufferAttribute(a,v),QT.fromBufferAttribute(a,g),h.push(JT.x,JT.y,JT.z),h.push(QT.x,QT.y,QT.z)}this.setAttribute("position",new Zt(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Nm extends Qw{constructor(e){super(e),this.uuid=ll(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new Qw().fromJSON(i))}return this}}const Lit={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=Uue(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,f,h;if(r&&(s=zit(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let p=n;p<i;p+=n)d=t[p],f=t[p+1],d<a&&(a=d),f<l&&(l=f),d>c&&(c=d),f>u&&(u=f);h=Math.max(c-a,u-l),h=h!==0?32767/h:0}return eS(s,o,n,a,l,h,0),o}};function Uue(t,e,n,r,i){let s,o;if(i===Jit(t,e,n,r)>0)for(s=e;s<n;s+=r)o=xK(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=xK(s,t[s],t[s+1],o);return o&&$R(o,o.next)&&(nS(o),o=o.next),o}function sg(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&($R(n,n.next)||vi(n.prev,n,n.next)===0)){if(nS(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function eS(t,e,n,r,i,s,o){if(!t)return;!o&&s&&jit(t,r,i,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?Fit(t,r,i,s):Oit(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),nS(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=Bit(sg(t),e,n),eS(t,e,n,r,i,s,2)):o===2&&Uit(t,e,n,r,i,s):eS(sg(t),e,n,r,i,s,1);break}}}function Oit(t){const e=t.prev,n=t,r=t.next;if(vi(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,f=i>s?i>o?i:o:s>o?s:o,h=a>l?a>c?a:c:l>c?l:c;let p=r.next;for(;p!==e;){if(p.x>=u&&p.x<=f&&p.y>=d&&p.y<=h&&gv(i,a,s,l,o,c,p.x,p.y)&&vi(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Fit(t,e,n,r){const i=t.prev,s=t,o=t.next;if(vi(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,f=o.y,h=a<l?a<c?a:c:l<c?l:c,p=u<d?u<f?u:f:d<f?d:f,v=a>l?a>c?a:c:l>c?l:c,g=u>d?u>f?u:f:d>f?d:f,m=oF(h,p,e,n,r),y=oF(v,g,e,n,r);let x=t.prevZ,S=t.nextZ;for(;x&&x.z>=m&&S&&S.z<=y;){if(x.x>=h&&x.x<=v&&x.y>=p&&x.y<=g&&x!==i&&x!==o&&gv(a,u,l,d,c,f,x.x,x.y)&&vi(x.prev,x,x.next)>=0||(x=x.prevZ,S.x>=h&&S.x<=v&&S.y>=p&&S.y<=g&&S!==i&&S!==o&&gv(a,u,l,d,c,f,S.x,S.y)&&vi(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;x&&x.z>=m;){if(x.x>=h&&x.x<=v&&x.y>=p&&x.y<=g&&x!==i&&x!==o&&gv(a,u,l,d,c,f,x.x,x.y)&&vi(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;S&&S.z<=y;){if(S.x>=h&&S.x<=v&&S.y>=p&&S.y<=g&&S!==i&&S!==o&&gv(a,u,l,d,c,f,S.x,S.y)&&vi(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function Bit(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!$R(i,s)&&zue(i,r,r.next,s)&&tS(i,s)&&tS(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),nS(r),nS(r.next),r=t=s),r=r.next}while(r!==t);return sg(r)}function Uit(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Yit(o,a)){let l=Vue(o,a);o=sg(o,o.next),l=sg(l,l.next),eS(o,e,n,r,i,s,0),eS(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function zit(t,e,n,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=Uue(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(qit(c));for(i.sort(Vit),s=0;s<i.length;s++)n=Wit(i[s],n);return n}function Vit(t,e){return t.x-e.x}function Wit(t,e){const n=Git(t,e);if(!n)return e;const r=Vue(n,t);return sg(r,r.next),sg(n,n.next)}function Git(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const f=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=s&&f>r&&(r=f,i=n.x<n.next.x?n:n.next,f===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,d;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&gv(o<c?s:r,o,l,c,o<c?r:s,o,n.x,n.y)&&(d=Math.abs(o-n.y)/(s-n.x),tS(n,t)&&(d<u||d===u&&(n.x>i.x||n.x===i.x&&Hit(i,n)))&&(i=n,u=d)),n=n.next;while(n!==a);return i}function Hit(t,e){return vi(t.prev,t,e.prev)<0&&vi(e.next,t,t.next)<0}function jit(t,e,n,r){let i=t;do i.z===0&&(i.z=oF(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Xit(i)}function Xit(t){let e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function oF(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function qit(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function gv(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function Yit(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Kit(t,e)&&(tS(t,e)&&tS(e,t)&&Zit(t,e)&&(vi(t.prev,t,e.prev)||vi(t,e.prev,e))||$R(t,e)&&vi(t.prev,t,t.next)>0&&vi(e.prev,e,e.next)>0)}function vi(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function $R(t,e){return t.x===e.x&&t.y===e.y}function zue(t,e,n,r){const i=nE(vi(t,e,n)),s=nE(vi(t,e,r)),o=nE(vi(n,r,t)),a=nE(vi(n,r,e));return!!(i!==s&&o!==a||i===0&&tE(t,n,e)||s===0&&tE(t,r,e)||o===0&&tE(n,t,r)||a===0&&tE(n,e,r))}function tE(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function nE(t){return t>0?1:t<0?-1:0}function Kit(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&zue(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function tS(t,e){return vi(t.prev,t,t.next)<0?vi(t,e,t.next)>=0&&vi(t,t.prev,e)>=0:vi(t,e,t.prev)<0||vi(t,t.next,e)<0}function Zit(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function Vue(t,e){const n=new aF(t.i,t.x,t.y),r=new aF(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function xK(t,e,n,r){const i=new aF(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function nS(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function aF(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jit(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class zu{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return zu.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];bK(e),wK(r,e);let o=e.length;n.forEach(bK);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,wK(r,n[l]);const a=Lit.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function bK(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function wK(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class DR extends Ln{constructor(e=new Nm([new lt(.5,.5),new lt(-.5,.5),new lt(-.5,-.5),new lt(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Zt(i,3)),this.setAttribute("uv",new Zt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,d=n.depth!==void 0?n.depth:1;let f=n.bevelEnabled!==void 0?n.bevelEnabled:!0,h=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:h-.1,v=n.bevelOffset!==void 0?n.bevelOffset:0,g=n.bevelSegments!==void 0?n.bevelSegments:3;const m=n.extrudePath,y=n.UVGenerator!==void 0?n.UVGenerator:Qit;let x,S=!1,_,C,T,A;m&&(x=m.getSpacedPoints(u),S=!0,f=!1,_=m.computeFrenetFrames(u,!1),C=new me,T=new me,A=new me),f||(g=0,h=0,p=0,v=0);const M=a.extractPoints(c);let E=M.shape;const P=M.holes;if(!zu.isClockWise(E)){E=E.reverse();for(let H=0,Me=P.length;H<Me;H++){const we=P[H];zu.isClockWise(we)&&(P[H]=we.reverse())}}const F=zu.triangulateShape(E,P),$=E;for(let H=0,Me=P.length;H<Me;H++){const we=P[H];E=E.concat(we)}function O(H,Me,we){return Me||console.error("THREE.ExtrudeGeometry: vec does not exist"),H.clone().addScaledVector(Me,we)}const z=E.length,X=F.length;function D(H,Me,we){let Ee,ge,qe;const Ae=H.x-Me.x,ee=H.y-Me.y,Y=we.x-H.x,oe=we.y-H.y,xe=Ae*Ae+ee*ee,Se=Ae*oe-ee*Y;if(Math.abs(Se)>Number.EPSILON){const be=Math.sqrt(xe),Re=Math.sqrt(Y*Y+oe*oe),Ke=Me.x-ee/be,ze=Me.y+Ae/be,Ne=we.x-oe/Re,De=we.y+Y/Re,Ve=((Ne-Ke)*oe-(De-ze)*Y)/(Ae*oe-ee*Y);Ee=Ke+Ae*Ve-H.x,ge=ze+ee*Ve-H.y;const gt=Ee*Ee+ge*ge;if(gt<=2)return new lt(Ee,ge);qe=Math.sqrt(gt/2)}else{let be=!1;Ae>Number.EPSILON?Y>Number.EPSILON&&(be=!0):Ae<-Number.EPSILON?Y<-Number.EPSILON&&(be=!0):Math.sign(ee)===Math.sign(oe)&&(be=!0),be?(Ee=-ee,ge=Ae,qe=Math.sqrt(xe)):(Ee=Ae,ge=ee,qe=Math.sqrt(xe/2))}return new lt(Ee/qe,ge/qe)}const B=[];for(let H=0,Me=$.length,we=Me-1,Ee=H+1;H<Me;H++,we++,Ee++)we===Me&&(we=0),Ee===Me&&(Ee=0),B[H]=D($[H],$[we],$[Ee]);const V=[];let W,j=B.concat();for(let H=0,Me=P.length;H<Me;H++){const we=P[H];W=[];for(let Ee=0,ge=we.length,qe=ge-1,Ae=Ee+1;Ee<ge;Ee++,qe++,Ae++)qe===ge&&(qe=0),Ae===ge&&(Ae=0),W[Ee]=D(we[Ee],we[qe],we[Ae]);V.push(W),j=j.concat(W)}for(let H=0;H<g;H++){const Me=H/g,we=h*Math.cos(Me*Math.PI/2),Ee=p*Math.sin(Me*Math.PI/2)+v;for(let ge=0,qe=$.length;ge<qe;ge++){const Ae=O($[ge],B[ge],Ee);se(Ae.x,Ae.y,-we)}for(let ge=0,qe=P.length;ge<qe;ge++){const Ae=P[ge];W=V[ge];for(let ee=0,Y=Ae.length;ee<Y;ee++){const oe=O(Ae[ee],W[ee],Ee);se(oe.x,oe.y,-we)}}}const J=p+v;for(let H=0;H<z;H++){const Me=f?O(E[H],j[H],J):E[H];S?(T.copy(_.normals[0]).multiplyScalar(Me.x),C.copy(_.binormals[0]).multiplyScalar(Me.y),A.copy(x[0]).add(T).add(C),se(A.x,A.y,A.z)):se(Me.x,Me.y,0)}for(let H=1;H<=u;H++)for(let Me=0;Me<z;Me++){const we=f?O(E[Me],j[Me],J):E[Me];S?(T.copy(_.normals[H]).multiplyScalar(we.x),C.copy(_.binormals[H]).multiplyScalar(we.y),A.copy(x[H]).add(T).add(C),se(A.x,A.y,A.z)):se(we.x,we.y,d/u*H)}for(let H=g-1;H>=0;H--){const Me=H/g,we=h*Math.cos(Me*Math.PI/2),Ee=p*Math.sin(Me*Math.PI/2)+v;for(let ge=0,qe=$.length;ge<qe;ge++){const Ae=O($[ge],B[ge],Ee);se(Ae.x,Ae.y,d+we)}for(let ge=0,qe=P.length;ge<qe;ge++){const Ae=P[ge];W=V[ge];for(let ee=0,Y=Ae.length;ee<Y;ee++){const oe=O(Ae[ee],W[ee],Ee);S?se(oe.x,oe.y+x[u-1].y,x[u-1].x+we):se(oe.x,oe.y,d+we)}}}Q(),te();function Q(){const H=i.length/3;if(f){let Me=0,we=z*Me;for(let Ee=0;Ee<X;Ee++){const ge=F[Ee];fe(ge[2]+we,ge[1]+we,ge[0]+we)}Me=u+g*2,we=z*Me;for(let Ee=0;Ee<X;Ee++){const ge=F[Ee];fe(ge[0]+we,ge[1]+we,ge[2]+we)}}else{for(let Me=0;Me<X;Me++){const we=F[Me];fe(we[2],we[1],we[0])}for(let Me=0;Me<X;Me++){const we=F[Me];fe(we[0]+z*u,we[1]+z*u,we[2]+z*u)}}r.addGroup(H,i.length/3-H,0)}function te(){const H=i.length/3;let Me=0;re($,Me),Me+=$.length;for(let we=0,Ee=P.length;we<Ee;we++){const ge=P[we];re(ge,Me),Me+=ge.length}r.addGroup(H,i.length/3-H,1)}function re(H,Me){let we=H.length;for(;--we>=0;){const Ee=we;let ge=we-1;ge<0&&(ge=H.length-1);for(let qe=0,Ae=u+g*2;qe<Ae;qe++){const ee=z*qe,Y=z*(qe+1),oe=Me+Ee+ee,xe=Me+ge+ee,Se=Me+ge+Y,be=Me+Ee+Y;ae(oe,xe,Se,be)}}}function se(H,Me,we){l.push(H),l.push(Me),l.push(we)}function fe(H,Me,we){ye(H),ye(Me),ye(we);const Ee=i.length/3,ge=y.generateTopUV(r,i,Ee-3,Ee-2,Ee-1);le(ge[0]),le(ge[1]),le(ge[2])}function ae(H,Me,we,Ee){ye(H),ye(Me),ye(Ee),ye(Me),ye(we),ye(Ee);const ge=i.length/3,qe=y.generateSideWallUV(r,i,ge-6,ge-3,ge-2,ge-1);le(qe[0]),le(qe[1]),le(qe[3]),le(qe[1]),le(qe[2]),le(qe[3])}function ye(H){i.push(l[H*3+0]),i.push(l[H*3+1]),i.push(l[H*3+2])}function le(H){s.push(H.x),s.push(H.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return est(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new OA[i.type]().fromJSON(i)),new DR(r,e.options)}}const Qit={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new lt(s,o),new lt(a,l),new lt(c,u)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],d=e[r*3+2],f=e[i*3],h=e[i*3+1],p=e[i*3+2],v=e[s*3],g=e[s*3+1],m=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new lt(o,1-l),new lt(c,1-d),new lt(f,1-p),new lt(v,1-m)]:[new lt(a,1-l),new lt(u,1-d),new lt(h,1-p),new lt(g,1-m)]}};function est(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class g2 extends Zh{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new g2(e.radius,e.detail)}}class v2 extends Zh{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new v2(e.radius,e.detail)}}class LR extends Ln{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let d=e;const f=(n-e)/i,h=new me,p=new lt;for(let v=0;v<=i;v++){for(let g=0;g<=r;g++){const m=s+g/r*o;h.x=d*Math.cos(m),h.y=d*Math.sin(m),l.push(h.x,h.y,h.z),c.push(0,0,1),p.x=(h.x/n+1)/2,p.y=(h.y/n+1)/2,u.push(p.x,p.y)}d+=f}for(let v=0;v<i;v++){const g=v*(r+1);for(let m=0;m<r;m++){const y=m+g,x=y,S=y+r+1,_=y+r+2,C=y+1;a.push(x,S,C),a.push(S,_,C)}}this.setIndex(a),this.setAttribute("position",new Zt(l,3)),this.setAttribute("normal",new Zt(c,3)),this.setAttribute("uv",new Zt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LR(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class OR extends Ln{constructor(e=new Nm([new lt(0,.5),new lt(-.5,-.5),new lt(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Zt(i,3)),this.setAttribute("normal",new Zt(s,3)),this.setAttribute("uv",new Zt(o,2));function c(u){const d=i.length/3,f=u.extractPoints(n);let h=f.shape;const p=f.holes;zu.isClockWise(h)===!1&&(h=h.reverse());for(let g=0,m=p.length;g<m;g++){const y=p[g];zu.isClockWise(y)===!0&&(p[g]=y.reverse())}const v=zu.triangulateShape(h,p);for(let g=0,m=p.length;g<m;g++){const y=p[g];h=h.concat(y)}for(let g=0,m=h.length;g<m;g++){const y=h[g];i.push(y.x,y.y,0),s.push(0,0,1),o.push(y.x,y.y)}for(let g=0,m=v.length;g<m;g++){const y=v[g],x=y[0]+d,S=y[1]+d,_=y[2]+d;r.push(x,S,_),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return tst(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new OR(r,e.curveSegments)}}function tst(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class y2 extends Ln{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new me,f=new me,h=[],p=[],v=[],g=[];for(let m=0;m<=r;m++){const y=[],x=m/r;let S=0;m===0&&o===0?S=.5/n:m===r&&l===Math.PI&&(S=-.5/n);for(let _=0;_<=n;_++){const C=_/n;d.x=-e*Math.cos(i+C*s)*Math.sin(o+x*a),d.y=e*Math.cos(o+x*a),d.z=e*Math.sin(i+C*s)*Math.sin(o+x*a),p.push(d.x,d.y,d.z),f.copy(d).normalize(),v.push(f.x,f.y,f.z),g.push(C+S,1-x),y.push(c++)}u.push(y)}for(let m=0;m<r;m++)for(let y=0;y<n;y++){const x=u[m][y+1],S=u[m][y],_=u[m+1][y],C=u[m+1][y+1];(m!==0||o>0)&&h.push(x,S,C),(m!==r-1||l<Math.PI)&&h.push(S,_,C)}this.setIndex(h),this.setAttribute("position",new Zt(p,3)),this.setAttribute("normal",new Zt(v,3)),this.setAttribute("uv",new Zt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new y2(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class FR extends Zh{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new FR(e.radius,e.detail)}}class BR extends Ln{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new me,d=new me,f=new me;for(let h=0;h<=r;h++)for(let p=0;p<=i;p++){const v=p/i*s,g=h/r*Math.PI*2;d.x=(e+n*Math.cos(g))*Math.cos(v),d.y=(e+n*Math.cos(g))*Math.sin(v),d.z=n*Math.sin(g),a.push(d.x,d.y,d.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(p/i),c.push(h/r)}for(let h=1;h<=r;h++)for(let p=1;p<=i;p++){const v=(i+1)*h+p-1,g=(i+1)*(h-1)+p-1,m=(i+1)*(h-1)+p,y=(i+1)*h+p;o.push(v,g,y),o.push(g,m,y)}this.setIndex(o),this.setAttribute("position",new Zt(a,3)),this.setAttribute("normal",new Zt(l,3)),this.setAttribute("uv",new Zt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BR(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class UR extends Ln{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],d=new me,f=new me,h=new me,p=new me,v=new me,g=new me,m=new me;for(let x=0;x<=r;++x){const S=x/r*s*Math.PI*2;y(S,s,o,e,h),y(S+.01,s,o,e,p),g.subVectors(p,h),m.addVectors(p,h),v.crossVectors(g,m),m.crossVectors(v,g),v.normalize(),m.normalize();for(let _=0;_<=i;++_){const C=_/i*Math.PI*2,T=-n*Math.cos(C),A=n*Math.sin(C);d.x=h.x+(T*m.x+A*v.x),d.y=h.y+(T*m.y+A*v.y),d.z=h.z+(T*m.z+A*v.z),l.push(d.x,d.y,d.z),f.subVectors(d,h).normalize(),c.push(f.x,f.y,f.z),u.push(x/r),u.push(_/i)}}for(let x=1;x<=r;x++)for(let S=1;S<=i;S++){const _=(i+1)*(x-1)+(S-1),C=(i+1)*x+(S-1),T=(i+1)*x+S,A=(i+1)*(x-1)+S;a.push(_,C,A),a.push(C,T,A)}this.setIndex(a),this.setAttribute("position",new Zt(l,3)),this.setAttribute("normal",new Zt(c,3)),this.setAttribute("uv",new Zt(u,2));function y(x,S,_,C,T){const A=Math.cos(x),M=Math.sin(x),E=_/S*x,P=Math.cos(E);T.x=C*(2+P)*.5*A,T.y=C*(2+P)*M*.5,T.z=C*Math.sin(E)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new UR(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class zR extends Ln{constructor(e=new R6(new me(-1,-1,0),new me(-1,1,0),new me(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new me,l=new me,c=new lt;let u=new me;const d=[],f=[],h=[],p=[];v(),this.setIndex(p),this.setAttribute("position",new Zt(d,3)),this.setAttribute("normal",new Zt(f,3)),this.setAttribute("uv",new Zt(h,2));function v(){for(let x=0;x<n;x++)g(x);g(s===!1?n:0),y(),m()}function g(x){u=e.getPointAt(x/n,u);const S=o.normals[x],_=o.binormals[x];for(let C=0;C<=i;C++){const T=C/i*Math.PI*2,A=Math.sin(T),M=-Math.cos(T);l.x=M*S.x+A*_.x,l.y=M*S.y+A*_.y,l.z=M*S.z+A*_.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,d.push(a.x,a.y,a.z)}}function m(){for(let x=1;x<=n;x++)for(let S=1;S<=i;S++){const _=(i+1)*(x-1)+(S-1),C=(i+1)*x+(S-1),T=(i+1)*x+S,A=(i+1)*(x-1)+S;p.push(_,C,A),p.push(C,T,A)}}function y(){for(let x=0;x<=n;x++)for(let S=0;S<=i;S++)c.x=x/n,c.y=S/i,h.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new zR(new OA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class N6 extends Ln{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new me,s=new me;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],f=d.start,h=d.count;for(let p=f,v=f+h;p<v;p+=3)for(let g=0;g<3;g++){const m=a.getX(p+g),y=a.getX(p+(g+1)%3);i.fromBufferAttribute(o,m),s.fromBufferAttribute(o,y),SK(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),SK(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new Zt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function SK(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var _K=Object.freeze({__proto__:null,BoxGeometry:Rg,CapsuleGeometry:IR,CircleGeometry:RR,ConeGeometry:PR,CylinderGeometry:lx,DodecahedronGeometry:NR,EdgesGeometry:Bue,ExtrudeGeometry:DR,IcosahedronGeometry:g2,LatheGeometry:m2,OctahedronGeometry:v2,PlaneGeometry:Kh,PolyhedronGeometry:Zh,RingGeometry:LR,ShapeGeometry:OR,SphereGeometry:y2,TetrahedronGeometry:FR,TorusGeometry:BR,TorusKnotGeometry:UR,TubeGeometry:zR,WireframeGeometry:N6});class Wue extends ro{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new zt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Gue extends sc{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class $6 extends ro{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yh,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Hue extends $6{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new lt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Mi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new zt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new zt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new zt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class jue extends ro{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new zt(16777215),this.specular=new zt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yh,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=c2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xue extends ro{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new zt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yh,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class que extends ro{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yh,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Yue extends ro{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yh,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=c2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Kue extends ro{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new zt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yh,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Zue extends sa{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function gm(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function Jue(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Que(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function lF(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function D6(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function nst(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],f=[];for(let h=0;h<c.times.length;++h){const p=c.times[h]*i;if(!(p<n||p>=r)){d.push(c.times[h]);for(let v=0;v<u;++v)f.push(c.values[h*u+v])}}d.length!==0&&(c.times=gm(d,c.times.constructor),c.values=gm(f,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function rst(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(m){return m.name===a.name&&m.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let f=0;const h=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=h/3);const p=a.times.length-1;let v;if(s<=a.times[0]){const m=u,y=d-u;v=a.values.slice(m,y)}else if(s>=a.times[p]){const m=p*d+u,y=m+d-u;v=a.values.slice(m,y)}else{const m=a.createInterpolant(),y=u,x=d-u;m.evaluate(s),v=m.resultBuffer.slice(y,x)}l==="quaternion"&&new Ro().fromArray(v).normalize().conjugate().toArray(v);const g=c.times.length;for(let m=0;m<g;++m){const y=m*h+f;if(l==="quaternion")Ro.multiplyQuaternionsFlat(c.values,y,v,0,c.values,y);else{const x=h-f*2;for(let S=0;S<x;++S)c.values[y+S]-=v[S]}}}return t.blendMode=f6,t}const ist={convertArray:gm,isTypedArray:Jue,getKeyframeOrder:Que,sortedArray:lF,flattenJSON:D6,subclip:nst,makeClipAdditive:rst};class x2{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ede extends x2{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:fm,endingEnd:fm}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case hm:s=e,a=2*n-r;break;case Hw:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case hm:o=e,l=2*r-n;break;case Hw:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const c=(r-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(r-n)/(i-n),v=p*p,g=v*p,m=-f*g+2*f*v-f*p,y=(1+f)*g+(-1.5-2*f)*v+(-.5+f)*p+1,x=(-1-h)*g+(1.5+h)*v+.5*p,S=h*g-h*v;for(let _=0;_!==a;++_)s[_]=m*o[u+_]+y*o[c+_]+x*o[l+_]+S*o[d+_];return s}}class L6 extends x2{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-n)/(i-n),d=1-u;for(let f=0;f!==a;++f)s[f]=o[c+f]*d+o[l+f]*u;return s}}class tde extends x2{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class tu{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gm(n,this.TimeBufferType),this.values=gm(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:gm(e.times,Array),values:gm(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new tde(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new L6(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ede(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Ww:n=this.InterpolantFactoryMethodDiscrete;break;case Gw:n=this.InterpolantFactoryMethodLinear;break;case fM:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ww;case this.InterpolantFactoryMethodLinear:return Gw;case this.InterpolantFactoryMethodSmooth:return fM}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&Jue(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===fM,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const d=a*r,f=d-r,h=d+r;for(let p=0;p!==r;++p){const v=n[d+p];if(v!==n[f+p]||v!==n[h+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,f=o*r;for(let h=0;h!==r;++h)n[f+h]=n[d+h]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}tu.prototype.TimeBufferType=Float32Array;tu.prototype.ValueBufferType=Float32Array;tu.prototype.DefaultInterpolation=Gw;class Pg extends tu{}Pg.prototype.ValueTypeName="bool";Pg.prototype.ValueBufferType=Array;Pg.prototype.DefaultInterpolation=Ww;Pg.prototype.InterpolantFactoryMethodLinear=void 0;Pg.prototype.InterpolantFactoryMethodSmooth=void 0;class O6 extends tu{}O6.prototype.ValueTypeName="color";class rS extends tu{}rS.prototype.ValueTypeName="number";class nde extends x2{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let c=e*a;for(let u=c+a;c!==u;c+=4)Ro.slerpFlat(s,0,o,c-a,o,c,l);return s}}class cx extends tu{InterpolantFactoryMethodLinear(e){return new nde(this.times,this.values,this.getValueSize(),e)}}cx.prototype.ValueTypeName="quaternion";cx.prototype.DefaultInterpolation=Gw;cx.prototype.InterpolantFactoryMethodSmooth=void 0;class Ng extends tu{}Ng.prototype.ValueTypeName="string";Ng.prototype.ValueBufferType=Array;Ng.prototype.DefaultInterpolation=Ww;Ng.prototype.InterpolantFactoryMethodLinear=void 0;Ng.prototype.InterpolantFactoryMethodSmooth=void 0;class iS extends tu{}iS.prototype.ValueTypeName="vector";class sS{constructor(e,n=-1,r,i=vR){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=ll(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(ost(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(tu.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=Que(l);l=lF(l,1,u),c=lF(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new rS(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let f=i[d];f||(i[d]=f=[]),f.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,f,h,p,v){if(h.length!==0){const g=[],m=[];D6(h,g,m,p),g.length!==0&&v.push(new d(f,g,m))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const h={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let v=0;v<f[p].morphTargets.length;v++)h[f[p].morphTargets[v]]=-1;for(const v in h){const g=[],m=[];for(let y=0;y!==f[p].morphTargets.length;++y){const x=f[p];g.push(x.time),m.push(x.morphTarget===v?1:0)}i.push(new rS(".morphTargetInfluence["+v+"]",g,m))}l=h.length*o}else{const h=".bones["+n[d].name+"]";r(iS,h+".position",f,"pos",i),r(cx,h+".quaternion",f,"rot",i),r(iS,h+".scale",f,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function sst(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rS;case"vector":case"vector2":case"vector3":case"vector4":return iS;case"color":return O6;case"quaternion":return cx;case"bool":case"boolean":return Pg;case"string":return Ng}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function ost(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=sst(t.type);if(t.times===void 0){const n=[],r=[];D6(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Wd={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class F6{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const h=c[d],p=c[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return p}return null}}}const rde=new F6;class La{constructor(e){this.manager=e!==void 0?e:rde,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}La.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ed={};class ast extends Error{constructor(e,n){super(e),this.response=n}}class af extends La{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Wd.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Ed[e]!==void 0){Ed[e].push({onLoad:n,onProgress:r,onError:i});return}Ed[e]=[],Ed[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Ed[e],d=c.body.getReader(),f=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),h=f?parseInt(f):0,p=h!==0;let v=0;const g=new ReadableStream({start(m){y();function y(){d.read().then(({done:x,value:S})=>{if(x)m.close();else{v+=S.byteLength;const _=new ProgressEvent("progress",{lengthComputable:p,loaded:v,total:h});for(let C=0,T=u.length;C<T;C++){const A=u[C];A.onProgress&&A.onProgress(_)}m.enqueue(S),y()}})}}});return new Response(g)}else throw new ast(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),f=d&&d[1]?d[1].toLowerCase():void 0,h=new TextDecoder(f);return c.arrayBuffer().then(p=>h.decode(p))}}}).then(c=>{Wd.add(e,c);const u=Ed[e];delete Ed[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onLoad&&h.onLoad(c)}}).catch(c=>{const u=Ed[e];if(u===void 0)throw this.manager.itemError(e),c;delete Ed[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onError&&h.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class lst extends La{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new af(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=sS.parse(e[r]);n.push(i)}return n}}class cst extends La{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new AR,l=new af(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(f){const h=s.parse(f,!0);o[d]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},c+=1,c===6&&(h.mipmapCount===1&&(a.minFilter=Mr),a.image=o,a.format=h.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)u(d);else l.load(e,function(d){const f=s.parse(d,!0);if(f.isCubemap){const h=f.mipmaps.length/f.mipmapCount;for(let p=0;p<h;p++){o[p]={mipmaps:[]};for(let v=0;v<f.mipmapCount;v++)o[p].mipmaps.push(f.mipmaps[p*f.mipmapCount+v]),o[p].format=f.format,o[p].width=f.width,o[p].height=f.height}a.image=o}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=Mr),a.format=f.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class oS extends La{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Wd.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=Kw("img");function l(){u(),Wd.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class ide extends La{constructor(e){super(e)}load(e,n,r,i){const s=new h2;s.colorSpace=ps;const o=new oS(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class B6 extends La{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Pm,a=new af(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:To,o.wrapT=c.wrapT!==void 0?c.wrapT:To,o.magFilter=c.magFilter!==void 0?c.magFilter:Mr,o.minFilter=c.minFilter!==void 0?c.minFilter:Mr,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Ih),c.mipmapCount===1&&(o.minFilter=Mr),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c)},r,i),o}}class ust extends La{constructor(e){super(e)}load(e,n,r,i){const s=new di,o=new oS(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class Jh extends xr{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new zt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class sde extends Jh{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(xr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new zt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const bD=new _n,CK=new me,TK=new me;class U6{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new lt(512,512),this.map=null,this.mapPass=null,this.matrix=new _n,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new p2,this._frameExtents=new lt(1,1),this._viewportCount=1,this._viewports=[new rr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;CK.setFromMatrixPosition(e.matrixWorld),n.position.copy(CK),TK.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(TK),n.updateMatrixWorld(),bD.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bD),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(bD)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class dst extends U6{constructor(){super(new Ai(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=vy*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ode extends Jh{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(xr.DEFAULT_UP),this.updateMatrix(),this.target=new xr,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new dst}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const EK=new _n,I1=new me,wD=new me;class fst extends U6{constructor(){super(new Ai(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new lt(4,2),this._viewportCount=6,this._viewports=[new rr(2,1,1,1),new rr(0,1,1,1),new rr(3,1,1,1),new rr(1,1,1,1),new rr(3,0,1,1),new rr(1,0,1,1)],this._cubeDirections=[new me(1,0,0),new me(-1,0,0),new me(0,0,1),new me(0,0,-1),new me(0,1,0),new me(0,-1,0)],this._cubeUps=[new me(0,1,0),new me(0,1,0),new me(0,1,0),new me(0,1,0),new me(0,0,1),new me(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),I1.setFromMatrixPosition(e.matrixWorld),r.position.copy(I1),wD.copy(r.position),wD.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(wD),r.updateMatrixWorld(),i.makeTranslation(-I1.x,-I1.y,-I1.z),EK.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(EK)}}class ade extends Jh{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new fst}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class hst extends U6{constructor(){super(new Vd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class lde extends Jh{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(xr.DEFAULT_UP),this.updateMatrix(),this.target=new xr,this.shadow=new hst}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class cde extends Jh{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class ude extends Jh{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class dde{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new me)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class fde extends Jh{constructor(e=new dde,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class VR extends La{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new af(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=VR.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new zt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new zt().setHex(o.value);break;case"v2":i.uniforms[s].value=new lt().fromArray(o.value);break;case"v3":i.uniforms[s].value=new me().fromArray(o.value);break;case"v4":i.uniforms[s].value=new rr().fromArray(o.value);break;case"m3":i.uniforms[s].value=new On().fromArray(o.value);break;case"m4":i.uniforms[s].value=new _n().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new lt().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new lt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:Wue,SpriteMaterial:C6,RawShaderMaterial:Gue,ShaderMaterial:sc,PointsMaterial:E6,MeshPhysicalMaterial:Hue,MeshStandardMaterial:$6,MeshPhongMaterial:jue,MeshToonMaterial:Xue,MeshNormalMaterial:que,MeshLambertMaterial:Yue,MeshDepthMaterial:SR,MeshDistanceMaterial:_R,MeshBasicMaterial:mf,MeshMatcapMaterial:Kue,LineDashedMaterial:Zue,LineBasicMaterial:sa,Material:ro};return new n[e]}}class cF{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class WR extends Ln{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class hde extends La{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new af(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(h,p){if(n[p]!==void 0)return n[p];const g=h.interleavedBuffers[p],m=s(h,g.buffer),y=fv(g.type,m),x=new ER(y,g.stride);return x.uuid=g.uuid,n[p]=x,x}function s(h,p){if(r[p]!==void 0)return r[p];const g=h.arrayBuffers[p],m=new Uint32Array(g).buffer;return r[p]=m,m}const o=e.isInstancedBufferGeometry?new WR:new Ln,a=e.data.index;if(a!==void 0){const h=fv(a.type,a.array);o.setIndex(new kr(h,1))}const l=e.data.attributes;for(const h in l){const p=l[h];let v;if(p.isInterleavedBufferAttribute){const g=i(e.data,p.data);v=new il(g,p.itemSize,p.offset,p.normalized)}else{const g=fv(p.type,p.array),m=p.isInstancedBufferAttribute?ig:kr;v=new m(g,p.itemSize,p.normalized)}p.name!==void 0&&(v.name=p.name),p.usage!==void 0&&v.setUsage(p.usage),o.setAttribute(h,v)}const c=e.data.morphAttributes;if(c)for(const h in c){const p=c[h],v=[];for(let g=0,m=p.length;g<m;g++){const y=p[g];let x;if(y.isInterleavedBufferAttribute){const S=i(e.data,y.data);x=new il(S,y.itemSize,y.offset,y.normalized)}else{const S=fv(y.type,y.array);x=new kr(S,y.itemSize,y.normalized)}y.name!==void 0&&(x.name=y.name),v.push(x)}o.morphAttributes[h]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let h=0,p=d.length;h!==p;++h){const v=d[h];o.addGroup(v.start,v.count,v.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const h=new me;f.center!==void 0&&h.fromArray(f.center),o.boundingSphere=new bs(h,f.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class pst extends La{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?cF.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new af(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?cF.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new af(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),n!==void 0){let d=!1;for(const f in o)if(o[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Nm().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new MR().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new hde;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in _K?a=_K[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new VR;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=sS.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:fv(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new F6(n);s=new oS(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],f=d.url;if(Array.isArray(f)){const h=[];for(let p=0,v=f.length;p<v;p++){const g=f[p],m=a(g);m!==null&&(m instanceof HTMLImageElement?h.push(m):h.push(new Pm(m.data,m.width,m.height)))}i[d.uuid]=new pm(h)}else{const h=a(d.url);i[d.uuid]=new pm(h)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:fv(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new oS(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d],p=await s(h);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new Pm(p.data,p.width,p.height)))}r[l.uuid]=new pm(u)}else{const u=await s(l.url);r[l.uuid]=new pm(u)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new h2,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Pm:u=new di,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,mst)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],MK),u.wrapT=r(a.wrap[1],MK)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,AK)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,AK)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,n,r,i,s){let o;function a(f){return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),n[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const h=[];for(let p=0,v=f.length;p<v;p++){const g=f[p];r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),h.push(r[g])}return h}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function c(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let u,d;switch(e.type){case"Scene":o=new Jw,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new zt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new TR(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new CR(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Ai(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Vd(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new cde(e.color,e.intensity);break;case"DirectionalLight":o=new lde(e.color,e.intensity);break;case"PointLight":o=new ade(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ude(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new ode(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new sde(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new fde().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),o=new kue(u,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),o=new ci(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const f=e.count,h=e.instanceMatrix,p=e.instanceColor;o=new Iue(u,d,f),o.instanceMatrix=new ig(new Float32Array(h.array),16),p!==void 0&&(o.instanceColor=new ig(new Float32Array(p.array),p.itemSize));break;case"BatchedMesh":u=a(e.geometry),d=l(e.material),o=new Rue(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(v=>{const g=new xs;g.min.fromArray(v.boxMin),g.max.fromArray(v.boxMax);const m=new bs;return m.radius=v.sphereRadius,m.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:g,sphereInitialized:v.sphereInitialized,sphere:m}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new Aue;break;case"Line":o=new Rh(a(e.geometry),l(e.material));break;case"LineLoop":o=new Pue(a(e.geometry),l(e.material));break;case"LineSegments":o=new cd(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Nue(a(e.geometry),l(e.material));break;case"Sprite":o=new Mue(l(e.material));break;case"Group":o=new mv;break;case"Bone":o=new T6;break;default:o=new xr}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let h=0;h<f.length;h++)o.add(this.parseObject(f[h],n,r,i,s))}if(e.animations!==void 0){const f=e.animations;for(let h=0;h<f.length;h++){const p=f[h];o.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const f=e.levels;for(let h=0;h<f.length;h++){const p=f[h],v=o.getObjectByProperty("uuid",p.object);v!==void 0&&o.addLevel(v,p.distance,p.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const mst={UVMapping:mR,CubeReflectionMapping:Qu,CubeRefractionMapping:kh,EquirectangularReflectionMapping:my,EquirectangularRefractionMapping:Uw,CubeUVReflectionMapping:ox},MK={RepeatWrapping:zw,ClampToEdgeWrapping:To,MirroredRepeatWrapping:Vw},AK={NearestFilter:Vi,NearestMipmapNearestFilter:$A,NearestMipmapLinearFilter:_b,LinearFilter:Mr,LinearMipmapNearestFilter:r6,LinearMipmapLinearFilter:Ih};class gst extends La{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Wd.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{n&&n(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Wd.add(e,c),n&&n(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),Wd.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Wd.add(e,l),s.manager.itemStart(e)}}let rE;class z6{static getContext(){return rE===void 0&&(rE=new(window.AudioContext||window.webkitAudioContext)),rE}static setContext(e){rE=e}}class vst extends La{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new af(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);z6.getContext().decodeAudioData(c,function(d){n(d)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const kK=new _n,IK=new _n,Np=new _n;class yst{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ai,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ai,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Np.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(Im*n.fov*.5)/n.zoom;let a,l;IK.elements[12]=-i,kK.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,Np.elements[0]=2*n.near/(l-a),Np.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Np),a=-o*n.aspect-s,l=o*n.aspect-s,Np.elements[0]=2*n.near/(l-a),Np.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Np)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(IK),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(kK)}}class V6{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=RK(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=RK();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function RK(){return(typeof performance>"u"?Date:performance).now()}const $p=new me,PK=new Ro,xst=new me,Dp=new me;class bst extends xr{constructor(){super(),this.type="AudioListener",this.context=z6.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new V6}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose($p,PK,xst),Dp.set(0,0,-1).applyQuaternion(PK),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime($p.x,i),n.positionY.linearRampToValueAtTime($p.y,i),n.positionZ.linearRampToValueAtTime($p.z,i),n.forwardX.linearRampToValueAtTime(Dp.x,i),n.forwardY.linearRampToValueAtTime(Dp.y,i),n.forwardZ.linearRampToValueAtTime(Dp.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition($p.x,$p.y,$p.z),n.setOrientation(Dp.x,Dp.y,Dp.z,r.x,r.y,r.z)}}class pde extends xr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Lp=new me,NK=new Ro,wst=new me,Op=new me;class Sst extends pde{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Lp,NK,wst),Op.set(0,0,1).applyQuaternion(NK);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Lp.x,r),n.positionY.linearRampToValueAtTime(Lp.y,r),n.positionZ.linearRampToValueAtTime(Lp.z,r),n.orientationX.linearRampToValueAtTime(Op.x,r),n.orientationY.linearRampToValueAtTime(Op.y,r),n.orientationZ.linearRampToValueAtTime(Op.z,r)}else n.setPosition(Lp.x,Lp.y,Lp.z),n.setOrientation(Op.x,Op.y,Op.z)}}class _st{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class mde{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){Ro.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;Ro.multiplyQuaternionsFlat(e,o,e,n,e,r),Ro.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const W6="\\[\\]\\.:\\/",Cst=new RegExp("["+W6+"]","g"),G6="[^"+W6+"]",Tst="[^"+W6.replace("\\.","")+"]",Est=/((?:WC+[\/:])*)/.source.replace("WC",G6),Mst=/(WCOD+)?/.source.replace("WCOD",Tst),Ast=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",G6),kst=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",G6),Ist=new RegExp("^"+Est+Mst+Ast+kst+"$"),Rst=["material","materials","bones","map"];class Pst{constructor(e,n,r){const i=r||dr.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class dr{constructor(e,n,r){this.path=n,this.parsedPath=r||dr.parseTrackName(n),this.node=dr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new dr.Composite(e,n,r):new dr(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Cst,"")}static parseTrackName(e){const n=Ist.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Rst.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=dr.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}dr.Composite=Pst;dr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};dr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};dr.prototype.GetterByBindingType=[dr.prototype._getValue_direct,dr.prototype._getValue_array,dr.prototype._getValue_arrayElement,dr.prototype._getValue_toArray];dr.prototype.SetterByBindingTypeAndVersioning=[[dr.prototype._setValue_direct,dr.prototype._setValue_direct_setNeedsUpdate,dr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[dr.prototype._setValue_array,dr.prototype._setValue_array_setNeedsUpdate,dr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[dr.prototype._setValue_arrayElement,dr.prototype._setValue_arrayElement_setNeedsUpdate,dr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[dr.prototype._setValue_fromArray,dr.prototype._setValue_fromArray_setNeedsUpdate,dr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Nst{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ll(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const f=arguments[u],h=f.uuid;let p=n[h];if(p===void 0){p=l++,n[h]=p,e.push(f);for(let v=0,g=o;v!==g;++v)s[v].push(new dr(f,r[v],i[v]))}else if(p<c){a=e[p];const v=--c,g=e[v];n[g.uuid]=p,e[p]=g,n[h]=v,e[v]=f;for(let m=0,y=o;m!==y;++m){const x=s[m],S=x[v];let _=x[p];x[p]=S,_===void 0&&(_=new dr(f,r[m],i[m])),x[v]=_}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const d=s++,f=e[d];n[f.uuid]=u,e[u]=f,n[c]=d,e[d]=l;for(let h=0,p=i;h!==p;++h){const v=r[h],g=v[d],m=v[u];v[u]=g,v[d]=m}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=n[u];if(d!==void 0)if(delete n[u],d<s){const f=--s,h=e[f],p=--o,v=e[p];n[h.uuid]=d,e[d]=h,n[v.uuid]=f,e[f]=v,e.pop();for(let g=0,m=i;g!==m;++g){const y=r[g],x=y[f],S=y[p];y[d]=x,y[f]=S,y.pop()}}else{const f=--o,h=e[f];f>0&&(n[h.uuid]=d),e[d]=h,e.pop();for(let p=0,v=i;p!==v;++p){const g=r[p];g[d]=g[f],g.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(d);for(let f=u,h=l.length;f!==h;++f){const p=l[f];d[f]=new dr(p,e,n)}return d}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class gde{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:fm,endingEnd:fm};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Qce,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case f6:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case vR:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===eue;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===Jce){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=hm,i.endingEnd=hm):(e?i.endingStart=this.zeroSlopeAtStart?hm:fm:i.endingStart=Hw,n?i.endingEnd=this.zeroSlopeAtEnd?hm:fm:i.endingEnd=Hw)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const $st=new Float32Array(1);class Dst extends ld{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const f=i[d],h=f.name;let p=u[h];if(p!==void 0)++p.referenceCount,o[d]=p;else{if(p=o[d],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,h));continue}const v=n&&n._propertyBindings[d].binding.parsedPath;p=new mde(dr.create(r,h,v),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,h),o[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new L6(new Float32Array(2),new Float32Array(2),1,$st),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?sS.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=vR),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new gde(this,o,n,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?sS.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,n[u]=d,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class H6{constructor(e){this.value=e}clone(){return new H6(this.value.clone===void 0?this.value:this.value.clone())}}let Lst=0;class Ost extends ld{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Lst++}),this.name="",this.usage=Yw,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const s=Array.isArray(n[r])?n[r]:[n[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class FA extends ER{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Fst{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class j6{constructor(e,n,r=0,i=1/0){this.ray=new Ig(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new Rm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return uF(e,this,r,n),r.sort($K),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)uF(e[i],this,r,n);return r.sort($K),r}}function $K(t,e){return t.distance-e.distance}function uF(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)uF(i[s],e,n,!0)}}class dF{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Mi(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Bst{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const DK=new lt;class Ust{constructor(e=new lt(1/0,1/0),n=new lt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=DK.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,DK).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const LK=new me,iE=new me;class vde{constructor(e=new me,n=new me){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){LK.subVectors(e,this.start),iE.subVectors(this.end,this.start);const r=iE.dot(iE);let s=iE.dot(LK)/r;return n&&(s=Mi(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const OK=new me;class zst extends xr{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Ln,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new Zt(i,3));const s=new sa({fog:!1,toneMapped:!1});this.cone=new cd(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),OK.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(OK),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ff=new me,sE=new _n,SD=new _n;class Vst extends cd{constructor(e){const n=yde(e),r=new Ln,i=[],s=[],o=new zt(0,0,1),a=new zt(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Zt(i,3)),r.setAttribute("color",new Zt(s,3));const l=new sa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");SD.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(sE.multiplyMatrices(SD,a.matrixWorld),Ff.setFromMatrixPosition(sE),i.setXYZ(o,Ff.x,Ff.y,Ff.z),sE.multiplyMatrices(SD,a.parent.matrixWorld),Ff.setFromMatrixPosition(sE),i.setXYZ(o+1,Ff.x,Ff.y,Ff.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function yde(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,yde(t.children[n]));return e}class Wst extends ci{constructor(e,n,r){const i=new y2(n,4,2),s=new mf({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Gst=new me,FK=new zt,BK=new zt;class Hst extends xr{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new v2(n);i.rotateY(Math.PI*.5),this.material=new mf({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new kr(o,3)),this.add(new ci(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");FK.copy(this.light.color),BK.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?FK:BK;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Gst.setFromMatrixPosition(this.light.matrixWorld).negate())}}class jst extends cd{constructor(e=10,n=10,r=4473924,i=8947848){r=new zt(r),i=new zt(i);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let f=0,h=0,p=-a;f<=n;f++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const v=f===s?r:i;v.toArray(c,h),h+=3,v.toArray(c,h),h+=3,v.toArray(c,h),h+=3,v.toArray(c,h),h+=3}const u=new Ln;u.setAttribute("position",new Zt(l,3)),u.setAttribute("color",new Zt(c,3));const d=new sa({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Xst extends cd{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new zt(s),o=new zt(o);const a=[],l=[];if(n>1)for(let d=0;d<n;d++){const f=d/n*(Math.PI*2),h=Math.sin(f)*e,p=Math.cos(f)*e;a.push(0,0,0),a.push(h,0,p);const v=d&1?s:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let d=0;d<r;d++){const f=d&1?s:o,h=e-e/r*d;for(let p=0;p<i;p++){let v=p/i*(Math.PI*2),g=Math.sin(v)*h,m=Math.cos(v)*h;a.push(g,0,m),l.push(f.r,f.g,f.b),v=(p+1)/i*(Math.PI*2),g=Math.sin(v)*h,m=Math.cos(v)*h,a.push(g,0,m),l.push(f.r,f.g,f.b)}}const c=new Ln;c.setAttribute("position",new Zt(a,3)),c.setAttribute("color",new Zt(l,3));const u=new sa({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const UK=new me,oE=new me,zK=new me;class qst extends xr{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Ln;i.setAttribute("position",new Zt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new sa({fog:!1,toneMapped:!1});this.lightPlane=new Rh(i,s),this.add(this.lightPlane),i=new Ln,i.setAttribute("position",new Zt([0,0,0,0,0,1],3)),this.targetLine=new Rh(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),UK.setFromMatrixPosition(this.light.matrixWorld),oE.setFromMatrixPosition(this.light.target.matrixWorld),zK.subVectors(oE,UK),this.lightPlane.lookAt(oE),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(oE),this.targetLine.scale.z=zK.length()}}const aE=new me,Si=new f2;class Yst extends cd{constructor(e){const n=new Ln,r=new sa({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,v){l(p),l(v)}function l(p){i.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(i.length/3-1)}n.setAttribute("position",new Zt(i,3)),n.setAttribute("color",new Zt(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new zt(16755200),u=new zt(16711680),d=new zt(43775),f=new zt(16777215),h=new zt(3355443);this.setColors(c,u,d,f,h)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Si.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ui("c",n,e,Si,0,0,-1),Ui("t",n,e,Si,0,0,1),Ui("n1",n,e,Si,-r,-i,-1),Ui("n2",n,e,Si,r,-i,-1),Ui("n3",n,e,Si,-r,i,-1),Ui("n4",n,e,Si,r,i,-1),Ui("f1",n,e,Si,-r,-i,1),Ui("f2",n,e,Si,r,-i,1),Ui("f3",n,e,Si,-r,i,1),Ui("f4",n,e,Si,r,i,1),Ui("u1",n,e,Si,r*.7,i*1.1,-1),Ui("u2",n,e,Si,-r*.7,i*1.1,-1),Ui("u3",n,e,Si,0,i*2,-1),Ui("cf1",n,e,Si,-r,0,1),Ui("cf2",n,e,Si,r,0,1),Ui("cf3",n,e,Si,0,-i,1),Ui("cf4",n,e,Si,0,i,1),Ui("cn1",n,e,Si,-r,0,-1),Ui("cn2",n,e,Si,r,0,-1),Ui("cn3",n,e,Si,0,-i,-1),Ui("cn4",n,e,Si,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ui(t,e,n,r,i,s,o){aE.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],aE.x,aE.y,aE.z)}}const lE=new xs;class Kst extends cd{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Ln;s.setIndex(new kr(r,1)),s.setAttribute("position",new kr(i,3)),super(s,new sa({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&lE.setFromObject(this.object),lE.isEmpty())return;const n=lE.min,r=lE.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Zst extends cd{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Ln;s.setIndex(new kr(r,1)),s.setAttribute("position",new Zt(i,3)),super(s,new sa({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Jst extends Rh{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Ln;o.setAttribute("position",new Zt(s,3)),o.computeBoundingSphere(),super(o,new sa({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Ln;l.setAttribute("position",new Zt(a,3)),l.computeBoundingSphere(),this.add(new ci(l,new mf({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const VK=new me;let cE,_D;class Qst extends xr{constructor(e=new me(0,0,1),n=new me(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",cE===void 0&&(cE=new Ln,cE.setAttribute("position",new Zt([0,0,0,0,1,0],3)),_D=new lx(0,.5,1,5,1),_D.translate(0,-.5,0)),this.position.copy(n),this.line=new Rh(cE,new sa({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ci(_D,new mf({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{VK.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(VK,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class eot extends cd{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Ln;i.setAttribute("position",new Zt(n,3)),i.setAttribute("color",new Zt(r,3));const s=new sa({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new zt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tot{constructor(){this.type="ShapePath",this.color=new zt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new Qw,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(m){const y=[];for(let x=0,S=m.length;x<S;x++){const _=m[x],C=new Nm;C.curves=_.curves,y.push(C)}return y}function r(m,y){const x=y.length;let S=!1;for(let _=x-1,C=0;C<x;_=C++){let T=y[_],A=y[C],M=A.x-T.x,E=A.y-T.y;if(Math.abs(E)>Number.EPSILON){if(E<0&&(T=y[C],M=-M,A=y[_],E=-E),m.y<T.y||m.y>A.y)continue;if(m.y===T.y){if(m.x===T.x)return!0}else{const P=E*(m.x-T.x)-M*(m.y-T.y);if(P===0)return!0;if(P<0)continue;S=!S}}else{if(m.y!==T.y)continue;if(A.x<=m.x&&m.x<=T.x||T.x<=m.x&&m.x<=A.x)return!0}}return S}const i=zu.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Nm,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const d=[],f=[];let h=[],p=0,v;f[p]=void 0,h[p]=[];for(let m=0,y=s.length;m<y;m++)a=s[m],v=a.getPoints(),o=i(v),o=e?!o:o,o?(!u&&f[p]&&p++,f[p]={s:new Nm,p:v},f[p].s.curves=a.curves,u&&p++,h[p]=[]):h[p].push({h:a,p:v[0]});if(!f[0])return n(s);if(f.length>1){let m=!1,y=0;for(let x=0,S=f.length;x<S;x++)d[x]=[];for(let x=0,S=f.length;x<S;x++){const _=h[x];for(let C=0;C<_.length;C++){const T=_[C];let A=!0;for(let M=0;M<f.length;M++)r(T.p,f[M].p)&&(x!==M&&y++,A?(A=!1,d[M].push(T)):m=!0);A&&d[x].push(T)}}y>0&&m===!1&&(h=d)}let g;for(let m=0,y=f.length;m<y;m++){l=f[m].s,c.push(l),g=h[m];for(let x=0,S=g.length;x<S;x++)l.holes.push(g[x].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:sx}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=sx);const not=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:n6,AddEquation:qf,AddOperation:Fce,AdditiveAnimationBlendMode:f6,AdditiveBlending:_4,AgXToneMapping:Wce,AlphaFormat:Xce,AlwaysCompare:cue,AlwaysDepth:Rce,AlwaysStencilFunc:eF,AmbientLight:cde,AnimationAction:gde,AnimationClip:sS,AnimationLoader:lst,AnimationMixer:Dst,AnimationObjectGroup:Nst,AnimationUtils:ist,ArcCurve:$ue,ArrayCamera:Cue,ArrowHelper:Qst,AttachedBindMode:A4,Audio:pde,AudioAnalyser:_st,AudioContext:z6,AudioListener:bst,AudioLoader:vst,AxesHelper:eot,BackSide:rs,BasicDepthPacking:tue,BasicShadowMap:hce,BatchedMesh:Rue,Bone:T6,BooleanKeyframeTrack:Pg,Box2:Ust,Box3:xs,Box3Helper:Zst,BoxGeometry:Rg,BoxHelper:Kst,BufferAttribute:kr,BufferGeometry:Ln,BufferGeometryLoader:hde,ByteType:Hce,Cache:Wd,Camera:f2,CameraHelper:Yst,CanvasTexture:Ait,CapsuleGeometry:IR,CatmullRomCurve3:Due,CineonToneMapping:zce,CircleGeometry:RR,ClampToEdgeWrapping:To,Clock:V6,Color:zt,ColorKeyframeTrack:O6,ColorManagement:Er,CompressedArrayTexture:Eit,CompressedCubeTexture:Mit,CompressedTexture:AR,CompressedTextureLoader:cst,ConeGeometry:PR,ConstantAlphaFactor:Ace,ConstantColorFactor:Ece,CubeCamera:gue,CubeReflectionMapping:Qu,CubeRefractionMapping:kh,CubeTexture:h2,CubeTextureLoader:ide,CubeUVReflectionMapping:ox,CubicBezierCurve:A6,CubicBezierCurve3:Lue,CubicInterpolant:ede,CullFaceBack:S4,CullFaceFront:fce,CullFaceFrontBack:mJe,CullFaceNone:dce,Curve:eu,CurvePath:Fue,CustomBlending:pce,CustomToneMapping:Vce,CylinderGeometry:lx,Cylindrical:Bst,Data3DTexture:y6,DataArrayTexture:xR,DataTexture:Pm,DataTextureLoader:B6,DataUtils:mm,DecrementStencilOp:MJe,DecrementWrapStencilOp:kJe,DefaultLoadingManager:rde,DepthFormat:mh,DepthStencilFormat:rg,DepthTexture:bR,DetachedBindMode:Gce,DirectionalLight:lde,DirectionalLightHelper:qst,DiscreteInterpolant:tde,DisplayP3ColorSpace:yR,DodecahedronGeometry:NR,DoubleSide:Qa,DstAlphaFactor:wce,DstColorFactor:_ce,DynamicCopyUsage:GJe,DynamicDrawUsage:FJe,DynamicReadUsage:zJe,EdgesGeometry:Bue,EllipseCurve:kR,EqualCompare:sue,EqualDepth:Nce,EqualStencilFunc:NJe,EquirectangularReflectionMapping:my,EquirectangularRefractionMapping:Uw,Euler:d2,EventDispatcher:ld,ExtrudeGeometry:DR,FileLoader:af,Float16BufferAttribute:kQe,Float32BufferAttribute:Zt,Float64BufferAttribute:IQe,FloatType:Ps,Fog:TR,FogExp2:CR,FramebufferTexture:Tit,FrontSide:Ju,Frustum:p2,GLBufferAttribute:Fst,GLSL1:jJe,GLSL3:tF,GreaterCompare:oue,GreaterDepth:Dce,GreaterEqualCompare:lue,GreaterEqualDepth:$ce,GreaterEqualStencilFunc:OJe,GreaterStencilFunc:DJe,GridHelper:jst,Group:mv,HalfFloatType:Ao,HemisphereLight:sde,HemisphereLightHelper:Hst,IcosahedronGeometry:g2,ImageBitmapLoader:gst,ImageLoader:oS,ImageUtils:v6,IncrementStencilOp:EJe,IncrementWrapStencilOp:AJe,InstancedBufferAttribute:ig,InstancedBufferGeometry:WR,InstancedInterleavedBuffer:FA,InstancedMesh:Iue,Int16BufferAttribute:MQe,Int32BufferAttribute:AQe,Int8BufferAttribute:CQe,IntType:i6,InterleavedBuffer:ER,InterleavedBufferAttribute:il,Interpolant:x2,InterpolateDiscrete:Ww,InterpolateLinear:Gw,InterpolateSmooth:fM,InvertStencilOp:IJe,KeepStencilOp:Kp,KeyframeTrack:tu,LOD:Aue,LatheGeometry:m2,Layers:Rm,LessCompare:iue,LessDepth:Pce,LessEqualCompare:m6,LessEqualDepth:Bw,LessEqualStencilFunc:$Je,LessStencilFunc:PJe,Light:Jh,LightProbe:fde,Line:Rh,Line3:vde,LineBasicMaterial:sa,LineCurve:k6,LineCurve3:Oue,LineDashedMaterial:Zue,LineLoop:Pue,LineSegments:cd,LinearDisplayP3ColorSpace:u2,LinearEncoding:h6,LinearFilter:Mr,LinearInterpolant:L6,LinearMipMapLinearFilter:bJe,LinearMipMapNearestFilter:xJe,LinearMipmapLinearFilter:Ih,LinearMipmapNearestFilter:r6,LinearSRGBColorSpace:ed,LinearToneMapping:Bce,LinearTransfer:jw,Loader:La,LoaderUtils:cF,LoadingManager:F6,LoopOnce:Jce,LoopPingPong:eue,LoopRepeat:Qce,LuminanceAlphaFormat:Yce,LuminanceFormat:qce,MOUSE:qp,Material:ro,MaterialLoader:VR,MathUtils:uue,Matrix3:On,Matrix4:_n,MaxEquation:M4,Mesh:ci,MeshBasicMaterial:mf,MeshDepthMaterial:SR,MeshDistanceMaterial:_R,MeshLambertMaterial:Yue,MeshMatcapMaterial:Kue,MeshNormalMaterial:que,MeshPhongMaterial:jue,MeshPhysicalMaterial:Hue,MeshStandardMaterial:$6,MeshToonMaterial:Xue,MinEquation:E4,MirroredRepeatWrapping:Vw,MixOperation:Oce,MultiplyBlending:T4,MultiplyOperation:c2,NearestFilter:Vi,NearestMipMapLinearFilter:yJe,NearestMipMapNearestFilter:vJe,NearestMipmapLinearFilter:_b,NearestMipmapNearestFilter:$A,NeverCompare:rue,NeverDepth:Ice,NeverStencilFunc:RJe,NoBlending:Yd,NoColorSpace:el,NoToneMapping:Bu,NormalAnimationBlendMode:vR,NormalBlending:km,NotEqualCompare:aue,NotEqualDepth:Lce,NotEqualStencilFunc:LJe,NumberKeyframeTrack:rS,Object3D:xr,ObjectLoader:pst,ObjectSpaceNormalMap:nue,OctahedronGeometry:v2,OneFactor:yce,OneMinusConstantAlphaFactor:kce,OneMinusConstantColorFactor:Mce,OneMinusDstAlphaFactor:Sce,OneMinusDstColorFactor:Cce,OneMinusSrcAlphaFactor:NA,OneMinusSrcColorFactor:bce,OrthographicCamera:Vd,P3Primaries:qw,PCFShadowMap:pR,PCFSoftShadowMap:Sb,PMREMGenerator:rF,Path:Qw,PerspectiveCamera:Ai,Plane:Id,PlaneGeometry:Kh,PlaneHelper:Jst,PointLight:ade,PointLightHelper:Wst,Points:Nue,PointsMaterial:E6,PolarGridHelper:Xst,PolyhedronGeometry:Zh,PositionalAudio:Sst,PropertyBinding:dr,PropertyMixer:mde,QuadraticBezierCurve:I6,QuadraticBezierCurve3:R6,Quaternion:Ro,QuaternionKeyframeTrack:cx,QuaternionLinearInterpolant:nde,RED_GREEN_RGTC2_Format:J4,RED_RGTC1_Format:Zce,REVISION:sx,RGBADepthPacking:p6,RGBAFormat:Eo,RGBAIntegerFormat:u6,RGBA_ASTC_10x10_Format:j4,RGBA_ASTC_10x5_Format:W4,RGBA_ASTC_10x6_Format:G4,RGBA_ASTC_10x8_Format:H4,RGBA_ASTC_12x10_Format:X4,RGBA_ASTC_12x12_Format:q4,RGBA_ASTC_4x4_Format:D4,RGBA_ASTC_5x4_Format:L4,RGBA_ASTC_5x5_Format:O4,RGBA_ASTC_6x5_Format:F4,RGBA_ASTC_6x6_Format:B4,RGBA_ASTC_8x5_Format:U4,RGBA_ASTC_8x6_Format:z4,RGBA_ASTC_8x8_Format:V4,RGBA_BPTC_Format:dM,RGBA_ETC2_EAC_Format:$4,RGBA_PVRTC_2BPPV1_Format:P4,RGBA_PVRTC_4BPPV1_Format:R4,RGBA_S3TC_DXT1_Format:lM,RGBA_S3TC_DXT3_Format:cM,RGBA_S3TC_DXT5_Format:uM,RGB_BPTC_SIGNED_Format:Y4,RGB_BPTC_UNSIGNED_Format:K4,RGB_ETC1_Format:d6,RGB_ETC2_Format:N4,RGB_PVRTC_2BPPV1_Format:I4,RGB_PVRTC_4BPPV1_Format:k4,RGB_S3TC_DXT1_Format:aM,RGFormat:Kce,RGIntegerFormat:c6,RawShaderMaterial:Gue,Ray:Ig,Raycaster:j6,Rec709Primaries:Xw,RectAreaLight:ude,RedFormat:a6,RedIntegerFormat:l6,ReinhardToneMapping:Uce,RenderTarget:hue,RepeatWrapping:zw,ReplaceStencilOp:TJe,ReverseSubtractEquation:gce,RingGeometry:LR,SIGNED_RED_GREEN_RGTC2_Format:Q4,SIGNED_RED_RGTC1_Format:Z4,SRGBColorSpace:ps,SRGBTransfer:Hr,Scene:Jw,ShaderChunk:Dn,ShaderLib:kc,ShaderMaterial:sc,ShadowMaterial:Wue,Shape:Nm,ShapeGeometry:OR,ShapePath:tot,ShapeUtils:zu,ShortType:jce,Skeleton:MR,SkeletonHelper:Vst,SkinnedMesh:kue,Source:pm,Sphere:bs,SphereGeometry:y2,Spherical:dF,SphericalHarmonics3:dde,SplineCurve:P6,SpotLight:ode,SpotLightHelper:zst,Sprite:Mue,SpriteMaterial:C6,SrcAlphaFactor:PA,SrcAlphaSaturateFactor:Tce,SrcColorFactor:xce,StaticCopyUsage:WJe,StaticDrawUsage:Yw,StaticReadUsage:UJe,StereoCamera:yst,StreamCopyUsage:HJe,StreamDrawUsage:BJe,StreamReadUsage:VJe,StringKeyframeTrack:Ng,SubtractEquation:mce,SubtractiveBlending:C4,TOUCH:Yp,TangentSpaceNormalMap:Yh,TetrahedronGeometry:FR,Texture:di,TextureLoader:ust,TorusGeometry:BR,TorusKnotGeometry:UR,Triangle:ya,TriangleFanDrawMode:_Je,TriangleStripDrawMode:SJe,TrianglesDrawMode:wJe,TubeGeometry:zR,TwoPassDoubleSide:gJe,UVMapping:mR,Uint16BufferAttribute:x6,Uint32BufferAttribute:b6,Uint8BufferAttribute:TQe,Uint8ClampedBufferAttribute:EQe,Uniform:H6,UniformsGroup:Ost,UniformsLib:At,UniformsUtils:Zw,UnsignedByteType:Uu,UnsignedInt248Type:ph,UnsignedIntType:zd,UnsignedShort4444Type:s6,UnsignedShort5551Type:o6,UnsignedShortType:gR,VSMShadowMap:Tc,Vector2:lt,Vector3:me,Vector4:rr,VectorKeyframeTrack:iS,VideoTexture:Cit,WebGL1Renderer:Tue,WebGL3DRenderTarget:fQe,WebGLArrayRenderTarget:dQe,WebGLCoordinateSystem:Oc,WebGLCubeRenderTarget:w6,WebGLMultipleRenderTargets:hQe,WebGLRenderTarget:ic,WebGLRenderer:_6,WebGLUtils:_ue,WebGPUCoordinateSystem:gy,WireframeGeometry:N6,WrapAroundEnding:Hw,ZeroCurvatureEnding:fm,ZeroFactor:vce,ZeroSlopeEnding:hm,ZeroStencilOp:CJe,_SRGBAFormat:DA,createCanvasElement:fue,sRGBEncoding:gh},Symbol.toStringTag,{value:"Module"}));var xde={exports:{}},$g={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */$g.ConcurrentRoot=1;$g.ContinuousEventPriority=4;$g.DefaultEventPriority=16;$g.DiscreteEventPriority=1;$g.IdleEventPriority=536870912;$g.LegacyRoot=0;xde.exports=$g;var vv=xde.exports;function rot(t){let e;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(d!==e){const f=e;e=u?d:Object.assign({},e,d),n.forEach(h=>h(e,f))}},i=()=>e,s=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(e);function h(){const p=u(e);if(!d(f,p)){const v=f;c(f=p,v)}}return n.add(h),()=>n.delete(h)},l={setState:r,getState:i,subscribe:(c,u,d)=>u||d?s(c,u,d):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const iot=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),WK=iot?R.useEffect:R.useLayoutEffect;function bde(t){const e=typeof t=="function"?rot(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=R.useReducer(g=>g+1,0),o=e.getState(),a=R.useRef(o),l=R.useRef(r),c=R.useRef(i),u=R.useRef(!1),d=R.useRef();d.current===void 0&&(d.current=r(o));let f,h=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(f=r(o),h=!i(d.current,f)),WK(()=>{h&&(d.current=f),a.current=o,l.current=r,c.current=i,u.current=!1});const p=R.useRef(o);WK(()=>{const g=()=>{try{const y=e.getState(),x=l.current(y);c.current(d.current,x)||(a.current=y,d.current=x,s())}catch{u.current=!0,s()}},m=e.subscribe(g);return e.getState()!==p.current&&g(),m},[]);const v=h?f:d.current;return R.useDebugValue(v),v};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var wde={exports:{}},CD={exports:{}},TD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GK;function sot(){return GK||(GK=1,function(t){function e(D,B){var V=D.length;D.push(B);e:for(;0<V;){var W=V-1>>>1,j=D[W];if(0<i(j,B))D[W]=B,D[V]=j,V=W;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var B=D[0],V=D.pop();if(V!==B){D[0]=V;e:for(var W=0,j=D.length,J=j>>>1;W<J;){var Q=2*(W+1)-1,te=D[Q],re=Q+1,se=D[re];if(0>i(te,V))re<j&&0>i(se,te)?(D[W]=se,D[re]=V,W=re):(D[W]=te,D[Q]=V,W=Q);else if(re<j&&0>i(se,V))D[W]=se,D[re]=V,W=re;else break e}}return B}function i(D,B){var V=D.sortIndex-B.sortIndex;return V!==0?V:D.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=D)r(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function S(D){if(v=!1,x(D),!p)if(n(l)!==null)p=!0,z(_);else{var B=n(c);B!==null&&X(S,B.startTime-D)}}function _(D,B){p=!1,v&&(v=!1,m(A),A=-1),h=!0;var V=f;try{for(x(B),d=n(l);d!==null&&(!(d.expirationTime>B)||D&&!P());){var W=d.callback;if(typeof W=="function"){d.callback=null,f=d.priorityLevel;var j=W(d.expirationTime<=B);B=t.unstable_now(),typeof j=="function"?d.callback=j:d===n(l)&&r(l),x(B)}else r(l);d=n(l)}if(d!==null)var J=!0;else{var Q=n(c);Q!==null&&X(S,Q.startTime-B),J=!1}return J}finally{d=null,f=V,h=!1}}var C=!1,T=null,A=-1,M=5,E=-1;function P(){return!(t.unstable_now()-E<M)}function N(){if(T!==null){var D=t.unstable_now();E=D;var B=!0;try{B=T(!0,D)}finally{B?F():(C=!1,T=null)}}else C=!1}var F;if(typeof y=="function")F=function(){y(N)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,O=$.port2;$.port1.onmessage=N,F=function(){O.postMessage(null)}}else F=function(){g(N,0)};function z(D){T=D,C||(C=!0,F())}function X(D,B){A=g(function(){D(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,z(_))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var V=f;f=B;try{return D()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,B){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var V=f;f=D;try{return B()}finally{f=V}},t.unstable_scheduleCallback=function(D,B,V){var W=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?W+V:W):V=W,D){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=V+j,D={id:u++,callback:B,priorityLevel:D,startTime:V,expirationTime:j,sortIndex:-1},V>W?(D.sortIndex=V,e(c,D),n(l)===null&&D===n(c)&&(v?(m(A),A=-1):v=!0,X(S,V-W))):(D.sortIndex=j,e(l,D),p||h||(p=!0,z(_))),D},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(D){var B=f;return function(){var V=f;f=B;try{return D.apply(this,arguments)}finally{f=V}}}}(TD)),TD}var HK;function oot(){return HK||(HK=1,CD.exports=sot()),CD.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aot=function(e){var n={},r=R,i=oot(),s=Object.assign;function o(b){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+b,k=1;k<arguments.length;k++)w+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+b+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),p=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),_=Symbol.iterator;function C(b){return b===null||typeof b!="object"?null:(b=_&&b[_]||b["@@iterator"],typeof b=="function"?b:null)}function T(b){if(b==null)return null;if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case u:return"Fragment";case c:return"Portal";case f:return"Profiler";case d:return"StrictMode";case g:return"Suspense";case m:return"SuspenseList"}if(typeof b=="object")switch(b.$$typeof){case p:return(b.displayName||"Context")+".Consumer";case h:return(b._context.displayName||"Context")+".Provider";case v:var w=b.render;return b=b.displayName,b||(b=w.displayName||w.name||"",b=b!==""?"ForwardRef("+b+")":"ForwardRef"),b;case y:return w=b.displayName||null,w!==null?w:T(b.type)||"Memo";case x:w=b._payload,b=b._init;try{return T(b(w))}catch{}}return null}function A(b){var w=b.type;switch(b.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return b=w.render,b=b.displayName||b.name||"",w.displayName||(b!==""?"ForwardRef("+b+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return T(w);case 8:return w===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function M(b){var w=b,k=b;if(b.alternate)for(;w.return;)w=w.return;else{b=w;do w=b,w.flags&4098&&(k=w.return),b=w.return;while(b)}return w.tag===3?k:null}function E(b){if(M(b)!==b)throw Error(o(188))}function P(b){var w=b.alternate;if(!w){if(w=M(b),w===null)throw Error(o(188));return w!==b?null:b}for(var k=b,I=w;;){var U=k.return;if(U===null)break;var q=U.alternate;if(q===null){if(I=U.return,I!==null){k=I;continue}break}if(U.child===q.child){for(q=U.child;q;){if(q===k)return E(U),b;if(q===I)return E(U),w;q=q.sibling}throw Error(o(188))}if(k.return!==I.return)k=U,I=q;else{for(var _e=!1,Ue=U.child;Ue;){if(Ue===k){_e=!0,k=U,I=q;break}if(Ue===I){_e=!0,I=U,k=q;break}Ue=Ue.sibling}if(!_e){for(Ue=q.child;Ue;){if(Ue===k){_e=!0,k=q,I=U;break}if(Ue===I){_e=!0,I=q,k=U;break}Ue=Ue.sibling}if(!_e)throw Error(o(189))}}if(k.alternate!==I)throw Error(o(190))}if(k.tag!==3)throw Error(o(188));return k.stateNode.current===k?b:w}function N(b){return b=P(b),b!==null?F(b):null}function F(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){var w=F(b);if(w!==null)return w;b=b.sibling}return null}function $(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){if(b.tag!==4){var w=$(b);if(w!==null)return w}b=b.sibling}return null}var O=Array.isArray,z=e.getPublicInstance,X=e.getRootHostContext,D=e.getChildHostContext,B=e.prepareForCommit,V=e.resetAfterCommit,W=e.createInstance,j=e.appendInitialChild,J=e.finalizeInitialChildren,Q=e.prepareUpdate,te=e.shouldSetTextContent,re=e.createTextInstance,se=e.scheduleTimeout,fe=e.cancelTimeout,ae=e.noTimeout,ye=e.isPrimaryRenderer,le=e.supportsMutation,H=e.supportsPersistence,Me=e.supportsHydration,we=e.getInstanceFromNode,Ee=e.preparePortalMount,ge=e.getCurrentEventPriority,qe=e.detachDeletedInstance,Ae=e.supportsMicrotasks,ee=e.scheduleMicrotask,Y=e.supportsTestSelectors,oe=e.findFiberRoot,xe=e.getBoundingRect,Se=e.getTextContent,be=e.isHiddenSubtree,Re=e.matchAccessibilityRole,Ke=e.setFocusIfFocusable,ze=e.setupIntersectionObserver,Ne=e.appendChild,De=e.appendChildToContainer,Ve=e.commitTextUpdate,gt=e.commitMount,ct=e.commitUpdate,Ye=e.insertBefore,Xe=e.insertInContainerBefore,Le=e.removeChild,pe=e.removeChildFromContainer,He=e.resetTextContent,ot=e.hideInstance,et=e.hideTextInstance,Ie=e.unhideInstance,Ce=e.unhideTextInstance,ut=e.clearContainer,dt=e.cloneInstance,yt=e.createContainerChildSet,vt=e.appendChildToContainerChildSet,Vt=e.finalizeContainerChildren,It=e.replaceContainerChildren,en=e.cloneHiddenInstance,Dt=e.cloneHiddenTextInstance,mt=e.canHydrateInstance,jt=e.canHydrateTextInstance,mn=e.canHydrateSuspenseInstance,fn=e.isSuspenseInstancePending,_t=e.isSuspenseInstanceFallback,Lt=e.registerSuspenseInstanceRetry,Pt=e.getNextHydratableSibling,bt=e.getFirstHydratableChild,Wt=e.getFirstHydratableChildWithinContainer,Cn=e.getFirstHydratableChildWithinSuspenseInstance,Z=e.hydrateInstance,K=e.hydrateTextInstance,ne=e.hydrateSuspenseInstance,G=e.getNextHydratableInstanceAfterSuspenseInstance,ie=e.commitHydratedContainer,ce=e.commitHydratedSuspenseInstance,Te=e.clearSuspenseBoundary,de=e.clearSuspenseBoundaryFromContainer,Be=e.shouldDeleteUnhydratedTailInstances,Je=e.didNotMatchHydratedContainerTextInstance,nt=e.didNotMatchHydratedTextInstance,$e;function Ct(b){if($e===void 0)try{throw Error()}catch(k){var w=k.stack.trim().match(/\n( *(at )?)/);$e=w&&w[1]||""}return`
`+$e+b}var ht=!1;function ft(b,w){if(!b||ht)return"";ht=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(Tt){var I=Tt}Reflect.construct(b,[],w)}else{try{w.call()}catch(Tt){I=Tt}b.call(w.prototype)}else{try{throw Error()}catch(Tt){I=Tt}b()}}catch(Tt){if(Tt&&I&&typeof Tt.stack=="string"){for(var U=Tt.stack.split(`
`),q=I.stack.split(`
`),_e=U.length-1,Ue=q.length-1;1<=_e&&0<=Ue&&U[_e]!==q[Ue];)Ue--;for(;1<=_e&&0<=Ue;_e--,Ue--)if(U[_e]!==q[Ue]){if(_e!==1||Ue!==1)do if(_e--,Ue--,0>Ue||U[_e]!==q[Ue]){var at=`
`+U[_e].replace(" at new "," at ");return b.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",b.displayName)),at}while(1<=_e&&0<=Ue);break}}}finally{ht=!1,Error.prepareStackTrace=k}return(b=b?b.displayName||b.name:"")?Ct(b):""}var Ot=Object.prototype.hasOwnProperty,Qt=[],nn=-1;function vn(b){return{current:b}}function Nt(b){0>nn||(b.current=Qt[nn],Qt[nn]=null,nn--)}function Mt(b,w){nn++,Qt[nn]=b.current,b.current=w}var En={},tn=vn(En),cn=vn(!1),lr=En;function Vn(b,w){var k=b.type.contextTypes;if(!k)return En;var I=b.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===w)return I.__reactInternalMemoizedMaskedChildContext;var U={},q;for(q in k)U[q]=w[q];return I&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=w,b.__reactInternalMemoizedMaskedChildContext=U),U}function Zn(b){return b=b.childContextTypes,b!=null}function Tn(){Nt(cn),Nt(tn)}function hn(b,w,k){if(tn.current!==En)throw Error(o(168));Mt(tn,w),Mt(cn,k)}function er(b,w,k){var I=b.stateNode;if(w=w.childContextTypes,typeof I.getChildContext!="function")return k;I=I.getChildContext();for(var U in I)if(!(U in w))throw Error(o(108,A(b)||"Unknown",U));return s({},k,I)}function rn(b){return b=(b=b.stateNode)&&b.__reactInternalMemoizedMergedChildContext||En,lr=tn.current,Mt(tn,b),Mt(cn,cn.current),!0}function an(b,w,k){var I=b.stateNode;if(!I)throw Error(o(169));k?(b=er(b,w,lr),I.__reactInternalMemoizedMergedChildContext=b,Nt(cn),Nt(tn),Mt(tn,b)):Nt(cn),Mt(cn,k)}var Nr=Math.clz32?Math.clz32:Fa,Vs=Math.log,Li=Math.LN2;function Fa(b){return b>>>=0,b===0?32:31-(Vs(b)/Li|0)|0}var dd=64,fd=4194304;function hd(b){switch(b&-b){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return b&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return b}}function fp(b,w){var k=b.pendingLanes;if(k===0)return 0;var I=0,U=b.suspendedLanes,q=b.pingedLanes,_e=k&268435455;if(_e!==0){var Ue=_e&~U;Ue!==0?I=hd(Ue):(q&=_e,q!==0&&(I=hd(q)))}else _e=k&~U,_e!==0?I=hd(_e):q!==0&&(I=hd(q));if(I===0)return 0;if(w!==0&&w!==I&&!(w&U)&&(U=I&-I,q=w&-w,U>=q||U===16&&(q&4194240)!==0))return w;if(I&4&&(I|=k&16),w=b.entangledLanes,w!==0)for(b=b.entanglements,w&=I;0<w;)k=31-Nr(w),U=1<<k,I|=b[k],w&=~U;return I}function X_(b,w){switch(b){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ax(b,w){for(var k=b.suspendedLanes,I=b.pingedLanes,U=b.expirationTimes,q=b.pendingLanes;0<q;){var _e=31-Nr(q),Ue=1<<_e,at=U[_e];at===-1?(!(Ue&k)||Ue&I)&&(U[_e]=X_(Ue,w)):at<=w&&(b.expiredLanes|=Ue),q&=~Ue}}function pd(b){return b=b.pendingLanes&-1073741825,b!==0?b:b&1073741824?1073741824:0}function qg(b){for(var w=[],k=0;31>k;k++)w.push(b);return w}function iu(b,w,k){b.pendingLanes|=w,w!==536870912&&(b.suspendedLanes=0,b.pingedLanes=0),b=b.eventTimes,w=31-Nr(w),b[w]=k}function bf(b,w){var k=b.pendingLanes&~w;b.pendingLanes=w,b.suspendedLanes=0,b.pingedLanes=0,b.expiredLanes&=w,b.mutableReadLanes&=w,b.entangledLanes&=w,w=b.entanglements;var I=b.eventTimes;for(b=b.expirationTimes;0<k;){var U=31-Nr(k),q=1<<U;w[U]=0,I[U]=-1,b[U]=-1,k&=~q}}function su(b,w){var k=b.entangledLanes|=w;for(b=b.entanglements;k;){var I=31-Nr(k),U=1<<I;U&w|b[I]&w&&(b[I]|=w),k&=~U}}var Jn=0;function kx(b){return b&=-b,1<b?4<b?b&268435455?16:536870912:4:1}var md=i.unstable_scheduleCallback,Yg=i.unstable_cancelCallback,Ix=i.unstable_shouldYield,q_=i.unstable_requestPaint,hi=i.unstable_now,hp=i.unstable_ImmediatePriority,Y_=i.unstable_UserBlockingPriority,Oo=i.unstable_NormalPriority,Rx=i.unstable_IdlePriority,pp=null,Ba=null;function Px(b){if(Ba&&typeof Ba.onCommitFiberRoot=="function")try{Ba.onCommitFiberRoot(pp,b,void 0,(b.current.flags&128)===128)}catch{}}function K_(b,w){return b===w&&(b!==0||1/b===1/w)||b!==b&&w!==w}var Ua=typeof Object.is=="function"?Object.is:K_,Fo=null,ou=!1,xl=!1;function Nx(b){Fo===null?Fo=[b]:Fo.push(b)}function $x(b){ou=!0,Nx(b)}function la(){if(!xl&&Fo!==null){xl=!0;var b=0,w=Jn;try{var k=Fo;for(Jn=1;b<k.length;b++){var I=k[b];do I=I(!0);while(I!==null)}Fo=null,ou=!1}catch(U){throw Fo!==null&&(Fo=Fo.slice(b+1)),md(hp,la),U}finally{Jn=w,xl=!1}}return null}var mp=a.ReactCurrentBatchConfig;function gp(b,w){if(Ua(b,w))return!0;if(typeof b!="object"||b===null||typeof w!="object"||w===null)return!1;var k=Object.keys(b),I=Object.keys(w);if(k.length!==I.length)return!1;for(I=0;I<k.length;I++){var U=k[I];if(!Ot.call(w,U)||!Ua(b[U],w[U]))return!1}return!0}function vp(b){switch(b.tag){case 5:return Ct(b.type);case 16:return Ct("Lazy");case 13:return Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 2:case 15:return b=ft(b.type,!1),b;case 11:return b=ft(b.type.render,!1),b;case 1:return b=ft(b.type,!0),b;default:return""}}function Bo(b,w){if(b&&b.defaultProps){w=s({},w),b=b.defaultProps;for(var k in b)w[k]===void 0&&(w[k]=b[k]);return w}return w}var Cs=vn(null),Kg=null,pc=null,wf=null;function Zg(){wf=pc=Kg=null}function Z_(b,w,k){ye?(Mt(Cs,w._currentValue),w._currentValue=k):(Mt(Cs,w._currentValue2),w._currentValue2=k)}function Ts(b){var w=Cs.current;Nt(Cs),ye?b._currentValue=w:b._currentValue2=w}function Uo(b,w,k){for(;b!==null;){var I=b.alternate;if((b.childLanes&w)!==w?(b.childLanes|=w,I!==null&&(I.childLanes|=w)):I!==null&&(I.childLanes&w)!==w&&(I.childLanes|=w),b===k)break;b=b.return}}function Oi(b,w){Kg=b,wf=pc=null,b=b.dependencies,b!==null&&b.firstContext!==null&&(b.lanes&w&&(Ga=!0),b.firstContext=null)}function Fi(b){var w=ye?b._currentValue:b._currentValue2;if(wf!==b)if(b={context:b,memoizedValue:w,next:null},pc===null){if(Kg===null)throw Error(o(308));pc=b,Kg.dependencies={lanes:0,firstContext:b}}else pc=pc.next=b;return w}var za=null,Sf=!1;function PP(b){b.updateQueue={baseState:b.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S7(b,w){b=b.updateQueue,w.updateQueue===b&&(w.updateQueue={baseState:b.baseState,firstBaseUpdate:b.firstBaseUpdate,lastBaseUpdate:b.lastBaseUpdate,shared:b.shared,effects:b.effects})}function gd(b,w){return{eventTime:b,lane:w,tag:0,payload:null,callback:null,next:null}}function _f(b,w){var k=b.updateQueue;k!==null&&(k=k.shared,qi!==null&&b.mode&1&&!(Kn&2)?(b=k.interleaved,b===null?(w.next=w,za===null?za=[k]:za.push(k)):(w.next=b.next,b.next=w),k.interleaved=w):(b=k.pending,b===null?w.next=w:(w.next=b.next,b.next=w),k.pending=w))}function J_(b,w,k){if(w=w.updateQueue,w!==null&&(w=w.shared,(k&4194240)!==0)){var I=w.lanes;I&=b.pendingLanes,k|=I,w.lanes=k,su(b,k)}}function _7(b,w){var k=b.updateQueue,I=b.alternate;if(I!==null&&(I=I.updateQueue,k===I)){var U=null,q=null;if(k=k.firstBaseUpdate,k!==null){do{var _e={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};q===null?U=q=_e:q=q.next=_e,k=k.next}while(k!==null);q===null?U=q=w:q=q.next=w}else U=q=w;k={baseState:I.baseState,firstBaseUpdate:U,lastBaseUpdate:q,shared:I.shared,effects:I.effects},b.updateQueue=k;return}b=k.lastBaseUpdate,b===null?k.firstBaseUpdate=w:b.next=w,k.lastBaseUpdate=w}function Q_(b,w,k,I){var U=b.updateQueue;Sf=!1;var q=U.firstBaseUpdate,_e=U.lastBaseUpdate,Ue=U.shared.pending;if(Ue!==null){U.shared.pending=null;var at=Ue,Tt=at.next;at.next=null,_e===null?q=Tt:_e.next=Tt,_e=at;var qt=b.alternate;qt!==null&&(qt=qt.updateQueue,Ue=qt.lastBaseUpdate,Ue!==_e&&(Ue===null?qt.firstBaseUpdate=Tt:Ue.next=Tt,qt.lastBaseUpdate=at))}if(q!==null){var In=U.baseState;_e=0,qt=Tt=at=null,Ue=q;do{var yn=Ue.lane,Fr=Ue.eventTime;if((I&yn)===yn){qt!==null&&(qt=qt.next={eventTime:Fr,lane:0,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null});e:{var ln=b,co=Ue;switch(yn=w,Fr=k,co.tag){case 1:if(ln=co.payload,typeof ln=="function"){In=ln.call(Fr,In,yn);break e}In=ln;break e;case 3:ln.flags=ln.flags&-65537|128;case 0:if(ln=co.payload,yn=typeof ln=="function"?ln.call(Fr,In,yn):ln,yn==null)break e;In=s({},In,yn);break e;case 2:Sf=!0}}Ue.callback!==null&&Ue.lane!==0&&(b.flags|=64,yn=U.effects,yn===null?U.effects=[Ue]:yn.push(Ue))}else Fr={eventTime:Fr,lane:yn,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null},qt===null?(Tt=qt=Fr,at=In):qt=qt.next=Fr,_e|=yn;if(Ue=Ue.next,Ue===null){if(Ue=U.shared.pending,Ue===null)break;yn=Ue,Ue=yn.next,yn.next=null,U.lastBaseUpdate=yn,U.shared.pending=null}}while(!0);if(qt===null&&(at=In),U.baseState=at,U.firstBaseUpdate=Tt,U.lastBaseUpdate=qt,w=U.shared.interleaved,w!==null){U=w;do _e|=U.lane,U=U.next;while(U!==w)}else q===null&&(U.shared.lanes=0);o0|=_e,b.lanes=_e,b.memoizedState=In}}function C7(b,w,k){if(b=w.effects,w.effects=null,b!==null)for(w=0;w<b.length;w++){var I=b[w],U=I.callback;if(U!==null){if(I.callback=null,I=k,typeof U!="function")throw Error(o(191,U));U.call(I)}}}var T7=new r.Component().refs;function NP(b,w,k,I){w=b.memoizedState,k=k(I,w),k=k==null?w:s({},w,k),b.memoizedState=k,b.lanes===0&&(b.updateQueue.baseState=k)}var eC={isMounted:function(b){return(b=b._reactInternals)?M(b)===b:!1},enqueueSetState:function(b,w,k){b=b._reactInternals;var I=Vo(),U=Ef(b),q=gd(I,U);q.payload=w,k!=null&&(q.callback=k),_f(b,q),w=Cl(b,U,I),w!==null&&J_(w,b,U)},enqueueReplaceState:function(b,w,k){b=b._reactInternals;var I=Vo(),U=Ef(b),q=gd(I,U);q.tag=1,q.payload=w,k!=null&&(q.callback=k),_f(b,q),w=Cl(b,U,I),w!==null&&J_(w,b,U)},enqueueForceUpdate:function(b,w){b=b._reactInternals;var k=Vo(),I=Ef(b),U=gd(k,I);U.tag=2,w!=null&&(U.callback=w),_f(b,U),w=Cl(b,I,k),w!==null&&J_(w,b,I)}};function E7(b,w,k,I,U,q,_e){return b=b.stateNode,typeof b.shouldComponentUpdate=="function"?b.shouldComponentUpdate(I,q,_e):w.prototype&&w.prototype.isPureReactComponent?!gp(k,I)||!gp(U,q):!0}function M7(b,w,k){var I=!1,U=En,q=w.contextType;return typeof q=="object"&&q!==null?q=Fi(q):(U=Zn(w)?lr:tn.current,I=w.contextTypes,q=(I=I!=null)?Vn(b,U):En),w=new w(k,q),b.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=eC,b.stateNode=w,w._reactInternals=b,I&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=U,b.__reactInternalMemoizedMaskedChildContext=q),w}function A7(b,w,k,I){b=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(k,I),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(k,I),w.state!==b&&eC.enqueueReplaceState(w,w.state,null)}function $P(b,w,k,I){var U=b.stateNode;U.props=k,U.state=b.memoizedState,U.refs=T7,PP(b);var q=w.contextType;typeof q=="object"&&q!==null?U.context=Fi(q):(q=Zn(w)?lr:tn.current,U.context=Vn(b,q)),U.state=b.memoizedState,q=w.getDerivedStateFromProps,typeof q=="function"&&(NP(b,w,q,k),U.state=b.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(w=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),w!==U.state&&eC.enqueueReplaceState(U,U.state,null),Q_(b,k,U,I),U.state=b.memoizedState),typeof U.componentDidMount=="function"&&(b.flags|=4194308)}var Jg=[],Qg=0,tC=null,nC=0,bl=[],wl=0,yp=null,vd=1,yd="";function xp(b,w){Jg[Qg++]=nC,Jg[Qg++]=tC,tC=b,nC=w}function k7(b,w,k){bl[wl++]=vd,bl[wl++]=yd,bl[wl++]=yp,yp=b;var I=vd;b=yd;var U=32-Nr(I)-1;I&=~(1<<U),k+=1;var q=32-Nr(w)+U;if(30<q){var _e=U-U%5;q=(I&(1<<_e)-1).toString(32),I>>=_e,U-=_e,vd=1<<32-Nr(w)+U|k<<U|I,yd=q+b}else vd=1<<q|k<<U|I,yd=b}function DP(b){b.return!==null&&(xp(b,1),k7(b,1,0))}function LP(b){for(;b===tC;)tC=Jg[--Qg],Jg[Qg]=null,nC=Jg[--Qg],Jg[Qg]=null;for(;b===yp;)yp=bl[--wl],bl[wl]=null,yd=bl[--wl],bl[wl]=null,vd=bl[--wl],bl[wl]=null}var Va=null,Wa=null,si=!1,Dx=!1,mc=null;function I7(b,w){var k=Tl(5,null,null,0);k.elementType="DELETED",k.stateNode=w,k.return=b,w=b.deletions,w===null?(b.deletions=[k],b.flags|=16):w.push(k)}function R7(b,w){switch(b.tag){case 5:return w=mt(w,b.type,b.pendingProps),w!==null?(b.stateNode=w,Va=b,Wa=bt(w),!0):!1;case 6:return w=jt(w,b.pendingProps),w!==null?(b.stateNode=w,Va=b,Wa=null,!0):!1;case 13:if(w=mn(w),w!==null){var k=yp!==null?{id:vd,overflow:yd}:null;return b.memoizedState={dehydrated:w,treeContext:k,retryLane:1073741824},k=Tl(18,null,null,0),k.stateNode=w,k.return=b,b.child=k,Va=b,Wa=null,!0}return!1;default:return!1}}function OP(b){return(b.mode&1)!==0&&(b.flags&128)===0}function FP(b){if(si){var w=Wa;if(w){var k=w;if(!R7(b,w)){if(OP(b))throw Error(o(418));w=Pt(k);var I=Va;w&&R7(b,w)?I7(I,k):(b.flags=b.flags&-4097|2,si=!1,Va=b)}}else{if(OP(b))throw Error(o(418));b.flags=b.flags&-4097|2,si=!1,Va=b}}}function P7(b){for(b=b.return;b!==null&&b.tag!==5&&b.tag!==3&&b.tag!==13;)b=b.return;Va=b}function Lx(b){if(!Me||b!==Va)return!1;if(!si)return P7(b),si=!0,!1;if(b.tag!==3&&(b.tag!==5||Be(b.type)&&!te(b.type,b.memoizedProps))){var w=Wa;if(w){if(OP(b)){for(b=Wa;b;)b=Pt(b);throw Error(o(418))}for(;w;)I7(b,w),w=Pt(w)}}if(P7(b),b.tag===13){if(!Me)throw Error(o(316));if(b=b.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(o(317));Wa=G(b)}else Wa=Va?Pt(b.stateNode):null;return!0}function e0(){Me&&(Wa=Va=null,Dx=si=!1)}function BP(b){mc===null?mc=[b]:mc.push(b)}function Ox(b,w,k){if(b=k.ref,b!==null&&typeof b!="function"&&typeof b!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(o(309));var I=k.stateNode}if(!I)throw Error(o(147,b));var U=I,q=""+b;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===q?w.ref:(w=function(_e){var Ue=U.refs;Ue===T7&&(Ue=U.refs={}),_e===null?delete Ue[q]:Ue[q]=_e},w._stringRef=q,w)}if(typeof b!="string")throw Error(o(284));if(!k._owner)throw Error(o(290,b))}return b}function rC(b,w){throw b=Object.prototype.toString.call(w),Error(o(31,b==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":b))}function N7(b){var w=b._init;return w(b._payload)}function $7(b){function w(tt,je){if(b){var st=tt.deletions;st===null?(tt.deletions=[je],tt.flags|=16):st.push(je)}}function k(tt,je){if(!b)return null;for(;je!==null;)w(tt,je),je=je.sibling;return null}function I(tt,je){for(tt=new Map;je!==null;)je.key!==null?tt.set(je.key,je):tt.set(je.index,je),je=je.sibling;return tt}function U(tt,je){return tt=Af(tt,je),tt.index=0,tt.sibling=null,tt}function q(tt,je,st){return tt.index=st,b?(st=tt.alternate,st!==null?(st=st.index,st<je?(tt.flags|=2,je):st):(tt.flags|=2,je)):(tt.flags|=1048576,je)}function _e(tt){return b&&tt.alternate===null&&(tt.flags|=2),tt}function Ue(tt,je,st,Gt){return je===null||je.tag!==6?(je=SN(st,tt.mode,Gt),je.return=tt,je):(je=U(je,st),je.return=tt,je)}function at(tt,je,st,Gt){var sn=st.type;return sn===u?qt(tt,je,st.props.children,Gt,st.key):je!==null&&(je.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===x&&N7(sn)===je.type)?(Gt=U(je,st.props),Gt.ref=Ox(tt,je,st),Gt.return=tt,Gt):(Gt=$C(st.type,st.key,st.props,null,tt.mode,Gt),Gt.ref=Ox(tt,je,st),Gt.return=tt,Gt)}function Tt(tt,je,st,Gt){return je===null||je.tag!==4||je.stateNode.containerInfo!==st.containerInfo||je.stateNode.implementation!==st.implementation?(je=_N(st,tt.mode,Gt),je.return=tt,je):(je=U(je,st.children||[]),je.return=tt,je)}function qt(tt,je,st,Gt,sn){return je===null||je.tag!==7?(je=Ep(st,tt.mode,Gt,sn),je.return=tt,je):(je=U(je,st),je.return=tt,je)}function In(tt,je,st){if(typeof je=="string"&&je!==""||typeof je=="number")return je=SN(""+je,tt.mode,st),je.return=tt,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case l:return st=$C(je.type,je.key,je.props,null,tt.mode,st),st.ref=Ox(tt,null,je),st.return=tt,st;case c:return je=_N(je,tt.mode,st),je.return=tt,je;case x:var Gt=je._init;return In(tt,Gt(je._payload),st)}if(O(je)||C(je))return je=Ep(je,tt.mode,st,null),je.return=tt,je;rC(tt,je)}return null}function yn(tt,je,st,Gt){var sn=je!==null?je.key:null;if(typeof st=="string"&&st!==""||typeof st=="number")return sn!==null?null:Ue(tt,je,""+st,Gt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case l:return st.key===sn?at(tt,je,st,Gt):null;case c:return st.key===sn?Tt(tt,je,st,Gt):null;case x:return sn=st._init,yn(tt,je,sn(st._payload),Gt)}if(O(st)||C(st))return sn!==null?null:qt(tt,je,st,Gt,null);rC(tt,st)}return null}function Fr(tt,je,st,Gt,sn){if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number")return tt=tt.get(st)||null,Ue(je,tt,""+Gt,sn);if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case l:return tt=tt.get(Gt.key===null?st:Gt.key)||null,at(je,tt,Gt,sn);case c:return tt=tt.get(Gt.key===null?st:Gt.key)||null,Tt(je,tt,Gt,sn);case x:var Wn=Gt._init;return Fr(tt,je,st,Wn(Gt._payload),sn)}if(O(Gt)||C(Gt))return tt=tt.get(st)||null,qt(je,tt,Gt,sn,null);rC(je,Gt)}return null}function ln(tt,je,st,Gt){for(var sn=null,Wn=null,Rn=je,hr=je=0,Ms=null;Rn!==null&&hr<st.length;hr++){Rn.index>hr?(Ms=Rn,Rn=null):Ms=Rn.sibling;var pr=yn(tt,Rn,st[hr],Gt);if(pr===null){Rn===null&&(Rn=Ms);break}b&&Rn&&pr.alternate===null&&w(tt,Rn),je=q(pr,je,hr),Wn===null?sn=pr:Wn.sibling=pr,Wn=pr,Rn=Ms}if(hr===st.length)return k(tt,Rn),si&&xp(tt,hr),sn;if(Rn===null){for(;hr<st.length;hr++)Rn=In(tt,st[hr],Gt),Rn!==null&&(je=q(Rn,je,hr),Wn===null?sn=Rn:Wn.sibling=Rn,Wn=Rn);return si&&xp(tt,hr),sn}for(Rn=I(tt,Rn);hr<st.length;hr++)Ms=Fr(Rn,tt,hr,st[hr],Gt),Ms!==null&&(b&&Ms.alternate!==null&&Rn.delete(Ms.key===null?hr:Ms.key),je=q(Ms,je,hr),Wn===null?sn=Ms:Wn.sibling=Ms,Wn=Ms);return b&&Rn.forEach(function(kf){return w(tt,kf)}),si&&xp(tt,hr),sn}function co(tt,je,st,Gt){var sn=C(st);if(typeof sn!="function")throw Error(o(150));if(st=sn.call(st),st==null)throw Error(o(151));for(var Wn=sn=null,Rn=je,hr=je=0,Ms=null,pr=st.next();Rn!==null&&!pr.done;hr++,pr=st.next()){Rn.index>hr?(Ms=Rn,Rn=null):Ms=Rn.sibling;var kf=yn(tt,Rn,pr.value,Gt);if(kf===null){Rn===null&&(Rn=Ms);break}b&&Rn&&kf.alternate===null&&w(tt,Rn),je=q(kf,je,hr),Wn===null?sn=kf:Wn.sibling=kf,Wn=kf,Rn=Ms}if(pr.done)return k(tt,Rn),si&&xp(tt,hr),sn;if(Rn===null){for(;!pr.done;hr++,pr=st.next())pr=In(tt,pr.value,Gt),pr!==null&&(je=q(pr,je,hr),Wn===null?sn=pr:Wn.sibling=pr,Wn=pr);return si&&xp(tt,hr),sn}for(Rn=I(tt,Rn);!pr.done;hr++,pr=st.next())pr=Fr(Rn,tt,hr,pr.value,Gt),pr!==null&&(b&&pr.alternate!==null&&Rn.delete(pr.key===null?hr:pr.key),je=q(pr,je,hr),Wn===null?sn=pr:Wn.sibling=pr,Wn=pr);return b&&Rn.forEach(function(l1e){return w(tt,l1e)}),si&&xp(tt,hr),sn}function El(tt,je,st,Gt){if(typeof st=="object"&&st!==null&&st.type===u&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case l:e:{for(var sn=st.key,Wn=je;Wn!==null;){if(Wn.key===sn){if(sn=st.type,sn===u){if(Wn.tag===7){k(tt,Wn.sibling),je=U(Wn,st.props.children),je.return=tt,tt=je;break e}}else if(Wn.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===x&&N7(sn)===Wn.type){k(tt,Wn.sibling),je=U(Wn,st.props),je.ref=Ox(tt,Wn,st),je.return=tt,tt=je;break e}k(tt,Wn);break}else w(tt,Wn);Wn=Wn.sibling}st.type===u?(je=Ep(st.props.children,tt.mode,Gt,st.key),je.return=tt,tt=je):(Gt=$C(st.type,st.key,st.props,null,tt.mode,Gt),Gt.ref=Ox(tt,je,st),Gt.return=tt,tt=Gt)}return _e(tt);case c:e:{for(Wn=st.key;je!==null;){if(je.key===Wn)if(je.tag===4&&je.stateNode.containerInfo===st.containerInfo&&je.stateNode.implementation===st.implementation){k(tt,je.sibling),je=U(je,st.children||[]),je.return=tt,tt=je;break e}else{k(tt,je);break}else w(tt,je);je=je.sibling}je=_N(st,tt.mode,Gt),je.return=tt,tt=je}return _e(tt);case x:return Wn=st._init,El(tt,je,Wn(st._payload),Gt)}if(O(st))return ln(tt,je,st,Gt);if(C(st))return co(tt,je,st,Gt);rC(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"?(st=""+st,je!==null&&je.tag===6?(k(tt,je.sibling),je=U(je,st),je.return=tt,tt=je):(k(tt,je),je=SN(st,tt.mode,Gt),je.return=tt,tt=je),_e(tt)):k(tt,je)}return El}var t0=$7(!0),D7=$7(!1),Fx={},Sl=vn(Fx),Bx=vn(Fx),n0=vn(Fx);function au(b){if(b===Fx)throw Error(o(174));return b}function UP(b,w){Mt(n0,w),Mt(Bx,b),Mt(Sl,Fx),b=X(w),Nt(Sl),Mt(Sl,b)}function r0(){Nt(Sl),Nt(Bx),Nt(n0)}function L7(b){var w=au(n0.current),k=au(Sl.current);w=D(k,b.type,w),k!==w&&(Mt(Bx,b),Mt(Sl,w))}function zP(b){Bx.current===b&&(Nt(Sl),Nt(Bx))}var pi=vn(0);function iC(b){for(var w=b;w!==null;){if(w.tag===13){var k=w.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||fn(k)||_t(k)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if(w.flags&128)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===b)break;for(;w.sibling===null;){if(w.return===null||w.return===b)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var VP=[];function WP(){for(var b=0;b<VP.length;b++){var w=VP[b];ye?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}VP.length=0}var sC=a.ReactCurrentDispatcher,_l=a.ReactCurrentBatchConfig,i0=0,wi=null,oo=null,Es=null,oC=!1,Ux=!1,zx=0,Nxe=0;function ao(){throw Error(o(321))}function GP(b,w){if(w===null)return!1;for(var k=0;k<w.length&&k<b.length;k++)if(!Ua(b[k],w[k]))return!1;return!0}function HP(b,w,k,I,U,q){if(i0=q,wi=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,sC.current=b===null||b.memoizedState===null?Oxe:Fxe,b=k(I,U),Ux){q=0;do{if(Ux=!1,zx=0,25<=q)throw Error(o(301));q+=1,Es=oo=null,w.updateQueue=null,sC.current=Bxe,b=k(I,U)}while(Ux)}if(sC.current=dC,w=oo!==null&&oo.next!==null,i0=0,Es=oo=wi=null,oC=!1,w)throw Error(o(300));return b}function jP(){var b=zx!==0;return zx=0,b}function xd(){var b={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Es===null?wi.memoizedState=Es=b:Es=Es.next=b,Es}function lu(){if(oo===null){var b=wi.alternate;b=b!==null?b.memoizedState:null}else b=oo.next;var w=Es===null?wi.memoizedState:Es.next;if(w!==null)Es=w,oo=b;else{if(b===null)throw Error(o(310));oo=b,b={memoizedState:oo.memoizedState,baseState:oo.baseState,baseQueue:oo.baseQueue,queue:oo.queue,next:null},Es===null?wi.memoizedState=Es=b:Es=Es.next=b}return Es}function bp(b,w){return typeof w=="function"?w(b):w}function aC(b){var w=lu(),k=w.queue;if(k===null)throw Error(o(311));k.lastRenderedReducer=b;var I=oo,U=I.baseQueue,q=k.pending;if(q!==null){if(U!==null){var _e=U.next;U.next=q.next,q.next=_e}I.baseQueue=U=q,k.pending=null}if(U!==null){q=U.next,I=I.baseState;var Ue=_e=null,at=null,Tt=q;do{var qt=Tt.lane;if((i0&qt)===qt)at!==null&&(at=at.next={lane:0,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null}),I=Tt.hasEagerState?Tt.eagerState:b(I,Tt.action);else{var In={lane:qt,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null};at===null?(Ue=at=In,_e=I):at=at.next=In,wi.lanes|=qt,o0|=qt}Tt=Tt.next}while(Tt!==null&&Tt!==q);at===null?_e=I:at.next=Ue,Ua(I,w.memoizedState)||(Ga=!0),w.memoizedState=I,w.baseState=_e,w.baseQueue=at,k.lastRenderedState=I}if(b=k.interleaved,b!==null){U=b;do q=U.lane,wi.lanes|=q,o0|=q,U=U.next;while(U!==b)}else U===null&&(k.lanes=0);return[w.memoizedState,k.dispatch]}function lC(b){var w=lu(),k=w.queue;if(k===null)throw Error(o(311));k.lastRenderedReducer=b;var I=k.dispatch,U=k.pending,q=w.memoizedState;if(U!==null){k.pending=null;var _e=U=U.next;do q=b(q,_e.action),_e=_e.next;while(_e!==U);Ua(q,w.memoizedState)||(Ga=!0),w.memoizedState=q,w.baseQueue===null&&(w.baseState=q),k.lastRenderedState=q}return[q,I]}function O7(){}function F7(b,w){var k=wi,I=lu(),U=w(),q=!Ua(I.memoizedState,U);if(q&&(I.memoizedState=U,Ga=!0),I=I.queue,Wx(z7.bind(null,k,I,b),[b]),I.getSnapshot!==w||q||Es!==null&&Es.memoizedState.tag&1){if(k.flags|=2048,Vx(9,U7.bind(null,k,I,U,w),void 0,null),qi===null)throw Error(o(349));i0&30||B7(k,w,U)}return U}function B7(b,w,k){b.flags|=16384,b={getSnapshot:w,value:k},w=wi.updateQueue,w===null?(w={lastEffect:null,stores:null},wi.updateQueue=w,w.stores=[b]):(k=w.stores,k===null?w.stores=[b]:k.push(b))}function U7(b,w,k,I){w.value=k,w.getSnapshot=I,V7(w)&&Cl(b,1,-1)}function z7(b,w,k){return k(function(){V7(w)&&Cl(b,1,-1)})}function V7(b){var w=b.getSnapshot;b=b.value;try{var k=w();return!Ua(b,k)}catch{return!0}}function XP(b){var w=xd();return typeof b=="function"&&(b=b()),w.memoizedState=w.baseState=b,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bp,lastRenderedState:b},w.queue=b,b=b.dispatch=Lxe.bind(null,wi,b),[w.memoizedState,b]}function Vx(b,w,k,I){return b={tag:b,create:w,destroy:k,deps:I,next:null},w=wi.updateQueue,w===null?(w={lastEffect:null,stores:null},wi.updateQueue=w,w.lastEffect=b.next=b):(k=w.lastEffect,k===null?w.lastEffect=b.next=b:(I=k.next,k.next=b,b.next=I,w.lastEffect=b)),b}function W7(){return lu().memoizedState}function cC(b,w,k,I){var U=xd();wi.flags|=b,U.memoizedState=Vx(1|w,k,void 0,I===void 0?null:I)}function uC(b,w,k,I){var U=lu();I=I===void 0?null:I;var q=void 0;if(oo!==null){var _e=oo.memoizedState;if(q=_e.destroy,I!==null&&GP(I,_e.deps)){U.memoizedState=Vx(w,k,q,I);return}}wi.flags|=b,U.memoizedState=Vx(1|w,k,q,I)}function qP(b,w){return cC(8390656,8,b,w)}function Wx(b,w){return uC(2048,8,b,w)}function G7(b,w){return uC(4,2,b,w)}function H7(b,w){return uC(4,4,b,w)}function j7(b,w){if(typeof w=="function")return b=b(),w(b),function(){w(null)};if(w!=null)return b=b(),w.current=b,function(){w.current=null}}function X7(b,w,k){return k=k!=null?k.concat([b]):null,uC(4,4,j7.bind(null,w,b),k)}function YP(){}function q7(b,w){var k=lu();w=w===void 0?null:w;var I=k.memoizedState;return I!==null&&w!==null&&GP(w,I[1])?I[0]:(k.memoizedState=[b,w],b)}function Y7(b,w){var k=lu();w=w===void 0?null:w;var I=k.memoizedState;return I!==null&&w!==null&&GP(w,I[1])?I[0]:(b=b(),k.memoizedState=[b,w],b)}function $xe(b,w){var k=Jn;Jn=k!==0&&4>k?k:4,b(!0);var I=_l.transition;_l.transition={};try{b(!1),w()}finally{Jn=k,_l.transition=I}}function K7(){return lu().memoizedState}function Dxe(b,w,k){var I=Ef(b);k={lane:I,action:k,hasEagerState:!1,eagerState:null,next:null},Z7(b)?J7(w,k):(Q7(b,w,k),k=Vo(),b=Cl(b,I,k),b!==null&&eG(b,w,I))}function Lxe(b,w,k){var I=Ef(b),U={lane:I,action:k,hasEagerState:!1,eagerState:null,next:null};if(Z7(b))J7(w,U);else{Q7(b,w,U);var q=b.alternate;if(b.lanes===0&&(q===null||q.lanes===0)&&(q=w.lastRenderedReducer,q!==null))try{var _e=w.lastRenderedState,Ue=q(_e,k);if(U.hasEagerState=!0,U.eagerState=Ue,Ua(Ue,_e))return}catch{}finally{}k=Vo(),b=Cl(b,I,k),b!==null&&eG(b,w,I)}}function Z7(b){var w=b.alternate;return b===wi||w!==null&&w===wi}function J7(b,w){Ux=oC=!0;var k=b.pending;k===null?w.next=w:(w.next=k.next,k.next=w),b.pending=w}function Q7(b,w,k){qi!==null&&b.mode&1&&!(Kn&2)?(b=w.interleaved,b===null?(k.next=k,za===null?za=[w]:za.push(w)):(k.next=b.next,b.next=k),w.interleaved=k):(b=w.pending,b===null?k.next=k:(k.next=b.next,b.next=k),w.pending=k)}function eG(b,w,k){if(k&4194240){var I=w.lanes;I&=b.pendingLanes,k|=I,w.lanes=k,su(b,k)}}var dC={readContext:Fi,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useInsertionEffect:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useSyncExternalStore:ao,useId:ao,unstable_isNewReconciler:!1},Oxe={readContext:Fi,useCallback:function(b,w){return xd().memoizedState=[b,w===void 0?null:w],b},useContext:Fi,useEffect:qP,useImperativeHandle:function(b,w,k){return k=k!=null?k.concat([b]):null,cC(4194308,4,j7.bind(null,w,b),k)},useLayoutEffect:function(b,w){return cC(4194308,4,b,w)},useInsertionEffect:function(b,w){return cC(4,2,b,w)},useMemo:function(b,w){var k=xd();return w=w===void 0?null:w,b=b(),k.memoizedState=[b,w],b},useReducer:function(b,w,k){var I=xd();return w=k!==void 0?k(w):w,I.memoizedState=I.baseState=w,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:w},I.queue=b,b=b.dispatch=Dxe.bind(null,wi,b),[I.memoizedState,b]},useRef:function(b){var w=xd();return b={current:b},w.memoizedState=b},useState:XP,useDebugValue:YP,useDeferredValue:function(b){var w=XP(b),k=w[0],I=w[1];return qP(function(){var U=_l.transition;_l.transition={};try{I(b)}finally{_l.transition=U}},[b]),k},useTransition:function(){var b=XP(!1),w=b[0];return b=$xe.bind(null,b[1]),xd().memoizedState=b,[w,b]},useMutableSource:function(){},useSyncExternalStore:function(b,w,k){var I=wi,U=xd();if(si){if(k===void 0)throw Error(o(407));k=k()}else{if(k=w(),qi===null)throw Error(o(349));i0&30||B7(I,w,k)}U.memoizedState=k;var q={value:k,getSnapshot:w};return U.queue=q,qP(z7.bind(null,I,q,b),[b]),I.flags|=2048,Vx(9,U7.bind(null,I,q,k,w),void 0,null),k},useId:function(){var b=xd(),w=qi.identifierPrefix;if(si){var k=yd,I=vd;k=(I&~(1<<32-Nr(I)-1)).toString(32)+k,w=":"+w+"R"+k,k=zx++,0<k&&(w+="H"+k.toString(32)),w+=":"}else k=Nxe++,w=":"+w+"r"+k.toString(32)+":";return b.memoizedState=w},unstable_isNewReconciler:!1},Fxe={readContext:Fi,useCallback:q7,useContext:Fi,useEffect:Wx,useImperativeHandle:X7,useInsertionEffect:G7,useLayoutEffect:H7,useMemo:Y7,useReducer:aC,useRef:W7,useState:function(){return aC(bp)},useDebugValue:YP,useDeferredValue:function(b){var w=aC(bp),k=w[0],I=w[1];return Wx(function(){var U=_l.transition;_l.transition={};try{I(b)}finally{_l.transition=U}},[b]),k},useTransition:function(){var b=aC(bp)[0],w=lu().memoizedState;return[b,w]},useMutableSource:O7,useSyncExternalStore:F7,useId:K7,unstable_isNewReconciler:!1},Bxe={readContext:Fi,useCallback:q7,useContext:Fi,useEffect:Wx,useImperativeHandle:X7,useInsertionEffect:G7,useLayoutEffect:H7,useMemo:Y7,useReducer:lC,useRef:W7,useState:function(){return lC(bp)},useDebugValue:YP,useDeferredValue:function(b){var w=lC(bp),k=w[0],I=w[1];return Wx(function(){var U=_l.transition;_l.transition={};try{I(b)}finally{_l.transition=U}},[b]),k},useTransition:function(){var b=lC(bp)[0],w=lu().memoizedState;return[b,w]},useMutableSource:O7,useSyncExternalStore:F7,useId:K7,unstable_isNewReconciler:!1};function KP(b,w){try{var k="",I=w;do k+=vp(I),I=I.return;while(I);var U=k}catch(q){U=`
Error generating stack: `+q.message+`
`+q.stack}return{value:b,source:w,stack:U}}function ZP(b,w){try{console.error(w.value)}catch(k){setTimeout(function(){throw k})}}var Uxe=typeof WeakMap=="function"?WeakMap:Map;function tG(b,w,k){k=gd(-1,k),k.tag=3,k.payload={element:null};var I=w.value;return k.callback=function(){MC||(MC=!0,mN=I),ZP(b,w)},k}function nG(b,w,k){k=gd(-1,k),k.tag=3;var I=b.type.getDerivedStateFromError;if(typeof I=="function"){var U=w.value;k.payload=function(){return I(U)},k.callback=function(){ZP(b,w)}}var q=b.stateNode;return q!==null&&typeof q.componentDidCatch=="function"&&(k.callback=function(){ZP(b,w),typeof I!="function"&&(Cf===null?Cf=new Set([this]):Cf.add(this));var _e=w.stack;this.componentDidCatch(w.value,{componentStack:_e!==null?_e:""})}),k}function rG(b,w,k){var I=b.pingCache;if(I===null){I=b.pingCache=new Uxe;var U=new Set;I.set(w,U)}else U=I.get(w),U===void 0&&(U=new Set,I.set(w,U));U.has(k)||(U.add(k),b=e1e.bind(null,b,w,k),w.then(b,b))}function iG(b){do{var w;if((w=b.tag===13)&&(w=b.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return b;b=b.return}while(b!==null);return null}function sG(b,w,k,I,U){return b.mode&1?(b.flags|=65536,b.lanes=U,b):(b===w?b.flags|=65536:(b.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(w=gd(-1,1),w.tag=2,_f(k,w))),k.lanes|=1),b)}function cu(b){b.flags|=4}function oG(b,w){if(b!==null&&b.child===w.child)return!0;if(w.flags&16)return!1;for(b=w.child;b!==null;){if(b.flags&12854||b.subtreeFlags&12854)return!1;b=b.sibling}return!0}var Gx,Hx,fC,hC;if(le)Gx=function(b,w){for(var k=w.child;k!==null;){if(k.tag===5||k.tag===6)j(b,k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===w)break;for(;k.sibling===null;){if(k.return===null||k.return===w)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},Hx=function(){},fC=function(b,w,k,I,U){if(b=b.memoizedProps,b!==I){var q=w.stateNode,_e=au(Sl.current);k=Q(q,k,b,I,U,_e),(w.updateQueue=k)&&cu(w)}},hC=function(b,w,k,I){k!==I&&cu(w)};else if(H){Gx=function(b,w,k,I){for(var U=w.child;U!==null;){if(U.tag===5){var q=U.stateNode;k&&I&&(q=en(q,U.type,U.memoizedProps,U)),j(b,q)}else if(U.tag===6)q=U.stateNode,k&&I&&(q=Dt(q,U.memoizedProps,U)),j(b,q);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)q=U.child,q!==null&&(q.return=U),Gx(b,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===w)break;for(;U.sibling===null;){if(U.return===null||U.return===w)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};var aG=function(b,w,k,I){for(var U=w.child;U!==null;){if(U.tag===5){var q=U.stateNode;k&&I&&(q=en(q,U.type,U.memoizedProps,U)),vt(b,q)}else if(U.tag===6)q=U.stateNode,k&&I&&(q=Dt(q,U.memoizedProps,U)),vt(b,q);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)q=U.child,q!==null&&(q.return=U),aG(b,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===w)break;for(;U.sibling===null;){if(U.return===null||U.return===w)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};Hx=function(b,w){var k=w.stateNode;if(!oG(b,w)){b=k.containerInfo;var I=yt(b);aG(I,w,!1,!1),k.pendingChildren=I,cu(w),Vt(b,I)}},fC=function(b,w,k,I,U){var q=b.stateNode,_e=b.memoizedProps;if((b=oG(b,w))&&_e===I)w.stateNode=q;else{var Ue=w.stateNode,at=au(Sl.current),Tt=null;_e!==I&&(Tt=Q(Ue,k,_e,I,U,at)),b&&Tt===null?w.stateNode=q:(q=dt(q,Tt,k,_e,I,w,b,Ue),J(q,k,I,U,at)&&cu(w),w.stateNode=q,b?cu(w):Gx(q,w,!1,!1))}},hC=function(b,w,k,I){k!==I?(b=au(n0.current),k=au(Sl.current),w.stateNode=re(I,b,k,w),cu(w)):w.stateNode=b.stateNode}}else Hx=function(){},fC=function(){},hC=function(){};function jx(b,w){if(!si)switch(b.tailMode){case"hidden":w=b.tail;for(var k=null;w!==null;)w.alternate!==null&&(k=w),w=w.sibling;k===null?b.tail=null:k.sibling=null;break;case"collapsed":k=b.tail;for(var I=null;k!==null;)k.alternate!==null&&(I=k),k=k.sibling;I===null?w||b.tail===null?b.tail=null:b.tail.sibling=null:I.sibling=null}}function lo(b){var w=b.alternate!==null&&b.alternate.child===b.child,k=0,I=0;if(w)for(var U=b.child;U!==null;)k|=U.lanes|U.childLanes,I|=U.subtreeFlags&14680064,I|=U.flags&14680064,U.return=b,U=U.sibling;else for(U=b.child;U!==null;)k|=U.lanes|U.childLanes,I|=U.subtreeFlags,I|=U.flags,U.return=b,U=U.sibling;return b.subtreeFlags|=I,b.childLanes=k,w}function zxe(b,w,k){var I=w.pendingProps;switch(LP(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lo(w),null;case 1:return Zn(w.type)&&Tn(),lo(w),null;case 3:return I=w.stateNode,r0(),Nt(cn),Nt(tn),WP(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(b===null||b.child===null)&&(Lx(w)?cu(w):b===null||b.memoizedState.isDehydrated&&!(w.flags&256)||(w.flags|=1024,mc!==null&&(yN(mc),mc=null))),Hx(b,w),lo(w),null;case 5:zP(w),k=au(n0.current);var U=w.type;if(b!==null&&w.stateNode!=null)fC(b,w,U,I,k),b.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!I){if(w.stateNode===null)throw Error(o(166));return lo(w),null}if(b=au(Sl.current),Lx(w)){if(!Me)throw Error(o(175));b=Z(w.stateNode,w.type,w.memoizedProps,k,b,w,!Dx),w.updateQueue=b,b!==null&&cu(w)}else{var q=W(U,I,k,b,w);Gx(q,w,!1,!1),w.stateNode=q,J(q,U,I,k,b)&&cu(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return lo(w),null;case 6:if(b&&w.stateNode!=null)hC(b,w,b.memoizedProps,I);else{if(typeof I!="string"&&w.stateNode===null)throw Error(o(166));if(b=au(n0.current),k=au(Sl.current),Lx(w)){if(!Me)throw Error(o(176));if(b=w.stateNode,I=w.memoizedProps,(k=K(b,I,w,!Dx))&&(U=Va,U!==null))switch(q=(U.mode&1)!==0,U.tag){case 3:Je(U.stateNode.containerInfo,b,I,q);break;case 5:nt(U.type,U.memoizedProps,U.stateNode,b,I,q)}k&&cu(w)}else w.stateNode=re(I,b,k,w)}return lo(w),null;case 13:if(Nt(pi),I=w.memoizedState,si&&Wa!==null&&w.mode&1&&!(w.flags&128)){for(b=Wa;b;)b=Pt(b);return e0(),w.flags|=98560,w}if(I!==null&&I.dehydrated!==null){if(I=Lx(w),b===null){if(!I)throw Error(o(318));if(!Me)throw Error(o(344));if(b=w.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(o(317));ne(b,w)}else e0(),!(w.flags&128)&&(w.memoizedState=null),w.flags|=4;return lo(w),null}return mc!==null&&(yN(mc),mc=null),w.flags&128?(w.lanes=k,w):(I=I!==null,k=!1,b===null?Lx(w):k=b.memoizedState!==null,I&&!k&&(w.child.flags|=8192,w.mode&1&&(b===null||pi.current&1?us===0&&(us=3):bN())),w.updateQueue!==null&&(w.flags|=4),lo(w),null);case 4:return r0(),Hx(b,w),b===null&&Ee(w.stateNode.containerInfo),lo(w),null;case 10:return Ts(w.type._context),lo(w),null;case 17:return Zn(w.type)&&Tn(),lo(w),null;case 19:if(Nt(pi),U=w.memoizedState,U===null)return lo(w),null;if(I=(w.flags&128)!==0,q=U.rendering,q===null)if(I)jx(U,!1);else{if(us!==0||b!==null&&b.flags&128)for(b=w.child;b!==null;){if(q=iC(b),q!==null){for(w.flags|=128,jx(U,!1),b=q.updateQueue,b!==null&&(w.updateQueue=b,w.flags|=4),w.subtreeFlags=0,b=k,I=w.child;I!==null;)k=I,U=b,k.flags&=14680066,q=k.alternate,q===null?(k.childLanes=0,k.lanes=U,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=q.childLanes,k.lanes=q.lanes,k.child=q.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=q.memoizedProps,k.memoizedState=q.memoizedState,k.updateQueue=q.updateQueue,k.type=q.type,U=q.dependencies,k.dependencies=U===null?null:{lanes:U.lanes,firstContext:U.firstContext}),I=I.sibling;return Mt(pi,pi.current&1|2),w.child}b=b.sibling}U.tail!==null&&hi()>pN&&(w.flags|=128,I=!0,jx(U,!1),w.lanes=4194304)}else{if(!I)if(b=iC(q),b!==null){if(w.flags|=128,I=!0,b=b.updateQueue,b!==null&&(w.updateQueue=b,w.flags|=4),jx(U,!0),U.tail===null&&U.tailMode==="hidden"&&!q.alternate&&!si)return lo(w),null}else 2*hi()-U.renderingStartTime>pN&&k!==1073741824&&(w.flags|=128,I=!0,jx(U,!1),w.lanes=4194304);U.isBackwards?(q.sibling=w.child,w.child=q):(b=U.last,b!==null?b.sibling=q:w.child=q,U.last=q)}return U.tail!==null?(w=U.tail,U.rendering=w,U.tail=w.sibling,U.renderingStartTime=hi(),w.sibling=null,b=pi.current,Mt(pi,I?b&1|2:b&1),w):(lo(w),null);case 22:case 23:return xN(),I=w.memoizedState!==null,b!==null&&b.memoizedState!==null!==I&&(w.flags|=8192),I&&w.mode&1?Ha&1073741824&&(lo(w),le&&w.subtreeFlags&6&&(w.flags|=8192)):lo(w),null;case 24:return null;case 25:return null}throw Error(o(156,w.tag))}var Vxe=a.ReactCurrentOwner,Ga=!1;function zo(b,w,k,I){w.child=b===null?D7(w,null,k,I):t0(w,b.child,k,I)}function lG(b,w,k,I,U){k=k.render;var q=w.ref;return Oi(w,U),I=HP(b,w,k,I,q,U),k=jP(),b!==null&&!Ga?(w.updateQueue=b.updateQueue,w.flags&=-2053,b.lanes&=~U,bd(b,w,U)):(si&&k&&DP(w),w.flags|=1,zo(b,w,I,U),w.child)}function cG(b,w,k,I,U){if(b===null){var q=k.type;return typeof q=="function"&&!wN(q)&&q.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(w.tag=15,w.type=q,uG(b,w,q,I,U)):(b=$C(k.type,null,I,w,w.mode,U),b.ref=w.ref,b.return=w,w.child=b)}if(q=b.child,!(b.lanes&U)){var _e=q.memoizedProps;if(k=k.compare,k=k!==null?k:gp,k(_e,I)&&b.ref===w.ref)return bd(b,w,U)}return w.flags|=1,b=Af(q,I),b.ref=w.ref,b.return=w,w.child=b}function uG(b,w,k,I,U){if(b!==null&&gp(b.memoizedProps,I)&&b.ref===w.ref)if(Ga=!1,(b.lanes&U)!==0)b.flags&131072&&(Ga=!0);else return w.lanes=b.lanes,bd(b,w,U);return JP(b,w,k,I,U)}function dG(b,w,k){var I=w.pendingProps,U=I.children,q=b!==null?b.memoizedState:null;if(I.mode==="hidden")if(!(w.mode&1))w.memoizedState={baseLanes:0,cachePool:null},Mt(s0,Ha),Ha|=k;else if(k&1073741824)w.memoizedState={baseLanes:0,cachePool:null},I=q!==null?q.baseLanes:k,Mt(s0,Ha),Ha|=I;else return b=q!==null?q.baseLanes|k:k,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:b,cachePool:null},w.updateQueue=null,Mt(s0,Ha),Ha|=b,null;else q!==null?(I=q.baseLanes|k,w.memoizedState=null):I=k,Mt(s0,Ha),Ha|=I;return zo(b,w,U,k),w.child}function fG(b,w){var k=w.ref;(b===null&&k!==null||b!==null&&b.ref!==k)&&(w.flags|=512,w.flags|=2097152)}function JP(b,w,k,I,U){var q=Zn(k)?lr:tn.current;return q=Vn(w,q),Oi(w,U),k=HP(b,w,k,I,q,U),I=jP(),b!==null&&!Ga?(w.updateQueue=b.updateQueue,w.flags&=-2053,b.lanes&=~U,bd(b,w,U)):(si&&I&&DP(w),w.flags|=1,zo(b,w,k,U),w.child)}function hG(b,w,k,I,U){if(Zn(k)){var q=!0;rn(w)}else q=!1;if(Oi(w,U),w.stateNode===null)b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),M7(w,k,I),$P(w,k,I,U),I=!0;else if(b===null){var _e=w.stateNode,Ue=w.memoizedProps;_e.props=Ue;var at=_e.context,Tt=k.contextType;typeof Tt=="object"&&Tt!==null?Tt=Fi(Tt):(Tt=Zn(k)?lr:tn.current,Tt=Vn(w,Tt));var qt=k.getDerivedStateFromProps,In=typeof qt=="function"||typeof _e.getSnapshotBeforeUpdate=="function";In||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(Ue!==I||at!==Tt)&&A7(w,_e,I,Tt),Sf=!1;var yn=w.memoizedState;_e.state=yn,Q_(w,I,_e,U),at=w.memoizedState,Ue!==I||yn!==at||cn.current||Sf?(typeof qt=="function"&&(NP(w,k,qt,I),at=w.memoizedState),(Ue=Sf||E7(w,k,Ue,I,yn,at,Tt))?(In||typeof _e.UNSAFE_componentWillMount!="function"&&typeof _e.componentWillMount!="function"||(typeof _e.componentWillMount=="function"&&_e.componentWillMount(),typeof _e.UNSAFE_componentWillMount=="function"&&_e.UNSAFE_componentWillMount()),typeof _e.componentDidMount=="function"&&(w.flags|=4194308)):(typeof _e.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=I,w.memoizedState=at),_e.props=I,_e.state=at,_e.context=Tt,I=Ue):(typeof _e.componentDidMount=="function"&&(w.flags|=4194308),I=!1)}else{_e=w.stateNode,S7(b,w),Ue=w.memoizedProps,Tt=w.type===w.elementType?Ue:Bo(w.type,Ue),_e.props=Tt,In=w.pendingProps,yn=_e.context,at=k.contextType,typeof at=="object"&&at!==null?at=Fi(at):(at=Zn(k)?lr:tn.current,at=Vn(w,at));var Fr=k.getDerivedStateFromProps;(qt=typeof Fr=="function"||typeof _e.getSnapshotBeforeUpdate=="function")||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(Ue!==In||yn!==at)&&A7(w,_e,I,at),Sf=!1,yn=w.memoizedState,_e.state=yn,Q_(w,I,_e,U);var ln=w.memoizedState;Ue!==In||yn!==ln||cn.current||Sf?(typeof Fr=="function"&&(NP(w,k,Fr,I),ln=w.memoizedState),(Tt=Sf||E7(w,k,Tt,I,yn,ln,at)||!1)?(qt||typeof _e.UNSAFE_componentWillUpdate!="function"&&typeof _e.componentWillUpdate!="function"||(typeof _e.componentWillUpdate=="function"&&_e.componentWillUpdate(I,ln,at),typeof _e.UNSAFE_componentWillUpdate=="function"&&_e.UNSAFE_componentWillUpdate(I,ln,at)),typeof _e.componentDidUpdate=="function"&&(w.flags|=4),typeof _e.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof _e.componentDidUpdate!="function"||Ue===b.memoizedProps&&yn===b.memoizedState||(w.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||Ue===b.memoizedProps&&yn===b.memoizedState||(w.flags|=1024),w.memoizedProps=I,w.memoizedState=ln),_e.props=I,_e.state=ln,_e.context=at,I=Tt):(typeof _e.componentDidUpdate!="function"||Ue===b.memoizedProps&&yn===b.memoizedState||(w.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||Ue===b.memoizedProps&&yn===b.memoizedState||(w.flags|=1024),I=!1)}return QP(b,w,k,I,q,U)}function QP(b,w,k,I,U,q){fG(b,w);var _e=(w.flags&128)!==0;if(!I&&!_e)return U&&an(w,k,!1),bd(b,w,q);I=w.stateNode,Vxe.current=w;var Ue=_e&&typeof k.getDerivedStateFromError!="function"?null:I.render();return w.flags|=1,b!==null&&_e?(w.child=t0(w,b.child,null,q),w.child=t0(w,null,Ue,q)):zo(b,w,Ue,q),w.memoizedState=I.state,U&&an(w,k,!0),w.child}function pG(b){var w=b.stateNode;w.pendingContext?hn(b,w.pendingContext,w.pendingContext!==w.context):w.context&&hn(b,w.context,!1),UP(b,w.containerInfo)}function mG(b,w,k,I,U){return e0(),BP(U),w.flags|=256,zo(b,w,k,I),w.child}var pC={dehydrated:null,treeContext:null,retryLane:0};function mC(b){return{baseLanes:b,cachePool:null}}function gG(b,w,k){var I=w.pendingProps,U=pi.current,q=!1,_e=(w.flags&128)!==0,Ue;if((Ue=_e)||(Ue=b!==null&&b.memoizedState===null?!1:(U&2)!==0),Ue?(q=!0,w.flags&=-129):(b===null||b.memoizedState!==null)&&(U|=1),Mt(pi,U&1),b===null)return FP(w),b=w.memoizedState,b!==null&&(b=b.dehydrated,b!==null)?(w.mode&1?_t(b)?w.lanes=8:w.lanes=1073741824:w.lanes=1,null):(U=I.children,b=I.fallback,q?(I=w.mode,q=w.child,U={mode:"hidden",children:U},!(I&1)&&q!==null?(q.childLanes=0,q.pendingProps=U):q=DC(U,I,0,null),b=Ep(b,I,k,null),q.return=w,b.return=w,q.sibling=b,w.child=q,w.child.memoizedState=mC(k),w.memoizedState=pC,b):eN(w,U));if(U=b.memoizedState,U!==null){if(Ue=U.dehydrated,Ue!==null){if(_e)return w.flags&256?(w.flags&=-257,gC(b,w,k,Error(o(422)))):w.memoizedState!==null?(w.child=b.child,w.flags|=128,null):(q=I.fallback,U=w.mode,I=DC({mode:"visible",children:I.children},U,0,null),q=Ep(q,U,k,null),q.flags|=2,I.return=w,q.return=w,I.sibling=q,w.child=I,w.mode&1&&t0(w,b.child,null,k),w.child.memoizedState=mC(k),w.memoizedState=pC,q);if(!(w.mode&1))w=gC(b,w,k,null);else if(_t(Ue))w=gC(b,w,k,Error(o(419)));else if(I=(k&b.childLanes)!==0,Ga||I){if(I=qi,I!==null){switch(k&-k){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}I=q&(I.suspendedLanes|k)?0:q,I!==0&&I!==U.retryLane&&(U.retryLane=I,Cl(b,I,-1))}bN(),w=gC(b,w,k,Error(o(421)))}else fn(Ue)?(w.flags|=128,w.child=b.child,w=t1e.bind(null,b),Lt(Ue,w),w=null):(k=U.treeContext,Me&&(Wa=Cn(Ue),Va=w,si=!0,mc=null,Dx=!1,k!==null&&(bl[wl++]=vd,bl[wl++]=yd,bl[wl++]=yp,vd=k.id,yd=k.overflow,yp=w)),w=eN(w,w.pendingProps.children),w.flags|=4096);return w}return q?(I=yG(b,w,I.children,I.fallback,k),q=w.child,U=b.child.memoizedState,q.memoizedState=U===null?mC(k):{baseLanes:U.baseLanes|k,cachePool:null},q.childLanes=b.childLanes&~k,w.memoizedState=pC,I):(k=vG(b,w,I.children,k),w.memoizedState=null,k)}return q?(I=yG(b,w,I.children,I.fallback,k),q=w.child,U=b.child.memoizedState,q.memoizedState=U===null?mC(k):{baseLanes:U.baseLanes|k,cachePool:null},q.childLanes=b.childLanes&~k,w.memoizedState=pC,I):(k=vG(b,w,I.children,k),w.memoizedState=null,k)}function eN(b,w){return w=DC({mode:"visible",children:w},b.mode,0,null),w.return=b,b.child=w}function vG(b,w,k,I){var U=b.child;return b=U.sibling,k=Af(U,{mode:"visible",children:k}),!(w.mode&1)&&(k.lanes=I),k.return=w,k.sibling=null,b!==null&&(I=w.deletions,I===null?(w.deletions=[b],w.flags|=16):I.push(b)),w.child=k}function yG(b,w,k,I,U){var q=w.mode;b=b.child;var _e=b.sibling,Ue={mode:"hidden",children:k};return!(q&1)&&w.child!==b?(k=w.child,k.childLanes=0,k.pendingProps=Ue,w.deletions=null):(k=Af(b,Ue),k.subtreeFlags=b.subtreeFlags&14680064),_e!==null?I=Af(_e,I):(I=Ep(I,q,U,null),I.flags|=2),I.return=w,k.return=w,k.sibling=I,w.child=k,I}function gC(b,w,k,I){return I!==null&&BP(I),t0(w,b.child,null,k),b=eN(w,w.pendingProps.children),b.flags|=2,w.memoizedState=null,b}function xG(b,w,k){b.lanes|=w;var I=b.alternate;I!==null&&(I.lanes|=w),Uo(b.return,w,k)}function tN(b,w,k,I,U){var q=b.memoizedState;q===null?b.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:I,tail:k,tailMode:U}:(q.isBackwards=w,q.rendering=null,q.renderingStartTime=0,q.last=I,q.tail=k,q.tailMode=U)}function bG(b,w,k){var I=w.pendingProps,U=I.revealOrder,q=I.tail;if(zo(b,w,I.children,k),I=pi.current,I&2)I=I&1|2,w.flags|=128;else{if(b!==null&&b.flags&128)e:for(b=w.child;b!==null;){if(b.tag===13)b.memoizedState!==null&&xG(b,k,w);else if(b.tag===19)xG(b,k,w);else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===w)break e;for(;b.sibling===null;){if(b.return===null||b.return===w)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}I&=1}if(Mt(pi,I),!(w.mode&1))w.memoizedState=null;else switch(U){case"forwards":for(k=w.child,U=null;k!==null;)b=k.alternate,b!==null&&iC(b)===null&&(U=k),k=k.sibling;k=U,k===null?(U=w.child,w.child=null):(U=k.sibling,k.sibling=null),tN(w,!1,U,k,q);break;case"backwards":for(k=null,U=w.child,w.child=null;U!==null;){if(b=U.alternate,b!==null&&iC(b)===null){w.child=U;break}b=U.sibling,U.sibling=k,k=U,U=b}tN(w,!0,k,null,q);break;case"together":tN(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function bd(b,w,k){if(b!==null&&(w.dependencies=b.dependencies),o0|=w.lanes,!(k&w.childLanes))return null;if(b!==null&&w.child!==b.child)throw Error(o(153));if(w.child!==null){for(b=w.child,k=Af(b,b.pendingProps),w.child=k,k.return=w;b.sibling!==null;)b=b.sibling,k=k.sibling=Af(b,b.pendingProps),k.return=w;k.sibling=null}return w.child}function Wxe(b,w,k){switch(w.tag){case 3:pG(w),e0();break;case 5:L7(w);break;case 1:Zn(w.type)&&rn(w);break;case 4:UP(w,w.stateNode.containerInfo);break;case 10:Z_(w,w.type._context,w.memoizedProps.value);break;case 13:var I=w.memoizedState;if(I!==null)return I.dehydrated!==null?(Mt(pi,pi.current&1),w.flags|=128,null):k&w.child.childLanes?gG(b,w,k):(Mt(pi,pi.current&1),b=bd(b,w,k),b!==null?b.sibling:null);Mt(pi,pi.current&1);break;case 19:if(I=(k&w.childLanes)!==0,b.flags&128){if(I)return bG(b,w,k);w.flags|=128}var U=w.memoizedState;if(U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),Mt(pi,pi.current),I)break;return null;case 22:case 23:return w.lanes=0,dG(b,w,k)}return bd(b,w,k)}function Gxe(b,w){switch(LP(w),w.tag){case 1:return Zn(w.type)&&Tn(),b=w.flags,b&65536?(w.flags=b&-65537|128,w):null;case 3:return r0(),Nt(cn),Nt(tn),WP(),b=w.flags,b&65536&&!(b&128)?(w.flags=b&-65537|128,w):null;case 5:return zP(w),null;case 13:if(Nt(pi),b=w.memoizedState,b!==null&&b.dehydrated!==null){if(w.alternate===null)throw Error(o(340));e0()}return b=w.flags,b&65536?(w.flags=b&-65537|128,w):null;case 19:return Nt(pi),null;case 4:return r0(),null;case 10:return Ts(w.type._context),null;case 22:case 23:return xN(),null;case 24:return null;default:return null}}var vC=!1,wp=!1,Hxe=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function yC(b,w){var k=b.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(I){da(b,w,I)}else k.current=null}function nN(b,w,k){try{k()}catch(I){da(b,w,I)}}var wG=!1;function jxe(b,w){for(B(b.containerInfo),Ft=w;Ft!==null;)if(b=Ft,w=b.child,(b.subtreeFlags&1028)!==0&&w!==null)w.return=b,Ft=w;else for(;Ft!==null;){b=Ft;try{var k=b.alternate;if(b.flags&1024)switch(b.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var I=k.memoizedProps,U=k.memoizedState,q=b.stateNode,_e=q.getSnapshotBeforeUpdate(b.elementType===b.type?I:Bo(b.type,I),U);q.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:le&&ut(b.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ue){da(b,b.return,Ue)}if(w=b.sibling,w!==null){w.return=b.return,Ft=w;break}Ft=b.return}return k=wG,wG=!1,k}function Sp(b,w,k){var I=w.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var U=I=I.next;do{if((U.tag&b)===b){var q=U.destroy;U.destroy=void 0,q!==void 0&&nN(w,k,q)}U=U.next}while(U!==I)}}function Xx(b,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var k=w=w.next;do{if((k.tag&b)===b){var I=k.create;k.destroy=I()}k=k.next}while(k!==w)}}function rN(b){var w=b.ref;if(w!==null){var k=b.stateNode;switch(b.tag){case 5:b=z(k);break;default:b=k}typeof w=="function"?w(b):w.current=b}}function SG(b,w,k){if(Ba&&typeof Ba.onCommitFiberUnmount=="function")try{Ba.onCommitFiberUnmount(pp,w)}catch{}switch(w.tag){case 0:case 11:case 14:case 15:if(b=w.updateQueue,b!==null&&(b=b.lastEffect,b!==null)){var I=b=b.next;do{var U=I,q=U.destroy;U=U.tag,q!==void 0&&(U&2||U&4)&&nN(w,k,q),I=I.next}while(I!==b)}break;case 1:if(yC(w,k),b=w.stateNode,typeof b.componentWillUnmount=="function")try{b.props=w.memoizedProps,b.state=w.memoizedState,b.componentWillUnmount()}catch(_e){da(w,k,_e)}break;case 5:yC(w,k);break;case 4:le?AG(b,w,k):H&&H&&(w=w.stateNode.containerInfo,k=yt(w),It(w,k))}}function _G(b,w,k){for(var I=w;;)if(SG(b,I,k),I.child===null||le&&I.tag===4){if(I===w)break;for(;I.sibling===null;){if(I.return===null||I.return===w)return;I=I.return}I.sibling.return=I.return,I=I.sibling}else I.child.return=I,I=I.child}function CG(b){var w=b.alternate;w!==null&&(b.alternate=null,CG(w)),b.child=null,b.deletions=null,b.sibling=null,b.tag===5&&(w=b.stateNode,w!==null&&qe(w)),b.stateNode=null,b.return=null,b.dependencies=null,b.memoizedProps=null,b.memoizedState=null,b.pendingProps=null,b.stateNode=null,b.updateQueue=null}function TG(b){return b.tag===5||b.tag===3||b.tag===4}function EG(b){e:for(;;){for(;b.sibling===null;){if(b.return===null||TG(b.return))return null;b=b.return}for(b.sibling.return=b.return,b=b.sibling;b.tag!==5&&b.tag!==6&&b.tag!==18;){if(b.flags&2||b.child===null||b.tag===4)continue e;b.child.return=b,b=b.child}if(!(b.flags&2))return b.stateNode}}function MG(b){if(le){e:{for(var w=b.return;w!==null;){if(TG(w))break e;w=w.return}throw Error(o(160))}var k=w;switch(k.tag){case 5:w=k.stateNode,k.flags&32&&(He(w),k.flags&=-33),k=EG(b),sN(b,k,w);break;case 3:case 4:w=k.stateNode.containerInfo,k=EG(b),iN(b,k,w);break;default:throw Error(o(161))}}}function iN(b,w,k){var I=b.tag;if(I===5||I===6)b=b.stateNode,w?Xe(k,b,w):De(k,b);else if(I!==4&&(b=b.child,b!==null))for(iN(b,w,k),b=b.sibling;b!==null;)iN(b,w,k),b=b.sibling}function sN(b,w,k){var I=b.tag;if(I===5||I===6)b=b.stateNode,w?Ye(k,b,w):Ne(k,b);else if(I!==4&&(b=b.child,b!==null))for(sN(b,w,k),b=b.sibling;b!==null;)sN(b,w,k),b=b.sibling}function AG(b,w,k){for(var I=w,U=!1,q,_e;;){if(!U){U=I.return;e:for(;;){if(U===null)throw Error(o(160));switch(q=U.stateNode,U.tag){case 5:_e=!1;break e;case 3:q=q.containerInfo,_e=!0;break e;case 4:q=q.containerInfo,_e=!0;break e}U=U.return}U=!0}if(I.tag===5||I.tag===6)_G(b,I,k),_e?pe(q,I.stateNode):Le(q,I.stateNode);else if(I.tag===18)_e?de(q,I.stateNode):Te(q,I.stateNode);else if(I.tag===4){if(I.child!==null){q=I.stateNode.containerInfo,_e=!0,I.child.return=I,I=I.child;continue}}else if(SG(b,I,k),I.child!==null){I.child.return=I,I=I.child;continue}if(I===w)break;for(;I.sibling===null;){if(I.return===null||I.return===w)return;I=I.return,I.tag===4&&(U=!1)}I.sibling.return=I.return,I=I.sibling}}function oN(b,w){if(le){switch(w.tag){case 0:case 11:case 14:case 15:Sp(3,w,w.return),Xx(3,w),Sp(5,w,w.return);return;case 1:return;case 5:var k=w.stateNode;if(k!=null){var I=w.memoizedProps;b=b!==null?b.memoizedProps:I;var U=w.type,q=w.updateQueue;w.updateQueue=null,q!==null&&ct(k,q,U,b,I,w)}return;case 6:if(w.stateNode===null)throw Error(o(162));k=w.memoizedProps,Ve(w.stateNode,b!==null?b.memoizedProps:k,k);return;case 3:Me&&b!==null&&b.memoizedState.isDehydrated&&ie(w.stateNode.containerInfo);return;case 12:return;case 13:xC(w);return;case 19:xC(w);return;case 17:return}throw Error(o(163))}switch(w.tag){case 0:case 11:case 14:case 15:Sp(3,w,w.return),Xx(3,w),Sp(5,w,w.return);return;case 12:return;case 13:xC(w);return;case 19:xC(w);return;case 3:Me&&b!==null&&b.memoizedState.isDehydrated&&ie(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(H){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,It(w.containerInfo,w.pendingChildren);break e}throw Error(o(163))}}function xC(b){var w=b.updateQueue;if(w!==null){b.updateQueue=null;var k=b.stateNode;k===null&&(k=b.stateNode=new Hxe),w.forEach(function(I){var U=n1e.bind(null,b,I);k.has(I)||(k.add(I),I.then(U,U))})}}function Xxe(b,w){for(Ft=w;Ft!==null;){w=Ft;var k=w.deletions;if(k!==null)for(var I=0;I<k.length;I++){var U=k[I];try{var q=b;le?AG(q,U,w):_G(q,U,w);var _e=U.alternate;_e!==null&&(_e.return=null),U.return=null}catch(sn){da(U,w,sn)}}if(k=w.child,w.subtreeFlags&12854&&k!==null)k.return=w,Ft=k;else for(;Ft!==null;){w=Ft;try{var Ue=w.flags;if(Ue&32&&le&&He(w.stateNode),Ue&512){var at=w.alternate;if(at!==null){var Tt=at.ref;Tt!==null&&(typeof Tt=="function"?Tt(null):Tt.current=null)}}if(Ue&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var qt=w.alternate;(qt===null||qt.memoizedState===null)&&(hN=hi())}break;case 22:var In=w.memoizedState!==null,yn=w.alternate,Fr=yn!==null&&yn.memoizedState!==null;if(k=w,le){e:if(I=k,U=In,q=null,le)for(var ln=I;;){if(ln.tag===5){if(q===null){q=ln;var co=ln.stateNode;U?ot(co):Ie(ln.stateNode,ln.memoizedProps)}}else if(ln.tag===6){if(q===null){var El=ln.stateNode;U?et(El):Ce(El,ln.memoizedProps)}}else if((ln.tag!==22&&ln.tag!==23||ln.memoizedState===null||ln===I)&&ln.child!==null){ln.child.return=ln,ln=ln.child;continue}if(ln===I)break;for(;ln.sibling===null;){if(ln.return===null||ln.return===I)break e;q===ln&&(q=null),ln=ln.return}q===ln&&(q=null),ln.sibling.return=ln.return,ln=ln.sibling}}if(In&&!Fr&&k.mode&1){Ft=k;for(var tt=k.child;tt!==null;){for(k=Ft=tt;Ft!==null;){I=Ft;var je=I.child;switch(I.tag){case 0:case 11:case 14:case 15:Sp(4,I,I.return);break;case 1:yC(I,I.return);var st=I.stateNode;if(typeof st.componentWillUnmount=="function"){var Gt=I.return;try{st.props=I.memoizedProps,st.state=I.memoizedState,st.componentWillUnmount()}catch(sn){da(I,Gt,sn)}}break;case 5:yC(I,I.return);break;case 22:if(I.memoizedState!==null){RG(k);continue}}je!==null?(je.return=I,Ft=je):RG(k)}tt=tt.sibling}}}switch(Ue&4102){case 2:MG(w),w.flags&=-3;break;case 6:MG(w),w.flags&=-3,oN(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,oN(w.alternate,w);break;case 4:oN(w.alternate,w)}}catch(sn){da(w,w.return,sn)}if(k=w.sibling,k!==null){k.return=w.return,Ft=k;break}Ft=w.return}}}function qxe(b,w,k){Ft=b,kG(b)}function kG(b,w,k){for(var I=(b.mode&1)!==0;Ft!==null;){var U=Ft,q=U.child;if(U.tag===22&&I){var _e=U.memoizedState!==null||vC;if(!_e){var Ue=U.alternate,at=Ue!==null&&Ue.memoizedState!==null||wp;Ue=vC;var Tt=wp;if(vC=_e,(wp=at)&&!Tt)for(Ft=U;Ft!==null;)_e=Ft,at=_e.child,_e.tag===22&&_e.memoizedState!==null?PG(U):at!==null?(at.return=_e,Ft=at):PG(U);for(;q!==null;)Ft=q,kG(q),q=q.sibling;Ft=U,vC=Ue,wp=Tt}IG(b)}else U.subtreeFlags&8772&&q!==null?(q.return=U,Ft=q):IG(b)}}function IG(b){for(;Ft!==null;){var w=Ft;if(w.flags&8772){var k=w.alternate;try{if(w.flags&8772)switch(w.tag){case 0:case 11:case 15:wp||Xx(5,w);break;case 1:var I=w.stateNode;if(w.flags&4&&!wp)if(k===null)I.componentDidMount();else{var U=w.elementType===w.type?k.memoizedProps:Bo(w.type,k.memoizedProps);I.componentDidUpdate(U,k.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var q=w.updateQueue;q!==null&&C7(w,q,I);break;case 3:var _e=w.updateQueue;if(_e!==null){if(k=null,w.child!==null)switch(w.child.tag){case 5:k=z(w.child.stateNode);break;case 1:k=w.child.stateNode}C7(w,_e,k)}break;case 5:var Ue=w.stateNode;k===null&&w.flags&4&&gt(Ue,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(Me&&w.memoizedState===null){var at=w.alternate;if(at!==null){var Tt=at.memoizedState;if(Tt!==null){var qt=Tt.dehydrated;qt!==null&&ce(qt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}wp||w.flags&512&&rN(w)}catch(In){da(w,w.return,In)}}if(w===b){Ft=null;break}if(k=w.sibling,k!==null){k.return=w.return,Ft=k;break}Ft=w.return}}function RG(b){for(;Ft!==null;){var w=Ft;if(w===b){Ft=null;break}var k=w.sibling;if(k!==null){k.return=w.return,Ft=k;break}Ft=w.return}}function PG(b){for(;Ft!==null;){var w=Ft;try{switch(w.tag){case 0:case 11:case 15:var k=w.return;try{Xx(4,w)}catch(at){da(w,k,at)}break;case 1:var I=w.stateNode;if(typeof I.componentDidMount=="function"){var U=w.return;try{I.componentDidMount()}catch(at){da(w,U,at)}}var q=w.return;try{rN(w)}catch(at){da(w,q,at)}break;case 5:var _e=w.return;try{rN(w)}catch(at){da(w,_e,at)}}}catch(at){da(w,w.return,at)}if(w===b){Ft=null;break}var Ue=w.sibling;if(Ue!==null){Ue.return=w.return,Ft=Ue;break}Ft=w.return}}var bC=0,wC=1,SC=2,_C=3,CC=4;if(typeof Symbol=="function"&&Symbol.for){var qx=Symbol.for;bC=qx("selector.component"),wC=qx("selector.has_pseudo_class"),SC=qx("selector.role"),_C=qx("selector.test_id"),CC=qx("selector.text")}function aN(b){var w=we(b);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(o(364));return w}if(b=oe(b),b===null)throw Error(o(362));return b.stateNode.current}function lN(b,w){switch(w.$$typeof){case bC:if(b.type===w.value)return!0;break;case wC:e:{w=w.value,b=[b,0];for(var k=0;k<b.length;){var I=b[k++],U=b[k++],q=w[U];if(I.tag!==5||!be(I)){for(;q!=null&&lN(I,q);)U++,q=w[U];if(U===w.length){w=!0;break e}else for(I=I.child;I!==null;)b.push(I,U),I=I.sibling}}w=!1}return w;case SC:if(b.tag===5&&Re(b.stateNode,w.value))return!0;break;case CC:if((b.tag===5||b.tag===6)&&(b=Se(b),b!==null&&0<=b.indexOf(w.value)))return!0;break;case _C:if(b.tag===5&&(b=b.memoizedProps["data-testname"],typeof b=="string"&&b.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function cN(b){switch(b.$$typeof){case bC:return"<"+(T(b.value)||"Unknown")+">";case wC:return":has("+(cN(b)||"")+")";case SC:return'[role="'+b.value+'"]';case CC:return'"'+b.value+'"';case _C:return'[data-testname="'+b.value+'"]';default:throw Error(o(365))}}function NG(b,w){var k=[];b=[b,0];for(var I=0;I<b.length;){var U=b[I++],q=b[I++],_e=w[q];if(U.tag!==5||!be(U)){for(;_e!=null&&lN(U,_e);)q++,_e=w[q];if(q===w.length)k.push(U);else for(U=U.child;U!==null;)b.push(U,q),U=U.sibling}}return k}function uN(b,w){if(!Y)throw Error(o(363));b=aN(b),b=NG(b,w),w=[],b=Array.from(b);for(var k=0;k<b.length;){var I=b[k++];if(I.tag===5)be(I)||w.push(I.stateNode);else for(I=I.child;I!==null;)b.push(I),I=I.sibling}return w}var Yxe=Math.ceil,TC=a.ReactCurrentDispatcher,dN=a.ReactCurrentOwner,Bi=a.ReactCurrentBatchConfig,Kn=0,qi=null,Yi=null,Ws=0,Ha=0,s0=vn(0),us=0,Yx=null,o0=0,EC=0,fN=0,Kx=null,ca=null,hN=0,pN=1/0;function a0(){pN=hi()+500}var MC=!1,mN=null,Cf=null,AC=!1,Tf=null,kC=0,Zx=0,gN=null,IC=-1,RC=0;function Vo(){return Kn&6?hi():IC!==-1?IC:IC=hi()}function Ef(b){return b.mode&1?Kn&2&&Ws!==0?Ws&-Ws:mp.transition!==null?(RC===0&&(b=dd,dd<<=1,!(dd&4194240)&&(dd=64),RC=b),RC):(b=Jn,b!==0?b:ge()):1}function Cl(b,w,k){if(50<Zx)throw Zx=0,gN=null,Error(o(185));var I=PC(b,w);return I===null?null:(iu(I,w,k),(!(Kn&2)||I!==qi)&&(I===qi&&(!(Kn&2)&&(EC|=w),us===4&&Mf(I,Ws)),ua(I,k),w===1&&Kn===0&&!(b.mode&1)&&(a0(),ou&&la())),I)}function PC(b,w){b.lanes|=w;var k=b.alternate;for(k!==null&&(k.lanes|=w),k=b,b=b.return;b!==null;)b.childLanes|=w,k=b.alternate,k!==null&&(k.childLanes|=w),k=b,b=b.return;return k.tag===3?k.stateNode:null}function ua(b,w){var k=b.callbackNode;Ax(b,w);var I=fp(b,b===qi?Ws:0);if(I===0)k!==null&&Yg(k),b.callbackNode=null,b.callbackPriority=0;else if(w=I&-I,b.callbackPriority!==w){if(k!=null&&Yg(k),w===1)b.tag===0?$x(DG.bind(null,b)):Nx(DG.bind(null,b)),Ae?ee(function(){Kn===0&&la()}):md(hp,la),k=null;else{switch(kx(I)){case 1:k=hp;break;case 4:k=Y_;break;case 16:k=Oo;break;case 536870912:k=Rx;break;default:k=Oo}k=GG(k,$G.bind(null,b))}b.callbackPriority=w,b.callbackNode=k}}function $G(b,w){if(IC=-1,RC=0,Kn&6)throw Error(o(327));var k=b.callbackNode;if(Tp()&&b.callbackNode!==k)return null;var I=fp(b,b===qi?Ws:0);if(I===0)return null;if(I&30||I&b.expiredLanes||w)w=NC(b,I);else{w=I;var U=Kn;Kn|=2;var q=FG();(qi!==b||Ws!==w)&&(a0(),_p(b,w));do try{Jxe();break}catch(Ue){OG(b,Ue)}while(!0);Zg(),TC.current=q,Kn=U,Yi!==null?w=0:(qi=null,Ws=0,w=us)}if(w!==0){if(w===2&&(U=pd(b),U!==0&&(I=U,w=vN(b,U))),w===1)throw k=Yx,_p(b,0),Mf(b,I),ua(b,hi()),k;if(w===6)Mf(b,I);else{if(U=b.current.alternate,!(I&30)&&!Kxe(U)&&(w=NC(b,I),w===2&&(q=pd(b),q!==0&&(I=q,w=vN(b,q))),w===1))throw k=Yx,_p(b,0),Mf(b,I),ua(b,hi()),k;switch(b.finishedWork=U,b.finishedLanes=I,w){case 0:case 1:throw Error(o(345));case 2:Cp(b,ca);break;case 3:if(Mf(b,I),(I&130023424)===I&&(w=hN+500-hi(),10<w)){if(fp(b,0)!==0)break;if(U=b.suspendedLanes,(U&I)!==I){Vo(),b.pingedLanes|=b.suspendedLanes&U;break}b.timeoutHandle=se(Cp.bind(null,b,ca),w);break}Cp(b,ca);break;case 4:if(Mf(b,I),(I&4194240)===I)break;for(w=b.eventTimes,U=-1;0<I;){var _e=31-Nr(I);q=1<<_e,_e=w[_e],_e>U&&(U=_e),I&=~q}if(I=U,I=hi()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*Yxe(I/1960))-I,10<I){b.timeoutHandle=se(Cp.bind(null,b,ca),I);break}Cp(b,ca);break;case 5:Cp(b,ca);break;default:throw Error(o(329))}}}return ua(b,hi()),b.callbackNode===k?$G.bind(null,b):null}function vN(b,w){var k=Kx;return b.current.memoizedState.isDehydrated&&(_p(b,w).flags|=256),b=NC(b,w),b!==2&&(w=ca,ca=k,w!==null&&yN(w)),b}function yN(b){ca===null?ca=b:ca.push.apply(ca,b)}function Kxe(b){for(var w=b;;){if(w.flags&16384){var k=w.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var I=0;I<k.length;I++){var U=k[I],q=U.getSnapshot;U=U.value;try{if(!Ua(q(),U))return!1}catch{return!1}}}if(k=w.child,w.subtreeFlags&16384&&k!==null)k.return=w,w=k;else{if(w===b)break;for(;w.sibling===null;){if(w.return===null||w.return===b)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function Mf(b,w){for(w&=~fN,w&=~EC,b.suspendedLanes|=w,b.pingedLanes&=~w,b=b.expirationTimes;0<w;){var k=31-Nr(w),I=1<<k;b[k]=-1,w&=~I}}function DG(b){if(Kn&6)throw Error(o(327));Tp();var w=fp(b,0);if(!(w&1))return ua(b,hi()),null;var k=NC(b,w);if(b.tag!==0&&k===2){var I=pd(b);I!==0&&(w=I,k=vN(b,I))}if(k===1)throw k=Yx,_p(b,0),Mf(b,w),ua(b,hi()),k;if(k===6)throw Error(o(345));return b.finishedWork=b.current.alternate,b.finishedLanes=w,Cp(b,ca),ua(b,hi()),null}function LG(b){Tf!==null&&Tf.tag===0&&!(Kn&6)&&Tp();var w=Kn;Kn|=1;var k=Bi.transition,I=Jn;try{if(Bi.transition=null,Jn=1,b)return b()}finally{Jn=I,Bi.transition=k,Kn=w,!(Kn&6)&&la()}}function xN(){Ha=s0.current,Nt(s0)}function _p(b,w){b.finishedWork=null,b.finishedLanes=0;var k=b.timeoutHandle;if(k!==ae&&(b.timeoutHandle=ae,fe(k)),Yi!==null)for(k=Yi.return;k!==null;){var I=k;switch(LP(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&Tn();break;case 3:r0(),Nt(cn),Nt(tn),WP();break;case 5:zP(I);break;case 4:r0();break;case 13:Nt(pi);break;case 19:Nt(pi);break;case 10:Ts(I.type._context);break;case 22:case 23:xN()}k=k.return}if(qi=b,Yi=b=Af(b.current,null),Ws=Ha=w,us=0,Yx=null,fN=EC=o0=0,ca=Kx=null,za!==null){for(w=0;w<za.length;w++)if(k=za[w],I=k.interleaved,I!==null){k.interleaved=null;var U=I.next,q=k.pending;if(q!==null){var _e=q.next;q.next=U,I.next=_e}k.pending=I}za=null}return b}function OG(b,w){do{var k=Yi;try{if(Zg(),sC.current=dC,oC){for(var I=wi.memoizedState;I!==null;){var U=I.queue;U!==null&&(U.pending=null),I=I.next}oC=!1}if(i0=0,Es=oo=wi=null,Ux=!1,zx=0,dN.current=null,k===null||k.return===null){us=1,Yx=w,Yi=null;break}e:{var q=b,_e=k.return,Ue=k,at=w;if(w=Ws,Ue.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var Tt=at,qt=Ue,In=qt.tag;if(!(qt.mode&1)&&(In===0||In===11||In===15)){var yn=qt.alternate;yn?(qt.updateQueue=yn.updateQueue,qt.memoizedState=yn.memoizedState,qt.lanes=yn.lanes):(qt.updateQueue=null,qt.memoizedState=null)}var Fr=iG(_e);if(Fr!==null){Fr.flags&=-257,sG(Fr,_e,Ue,q,w),Fr.mode&1&&rG(q,Tt,w),w=Fr,at=Tt;var ln=w.updateQueue;if(ln===null){var co=new Set;co.add(at),w.updateQueue=co}else ln.add(at);break e}else{if(!(w&1)){rG(q,Tt,w),bN();break e}at=Error(o(426))}}else if(si&&Ue.mode&1){var El=iG(_e);if(El!==null){!(El.flags&65536)&&(El.flags|=256),sG(El,_e,Ue,q,w),BP(at);break e}}q=at,us!==4&&(us=2),Kx===null?Kx=[q]:Kx.push(q),at=KP(at,Ue),Ue=_e;do{switch(Ue.tag){case 3:Ue.flags|=65536,w&=-w,Ue.lanes|=w;var tt=tG(Ue,at,w);_7(Ue,tt);break e;case 1:q=at;var je=Ue.type,st=Ue.stateNode;if(!(Ue.flags&128)&&(typeof je.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(Cf===null||!Cf.has(st)))){Ue.flags|=65536,w&=-w,Ue.lanes|=w;var Gt=nG(Ue,q,w);_7(Ue,Gt);break e}}Ue=Ue.return}while(Ue!==null)}UG(k)}catch(sn){w=sn,Yi===k&&k!==null&&(Yi=k=k.return);continue}break}while(!0)}function FG(){var b=TC.current;return TC.current=dC,b===null?dC:b}function bN(){(us===0||us===3||us===2)&&(us=4),qi===null||!(o0&268435455)&&!(EC&268435455)||Mf(qi,Ws)}function NC(b,w){var k=Kn;Kn|=2;var I=FG();qi===b&&Ws===w||_p(b,w);do try{Zxe();break}catch(U){OG(b,U)}while(!0);if(Zg(),Kn=k,TC.current=I,Yi!==null)throw Error(o(261));return qi=null,Ws=0,us}function Zxe(){for(;Yi!==null;)BG(Yi)}function Jxe(){for(;Yi!==null&&!Ix();)BG(Yi)}function BG(b){var w=WG(b.alternate,b,Ha);b.memoizedProps=b.pendingProps,w===null?UG(b):Yi=w,dN.current=null}function UG(b){var w=b;do{var k=w.alternate;if(b=w.return,w.flags&32768){if(k=Gxe(k,w),k!==null){k.flags&=32767,Yi=k;return}if(b!==null)b.flags|=32768,b.subtreeFlags=0,b.deletions=null;else{us=6,Yi=null;return}}else if(k=zxe(k,w,Ha),k!==null){Yi=k;return}if(w=w.sibling,w!==null){Yi=w;return}Yi=w=b}while(w!==null);us===0&&(us=5)}function Cp(b,w){var k=Jn,I=Bi.transition;try{Bi.transition=null,Jn=1,Qxe(b,w,k)}finally{Bi.transition=I,Jn=k}return null}function Qxe(b,w,k){do Tp();while(Tf!==null);if(Kn&6)throw Error(o(327));var I=b.finishedWork,U=b.finishedLanes;if(I===null)return null;if(b.finishedWork=null,b.finishedLanes=0,I===b.current)throw Error(o(177));b.callbackNode=null,b.callbackPriority=0;var q=I.lanes|I.childLanes;if(bf(b,q),b===qi&&(Yi=qi=null,Ws=0),!(I.subtreeFlags&2064)&&!(I.flags&2064)||AC||(AC=!0,GG(Oo,function(){return Tp(),null})),q=(I.flags&15990)!==0,I.subtreeFlags&15990||q){q=Bi.transition,Bi.transition=null;var _e=Jn;Jn=1;var Ue=Kn;Kn|=4,dN.current=null,jxe(b,I),Xxe(b,I),V(b.containerInfo),b.current=I,qxe(I),q_(),Kn=Ue,Jn=_e,Bi.transition=q}else b.current=I;if(AC&&(AC=!1,Tf=b,kC=U),q=b.pendingLanes,q===0&&(Cf=null),Px(I.stateNode),ua(b,hi()),w!==null)for(k=b.onRecoverableError,I=0;I<w.length;I++)k(w[I]);if(MC)throw MC=!1,b=mN,mN=null,b;return kC&1&&b.tag!==0&&Tp(),q=b.pendingLanes,q&1?b===gN?Zx++:(Zx=0,gN=b):Zx=0,la(),null}function Tp(){if(Tf!==null){var b=kx(kC),w=Bi.transition,k=Jn;try{if(Bi.transition=null,Jn=16>b?16:b,Tf===null)var I=!1;else{if(b=Tf,Tf=null,kC=0,Kn&6)throw Error(o(331));var U=Kn;for(Kn|=4,Ft=b.current;Ft!==null;){var q=Ft,_e=q.child;if(Ft.flags&16){var Ue=q.deletions;if(Ue!==null){for(var at=0;at<Ue.length;at++){var Tt=Ue[at];for(Ft=Tt;Ft!==null;){var qt=Ft;switch(qt.tag){case 0:case 11:case 15:Sp(8,qt,q)}var In=qt.child;if(In!==null)In.return=qt,Ft=In;else for(;Ft!==null;){qt=Ft;var yn=qt.sibling,Fr=qt.return;if(CG(qt),qt===Tt){Ft=null;break}if(yn!==null){yn.return=Fr,Ft=yn;break}Ft=Fr}}}var ln=q.alternate;if(ln!==null){var co=ln.child;if(co!==null){ln.child=null;do{var El=co.sibling;co.sibling=null,co=El}while(co!==null)}}Ft=q}}if(q.subtreeFlags&2064&&_e!==null)_e.return=q,Ft=_e;else e:for(;Ft!==null;){if(q=Ft,q.flags&2048)switch(q.tag){case 0:case 11:case 15:Sp(9,q,q.return)}var tt=q.sibling;if(tt!==null){tt.return=q.return,Ft=tt;break e}Ft=q.return}}var je=b.current;for(Ft=je;Ft!==null;){_e=Ft;var st=_e.child;if(_e.subtreeFlags&2064&&st!==null)st.return=_e,Ft=st;else e:for(_e=je;Ft!==null;){if(Ue=Ft,Ue.flags&2048)try{switch(Ue.tag){case 0:case 11:case 15:Xx(9,Ue)}}catch(sn){da(Ue,Ue.return,sn)}if(Ue===_e){Ft=null;break e}var Gt=Ue.sibling;if(Gt!==null){Gt.return=Ue.return,Ft=Gt;break e}Ft=Ue.return}}if(Kn=U,la(),Ba&&typeof Ba.onPostCommitFiberRoot=="function")try{Ba.onPostCommitFiberRoot(pp,b)}catch{}I=!0}return I}finally{Jn=k,Bi.transition=w}}return!1}function zG(b,w,k){w=KP(k,w),w=tG(b,w,1),_f(b,w),w=Vo(),b=PC(b,1),b!==null&&(iu(b,1,w),ua(b,w))}function da(b,w,k){if(b.tag===3)zG(b,b,k);else for(;w!==null;){if(w.tag===3){zG(w,b,k);break}else if(w.tag===1){var I=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(Cf===null||!Cf.has(I))){b=KP(k,b),b=nG(w,b,1),_f(w,b),b=Vo(),w=PC(w,1),w!==null&&(iu(w,1,b),ua(w,b));break}}w=w.return}}function e1e(b,w,k){var I=b.pingCache;I!==null&&I.delete(w),w=Vo(),b.pingedLanes|=b.suspendedLanes&k,qi===b&&(Ws&k)===k&&(us===4||us===3&&(Ws&130023424)===Ws&&500>hi()-hN?_p(b,0):fN|=k),ua(b,w)}function VG(b,w){w===0&&(b.mode&1?(w=fd,fd<<=1,!(fd&130023424)&&(fd=4194304)):w=1);var k=Vo();b=PC(b,w),b!==null&&(iu(b,w,k),ua(b,k))}function t1e(b){var w=b.memoizedState,k=0;w!==null&&(k=w.retryLane),VG(b,k)}function n1e(b,w){var k=0;switch(b.tag){case 13:var I=b.stateNode,U=b.memoizedState;U!==null&&(k=U.retryLane);break;case 19:I=b.stateNode;break;default:throw Error(o(314))}I!==null&&I.delete(w),VG(b,k)}var WG;WG=function(b,w,k){if(b!==null)if(b.memoizedProps!==w.pendingProps||cn.current)Ga=!0;else{if(!(b.lanes&k)&&!(w.flags&128))return Ga=!1,Wxe(b,w,k);Ga=!!(b.flags&131072)}else Ga=!1,si&&w.flags&1048576&&k7(w,nC,w.index);switch(w.lanes=0,w.tag){case 2:var I=w.type;b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),b=w.pendingProps;var U=Vn(w,tn.current);Oi(w,k),U=HP(null,w,I,b,U,k);var q=jP();return w.flags|=1,typeof U=="object"&&U!==null&&typeof U.render=="function"&&U.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,Zn(I)?(q=!0,rn(w)):q=!1,w.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,PP(w),U.updater=eC,w.stateNode=U,U._reactInternals=w,$P(w,I,b,k),w=QP(null,w,I,!0,q,k)):(w.tag=0,si&&q&&DP(w),zo(null,w,U,k),w=w.child),w;case 16:I=w.elementType;e:{switch(b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),b=w.pendingProps,U=I._init,I=U(I._payload),w.type=I,U=w.tag=i1e(I),b=Bo(I,b),U){case 0:w=JP(null,w,I,b,k);break e;case 1:w=hG(null,w,I,b,k);break e;case 11:w=lG(null,w,I,b,k);break e;case 14:w=cG(null,w,I,Bo(I.type,b),k);break e}throw Error(o(306,I,""))}return w;case 0:return I=w.type,U=w.pendingProps,U=w.elementType===I?U:Bo(I,U),JP(b,w,I,U,k);case 1:return I=w.type,U=w.pendingProps,U=w.elementType===I?U:Bo(I,U),hG(b,w,I,U,k);case 3:e:{if(pG(w),b===null)throw Error(o(387));I=w.pendingProps,q=w.memoizedState,U=q.element,S7(b,w),Q_(w,I,null,k);var _e=w.memoizedState;if(I=_e.element,Me&&q.isDehydrated)if(q={element:I,isDehydrated:!1,cache:_e.cache,transitions:_e.transitions},w.updateQueue.baseState=q,w.memoizedState=q,w.flags&256){U=Error(o(423)),w=mG(b,w,I,k,U);break e}else if(I!==U){U=Error(o(424)),w=mG(b,w,I,k,U);break e}else for(Me&&(Wa=Wt(w.stateNode.containerInfo),Va=w,si=!0,mc=null,Dx=!1),k=D7(w,null,I,k),w.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(e0(),I===U){w=bd(b,w,k);break e}zo(b,w,I,k)}w=w.child}return w;case 5:return L7(w),b===null&&FP(w),I=w.type,U=w.pendingProps,q=b!==null?b.memoizedProps:null,_e=U.children,te(I,U)?_e=null:q!==null&&te(I,q)&&(w.flags|=32),fG(b,w),zo(b,w,_e,k),w.child;case 6:return b===null&&FP(w),null;case 13:return gG(b,w,k);case 4:return UP(w,w.stateNode.containerInfo),I=w.pendingProps,b===null?w.child=t0(w,null,I,k):zo(b,w,I,k),w.child;case 11:return I=w.type,U=w.pendingProps,U=w.elementType===I?U:Bo(I,U),lG(b,w,I,U,k);case 7:return zo(b,w,w.pendingProps,k),w.child;case 8:return zo(b,w,w.pendingProps.children,k),w.child;case 12:return zo(b,w,w.pendingProps.children,k),w.child;case 10:e:{if(I=w.type._context,U=w.pendingProps,q=w.memoizedProps,_e=U.value,Z_(w,I,_e),q!==null)if(Ua(q.value,_e)){if(q.children===U.children&&!cn.current){w=bd(b,w,k);break e}}else for(q=w.child,q!==null&&(q.return=w);q!==null;){var Ue=q.dependencies;if(Ue!==null){_e=q.child;for(var at=Ue.firstContext;at!==null;){if(at.context===I){if(q.tag===1){at=gd(-1,k&-k),at.tag=2;var Tt=q.updateQueue;if(Tt!==null){Tt=Tt.shared;var qt=Tt.pending;qt===null?at.next=at:(at.next=qt.next,qt.next=at),Tt.pending=at}}q.lanes|=k,at=q.alternate,at!==null&&(at.lanes|=k),Uo(q.return,k,w),Ue.lanes|=k;break}at=at.next}}else if(q.tag===10)_e=q.type===w.type?null:q.child;else if(q.tag===18){if(_e=q.return,_e===null)throw Error(o(341));_e.lanes|=k,Ue=_e.alternate,Ue!==null&&(Ue.lanes|=k),Uo(_e,k,w),_e=q.sibling}else _e=q.child;if(_e!==null)_e.return=q;else for(_e=q;_e!==null;){if(_e===w){_e=null;break}if(q=_e.sibling,q!==null){q.return=_e.return,_e=q;break}_e=_e.return}q=_e}zo(b,w,U.children,k),w=w.child}return w;case 9:return U=w.type,I=w.pendingProps.children,Oi(w,k),U=Fi(U),I=I(U),w.flags|=1,zo(b,w,I,k),w.child;case 14:return I=w.type,U=Bo(I,w.pendingProps),U=Bo(I.type,U),cG(b,w,I,U,k);case 15:return uG(b,w,w.type,w.pendingProps,k);case 17:return I=w.type,U=w.pendingProps,U=w.elementType===I?U:Bo(I,U),b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,Zn(I)?(b=!0,rn(w)):b=!1,Oi(w,k),M7(w,I,U),$P(w,I,U,k),QP(null,w,I,!0,b,k);case 19:return bG(b,w,k);case 22:return dG(b,w,k)}throw Error(o(156,w.tag))};function GG(b,w){return md(b,w)}function r1e(b,w,k,I){this.tag=b,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tl(b,w,k,I){return new r1e(b,w,k,I)}function wN(b){return b=b.prototype,!(!b||!b.isReactComponent)}function i1e(b){if(typeof b=="function")return wN(b)?1:0;if(b!=null){if(b=b.$$typeof,b===v)return 11;if(b===y)return 14}return 2}function Af(b,w){var k=b.alternate;return k===null?(k=Tl(b.tag,w,b.key,b.mode),k.elementType=b.elementType,k.type=b.type,k.stateNode=b.stateNode,k.alternate=b,b.alternate=k):(k.pendingProps=w,k.type=b.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=b.flags&14680064,k.childLanes=b.childLanes,k.lanes=b.lanes,k.child=b.child,k.memoizedProps=b.memoizedProps,k.memoizedState=b.memoizedState,k.updateQueue=b.updateQueue,w=b.dependencies,k.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},k.sibling=b.sibling,k.index=b.index,k.ref=b.ref,k}function $C(b,w,k,I,U,q){var _e=2;if(I=b,typeof b=="function")wN(b)&&(_e=1);else if(typeof b=="string")_e=5;else e:switch(b){case u:return Ep(k.children,U,q,w);case d:_e=8,U|=8;break;case f:return b=Tl(12,k,w,U|2),b.elementType=f,b.lanes=q,b;case g:return b=Tl(13,k,w,U),b.elementType=g,b.lanes=q,b;case m:return b=Tl(19,k,w,U),b.elementType=m,b.lanes=q,b;case S:return DC(k,U,q,w);default:if(typeof b=="object"&&b!==null)switch(b.$$typeof){case h:_e=10;break e;case p:_e=9;break e;case v:_e=11;break e;case y:_e=14;break e;case x:_e=16,I=null;break e}throw Error(o(130,b==null?b:typeof b,""))}return w=Tl(_e,k,w,U),w.elementType=b,w.type=I,w.lanes=q,w}function Ep(b,w,k,I){return b=Tl(7,b,I,w),b.lanes=k,b}function DC(b,w,k,I){return b=Tl(22,b,I,w),b.elementType=S,b.lanes=k,b.stateNode={},b}function SN(b,w,k){return b=Tl(6,b,null,w),b.lanes=k,b}function _N(b,w,k){return w=Tl(4,b.children!==null?b.children:[],b.key,w),w.lanes=k,w.stateNode={containerInfo:b.containerInfo,pendingChildren:null,implementation:b.implementation},w}function s1e(b,w,k,I,U){this.tag=w,this.containerInfo=b,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ae,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qg(0),this.expirationTimes=qg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qg(0),this.identifierPrefix=I,this.onRecoverableError=U,Me&&(this.mutableSourceEagerHydrationData=null)}function HG(b,w,k,I,U,q,_e,Ue,at){return b=new s1e(b,w,k,Ue,at),w===1?(w=1,q===!0&&(w|=8)):w=0,q=Tl(3,null,null,w),b.current=q,q.stateNode=b,q.memoizedState={element:I,isDehydrated:k,cache:null,transitions:null},PP(q),b}function jG(b){if(!b)return En;b=b._reactInternals;e:{if(M(b)!==b||b.tag!==1)throw Error(o(170));var w=b;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(Zn(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(o(171))}if(b.tag===1){var k=b.type;if(Zn(k))return er(b,k,w)}return w}function XG(b){var w=b._reactInternals;if(w===void 0)throw typeof b.render=="function"?Error(o(188)):(b=Object.keys(b).join(","),Error(o(268,b)));return b=N(w),b===null?null:b.stateNode}function qG(b,w){if(b=b.memoizedState,b!==null&&b.dehydrated!==null){var k=b.retryLane;b.retryLane=k!==0&&k<w?k:w}}function CN(b,w){qG(b,w),(b=b.alternate)&&qG(b,w)}function o1e(b){return b=N(b),b===null?null:b.stateNode}function a1e(){return null}return n.attemptContinuousHydration=function(b){if(b.tag===13){var w=Vo();Cl(b,134217728,w),CN(b,134217728)}},n.attemptHydrationAtCurrentPriority=function(b){if(b.tag===13){var w=Vo(),k=Ef(b);Cl(b,k,w),CN(b,k)}},n.attemptSynchronousHydration=function(b){switch(b.tag){case 3:var w=b.stateNode;if(w.current.memoizedState.isDehydrated){var k=hd(w.pendingLanes);k!==0&&(su(w,k|1),ua(w,hi()),!(Kn&6)&&(a0(),la()))}break;case 13:var I=Vo();LG(function(){return Cl(b,1,I)}),CN(b,1)}},n.batchedUpdates=function(b,w){var k=Kn;Kn|=1;try{return b(w)}finally{Kn=k,Kn===0&&(a0(),ou&&la())}},n.createComponentSelector=function(b){return{$$typeof:bC,value:b}},n.createContainer=function(b,w,k,I,U,q,_e){return HG(b,w,!1,null,k,I,U,q,_e)},n.createHasPseudoClassSelector=function(b){return{$$typeof:wC,value:b}},n.createHydrationContainer=function(b,w,k,I,U,q,_e,Ue,at){return b=HG(k,I,!0,b,U,q,_e,Ue,at),b.context=jG(null),k=b.current,I=Vo(),U=Ef(k),q=gd(I,U),q.callback=w??null,_f(k,q),b.current.lanes=U,iu(b,U,I),ua(b,I),b},n.createPortal=function(b,w,k){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:I==null?null:""+I,children:b,containerInfo:w,implementation:k}},n.createRoleSelector=function(b){return{$$typeof:SC,value:b}},n.createTestNameSelector=function(b){return{$$typeof:_C,value:b}},n.createTextSelector=function(b){return{$$typeof:CC,value:b}},n.deferredUpdates=function(b){var w=Jn,k=Bi.transition;try{return Bi.transition=null,Jn=16,b()}finally{Jn=w,Bi.transition=k}},n.discreteUpdates=function(b,w,k,I,U){var q=Jn,_e=Bi.transition;try{return Bi.transition=null,Jn=1,b(w,k,I,U)}finally{Jn=q,Bi.transition=_e,Kn===0&&a0()}},n.findAllNodes=uN,n.findBoundingRects=function(b,w){if(!Y)throw Error(o(363));w=uN(b,w),b=[];for(var k=0;k<w.length;k++)b.push(xe(w[k]));for(w=b.length-1;0<w;w--){k=b[w];for(var I=k.x,U=I+k.width,q=k.y,_e=q+k.height,Ue=w-1;0<=Ue;Ue--)if(w!==Ue){var at=b[Ue],Tt=at.x,qt=Tt+at.width,In=at.y,yn=In+at.height;if(I>=Tt&&q>=In&&U<=qt&&_e<=yn){b.splice(w,1);break}else if(I!==Tt||k.width!==at.width||yn<q||In>_e){if(!(q!==In||k.height!==at.height||qt<I||Tt>U)){Tt>I&&(at.width+=Tt-I,at.x=I),qt<U&&(at.width=U-Tt),b.splice(w,1);break}}else{In>q&&(at.height+=In-q,at.y=q),yn<_e&&(at.height=_e-In),b.splice(w,1);break}}}return b},n.findHostInstance=XG,n.findHostInstanceWithNoPortals=function(b){return b=P(b),b=b!==null?$(b):null,b===null?null:b.stateNode},n.findHostInstanceWithWarning=function(b){return XG(b)},n.flushControlled=function(b){var w=Kn;Kn|=1;var k=Bi.transition,I=Jn;try{Bi.transition=null,Jn=1,b()}finally{Jn=I,Bi.transition=k,Kn=w,Kn===0&&(a0(),la())}},n.flushPassiveEffects=Tp,n.flushSync=LG,n.focusWithin=function(b,w){if(!Y)throw Error(o(363));for(b=aN(b),w=NG(b,w),w=Array.from(w),b=0;b<w.length;){var k=w[b++];if(!be(k)){if(k.tag===5&&Ke(k.stateNode))return!0;for(k=k.child;k!==null;)w.push(k),k=k.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Jn},n.getFindAllNodesFailureDescription=function(b,w){if(!Y)throw Error(o(363));var k=0,I=[];b=[aN(b),0];for(var U=0;U<b.length;){var q=b[U++],_e=b[U++],Ue=w[_e];if((q.tag!==5||!be(q))&&(lN(q,Ue)&&(I.push(cN(Ue)),_e++,_e>k&&(k=_e)),_e<w.length))for(q=q.child;q!==null;)b.push(q,_e),q=q.sibling}if(k<w.length){for(b=[];k<w.length;k++)b.push(cN(w[k]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+b.join(" > ")}return null},n.getPublicRootInstance=function(b){if(b=b.current,!b.child)return null;switch(b.child.tag){case 5:return z(b.child.stateNode);default:return b.child.stateNode}},n.injectIntoDevTools=function(b){if(b={bundleType:b.bundleType,version:b.version,rendererPackageName:b.rendererPackageName,rendererConfig:b.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:o1e,findFiberByHostInstance:b.findFiberByHostInstance||a1e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")b=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)b=!0;else{try{pp=w.inject(b),Ba=w}catch{}b=!!w.checkDCE}}return b},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(b,w,k,I){if(!Y)throw Error(o(363));b=uN(b,w);var U=ze(b,k,I).disconnect;return{disconnect:function(){U()}}},n.registerMutableSourceForHydration=function(b,w){var k=w._getVersion;k=k(w._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[w,k]:b.mutableSourceEagerHydrationData.push(w,k)},n.runWithPriority=function(b,w){var k=Jn;try{return Jn=b,w()}finally{Jn=k}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(b,w,k,I){var U=w.current,q=Vo(),_e=Ef(U);return k=jG(k),w.context===null?w.context=k:w.pendingContext=k,w=gd(q,_e),w.payload={element:b},I=I===void 0?null:I,I!==null&&(w.callback=I),_f(U,w),b=Cl(U,_e,q),b!==null&&J_(b,U,_e),_e},n};wde.exports=aot;var lot=wde.exports;const cot=ls(lot);var Sde={exports:{}},_de={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,B){var V=D.length;D.push(B);e:for(;0<V;){var W=V-1>>>1,j=D[W];if(0<i(j,B))D[W]=B,D[V]=j,V=W;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var B=D[0],V=D.pop();if(V!==B){D[0]=V;e:for(var W=0,j=D.length,J=j>>>1;W<J;){var Q=2*(W+1)-1,te=D[Q],re=Q+1,se=D[re];if(0>i(te,V))re<j&&0>i(se,te)?(D[W]=se,D[re]=V,W=re):(D[W]=te,D[Q]=V,W=Q);else if(re<j&&0>i(se,V))D[W]=se,D[re]=V,W=re;else break e}}return B}function i(D,B){var V=D.sortIndex-B.sortIndex;return V!==0?V:D.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=D)r(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function S(D){if(v=!1,x(D),!p)if(n(l)!==null)p=!0,z(_);else{var B=n(c);B!==null&&X(S,B.startTime-D)}}function _(D,B){p=!1,v&&(v=!1,m(A),A=-1),h=!0;var V=f;try{for(x(B),d=n(l);d!==null&&(!(d.expirationTime>B)||D&&!P());){var W=d.callback;if(typeof W=="function"){d.callback=null,f=d.priorityLevel;var j=W(d.expirationTime<=B);B=t.unstable_now(),typeof j=="function"?d.callback=j:d===n(l)&&r(l),x(B)}else r(l);d=n(l)}if(d!==null)var J=!0;else{var Q=n(c);Q!==null&&X(S,Q.startTime-B),J=!1}return J}finally{d=null,f=V,h=!1}}var C=!1,T=null,A=-1,M=5,E=-1;function P(){return!(t.unstable_now()-E<M)}function N(){if(T!==null){var D=t.unstable_now();E=D;var B=!0;try{B=T(!0,D)}finally{B?F():(C=!1,T=null)}}else C=!1}var F;if(typeof y=="function")F=function(){y(N)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,O=$.port2;$.port1.onmessage=N,F=function(){O.postMessage(null)}}else F=function(){g(N,0)};function z(D){T=D,C||(C=!0,F())}function X(D,B){A=g(function(){D(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,z(_))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var V=f;f=B;try{return D()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,B){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var V=f;f=D;try{return B()}finally{f=V}},t.unstable_scheduleCallback=function(D,B,V){var W=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?W+V:W):V=W,D){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=V+j,D={id:u++,callback:B,priorityLevel:D,startTime:V,expirationTime:j,sortIndex:-1},V>W?(D.sortIndex=V,e(c,D),n(l)===null&&D===n(c)&&(v?(m(A),A=-1):v=!0,X(S,V-W))):(D.sortIndex=j,e(l,D),p||h||(p=!0,z(_))),D},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(D){var B=f;return function(){var V=f;f=B;try{return D.apply(this,arguments)}finally{f=V}}}})(_de);Sde.exports=_de;var jK=Sde.exports;const uot=t=>typeof t=="object"&&typeof t.then=="function",vm=[];function Cde(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function Tde(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const s of vm)if(Cde(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=vm.indexOf(i);s!==-1&&vm.splice(s,1)},promise:(uot(t)?t:t(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(vm.push(i),!n)throw i.promise}const Ede=(t,e,n)=>Tde(t,e,!1,n),dot=(t,e,n)=>void Tde(t,e,!0,n),fot=t=>{if(t===void 0||t.length===0)vm.splice(0,vm.length);else{const e=vm.find(n=>Cde(t,n.keys,n.equal));e&&e.remove()}},X6={},Mde=t=>void Object.assign(X6,t);function hot(t,e){function n(u,{args:d=[],attach:f,...h},p){let v=`${u[0].toUpperCase()}${u.slice(1)}`,g;if(u==="primitive"){if(h.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const m=h.object;g=X0(m,{type:u,root:p,attach:f,primitive:!0})}else{const m=X6[v];if(!m)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");g=X0(new m(...d),{type:u,root:p,attach:f,memoizedProps:{args:d}})}return g.__r3f.attach===void 0&&(g instanceof Ln?g.__r3f.attach="geometry":g instanceof ro&&(g.__r3f.attach="material")),v!=="inject"&&AD(g,h),g}function r(u,d){let f=!1;if(d){var h,p;(h=d.__r3f)!=null&&h.attach?MD(u,d,d.__r3f.attach):d.isObject3D&&u.isObject3D&&(u.add(d),f=!0),f||(p=u.__r3f)==null||p.objects.push(d),d.__r3f||X0(d,{}),d.__r3f.parent=u,hF(d),q0(d)}}function i(u,d,f){let h=!1;if(d){var p,v;if((p=d.__r3f)!=null&&p.attach)MD(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){d.parent=u,d.dispatchEvent({type:"added"});const g=u.children.filter(y=>y!==d),m=g.indexOf(f);u.children=[...g.slice(0,m),d,...g.slice(m)],h=!0}h||(v=u.__r3f)==null||v.objects.push(d),d.__r3f||X0(d,{}),d.__r3f.parent=u,hF(d),q0(d)}}function s(u,d,f=!1){u&&[...u].forEach(h=>o(d,h,f))}function o(u,d,f){if(d){var h,p,v;if(d.__r3f&&(d.__r3f.parent=null),(h=u.__r3f)!=null&&h.objects&&(u.__r3f.objects=u.__r3f.objects.filter(S=>S!==d)),(p=d.__r3f)!=null&&p.attach)ZK(u,d,d.__r3f.attach);else if(d.isObject3D&&u.isObject3D){var g;u.remove(d),(g=d.__r3f)!=null&&g.root&&wot(d.__r3f.root,d)}const y=(v=d.__r3f)==null?void 0:v.primitive,x=!y&&(f===void 0?d.dispose!==null:f);if(!y){var m;s((m=d.__r3f)==null?void 0:m.objects,d,x),s(d.children,d,x)}if(delete d.__r3f,x&&d.dispose&&d.type!=="Scene"){const S=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?jK.unstable_scheduleCallback(jK.unstable_IdlePriority,S):S()}q0(u)}}function a(u,d,f,h){var p;const v=(p=u.__r3f)==null?void 0:p.parent;if(!v)return;const g=n(d,f,u.__r3f.root);if(u.children){for(const m of u.children)m.__r3f&&r(g,m);u.children=u.children.filter(m=>!m.__r3f)}u.__r3f.objects.forEach(m=>r(g,m)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(v,u),g.parent&&(g.__r3f.autoRemovedBeforeAppend=!0),r(v,g),g.raycast&&g.__r3f.eventCount&&g.__r3f.root.getState().internal.interaction.push(g),[h,h.alternate].forEach(m=>{m!==null&&(m.stateNode=g,m.ref&&(typeof m.ref=="function"?m.ref(g):m.ref.current=g))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:cot({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,d)=>{if(!d)return;const f=u.getState().scene;f.__r3f&&(f.__r3f.root=u,r(f,d))},removeChildFromContainer:(u,d)=>{d&&o(u.getState().scene,d)},insertInContainerBefore:(u,d,f)=>{if(!d||!f)return;const h=u.getState().scene;h.__r3f&&i(h,d,f)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var d;return!!((d=u==null?void 0:u.__r3f)!=null?d:{}).handlers},prepareUpdate(u,d,f,h){var p;if(((p=u==null?void 0:u.__r3f)!=null?p:{}).primitive&&h.object&&h.object!==u)return[!0];{const{args:g=[],children:m,...y}=h,{args:x=[],children:S,..._}=f;if(!Array.isArray(g))throw new Error("R3F: the args prop must be an array!");if(g.some((T,A)=>T!==x[A]))return[!0];const C=$de(u,y,_,!0);return C.changes.length?[!1,C]:null}},commitUpdate(u,[d,f],h,p,v,g){d?a(u,h,v,g):AD(u,f)},commitMount(u,d,f,h){var p;const v=(p=u.__r3f)!=null?p:{};u.raycast&&v.handlers&&v.eventCount&&u.__r3f.root.getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>X0(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var d;const{attach:f,parent:h}=(d=u.__r3f)!=null?d:{};f&&h&&ZK(h,u,f),u.isObject3D&&(u.visible=!1),q0(u)},unhideInstance(u,d){var f;const{attach:h,parent:p}=(f=u.__r3f)!=null?f:{};h&&p&&MD(p,u,h),(u.isObject3D&&d.visible==null||d.visible)&&(u.visible=!0),q0(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():vv.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&ei.fun(performance.now)?performance.now:ei.fun(Date.now)?Date.now:()=>0,scheduleTimeout:ei.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ei.fun(clearTimeout)?clearTimeout:void 0}),applyProps:AD}}var XK,qK;const ED=t=>"colorSpace"in t||"outputColorSpace"in t,Ade=()=>{var t;return(t=X6.ColorManagement)!=null?t:null},kde=t=>t&&t.isOrthographicCamera,pot=t=>t&&t.hasOwnProperty("current"),b2=typeof window<"u"&&((XK=window.document)!=null&&XK.createElement||((qK=window.navigator)==null?void 0:qK.product)==="ReactNative")?R.useLayoutEffect:R.useEffect;function Ide(t){const e=R.useRef(t);return b2(()=>void(e.current=t),[t]),e}function mot({set:t}){return b2(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class Rde extends R.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Rde.getDerivedStateFromError=()=>({error:!0});const Pde="__default",YK=new Map,got=t=>t&&!!t.memoized&&!!t.changes;function Nde(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const R1=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},ei={obj:t=>t===Object(t)&&!ei.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(ei.str(t)||ei.num(t))return t===e;const s=ei.obj(t);if(s&&r==="reference")return t===e;const o=ei.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!ei.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(ei.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function vot(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function yot(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function X0(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function fF(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const KK=/-\d+$/;function MD(t,e,n){if(ei.str(n)){if(KK.test(n)){const s=n.replace(KK,""),{target:o,key:a}=fF(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=fF(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function ZK(t,e,n){var r,i;if(ei.str(n)){const{target:s,key:o}=fF(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function $de(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){var u;const d=(u=t==null?void 0:t.__r3f)!=null?u:{},f=Object.entries(i),h=[];if(c){const v=Object.keys(l);for(let g=0;g<v.length;g++)i.hasOwnProperty(v[g])||f.unshift([v[g],Pde+"remove"])}f.forEach(([v,g])=>{var m;if((m=t.__r3f)!=null&&m.primitive&&v==="object"||ei.equ(g,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return h.push([v,g,!0,[]]);let y=[];v.includes("-")&&(y=v.split("-")),h.push([v,g,!1,y]);for(const x in i){const S=i[x];x.startsWith(`${v}-`)&&h.push([x,S,!1,x.split("-")])}});const p={...i};return d.memoizedProps&&d.memoizedProps.args&&(p.args=d.memoizedProps.args),d.memoizedProps&&d.memoizedProps.attach&&(p.attach=d.memoizedProps.attach),{memoized:p,changes:h}}const xot=typeof process<"u"&&!1;function AD(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:c}=got(e)?e:$de(t,e),u=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let f=0;f<c.length;f++){let[h,p,v,g]=c[f];if(ED(t)){const S="srgb",_="srgb-linear";h==="encoding"?(h="colorSpace",p=p===3001?S:_):h==="outputEncoding"&&(h="outputColorSpace",p=p===3001?S:_)}let m=t,y=m[h];if(g.length&&(y=g.reduce((x,S)=>x[S],t),!(y&&y.set))){const[x,...S]=g.reverse();m=S.reverse().reduce((_,C)=>_[C],t),h=x}if(p===Pde+"remove")if(m.constructor){let x=YK.get(m.constructor);x||(x=new m.constructor,YK.set(m.constructor,x)),p=x[h]}else p=0;if(v)p?s.handlers[h]=p:delete s.handlers[h],s.eventCount=Object.keys(s.handlers).length;else if(y&&y.set&&(y.copy||y instanceof Rm)){if(Array.isArray(p))y.fromArray?y.fromArray(p):y.set(...p);else if(y.copy&&p&&p.constructor&&(xot?y.constructor.name===p.constructor.name:y.constructor===p.constructor))y.copy(p);else if(p!==void 0){const x=y instanceof zt;!x&&y.setScalar?y.setScalar(p):y instanceof Rm&&p instanceof Rm?y.mask=p.mask:y.set(p),!Ade()&&!a.linear&&x&&y.convertSRGBToLinear()}}else if(m[h]=p,m[h]instanceof di&&m[h].format===Eo&&m[h].type===Uu){const x=m[h];ED(x)&&ED(a.gl)?x.colorSpace=a.gl.outputColorSpace:x.encoding=a.gl.outputEncoding}q0(t)}if(s.parent&&a.internal&&t.raycast&&u!==s.eventCount){const f=a.internal.interaction.indexOf(t);f>-1&&a.internal.interaction.splice(f,1),s.eventCount&&a.internal.interaction.push(t)}return!(c.length===1&&c[0][0]==="onUpdate")&&c.length&&(i=t.__r3f)!=null&&i.parent&&hF(t),t}function q0(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function hF(t){t.onUpdate==null||t.onUpdate(t)}function Dde(t,e){t.manual||(kde(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function uE(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function bot(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return vv.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return vv.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return vv.ContinuousEventPriority;default:return vv.DefaultEventPriority}}function Lde(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function wot(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{Lde(n.capturedMap,e,r,i)})}function Sot(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],d=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+d*d))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var d;return(d=c.__r3f)==null?void 0:d.handlers["onPointer"+u]}))}function r(l,c){const u=t.getState(),d=new Set,f=[],h=c?c(u.internal.interaction):u.internal.interaction;for(let m=0;m<h.length;m++){const y=R1(h[m]);y&&(y.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function p(m){const y=R1(m);if(!y||!y.events.enabled||y.raycaster.camera===null)return[];if(y.raycaster.camera===void 0){var x;y.events.compute==null||y.events.compute(l,y,(x=y.previousRoot)==null?void 0:x.getState()),y.raycaster.camera===void 0&&(y.raycaster.camera=null)}return y.raycaster.camera?y.raycaster.intersectObject(m,!0):[]}let v=h.flatMap(p).sort((m,y)=>{const x=R1(m.object),S=R1(y.object);return!x||!S?m.distance-y.distance:S.events.priority-x.events.priority||m.distance-y.distance}).filter(m=>{const y=uE(m);return d.has(y)?!1:(d.add(y),!0)});u.events.filter&&(v=u.events.filter(v,u));for(const m of v){let y=m.object;for(;y;){var g;(g=y.__r3f)!=null&&g.eventCount&&f.push({...m,eventObject:y}),y=y.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let m of u.internal.capturedMap.get(l.pointerId).values())d.has(uE(m.intersection))||f.push(m.intersection);return f}function i(l,c,u,d){const f=t.getState();if(l.length){const h={stopped:!1};for(const p of l){const v=R1(p.object)||f,{raycaster:g,pointer:m,camera:y,internal:x}=v,S=new me(m.x,m.y,0).unproject(y),_=E=>{var P,N;return(P=(N=x.capturedMap.get(E))==null?void 0:N.has(p.eventObject))!=null?P:!1},C=E=>{const P={intersection:p,target:c.target};x.capturedMap.has(E)?x.capturedMap.get(E).set(p.eventObject,P):x.capturedMap.set(E,new Map([[p.eventObject,P]])),c.target.setPointerCapture(E)},T=E=>{const P=x.capturedMap.get(E);P&&Lde(x.capturedMap,p.eventObject,P,E)};let A={};for(let E in c){let P=c[E];typeof P!="function"&&(A[E]=P)}let M={...p,...A,pointer:m,intersections:l,stopped:h.stopped,delta:u,unprojectedPoint:S,ray:g.ray,camera:y,stopPropagation(){const E="pointerId"in c&&x.capturedMap.get(c.pointerId);if((!E||E.has(p.eventObject))&&(M.stopped=h.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(P=>P.eventObject===p.eventObject))){const P=l.slice(0,l.indexOf(p));s([...P,p])}},target:{hasPointerCapture:_,setPointerCapture:C,releasePointerCapture:T},currentTarget:{hasPointerCapture:_,setPointerCapture:C,releasePointerCapture:T},nativeEvent:c};if(d(M),h.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(d=>d.object===u.object&&d.index===u.index&&d.instanceId===u.instanceId)){const f=u.eventObject.__r3f,h=f==null?void 0:f.handlers;if(c.hovered.delete(uE(u)),f!=null&&f.eventCount){const p={...u,intersections:l};h.onPointerOut==null||h.onPointerOut(p),h.onPointerLeave==null||h.onPointerLeave(p)}}}function o(l,c){for(let u=0;u<c.length;u++){const d=c[u].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:d,internal:f}=t.getState();f.lastEvent.current=u;const h=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",g=r(u,h?n:void 0),m=p?e(u):0;l==="onPointerDown"&&(f.initialClick=[u.offsetX,u.offsetY],f.initialHits=g.map(x=>x.eventObject)),p&&!g.length&&m<=2&&(o(u,f.interaction),d&&d(u)),h&&s(g);function y(x){const S=x.eventObject,_=S.__r3f,C=_==null?void 0:_.handlers;if(_!=null&&_.eventCount)if(h){if(C.onPointerOver||C.onPointerEnter||C.onPointerOut||C.onPointerLeave){const T=uE(x),A=f.hovered.get(T);A?A.stopped&&x.stopPropagation():(f.hovered.set(T,x),C.onPointerOver==null||C.onPointerOver(x),C.onPointerEnter==null||C.onPointerEnter(x))}C.onPointerMove==null||C.onPointerMove(x)}else{const T=C[l];T?(!p||f.initialHits.includes(S))&&(o(u,f.interaction.filter(A=>!f.initialHits.includes(A))),T(x)):p&&f.initialHits.includes(S)&&o(u,f.interaction.filter(A=>!f.initialHits.includes(A)))}}i(g,u,m,y)}}return{handlePointer:a}}const _ot=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Ode=t=>!!(t!=null&&t.render),q6=R.createContext(null),Cot=(t,e)=>{const n=bde((a,l)=>{const c=new me,u=new me,d=new me;function f(m=l().camera,y=u,x=l().size){const{width:S,height:_,top:C,left:T}=x,A=S/_;y instanceof me?d.copy(y):d.set(...y);const M=m.getWorldPosition(c).distanceTo(d);if(kde(m))return{width:S/m.zoom,height:_/m.zoom,top:C,left:T,factor:1,distance:M,aspect:A};{const E=m.fov*Math.PI/180,P=2*Math.tan(E/2)*M,N=P*(S/_);return{width:N,height:P,top:C,left:T,factor:S/N,distance:M,aspect:A}}}let h;const p=m=>a(y=>({performance:{...y.performance,current:m}})),v=new lt;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(m=1)=>t(l(),m),advance:(m,y)=>e(m,y,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new V6,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const m=l();h&&clearTimeout(h),m.performance.current!==m.performance.min&&p(m.performance.min),h=setTimeout(()=>p(l().performance.max),m.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:m=>a(y=>({...y,events:{...y.events,...m}})),setSize:(m,y,x,S,_)=>{const C=l().camera,T={width:m,height:y,top:S||0,left:_||0,updateStyle:x};a(A=>({size:T,viewport:{...A.viewport,...f(C,u,T)}}))},setDpr:m=>a(y=>{const x=Nde(m);return{viewport:{...y.viewport,dpr:x,initialDpr:y.viewport.initialDpr||x}}}),setFrameloop:(m="always")=>{const y=l().clock;y.stop(),y.elapsedTime=0,m!=="never"&&(y.start(),y.elapsedTime=0),a(()=>({frameloop:m}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:R.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(m,y,x)=>{const S=l().internal;return S.priority=S.priority+(y>0?1:0),S.subscribers.push({ref:m,priority:y,store:x}),S.subscribers=S.subscribers.sort((_,C)=>_.priority-C.priority),()=>{const _=l().internal;_!=null&&_.subscribers&&(_.priority=_.priority-(y>0?1:0),_.subscribers=_.subscribers.filter(C=>C.ref!==m))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:d}=n.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var f;i=l,s=c.dpr,Dde(a,l),u.setPixelRatio(c.dpr);const h=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,h)}a!==o&&(o=a,d(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let dE,Tot=new Set,Eot=new Set,Mot=new Set;function kD(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function P1(t,e){switch(t){case"before":return kD(Tot,e);case"after":return kD(Eot,e);case"tail":return kD(Mot,e)}}let ID,RD;function PD(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),ID=e.internal.subscribers,dE=0;dE<ID.length;dE++)RD=ID[dE],RD.ref.current(RD.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Aot(t){let e=!1,n,r,i;function s(l){r=requestAnimationFrame(s),e=!0,n=0,P1("before",l);for(const u of t.values()){var c;i=u.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((c=i.gl.xr)!=null&&c.isPresenting)&&(n+=PD(l,i))}if(P1("after",l),n===0)return P1("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,c=1){var u;if(!l)return t.forEach(d=>o(d.store.getState()),c);(u=l.gl.xr)!=null&&u.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))}function a(l,c=!0,u,d){if(c&&P1("before",l),u)PD(l,u,d);else for(const f of t.values())PD(l,f.store.getState());c&&P1("after",l)}return{loop:s,invalidate:o,advance:a}}function Y6(){const t=R.useContext(q6);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function hs(t=n=>n,e){return Y6()(t,e)}function Dg(t,e=0){const n=Y6(),r=n.getState().internal.subscribe,i=Ide(t);return b2(()=>r(i,e,n),[e,r,n]),null}const JK=new WeakMap;function Fde(t,e){return function(n,...r){let i=JK.get(n);return i||(i=new n,JK.set(n,i)),t&&t(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,vot(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function K6(t,e,n,r){const i=Array.isArray(e)?e:[e],s=Ede(Fde(n,r),[t,...i],{equal:ei.equ});return Array.isArray(e)?s:s[0]}K6.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return dot(Fde(n),[t,...r])};K6.clear=function(t,e){const n=Array.isArray(e)?e:[e];return fot([t,...n])};const xy=new Map,{invalidate:QK,advance:eZ}=Aot(xy),{reconciler:aS,applyProps:B0}=hot(xy,bot),U0={objects:"shallow",strict:!1},kot=(t,e)=>{const n=typeof t=="function"?t(e):t;return Ode(n)?n:new _6({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function Iot(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=n}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function Rot(t){const e=xy.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Cot(QK,eZ),o=n||aS.createContainer(s,vv.ConcurrentRoot,null,!1,null,"",i,null);e||xy.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:d,size:f,scene:h,events:p,onCreated:v,shadows:g=!1,linear:m=!1,flat:y=!1,legacy:x=!1,orthographic:S=!1,frameloop:_="always",dpr:C=[1,2],performance:T,raycaster:A,camera:M,onPointerMissed:E}=u,P=s.getState(),N=P.gl;P.gl||P.set({gl:N=kot(d,t)});let F=P.raycaster;F||P.set({raycaster:F=new j6});const{params:$,...O}=A||{};if(ei.equ(O,F,U0)||B0(F,{...O}),ei.equ($,F.params,U0)||B0(F,{params:{...F.params,...$}}),!P.camera||P.camera===c&&!ei.equ(c,M,U0)){c=M;const j=M instanceof f2,J=j?M:S?new Vd(0,0,0,0,.1,1e3):new Ai(75,0,.1,1e3);j||(J.position.z=5,M&&B0(J,M),!P.camera&&!(M!=null&&M.rotation)&&J.lookAt(0,0,0)),P.set({camera:J}),F.camera=J}if(!P.scene){let j;h instanceof Jw?j=h:(j=new Jw,h&&B0(j,h)),P.set({scene:X0(j)})}if(!P.xr){var z;const j=(te,re)=>{const se=s.getState();se.frameloop!=="never"&&eZ(te,!0,se,re)},J=()=>{const te=s.getState();te.gl.xr.enabled=te.gl.xr.isPresenting,te.gl.xr.setAnimationLoop(te.gl.xr.isPresenting?j:null),te.gl.xr.isPresenting||QK(te)},Q={connect(){const te=s.getState().gl;te.xr.addEventListener("sessionstart",J),te.xr.addEventListener("sessionend",J)},disconnect(){const te=s.getState().gl;te.xr.removeEventListener("sessionstart",J),te.xr.removeEventListener("sessionend",J)}};typeof((z=N.xr)==null?void 0:z.addEventListener)=="function"&&Q.connect(),P.set({xr:Q})}if(N.shadowMap){const j=N.shadowMap.enabled,J=N.shadowMap.type;if(N.shadowMap.enabled=!!g,ei.boo(g))N.shadowMap.type=Sb;else if(ei.str(g)){var X;const Q={basic:hce,percentage:pR,soft:Sb,variance:Tc};N.shadowMap.type=(X=Q[g])!=null?X:Sb}else ei.obj(g)&&Object.assign(N.shadowMap,g);(j!==N.shadowMap.enabled||J!==N.shadowMap.type)&&(N.shadowMap.needsUpdate=!0)}const D=Ade();D&&("enabled"in D?D.enabled=!x:"legacyMode"in D&&(D.legacyMode=x)),B0(N,{outputEncoding:m?3e3:3001,toneMapping:y?Bu:n6}),P.legacy!==x&&P.set(()=>({legacy:x})),P.linear!==m&&P.set(()=>({linear:m})),P.flat!==y&&P.set(()=>({flat:y})),d&&!ei.fun(d)&&!Ode(d)&&!ei.equ(d,N,U0)&&B0(N,d),p&&!P.events.handlers&&P.set({events:p(s)});const W=Iot(t,f);return ei.equ(W,P.size,U0)||P.setSize(W.width,W.height,W.updateStyle,W.top,W.left),C&&P.viewport.dpr!==Nde(C)&&P.setDpr(C),P.frameloop!==_&&P.setFrameloop(_),P.onPointerMissed||P.set({onPointerMissed:E}),T&&!ei.equ(T,P.performance,U0)&&P.set(j=>({performance:{...j.performance,...T}})),a=v,l=!0,this},render(u){return l||this.configure(),aS.updateContainer(R.createElement(Pot,{store:s,children:u,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){Bde(t)}}}function Pot({store:t,children:e,onCreated:n,rootElement:r}){return b2(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),R.createElement(q6.Provider,{value:t},e)}function Bde(t,e){const n=xy.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),aS.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),yot(i),xy.delete(t),e&&e(t)}catch{}},500)})}}function Not(t,e,n){return R.createElement($ot,{key:e.uuid,children:t,container:e,state:n})}function $ot({state:t={},children:e,container:n}){const{events:r,size:i,...s}=t,o=Y6(),[a]=R.useState(()=>new j6),[l]=R.useState(()=>new lt),c=R.useCallback((d,f)=>{const h={...d};Object.keys(d).forEach(v=>{(_ot.includes(v)||d[v]!==f[v]&&f[v])&&delete h[v]});let p;if(f&&i){const v=f.camera;p=d.viewport.getCurrentViewport(v,new me,i),v!==d.camera&&Dde(v,i)}return{...h,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...f==null?void 0:f.events,...r},size:{...d.size,...i},viewport:{...d.viewport,...p},...s}},[t]),[u]=R.useState(()=>{const d=o.getState();return bde((h,p)=>({...d,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...d.events,...r},size:{...d.size,...i},...s,set:h,get:p,setEvents:v=>h(g=>({...g,events:{...g.events,...v}}))}))});return R.useEffect(()=>{const d=o.subscribe(f=>u.setState(h=>c(f,h)));return()=>{d(),u.destroy()}},[]),R.useEffect(()=>{u.setState(d=>c(o.getState(),d))},[c]),R.createElement(R.Fragment,null,aS.createPortal(R.createElement(q6.Provider,{value:u},e),u,null))}aS.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:R.version});function pF(t,e,n){var r,i,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?r=setTimeout(l,e-u):(r=null,n||(a=t.apply(s,i),s=i=null))}var c=function(){s=this,i=arguments,o=Date.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(a=t.apply(s,i),s=i=null),a};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(a=t.apply(s,i),s=i=null,clearTimeout(r),r=null)},c}pF.debounce=pF;var Dot=pF;const tZ=ls(Dot);function Lot(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=R.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=R.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,d=R.useRef(!1);R.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[f,h,p]=R.useMemo(()=>{const y=()=>{if(!l.current.element)return;const{left:x,top:S,width:_,height:C,bottom:T,right:A,x:M,y:E}=l.current.element.getBoundingClientRect(),P={left:x,top:S,width:_,height:C,bottom:T,right:A,x:M,y:E};l.current.element instanceof HTMLElement&&i&&(P.height=l.current.element.offsetHeight,P.width=l.current.element.offsetWidth),Object.freeze(P),d.current&&!Uot(l.current.lastBounds,P)&&a(l.current.lastBounds=P)};return[y,u?tZ(y,u):y,c?tZ(y,c):y]},[a,i,c,u]);function v(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function g(){l.current.element&&(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(y=>y.addEventListener("scroll",p,{capture:!0,passive:!0})))}const m=y=>{!y||y===l.current.element||(v(),l.current.element=y,l.current.scrollContainers=Ude(y),g())};return Fot(p,!!n),Oot(h),R.useEffect(()=>{v(),g()},[n,p,h]),R.useEffect(()=>v,[]),[m,o,f]}function Oot(t){R.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function Fot(t,e){R.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function Ude(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...Ude(t.parentElement)]}const Bot=["x","y","top","bottom","left","right","width","height"],Uot=(t,e)=>Bot.every(n=>t[n]===e[n]);var zot=Object.defineProperty,Vot=Object.defineProperties,Wot=Object.getOwnPropertyDescriptors,nZ=Object.getOwnPropertySymbols,Got=Object.prototype.hasOwnProperty,Hot=Object.prototype.propertyIsEnumerable,rZ=(t,e,n)=>e in t?zot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iZ=(t,e)=>{for(var n in e||(e={}))Got.call(e,n)&&rZ(t,n,e[n]);if(nZ)for(var n of nZ(e))Hot.call(e,n)&&rZ(t,n,e[n]);return t},jot=(t,e)=>Vot(t,Wot(e));function zde(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=zde(r,e,n);if(i)return i;r=e?null:r.sibling}}function Vde(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const Z6=Vde(R.createContext(null));class Wde extends R.Component{render(){return R.createElement(Z6.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:sZ,ReactCurrentDispatcher:oZ}=R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Xot(){const t=R.useContext(Z6);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=R.useId();return R.useMemo(()=>{for(const r of[sZ==null?void 0:sZ.current,t,t==null?void 0:t.alternate]){if(!r)continue;const i=zde(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function qot(){var t,e;const n=Xot(),[r]=R.useState(()=>new Map);r.clear();let i=n;for(;i;){const s=(t=i.type)==null?void 0:t._context;s&&s!==Z6&&!r.has(s)&&r.set(s,(e=oZ==null?void 0:oZ.current)==null?void 0:e.readContext(Vde(s))),i=i.return}return r}function Yot(){const t=qot();return R.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>R.createElement(e,null,R.createElement(n.Provider,jot(iZ({},r),{value:t.get(n)}))),e=>R.createElement(Wde,iZ({},e))),[t])}const ND={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Kot(t){const{handlePointer:e}=Sot(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(ND).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=ND[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=ND[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const Zot=R.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=Kot,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:d,legacy:f,orthographic:h,frameloop:p,dpr:v,performance:g,raycaster:m,camera:y,scene:x,onPointerMissed:S,onCreated:_,...C},T){R.useMemo(()=>Mde(not),[]);const A=Yot(),[M,E]=Lot({scroll:!0,debounce:{scroll:50,resize:0},...r}),P=R.useRef(null),N=R.useRef(null);R.useImperativeHandle(T,()=>P.current);const F=Ide(S),[$,O]=R.useState(!1),[z,X]=R.useState(!1);if($)throw $;if(z)throw z;const D=R.useRef(null);b2(()=>{const V=P.current;E.width>0&&E.height>0&&V&&(D.current||(D.current=Rot(V)),D.current.configure({gl:s,events:o,shadows:c,linear:u,flat:d,legacy:f,orthographic:h,frameloop:p,dpr:v,performance:g,raycaster:m,camera:y,scene:x,size:E,onPointerMissed:(...W)=>F.current==null?void 0:F.current(...W),onCreated:W=>{W.events.connect==null||W.events.connect(a?pot(a)?a.current:a:N.current),l&&W.setEvents({compute:(j,J)=>{const Q=j[l+"X"],te=j[l+"Y"];J.pointer.set(Q/J.size.width*2-1,-(te/J.size.height)*2+1),J.raycaster.setFromCamera(J.pointer,J.camera)}}),_==null||_(W)}}),D.current.render(R.createElement(A,null,R.createElement(Rde,{set:X},R.createElement(R.Suspense,{fallback:R.createElement(mot,{set:O})},e)))))}),R.useEffect(()=>{const V=P.current;if(V)return()=>Bde(V)},[]);const B=a?"none":"auto";return R.createElement("div",he({ref:N,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:B,...i}},C),R.createElement("div",{ref:M,style:{width:"100%",height:"100%"}},R.createElement("canvas",{ref:P,style:{display:"block"}},n)))}),GR=R.forwardRef(function(e,n){return R.createElement(Wde,null,R.createElement(Zot,he({},e,{ref:n})))});function Jot(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Bl=Uint8Array,eh=Uint16Array,mF=Uint32Array,Gde=new Bl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hde=new Bl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Qot=new Bl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jde=function(t,e){for(var n=new eh(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new mF(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},Xde=jde(Gde,2),qde=Xde[0],eat=Xde[1];qde[28]=258,eat[258]=28;var tat=jde(Hde,0),nat=tat[0],gF=new eh(32768);for(var ti=0;ti<32768;++ti){var Bf=(ti&43690)>>>1|(ti&21845)<<1;Bf=(Bf&52428)>>>2|(Bf&13107)<<2,Bf=(Bf&61680)>>>4|(Bf&3855)<<4,gF[ti]=((Bf&65280)>>>8|(Bf&255)<<8)>>>1}var Ab=function(t,e,n){for(var r=t.length,i=0,s=new eh(e);i<r;++i)++s[t[i]-1];var o=new eh(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new eh(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],d=o[t[i]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)a[gF[d]>>>l]=c}else for(a=new eh(r),i=0;i<r;++i)t[i]&&(a[i]=gF[o[t[i]-1]++]>>>15-t[i]);return a},w2=new Bl(288);for(var ti=0;ti<144;++ti)w2[ti]=8;for(var ti=144;ti<256;++ti)w2[ti]=9;for(var ti=256;ti<280;++ti)w2[ti]=7;for(var ti=280;ti<288;++ti)w2[ti]=8;var Yde=new Bl(32);for(var ti=0;ti<32;++ti)Yde[ti]=5;var rat=Ab(w2,9,1),iat=Ab(Yde,5,1),$D=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},bc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},DD=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},sat=function(t){return(t/8|0)+(t&7&&1)},oat=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof eh?eh:t instanceof mF?mF:Bl)(n-e);return r.set(t.subarray(e,n)),r},aat=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new Bl(0);var i=!e||n,s=!n||n.i;n||(n={}),e||(e=new Bl(r*3));var o=function(re){var se=e.length;if(re>se){var fe=new Bl(Math.max(se*2,re));fe.set(e),e=fe}},a=n.f||0,l=n.p||0,c=n.b||0,u=n.l,d=n.d,f=n.m,h=n.n,p=r*8;do{if(!u){n.f=a=bc(t,l,1);var v=bc(t,l+1,3);if(l+=3,v)if(v==1)u=rat,d=iat,f=9,h=5;else if(v==2){var x=bc(t,l,31)+257,S=bc(t,l+10,15)+4,_=x+bc(t,l+5,31)+1;l+=14;for(var C=new Bl(_),T=new Bl(19),A=0;A<S;++A)T[Qot[A]]=bc(t,l+A*3,7);l+=S*3;for(var M=$D(T),E=(1<<M)-1,P=Ab(T,M,1),A=0;A<_;){var N=P[bc(t,l,E)];l+=N&15;var g=N>>>4;if(g<16)C[A++]=g;else{var F=0,$=0;for(g==16?($=3+bc(t,l,3),l+=2,F=C[A-1]):g==17?($=3+bc(t,l,7),l+=3):g==18&&($=11+bc(t,l,127),l+=7);$--;)C[A++]=F}}var O=C.subarray(0,x),z=C.subarray(x);f=$D(O),h=$D(z),u=Ab(O,f,1),d=Ab(z,h,1)}else throw"invalid block type";else{var g=sat(l)+4,m=t[g-4]|t[g-3]<<8,y=g+m;if(y>r){if(s)throw"unexpected EOF";break}i&&o(c+m),e.set(t.subarray(g,y),c),n.b=c+=m,n.p=l=y*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}i&&o(c+131072);for(var X=(1<<f)-1,D=(1<<h)-1,B=l;;B=l){var F=u[DD(t,l)&X],V=F>>>4;if(l+=F&15,l>p){if(s)throw"unexpected EOF";break}if(!F)throw"invalid length/literal";if(V<256)e[c++]=V;else if(V==256){B=l,u=null;break}else{var W=V-254;if(V>264){var A=V-257,j=Gde[A];W=bc(t,l,(1<<j)-1)+qde[A],l+=j}var J=d[DD(t,l)&D],Q=J>>>4;if(!J)throw"invalid distance";l+=J&15;var z=nat[Q];if(Q>3){var j=Hde[Q];z+=DD(t,l)&(1<<j)-1,l+=j}if(l>p){if(s)throw"unexpected EOF";break}i&&o(c+131072);for(var te=c+W;c<te;c+=4)e[c]=e[c-z],e[c+1]=e[c+1-z],e[c+2]=e[c+2-z],e[c+3]=e[c+3-z];c=te}}n.l=u,n.p=B,n.b=c,u&&(a=1,n.m=f,n.d=d,n.n=h)}while(!a);return c==e.length?e:oat(e,0,c)},lat=new Bl(0),cat=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function fE(t,e){return aat((cat(t),t.subarray(2,-4)),e)}var uat=typeof TextDecoder<"u"&&new TextDecoder,dat=0;try{uat.decode(lat,{stream:!0}),dat=1}catch{}const fat=t=>t&&t.isCubeTexture;class hat extends ci{constructor(e,n){var r,i;const s=fat(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),c=Math.pow(2,l),u=3*Math.max(c,16*7),d=4*c,f=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/d}`,`#define CUBEUV_MAX_MIP ${l}.0`],h=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,p=f.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(sx.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,v={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},g=new g2(1,16),m=new sc({uniforms:v,fragmentShader:p,vertexShader:h,side:Qa});super(g,m)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var pat=Object.defineProperty,mat=(t,e,n)=>e in t?pat(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mn=(t,e,n)=>(mat(t,typeof e!="symbol"?e+"":e,n),n);const hE=new Ig,aZ=new Id,gat=Math.cos(70*(Math.PI/180)),lZ=(t,e)=>(t%e+e)%e;let vat=class extends ld{constructor(e,n){super(),Mn(this,"object"),Mn(this,"domElement"),Mn(this,"enabled",!0),Mn(this,"target",new me),Mn(this,"minDistance",0),Mn(this,"maxDistance",1/0),Mn(this,"minZoom",0),Mn(this,"maxZoom",1/0),Mn(this,"minPolarAngle",0),Mn(this,"maxPolarAngle",Math.PI),Mn(this,"minAzimuthAngle",-1/0),Mn(this,"maxAzimuthAngle",1/0),Mn(this,"enableDamping",!1),Mn(this,"dampingFactor",.05),Mn(this,"enableZoom",!0),Mn(this,"zoomSpeed",1),Mn(this,"enableRotate",!0),Mn(this,"rotateSpeed",1),Mn(this,"enablePan",!0),Mn(this,"panSpeed",1),Mn(this,"screenSpacePanning",!0),Mn(this,"keyPanSpeed",7),Mn(this,"zoomToCursor",!1),Mn(this,"autoRotate",!1),Mn(this,"autoRotateSpeed",2),Mn(this,"reverseOrbit",!1),Mn(this,"reverseHorizontalOrbit",!1),Mn(this,"reverseVerticalOrbit",!1),Mn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Mn(this,"mouseButtons",{LEFT:qp.ROTATE,MIDDLE:qp.DOLLY,RIGHT:qp.PAN}),Mn(this,"touches",{ONE:Yp.ROTATE,TWO:Yp.DOLLY_PAN}),Mn(this,"target0"),Mn(this,"position0"),Mn(this,"zoom0"),Mn(this,"_domElementKeyEvents",null),Mn(this,"getPolarAngle"),Mn(this,"getAzimuthalAngle"),Mn(this,"setPolarAngle"),Mn(this,"setAzimuthalAngle"),Mn(this,"getDistance"),Mn(this,"listenToKeyEvents"),Mn(this,"stopListenToKeyEvents"),Mn(this,"saveState"),Mn(this,"reset"),Mn(this,"update"),Mn(this,"connect"),Mn(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=pe=>{let He=lZ(pe,2*Math.PI),ot=u.phi;ot<0&&(ot+=2*Math.PI),He<0&&(He+=2*Math.PI);let et=Math.abs(He-ot);2*Math.PI-et<et&&(He<ot?He+=2*Math.PI:ot+=2*Math.PI),d.phi=He-ot,r.update()},this.setAzimuthalAngle=pe=>{let He=lZ(pe,2*Math.PI),ot=u.theta;ot<0&&(ot+=2*Math.PI),He<0&&(He+=2*Math.PI);let et=Math.abs(He-ot);2*Math.PI-et<et&&(He<ot?He+=2*Math.PI:ot+=2*Math.PI),d.theta=He-ot,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=pe=>{pe.addEventListener("keydown",Ne),this._domElementKeyEvents=pe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ne),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const pe=new me,He=new me(0,1,0),ot=new Ro().setFromUnitVectors(e.up,He),et=ot.clone().invert(),Ie=new me,Ce=new Ro,ut=2*Math.PI;return function(){const yt=r.object.position;ot.setFromUnitVectors(e.up,He),et.copy(ot).invert(),pe.copy(yt).sub(r.target),pe.applyQuaternion(ot),u.setFromVector3(pe),r.autoRotate&&l===a.NONE&&$(N()),r.enableDamping?(u.theta+=d.theta*r.dampingFactor,u.phi+=d.phi*r.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let vt=r.minAzimuthAngle,Vt=r.maxAzimuthAngle;isFinite(vt)&&isFinite(Vt)&&(vt<-Math.PI?vt+=ut:vt>Math.PI&&(vt-=ut),Vt<-Math.PI?Vt+=ut:Vt>Math.PI&&(Vt-=ut),vt<=Vt?u.theta=Math.max(vt,Math.min(Vt,u.theta)):u.theta=u.theta>(vt+Vt)/2?Math.max(vt,u.theta):Math.min(Vt,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),r.zoomToCursor&&M||r.object.isOrthographicCamera?u.radius=j(u.radius):u.radius=j(u.radius*f),pe.setFromSpherical(u),pe.applyQuaternion(et),yt.copy(r.target).add(pe),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),h.set(0,0,0));let It=!1;if(r.zoomToCursor&&M){let en=null;if(r.object instanceof Ai&&r.object.isPerspectiveCamera){const Dt=pe.length();en=j(Dt*f);const mt=Dt-en;r.object.position.addScaledVector(T,mt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Dt=new me(A.x,A.y,0);Dt.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix(),It=!0;const mt=new me(A.x,A.y,0);mt.unproject(r.object),r.object.position.sub(mt).add(Dt),r.object.updateMatrixWorld(),en=pe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;en!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(en).add(r.object.position):(hE.origin.copy(r.object.position),hE.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(hE.direction))<gat?e.lookAt(r.target):(aZ.setFromNormalAndCoplanarPoint(r.object.up,r.target),hE.intersectPlane(aZ,r.target))))}else r.object instanceof Vd&&r.object.isOrthographicCamera&&(It=f!==1,It&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix()));return f=1,M=!1,It||Ie.distanceToSquared(r.object.position)>c||8*(1-Ce.dot(r.object.quaternion))>c?(r.dispatchEvent(i),Ie.copy(r.object.position),Ce.copy(r.object.quaternion),It=!1,!0):!1}})(),this.connect=pe=>{pe===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=pe,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",gt),r.domElement.addEventListener("pointerdown",oe),r.domElement.addEventListener("pointercancel",be),r.domElement.addEventListener("wheel",ze)},this.dispose=()=>{var pe,He,ot,et,Ie,Ce;(pe=r.domElement)==null||pe.removeEventListener("contextmenu",gt),(He=r.domElement)==null||He.removeEventListener("pointerdown",oe),(ot=r.domElement)==null||ot.removeEventListener("pointercancel",be),(et=r.domElement)==null||et.removeEventListener("wheel",ze),(Ie=r.domElement)==null||Ie.ownerDocument.removeEventListener("pointermove",xe),(Ce=r.domElement)==null||Ce.ownerDocument.removeEventListener("pointerup",Se),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ne)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new dF,d=new dF;let f=1;const h=new me,p=new lt,v=new lt,g=new lt,m=new lt,y=new lt,x=new lt,S=new lt,_=new lt,C=new lt,T=new me,A=new lt;let M=!1;const E=[],P={};function N(){return 2*Math.PI/60/60*r.autoRotateSpeed}function F(){return Math.pow(.95,r.zoomSpeed)}function $(pe){r.reverseOrbit||r.reverseHorizontalOrbit?d.theta+=pe:d.theta-=pe}function O(pe){r.reverseOrbit||r.reverseVerticalOrbit?d.phi+=pe:d.phi-=pe}const z=(()=>{const pe=new me;return function(ot,et){pe.setFromMatrixColumn(et,0),pe.multiplyScalar(-ot),h.add(pe)}})(),X=(()=>{const pe=new me;return function(ot,et){r.screenSpacePanning===!0?pe.setFromMatrixColumn(et,1):(pe.setFromMatrixColumn(et,0),pe.crossVectors(r.object.up,pe)),pe.multiplyScalar(ot),h.add(pe)}})(),D=(()=>{const pe=new me;return function(ot,et){const Ie=r.domElement;if(Ie&&r.object instanceof Ai&&r.object.isPerspectiveCamera){const Ce=r.object.position;pe.copy(Ce).sub(r.target);let ut=pe.length();ut*=Math.tan(r.object.fov/2*Math.PI/180),z(2*ot*ut/Ie.clientHeight,r.object.matrix),X(2*et*ut/Ie.clientHeight,r.object.matrix)}else Ie&&r.object instanceof Vd&&r.object.isOrthographicCamera?(z(ot*(r.object.right-r.object.left)/r.object.zoom/Ie.clientWidth,r.object.matrix),X(et*(r.object.top-r.object.bottom)/r.object.zoom/Ie.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function B(pe){r.object instanceof Ai&&r.object.isPerspectiveCamera||r.object instanceof Vd&&r.object.isOrthographicCamera?f/=pe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function V(pe){r.object instanceof Ai&&r.object.isPerspectiveCamera||r.object instanceof Vd&&r.object.isOrthographicCamera?f*=pe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function W(pe){if(!r.zoomToCursor||!r.domElement)return;M=!0;const He=r.domElement.getBoundingClientRect(),ot=pe.clientX-He.left,et=pe.clientY-He.top,Ie=He.width,Ce=He.height;A.x=ot/Ie*2-1,A.y=-(et/Ce)*2+1,T.set(A.x,A.y,1).unproject(r.object).sub(r.object.position).normalize()}function j(pe){return Math.max(r.minDistance,Math.min(r.maxDistance,pe))}function J(pe){p.set(pe.clientX,pe.clientY)}function Q(pe){W(pe),S.set(pe.clientX,pe.clientY)}function te(pe){m.set(pe.clientX,pe.clientY)}function re(pe){v.set(pe.clientX,pe.clientY),g.subVectors(v,p).multiplyScalar(r.rotateSpeed);const He=r.domElement;He&&($(2*Math.PI*g.x/He.clientHeight),O(2*Math.PI*g.y/He.clientHeight)),p.copy(v),r.update()}function se(pe){_.set(pe.clientX,pe.clientY),C.subVectors(_,S),C.y>0?B(F()):C.y<0&&V(F()),S.copy(_),r.update()}function fe(pe){y.set(pe.clientX,pe.clientY),x.subVectors(y,m).multiplyScalar(r.panSpeed),D(x.x,x.y),m.copy(y),r.update()}function ae(pe){W(pe),pe.deltaY<0?V(F()):pe.deltaY>0&&B(F()),r.update()}function ye(pe){let He=!1;switch(pe.code){case r.keys.UP:D(0,r.keyPanSpeed),He=!0;break;case r.keys.BOTTOM:D(0,-r.keyPanSpeed),He=!0;break;case r.keys.LEFT:D(r.keyPanSpeed,0),He=!0;break;case r.keys.RIGHT:D(-r.keyPanSpeed,0),He=!0;break}He&&(pe.preventDefault(),r.update())}function le(){if(E.length==1)p.set(E[0].pageX,E[0].pageY);else{const pe=.5*(E[0].pageX+E[1].pageX),He=.5*(E[0].pageY+E[1].pageY);p.set(pe,He)}}function H(){if(E.length==1)m.set(E[0].pageX,E[0].pageY);else{const pe=.5*(E[0].pageX+E[1].pageX),He=.5*(E[0].pageY+E[1].pageY);m.set(pe,He)}}function Me(){const pe=E[0].pageX-E[1].pageX,He=E[0].pageY-E[1].pageY,ot=Math.sqrt(pe*pe+He*He);S.set(0,ot)}function we(){r.enableZoom&&Me(),r.enablePan&&H()}function Ee(){r.enableZoom&&Me(),r.enableRotate&&le()}function ge(pe){if(E.length==1)v.set(pe.pageX,pe.pageY);else{const ot=Le(pe),et=.5*(pe.pageX+ot.x),Ie=.5*(pe.pageY+ot.y);v.set(et,Ie)}g.subVectors(v,p).multiplyScalar(r.rotateSpeed);const He=r.domElement;He&&($(2*Math.PI*g.x/He.clientHeight),O(2*Math.PI*g.y/He.clientHeight)),p.copy(v)}function qe(pe){if(E.length==1)y.set(pe.pageX,pe.pageY);else{const He=Le(pe),ot=.5*(pe.pageX+He.x),et=.5*(pe.pageY+He.y);y.set(ot,et)}x.subVectors(y,m).multiplyScalar(r.panSpeed),D(x.x,x.y),m.copy(y)}function Ae(pe){const He=Le(pe),ot=pe.pageX-He.x,et=pe.pageY-He.y,Ie=Math.sqrt(ot*ot+et*et);_.set(0,Ie),C.set(0,Math.pow(_.y/S.y,r.zoomSpeed)),B(C.y),S.copy(_)}function ee(pe){r.enableZoom&&Ae(pe),r.enablePan&&qe(pe)}function Y(pe){r.enableZoom&&Ae(pe),r.enableRotate&&ge(pe)}function oe(pe){var He,ot;r.enabled!==!1&&(E.length===0&&((He=r.domElement)==null||He.ownerDocument.addEventListener("pointermove",xe),(ot=r.domElement)==null||ot.ownerDocument.addEventListener("pointerup",Se)),ct(pe),pe.pointerType==="touch"?De(pe):Re(pe))}function xe(pe){r.enabled!==!1&&(pe.pointerType==="touch"?Ve(pe):Ke(pe))}function Se(pe){var He,ot,et;Ye(pe),E.length===0&&((He=r.domElement)==null||He.releasePointerCapture(pe.pointerId),(ot=r.domElement)==null||ot.ownerDocument.removeEventListener("pointermove",xe),(et=r.domElement)==null||et.ownerDocument.removeEventListener("pointerup",Se)),r.dispatchEvent(o),l=a.NONE}function be(pe){Ye(pe)}function Re(pe){let He;switch(pe.button){case 0:He=r.mouseButtons.LEFT;break;case 1:He=r.mouseButtons.MIDDLE;break;case 2:He=r.mouseButtons.RIGHT;break;default:He=-1}switch(He){case qp.DOLLY:if(r.enableZoom===!1)return;Q(pe),l=a.DOLLY;break;case qp.ROTATE:if(pe.ctrlKey||pe.metaKey||pe.shiftKey){if(r.enablePan===!1)return;te(pe),l=a.PAN}else{if(r.enableRotate===!1)return;J(pe),l=a.ROTATE}break;case qp.PAN:if(pe.ctrlKey||pe.metaKey||pe.shiftKey){if(r.enableRotate===!1)return;J(pe),l=a.ROTATE}else{if(r.enablePan===!1)return;te(pe),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Ke(pe){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;re(pe);break;case a.DOLLY:if(r.enableZoom===!1)return;se(pe);break;case a.PAN:if(r.enablePan===!1)return;fe(pe);break}}function ze(pe){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(pe.preventDefault(),r.dispatchEvent(s),ae(pe),r.dispatchEvent(o))}function Ne(pe){r.enabled===!1||r.enablePan===!1||ye(pe)}function De(pe){switch(Xe(pe),E.length){case 1:switch(r.touches.ONE){case Yp.ROTATE:if(r.enableRotate===!1)return;le(),l=a.TOUCH_ROTATE;break;case Yp.PAN:if(r.enablePan===!1)return;H(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Yp.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;we(),l=a.TOUCH_DOLLY_PAN;break;case Yp.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ee(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Ve(pe){switch(Xe(pe),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ge(pe),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;qe(pe),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ee(pe),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Y(pe),r.update();break;default:l=a.NONE}}function gt(pe){r.enabled!==!1&&pe.preventDefault()}function ct(pe){E.push(pe)}function Ye(pe){delete P[pe.pointerId];for(let He=0;He<E.length;He++)if(E[He].pointerId==pe.pointerId){E.splice(He,1);return}}function Xe(pe){let He=P[pe.pointerId];He===void 0&&(He=new lt,P[pe.pointerId]=He),He.set(pe.pageX,pe.pageY)}function Le(pe){const He=pe.pointerId===E[0].pointerId?E[1]:E[0];return P[He.pointerId]}n!==void 0&&this.connect(n),this.update()}};class yat extends B6{constructor(e){super(e),this.type=Ao}parse(e){const a=function(x,S){switch(x){case 1:console.error("THREE.RGBELoader Read Error: "+(S||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(S||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(S||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(S||""))}return-1},d=`
`,f=function(x,S,_){S=S||1024;let T=x.pos,A=-1,M=0,E="",P=String.fromCharCode.apply(null,new Uint16Array(x.subarray(T,T+128)));for(;0>(A=P.indexOf(d))&&M<S&&T<x.byteLength;)E+=P,M+=P.length,T+=128,P+=String.fromCharCode.apply(null,new Uint16Array(x.subarray(T,T+128)));return-1<A?(_!==!1&&(x.pos+=M+A+1),E+P.slice(0,A)):!1},h=function(x){const S=/^#\?(\S+)/,_=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,C=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,T=/^\s*FORMAT=(\S+)\s*$/,A=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,M={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let E,P;if(x.pos>=x.byteLength||!(E=f(x)))return a(1,"no header found");if(!(P=E.match(S)))return a(3,"bad initial token");for(M.valid|=1,M.programtype=P[1],M.string+=E+`
`;E=f(x),E!==!1;){if(M.string+=E+`
`,E.charAt(0)==="#"){M.comments+=E+`
`;continue}if((P=E.match(_))&&(M.gamma=parseFloat(P[1])),(P=E.match(C))&&(M.exposure=parseFloat(P[1])),(P=E.match(T))&&(M.valid|=2,M.format=P[1]),(P=E.match(A))&&(M.valid|=4,M.height=parseInt(P[1],10),M.width=parseInt(P[2],10)),M.valid&2&&M.valid&4)break}return M.valid&2?M.valid&4?M:a(3,"missing image size specifier"):a(3,"missing format specifier")},p=function(x,S,_){const C=S;if(C<8||C>32767||x[0]!==2||x[1]!==2||x[2]&128)return new Uint8Array(x);if(C!==(x[2]<<8|x[3]))return a(3,"wrong scanline width");const T=new Uint8Array(4*S*_);if(!T.length)return a(4,"unable to allocate buffer space");let A=0,M=0;const E=4*C,P=new Uint8Array(4),N=new Uint8Array(E);let F=_;for(;F>0&&M<x.byteLength;){if(M+4>x.byteLength)return a(1);if(P[0]=x[M++],P[1]=x[M++],P[2]=x[M++],P[3]=x[M++],P[0]!=2||P[1]!=2||(P[2]<<8|P[3])!=C)return a(3,"bad rgbe scanline format");let $=0,O;for(;$<E&&M<x.byteLength;){O=x[M++];const X=O>128;if(X&&(O-=128),O===0||$+O>E)return a(3,"bad scanline data");if(X){const D=x[M++];for(let B=0;B<O;B++)N[$++]=D}else N.set(x.subarray(M,M+O),$),$+=O,M+=O}const z=C;for(let X=0;X<z;X++){let D=0;T[A]=N[X+D],D+=C,T[A+1]=N[X+D],D+=C,T[A+2]=N[X+D],D+=C,T[A+3]=N[X+D],A+=4}F--}return T},v=function(x,S,_,C){const T=x[S+3],A=Math.pow(2,T-128)/255;_[C+0]=x[S+0]*A,_[C+1]=x[S+1]*A,_[C+2]=x[S+2]*A,_[C+3]=1},g=function(x,S,_,C){const T=x[S+3],A=Math.pow(2,T-128)/255;_[C+0]=mm.toHalfFloat(Math.min(x[S+0]*A,65504)),_[C+1]=mm.toHalfFloat(Math.min(x[S+1]*A,65504)),_[C+2]=mm.toHalfFloat(Math.min(x[S+2]*A,65504)),_[C+3]=mm.toHalfFloat(1)},m=new Uint8Array(e);m.pos=0;const y=h(m);if(y!==-1){const x=y.width,S=y.height,_=p(m.subarray(m.pos),x,S);if(_!==-1){let C,T,A;switch(this.type){case Ps:A=_.length/4;const M=new Float32Array(A*4);for(let P=0;P<A;P++)v(_,P*4,M,P*4);C=M,T=Ps;break;case Ao:A=_.length/4;const E=new Uint16Array(A*4);for(let P=0;P<A;P++)g(_,P*4,E,P*4);C=E,T=Ao;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:x,height:S,data:C,header:y.string,gamma:y.gamma,exposure:y.exposure,type:T}}}return null}setDataType(e){return this.type=e,this}load(e,n,r,i){function s(o,a){switch(o.type){case Ps:case Ao:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Mr,o.magFilter=Mr,o.generateMipmaps=!1,o.flipY=!0;break}n&&n(o,a)}return super.load(e,s,r,i)}}const N1="colorSpace"in new di;class xat extends B6{constructor(e){super(e),this.type=Ao}parse(e){const M=Math.pow(2.7182818,2.2);function E(Z,K){for(var ne=0,G=0;G<65536;++G)(G==0||Z[G>>3]&1<<(G&7))&&(K[ne++]=G);for(var ie=ne-1;ne<65536;)K[ne++]=0;return ie}function P(Z){for(var K=0;K<16384;K++)Z[K]={},Z[K].len=0,Z[K].lit=0,Z[K].p=null}const N={l:0,c:0,lc:0};function F(Z,K,ne,G,ie){for(;ne<Z;)K=K<<8|Le(G,ie),ne+=8;ne-=Z,N.l=K>>ne&(1<<Z)-1,N.c=K,N.lc=ne}const $=new Array(59);function O(Z){for(var K=0;K<=58;++K)$[K]=0;for(var K=0;K<65537;++K)$[Z[K]]+=1;for(var ne=0,K=58;K>0;--K){var G=ne+$[K]>>1;$[K]=ne,ne=G}for(var K=0;K<65537;++K){var ie=Z[K];ie>0&&(Z[K]=ie|$[ie]++<<6)}}function z(Z,K,ne,G,ie,ce,Te){for(var de=ne,Be=0,Je=0;ie<=ce;ie++){if(de.value-ne.value>G)return!1;F(6,Be,Je,Z,de);var nt=N.l;if(Be=N.c,Je=N.lc,Te[ie]=nt,nt==63){if(de.value-ne.value>G)throw"Something wrong with hufUnpackEncTable";F(8,Be,Je,Z,de);var $e=N.l+6;if(Be=N.c,Je=N.lc,ie+$e>ce+1)throw"Something wrong with hufUnpackEncTable";for(;$e--;)Te[ie++]=0;ie--}else if(nt>=59){var $e=nt-59+2;if(ie+$e>ce+1)throw"Something wrong with hufUnpackEncTable";for(;$e--;)Te[ie++]=0;ie--}}O(Te)}function X(Z){return Z&63}function D(Z){return Z>>6}function B(Z,K,ne,G){for(;K<=ne;K++){var ie=D(Z[K]),ce=X(Z[K]);if(ie>>ce)throw"Invalid table entry";if(ce>14){var Te=G[ie>>ce-14];if(Te.len)throw"Invalid table entry";if(Te.lit++,Te.p){var de=Te.p;Te.p=new Array(Te.lit);for(var Be=0;Be<Te.lit-1;++Be)Te.p[Be]=de[Be]}else Te.p=new Array(1);Te.p[Te.lit-1]=K}else if(ce)for(var Je=0,Be=1<<14-ce;Be>0;Be--){var Te=G[(ie<<14-ce)+Je];if(Te.len||Te.p)throw"Invalid table entry";Te.len=ce,Te.lit=K,Je++}}return!0}const V={c:0,lc:0};function W(Z,K,ne,G){Z=Z<<8|Le(ne,G),K+=8,V.c=Z,V.lc=K}const j={c:0,lc:0};function J(Z,K,ne,G,ie,ce,Te,de,Be,Je){if(Z==K){G<8&&(W(ne,G,ie,Te),ne=V.c,G=V.lc),G-=8;var nt=ne>>G,nt=new Uint8Array([nt])[0];if(Be.value+nt>Je)return!1;for(var $e=de[Be.value-1];nt-- >0;)de[Be.value++]=$e}else if(Be.value<Je)de[Be.value++]=Z;else return!1;j.c=ne,j.lc=G}function Q(Z){return Z&65535}function te(Z){var K=Q(Z);return K>32767?K-65536:K}const re={a:0,b:0};function se(Z,K){var ne=te(Z),G=te(K),ie=G,ce=ne+(ie&1)+(ie>>1),Te=ce,de=ce-ie;re.a=Te,re.b=de}function fe(Z,K){var ne=Q(Z),G=Q(K),ie=ne-(G>>1)&65535,ce=G+ie-32768&65535;re.a=ce,re.b=ie}function ae(Z,K,ne,G,ie,ce,Te){for(var de=Te<16384,Be=ne>ie?ie:ne,Je=1,nt;Je<=Be;)Je<<=1;for(Je>>=1,nt=Je,Je>>=1;Je>=1;){for(var $e=0,Ct=$e+ce*(ie-nt),ht=ce*Je,ft=ce*nt,Ot=G*Je,Qt=G*nt,nn,vn,Nt,Mt;$e<=Ct;$e+=ft){for(var En=$e,tn=$e+G*(ne-nt);En<=tn;En+=Qt){var cn=En+Ot,lr=En+ht,Vn=lr+Ot;de?(se(Z[En+K],Z[lr+K]),nn=re.a,Nt=re.b,se(Z[cn+K],Z[Vn+K]),vn=re.a,Mt=re.b,se(nn,vn),Z[En+K]=re.a,Z[cn+K]=re.b,se(Nt,Mt),Z[lr+K]=re.a,Z[Vn+K]=re.b):(fe(Z[En+K],Z[lr+K]),nn=re.a,Nt=re.b,fe(Z[cn+K],Z[Vn+K]),vn=re.a,Mt=re.b,fe(nn,vn),Z[En+K]=re.a,Z[cn+K]=re.b,fe(Nt,Mt),Z[lr+K]=re.a,Z[Vn+K]=re.b)}if(ne&Je){var lr=En+ht;de?se(Z[En+K],Z[lr+K]):fe(Z[En+K],Z[lr+K]),nn=re.a,Z[lr+K]=re.b,Z[En+K]=nn}}if(ie&Je)for(var En=$e,tn=$e+G*(ne-nt);En<=tn;En+=Qt){var cn=En+Ot;de?se(Z[En+K],Z[cn+K]):fe(Z[En+K],Z[cn+K]),nn=re.a,Z[cn+K]=re.b,Z[En+K]=nn}nt=Je,Je>>=1}return $e}function ye(Z,K,ne,G,ie,ce,Te,de,Be,Je){for(var nt=0,$e=0,Ct=de,ht=Math.trunc(ie.value+(ce+7)/8);ie.value<ht;)for(W(nt,$e,ne,ie),nt=V.c,$e=V.lc;$e>=14;){var ft=nt>>$e-14&16383,Ot=K[ft];if(Ot.len)$e-=Ot.len,J(Ot.lit,Te,nt,$e,ne,G,ie,Be,Je,Ct),nt=j.c,$e=j.lc;else{if(!Ot.p)throw"hufDecode issues";var Qt;for(Qt=0;Qt<Ot.lit;Qt++){for(var nn=X(Z[Ot.p[Qt]]);$e<nn&&ie.value<ht;)W(nt,$e,ne,ie),nt=V.c,$e=V.lc;if($e>=nn&&D(Z[Ot.p[Qt]])==(nt>>$e-nn&(1<<nn)-1)){$e-=nn,J(Ot.p[Qt],Te,nt,$e,ne,G,ie,Be,Je,Ct),nt=j.c,$e=j.lc;break}}if(Qt==Ot.lit)throw"hufDecode issues"}}var vn=8-ce&7;for(nt>>=vn,$e-=vn;$e>0;){var Ot=K[nt<<14-$e&16383];if(Ot.len)$e-=Ot.len,J(Ot.lit,Te,nt,$e,ne,G,ie,Be,Je,Ct),nt=j.c,$e=j.lc;else throw"hufDecode issues"}return!0}function le(Z,K,ne,G,ie,ce){var Te={value:0},de=ne.value,Be=Xe(K,ne),Je=Xe(K,ne);ne.value+=4;var nt=Xe(K,ne);if(ne.value+=4,Be<0||Be>=65537||Je<0||Je>=65537)throw"Something wrong with HUF_ENCSIZE";var $e=new Array(65537),Ct=new Array(16384);P(Ct);var ht=G-(ne.value-de);if(z(Z,K,ne,ht,Be,Je,$e),nt>8*(G-(ne.value-de)))throw"Something wrong with hufUncompress";B($e,Be,Je,Ct),ye($e,Ct,Z,K,ne,nt,Je,ce,ie,Te)}function H(Z,K,ne){for(var G=0;G<ne;++G)K[G]=Z[K[G]]}function Me(Z){for(var K=1;K<Z.length;K++){var ne=Z[K-1]+Z[K]-128;Z[K]=ne}}function we(Z,K){for(var ne=0,G=Math.floor((Z.length+1)/2),ie=0,ce=Z.length-1;!(ie>ce||(K[ie++]=Z[ne++],ie>ce));)K[ie++]=Z[G++]}function Ee(Z){for(var K=Z.byteLength,ne=new Array,G=0,ie=new DataView(Z);K>0;){var ce=ie.getInt8(G++);if(ce<0){var Te=-ce;K-=Te+1;for(var de=0;de<Te;de++)ne.push(ie.getUint8(G++))}else{var Te=ce;K-=2;for(var Be=ie.getUint8(G++),de=0;de<Te+1;de++)ne.push(Be)}}return ne}function ge(Z,K,ne,G,ie,ce){var cn=new DataView(ce.buffer),Te=ne[Z.idx[0]].width,de=ne[Z.idx[0]].height,Be=3,Je=Math.floor(Te/8),nt=Math.ceil(Te/8),$e=Math.ceil(de/8),Ct=Te-(nt-1)*8,ht=de-($e-1)*8,ft={value:0},Ot=new Array(Be),Qt=new Array(Be),nn=new Array(Be),vn=new Array(Be),Nt=new Array(Be);for(let hn=0;hn<Be;++hn)Nt[hn]=K[Z.idx[hn]],Ot[hn]=hn<1?0:Ot[hn-1]+nt*$e,Qt[hn]=new Float32Array(64),nn[hn]=new Uint16Array(64),vn[hn]=new Uint16Array(nt*64);for(let hn=0;hn<$e;++hn){var Mt=8;hn==$e-1&&(Mt=ht);var En=8;for(let rn=0;rn<nt;++rn){rn==nt-1&&(En=Ct);for(let an=0;an<Be;++an)nn[an].fill(0),nn[an][0]=ie[Ot[an]++],qe(ft,G,nn[an]),Ae(nn[an],Qt[an]),ee(Qt[an]);Y(Qt);for(let an=0;an<Be;++an)oe(Qt[an],vn[an],rn*64)}let er=0;for(let rn=0;rn<Be;++rn){const an=ne[Z.idx[rn]].type;for(let Nr=8*hn;Nr<8*hn+Mt;++Nr){er=Nt[rn][Nr];for(let Vs=0;Vs<Je;++Vs){const Li=Vs*64+(Nr&7)*8;cn.setUint16(er+0*2*an,vn[rn][Li+0],!0),cn.setUint16(er+1*2*an,vn[rn][Li+1],!0),cn.setUint16(er+2*2*an,vn[rn][Li+2],!0),cn.setUint16(er+3*2*an,vn[rn][Li+3],!0),cn.setUint16(er+4*2*an,vn[rn][Li+4],!0),cn.setUint16(er+5*2*an,vn[rn][Li+5],!0),cn.setUint16(er+6*2*an,vn[rn][Li+6],!0),cn.setUint16(er+7*2*an,vn[rn][Li+7],!0),er+=8*2*an}}if(Je!=nt)for(let Nr=8*hn;Nr<8*hn+Mt;++Nr){const Vs=Nt[rn][Nr]+8*Je*2*an,Li=Je*64+(Nr&7)*8;for(let Fa=0;Fa<En;++Fa)cn.setUint16(Vs+Fa*2*an,vn[rn][Li+Fa],!0)}}}for(var tn=new Uint16Array(Te),cn=new DataView(ce.buffer),lr=0;lr<Be;++lr){ne[Z.idx[lr]].decoded=!0;var Vn=ne[Z.idx[lr]].type;if(ne[lr].type==2)for(var Zn=0;Zn<de;++Zn){const hn=Nt[lr][Zn];for(var Tn=0;Tn<Te;++Tn)tn[Tn]=cn.getUint16(hn+Tn*2*Vn,!0);for(var Tn=0;Tn<Te;++Tn)cn.setFloat32(hn+Tn*2*Vn,Ie(tn[Tn]),!0)}}}function qe(Z,K,ne){for(var G,ie=1;ie<64;)G=K[Z.value],G==65280?ie=64:G>>8==255?ie+=G&255:(ne[ie]=G,ie++),Z.value++}function Ae(Z,K){K[0]=Ie(Z[0]),K[1]=Ie(Z[1]),K[2]=Ie(Z[5]),K[3]=Ie(Z[6]),K[4]=Ie(Z[14]),K[5]=Ie(Z[15]),K[6]=Ie(Z[27]),K[7]=Ie(Z[28]),K[8]=Ie(Z[2]),K[9]=Ie(Z[4]),K[10]=Ie(Z[7]),K[11]=Ie(Z[13]),K[12]=Ie(Z[16]),K[13]=Ie(Z[26]),K[14]=Ie(Z[29]),K[15]=Ie(Z[42]),K[16]=Ie(Z[3]),K[17]=Ie(Z[8]),K[18]=Ie(Z[12]),K[19]=Ie(Z[17]),K[20]=Ie(Z[25]),K[21]=Ie(Z[30]),K[22]=Ie(Z[41]),K[23]=Ie(Z[43]),K[24]=Ie(Z[9]),K[25]=Ie(Z[11]),K[26]=Ie(Z[18]),K[27]=Ie(Z[24]),K[28]=Ie(Z[31]),K[29]=Ie(Z[40]),K[30]=Ie(Z[44]),K[31]=Ie(Z[53]),K[32]=Ie(Z[10]),K[33]=Ie(Z[19]),K[34]=Ie(Z[23]),K[35]=Ie(Z[32]),K[36]=Ie(Z[39]),K[37]=Ie(Z[45]),K[38]=Ie(Z[52]),K[39]=Ie(Z[54]),K[40]=Ie(Z[20]),K[41]=Ie(Z[22]),K[42]=Ie(Z[33]),K[43]=Ie(Z[38]),K[44]=Ie(Z[46]),K[45]=Ie(Z[51]),K[46]=Ie(Z[55]),K[47]=Ie(Z[60]),K[48]=Ie(Z[21]),K[49]=Ie(Z[34]),K[50]=Ie(Z[37]),K[51]=Ie(Z[47]),K[52]=Ie(Z[50]),K[53]=Ie(Z[56]),K[54]=Ie(Z[59]),K[55]=Ie(Z[61]),K[56]=Ie(Z[35]),K[57]=Ie(Z[36]),K[58]=Ie(Z[48]),K[59]=Ie(Z[49]),K[60]=Ie(Z[57]),K[61]=Ie(Z[58]),K[62]=Ie(Z[62]),K[63]=Ie(Z[63])}function ee(Z){const K=.5*Math.cos(.7853975),ne=.5*Math.cos(3.14159/16),G=.5*Math.cos(3.14159/8),ie=.5*Math.cos(3*3.14159/16),ce=.5*Math.cos(5*3.14159/16),Te=.5*Math.cos(3*3.14159/8),de=.5*Math.cos(7*3.14159/16);for(var Be=new Array(4),Je=new Array(4),nt=new Array(4),$e=new Array(4),Ct=0;Ct<8;++Ct){var ht=Ct*8;Be[0]=G*Z[ht+2],Be[1]=Te*Z[ht+2],Be[2]=G*Z[ht+6],Be[3]=Te*Z[ht+6],Je[0]=ne*Z[ht+1]+ie*Z[ht+3]+ce*Z[ht+5]+de*Z[ht+7],Je[1]=ie*Z[ht+1]-de*Z[ht+3]-ne*Z[ht+5]-ce*Z[ht+7],Je[2]=ce*Z[ht+1]-ne*Z[ht+3]+de*Z[ht+5]+ie*Z[ht+7],Je[3]=de*Z[ht+1]-ce*Z[ht+3]+ie*Z[ht+5]-ne*Z[ht+7],nt[0]=K*(Z[ht+0]+Z[ht+4]),nt[3]=K*(Z[ht+0]-Z[ht+4]),nt[1]=Be[0]+Be[3],nt[2]=Be[1]-Be[2],$e[0]=nt[0]+nt[1],$e[1]=nt[3]+nt[2],$e[2]=nt[3]-nt[2],$e[3]=nt[0]-nt[1],Z[ht+0]=$e[0]+Je[0],Z[ht+1]=$e[1]+Je[1],Z[ht+2]=$e[2]+Je[2],Z[ht+3]=$e[3]+Je[3],Z[ht+4]=$e[3]-Je[3],Z[ht+5]=$e[2]-Je[2],Z[ht+6]=$e[1]-Je[1],Z[ht+7]=$e[0]-Je[0]}for(var ft=0;ft<8;++ft)Be[0]=G*Z[16+ft],Be[1]=Te*Z[16+ft],Be[2]=G*Z[48+ft],Be[3]=Te*Z[48+ft],Je[0]=ne*Z[8+ft]+ie*Z[24+ft]+ce*Z[40+ft]+de*Z[56+ft],Je[1]=ie*Z[8+ft]-de*Z[24+ft]-ne*Z[40+ft]-ce*Z[56+ft],Je[2]=ce*Z[8+ft]-ne*Z[24+ft]+de*Z[40+ft]+ie*Z[56+ft],Je[3]=de*Z[8+ft]-ce*Z[24+ft]+ie*Z[40+ft]-ne*Z[56+ft],nt[0]=K*(Z[ft]+Z[32+ft]),nt[3]=K*(Z[ft]-Z[32+ft]),nt[1]=Be[0]+Be[3],nt[2]=Be[1]-Be[2],$e[0]=nt[0]+nt[1],$e[1]=nt[3]+nt[2],$e[2]=nt[3]-nt[2],$e[3]=nt[0]-nt[1],Z[0+ft]=$e[0]+Je[0],Z[8+ft]=$e[1]+Je[1],Z[16+ft]=$e[2]+Je[2],Z[24+ft]=$e[3]+Je[3],Z[32+ft]=$e[3]-Je[3],Z[40+ft]=$e[2]-Je[2],Z[48+ft]=$e[1]-Je[1],Z[56+ft]=$e[0]-Je[0]}function Y(Z){for(var K=0;K<64;++K){var ne=Z[0][K],G=Z[1][K],ie=Z[2][K];Z[0][K]=ne+1.5747*ie,Z[1][K]=ne-.1873*G-.4682*ie,Z[2][K]=ne+1.8556*G}}function oe(Z,K,ne){for(var G=0;G<64;++G)K[ne+G]=mm.toHalfFloat(xe(Z[G]))}function xe(Z){return Z<=1?Math.sign(Z)*Math.pow(Math.abs(Z),2.2):Math.sign(Z)*Math.pow(M,Math.abs(Z)-1)}function Se(Z){return new DataView(Z.array.buffer,Z.offset.value,Z.size)}function be(Z){var K=Z.viewer.buffer.slice(Z.offset.value,Z.offset.value+Z.size),ne=new Uint8Array(Ee(K)),G=new Uint8Array(ne.length);return Me(ne),we(ne,G),new DataView(G.buffer)}function Re(Z){var K=Z.array.slice(Z.offset.value,Z.offset.value+Z.size),ne=fE(K),G=new Uint8Array(ne.length);return Me(ne),we(ne,G),new DataView(G.buffer)}function Ke(Z){for(var K=Z.viewer,ne={value:Z.offset.value},G=new Uint16Array(Z.width*Z.scanlineBlockSize*(Z.channels*Z.type)),ie=new Uint8Array(8192),ce=0,Te=new Array(Z.channels),de=0;de<Z.channels;de++)Te[de]={},Te[de].start=ce,Te[de].end=Te[de].start,Te[de].nx=Z.width,Te[de].ny=Z.lines,Te[de].size=Z.type,ce+=Te[de].nx*Te[de].ny*Te[de].size;var Be=Ce(K,ne),Je=Ce(K,ne);if(Je>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Be<=Je)for(var de=0;de<Je-Be+1;de++)ie[de+Be]=pe(K,ne);var nt=new Uint16Array(65536),$e=E(ie,nt),Ct=Xe(K,ne);le(Z.array,K,ne,Ct,G,ce);for(var de=0;de<Z.channels;++de)for(var ht=Te[de],ft=0;ft<Te[de].size;++ft)ae(G,ht.start+ft,ht.nx,ht.size,ht.ny,ht.nx*ht.size,$e);H(nt,G,ce);for(var Ot=0,Qt=new Uint8Array(G.buffer.byteLength),nn=0;nn<Z.lines;nn++)for(var vn=0;vn<Z.channels;vn++){var ht=Te[vn],Nt=ht.nx*ht.size,Mt=new Uint8Array(G.buffer,ht.end*2,Nt*2);Qt.set(Mt,Ot),Ot+=Nt*2,ht.end+=Nt}return new DataView(Qt.buffer)}function ze(Z){var K=Z.array.slice(Z.offset.value,Z.offset.value+Z.size),ne=fE(K);const G=Z.lines*Z.channels*Z.width,ie=Z.type==1?new Uint16Array(G):new Uint32Array(G);let ce=0,Te=0;const de=new Array(4);for(let Be=0;Be<Z.lines;Be++)for(let Je=0;Je<Z.channels;Je++){let nt=0;switch(Z.type){case 1:de[0]=ce,de[1]=de[0]+Z.width,ce=de[1]+Z.width;for(let $e=0;$e<Z.width;++$e){const Ct=ne[de[0]++]<<8|ne[de[1]++];nt+=Ct,ie[Te]=nt,Te++}break;case 2:de[0]=ce,de[1]=de[0]+Z.width,de[2]=de[1]+Z.width,ce=de[2]+Z.width;for(let $e=0;$e<Z.width;++$e){const Ct=ne[de[0]++]<<24|ne[de[1]++]<<16|ne[de[2]++]<<8;nt+=Ct,ie[Te]=nt,Te++}break}}return new DataView(ie.buffer)}function Ne(Z){var K=Z.viewer,ne={value:Z.offset.value},G=new Uint8Array(Z.width*Z.lines*(Z.channels*Z.type*2)),ie={version:He(K,ne),unknownUncompressedSize:He(K,ne),unknownCompressedSize:He(K,ne),acCompressedSize:He(K,ne),dcCompressedSize:He(K,ne),rleCompressedSize:He(K,ne),rleUncompressedSize:He(K,ne),rleRawSize:He(K,ne),totalAcUncompressedCount:He(K,ne),totalDcUncompressedCount:He(K,ne),acCompression:He(K,ne)};if(ie.version<2)throw"EXRLoader.parse: "+Pt.compression+" version "+ie.version+" is unsupported";for(var ce=new Array,Te=Ce(K,ne)-2;Te>0;){var de=De(K.buffer,ne),Be=pe(K,ne),Je=Be>>2&3,nt=(Be>>4)-1,$e=new Int8Array([nt])[0],Ct=pe(K,ne);ce.push({name:de,index:$e,type:Ct,compression:Je}),Te-=de.length+3}for(var ht=Pt.channels,ft=new Array(Z.channels),Ot=0;Ot<Z.channels;++Ot){var Qt=ft[Ot]={},nn=ht[Ot];Qt.name=nn.name,Qt.compression=0,Qt.decoded=!1,Qt.type=nn.pixelType,Qt.pLinear=nn.pLinear,Qt.width=Z.width,Qt.height=Z.lines}for(var vn={idx:new Array(3)},Nt=0;Nt<Z.channels;++Nt)for(var Qt=ft[Nt],Ot=0;Ot<ce.length;++Ot){var Mt=ce[Ot];Qt.name==Mt.name&&(Qt.compression=Mt.compression,Mt.index>=0&&(vn.idx[Mt.index]=Nt),Qt.offset=Nt)}if(ie.acCompressedSize>0)switch(ie.acCompression){case 0:var cn=new Uint16Array(ie.totalAcUncompressedCount);le(Z.array,K,ne,ie.acCompressedSize,cn,ie.totalAcUncompressedCount);break;case 1:var En=Z.array.slice(ne.value,ne.value+ie.totalAcUncompressedCount),tn=fE(En),cn=new Uint16Array(tn.buffer);ne.value+=ie.totalAcUncompressedCount;break}if(ie.dcCompressedSize>0){var lr={array:Z.array,offset:ne,size:ie.dcCompressedSize},Vn=new Uint16Array(Re(lr).buffer);ne.value+=ie.dcCompressedSize}if(ie.rleRawSize>0){var En=Z.array.slice(ne.value,ne.value+ie.rleCompressedSize),tn=fE(En),Zn=Ee(tn.buffer);ne.value+=ie.rleCompressedSize}for(var Tn=0,hn=new Array(ft.length),Ot=0;Ot<hn.length;++Ot)hn[Ot]=new Array;for(var er=0;er<Z.lines;++er)for(var rn=0;rn<ft.length;++rn)hn[rn].push(Tn),Tn+=ft[rn].width*Z.type*2;ge(vn,hn,ft,cn,Vn,G);for(var Ot=0;Ot<ft.length;++Ot){var Qt=ft[Ot];if(!Qt.decoded)switch(Qt.compression){case 2:for(var an=0,Nr=0,er=0;er<Z.lines;++er){for(var Vs=hn[Ot][an],Li=0;Li<Qt.width;++Li){for(var Fa=0;Fa<2*Qt.type;++Fa)G[Vs++]=Zn[Nr+Fa*Qt.width*Qt.height];Nr++}an++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(G.buffer)}function De(Z,K){for(var ne=new Uint8Array(Z),G=0;ne[K.value+G]!=0;)G+=1;var ie=new TextDecoder().decode(ne.slice(K.value,K.value+G));return K.value=K.value+G+1,ie}function Ve(Z,K,ne){var G=new TextDecoder().decode(new Uint8Array(Z).slice(K.value,K.value+ne));return K.value=K.value+ne,G}function gt(Z,K){var ne=Ye(Z,K),G=Xe(Z,K);return[ne,G]}function ct(Z,K){var ne=Xe(Z,K),G=Xe(Z,K);return[ne,G]}function Ye(Z,K){var ne=Z.getInt32(K.value,!0);return K.value=K.value+4,ne}function Xe(Z,K){var ne=Z.getUint32(K.value,!0);return K.value=K.value+4,ne}function Le(Z,K){var ne=Z[K.value];return K.value=K.value+1,ne}function pe(Z,K){var ne=Z.getUint8(K.value);return K.value=K.value+1,ne}const He=function(Z,K){let ne;return"getBigInt64"in DataView.prototype?ne=Number(Z.getBigInt64(K.value,!0)):ne=Z.getUint32(K.value+4,!0)+Number(Z.getUint32(K.value,!0)<<32),K.value+=8,ne};function ot(Z,K){var ne=Z.getFloat32(K.value,!0);return K.value+=4,ne}function et(Z,K){return mm.toHalfFloat(ot(Z,K))}function Ie(Z){var K=(Z&31744)>>10,ne=Z&1023;return(Z>>15?-1:1)*(K?K===31?ne?NaN:1/0:Math.pow(2,K-15)*(1+ne/1024):6103515625e-14*(ne/1024))}function Ce(Z,K){var ne=Z.getUint16(K.value,!0);return K.value+=2,ne}function ut(Z,K){return Ie(Ce(Z,K))}function dt(Z,K,ne,G){for(var ie=ne.value,ce=[];ne.value<ie+G-1;){var Te=De(K,ne),de=Ye(Z,ne),Be=pe(Z,ne);ne.value+=3;var Je=Ye(Z,ne),nt=Ye(Z,ne);ce.push({name:Te,pixelType:de,pLinear:Be,xSampling:Je,ySampling:nt})}return ne.value+=1,ce}function yt(Z,K){var ne=ot(Z,K),G=ot(Z,K),ie=ot(Z,K),ce=ot(Z,K),Te=ot(Z,K),de=ot(Z,K),Be=ot(Z,K),Je=ot(Z,K);return{redX:ne,redY:G,greenX:ie,greenY:ce,blueX:Te,blueY:de,whiteX:Be,whiteY:Je}}function vt(Z,K){var ne=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],G=pe(Z,K);return ne[G]}function Vt(Z,K){var ne=Xe(Z,K),G=Xe(Z,K),ie=Xe(Z,K),ce=Xe(Z,K);return{xMin:ne,yMin:G,xMax:ie,yMax:ce}}function It(Z,K){var ne=["INCREASING_Y"],G=pe(Z,K);return ne[G]}function en(Z,K){var ne=ot(Z,K),G=ot(Z,K);return[ne,G]}function Dt(Z,K){var ne=ot(Z,K),G=ot(Z,K),ie=ot(Z,K);return[ne,G,ie]}function mt(Z,K,ne,G,ie){if(G==="string"||G==="stringvector"||G==="iccProfile")return Ve(K,ne,ie);if(G==="chlist")return dt(Z,K,ne,ie);if(G==="chromaticities")return yt(Z,ne);if(G==="compression")return vt(Z,ne);if(G==="box2i")return Vt(Z,ne);if(G==="lineOrder")return It(Z,ne);if(G==="float")return ot(Z,ne);if(G==="v2f")return en(Z,ne);if(G==="v3f")return Dt(Z,ne);if(G==="int")return Ye(Z,ne);if(G==="rational")return gt(Z,ne);if(G==="timecode")return ct(Z,ne);if(G==="preview")return ne.value+=ie,"skipped";ne.value+=ie}function jt(Z,K,ne){const G={};if(Z.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";G.version=Z.getUint8(4);const ie=Z.getUint8(5);G.spec={singleTile:!!(ie&2),longName:!!(ie&4),deepFormat:!!(ie&8),multiPart:!!(ie&16)},ne.value=8;for(var ce=!0;ce;){var Te=De(K,ne);if(Te==0)ce=!1;else{var de=De(K,ne),Be=Xe(Z,ne),Je=mt(Z,K,ne,de,Be);Je===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${de}'.`):G[Te]=Je}}if(ie&-5)throw console.error("EXRHeader:",G),"THREE.EXRLoader: provided file is currently unsupported.";return G}function mn(Z,K,ne,G,ie){const ce={size:0,viewer:K,array:ne,offset:G,width:Z.dataWindow.xMax-Z.dataWindow.xMin+1,height:Z.dataWindow.yMax-Z.dataWindow.yMin+1,channels:Z.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:Z.channels[0].pixelType,uncompress:null,getter:null,format:null,[N1?"colorSpace":"encoding"]:null};switch(Z.compression){case"NO_COMPRESSION":ce.lines=1,ce.uncompress=Se;break;case"RLE_COMPRESSION":ce.lines=1,ce.uncompress=be;break;case"ZIPS_COMPRESSION":ce.lines=1,ce.uncompress=Re;break;case"ZIP_COMPRESSION":ce.lines=16,ce.uncompress=Re;break;case"PIZ_COMPRESSION":ce.lines=32,ce.uncompress=Ke;break;case"PXR24_COMPRESSION":ce.lines=16,ce.uncompress=ze;break;case"DWAA_COMPRESSION":ce.lines=32,ce.uncompress=Ne;break;case"DWAB_COMPRESSION":ce.lines=256,ce.uncompress=Ne;break;default:throw"EXRLoader.parse: "+Z.compression+" is unsupported"}if(ce.scanlineBlockSize=ce.lines,ce.type==1)switch(ie){case Ps:ce.getter=ut,ce.inputSize=2;break;case Ao:ce.getter=Ce,ce.inputSize=2;break}else if(ce.type==2)switch(ie){case Ps:ce.getter=ot,ce.inputSize=4;break;case Ao:ce.getter=et,ce.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+ce.type+" for "+Z.compression+".";ce.blockCount=(Z.dataWindow.yMax+1)/ce.scanlineBlockSize;for(var Te=0;Te<ce.blockCount;Te++)He(K,G);ce.outputChannels=ce.channels==3?4:ce.channels;const de=ce.width*ce.height*ce.outputChannels;switch(ie){case Ps:ce.byteArray=new Float32Array(de),ce.channels<ce.outputChannels&&ce.byteArray.fill(1,0,de);break;case Ao:ce.byteArray=new Uint16Array(de),ce.channels<ce.outputChannels&&ce.byteArray.fill(15360,0,de);break;default:console.error("THREE.EXRLoader: unsupported type: ",ie);break}return ce.bytesPerLine=ce.width*ce.inputSize*ce.channels,ce.outputChannels==4?ce.format=Eo:ce.format=a6,N1?ce.colorSpace="srgb-linear":ce.encoding=3e3,ce}const fn=new DataView(e),_t=new Uint8Array(e),Lt={value:0},Pt=jt(fn,e,Lt),bt=mn(Pt,fn,_t,Lt,this.type),Wt={value:0},Cn={R:0,G:1,B:2,A:3,Y:0};for(let Z=0;Z<bt.height/bt.scanlineBlockSize;Z++){const K=Xe(fn,Lt);bt.size=Xe(fn,Lt),bt.lines=K+bt.scanlineBlockSize>bt.height?bt.height-K:bt.scanlineBlockSize;const G=bt.size<bt.lines*bt.bytesPerLine?bt.uncompress(bt):Se(bt);Lt.value+=bt.size;for(let ie=0;ie<bt.scanlineBlockSize;ie++){const ce=ie+Z*bt.scanlineBlockSize;if(ce>=bt.height)break;for(let Te=0;Te<bt.channels;Te++){const de=Cn[Pt.channels[Te].name];for(let Be=0;Be<bt.width;Be++){Wt.value=(ie*(bt.channels*bt.width)+Te*bt.width+Be)*bt.inputSize;const Je=(bt.height-1-ce)*(bt.width*bt.outputChannels)+Be*bt.outputChannels+de;bt.byteArray[Je]=bt.getter(G,Wt)}}}}return{header:Pt,width:bt.width,height:bt.height,data:bt.byteArray,format:bt.format,[N1?"colorSpace":"encoding"]:bt[N1?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,r,i){function s(o,a){N1?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Mr,o.magFilter=Mr,o.generateMipmaps=!1,o.flipY=!1,n&&n(o,a)}return super.load(e,s,r,i)}}const cZ=new xs,pE=new me;class J6 extends WR{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new Zt(e,3)),this.setAttribute("uv",new Zt(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,r=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),r.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new FA(n,6,1);return this.setAttribute("instanceStart",new il(r,3,0)),this.setAttribute("instanceEnd",new il(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new FA(n,6,1);return this.setAttribute("instanceColorStart",new il(r,3,0)),this.setAttribute("instanceColorEnd",new il(r,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new N6(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xs);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),cZ.setFromBufferAttribute(n),this.boundingBox.union(cZ))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bs),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)pE.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(pE)),pE.fromBufferAttribute(n,s),i=Math.max(i,r.distanceToSquared(pE));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class Kde extends J6{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setPositions(r),this}setColors(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setColors(r),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}class Q6 extends sc{constructor(e){super({type:"LineMaterial",uniforms:Zw.clone(Zw.merge([At.common,At.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new lt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <color_pars_vertex>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				attribute vec3 instanceColorStart;
				attribute vec3 instanceColorEnd;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <color_pars_fragment>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );

					#include <logdepthbuf_fragment>
					#include <color_fragment>

					gl_FragColor = vec4( diffuseColor.rgb, alpha );

					#include <tonemapping_fragment>
					#include <${parseInt(sx.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(n){!!n!="USE_DASH"in this.defines&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(n){!!n!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const uZ=new me,dZ=new me,Gs=new rr,Hs=new rr,fu=new rr,LD=new me,OD=new _n,bo=new vde,fZ=new me,mE=new xs,gE=new bs,hu=new rr;let Au,vF,Zde,$m;function hZ(t,e,n){return hu.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),hu.multiplyScalar(1/hu.w),hu.x=$m/n.width,hu.y=$m/n.height,hu.applyMatrix4(t.projectionMatrixInverse),hu.multiplyScalar(1/hu.w),Math.abs(Math.max(hu.x,hu.y))}function bat(t,e){for(let n=0,r=vF.count;n<r;n++){bo.start.fromBufferAttribute(vF,n),bo.end.fromBufferAttribute(Zde,n);const i=new me,s=new me;Au.distanceSqToSegment(bo.start,bo.end,s,i),s.distanceTo(i)<$m*.5&&e.push({point:s,pointOnLine:i,distance:Au.origin.distanceTo(s),object:t,face:null,faceIndex:n,uv:null,uv2:null})}}function wat(t,e,n){const r=e.projectionMatrix,s=t.material.resolution,o=t.matrixWorld,a=t.geometry,l=a.attributes.instanceStart,c=a.attributes.instanceEnd,u=-e.near;Au.at(1,fu),fu.w=1,fu.applyMatrix4(e.matrixWorldInverse),fu.applyMatrix4(r),fu.multiplyScalar(1/fu.w),fu.x*=s.x/2,fu.y*=s.y/2,fu.z=0,LD.copy(fu),OD.multiplyMatrices(e.matrixWorldInverse,o);for(let d=0,f=l.count;d<f;d++){if(Gs.fromBufferAttribute(l,d),Hs.fromBufferAttribute(c,d),Gs.w=1,Hs.w=1,Gs.applyMatrix4(OD),Hs.applyMatrix4(OD),Gs.z>u&&Hs.z>u)continue;if(Gs.z>u){const y=Gs.z-Hs.z,x=(Gs.z-u)/y;Gs.lerp(Hs,x)}else if(Hs.z>u){const y=Hs.z-Gs.z,x=(Hs.z-u)/y;Hs.lerp(Gs,x)}Gs.applyMatrix4(r),Hs.applyMatrix4(r),Gs.multiplyScalar(1/Gs.w),Hs.multiplyScalar(1/Hs.w),Gs.x*=s.x/2,Gs.y*=s.y/2,Hs.x*=s.x/2,Hs.y*=s.y/2,bo.start.copy(Gs),bo.start.z=0,bo.end.copy(Hs),bo.end.z=0;const p=bo.closestPointToPointParameter(LD,!0);bo.at(p,fZ);const v=uue.lerp(Gs.z,Hs.z,p),g=v>=-1&&v<=1,m=LD.distanceTo(fZ)<$m*.5;if(g&&m){bo.start.fromBufferAttribute(l,d),bo.end.fromBufferAttribute(c,d),bo.start.applyMatrix4(o),bo.end.applyMatrix4(o);const y=new me,x=new me;Au.distanceSqToSegment(bo.start,bo.end,x,y),n.push({point:x,pointOnLine:y,distance:Au.origin.distanceTo(x),object:t,face:null,faceIndex:d,uv:null,uv2:null})}}}class Jde extends ci{constructor(e=new J6,n=new Q6({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,r=e.attributes.instanceEnd,i=new Float32Array(2*n.count);for(let o=0,a=0,l=n.count;o<l;o++,a+=2)uZ.fromBufferAttribute(n,o),dZ.fromBufferAttribute(r,o),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+uZ.distanceTo(dZ);const s=new FA(i,2,1);return e.setAttribute("instanceDistanceStart",new il(s,1,0)),e.setAttribute("instanceDistanceEnd",new il(s,1,1)),this}raycast(e,n){const r=this.material.worldUnits,i=e.camera;i===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Au=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;$m=l.linewidth+s,vF=a.attributes.instanceStart,Zde=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),gE.copy(a.boundingSphere).applyMatrix4(o);let c;if(r)c=$m*.5;else{const d=Math.max(i.near,gE.distanceToPoint(Au.origin));c=hZ(i,d,l.resolution)}if(gE.radius+=c,Au.intersectsSphere(gE)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),mE.copy(a.boundingBox).applyMatrix4(o);let u;if(r)u=$m*.5;else{const d=Math.max(i.near,mE.distanceToPoint(Au.origin));u=hZ(i,d,l.resolution)}mE.expandByScalar(u),Au.intersectsBox(mE)!==!1&&(r?bat(this,n):wat(this,i,n))}}class Sat extends Jde{constructor(e=new Kde,n=new Q6({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}const pZ=R.forwardRef(function({points:e,color:n="black",vertexColors:r,linewidth:i,lineWidth:s,segments:o,dashed:a,...l},c){const u=hs(p=>p.size),d=R.useMemo(()=>o?new Jde:new Sat,[o]),[f]=R.useState(()=>new Q6),h=R.useMemo(()=>{const p=o?new J6:new Kde,v=e.map(g=>{const m=Array.isArray(g);return g instanceof me?[g.x,g.y,g.z]:g instanceof lt?[g.x,g.y,0]:m&&g.length===3?[g[0],g[1],g[2]]:m&&g.length===2?[g[0],g[1],0]:g});if(p.setPositions(v.flat()),r){const g=r.map(m=>m instanceof zt?m.toArray():m);p.setColors(g.flat())}return p},[e,o,r]);return R.useLayoutEffect(()=>{d.computeLineDistances()},[e,d]),R.useLayoutEffect(()=>{a?f.defines.USE_DASH="":delete f.defines.USE_DASH,f.needsUpdate=!0},[a,f]),R.useEffect(()=>()=>h.dispose(),[h]),R.createElement("primitive",he({object:d,ref:c},l),R.createElement("primitive",{object:h,attach:"geometry"}),R.createElement("primitive",he({object:f,attach:"material",color:n,vertexColors:!!r,resolution:[u.width,u.height],linewidth:i??s,dashed:a},l)))});function _at(){var t=Object.create(null);function e(i,s){var o=i.id,a=i.name,l=i.dependencies;l===void 0&&(l=[]);var c=i.init;c===void 0&&(c=function(){});var u=i.getTransferables;if(u===void 0&&(u=null),!t[o])try{l=l.map(function(f){return f&&f.isWorkerModule&&(e(f,function(h){if(h instanceof Error)throw h}),f=t[f.id].value),f}),c=r("<"+a+">.init",c),u&&(u=r("<"+a+">.getTransferables",u));var d=null;typeof c=="function"?d=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:d,getTransferables:u},s(d)}catch(f){f&&f.noLog||console.error(f),s(f)}}function n(i,s){var o,a=i.id,l=i.args;(!t[a]||typeof t[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=t[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(d){return s(d instanceof Error?d:new Error(""+d))}):u(c)}catch(d){s(d)}function u(d){try{var f=t[a].getTransferables&&t[a].getTransferables(d);(!f||!Array.isArray(f)||!f.length)&&(f=void 0),s(d,f)}catch(h){console.error(h),s(h)}}}function r(i,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&n(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function Cat(t){var e=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,r=t.init;n=Array.isArray(n)?n.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var i=Promise.all(n).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var Qde=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return Qde=function(){return t},t},Tat=0,Eat=0,FD=!1,kb=Object.create(null),Ib=Object.create(null),yF=Object.create(null);function S2(t){if((!t||typeof t.init!="function")&&!FD)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,r=t.getTransferables,i=t.workerId;if(!Qde())return Cat(t);i==null&&(i="#default");var s="workerModule"+ ++Tat,o=t.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(FD=!0,c=S2({workerId:i,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+pM(c)+`
)}`}),FD=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=mZ(i,"registerModule",l.workerModuleData);var d=function(){a=null,Ib[i].delete(d)};(Ib[i]||(Ib[i]=new Set)).add(d)}return a.then(function(f){var h=f.isCallable;if(h)return mZ(i,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:pM(n),getTransferables:r&&pM(r)},l}function Mat(t){Ib[t]&&Ib[t].forEach(function(e){e()}),kb[t]&&(kb[t].terminate(),delete kb[t])}function pM(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Aat(t){var e=kb[t];if(!e){var n=pM(_at);e=kb[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=yF[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete yF[s],o(i)}}return e}function mZ(t,e,n){return new Promise(function(r,i){var s=++Eat;yF[s]=function(o){o.success?r(o.result):i(new Error("Error in worker "+e+" call: "+o.error))},Aat(t).postMessage({messageId:s,action:e,data:n})})}function efe(){var t=function(e){function n(B,V,W,j,J,Q,te,re){var se=1-te;re.x=se*se*B+2*se*te*W+te*te*J,re.y=se*se*V+2*se*te*j+te*te*Q}function r(B,V,W,j,J,Q,te,re,se,fe){var ae=1-se;fe.x=ae*ae*ae*B+3*ae*ae*se*W+3*ae*se*se*J+se*se*se*te,fe.y=ae*ae*ae*V+3*ae*ae*se*j+3*ae*se*se*Q+se*se*se*re}function i(B,V){for(var W=/([MLQCZ])([^MLQCZ]*)/g,j,J,Q,te,re;j=W.exec(B);){var se=j[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(fe){return parseFloat(fe)});switch(j[1]){case"M":te=J=se[0],re=Q=se[1];break;case"L":(se[0]!==te||se[1]!==re)&&V("L",te,re,te=se[0],re=se[1]);break;case"Q":{V("Q",te,re,te=se[2],re=se[3],se[0],se[1]);break}case"C":{V("C",te,re,te=se[4],re=se[5],se[0],se[1],se[2],se[3]);break}case"Z":(te!==J||re!==Q)&&V("L",te,re,J,Q);break}}}function s(B,V,W){W===void 0&&(W=16);var j={x:0,y:0};i(B,function(J,Q,te,re,se,fe,ae,ye,le){switch(J){case"L":V(Q,te,re,se);break;case"Q":{for(var H=Q,Me=te,we=1;we<W;we++)n(Q,te,fe,ae,re,se,we/(W-1),j),V(H,Me,j.x,j.y),H=j.x,Me=j.y;break}case"C":{for(var Ee=Q,ge=te,qe=1;qe<W;qe++)r(Q,te,fe,ae,ye,le,re,se,qe/(W-1),j),V(Ee,ge,j.x,j.y),Ee=j.x,ge=j.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(B,V){var W=B.getContext?B.getContext("webgl",c):B,j=l.get(W);if(!j){let Ee=function(oe){var xe=Q[oe];if(!xe&&(xe=Q[oe]=W.getExtension(oe),!xe))throw new Error(oe+" not supported");return xe},ge=function(oe,xe){var Se=W.createShader(xe);return W.shaderSource(Se,oe),W.compileShader(Se),Se},qe=function(oe,xe,Se,be){if(!te[oe]){var Re={},Ke={},ze=W.createProgram();W.attachShader(ze,ge(xe,W.VERTEX_SHADER)),W.attachShader(ze,ge(Se,W.FRAGMENT_SHADER)),W.linkProgram(ze),te[oe]={program:ze,transaction:function(De){W.useProgram(ze),De({setUniform:function(gt,ct){for(var Ye=[],Xe=arguments.length-2;Xe-- >0;)Ye[Xe]=arguments[Xe+2];var Le=Ke[ct]||(Ke[ct]=W.getUniformLocation(ze,ct));W["uniform"+gt].apply(W,[Le].concat(Ye))},setAttribute:function(gt,ct,Ye,Xe,Le){var pe=Re[gt];pe||(pe=Re[gt]={buf:W.createBuffer(),loc:W.getAttribLocation(ze,gt),data:null}),W.bindBuffer(W.ARRAY_BUFFER,pe.buf),W.vertexAttribPointer(pe.loc,ct,W.FLOAT,!1,0,0),W.enableVertexAttribArray(pe.loc),J?W.vertexAttribDivisor(pe.loc,Xe):Ee("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(pe.loc,Xe),Le!==pe.data&&(W.bufferData(W.ARRAY_BUFFER,Le,Ye),pe.data=Le)}})}}}te[oe].transaction(be)},Ae=function(oe,xe){se++;try{W.activeTexture(W.TEXTURE0+se);var Se=re[oe];Se||(Se=re[oe]=W.createTexture(),W.bindTexture(W.TEXTURE_2D,Se),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.NEAREST),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.NEAREST)),W.bindTexture(W.TEXTURE_2D,Se),xe(Se,se)}finally{se--}},ee=function(oe,xe,Se){var be=W.createFramebuffer();fe.push(be),W.bindFramebuffer(W.FRAMEBUFFER,be),W.activeTexture(W.TEXTURE0+xe),W.bindTexture(W.TEXTURE_2D,oe),W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,oe,0);try{Se(be)}finally{W.deleteFramebuffer(be),W.bindFramebuffer(W.FRAMEBUFFER,fe[--fe.length-1]||null)}},Y=function(){Q={},te={},re={},se=-1,fe.length=0};var ae=Ee,ye=ge,le=qe,H=Ae,Me=ee,we=Y,J=typeof WebGL2RenderingContext<"u"&&W instanceof WebGL2RenderingContext,Q={},te={},re={},se=-1,fe=[];W.canvas.addEventListener("webglcontextlost",function(oe){Y(),oe.preventDefault()},!1),l.set(W,j={gl:W,isWebGL2:J,getExtension:Ee,withProgram:qe,withTexture:Ae,withTextureFramebuffer:ee,handleContextLoss:Y})}V(j)}function d(B,V,W,j,J,Q,te,re){te===void 0&&(te=15),re===void 0&&(re=null),u(B,function(se){var fe=se.gl,ae=se.withProgram,ye=se.withTexture;ye("copy",function(le,H){fe.texImage2D(fe.TEXTURE_2D,0,fe.RGBA,J,Q,0,fe.RGBA,fe.UNSIGNED_BYTE,V),ae("copy",o,a,function(Me){var we=Me.setUniform,Ee=Me.setAttribute;Ee("aUV",2,fe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),we("1i","image",H),fe.bindFramebuffer(fe.FRAMEBUFFER,re||null),fe.disable(fe.BLEND),fe.colorMask(te&8,te&4,te&2,te&1),fe.viewport(W,j,J,Q),fe.scissor(W,j,J,Q),fe.drawArrays(fe.TRIANGLES,0,3)})})})}function f(B,V,W){var j=B.width,J=B.height;u(B,function(Q){var te=Q.gl,re=new Uint8Array(j*J*4);te.readPixels(0,0,j,J,te.RGBA,te.UNSIGNED_BYTE,re),B.width=V,B.height=W,d(te,re,0,0,j,J)})}var h=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:d,resizeWebGLCanvasWithoutClearing:f});function p(B,V,W,j,J,Q){Q===void 0&&(Q=1);var te=new Uint8Array(B*V),re=j[2]-j[0],se=j[3]-j[1],fe=[];s(W,function(Ee,ge,qe,Ae){fe.push({x1:Ee,y1:ge,x2:qe,y2:Ae,minX:Math.min(Ee,qe),minY:Math.min(ge,Ae),maxX:Math.max(Ee,qe),maxY:Math.max(ge,Ae)})}),fe.sort(function(Ee,ge){return Ee.maxX-ge.maxX});for(var ae=0;ae<B;ae++)for(var ye=0;ye<V;ye++){var le=Me(j[0]+re*(ae+.5)/B,j[1]+se*(ye+.5)/V),H=Math.pow(1-Math.abs(le)/J,Q)/2;le<0&&(H=1-H),H=Math.max(0,Math.min(255,Math.round(H*255))),te[ye*B+ae]=H}return te;function Me(Ee,ge){for(var qe=1/0,Ae=1/0,ee=fe.length;ee--;){var Y=fe[ee];if(Y.maxX+Ae<=Ee)break;if(Ee+Ae>Y.minX&&ge-Ae<Y.maxY&&ge+Ae>Y.minY){var oe=m(Ee,ge,Y.x1,Y.y1,Y.x2,Y.y2);oe<qe&&(qe=oe,Ae=Math.sqrt(qe))}}return we(Ee,ge)&&(Ae=-Ae),Ae}function we(Ee,ge){for(var qe=0,Ae=fe.length;Ae--;){var ee=fe[Ae];if(ee.maxX<=Ee)break;var Y=ee.y1>ge!=ee.y2>ge&&Ee<(ee.x2-ee.x1)*(ge-ee.y1)/(ee.y2-ee.y1)+ee.x1;Y&&(qe+=ee.y1<ee.y2?1:-1)}return qe!==0}}function v(B,V,W,j,J,Q,te,re,se,fe){Q===void 0&&(Q=1),re===void 0&&(re=0),se===void 0&&(se=0),fe===void 0&&(fe=0),g(B,V,W,j,J,Q,te,null,re,se,fe)}function g(B,V,W,j,J,Q,te,re,se,fe,ae){Q===void 0&&(Q=1),se===void 0&&(se=0),fe===void 0&&(fe=0),ae===void 0&&(ae=0);for(var ye=p(B,V,W,j,J,Q),le=new Uint8Array(ye.length*4),H=0;H<ye.length;H++)le[H*4+ae]=ye[H];d(te,le,se,fe,B,V,1<<3-ae,re)}function m(B,V,W,j,J,Q){var te=J-W,re=Q-j,se=te*te+re*re,fe=se?Math.max(0,Math.min(1,((B-W)*te+(V-j)*re)/se)):0,ae=B-(W+fe*te),ye=V-(j+fe*re);return ae*ae+ye*ye}var y=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:v,generateIntoFramebuffer:g}),x="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",S="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",_="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",C=new Float32Array([0,0,2,0,0,2]),T=null,A=!1,M={},E=new WeakMap;function P(B){if(!A&&!O(B))throw new Error("WebGL generation not supported")}function N(B,V,W,j,J,Q,te){if(Q===void 0&&(Q=1),te===void 0&&(te=null),!te&&(te=T,!te)){var re=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!re)throw new Error("OffscreenCanvas or DOM canvas not supported");te=T=re.getContext("webgl",{depth:!1})}P(te);var se=new Uint8Array(B*V*4);u(te,function(le){var H=le.gl,Me=le.withTexture,we=le.withTextureFramebuffer;Me("readable",function(Ee,ge){H.texImage2D(H.TEXTURE_2D,0,H.RGBA,B,V,0,H.RGBA,H.UNSIGNED_BYTE,null),we(Ee,ge,function(qe){$(B,V,W,j,J,Q,H,qe,0,0,0),H.readPixels(0,0,B,V,H.RGBA,H.UNSIGNED_BYTE,se)})})});for(var fe=new Uint8Array(B*V),ae=0,ye=0;ae<se.length;ae+=4)fe[ye++]=se[ae];return fe}function F(B,V,W,j,J,Q,te,re,se,fe){Q===void 0&&(Q=1),re===void 0&&(re=0),se===void 0&&(se=0),fe===void 0&&(fe=0),$(B,V,W,j,J,Q,te,null,re,se,fe)}function $(B,V,W,j,J,Q,te,re,se,fe,ae){Q===void 0&&(Q=1),se===void 0&&(se=0),fe===void 0&&(fe=0),ae===void 0&&(ae=0),P(te);var ye=[];s(W,function(le,H,Me,we){ye.push(le,H,Me,we)}),ye=new Float32Array(ye),u(te,function(le){var H=le.gl,Me=le.isWebGL2,we=le.getExtension,Ee=le.withProgram,ge=le.withTexture,qe=le.withTextureFramebuffer,Ae=le.handleContextLoss;if(ge("rawDistances",function(ee,Y){(B!==ee._lastWidth||V!==ee._lastHeight)&&H.texImage2D(H.TEXTURE_2D,0,H.RGBA,ee._lastWidth=B,ee._lastHeight=V,0,H.RGBA,H.UNSIGNED_BYTE,null),Ee("main",x,S,function(oe){var xe=oe.setAttribute,Se=oe.setUniform,be=!Me&&we("ANGLE_instanced_arrays"),Re=!Me&&we("EXT_blend_minmax");xe("aUV",2,H.STATIC_DRAW,0,C),xe("aLineSegment",4,H.DYNAMIC_DRAW,1,ye),Se.apply(void 0,["4f","uGlyphBounds"].concat(j)),Se("1f","uMaxDistance",J),Se("1f","uExponent",Q),qe(ee,Y,function(Ke){H.enable(H.BLEND),H.colorMask(!0,!0,!0,!0),H.viewport(0,0,B,V),H.scissor(0,0,B,V),H.blendFunc(H.ONE,H.ONE),H.blendEquationSeparate(H.FUNC_ADD,Me?H.MAX:Re.MAX_EXT),H.clear(H.COLOR_BUFFER_BIT),Me?H.drawArraysInstanced(H.TRIANGLES,0,3,ye.length/4):be.drawArraysInstancedANGLE(H.TRIANGLES,0,3,ye.length/4)})}),Ee("post",o,_,function(oe){oe.setAttribute("aUV",2,H.STATIC_DRAW,0,C),oe.setUniform("1i","tex",Y),H.bindFramebuffer(H.FRAMEBUFFER,re),H.disable(H.BLEND),H.colorMask(ae===0,ae===1,ae===2,ae===3),H.viewport(se,fe,B,V),H.scissor(se,fe,B,V),H.drawArrays(H.TRIANGLES,0,3)})}),H.isContextLost())throw Ae(),new Error("webgl context lost")})}function O(B){var V=!B||B===T?M:B.canvas||B,W=E.get(V);if(W===void 0){A=!0;var j=null;try{var J=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],Q=N(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,B);W=Q&&J.length===Q.length&&Q.every(function(te,re){return te===J[re]}),W||(j="bad trial run results",console.info(J,Q))}catch(te){W=!1,j=te.message}j&&console.warn("WebGL SDF generation not supported:",j),A=!1,E.set(V,W)}return W}var z=Object.freeze({__proto__:null,generate:N,generateIntoCanvas:F,generateIntoFramebuffer:$,isSupported:O});function X(B,V,W,j,J,Q){J===void 0&&(J=Math.max(j[2]-j[0],j[3]-j[1])/2),Q===void 0&&(Q=1);try{return N.apply(z,arguments)}catch(te){return console.info("WebGL SDF generation failed, falling back to JS",te),p.apply(y,arguments)}}function D(B,V,W,j,J,Q,te,re,se,fe){J===void 0&&(J=Math.max(j[2]-j[0],j[3]-j[1])/2),Q===void 0&&(Q=1),re===void 0&&(re=0),se===void 0&&(se=0),fe===void 0&&(fe=0);try{return F.apply(z,arguments)}catch(ae){return console.info("WebGL SDF generation failed, falling back to JS",ae),v.apply(y,arguments)}}return e.forEachPathCommand=i,e.generate=X,e.generateIntoCanvas=D,e.javascript=y,e.pathToLineSegments=s,e.webgl=z,e.webglUtils=h,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function kat(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(n).forEach(function(Ae,ee){r[Ae]=1<<ee+1,i[r[Ae]]=Ae}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,c=r.S|r.WS|r.B|s|r.PDI|l,u=null;function d(){if(!u){u=new Map;var Ae=function(Y){if(n.hasOwnProperty(Y)){var oe=0;n[Y].split(",").forEach(function(xe){var Se=xe.split("+"),be=Se[0],Re=Se[1];be=parseInt(be,36),Re=Re?parseInt(Re,36):0,u.set(oe+=be,r[Y]);for(var Ke=0;Ke<Re;Ke++)u.set(++oe,r[Y])})}};for(var ee in n)Ae(ee)}}function f(Ae){return d(),u.get(Ae.codePointAt(0))||r.L}function h(Ae){return i[f(Ae)]}var p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function v(Ae,ee){var Y=36,oe=0,xe=new Map,Se=ee&&new Map,be;return Ae.split(",").forEach(function Re(Ke){if(Ke.indexOf("+")!==-1)for(var ze=+Ke;ze--;)Re(be);else{be=Ke;var Ne=Ke.split(">"),De=Ne[0],Ve=Ne[1];De=String.fromCodePoint(oe+=parseInt(De,Y)),Ve=String.fromCodePoint(oe+=parseInt(Ve,Y)),xe.set(De,Ve),ee&&Se.set(Ve,De)}}),{map:xe,reverseMap:Se}}var g,m,y;function x(){if(!g){var Ae=v(p.pairs,!0),ee=Ae.map,Y=Ae.reverseMap;g=ee,m=Y,y=v(p.canonical,!1).map}}function S(Ae){return x(),g.get(Ae)||null}function _(Ae){return x(),m.get(Ae)||null}function C(Ae){return x(),y.get(Ae)||null}var T=r.L,A=r.R,M=r.EN,E=r.ES,P=r.ET,N=r.AN,F=r.CS,$=r.B,O=r.S,z=r.ON,X=r.BN,D=r.NSM,B=r.AL,V=r.LRO,W=r.RLO,j=r.LRE,J=r.RLE,Q=r.PDF,te=r.LRI,re=r.RLI,se=r.FSI,fe=r.PDI;function ae(Ae,ee){for(var Y=125,oe=new Uint32Array(Ae.length),xe=0;xe<Ae.length;xe++)oe[xe]=f(Ae[xe]);var Se=new Map;function be(Ts,Uo){var Oi=oe[Ts];oe[Ts]=Uo,Se.set(Oi,Se.get(Oi)-1),Oi&a&&Se.set(a,Se.get(a)-1),Se.set(Uo,(Se.get(Uo)||0)+1),Uo&a&&Se.set(a,(Se.get(a)||0)+1)}for(var Re=new Uint8Array(Ae.length),Ke=new Map,ze=[],Ne=null,De=0;De<Ae.length;De++)Ne||ze.push(Ne={start:De,end:Ae.length-1,level:ee==="rtl"?1:ee==="ltr"?0:Zg(De,!1)}),oe[De]&$&&(Ne.end=De,Ne=null);for(var Ve=J|j|W|V|s|fe|Q|$,gt=function(Ts){return Ts+(Ts&1?1:2)},ct=function(Ts){return Ts+(Ts&1?2:1)},Ye=0;Ye<ze.length;Ye++){Ne=ze[Ye];var Xe=[{_level:Ne.level,_override:0,_isolate:0}],Le=void 0,pe=0,He=0,ot=0;Se.clear();for(var et=Ne.start;et<=Ne.end;et++){var Ie=oe[et];if(Le=Xe[Xe.length-1],Se.set(Ie,(Se.get(Ie)||0)+1),Ie&a&&Se.set(a,(Se.get(a)||0)+1),Ie&Ve)if(Ie&(J|j)){Re[et]=Le._level;var Ce=(Ie===J?ct:gt)(Le._level);Ce<=Y&&!pe&&!He?Xe.push({_level:Ce,_override:0,_isolate:0}):pe||He++}else if(Ie&(W|V)){Re[et]=Le._level;var ut=(Ie===W?ct:gt)(Le._level);ut<=Y&&!pe&&!He?Xe.push({_level:ut,_override:Ie&W?A:T,_isolate:0}):pe||He++}else if(Ie&s){Ie&se&&(Ie=Zg(et+1,!0)===1?re:te),Re[et]=Le._level,Le._override&&be(et,Le._override);var dt=(Ie===re?ct:gt)(Le._level);dt<=Y&&pe===0&&He===0?(ot++,Xe.push({_level:dt,_override:0,_isolate:1,_isolInitIndex:et})):pe++}else if(Ie&fe){if(pe>0)pe--;else if(ot>0){for(He=0;!Xe[Xe.length-1]._isolate;)Xe.pop();var yt=Xe[Xe.length-1]._isolInitIndex;yt!=null&&(Ke.set(yt,et),Ke.set(et,yt)),Xe.pop(),ot--}Le=Xe[Xe.length-1],Re[et]=Le._level,Le._override&&be(et,Le._override)}else Ie&Q?(pe===0&&(He>0?He--:!Le._isolate&&Xe.length>1&&(Xe.pop(),Le=Xe[Xe.length-1])),Re[et]=Le._level):Ie&$&&(Re[et]=Ne.level);else Re[et]=Le._level,Le._override&&Ie!==X&&be(et,Le._override)}for(var vt=[],Vt=null,It=Ne.start;It<=Ne.end;It++){var en=oe[It];if(!(en&l)){var Dt=Re[It],mt=en&s,jt=en===fe;Vt&&Dt===Vt._level?(Vt._end=It,Vt._endsWithIsolInit=mt):vt.push(Vt={_start:It,_end:It,_level:Dt,_startsWithPDI:jt,_endsWithIsolInit:mt})}}for(var mn=[],fn=0;fn<vt.length;fn++){var _t=vt[fn];if(!_t._startsWithPDI||_t._startsWithPDI&&!Ke.has(_t._start)){for(var Lt=[Vt=_t],Pt=void 0;Vt&&Vt._endsWithIsolInit&&(Pt=Ke.get(Vt._end))!=null;)for(var bt=fn+1;bt<vt.length;bt++)if(vt[bt]._start===Pt){Lt.push(Vt=vt[bt]);break}for(var Wt=[],Cn=0;Cn<Lt.length;Cn++)for(var Z=Lt[Cn],K=Z._start;K<=Z._end;K++)Wt.push(K);for(var ne=Re[Wt[0]],G=Ne.level,ie=Wt[0]-1;ie>=0;ie--)if(!(oe[ie]&l)){G=Re[ie];break}var ce=Wt[Wt.length-1],Te=Re[ce],de=Ne.level;if(!(oe[ce]&s)){for(var Be=ce+1;Be<=Ne.end;Be++)if(!(oe[Be]&l)){de=Re[Be];break}}mn.push({_seqIndices:Wt,_sosType:Math.max(G,ne)%2?A:T,_eosType:Math.max(de,Te)%2?A:T})}}for(var Je=0;Je<mn.length;Je++){var nt=mn[Je],$e=nt._seqIndices,Ct=nt._sosType,ht=nt._eosType,ft=Re[$e[0]]&1?A:T;if(Se.get(D))for(var Ot=0;Ot<$e.length;Ot++){var Qt=$e[Ot];if(oe[Qt]&D){for(var nn=Ct,vn=Ot-1;vn>=0;vn--)if(!(oe[$e[vn]]&l)){nn=oe[$e[vn]];break}be(Qt,nn&(s|fe)?z:nn)}}if(Se.get(M))for(var Nt=0;Nt<$e.length;Nt++){var Mt=$e[Nt];if(oe[Mt]&M)for(var En=Nt-1;En>=-1;En--){var tn=En===-1?Ct:oe[$e[En]];if(tn&o){tn===B&&be(Mt,N);break}}}if(Se.get(B))for(var cn=0;cn<$e.length;cn++){var lr=$e[cn];oe[lr]&B&&be(lr,A)}if(Se.get(E)||Se.get(F))for(var Vn=1;Vn<$e.length-1;Vn++){var Zn=$e[Vn];if(oe[Zn]&(E|F)){for(var Tn=0,hn=0,er=Vn-1;er>=0&&(Tn=oe[$e[er]],!!(Tn&l));er--);for(var rn=Vn+1;rn<$e.length&&(hn=oe[$e[rn]],!!(hn&l));rn++);Tn===hn&&(oe[Zn]===E?Tn===M:Tn&(M|N))&&be(Zn,Tn)}}if(Se.get(M))for(var an=0;an<$e.length;an++){var Nr=$e[an];if(oe[Nr]&M){for(var Vs=an-1;Vs>=0&&oe[$e[Vs]]&(P|l);Vs--)be($e[Vs],M);for(an++;an<$e.length&&oe[$e[an]]&(P|l|M);an++)oe[$e[an]]!==M&&be($e[an],M)}}if(Se.get(P)||Se.get(E)||Se.get(F))for(var Li=0;Li<$e.length;Li++){var Fa=$e[Li];if(oe[Fa]&(P|E|F)){be(Fa,z);for(var dd=Li-1;dd>=0&&oe[$e[dd]]&l;dd--)be($e[dd],z);for(var fd=Li+1;fd<$e.length&&oe[$e[fd]]&l;fd++)be($e[fd],z)}}if(Se.get(M))for(var hd=0,fp=Ct;hd<$e.length;hd++){var X_=$e[hd],Ax=oe[X_];Ax&M?fp===T&&be(X_,T):Ax&o&&(fp=Ax)}if(Se.get(a)){var pd=A|M|N,qg=pd|T,iu=[];{for(var bf=[],su=0;su<$e.length;su++)if(oe[$e[su]]&a){var Jn=Ae[$e[su]],kx=void 0;if(S(Jn)!==null)if(bf.length<63)bf.push({char:Jn,seqIndex:su});else break;else if((kx=_(Jn))!==null)for(var md=bf.length-1;md>=0;md--){var Yg=bf[md].char;if(Yg===kx||Yg===_(C(Jn))||S(C(Yg))===Jn){iu.push([bf[md].seqIndex,su]),bf.length=md;break}}}iu.sort(function(Ts,Uo){return Ts[0]-Uo[0]})}for(var Ix=0;Ix<iu.length;Ix++){for(var q_=iu[Ix],hi=q_[0],hp=q_[1],Y_=!1,Oo=0,Rx=hi+1;Rx<hp;Rx++){var pp=$e[Rx];if(oe[pp]&qg){Y_=!0;var Ba=oe[pp]&pd?A:T;if(Ba===ft){Oo=Ba;break}}}if(Y_&&!Oo){Oo=Ct;for(var Px=hi-1;Px>=0;Px--){var K_=$e[Px];if(oe[K_]&qg){var Ua=oe[K_]&pd?A:T;Ua!==ft?Oo=Ua:Oo=ft;break}}}if(Oo){if(oe[$e[hi]]=oe[$e[hp]]=Oo,Oo!==ft){for(var Fo=hi+1;Fo<$e.length;Fo++)if(!(oe[$e[Fo]]&l)){f(Ae[$e[Fo]])&D&&(oe[$e[Fo]]=Oo);break}}if(Oo!==ft){for(var ou=hp+1;ou<$e.length;ou++)if(!(oe[$e[ou]]&l)){f(Ae[$e[ou]])&D&&(oe[$e[ou]]=Oo);break}}}}for(var xl=0;xl<$e.length;xl++)if(oe[$e[xl]]&a){for(var Nx=xl,$x=xl,la=Ct,mp=xl-1;mp>=0;mp--)if(oe[$e[mp]]&l)Nx=mp;else{la=oe[$e[mp]]&pd?A:T;break}for(var gp=ht,vp=xl+1;vp<$e.length;vp++)if(oe[$e[vp]]&(a|l))$x=vp;else{gp=oe[$e[vp]]&pd?A:T;break}for(var Bo=Nx;Bo<=$x;Bo++)oe[$e[Bo]]=la===gp?la:ft;xl=$x}}}for(var Cs=Ne.start;Cs<=Ne.end;Cs++){var Kg=Re[Cs],pc=oe[Cs];if(Kg&1?pc&(T|M|N)&&Re[Cs]++:pc&A?Re[Cs]++:pc&(N|M)&&(Re[Cs]+=2),pc&l&&(Re[Cs]=Cs===0?Ne.level:Re[Cs-1]),Cs===Ne.end||f(Ae[Cs])&(O|$))for(var wf=Cs;wf>=0&&f(Ae[wf])&c;wf--)Re[wf]=Ne.level}}return{levels:Re,paragraphs:ze};function Zg(Ts,Uo){for(var Oi=Ts;Oi<Ae.length;Oi++){var Fi=oe[Oi];if(Fi&(A|B))return 1;if(Fi&($|T)||Uo&&Fi===fe)return 0;if(Fi&s){var za=Z_(Oi);Oi=za===-1?Ae.length:za}}return 0}function Z_(Ts){for(var Uo=1,Oi=Ts+1;Oi<Ae.length;Oi++){var Fi=oe[Oi];if(Fi&$)break;if(Fi&fe){if(--Uo===0)return Oi}else Fi&s&&Uo++}return-1}}var ye="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",le;function H(){if(!le){var Ae=v(ye,!0),ee=Ae.map,Y=Ae.reverseMap;Y.forEach(function(oe,xe){ee.set(xe,oe)}),le=ee}}function Me(Ae){return H(),le.get(Ae)||null}function we(Ae,ee,Y,oe){var xe=Ae.length;Y=Math.max(0,Y==null?0:+Y),oe=Math.min(xe-1,oe==null?xe-1:+oe);for(var Se=new Map,be=Y;be<=oe;be++)if(ee[be]&1){var Re=Me(Ae[be]);Re!==null&&Se.set(be,Re)}return Se}function Ee(Ae,ee,Y,oe){var xe=Ae.length;Y=Math.max(0,Y==null?0:+Y),oe=Math.min(xe-1,oe==null?xe-1:+oe);var Se=[];return ee.paragraphs.forEach(function(be){var Re=Math.max(Y,be.start),Ke=Math.min(oe,be.end);if(Re<Ke){for(var ze=ee.levels.slice(Re,Ke+1),Ne=Ke;Ne>=Re&&f(Ae[Ne])&c;Ne--)ze[Ne]=be.level;for(var De=be.level,Ve=1/0,gt=0;gt<ze.length;gt++){var ct=ze[gt];ct>De&&(De=ct),ct<Ve&&(Ve=ct|1)}for(var Ye=De;Ye>=Ve;Ye--)for(var Xe=0;Xe<ze.length;Xe++)if(ze[Xe]>=Ye){for(var Le=Xe;Xe+1<ze.length&&ze[Xe+1]>=Ye;)Xe++;Xe>Le&&Se.push([Le+Re,Xe+Re])}}}),Se}function ge(Ae,ee,Y,oe){var xe=qe(Ae,ee,Y,oe),Se=[].concat(Ae);return xe.forEach(function(be,Re){Se[Re]=(ee.levels[be]&1?Me(Ae[be]):null)||Ae[be]}),Se.join("")}function qe(Ae,ee,Y,oe){for(var xe=Ee(Ae,ee,Y,oe),Se=[],be=0;be<Ae.length;be++)Se[be]=be;return xe.forEach(function(Re){for(var Ke=Re[0],ze=Re[1],Ne=Se.slice(Ke,ze+1),De=Ne.length;De--;)Se[ze-De]=Ne[De]}),Se}return e.closingToOpeningBracket=_,e.getBidiCharType=f,e.getBidiCharTypeName=h,e.getCanonicalBracket=C,e.getEmbeddingLevels=ae,e.getMirroredCharacter=Me,e.getMirroredCharactersMap=we,e.getReorderSegments=Ee,e.getReorderedIndices=qe,e.getReorderedString=ge,e.openingToClosingBracket=S,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const tfe=/\bvoid\s+main\s*\(\s*\)\s*{/g;function xF(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(r,i){let s=Dn[i];return s?xF(s):r}return t.replace(e,n)}const js=[];for(let t=0;t<256;t++)js[t]=(t<16?"0":"")+t.toString(16);function Iat(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(js[t&255]+js[t>>8&255]+js[t>>16&255]+js[t>>24&255]+"-"+js[e&255]+js[e>>8&255]+"-"+js[e>>16&15|64]+js[e>>24&255]+"-"+js[n&63|128]+js[n>>8&255]+"-"+js[n>>16&255]+js[n>>24&255]+js[r&255]+js[r>>8&255]+js[r>>16&255]+js[r>>24&255]).toUpperCase()}const Fp=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let r=arguments[e];if(r)for(let i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Rat=Date.now(),gZ=new WeakMap,vZ=new Map;let Pat=1e10;function bF(t,e){const n=Lat(e);let r=gZ.get(t);if(r||gZ.set(t,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,s=function(c,u){t.onBeforeCompile.call(this,c,u);const d=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let f=vZ[d];if(!f){const h=Nat(this,c,e,n);f=vZ[d]=h}c.vertexShader=f.vertexShader,c.fragmentShader=f.fragmentShader,Fp(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-Rat}}),this[i]&&this[i](c)},o=function(){return a(e.chained?t:t.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:t}),Object.defineProperty(u,"id",{value:Pat++}),u.uuid=Iat(),u.uniforms=Fp({},c.uniforms,e.uniforms),u.defines=Fp({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",u.extensions=Fp({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return s},set(c){this[i]=c}},copy:{writable:!0,configurable:!0,value:function(c){return t.copy.call(this,c),!t.isShaderMaterial&&!t.isDerivedMaterial&&(Fp(this.extensions,c.extensions),Fp(this.defines,c.defines),Fp(this.uniforms,Zw.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new t.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=bF(t.isDerivedMaterial?t.getDepthMaterial():new SR({depthPacking:p6}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=bF(t.isDerivedMaterial?t.getDistanceMaterial():new _R,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),t.dispose.call(this)}}};return r[n]=o,new o}function Nat(t,{vertexShader:e,fragmentShader:n},r,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:d,fragmentColorTransform:f,customRewriter:h,timeUniform:p}=r;if(s=s||"",o=o||"",a=a||"",c=c||"",u=u||"",d=d||"",(l||h)&&(e=xF(e)),(f||h)&&(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),n=xF(n)),h){let v=h({vertexShader:e,fragmentShader:n});e=v.vertexShader,n=v.fragmentShader}if(f){let v=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,g=>(v.push(g),"")),d=`${f}
${v.join(`
`)}
${d}`}if(p){const v=`
uniform float ${p};
`;s=v+s,c=v+c}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(v,g,m,y)=>/\battribute\s+vec[23]\s+$/.test(y.substr(0,m))?g:`troika_${g}_${i}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=yZ(e,i,s,o,a),n=yZ(n,i,c,u,d),{vertexShader:e,fragmentShader:n}}function yZ(t,e,n,r,i){return(r||i||n)&&(t=t.replace(tfe,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),t}function $at(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let Dat=0;const xZ=new Map;function Lat(t){const e=JSON.stringify(t,$at);let n=xZ.get(e);return n==null&&xZ.set(e,n=++Dat),n}function Oat(t,e,n){const{defaultFontURL:r}=n,i=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function c(y,x){function S(){const _=C=>{console.error(`Failure loading font ${y}${y===r?"":"; trying fallback"}`,C),y!==r&&(y=r,S())};try{const C=new XMLHttpRequest;C.open("get",y,!0),C.responseType="arraybuffer",C.onload=function(){if(C.status>=400)_(new Error(C.statusText));else if(C.status>0)try{const T=t(C.response);x(T)}catch(T){_(T)}},C.onerror=_,C.send()}catch(C){_(C)}}S()}function u(y,x){y||(y=r);let S=i[y];S?S.pending?S.pending.push(x):x(S):(i[y]={pending:[x]},c(y,_=>{let C=i[y].pending;i[y]=_,C.forEach(T=>T(_))}))}function d({text:y="",font:x=r,sdfGlyphSize:S=64,fontSize:_=1,letterSpacing:C=0,lineHeight:T="normal",maxWidth:A=s,direction:M,textAlign:E="left",textIndent:P=0,whiteSpace:N="normal",overflowWrap:F="normal",anchorX:$=0,anchorY:O=0,includeCaretPositions:z=!1,chunkedBoundsSize:X=8192,colorRanges:D=null},B,V=!1){const W=v(),j={fontLoad:0,typesetting:0};y.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),y=y.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),_=+_,C=+C,A=+A,T=T||"normal",P=+P,u(x,J=>{const Q=isFinite(A);let te=null,re=null,se=null,fe=null,ae=null,ye=null,le=null,H=0,Me=0,we=N!=="nowrap";const{ascender:Ee,descender:ge,unitsPerEm:qe,lineGap:Ae,capHeight:ee,xHeight:Y}=J;j.fontLoad=v()-W;const oe=v(),xe=_/qe;T==="normal"&&(T=(Ee-ge+Ae)/qe),T=T*_;const Se=(T-(Ee-ge)*xe)/2,be=-(Ee*xe+Se),Re=Math.min(T,(Ee-ge)*xe),Ke=(Ee+ge)/2*xe-Re/2;let ze=P,Ne=new g;const De=[Ne];J.forEachGlyph(y,_,C,(ct,Ye,Xe)=>{const Le=y.charAt(Xe),pe=ct.advanceWidth*xe,He=Ne.count;let ot;if("isEmpty"in ct||(ct.isWhitespace=!!Le&&new RegExp(a).test(Le),ct.canBreakAfter=!!Le&&l.test(Le),ct.isEmpty=ct.xMin===ct.xMax||ct.yMin===ct.yMax||o.test(Le)),!ct.isWhitespace&&!ct.isEmpty&&Me++,we&&Q&&!ct.isWhitespace&&Ye+pe+ze>A&&He){if(Ne.glyphAt(He-1).glyphObj.canBreakAfter)ot=new g,ze=-Ye;else for(let Ie=He;Ie--;)if(Ie===0&&F==="break-word"){ot=new g,ze=-Ye;break}else if(Ne.glyphAt(Ie).glyphObj.canBreakAfter){ot=Ne.splitAt(Ie+1);const Ce=ot.glyphAt(0).x;ze-=Ce;for(let ut=ot.count;ut--;)ot.glyphAt(ut).x-=Ce;break}ot&&(Ne.isSoftWrapped=!0,Ne=ot,De.push(Ne),H=A)}let et=Ne.glyphAt(Ne.count);et.glyphObj=ct,et.x=Ye+ze,et.width=pe,et.charIndex=Xe,Le===`
`&&(Ne=new g,De.push(Ne),ze=-(Ye+pe+C*_)+P)}),De.forEach(ct=>{for(let Ye=ct.count;Ye--;){let{glyphObj:Xe,x:Le,width:pe}=ct.glyphAt(Ye);if(!Xe.isWhitespace){ct.width=Le+pe,ct.width>H&&(H=ct.width);return}}});let Ve=0,gt=0;if($&&(typeof $=="number"?Ve=-$:typeof $=="string"&&(Ve=-H*($==="left"?0:$==="center"?.5:$==="right"?1:h($)))),O){if(typeof O=="number")gt=-O;else if(typeof O=="string"){let ct=De.length*T;gt=O==="top"?0:O==="top-baseline"?-be:O==="top-cap"?-be-ee*xe:O==="top-ex"?-be-Y*xe:O==="middle"?ct/2:O==="bottom"?ct:O==="bottom-baseline"?ct-Se+ge*xe:h(O)*ct}}if(!V){const ct=e.getEmbeddingLevels(y,M);te=new Uint16Array(Me),re=new Float32Array(Me*2),se={},ye=[s,s,-s,-s],le=[];let Ye=be;z&&(ae=new Float32Array(y.length*3)),D&&(fe=new Uint8Array(Me*3));let Xe=0,Le=-1,pe=-1,He,ot;if(De.forEach((et,Ie)=>{let{count:Ce,width:ut}=et;if(Ce>0){let dt=0;for(let Dt=Ce;Dt--&&et.glyphAt(Dt).glyphObj.isWhitespace;)dt++;let yt=0,vt=0;if(E==="center")yt=(H-ut)/2;else if(E==="right")yt=H-ut;else if(E==="justify"&&et.isSoftWrapped){let Dt=0;for(let mt=Ce-dt;mt--;)et.glyphAt(mt).glyphObj.isWhitespace&&Dt++;vt=(H-ut)/Dt}if(vt||yt){let Dt=0;for(let mt=0;mt<Ce;mt++){let jt=et.glyphAt(mt);const mn=jt.glyphObj;jt.x+=yt+Dt,vt!==0&&mn.isWhitespace&&mt<Ce-dt&&(Dt+=vt,jt.width+=vt)}}const Vt=e.getReorderSegments(y,ct,et.glyphAt(0).charIndex,et.glyphAt(et.count-1).charIndex);for(let Dt=0;Dt<Vt.length;Dt++){const[mt,jt]=Vt[Dt];let mn=1/0,fn=-1/0;for(let _t=0;_t<Ce;_t++)if(et.glyphAt(_t).charIndex>=mt){let Lt=_t,Pt=_t;for(;Pt<Ce;Pt++){let bt=et.glyphAt(Pt);if(bt.charIndex>jt)break;Pt<Ce-dt&&(mn=Math.min(mn,bt.x),fn=Math.max(fn,bt.x+bt.width))}for(let bt=Lt;bt<Pt;bt++){const Wt=et.glyphAt(bt);Wt.x=fn-(Wt.x+Wt.width-mn)}break}}let It;const en=Dt=>It=Dt;for(let Dt=0;Dt<Ce;Dt++){let mt=et.glyphAt(Dt);It=mt.glyphObj;const jt=It.index,mn=ct.levels[mt.charIndex]&1;if(mn){const fn=e.getMirroredCharacter(y[mt.charIndex]);fn&&J.forEachGlyph(fn,0,0,en)}if(z){const{charIndex:fn}=mt,_t=mt.x+Ve,Lt=mt.x+mt.width+Ve;ae[fn*3]=mn?Lt:_t,ae[fn*3+1]=mn?_t:Lt,ae[fn*3+2]=Ye+Ke+gt;const Pt=fn-Le;Pt>1&&p(ae,Le,Pt),Le=fn}if(D){const{charIndex:fn}=mt;for(;fn>pe;)pe++,D.hasOwnProperty(pe)&&(ot=D[pe])}if(!It.isWhitespace&&!It.isEmpty){const fn=Xe++;se[jt]||(se[jt]={path:It.path,pathBounds:[It.xMin,It.yMin,It.xMax,It.yMax]});const _t=mt.x+Ve,Lt=Ye+gt;re[fn*2]=_t,re[fn*2+1]=Lt;const Pt=_t+It.xMin*xe,bt=Lt+It.yMin*xe,Wt=_t+It.xMax*xe,Cn=Lt+It.yMax*xe;Pt<ye[0]&&(ye[0]=Pt),bt<ye[1]&&(ye[1]=bt),Wt>ye[2]&&(ye[2]=Wt),Cn>ye[3]&&(ye[3]=Cn),fn%X===0&&(He={start:fn,end:fn,rect:[s,s,-s,-s]},le.push(He)),He.end++;const Z=He.rect;if(Pt<Z[0]&&(Z[0]=Pt),bt<Z[1]&&(Z[1]=bt),Wt>Z[2]&&(Z[2]=Wt),Cn>Z[3]&&(Z[3]=Cn),te[fn]=jt,D){const K=fn*3;fe[K]=ot>>16&255,fe[K+1]=ot>>8&255,fe[K+2]=ot&255}}}}Ye-=T}),ae){const et=y.length-Le;et>1&&p(ae,Le,et)}}j.typesetting=v()-oe,B({glyphIds:te,glyphPositions:re,glyphData:se,caretPositions:ae,caretHeight:Re,glyphColors:fe,chunkedBounds:le,fontSize:_,unitsPerEm:qe,ascender:Ee*xe,descender:ge*xe,capHeight:ee*xe,xHeight:Y*xe,lineHeight:T,topBaseline:be,blockBounds:[Ve,gt-De.length*T,Ve+H,gt],visibleBounds:ye,timings:j})})}function f(y,x){d(y,S=>{const[_,C,T,A]=S.blockBounds;x({width:T-_,height:A-C})},{metricsOnly:!0})}function h(y){let x=y.match(/^([\d.]+)%$/),S=x?parseFloat(x[1]):NaN;return isNaN(S)?0:S/100}function p(y,x,S){const _=y[x*3],C=y[x*3+1],T=y[x*3+2],A=(C-_)/S;for(let M=0;M<S;M++){const E=(x+M)*3;y[E]=_+A*M,y[E+1]=_+A*(M+1),y[E+2]=T}}function v(){return(self.performance||Date).now()}function g(){this.data=[]}const m=["glyphObj","x","width","charIndex"];return g.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/m.length)},glyphAt(y){let x=g.flyweight;return x.data=this.data,x.index=y,x},splitAt(y){let x=new g;return x.data=this.data.splice(y*m.length),x}},g.flyweight=m.reduce((y,x,S,_)=>(Object.defineProperty(y,x,{get(){return this.data[this.index*m.length+S]},set(C){this.data[this.index*m.length+S]=C}}),y),{data:null,index:0}),{typeset:d,measure:f,loadFont:u}}const Dm=()=>(self.performance||Date).now(),HR=efe();let bZ;function Fat(t,e,n,r,i,s,o,a,l,c,u=!0){return u?Uat(t,e,n,r,i,s,o,a,l,c).then(null,d=>(bZ||(console.warn("WebGL SDF generation failed, falling back to JS",d),bZ=!0),SZ(t,e,n,r,i,s,o,a,l,c))):SZ(t,e,n,r,i,s,o,a,l,c)}const mM=[],Bat=5;let wF=0;function nfe(){const t=Dm();for(;mM.length&&Dm()-t<Bat;)mM.shift()();wF=mM.length?setTimeout(nfe,0):0}const Uat=(...t)=>new Promise((e,n)=>{mM.push(()=>{const r=Dm();try{HR.webgl.generateIntoCanvas(...t),e({timing:Dm()-r})}catch(i){n(i)}}),wF||(wF=setTimeout(nfe,0))}),zat=4,Vat=2e3,wZ={};let Wat=0;function SZ(t,e,n,r,i,s,o,a,l,c){const u="TroikaTextSDFGenerator_JS_"+Wat++%zat;let d=wZ[u];return d||(d=wZ[u]={workerModule:S2({name:u,workerId:u,dependencies:[efe,Dm],init(f,h){const p=f().javascript.generate;return function(...v){const g=h();return{textureData:p(...v),timing:h()-g}}},getTransferables(f){return[f.textureData.buffer]}}),requests:0,idleTimer:null}),d.requests++,clearTimeout(d.idleTimer),d.workerModule(t,e,n,r,i,s).then(({textureData:f,timing:h})=>{const p=Dm(),v=new Uint8Array(f.length*4);for(let g=0;g<f.length;g++)v[g*4+c]=f[g];return HR.webglUtils.renderImageData(o,v,a,l,t,e,1<<3-c),h+=Dm()-p,--d.requests===0&&(d.idleTimer=setTimeout(()=>{Mat(u)},Vat)),{timing:h}})}function Gat(t){t._warm||(HR.webgl.isSupported(t),t._warm=!0)}const Hat=HR.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function jat(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var d=s.readUint(o,a);a+=4,c.push(e._readFont(o,d))}return c}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],u={_data:i,_offset:a},d={},f=0;f<l;f++){var h=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var p=o.readUint(i,s);s+=4;var v=o.readUint(i,s);s+=4,d[h]={offset:p,length:v}}for(f=0;f<c.length;f++){var g=c[f];d[g]&&(u[g.trim()]=e[g.trim()].parse(i,d[g].offset,d[g].length,u))}return u},_tabOffset:function(i,s,o){for(var a=e._bin,l=a.readUshort(i,o+4),c=o+12,u=0;u<l;u++){var d=a.readASCII(i,c,4);c+=4,a.readUint(i,c),c+=4;var f=a.readUint(i,c);if(c+=4,a.readUint(i,c),c+=4,d==s)return f}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(i,s+2*l));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},readUnicode:function(i,s,o){for(var a="",l=0;l<o;l++){var c=i[s++]<<8|i[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(i[s+l]);return a},readASCIIArray:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(i[s+l]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,l){var c=e._bin,u={},d=s;c.readFixed(i,s),s+=4;var f=c.readUshort(i,s);s+=2;var h=c.readUshort(i,s);s+=2;var p=c.readUshort(i,s);return s+=2,u.scriptList=e._lctf.readScriptList(i,d+f),u.featureList=e._lctf.readFeatureList(i,d+h),u.lookupList=e._lctf.readLookupList(i,d+p,l),u},e._lctf.readLookupList=function(i,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var f=a.readUshort(i,s);s+=2;var h=e._lctf.readLookupTable(i,l+f,o);c.push(h)}return c},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(i,s),s+=2,c.flag=a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;for(var d=c.ltype,f=0;f<u;f++){var h=a.readUshort(i,s);s+=2;var p=o(i,d,l+h,c);c.tabs.push(p)}return c},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)i>>>o&1&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],l=o.readUshort(i,s);if(s+=2,l==1){var c=o.readUshort(i,s);s+=2;var u=o.readUshort(i,s);s+=2;for(var d=0;d<u;d++)a.push(c+d),a.push(c+d),a.push(o.readUshort(i,s)),s+=2}if(l==2){var f=o.readUshort(i,s);for(s+=2,d=0;d<f;d++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],l=i[o+1];if(i[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,l)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*l)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var d=o.readASCII(i,s,4);s+=4;var f=o.readUshort(i,s);s+=2;var h=e._lctf.readFeatureTable(i,a+f);h.tag=d.trim(),l.push(h)}return l},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(i,s);s+=2,l.tab=[];for(var d=0;d<u;d++)l.tab.push(o.readUshort(i,s+2*d));return l},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var d=o.readASCII(i,s,4);s+=4;var f=o.readUshort(i,s);s+=2,l[d.trim()]=e._lctf.readScriptTable(i,a+f)}return l},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,l={},c=o.readUshort(i,s);s+=2,l.default=e._lctf.readLangSysTable(i,a+c);var u=o.readUshort(i,s);s+=2;for(var d=0;d<u;d++){var f=o.readASCII(i,s,4);s+=4;var h=o.readUshort(i,s);s+=2,l[f.trim()]=e._lctf.readLangSysTable(i,a+h)}return l},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,l),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(i,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var d=[];s=e.CFF.readIndex(i,s,d);var f=[];for(u=0;u<d.length-1;u++)f.push(e.CFF.readDict(i,s+d[u],s+d[u+1]));s+=d[d.length-1];var h=f[0],p=[];s=e.CFF.readIndex(i,s,p);var v=[];for(u=0;u<p.length-1;u++)v.push(a.readASCII(i,s+p[u],p[u+1]-p[u]));if(s+=p[p.length-1],e.CFF.readSubrs(i,s,h),h.CharStrings){s=h.CharStrings,p=[],s=e.CFF.readIndex(i,s,p);var g=[];for(u=0;u<p.length-1;u++)g.push(a.readBytes(i,s+p[u],p[u+1]-p[u]));h.CharStrings=g}if(h.ROS){s=h.FDArray;var m=[];for(s=e.CFF.readIndex(i,s,m),h.FDArray=[],u=0;u<m.length-1;u++){var y=e.CFF.readDict(i,s+m[u],s+m[u+1]);e.CFF._readFDict(i,y,v),h.FDArray.push(y)}s+=m[m.length-1],s=h.FDSelect,h.FDSelect=[];var x=i[s];if(s++,x!=3)throw x;var S=a.readUshort(i,s);for(s+=2,u=0;u<S+1;u++)h.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return h.Encoding&&(h.Encoding=e.CFF.readEncoding(i,h.Encoding,h.CharStrings.length)),h.charset&&(h.charset=e.CFF.readCharset(i,h.charset,h.CharStrings.length)),e.CFF._readFDict(i,h,v),h},e.CFF._readFDict=function(i,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var d=0;d<l.length-1;d++)o.Subrs.push(a.readBytes(i,s+l[d],l[d+1]-l[d]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=i[s];s++;for(var u=0;u<c;u++)a.push(i[s+u]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,l=[".notdef"],c=i[s];if(s++,c==0)for(var u=0;u<o;u++){var d=a.readUshort(i,s);s+=2,l.push(d)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){d=a.readUshort(i,s),s+=2;var f=0;for(c==1?(f=i[s],s++):(f=a.readUshort(i,s),s+=2),u=0;u<=f;u++)l.push(d),d++}}return l},e.CFF.readIndex=function(i,s,o){var a=e._bin,l=a.readUshort(i,s)+1,c=i[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(i[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(i,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(i,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,l=i[s],c=i[s+1];i[s+2],i[s+3],i[s+4];var u=1,d=null,f=null;l<=20&&(d=l,u=1),l==12&&(d=100*l+c,u=2),21<=l&&l<=27&&(d=l,u=1),l==28&&(f=a.readShort(i,s+1),u=3),29<=l&&l<=31&&(d=l,u=1),32<=l&&l<=246&&(f=l-139,u=1),247<=l&&l<=250&&(f=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(f=256*-(l-251)-c-108,u=2),l==255&&(f=a.readInt(i,s+1)/65535,u=5),o.val=f??"o"+d,o.size=u},e.CFF.readCharString=function(i,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=i[s],d=i[s+1];i[s+2],i[s+3],i[s+4];var f=1,h=null,p=null;u<=20&&(h=u,f=1),u==12&&(h=100*u+d,f=2),u!=19&&u!=20||(h=u,f=2),21<=u&&u<=27&&(h=u,f=1),u==28&&(p=l.readShort(i,s+1),f=3),29<=u&&u<=31&&(h=u,f=1),32<=u&&u<=246&&(p=u-139,f=1),247<=u&&u<=250&&(p=256*(u-247)+d+108,f=2),251<=u&&u<=254&&(p=256*-(u-251)-d-108,f=2),u==255&&(p=l.readInt(i,s+1)/65535,f=5),c.push(p??"o"+h),s+=f}return c},e.CFF.readDict=function(i,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=i[s],d=i[s+1];i[s+2],i[s+3],i[s+4];var f=1,h=null,p=null;if(u==28&&(p=a.readShort(i,s+1),f=3),u==29&&(p=a.readInt(i,s+1),f=5),32<=u&&u<=246&&(p=u-139,f=1),247<=u&&u<=250&&(p=256*(u-247)+d+108,f=2),251<=u&&u<=254&&(p=256*-(u-251)-d-108,f=2),u==255)throw p=a.readInt(i,s+1)/65535,f=5,"unknown number";if(u==30){var v=[];for(f=1;;){var g=i[s+f];f++;var m=g>>4,y=15&g;if(m!=15&&v.push(m),y!=15&&v.push(y),y==15)break}for(var x="",S=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],_=0;_<v.length;_++)x+=S[v[_]];p=parseFloat(x)}u<=21&&(h=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],f=1,u==12&&(h=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][d],f=2)),h!=null?(l[h]=c.length==1?c[0]:c,c=[]):c.push(p),s+=f}return l},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;var u=[];l.tables=[];for(var d=0;d<c;d++){var f=a.readUshort(i,s);s+=2;var h=a.readUshort(i,s);s+=2;var p=a.readUint(i,s);s+=4;var v="p"+f+"e"+h,g=u.indexOf(p);if(g==-1){var m;g=l.tables.length,u.push(p);var y=a.readUshort(i,p);y==0?m=e.cmap.parse0(i,p):y==4?m=e.cmap.parse4(i,p):y==6?m=e.cmap.parse6(i,p):y==12?m=e.cmap.parse12(i,p):console.debug("unknown format: "+y,f,h,p),l.tables.push(m)}if(l[v]!=null)throw"multiple tables for one platform+encoding";l[v]=g}return l},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(i[s+c]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,l={};l.format=o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2;var d=u/2;l.searchRange=o.readUshort(i,s),s+=2,l.entrySelector=o.readUshort(i,s),s+=2,l.rangeShift=o.readUshort(i,s),s+=2,l.endCount=o.readUshorts(i,s,d),s+=2*d,s+=2,l.startCount=o.readUshorts(i,s,d),s+=2*d,l.idDelta=[];for(var f=0;f<d;f++)l.idDelta.push(o.readShort(i,s)),s+=2;for(l.idRangeOffset=o.readUshorts(i,s,d),s+=2*d,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var l=o.readUint(i,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,d=o.readUint(i,u+0),f=o.readUint(i,u+4),h=o.readUint(i,u+8);a.groups.push([d,f,h])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,l=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var d=o.readUshort(a,l);if(l+=2,a.length-l<d)return null;c.instructions=o.readBytes(a,l,d),l+=d;var f=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<f;u++){var h=a[l];if(l++,c.flags.push(h),(8&h)!=0){var p=a[l];l++;for(var v=0;v<p;v++)c.flags.push(h),u++}}for(c.xs=[],u=0;u<f;u++){var g=(2&c.flags[u])!=0,m=(16&c.flags[u])!=0;g?(c.xs.push(m?a[l]:-a[l]),l++):m?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<f;u++)g=(4&c.flags[u])!=0,m=(32&c.flags[u])!=0,g?(c.ys.push(m?a[l]:-a[l]),l++):m?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var y=0,x=0;for(u=0;u<f;u++)y+=c.xs[u],x+=c.ys[u],c.xs[u]=y,c.ys[u]=x}else{var S;c.parts=[];do{S=o.readUshort(a,l),l+=2;var _={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(_),_.glyphIndex=o.readUshort(a,l),l+=2,1&S){var C=o.readShort(a,l);l+=2;var T=o.readShort(a,l);l+=2}else C=o.readInt8(a,l),l++,T=o.readInt8(a,l),l++;2&S?(_.m.tx=C,_.m.ty=T):(_.p1=C,_.p2=T),8&S?(_.m.a=_.m.d=o.readF2dot14(a,l),l+=2):64&S?(_.m.a=o.readF2dot14(a,l),l+=2,_.m.d=o.readF2dot14(a,l),l+=2):128&S&&(_.m.a=o.readF2dot14(a,l),l+=2,_.m.b=o.readF2dot14(a,l),l+=2,_.m.c=o.readF2dot14(a,l),l+=2,_.m.d=o.readF2dot14(a,l),l+=2)}while(32&S);if(256&S){var A=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<A;u++)c.instr.push(a[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var d=l.readUshort(i,o);o+=2,u.coverage=e._lctf.readCoverage(i,d+c)}if(s==1&&u.fmt==1){var f=l.readUshort(i,o);o+=2;var h=e._lctf.numOfOnes(f);f!=0&&(u.pos=e.GPOS.readValueRecord(i,o,f))}else if(s==2&&u.fmt>=1&&u.fmt<=2){f=l.readUshort(i,o),o+=2;var p=l.readUshort(i,o);o+=2,h=e._lctf.numOfOnes(f);var v=e._lctf.numOfOnes(p);if(u.fmt==1){u.pairsets=[];var g=l.readUshort(i,o);o+=2;for(var m=0;m<g;m++){var y=c+l.readUshort(i,o);o+=2;var x=l.readUshort(i,y);y+=2;for(var S=[],_=0;_<x;_++){var C=l.readUshort(i,y);y+=2,f!=0&&(N=e.GPOS.readValueRecord(i,y,f),y+=2*h),p!=0&&(F=e.GPOS.readValueRecord(i,y,p),y+=2*v),S.push({gid2:C,val1:N,val2:F})}u.pairsets.push(S)}}if(u.fmt==2){var T=l.readUshort(i,o);o+=2;var A=l.readUshort(i,o);o+=2;var M=l.readUshort(i,o);o+=2;var E=l.readUshort(i,o);for(o+=2,u.classDef1=e._lctf.readClassDef(i,c+T),u.classDef2=e._lctf.readClassDef(i,c+A),u.matrix=[],m=0;m<M;m++){var P=[];for(_=0;_<E;_++){var N=null,F=null;f!=0&&(N=e.GPOS.readValueRecord(i,o,f),o+=2*h),p!=0&&(F=e.GPOS.readValueRecord(i,o,p),o+=2*v),P.push({val1:N,val2:F})}u.matrix.push(P)}}}else{if(s==9&&u.fmt==1){var $=l.readUshort(i,o);o+=2;var O=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=$;else if(a.ltype!=$)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,c+O)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(i,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var d=l.readUshort(i,o);o+=2,u.coverage=e._lctf.readCoverage(i,c+d)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(i,o),o+=2;else if(u.fmt==2){var f=l.readUshort(i,o);o+=2,u.newg=l.readUshorts(i,o,f),o+=2*u.newg.length}}else if(s==4){u.vals=[],f=l.readUshort(i,o),o+=2;for(var h=0;h<f;h++){var p=l.readUshort(i,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(i,c+p))}}else if(s==5&&u.fmt==2){if(u.fmt==2){var v=l.readUshort(i,o);o+=2,u.cDef=e._lctf.readClassDef(i,c+v),u.scset=[];var g=l.readUshort(i,o);for(o+=2,h=0;h<g;h++){var m=l.readUshort(i,o);o+=2,u.scset.push(m==0?null:e.GSUB.readSubClassSet(i,c+m))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(h=0;h<3;h++){f=l.readUshort(i,o),o+=2;for(var y=[],x=0;x<f;x++)y.push(e._lctf.readCoverage(i,c+l.readUshort(i,o+2*x)));o+=2*f,h==0&&(u.backCvg=y),h==1&&(u.inptCvg=y),h==2&&(u.ahedCvg=y)}f=l.readUshort(i,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(i,o,f)}}else{if(s==7&&u.fmt==1){var S=l.readUshort(i,o);o+=2;var _=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=S;else if(a.ltype!=S)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,c+_)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,l=[],c=o(i,s);s+=2;for(var u=0;u<c;u++){var d=o(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,a+d))}return l},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},l=o(i,s),c=o(i,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,c),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(i,s),a(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var d=o.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,a+d))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(i,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(i,s,u),s+=2*a[l[c]].length}return u=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,l=[],c=o.readUshort(i,s);s+=2;for(var u=0;u<c;u++){var d=o.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,a+d))}return l},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,l.flags=a.readUshort(i,s),s+=2,l.unitsPerEm=a.readUshort(i,s),s+=2,l.created=a.readUint64(i,s),s+=8,l.modified=a.readUint64(i,s),s+=8,l.xMin=a.readShort(i,s),s+=2,l.yMin=a.readShort(i,s),s+=2,l.xMax=a.readShort(i,s),s+=2,l.yMax=a.readShort(i,s),s+=2,l.macStyle=a.readUshort(i,s),s+=2,l.lowestRecPPEM=a.readUshort(i,s),s+=2,l.fontDirectionHint=a.readShort(i,s),s+=2,l.indexToLocFormat=a.readShort(i,s),s+=2,l.glyphDataFormat=a.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.ascender=a.readShort(i,s),s+=2,l.descender=a.readShort(i,s),s+=2,l.lineGap=a.readShort(i,s),s+=2,l.advanceWidthMax=a.readUshort(i,s),s+=2,l.minLeftSideBearing=a.readShort(i,s),s+=2,l.minRightSideBearing=a.readShort(i,s),s+=2,l.xMaxExtent=a.readShort(i,s),s+=2,l.caretSlopeRise=a.readShort(i,s),s+=2,l.caretSlopeRun=a.readShort(i,s),s+=2,l.caretOffset=a.readShort(i,s),s+=2,s+=8,l.metricDataFormat=a.readShort(i,s),s+=2,l.numberOfHMetrics=a.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,d=0,f=0;f<a.maxp.numGlyphs;f++)f<a.hhea.numberOfHMetrics&&(u=l.readUshort(i,s),s+=2,d=l.readShort(i,s),s+=2),c.aWidth.push(u),c.lsBearing.push(d);return c},e.kern={},e.kern.parse=function(i,s,o,a){var l=e._bin,c=l.readUshort(i,s);if(s+=2,c==1)return e.kern.parseV1(i,s-2,o,a);var u=l.readUshort(i,s);s+=2;for(var d={glyph1:[],rval:[]},f=0;f<u;f++){s+=2,o=l.readUshort(i,s),s+=2;var h=l.readUshort(i,s);s+=2;var p=h>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;s=e.kern.readFormat0(i,s,d)}return d},e.kern.parseV1=function(i,s,o,a){var l=e._bin;l.readFixed(i,s),s+=4;var c=l.readUint(i,s);s+=4;for(var u={glyph1:[],rval:[]},d=0;d<c;d++){l.readUint(i,s),s+=4;var f=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var h=f>>>8;if((h&=15)!=0)throw"unknown kern table format: "+h;s=e.kern.readFormat0(i,s,u)}return u},e.kern.readFormat0=function(i,s,o){var a=e._bin,l=-1,c=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var u=0;u<c;u++){var d=a.readUshort(i,s);s+=2;var f=a.readUshort(i,s);s+=2;var h=a.readShort(i,s);s+=2,d!=l&&(o.glyph1.push(d),o.rval.push({glyph2:[],vals:[]}));var p=o.rval[o.rval.length-1];p.glyph2.push(f),p.vals.push(h),l=d}return s},e.loca={},e.loca.parse=function(i,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,d=a.maxp.numGlyphs+1;if(u==0)for(var f=0;f<d;f++)c.push(l.readUshort(i,s+(f<<1))<<1);if(u==1)for(f=0;f<d;f++)c.push(l.readUint(i,s+(f<<2)));return c},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,l={},c=a.readUint(i,s);return s+=4,l.numGlyphs=a.readUshort(i,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(i,s),s+=2,l.maxContours=a.readUshort(i,s),s+=2,l.maxCompositePoints=a.readUshort(i,s),s+=2,l.maxCompositeContours=a.readUshort(i,s),s+=2,l.maxZones=a.readUshort(i,s),s+=2,l.maxTwilightPoints=a.readUshort(i,s),s+=2,l.maxStorage=a.readUshort(i,s),s+=2,l.maxFunctionDefs=a.readUshort(i,s),s+=2,l.maxInstructionDefs=a.readUshort(i,s),s+=2,l.maxStackElements=a.readUshort(i,s),s+=2,l.maxSizeOfInstructions=a.readUshort(i,s),s+=2,l.maxComponentElements=a.readUshort(i,s),s+=2,l.maxComponentDepth=a.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,o){var a=e._bin,l={};a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var u,d=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],f=s+=2,h=0;h<c;h++){var p=a.readUshort(i,s);s+=2;var v=a.readUshort(i,s);s+=2;var g=a.readUshort(i,s);s+=2;var m=a.readUshort(i,s);s+=2;var y=a.readUshort(i,s);s+=2;var x=a.readUshort(i,s);s+=2;var S,_=d[m],C=f+12*c+x;if(p==0)S=a.readUnicode(i,C,y/2);else if(p==3&&v==0)S=a.readUnicode(i,C,y/2);else if(v==0)S=a.readASCII(i,C,y);else if(v==1)S=a.readUnicode(i,C,y/2);else if(v==3)S=a.readUnicode(i,C,y/2);else{if(p!=1)throw"unknown encoding "+v+", platformID: "+p;S=a.readASCII(i,C,y),console.debug("reading unknown MAC encoding "+v+" as ASCII")}var T="p"+p+","+g.toString(16);l[T]==null&&(l[T]={}),l[T][_!==void 0?_:m]=S,l[T]._lang=g}for(var A in l)if(l[A].postScriptName!=null&&l[A]._lang==1033)return l[A];for(var A in l)if(l[A].postScriptName!=null&&l[A]._lang==0)return l[A];for(var A in l)if(l[A].postScriptName!=null&&l[A]._lang==3084)return l[A];for(var A in l)if(l[A].postScriptName!=null)return l[A];for(var A in l){u=A;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var l={};if(a==0)e["OS/2"].version0(i,s,l);else if(a==1)e["OS/2"].version1(i,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,l={};return l.version=a.readFixed(i,s),s+=4,l.italicAngle=a.readFixed(i,s),s+=4,l.underlinePosition=a.readShort(i,s),s+=2,l.underlineThickness=a.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var d=l.groups[u];if(d[0]<=s&&s<=d[1])return d[2]+(s-d[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},c=i.CFF,u=i.CFF.Private;if(c.ROS){for(var d=0;c.FDSelect[d+2]<=s;)d+=2;u=c.FDArray[c.FDSelect[d+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,c,u,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,l=i.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,d=c==l?a:c+1,f=1&i.flags[c],h=1&i.flags[u],p=1&i.flags[d],v=i.xs[c],g=i.ys[c];if(c==a)if(f){if(!h){e.U.P.moveTo(s,v,g);continue}e.U.P.moveTo(s,i.xs[u],i.ys[u])}else h?e.U.P.moveTo(s,i.xs[u],i.ys[u]):e.U.P.moveTo(s,(i.xs[u]+v)/2,(i.ys[u]+g)/2);f?h&&e.U.P.lineTo(s,v,g):p?e.U.P.qcurveTo(s,v,g,i.xs[d],i.ys[d]):e.U.P.qcurveTo(s,v,g,(v+i.xs[d])/2,(g+i.ys[d])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var l={cmds:[],crds:[]},c=i.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,d=0;d<l.crds.length;d+=2){var f=l.crds[d],h=l.crds[d+1];o.crds.push(f*u.a+h*u.b+u.tx),o.crds.push(f*u.c+h*u.d+u.ty)}for(d=0;d<l.cmds.length;d++)o.cmds.push(l.cmds[d])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(i,s,o){var a=!1;if(i.GPOS)for(var l=i.GPOS,c=l.lookupList,u=l.featureList,d=[],f=0;f<u.length;f++){var h=u[f];if(h.tag=="kern"){a=!0;for(var p=0;p<h.tab.length;p++)if(!d[h.tab[p]]){d[h.tab[p]]=!0;for(var v=c[h.tab[p]],g=0;g<v.tabs.length;g++)if(v.tabs[g]!=null){var m,y=v.tabs[g];if((!y.coverage||(m=e._lctf.coverageIndex(y.coverage,s))!=-1)&&v.ltype!=1){if(v.ltype==2){var x=null;if(y.fmt==1){var S=y.pairsets[m];for(f=0;f<S.length;f++)S[f].gid2==o&&(x=S[f])}else if(y.fmt==2){var _=e.U._getGlyphClass(s,y.classDef1),C=e.U._getGlyphClass(o,y.classDef2);x=y.matrix[_][C]}if(x){var T=0;return x.val1&&x.val1[2]&&(T+=x.val1[2]),x.val2&&x.val2[0]&&(T+=x.val2[0]),T}}}}}}}if(i.kern&&!a){var A=i.kern.glyph1.indexOf(s);if(A!=-1){var M=i.kern.rval[A].glyph2.indexOf(o);if(M!=-1)return i.kern.rval[A].vals[M]}}return 0},e.U._applySubs=function(i,s,o,a){for(var l=i.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,d=o.tabs[c];if(!d.coverage||(u=e._lctf.coverageIndex(d.coverage,i[s]))!=-1){if(o.ltype==1)i[s],d.fmt==1?i[s]=i[s]+d.delta:i[s]=d.newg[u];else if(o.ltype==4)for(var f=d.vals[u],h=0;h<f.length;h++){var p=f[h],v=p.chain.length;if(!(v>l)){for(var g=!0,m=0,y=0;y<v;y++){for(;i[s+m+(1+y)]==-1;)m++;p.chain[y]!=i[s+m+(1+y)]&&(g=!1)}if(g){for(i[s]=p.nglyph,y=0;y<v+m;y++)i[s+y+1]=-1;break}}}else if(o.ltype==5&&d.fmt==2)for(var x=e._lctf.getInterval(d.cDef,i[s]),S=d.cDef[x+2],_=d.scset[S],C=0;C<_.length;C++){var T=_[C],A=T.input;if(!(A.length>l)){for(g=!0,y=0;y<A.length;y++){var M=e._lctf.getInterval(d.cDef,i[s+1+y]);if(x==-1&&d.cDef[M+2]!=A[y]){g=!1;break}}if(g){var E=T.substLookupRecords;for(h=0;h<E.length;h+=2)E[h],E[h+1]}}}else if(o.ltype==6&&d.fmt==3){if(!e.U._glsCovered(i,d.backCvg,s-d.backCvg.length)||!e.U._glsCovered(i,d.inptCvg,s)||!e.U._glsCovered(i,d.ahedCvg,s+d.inptCvg.length))continue;var P=d.lookupRec;for(C=0;C<P.length;C+=2){x=P[C];var N=a[P[C+1]];e.U._applySubs(i,s+x,N,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var d=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,f=e.U.glyphToPath(i,u),h=0;h<f.crds.length;h+=2)a.crds.push(f.crds[h]+l),a.crds.push(f.crds[h+1]);for(o&&a.cmds.push(o),h=0;h<f.cmds.length;h++)a.cmds.push(f.cmds[h]);o&&a.cmds.push("X"),l+=i.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(i,u,d))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,l,c,u){i.cmds.push("C"),i.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(i,s,o,a,l){i.cmds.push("Q"),i.crds.push(s,o,a,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,l){for(var c=s.stack,u=s.nStems,d=s.haveWidth,f=s.width,h=s.open,p=0,v=s.x,g=s.y,m=0,y=0,x=0,S=0,_=0,C=0,T=0,A=0,M=0,E=0,P={val:0,size:0};p<i.length;){e.CFF.getCharString(i,p,P);var N=P.val;if(p+=P.size,N=="o1"||N=="o18")c.length%2!=0&&!d&&(f=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0;else if(N=="o3"||N=="o23")c.length%2!=0&&!d&&(f=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0;else if(N=="o4")c.length>1&&!d&&(f=c.shift()+a.nominalWidthX,d=!0),h&&e.U.P.closePath(l),g+=c.pop(),e.U.P.moveTo(l,v,g),h=!0;else if(N=="o5")for(;c.length>0;)v+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,v,g);else if(N=="o6"||N=="o7")for(var F=c.length,$=N=="o6",O=0;O<F;O++){var z=c.shift();$?v+=z:g+=z,$=!$,e.U.P.lineTo(l,v,g)}else if(N=="o8"||N=="o24"){F=c.length;for(var X=0;X+6<=F;)m=v+c.shift(),y=g+c.shift(),x=m+c.shift(),S=y+c.shift(),v=x+c.shift(),g=S+c.shift(),e.U.P.curveTo(l,m,y,x,S,v,g),X+=6;N=="o24"&&(v+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,v,g))}else{if(N=="o11")break;if(N=="o1234"||N=="o1235"||N=="o1236"||N=="o1237")N=="o1234"&&(y=g,x=(m=v+c.shift())+c.shift(),E=S=y+c.shift(),C=S,A=g,v=(T=(_=(M=x+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,m,y,x,S,M,E),e.U.P.curveTo(l,_,C,T,A,v,g)),N=="o1235"&&(m=v+c.shift(),y=g+c.shift(),x=m+c.shift(),S=y+c.shift(),M=x+c.shift(),E=S+c.shift(),_=M+c.shift(),C=E+c.shift(),T=_+c.shift(),A=C+c.shift(),v=T+c.shift(),g=A+c.shift(),c.shift(),e.U.P.curveTo(l,m,y,x,S,M,E),e.U.P.curveTo(l,_,C,T,A,v,g)),N=="o1236"&&(m=v+c.shift(),y=g+c.shift(),x=m+c.shift(),E=S=y+c.shift(),C=S,T=(_=(M=x+c.shift())+c.shift())+c.shift(),A=C+c.shift(),v=T+c.shift(),e.U.P.curveTo(l,m,y,x,S,M,E),e.U.P.curveTo(l,_,C,T,A,v,g)),N=="o1237"&&(m=v+c.shift(),y=g+c.shift(),x=m+c.shift(),S=y+c.shift(),M=x+c.shift(),E=S+c.shift(),_=M+c.shift(),C=E+c.shift(),T=_+c.shift(),A=C+c.shift(),Math.abs(T-v)>Math.abs(A-g)?v=T+c.shift():g=A+c.shift(),e.U.P.curveTo(l,m,y,x,S,M,E),e.U.P.curveTo(l,_,C,T,A,v,g));else if(N=="o14"){if(c.length>0&&!d&&(f=c.shift()+o.nominalWidthX,d=!0),c.length==4){var D=c.shift(),B=c.shift(),V=c.shift(),W=c.shift(),j=e.CFF.glyphBySE(o,V),J=e.CFF.glyphBySE(o,W);e.U._drawCFF(o.CharStrings[j],s,o,a,l),s.x=D,s.y=B,e.U._drawCFF(o.CharStrings[J],s,o,a,l)}h&&(e.U.P.closePath(l),h=!1)}else if(N=="o19"||N=="o20")c.length%2!=0&&!d&&(f=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0,p+=u+7>>3;else if(N=="o21")c.length>2&&!d&&(f=c.shift()+a.nominalWidthX,d=!0),g+=c.pop(),v+=c.pop(),h&&e.U.P.closePath(l),e.U.P.moveTo(l,v,g),h=!0;else if(N=="o22")c.length>1&&!d&&(f=c.shift()+a.nominalWidthX,d=!0),v+=c.pop(),h&&e.U.P.closePath(l),e.U.P.moveTo(l,v,g),h=!0;else if(N=="o25"){for(;c.length>6;)v+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,v,g);m=v+c.shift(),y=g+c.shift(),x=m+c.shift(),S=y+c.shift(),v=x+c.shift(),g=S+c.shift(),e.U.P.curveTo(l,m,y,x,S,v,g)}else if(N=="o26")for(c.length%2&&(v+=c.shift());c.length>0;)m=v,y=g+c.shift(),v=x=m+c.shift(),g=(S=y+c.shift())+c.shift(),e.U.P.curveTo(l,m,y,x,S,v,g);else if(N=="o27")for(c.length%2&&(g+=c.shift());c.length>0;)y=g,x=(m=v+c.shift())+c.shift(),S=y+c.shift(),v=x+c.shift(),g=S,e.U.P.curveTo(l,m,y,x,S,v,g);else if(N=="o10"||N=="o29"){var Q=N=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var te=c.pop(),re=Q.Subrs[te+Q.Bias];s.x=v,s.y=g,s.nStems=u,s.haveWidth=d,s.width=f,s.open=h,e.U._drawCFF(re,s,o,a,l),v=s.x,g=s.y,u=s.nStems,d=s.haveWidth,f=s.width,h=s.open}}else if(N=="o30"||N=="o31"){var se=c.length,fe=(X=0,N=="o31");for(X+=se-(F=-3&se);X<F;)fe?(y=g,x=(m=v+c.shift())+c.shift(),g=(S=y+c.shift())+c.shift(),F-X==5?(v=x+c.shift(),X++):v=x,fe=!1):(m=v,y=g+c.shift(),x=m+c.shift(),S=y+c.shift(),v=x+c.shift(),F-X==5?(g=S+c.shift(),X++):g=S,fe=!0),e.U.P.curveTo(l,m,y,x,S,v,g),X+=4}else{if((N+"").charAt(0)=="o")throw console.debug("Unknown operation: "+N,i),N;c.push(N)}}}s.x=v,s.y=g,s.nStems=u,s.haveWidth=d,s.width=f,s.open=h};var n=e,r={Typr:n};return t.Typr=n,t.default=r,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Xat(){return function(t){var e=Uint8Array,n=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(N,F){for(var $=new n(31),O=0;O<31;++O)$[O]=F+=1<<N[O-1];var z=new r($[30]);for(O=1;O<30;++O)for(var X=$[O];X<$[O+1];++X)z[X]=X-$[O]<<5|O;return[$,z]},l=a(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var d=a(s,0)[0],f=new n(32768),h=0;h<32768;++h){var p=(43690&h)>>>1|(21845&h)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,f[h]=((65280&p)>>>8|(255&p)<<8)>>>1}var v=function(N,F,$){for(var O=N.length,z=0,X=new n(F);z<O;++z)++X[N[z]-1];var D,B=new n(F);for(z=0;z<F;++z)B[z]=B[z-1]+X[z-1]<<1;if($){D=new n(1<<F);var V=15-F;for(z=0;z<O;++z)if(N[z])for(var W=z<<4|N[z],j=F-N[z],J=B[N[z]-1]++<<j,Q=J|(1<<j)-1;J<=Q;++J)D[f[J]>>>V]=W}else for(D=new n(O),z=0;z<O;++z)N[z]&&(D[z]=f[B[N[z]-1]++]>>>15-N[z]);return D},g=new e(288);for(h=0;h<144;++h)g[h]=8;for(h=144;h<256;++h)g[h]=9;for(h=256;h<280;++h)g[h]=7;for(h=280;h<288;++h)g[h]=8;var m=new e(32);for(h=0;h<32;++h)m[h]=5;var y=v(g,9,1),x=v(m,5,1),S=function(N){for(var F=N[0],$=1;$<N.length;++$)N[$]>F&&(F=N[$]);return F},_=function(N,F,$){var O=F/8|0;return(N[O]|N[O+1]<<8)>>(7&F)&$},C=function(N,F){var $=F/8|0;return(N[$]|N[$+1]<<8|N[$+2]<<16)>>(7&F)},T=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],A=function(N,F,$){var O=new Error(F||T[N]);if(O.code=N,Error.captureStackTrace&&Error.captureStackTrace(O,A),!$)throw O;return O},M=function(N,F,$){var O=N.length;if(!O||$&&!$.l&&O<5)return F||new e(0);var z=!F||$,X=!$||$.i;$||($={}),F||(F=new e(3*O));var D,B=function(Le){var pe=F.length;if(Le>pe){var He=new e(Math.max(2*pe,Le));He.set(F),F=He}},V=$.f||0,W=$.p||0,j=$.b||0,J=$.l,Q=$.d,te=$.m,re=$.n,se=8*O;do{if(!J){$.f=V=_(N,W,1);var fe=_(N,W+1,3);if(W+=3,!fe){var ae=N[(Y=((D=W)/8|0)+(7&D&&1)+4)-4]|N[Y-3]<<8,ye=Y+ae;if(ye>O){X&&A(0);break}z&&B(j+ae),F.set(N.subarray(Y,ye),j),$.b=j+=ae,$.p=W=8*ye;continue}if(fe==1)J=y,Q=x,te=9,re=5;else if(fe==2){var le=_(N,W,31)+257,H=_(N,W+10,15)+4,Me=le+_(N,W+5,31)+1;W+=14;for(var we=new e(Me),Ee=new e(19),ge=0;ge<H;++ge)Ee[o[ge]]=_(N,W+3*ge,7);W+=3*H;var qe=S(Ee),Ae=(1<<qe)-1,ee=v(Ee,qe,1);for(ge=0;ge<Me;){var Y,oe=ee[_(N,W,Ae)];if(W+=15&oe,(Y=oe>>>4)<16)we[ge++]=Y;else{var xe=0,Se=0;for(Y==16?(Se=3+_(N,W,3),W+=2,xe=we[ge-1]):Y==17?(Se=3+_(N,W,7),W+=3):Y==18&&(Se=11+_(N,W,127),W+=7);Se--;)we[ge++]=xe}}var be=we.subarray(0,le),Re=we.subarray(le);te=S(be),re=S(Re),J=v(be,te,1),Q=v(Re,re,1)}else A(1);if(W>se){X&&A(0);break}}z&&B(j+131072);for(var Ke=(1<<te)-1,ze=(1<<re)-1,Ne=W;;Ne=W){var De=(xe=J[C(N,W)&Ke])>>>4;if((W+=15&xe)>se){X&&A(0);break}if(xe||A(2),De<256)F[j++]=De;else{if(De==256){Ne=W,J=null;break}var Ve=De-254;if(De>264){var gt=i[ge=De-257];Ve=_(N,W,(1<<gt)-1)+c[ge],W+=gt}var ct=Q[C(N,W)&ze],Ye=ct>>>4;if(ct||A(3),W+=15&ct,Re=d[Ye],Ye>3&&(gt=s[Ye],Re+=C(N,W)&(1<<gt)-1,W+=gt),W>se){X&&A(0);break}z&&B(j+131072);for(var Xe=j+Ve;j<Xe;j+=4)F[j]=F[j-Re],F[j+1]=F[j+1-Re],F[j+2]=F[j+2-Re],F[j+3]=F[j+3-Re];j=Xe}}$.l=J,$.p=Ne,$.b=j,J&&(V=1,$.m=te,$.d=Q,$.n=re)}while(!V);return j==F.length?F:function(Le,pe,He){(pe==null||pe<0)&&(pe=0),(He==null||He>Le.length)&&(He=Le.length);var ot=new(Le instanceof n?n:Le instanceof r?r:e)(He-pe);return ot.set(Le.subarray(pe,He)),ot}(F,0,j)},E=new e(0),P=typeof TextDecoder<"u"&&new TextDecoder;try{P.decode(E,{stream:!0})}catch{}return t.convert_streams=function(N){var F=new DataView(N),$=0;function O(){var le=F.getUint16($);return $+=2,le}function z(){var le=F.getUint32($);return $+=4,le}function X(le){ae.setUint16(ye,le),ye+=2}function D(le){ae.setUint32(ye,le),ye+=4}for(var B={signature:z(),flavor:z(),length:z(),numTables:O(),reserved:O(),totalSfntSize:z(),majorVersion:O(),minorVersion:O(),metaOffset:z(),metaLength:z(),metaOrigLength:z(),privOffset:z(),privLength:z()},V=0;Math.pow(2,V)<=B.numTables;)V++;V--;for(var W=16*Math.pow(2,V),j=16*B.numTables-W,J=12,Q=[],te=0;te<B.numTables;te++)Q.push({tag:z(),offset:z(),compLength:z(),origLength:z(),origChecksum:z()}),J+=16;var re,se=new Uint8Array(12+16*Q.length+Q.reduce(function(le,H){return le+H.origLength+4},0)),fe=se.buffer,ae=new DataView(fe),ye=0;return D(B.flavor),X(B.numTables),X(W),X(V),X(j),Q.forEach(function(le){D(le.tag),D(le.origChecksum),D(J),D(le.origLength),le.outOffset=J,(J+=le.origLength)%4!=0&&(J+=4-J%4)}),Q.forEach(function(le){var H,Me=N.slice(le.offset,le.offset+le.compLength);if(le.compLength!=le.origLength){var we=new Uint8Array(le.origLength);H=new Uint8Array(Me,2),M(H,we)}else we=new Uint8Array(Me);se.set(we,le.outOffset);var Ee=0;(J=le.outOffset+le.origLength)%4!=0&&(Ee=4-J%4),se.set(new Uint8Array(Ee).buffer,le.outOffset+le.origLength),re=J+Ee}),fe.slice(0,re)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function qat(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,l=16,c=32;let u;function d(_){if(!u){const C={R:s,L:i,D:o,C:l,U:c,T:a};u=new Map;for(let T in r){let A=0;r[T].split(",").forEach(M=>{let[E,P]=M.split("+");E=parseInt(E,36),P=P?parseInt(P,36):0,u.set(A+=E,C[T]);for(let N=P;N--;)u.set(++A,C[T])})}}return u.get(_)||c}const f=1,h=2,p=3,v=4,g=[null,"isol","init","fina","medi"];function m(_){const C=new Uint8Array(_.length);let T=c,A=f,M=-1;for(let E=0;E<_.length;E++){const P=_.codePointAt(E);let N=d(P)|0,F=f;N&a||(T&(i|o|l)?N&(s|o|l)?(F=p,(A===f||A===p)&&C[M]++):N&(i|c)&&(A===h||A===v)&&C[M]--:T&(s|c)&&(A===h||A===v)&&C[M]--,A=C[E]=F,T=N,M=E,P>65535&&E++)}return C}function y(_,C){const T=[];for(let M=0;M<C.length;M++){const E=C.codePointAt(M);E>65535&&M++,T.push(t.U.codeToGlyph(_,E))}const A=_.GSUB;if(A){const{lookupList:M,featureList:E}=A;let P;const N=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,F=[];E.forEach($=>{if(N.test($.tag))for(let O=0;O<$.tab.length;O++){if(F[$.tab[O]])continue;F[$.tab[O]]=!0;const z=M[$.tab[O]],X=/^(isol|init|fina|medi)$/.test($.tag);X&&!P&&(P=m(C));for(let D=0;D<T.length;D++)(!P||!X||g[P[D]]===$.tag)&&t.U._applySubs(T,D,z,M)}})}return T}function x(..._){for(let C=0;C<_.length;C++)if(typeof _[C]=="number")return _[C]}function S(_){const C=Object.create(null),T=_["OS/2"],A=_.hhea,M=_.head.unitsPerEm,E=x(T&&T.sTypoAscender,A&&A.ascender,M),P={unitsPerEm:M,ascender:E,descender:x(T&&T.sTypoDescender,A&&A.descender,0),capHeight:x(T&&T.sCapHeight,E),xHeight:x(T&&T.sxHeight,E),lineGap:x(T&&T.sTypoLineGap,A&&A.lineGap),forEachGlyph(N,F,$,O){let z=0;const X=1/P.unitsPerEm*F,D=y(_,N);let B=0,V=-1;return D.forEach((W,j)=>{if(W!==-1){let J=C[W];if(!J){const{cmds:Q,crds:te}=t.U.glyphToPath(_,W);let re="",se=0;for(let H=0,Me=Q.length;H<Me;H++){const we=n[Q[H]];re+=Q[H];for(let Ee=1;Ee<=we;Ee++)re+=(Ee>1?",":"")+te[se++]}let fe,ae,ye,le;if(te.length){fe=ae=1/0,ye=le=-1/0;for(let H=0,Me=te.length;H<Me;H+=2){let we=te[H],Ee=te[H+1];we<fe&&(fe=we),Ee<ae&&(ae=Ee),we>ye&&(ye=we),Ee>le&&(le=Ee)}}else fe=ye=ae=le=0;J=C[W]={index:W,advanceWidth:_.hmtx.aWidth[W],xMin:fe,yMin:ae,xMax:ye,yMax:le,path:re,pathCommandCount:Q.length}}V!==-1&&(z+=t.U.getPairAdjustment(_,V,W)*X),O.call(null,J,z,B),J.advanceWidth&&(z+=J.advanceWidth*X),$&&(z+=$*F),V=W}B+=N.codePointAt(B)>65535?2:1}),z}};return P}return function(C){const T=new Uint8Array(C,0,4),A=t._bin.readASCII(T,0,4);if(A==="wOFF")C=e(C);else if(A==="wOF2")throw new Error("woff2 fonts not supported");return S(t.parse(C)[0])}}const Yat=S2({name:"Typr Font Parser",dependencies:[jat,Xat,qat],init(t,e,n){const r=t(),i=e();return n(r,i)}}),yv={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Kat=new zt;function z0(){return(self.performance||Date).now()}const _Z=Object.create(null);function rfe(t,e){t=Qat({},t);const n=z0();if(t.font=elt(t.font||yv.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||yv.sdfGlyphSize,t.colorRanges!=null){let d={};for(let f in t.colorRanges)if(t.colorRanges.hasOwnProperty(f)){let h=t.colorRanges[f];typeof h!="number"&&(h=Kat.set(h).getHex()),d[f]=h}t.colorRanges=d}Object.freeze(t);const{textureWidth:r,sdfExponent:i}=yv,{sdfGlyphSize:s}=t,o=r/s*4;let a=_Z[s];if(!a){const d=document.createElement("canvas");d.width=r,d.height=s*256/o,a=_Z[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:d,sdfTexture:new di(d,void 0,void 0,void 0,Mr,Mr),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,Zat(a)}const{sdfTexture:l,sdfCanvas:c}=a;let u=a.glyphsByFont.get(t.font);u||a.glyphsByFont.set(t.font,u=new Map),nlt(t).then(d=>{const{glyphIds:f,glyphPositions:h,fontSize:p,unitsPerEm:v,timings:g}=d,m=[],y=new Float32Array(f.length*4),x=p/v;let S=0,_=0;const C=z0();f.forEach((P,N)=>{let F=u.get(P);if(!F){const{path:X,pathBounds:D}=d.glyphData[P],B=Math.max(D[2]-D[0],D[3]-D[1])/s*(yv.sdfMargin*s+.5),V=a.glyphCount++,W=[D[0]-B,D[1]-B,D[2]+B,D[3]+B];u.set(P,F={path:X,atlasIndex:V,sdfViewBox:W}),m.push(F)}const{sdfViewBox:$}=F,O=h[_++],z=h[_++];y[S++]=O+$[0]*x,y[S++]=z+$[1]*x,y[S++]=O+$[2]*x,y[S++]=z+$[3]*x,f[N]=F.atlasIndex}),g.quads=(g.quads||0)+(z0()-C);const T=z0();g.sdf={};const A=c.height,M=Math.ceil(a.glyphCount/o),E=Math.pow(2,Math.ceil(Math.log2(M*s)));E>A&&(console.info(`Increasing SDF texture size ${A}->${E}`),Hat(c,r,E),l.dispose()),Promise.all(m.map(P=>ife(P,a,t.gpuAccelerateSDF).then(({timing:N})=>{g.sdf[P.atlasIndex]=N}))).then(()=>{m.length&&!a.contextLost&&(sfe(a),l.needsUpdate=!0),g.sdfTotal=z0()-T,g.total=z0()-n,e(Object.freeze({parameters:t,sdfTexture:l,sdfGlyphSize:s,sdfExponent:i,glyphBounds:y,glyphAtlasIndices:f,glyphColors:d.glyphColors,caretPositions:d.caretPositions,caretHeight:d.caretHeight,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{a.contextLost||Gat(c)})}function ife({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=yv,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(e/4),d=u%(a/r)*r,f=Math.floor(u/(a/r))*r,h=e%4;return Fat(r,r,t,n,c,l,i,d,f,h,o)}function Zat(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const r=[];t.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(ife(s,t,!0))})}),Promise.all(r).then(()=>{sfe(t),t.sdfTexture.needsUpdate=!0})})}function Jat({font:t,characters:e,sdfGlyphSize:n},r){let i=Array.isArray(e)?e.join(`
`):""+e;rfe({font:t,sdfGlyphSize:n,text:i},r)}function Qat(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let vE;function elt(t){return vE||(vE=typeof document>"u"?{}:document.createElement("a")),vE.href=t,vE.href}function sfe(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:r,height:i}=e,s=t.sdfCanvas.getContext("webgl");let o=n.image.data;(!o||o.length!==r*i*4)&&(o=new Uint8Array(r*i*4),n.image={width:r,height:i,data:o},n.flipY=!1,n.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const tlt=S2({name:"Typesetter",dependencies:[yv,Yat,Oat,kat],init(t,e,n,r){const{defaultFontURL:i}=t;return n(e,r(),{defaultFontURL:i})}}),nlt=S2({name:"Typesetter",dependencies:[tlt],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}}),CZ={};function rlt(t){let e=CZ[t];if(!e){const n=new Kh(1,1,t,t),r=n.clone(),i=n.attributes,s=r.attributes,o=new Ln,a=i.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new Zt([...i[l].array,...s[l].array],i[l].itemSize))}),o.setIndex([...n.index.array,...r.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=CZ[t]=o}return e}const ilt="aTroikaGlyphBounds",TZ="aTroikaGlyphIndex",slt="aTroikaGlyphColor";class olt extends WR{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new bs,this.boundingBox=new xs}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const n=this.getIndex().count;this.setDrawRange(e===rs?n/2:0,e===Qa?n:n/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=rlt(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=n.attributes[r].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,r,i,s){BD(this,ilt,e,4),BD(this,TZ,n,1),BD(this,slt,s,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:r}=this;if(n){const{PI:i,floor:s,min:o,max:a,sin:l,cos:c}=Math,u=i/2,d=i*2,f=Math.abs(n),h=e[0]/f,p=e[2]/f,v=s((h+u)/d)!==s((p+u)/d)?-f:o(l(h)*f,l(p)*f),g=s((h-u)/d)!==s((p-u)/d)?f:a(l(h)*f,l(p)*f),m=s((h+i)/d)!==s((p+i)/d)?f*2:a(f-c(h)*f,f-c(p)*f);r.min.set(v,e[1],n<0?-m:0),r.max.set(g,e[3],n<0?0:m)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(TZ).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){n=r[i].end;let s=r[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=n}}function BD(t,e,n,r){const i=t.getAttribute(e);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(t.setAttribute(e,new ig(n,r)),delete t._maxInstanceCount,t.dispose()):i&&t.deleteAttribute(e)}const alt=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,llt=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,clt=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,ult=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function dlt(t){const e=bF(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new lt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new rr(0,0,0,0)},uTroikaClipRect:{value:new rr(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new lt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new zt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new On},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:alt,vertexTransform:llt,fragmentDefs:clt,fragmentColorTransform:ult,customRewriter({vertexShader:n,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(n)||(n=n.replace(tfe,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const e8=new mf({color:16777215,side:Qa,transparent:!0}),EZ=8421504,MZ=new _n,yE=new me,UD=new me,$1=[],flt=new me,zD="+x+y";function AZ(t){return Array.isArray(t)?t[0]:t}let ofe=()=>{const t=new ci(new Kh(1,1),e8);return ofe=()=>t,t},afe=()=>{const t=new ci(new Kh(1,1,32,1),e8);return afe=()=>t,t};const hlt={type:"syncstart"},plt={type:"synccomplete"},lfe=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],mlt=lfe.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let cfe=class extends ci{constructor(){const e=new olt;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=EZ,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=zD,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(hlt),rfe({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(plt),e&&e()})))}onBeforeRender(e,n,r,i,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=Ju}onAfterRender(e,n,r,i,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=e8.clone());if((!e||e.baseMaterial!==n)&&(e=this._derivedMaterial=dlt(n),n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return AZ(this.material).getDepthMaterial()}get customDistanceMaterial(){return AZ(this.material).getDistanceMaterial()}_prepareForRender(e){const n=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:a,blockBounds:l}=i;r.uTroikaSDFTexture.value=a,r.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!n&&!!i.glyphColors;let c=0,u=0,d=0,f,h,p,v=0,g=0;if(n){let{outlineWidth:y,outlineOffsetX:x,outlineOffsetY:S,outlineBlur:_,outlineOpacity:C}=this;c=this._parsePercent(y)||0,u=Math.max(0,this._parsePercent(_)||0),f=C,v=this._parsePercent(x)||0,g=this._parsePercent(S)||0}else d=Math.max(0,this._parsePercent(this.strokeWidth)||0),d&&(p=this.strokeColor,r.uTroikaStrokeColor.value.set(p??EZ),h=this.strokeOpacity,h==null&&(h=1)),f=this.fillOpacity;r.uTroikaDistanceOffset.value=c,r.uTroikaPositionOffset.value.set(v,g),r.uTroikaBlurRadius.value=u,r.uTroikaStrokeWidth.value=d,r.uTroikaStrokeOpacity.value=h,r.uTroikaFillOpacity.value=f??1,r.uTroikaCurveRadius.value=this.curveRadius||0;let m=this.clipRect;if(m&&Array.isArray(m)&&m.length===4)r.uTroikaClipRect.value.fromArray(m);else{const y=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-y,l[1]-y,l[2]+y,l[3]+y)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=n?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new zt;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||zD;if(o!==e._orientation){let a=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==zD&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,d,f]=l;yE.set(0,0,0)[u]=c==="-"?1:-1,UD.set(0,0,0)[f]=d==="-"?-1:1,MZ.lookAt(flt,yE.cross(UD),UD),a.setFromMatrix4(MZ)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),r=n?parseFloat(n[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new lt){n.copy(e);const r=this.curveRadius;return r&&(n.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),n}worldPositionToTextCoords(e,n=new lt){return yE.copy(e),this.localPositionToTextCoords(this.worldToLocal(yE),n)}raycast(e,n){const{textRenderInfo:r,curveRadius:i}=this;if(r){const s=r.blockBounds,o=i?afe():ofe(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let u=0;u<c.count;u++){let d=s[0]+c.getX(u)*(s[2]-s[0]);const f=s[1]+c.getY(u)*(s[3]-s[1]);let h=0;i&&(h=i-Math.cos(d/i)*i,d=Math.sin(d/i)*i),l.setXYZ(u,d,f,h)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,$1.length=0,o.raycast(e,$1);for(let u=0;u<$1.length;u++)$1[u].object=this,n.push($1[u])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,mlt.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}};lfe.forEach(t=>{const e="_private_"+t;Object.defineProperty(cfe.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});const VD=R.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:n="middle",font:r,fontSize:i=1,children:s,characters:o,onSync:a,...l},c)=>{const u=hs(({invalidate:p})=>p),[d]=R.useState(()=>new cfe),[f,h]=R.useMemo(()=>{const p=[];let v="";return R.Children.forEach(s,g=>{typeof g=="string"||typeof g=="number"?v+=g:p.push(g)}),[p,v]},[s]);return Ede(()=>new Promise(p=>Jat({font:r,characters:o},p)),["troika-text",r,o]),R.useLayoutEffect(()=>void d.sync(()=>{u(),a&&a(d)})),R.useEffect(()=>()=>d.dispose(),[d]),R.createElement("primitive",he({object:d,ref:c,font:r,text:h,anchorX:e,anchorY:n,fontSize:i,sdfGlyphSize:t},l),f)});function glt(t,e,n){const r=hs(f=>f.size),i=hs(f=>f.viewport),s=typeof t=="number"?t:r.width*i.dpr,o=typeof e=="number"?e:r.height*i.dpr,a=(typeof t=="number"?n:t)||{},{samples:l=0,depth:c,...u}=a,d=R.useMemo(()=>{const f=new ic(s,o,{minFilter:Mr,magFilter:Mr,type:Ao,...u});return c&&(f.depthTexture=new bR(s,o,Ps)),f.samples=l,f},[]);return R.useLayoutEffect(()=>{d.setSize(s,o),l&&(d.samples=l)},[l,d,s,o]),R.useEffect(()=>()=>d.dispose(),[]),d}const vlt=t=>typeof t=="function",jR=R.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:r,children:i,...s},o)=>{const a=hs(({set:g})=>g),l=hs(({camera:g})=>g),c=hs(({size:g})=>g),u=R.useRef(null),d=R.useRef(null),f=glt(e);R.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),R.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let h=0,p=null;const v=vlt(i);return Dg(g=>{v&&(n===1/0||h<n)&&(d.current.visible=!1,g.gl.setRenderTarget(f),p=g.scene.background,t&&(g.scene.background=t),g.gl.render(g.scene,u.current),g.scene.background=p,g.gl.setRenderTarget(null),d.current.visible=!0,h++)}),R.useLayoutEffect(()=>{if(r){const g=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:g}))}},[u,r,a]),R.createElement(R.Fragment,null,R.createElement("perspectiveCamera",he({ref:Jot([u,o])},s),!v&&i),R.createElement("group",{ref:d},v&&i(f.texture)))}),XR=R.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const d=hs(C=>C.invalidate),f=hs(C=>C.camera),h=hs(C=>C.gl),p=hs(C=>C.events),v=hs(C=>C.setEvents),g=hs(C=>C.set),m=hs(C=>C.get),y=hs(C=>C.performance),x=e||f,S=r||p.connected||h.domElement,_=R.useMemo(()=>new vat(x),[x]);return Dg(()=>{_.enabled&&_.update()},-1),R.useEffect(()=>(s&&_.connect(s===!0?S:s),_.connect(S),()=>void _.dispose()),[s,S,n,_,d]),R.useEffect(()=>{const C=M=>{d(),n&&y.regress(),o&&o(M)},T=M=>{a&&a(M)},A=M=>{l&&l(M)};return _.addEventListener("change",C),_.addEventListener("start",T),_.addEventListener("end",A),()=>{_.removeEventListener("start",T),_.removeEventListener("end",A),_.removeEventListener("change",C)}},[o,a,l,_,d,v]),R.useEffect(()=>{if(t){const C=m().controls;return g({controls:_}),()=>g({controls:C})}},[t,_]),R.createElement("primitive",he({ref:u,object:_,enableDamping:i},c))}),WD={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},ylt="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",kZ=t=>Array.isArray(t);function ufe({files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:n=void 0,encoding:r=void 0,extensions:i}={}){var s;let o=null,a=!1,l;if(n){if(!(n in WD))throw new Error("Preset must be one of: "+Object.keys(WD).join(", "));t=WD[n],e=ylt}if(a=kZ(t),l=kZ(t)?"cube":t.startsWith("data:application/exr")?"exr":t.startsWith("data:application/hdr")?"hdr":(s=t.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=a?ide:l==="hdr"?yat:l==="exr"?xat:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);const c=K6(o,a?[t]:t,h=>{h.setPath==null||h.setPath(e),i&&i(h)}),u=a?c[0]:c;u.mapping=a?Qu:my;const d=3001,f=3e3;return"colorSpace"in u?u.colorSpace=r??a?"srgb":"srgb-linear":u.encoding=r??a?d:f,u}const xlt=t=>t.current&&t.current.isScene,blt=t=>xlt(t)?t.current:t;function t8(t,e,n,r,i=0){const s=blt(e||n),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return t!=="only"&&(s.environment=r),t&&(s.background=r),t&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=i),()=>{t!=="only"&&(s.environment=a),t&&(s.background=o),t&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function n8({scene:t,background:e=!1,blur:n,map:r}){const i=hs(s=>s.scene);return R.useLayoutEffect(()=>{if(r)return t8(e,t,i,r,n)},[i,t,r,e,n]),null}function dfe({background:t=!1,scene:e,blur:n,...r}){const i=ufe(r),s=hs(o=>o.scene);return R.useLayoutEffect(()=>t8(t,e,s,i,n),[i,t,e,s,n]),null}function wlt({children:t,near:e=1,far:n=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,scene:l,files:c,path:u,preset:d=void 0,extensions:f}){const h=hs(x=>x.gl),p=hs(x=>x.scene),v=R.useRef(null),[g]=R.useState(()=>new Jw),m=R.useMemo(()=>{const x=new w6(r);return x.texture.type=Ao,x},[r]);R.useLayoutEffect(()=>(i===1&&v.current.update(h,g),t8(o,l,p,m.texture,a)),[t,g,m.texture,l,p,o,i,h]);let y=1;return Dg(()=>{(i===1/0||y<i)&&(v.current.update(h,g),y++)}),R.createElement(R.Fragment,null,Not(R.createElement(R.Fragment,null,t,R.createElement("cubeCamera",{ref:v,args:[e,n,m]}),c||d?R.createElement(dfe,{background:!0,files:c,preset:d,path:u,extensions:f}):s?R.createElement(n8,{background:!0,map:s,extensions:f}):null),g))}function Slt(t){var e,n,r,i;const s=ufe(t),o=t.map||s;R.useMemo(()=>Mde({GroundProjectedEnvImpl:hat}),[]);const a=R.useMemo(()=>[o],[o]),l=(e=t.ground)==null?void 0:e.height,c=(n=t.ground)==null?void 0:n.radius,u=(r=(i=t.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return R.createElement(R.Fragment,null,R.createElement(n8,he({},t,{map:o})),R.createElement("groundProjectedEnvImpl",{args:a,scale:u,height:l,radius:c}))}function qR(t){return t.ground?R.createElement(Slt,t):t.map?R.createElement(n8,t):t.children?R.createElement(wlt,t):R.createElement(dfe,t)}const _lt=t=>Math.PI/180*t,Clt=({follow:t})=>{const n=2.6666666666666665,r=28;var i=.005;const s=25e3,[o,a]=R.useState(0),[l,c]=R.useState(.01),[u,d]=R.useState(.02),[f,h]=R.useState(0),[p,v]=R.useState(10*(u-l)*i),[g,m]=R.useState((l*(r-f)-u)*i),[y,x]=R.useState((l*u-n*f)*i),[S,_]=R.useState(.01),[C,T]=R.useState(.05),[A,M]=R.useState(0),[E,P]=R.useState(10*(C-S)*i),[N,F]=R.useState((S*(r-A)-C)*i),[$,O]=R.useState((S*C-n*A)*i),[z,X]=R.useState([new me(l,u,f)]),[D,B]=R.useState([new me(S,C,A)]),[V,W]=R.useState([l,u,f]),[j,J]=R.useState([S,C,A]),[Q,te]=R.useState(l),[re,se]=R.useState(u),[fe,ae]=R.useState(f);return Dg(({clock:ye})=>{o<s&&(a(le=>le+1),v(10*(u-l)*i),m((l*(r-f)-u)*i),x((l*u-n*f)*i),P(10*(C-S)*i),F((S*(r-A)-C)*i),O((S*C-n*A)*i),c(le=>(t.ball1&&te(le-p),le+p)),d(le=>(t.ball1&&se(le-g),le+g)),h(le=>(t.ball1&&ae(le-y),le+y)),_(le=>(t.ball2&&te(le-E),le+E)),T(le=>(t.ball2&&se(le-N),le+N)),M(le=>(t.ball2&&ae(le-$),le+$)),X(le=>{const H=[...le];return H.push(new me(l,u,f)),H}),B(le=>{const H=[...le];return H.push(new me(S,C,A)),H}),W(le=>{const H=[...le];return H[0]=l,H[1]=u,H[2]=f,H}),J(le=>{const H=[...le];return H[0]=S,H[1]=C,H[2]=A,H}))}),L.jsxs(L.Fragment,{children:[L.jsx(jR,{makeDefault:!0,position:t.default?[0,25,125]:[Q,re+2,fe+10]}),L.jsxs("mesh",{position:V,castShadow:!0,children:[L.jsx("sphereGeometry",{args:[.25,32,32]}),L.jsx("meshStandardMaterial",{color:"#30a7d7"})]}),L.jsxs("mesh",{position:j,castShadow:!0,children:[L.jsx("sphereGeometry",{args:[.25,32,32]}),L.jsx("meshStandardMaterial",{color:"#e57373"})]}),L.jsx(pZ,{points:z,color:"#30a7d7",opacity:1,transparent:!0,lineWidth:2}),L.jsx(pZ,{points:D,color:"#e57373",opacity:1,transparent:!0,lineWidth:2}),L.jsx("ambientLight",{args:["#ffffff",.25]}),L.jsx("spotLight",{args:["#ffffff",2,70,_lt(45),.9],position:[-2,10,0],castShadow:!0}),L.jsx(qR,{background:!0,children:L.jsxs("mesh",{children:[L.jsx("sphereGeometry",{args:[50,100,100]}),L.jsx("meshBasicMaterial",{color:"#000000",side:rs})]})}),L.jsx(XR,{target:t.default?[0,0,0]:[Q,re,fe-2]})]})};function Tlt(){const[t,e]=R.useState({ball1:!1,ball2:!1,default:!0});return L.jsxs(L.Fragment,{children:[L.jsxs(Gn,{sx:{textAlign:"center",m:2},children:[L.jsx(un,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:"Use the mouse to zoom in/out and rotate."}),L.jsx(Is,{sx:{mt:2,mr:2,ml:2},variant:"contained",onClick:()=>{e(n=>{const r={...n};return r.ball1=!1,r.ball2=!1,r.default=!0,r})},children:"Default"}),L.jsx(Is,{sx:{mt:2,mr:2,ml:2},variant:"contained",onClick:()=>{e(n=>{const r={...n};return r.ball1=!0,r.ball2=!1,r.default=!1,r})},children:"Follow Ball 1"}),L.jsx(Is,{sx:{mt:2,mr:2,ml:2},variant:"contained",onClick:()=>{e(n=>{const r={...n};return r.ball1=!1,r.ball2=!0,r.default=!1,r})},children:"Follow Ball 2 "})]}),L.jsx(GR,{style:{height:"50vh",width:"100%"},shadows:!0,children:L.jsx(Clt,{follow:t})}),L.jsxs(un,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left",maxWidth:"555px"},children:["I created this  ",L.jsx(Xc,{href:"https://en.wikipedia.org/wiki/Lorenz_system",target:"_blank",underline:"hover",children:"Lorenz  System"}),"  visualization after watching ",L.jsx(Xc,{href:"https://youtu.be/fDek6cYijxI?si=IHO4v3pfxyJBv82F&t=282",target:"_blank",underline:"hover",children:"this cool video"})," by Derek Muller, Ph.D. You can oberve two objects with very proximate initial position.  After a few seconds, their trajectories are very different."]})]})}const Elt=t=>Math.PI/180*t;function Mlt(){var e=0,n=0;const r="#03a9f4",i="#FF0C0C",s="white",o="black",a="#efe436",l=r,c="#51ed15",u="#d715ed",d=R.useRef(),[f,h]=R.useState(!1),[p,v]=R.useState(-1),[g,m]=R.useState([]),[y,x]=R.useState([]),[S,_]=R.useState("Choose Starting Node"),[C,T]=R.useState(c),[A,M]=R.useState(!1),[E,P]=R.useState(!1),[N,F]=R.useState(!1);function $(xe,Se,be){this.f=0,this.g=Number.MAX_VALUE,this.h=0,this.prev=null,this.isBlocked=Math.random()<.25,this.isStart=!1,this.isEnd=!1,this.cameFrom=null,this.x=xe,this.y=Se,this.z=be,this.id=-1,this.color=this.isBlocked?o:s,this.isInOpenSet=!1,this.neighbors=[]}const O=[[0,-1],[0,1],[-1,0],[1,0],[1,1],[-1,-1],[-1,1],[1,-1]],[z,X]=R.useState(!0),[D,B]=R.useState(!1),[V,W]=R.useState(null),[j,J]=R.useState(null),[Q,te]=R.useState(null),[re,se]=R.useState(null),fe=[],[ae,ye]=R.useState(()=>{const xe=[];for(let be=0;be<40;be++){const Re=[];for(let Ke=0;Ke<40;Ke++){var Se=new $(be,Ke,0);Re.push(Se)}xe.push(Re)}return xe.forEach(be=>{be.forEach(Re=>{O.forEach(([Ke,ze])=>{const Ne=Re.x+Ke,De=Re.y+ze;Ne>=0&&De>=0&&Ne<=39&&De<=39&&(xe[Ne][De].isBlocked||Re.neighbors.push(xe[Ne][De]))})})}),xe}),le=(xe,Se)=>Math.sqrt((xe.x-Se.x)**2+(xe.y-Se.y)**2),H=()=>{g.forEach(Re=>{!Re.isStart&&!Re.isEnd&&(Re.color=r)}),y.forEach(Re=>{!Re.isStart&&!Re.isEnd&&(Re.color=i)});var xe=0;if(g.length>0){for(let Re=0;Re<g.length;Re++)g[Re].f<g[xe].f&&(xe=Re);var Se=g[xe];!Se.isStart&&!Se.isEnd&&(Se.color=l);for(let Re=g.length-1;Re>=0;Re--)g[Re]===Se&&g.splice(g.indexOf(g[Re]),1);var be=!0;m(Re=>{const Ke=[...Re];return Se.neighbors.forEach(ze=>{if(!y.includes(ze)){if(ze===j){j.prev=Se;for(var Ne=j,De=500;Ne.prev&&De>0;)!Ne.isEnd&&!Ne.isStart&&(Ne.color=a),fe.push([Ne.x,Ne.y,Ne.z]),Ne=Ne.prev,De=De-1;fe.push([V.x,V.y,V.z]),be=!1,P(!0),F(!1),_("Path Found!"),T(a)}be&&!ze.isBlocked&&!g.includes(ze)&&(ze.color=r,ze.g=Se.g+le(ze,Se),ze.f=ze.g+ze.h,ze.prev=Se,Ke.push(ze))}}),Ke}),x(Re=>{const Ke=[...Re];return Ke.push(Se),Ke})}else Q===re?(console.log("Start is end"),_("Start is End."),P(!0)):(console.log("NO solution.  Empty openset. "),_("No Path Possible."),T("red"),P(!0))},Me=xe=>{te(xe)},we=xe=>{se(xe)},Ee=(xe,Se)=>{xe!==Se&&(xe.g=0,xe.f=le(xe,Se),xe.isStart=!0,xe.isEnd=!1,xe.isBlocked=!1,Se.isStart=!1,Se.isEnd=!0,Se.isBlocked=!1,xe.color=c,Se.color=u,W(xe),J(Se),ae.forEach(be=>be.forEach(Re=>Re.h=le(Re,Se))),m(be=>{const Re=[...be];return Re.push(xe),Re}))},[ge,qe]=R.useState(null),[Ae,ee]=R.useState(.025),[Y,oe]=R.useState(!1);return Dg(({clock:xe})=>{Y&&(A&&(Ee(Q,re),M(!1),F(!0),qe(xe.elapsedTime+Ae)),xe.elapsedTime>ge&&(!E&&N&&H(),qe(xe.elapsedTime+Ae),E&&!N&&(oe(!1),ee(.0245))))}),L.jsxs(L.Fragment,{children:[L.jsx(VD,{color:C,fontSize:2,anchorX:"left",anchorY:"middle",position:[-2,42,0],children:S}),L.jsx(VD,{color:r,fontSize:2,anchorX:"left",anchorY:"middle",position:[40*.55,40+4.5,0],children:"Nodes in queue to be explored."}),L.jsx(VD,{color:i,fontSize:2,anchorX:"left",anchorY:"middle",position:[40*.55,42,0],children:"Nodes already explored."}),L.jsx(jR,{makeDefault:!0,position:[25,18,75]}),ae.map((xe,Se)=>(xe.id=n,n=n+1,L.jsx(R.Fragment,{children:xe.map((be,Re)=>(be.id=e,e=e+1,be.id%40,be.id%40,L.jsxs("mesh",{ref:d,scale:p===be.id&&f?1.5:1,onClick:Ke=>{z&&!ae[xe.id%40][be.id%40].isBlocked&&(be.color=c,ae[xe.id%40][be.id%40].isStart=!0,Me(ae[xe.id%40][be.id%40]),X(!1),_("Choose Ending Node"),T(u),B(!0),oe(!0)),D&&!ae[xe.id%40][be.id%40].isBlocked&&(be.color=u,we(ae[xe.id%40][be.id%40]),B(!1),M(!0)),p!=be.id?(v(be.id),h(!0)):h(!f)},position:[be.x,be.y,be.z],castShadow:!0,children:[L.jsx("sphereGeometry",{args:[.4,16,16]}),L.jsx("meshStandardMaterial",{color:be.color})]},Re)))},Se))),L.jsx("ambientLight",{args:["#ffffff",1.75]}),L.jsx("spotLight",{args:["#ffffff",1555,70,Elt(45),.9],position:[60,55,15],castShadow:!0}),L.jsx(qR,{background:!0,children:L.jsxs("mesh",{children:[L.jsx("sphereGeometry",{args:[50,100,100]}),L.jsx("meshBasicMaterial",{color:"#000000",side:rs})]})}),L.jsx(XR,{target:[25,18,0]})]})}function Alt(){const[t,e]=R.useState(GD==="chrome"||GD==="MS Edge Chromium");return L.jsx(L.Fragment,{children:t?L.jsxs(L.Fragment,{children:[L.jsxs(Gn,{sx:{textAlign:"center",m:2},children:[L.jsx(un,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:"Use the mouse to zoom in/out and rotate."}),L.jsxs(un,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:["This is a visualizaion of the ",L.jsx(Xc,{href:"https://en.wikipedia.org/wiki/A*_search_algorithm",target:"_blank",underline:"hover",children:"A* search algorithm"}),"."]})]}),L.jsx(GR,{style:{height:"90vh",width:"100%"},shadows:!0,children:L.jsx(Mlt,{})})]}):L.jsxs(un,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:["Please use Chrome Browswer or Microsoft Edge. ",GD," is not supported."]})})}var GD=function(t){switch(!0){case t.indexOf("edge")>-1:return"MS Edge (EdgeHtml)";case t.indexOf("edg")>-1:return"MS Edge Chromium";case(t.indexOf("opr")>-1&&!!window.opr):return"opera";case(t.indexOf("chrome")>-1&&!!window.chrome):return"chrome";case t.indexOf("trident")>-1:return"Internet Explorer";case t.indexOf("firefox")>-1:return"firefox";case t.indexOf("safari")>-1:return"safari";default:return"other"}}(window.navigator.userAgent.toLowerCase());const klt=t=>Math.PI/180*t,Ilt=({playing:t})=>{const r=5*Math.sqrt(3),[i,s]=R.useState(()=>[[0,0,0],[5,r,0],[10,0,0]]),[o,a]=R.useState(()=>{const f=Math.random()*10;var h=0;return f<5?h=Math.random()*(r/5*f):h=Math.random()*(-1*r/5*f+2*r),[[f,h,0]]}),l=()=>{const f=Math.floor(Math.random()*3),h=i[f];a(p=>{const v=[...p],g=v[v.length-1],m=[.5*(g[0]+h[0]),.5*(g[1]+h[1]),0];return v.push(m),v})},c=5e3,[u,d]=R.useState(0);return Dg(()=>{t&&u<c&&(l(),d(f=>f+1))}),L.jsxs(L.Fragment,{children:[L.jsx(jR,{makeDefault:!0,position:[5,5,15]}),o.map((f,h)=>L.jsxs("mesh",{onClick:l,position:f,children:[L.jsx("sphereGeometry",{args:[.015,16,16]}),L.jsx("meshBasicMaterial",{color:"#30a7d7"})]},h)),L.jsx("ambientLight",{args:["#ffffff",2.25]}),L.jsx("spotLight",{args:["#ffffff",2,70,klt(45),.9],position:[-2,10,0],castShadow:!0}),L.jsx(qR,{background:!0,children:L.jsxs("mesh",{children:[L.jsx("sphereGeometry",{args:[50,100,100]}),L.jsx("meshBasicMaterial",{color:"#000000",side:rs})]})}),L.jsx(XR,{target:[5,5,0]})]})};function Rlt(){const[t,e]=R.useState(!1);return L.jsxs(L.Fragment,{children:[L.jsxs(Gn,{sx:{textAlign:"center"},children:[L.jsx(un,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:"Use the mouse to zoom in/out and rotate."}),L.jsxs(un,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left"},children:["I made this after watching ",L.jsx(Xc,{href:"https://www.youtube.com/watch?v=IGlGvSXkRGI",target:"_blank",underline:"hover",children:"this video"}),"."]}),L.jsxs(un,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left"},children:["You can find more information here: ",L.jsx(Xc,{href:"https://en.wikipedia.org/wiki/Chaos_game",target:"_blank",underline:"hover",children:"Chaos Game"}),"."]}),L.jsx(Is,{sx:{mt:1},variant:"contained",onClick:()=>{e(!0)},children:"Start Animation"})]}),L.jsx(GR,{style:{height:"70vh",width:"100%"},shadows:!0,children:L.jsx(Ilt,{playing:t})})]})}const Plt=t=>Math.PI/180*t,Nlt=({playing:t})=>{const e=[.05,.1,.2,.15,.05,.1];function n(y,x,S){this.x=y,this.y=x,this.z=S,this.color=Math.random()<.9?"#30a7d7":"#e57373",this.size=e[Math.floor(Math.random()*e.length)]}const r=295,i=.5,s=(y,x,S,_,C)=>new n(i*(Math.cos(y+x)*Math.exp(y))+S,i*Math.sin(y+x)*Math.exp(y)+_,C),[o,a]=R.useState(()=>{const y=[],S=Math.PI/8;for(let A=0;A<r;A++){const M=A,E=.025*M;var _=5*Math.random(),C=5*Math.random(),T=5*Math.random();for(let P=0;P<2*8+1;P++)M<115?Math.random()<.1&&y.push(s(E,P*S,_,C,T)):M<150||M<200?Math.random()<.9&&y.push(s(E,P*S,_,C,T)):y.push(s(E,P*S,_,C,T))}return y}),l=y=>{a(x=>{const S=[...x];return S.forEach(_=>{_.x=_.x*Math.cos(y)-_.y*Math.sin(y),_.y=_.x*Math.sin(y)+_.y*Math.cos(y)}),S})},c=2e3,[u,d]=R.useState(0),[f,h]=R.useState(null),[p,v]=R.useState(.02),[g,m]=R.useState(!0);return Dg(({clock:y})=>{t&&u<c&&(y.elapsedTime>f&&!g&&(l(-5e-4),d(x=>x+1),h(y.elapsedTime+p)),g&&(h(y.elapsedTime+p),m(!1)))}),L.jsxs(L.Fragment,{children:[L.jsx(jR,{makeDefault:!0,position:[-15,40,59]}),o.map((y,x)=>L.jsxs("mesh",{position:[y.x,y.z,-1*y.y],children:[L.jsx("sphereGeometry",{args:[y.size,16,16]}),L.jsx("meshBasicMaterial",{color:y.color})]},x)),L.jsx("ambientLight",{args:["#ffffff",.25]}),L.jsx("spotLight",{args:["#ffffff",2,70,Plt(45),.9],position:[-2,10,0],castShadow:!0}),L.jsx(qR,{background:!0,children:L.jsxs("mesh",{children:[L.jsx("sphereGeometry",{args:[50,100,100]}),L.jsx("meshBasicMaterial",{color:"#000000",side:rs})]})}),L.jsx(XR,{target:[5,0,0]})]})};function $lt(){const[t,e]=R.useState(!1);return L.jsxs(L.Fragment,{children:[L.jsxs(Gn,{sx:{textAlign:"center",m:2},children:[L.jsx(un,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:"Use the mouse to zoom in/out and rotate."}),L.jsx(Is,{sx:{m:2},variant:"contained",onClick:()=>{e(!0)},children:"Start Animation"})]}),L.jsx(GR,{style:{height:"70vh",width:"100%"},shadows:!0,children:L.jsx(Nlt,{playing:t})})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dlt=1e-7,Llt=1e-4;class ffe{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class r8{refCount(e){return fa("refCount")}incRef(e){return fa("incRef")}timerAvailable(){return!0}time(e){return fa("time")}read(e){return fa("read")}readSync(e){return fa("readSync")}readToGPU(e,n){return fa("readToGPU")}numDataIds(){return fa("numDataIds")}disposeData(e,n){return fa("disposeData")}write(e,n,r){return fa("write")}move(e,n,r,i,s){return fa("move")}createTensorFromGPUData(e,n,r){return fa("createTensorFromGPUData")}memory(){return fa("memory")}floatPrecision(){return fa("floatPrecision")}epsilon(){return this.floatPrecision()===32?Dlt:Llt}dispose(){return fa("dispose")}}function fa(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Olt(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Y0(t,e,n)}function og(t,e,n){return Math.max(t,Math.min(e,n))}function i8(t){return t%2===0?t:t+1}function Y0(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Flt(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function ue(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function s8(t,e,n=""){ue(wr(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function o8(t){ue(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function it(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function wr(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function by(t){return t%1===0}function SF(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Wv(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function IZ(t,e=i=>0,n,r){return new Promise((i,s)=>{let o=0;const a=()=>{if(t()){i();return}o++;const l=e(o);if(n!=null&&o>=n){s();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function hfe(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function qn(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),ue(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),ue(t.every(r=>by(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Qh(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||i?null:qn(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(s!=null){if(s[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(s[o]==null||s[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),s[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function eo(t,e){return ki(t,e)}function ki(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Blt(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function Ult(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function pfe(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function BA(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function zlt(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function _2(t){return typeof t=="string"||t instanceof String}function Vlt(t){return typeof t=="boolean"}function _F(t){return typeof t=="number"}function ux(t){return Array.isArray(t)?ux(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":_F(t)?"float32":_2(t)?"string":Vlt(t)?"bool":"float32"}function CF(t){return!!(t&&t.constructor&&t.call&&t.apply)}function TF(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function on(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function mfe(t,e,n,r=!1){const i=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let o=0;o<s;o++)i[o]=n[t+o]}else{const s=e[0],o=e.slice(1),a=o.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<s;l++)i[l]=mfe(t+l*a,o,n,r)}return i}function Vc(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,s)=>i*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return mfe(0,t,e,n)}function Wlt(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function a8(t,e){const n=to(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function to(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function gfe(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return Vc(t,new Float32Array(n));if(e==="int32")return Vc(t,new Int32Array(n));if(e==="bool")return Vc(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function gf(t){t.forEach(e=>{ue(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function Vu(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function dx(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function l8(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RZ="tfjsflags";class Glt{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Hlt,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(l8(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);RZ in e&&e[RZ].split(",").forEach(r=>{const[i,s]=r.split(":");this.urlFlags[i]=Xlt(i,s)})}}function Hlt(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(jlt(e,r[0],r[1]),r.join("="))),e}function jlt(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Xlt(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function Qe(){return vfe}let vfe=null;function qlt(t){vfe=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let HD;function yfe(){if(HD==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");HD=t}return HD}function Ylt(){const t=yfe();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function c8(t,e){const n=Ylt();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const YR="Abs",C2="Acos",T2="Acosh",fx="Add",u8="AddN",d8="All",f8="Any",KR="ArgMax",ZR="ArgMin",E2="Asin",M2="Asinh",A2="Atan",k2="Atanh",I2="Atan2",JR="AvgPool",h8="AvgPoolGrad",QR="AvgPool3D",p8="AvgPool3DGrad",e3="BatchMatMul",t3="BatchToSpaceND",m8="Bincount",g8="BitwiseAnd",Klt="BroadcastTo",xfe="BroadcastArgs",R2="Cast",P2="Ceil",N2="ClipByValue",v8="Complex",n3="ComplexAbs",r3="Concat",i3="Conv2D",y8="Conv2DBackpropFilter",s3="Conv2DBackpropInput",o3="Conv3D",x8="Conv3DBackpropFilterV2",b8="Conv3DBackpropInputV2",$2="Cos",D2="Cosh",w8="Cumprod",a3="Cumsum",S8="CropAndResize",_8="DenseBincount",C8="DepthToSpace",l3="DepthwiseConv2dNative",T8="DepthwiseConv2dNativeBackpropFilter",E8="DepthwiseConv2dNativeBackpropInput",bfe="Diag",c3="Dilation2D",EF="Dilation2DBackpropInput",MF="Dilation2DBackpropFilter",Zlt="Draw",L2="RealDiv",M8="Einsum",O2="Elu",A8="EluGrad",F2="Erf",u3="Equal",B2="Exp",d3="ExpandDims",U2="Expm1",k8="FFT",I8="Fill",R8="FlipLeftRight",z2="Floor",V2="FloorDiv",f3="FusedBatchNorm",h3="GatherV2",wfe="GatherNd",p3="Greater",W2="GreaterEqual",G2="Identity",P8="IFFT",N8="Imag",H2="IsFinite",j2="IsInf",X2="IsNan",m3="LeakyRelu",g3="Less",v3="LessEqual",Sfe="LinSpace",q2="Log",Y2="Log1p",y3="LogicalAnd",x3="LogicalNot",b3="LogicalOr",Jlt="LogSoftmax",w3="LRN",$8="LRNGrad",S3="Max",K2="Maximum",_3="MaxPool",D8="MaxPoolGrad",C3="MaxPool3D",L8="MaxPool3DGrad",_fe="MaxPoolWithArgmax",T3="Mean",E3="Min",Z2="Minimum",M3="MirrorPad",J2="Mod",Cfe="Multinomial",Q2="Multiply",A3="Neg",k3="NotEqual",O8="NonMaxSuppressionV3",F8="NonMaxSuppressionV4",B8="NonMaxSuppressionV5",I3="OnesLike",R3="OneHot",P3="Pack",N3="PadV2",e_="Pow",$3="Prelu",D3="Prod",Tfe="RaggedGather",Efe="RaggedRange",Mfe="RaggedTensorToTensor",U8="Range",z8="Real",t_="Reciprocal",n_="Relu",L3="Reshape",O3="ResizeNearestNeighbor",V8="ResizeNearestNeighborGrad",F3="ResizeBilinear",W8="ResizeBilinearGrad",r_="Relu6",B3="Reverse",i_="Round",s_="Rsqrt",Afe="ScatterNd",kfe="TensorScatterUpdate",Ife="SearchSorted",U3="Select",o_="Selu",z3="Slice",a_="Sin",l_="Sinh",c_="Sign",u_="Sigmoid",d_="Softplus",f_="Sqrt",V3="Sum",W3="SpaceToBatchND",G3="SplitV",H3="Softmax",Rfe="SparseFillEmptyRows",Pfe="SparseReshape",Nfe="SparseSegmentMean",$fe="SparseSegmentSum",Dfe="SparseToDense",h_="SquaredDifference",G8="Square",H8="StaticRegexReplace",j8="StridedSlice",Lfe="StringNGrams",Ofe="StringSplit",Ffe="StringToHashBucketFast",p_="Sub",m_="Tan",g_="Tanh",v_="Tile",X8="TopK",q8="Transform",Gv="Transpose",Y8="Unique",j3="Unpack",X3="UnsortedSegmentSum",q3="ZerosLike",y_="Step",Qlt="FromPixels",K8="RotateWithOffset",UA="_FusedMatMul",zA="FusedConv2D",Bfe="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tl(...t){Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.warn(...t)}function ect(...t){Qe().getBool("IS_TEST")||Qe().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VA=c8("kernelRegistry",()=>new Map),AF=c8("gradRegistry",()=>new Map);function PZ(t,e){const n=zfe(t,e);return VA.get(n)}function NZ(t){return AF.get(t)}function $Z(t){const e=VA.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,o]=i,[a]=s.split("_");a===t&&n.push(o)}return n}function Ufe(t){const{kernelName:e,backendName:n}=t,r=zfe(e,n);VA.has(r)&&tl(`The kernel '${e}' for backend '${n}' is already registered`),VA.set(r,t)}function tct(t){const{kernelName:e}=t;AF.has(e)&&Qe().getBool("DEBUG")&&tl(`Overriding the gradient for '${e}'`),AF.set(e,t)}function zfe(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vfe(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Wfe=Kr,Wl=null;try{Wl=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Kr(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Kr.prototype.__isLong__;Object.defineProperty(Kr.prototype,"__isLong__",{value:!0});function Oa(t){return(t&&t.__isLong__)===!0}Kr.isLong=Oa;var DZ={},LZ={};function Lg(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=LZ[t],r)?r:(n=Zr(t,(t|0)<0?-1:0,!0),i&&(LZ[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=DZ[t],r)?r:(n=Zr(t,t<0?-1:0,!1),i&&(DZ[t]=n),n))}Kr.fromInt=Lg;function Gl(t,e){if(isNaN(t))return e?ym:Hl;if(e){if(t<0)return ym;if(t>=Gfe)return Xfe}else{if(t<=-FZ)return _a;if(t+1>=FZ)return jfe}return t<0?Gl(-t,e).neg():Zr(t%wy|0,t/wy|0,e)}Kr.fromNumber=Gl;function Zr(t,e,n){return new Kr(t,e,n)}Kr.fromBits=Zr;var WA=Math.pow;function Z8(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Hl;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Z8(t.substring(1),e,n).neg();for(var i=Gl(WA(n,8)),s=Hl,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var c=Gl(WA(n,a));s=s.mul(c).add(Gl(l))}else s=s.mul(i),s=s.add(Gl(l))}return s.unsigned=e,s}Kr.fromString=Z8;function nu(t,e){return typeof t=="number"?Gl(t,e):typeof t=="string"?Z8(t,e):Zr(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Kr.fromValue=nu;var OZ=65536,nct=1<<24,wy=OZ*OZ,Gfe=wy*wy,FZ=Gfe/2,BZ=Lg(nct),Hl=Lg(0);Kr.ZERO=Hl;var ym=Lg(0,!0);Kr.UZERO=ym;var xv=Lg(1);Kr.ONE=xv;var Hfe=Lg(1,!0);Kr.UONE=Hfe;var kF=Lg(-1);Kr.NEG_ONE=kF;var jfe=Zr(-1,2147483647,!1);Kr.MAX_VALUE=jfe;var Xfe=Zr(-1,-1,!0);Kr.MAX_UNSIGNED_VALUE=Xfe;var _a=Zr(0,-2147483648,!1);Kr.MIN_VALUE=_a;var Rt=Kr.prototype;Rt.toInt=function(){return this.unsigned?this.low>>>0:this.low};Rt.toNumber=function(){return this.unsigned?(this.high>>>0)*wy+(this.low>>>0):this.high*wy+(this.low>>>0)};Rt.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(_a)){var n=Gl(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=Gl(WA(e,6),this.unsigned),o=this,a="";;){var l=o.div(s),c=o.sub(l.mul(s)).toInt()>>>0,u=c.toString(e);if(o=l,o.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};Rt.getHighBits=function(){return this.high};Rt.getHighBitsUnsigned=function(){return this.high>>>0};Rt.getLowBits=function(){return this.low};Rt.getLowBitsUnsigned=function(){return this.low>>>0};Rt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_a)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Rt.isZero=function(){return this.high===0&&this.low===0};Rt.eqz=Rt.isZero;Rt.isNegative=function(){return!this.unsigned&&this.high<0};Rt.isPositive=function(){return this.unsigned||this.high>=0};Rt.isOdd=function(){return(this.low&1)===1};Rt.isEven=function(){return(this.low&1)===0};Rt.equals=function(e){return Oa(e)||(e=nu(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Rt.eq=Rt.equals;Rt.notEquals=function(e){return!this.eq(e)};Rt.neq=Rt.notEquals;Rt.ne=Rt.notEquals;Rt.lessThan=function(e){return this.comp(e)<0};Rt.lt=Rt.lessThan;Rt.lessThanOrEqual=function(e){return this.comp(e)<=0};Rt.lte=Rt.lessThanOrEqual;Rt.le=Rt.lessThanOrEqual;Rt.greaterThan=function(e){return this.comp(e)>0};Rt.gt=Rt.greaterThan;Rt.greaterThanOrEqual=function(e){return this.comp(e)>=0};Rt.gte=Rt.greaterThanOrEqual;Rt.ge=Rt.greaterThanOrEqual;Rt.compare=function(e){if(Oa(e)||(e=nu(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Rt.comp=Rt.compare;Rt.negate=function(){return!this.unsigned&&this.eq(_a)?_a:this.not().add(xv)};Rt.neg=Rt.negate;Rt.add=function(e){Oa(e)||(e=nu(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,f=0,h=0;return h+=s+c,f+=h>>>16,h&=65535,f+=i+l,d+=f>>>16,f&=65535,d+=r+a,u+=d>>>16,d&=65535,u+=n+o,u&=65535,Zr(f<<16|h,u<<16|d,this.unsigned)};Rt.subtract=function(e){return Oa(e)||(e=nu(e)),this.add(e.neg())};Rt.sub=Rt.subtract;Rt.multiply=function(e){if(this.isZero())return Hl;if(Oa(e)||(e=nu(e)),Wl){var n=Wl.mul(this.low,this.high,e.low,e.high);return Zr(n,Wl.get_high(),this.unsigned)}if(e.isZero())return Hl;if(this.eq(_a))return e.isOdd()?_a:Hl;if(e.eq(_a))return this.isOdd()?_a:Hl;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(BZ)&&e.lt(BZ))return Gl(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,s=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,f=0,h=0,p=0;return p+=o*u,h+=p>>>16,p&=65535,h+=s*u,f+=h>>>16,h&=65535,h+=o*c,f+=h>>>16,h&=65535,f+=i*u,d+=f>>>16,f&=65535,f+=s*c,d+=f>>>16,f&=65535,f+=o*l,d+=f>>>16,f&=65535,d+=r*u+i*c+s*l+o*a,d&=65535,Zr(h<<16|p,d<<16|f,this.unsigned)};Rt.mul=Rt.multiply;Rt.divide=function(e){if(Oa(e)||(e=nu(e)),e.isZero())throw Error("division by zero");if(Wl){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Wl.div_u:Wl.div_s)(this.low,this.high,e.low,e.high);return Zr(n,Wl.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ym:Hl;var r,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return ym;if(e.gt(this.shru(1)))return Hfe;s=ym}else{if(this.eq(_a)){if(e.eq(xv)||e.eq(kF))return _a;if(e.eq(_a))return xv;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Hl)?e.isNegative()?xv:kF:(i=this.sub(e.mul(r)),s=r.add(i.div(e)),s)}else if(e.eq(_a))return this.unsigned?ym:Hl;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=Hl}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:WA(2,a-48),c=Gl(r),u=c.mul(e);u.isNegative()||u.gt(i);)r-=l,c=Gl(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=xv),s=s.add(c),i=i.sub(u)}return s};Rt.div=Rt.divide;Rt.modulo=function(e){if(Oa(e)||(e=nu(e)),Wl){var n=(this.unsigned?Wl.rem_u:Wl.rem_s)(this.low,this.high,e.low,e.high);return Zr(n,Wl.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Rt.mod=Rt.modulo;Rt.rem=Rt.modulo;Rt.not=function(){return Zr(~this.low,~this.high,this.unsigned)};Rt.and=function(e){return Oa(e)||(e=nu(e)),Zr(this.low&e.low,this.high&e.high,this.unsigned)};Rt.or=function(e){return Oa(e)||(e=nu(e)),Zr(this.low|e.low,this.high|e.high,this.unsigned)};Rt.xor=function(e){return Oa(e)||(e=nu(e)),Zr(this.low^e.low,this.high^e.high,this.unsigned)};Rt.shiftLeft=function(e){return Oa(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Zr(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Zr(0,this.low<<e-32,this.unsigned)};Rt.shl=Rt.shiftLeft;Rt.shiftRight=function(e){return Oa(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Zr(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Zr(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Rt.shr=Rt.shiftRight;Rt.shiftRightUnsigned=function(e){if(Oa(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Zr(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Zr(n,0,this.unsigned):Zr(n>>>e-32,0,this.unsigned)};Rt.shru=Rt.shiftRightUnsigned;Rt.shr_u=Rt.shiftRightUnsigned;Rt.toSigned=function(){return this.unsigned?Zr(this.low,this.high,!1):this};Rt.toUnsigned=function(){return this.unsigned?this:Zr(this.low,this.high,!0)};Rt.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Rt.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Rt.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Kr.fromBytes=function(e,n,r){return r?Kr.fromBytesLE(e,n):Kr.fromBytesBE(e,n)};Kr.fromBytesLE=function(e,n){return new Kr(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Kr.fromBytesBE=function(e,n){return new Kr(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const qfe=ls(Wfe),rct=Dee({__proto__:null,default:qfe},[Wfe]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nm=qfe||rct;function Y3(t){return nm.fromString(t,!0,16)}const Yfe=Y3("c3a5c85c97cb3127"),Jp=Y3("b492b66fbe98f273"),Co=Y3("9ae16a3b2f90404f");function IF(t){return t.xor(t.shru(47))}function Kfe(t,e,n){const r=t.slice(e,e+n);return nm.fromBytes(Array.from(r),!0,!0)}function Br(t,e){return Kfe(t,e,8)}function UZ(t,e){return Kfe(t,e,4)}function ms(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function vh(t,e,n=Y3("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function ict(t,e,n,r,i,s){i=i.add(t),s=ms(s.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(n),s=s.add(ms(i,44)),[i.add(r),s.add(o)]}function xE(t,e,n,r){return ict(Br(t,e),Br(t,e+8),Br(t,e+16),Br(t,e+24),n,r)}function sct(t,e=t.length){if(e>=8){const n=Co.add(e*2),r=Br(t,0).add(Co),i=Br(t,e-8),s=ms(i,37).mul(n).add(r),o=ms(r,25).add(i).mul(n);return vh(s,o,n)}if(e>=4){const n=Co.add(e*2),r=UZ(t,0);return vh(r.shl(3).add(e),UZ(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],s=n+(r<<8),o=e+(i<<2);return IF(Co.mul(s).xor(Yfe.mul(o))).mul(Co)}return Co}function oct(t,e=t.length){const n=Co.add(e*2),r=Br(t,0).mul(Jp),i=Br(t,8),s=Br(t,e-8).mul(n),o=Br(t,e-16).mul(Co);return vh(ms(r.add(i),43).add(ms(s,30)).add(o),r.add(ms(i.add(Co),18)).add(s),n)}function act(t,e=t.length){const n=Co.add(e*2),r=Br(t,0).mul(Co),i=Br(t,8),s=Br(t,e-8).mul(n),o=Br(t,e-16).mul(Co),a=ms(r.add(i),43).add(ms(s,30)).add(o),l=vh(a,r.add(ms(i.add(Co),18)).add(s),n),c=Br(t,16).mul(n),u=Br(t,24),d=a.add(Br(t,e-32)).mul(n),f=l.add(Br(t,e-24)).mul(n);return vh(ms(c.add(u),43).add(ms(d,30)).add(f),c.add(ms(u.add(r),18)).add(d),n)}function lct(t,e=t.length){const n=nm.fromNumber(81,!0);if(e<=32)return e<=16?sct(t,e):oct(t,e);if(e<=64)return act(t,e);let r=n,i=n.mul(Jp).add(113),s=IF(i.mul(Co).add(113)).mul(Co),o=[nm.UZERO,nm.UZERO],a=[nm.UZERO,nm.UZERO];r=r.mul(Co).add(Br(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=ms(r.add(i).add(o[0]).add(Br(t,l+8)),37).mul(Jp),i=ms(i.add(o[1]).add(Br(t,l+48)),42).mul(Jp),r=r.xor(a[1]),i=i.add(o[0]).add(Br(t,l+40)),s=ms(s.add(a[0]),33).mul(Jp),o=xE(t,l,o[1].mul(Jp),r.add(a[0])),a=xE(t,l+32,s.add(a[1]),i.add(Br(t,l+16))),[s,r]=[r,s],l+=64;while(l!==c);const d=Jp.add(s.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=ms(r.add(i).add(o[0]).add(Br(t,l+8)),37).mul(d),i=ms(i.add(o[1]).add(Br(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),i=i.add(o[0].mul(9).add(Br(t,l+40))),s=ms(s.add(a[0]),33).mul(d),o=xE(t,l,o[1].mul(d),r.add(a[0])),a=xE(t,l+32,s.add(a[1]),i.add(Br(t,l+16))),[s,r]=[r,s],vh(vh(o[0],a[0],d).add(IF(i).mul(Yfe)).add(s),vh(o[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ep(t,e){return e==="string"?yh(t):Og([t],e)}function cct(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Og(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ag(t)),Qe().getBool("DEBUG")&&Blt(t,e),cct(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function jo(){return Qe().platform.now()}function yh(t,e="utf-8"){return e=e||"utf-8",Qe().platform.encode(t,e)}function Ph(t,e="utf-8"){return e=e||"utf-8",Qe().platform.decode(t,e)}function oc(t){return Qe().platform.isTypedArray!=null?Qe().platform.isTypedArray(t):Vfe(t)}function ag(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||l8(t)||t==null||oc(t)&&n)e.push(t);else if(Array.isArray(t)||oc(t))for(let r=0;r<t.length;++r)ag(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)ag(t[i],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uct{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new fct)}profileKernel(e,n,r){let i;const s=()=>{i=r()};let o;const a=jo();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(s);else{s();for(const c of i)c.dataSync();o=Promise.resolve({kernelMs:jo()-a})}if(Qe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){const u=i[c];u.data().then(d=>{dct(d,u.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:s,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),i,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],s,l[2])})})}}function dct(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class fct{logKernelProfile(e,n,r,i,s,o){const a=typeof i=="number"?Wv(`${i}ms`,9):i.error,l=Wv(e,25),c=n.rank,u=n.size,d=Wv(n.shape.toString(),14);let f="";for(const h in s){const p=s[h];if(p!=null){const v=p.shape||n.shape,g=v.length;f+=`${h}: ${g}D ${g>0?v:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${f}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hct(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const f=u[d];let h=!1;for(let p=0;p<e.length;p++)if(r[f.id]){c.outputs.forEach(v=>r[v.id]=!0),h=!0,i[c.id]=!0;break}if(h)break}}const s={};s[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(const f in u)s[u[f].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(i[c.id]&&o[c.id]){const u={};for(const f in c.inputs){const h=c.inputs[f];r[h.id]&&(u[f]=h)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function pct(t,e,n,r){for(let i=e.length-1;i>=0;i--){const s=e[i],o=[];if(s.outputs.forEach(l=>{const c=t[l.id];c!=null?o.push(c):o.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(o);for(const l in s.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=s.inputs[l];if(!wr(c.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zZ=20,D1=3,jD=7;function mct(t,e,n,r){const i=on(e),s=gct(t,e,n,i),o=e.length,a=gM(t,e,n,i,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function gct(t,e,n,r){const i=it(e),s=r[r.length-1],o=new Array(s).fill(0),a=e.length,l=n==="complex64"?q1(t):t;if(a>1)for(let c=0;c<i/s;c++){const u=c*s;for(let d=0;d<s;d++)o[d]=Math.max(o[d],X1(l[u+d],0,n).length)}return o}function X1(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(jD))} + ${parseFloat(t[1].toFixed(jD))}j`:_2(t)?r=`'${t}'`:n==="bool"?r=Zfe(t):r=parseFloat(t.toFixed(jD)).toString(),Wv(r,e)}function Zfe(t){return t===0?"false":"true"}function gM(t,e,n,r,i,s=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const v=q1(t);return[X1(v[0],0,n)]}return n==="bool"?[Zfe(t[0])]:[t[0].toString()]}if(l===1){if(a>zZ){const g=D1*o;let m=Array.from(t.slice(0,g)),y=Array.from(t.slice((a-D1)*o,a*o));return n==="complex64"&&(m=q1(m),y=q1(y)),["["+m.map((x,S)=>X1(x,i[S],n)).join(", ")+", ..., "+y.map((x,S)=>X1(x,i[a-D1+S],n)).join(", ")+"]"]}return["["+(n==="complex64"?q1(t):Array.from(t)).map((g,m)=>X1(g,i[m],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*o,f=[];if(a>zZ){for(let v=0;v<D1;v++){const g=v*d,m=g+d;f.push(...gM(t.slice(g,m),c,n,u,i,!1))}f.push("...");for(let v=a-D1;v<a;v++){const g=v*d,m=g+d;f.push(...gM(t.slice(g,m),c,n,u,i,v===a-1))}}else for(let v=0;v<a;v++){const g=v*d,m=g+d;f.push(...gM(t.slice(g,m),c,n,u,i,v===a-1))}const h=l===2?",":"";f[0]="["+(a>0?f[0]+h:"");for(let v=1;v<f.length-1;v++)f[v]=" "+f[v]+h;let p=`,
`;for(let v=2;v<l;v++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(s?"":p),f}function q1(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ds{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=it(e),r!=null){const i=r.length;ue(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||ki(n,this.size),this.strides=on(e)}set(e,...n){n.length===0&&(n=[0]),ue(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Ic().makeTensor(this.values,this.shape,this.dtype)}}let Ic=null,K0=null;function vct(t){Ic=t}function yct(t){K0=t}class Qi{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=it(e),this.strides=on(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return K0.buffer(this.shape,this.dtype,e)}bufferSync(){return K0.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Vc(this.shape,e,this.dtype==="complex64")}arraySync(){return Vc(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Ic().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Ph(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Ic().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Ic().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Ph(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Ic().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ic().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return K0.print(this,e)}clone(){return this.throwIfDisposed(),K0.clone(this)}toString(e=!1){const n=this.dataSync();return mct(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),K0.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Ic().makeVariable(this,e,n,r)}}Object.defineProperty(Qi,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function rt(){return c8("Tensor",()=>Qi)}rt();class GA extends Qi{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!wr(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Ic().disposeTensor(this),this.dataId=e.dataId,Ic().incRef(this,null)}dispose(){Ic().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(GA,Symbol.hasInstance,{value:t=>t instanceof Qi&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var VZ;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(VZ||(VZ={}));var RF;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(RF||(RF={}));var PF;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(PF||(PF={}));var NF;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(NF||(NF={}));var $F;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})($F||($F={}));const xct={float32:NF,int32:RF,bool:PF,complex64:$F};function Pa(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return xct[t][e]}function J8(t){return Pa(t,"int32")}function Jfe(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function Qfe(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pi(t,e){if(t.dtype===e.dtype)return[t,e];const n=Pa(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function ehe(t){const e=[];return the(t,e,new Set),e}function the(t,e,n){if(t==null)return;if(t instanceof Qi){e.push(t);return}if(!bct(t))return;const r=t;for(const i in r){const s=r[i];n.has(s)||(n.add(s),the(s,e,n))}}function bct(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XD(t){return t.kernelName!=null}class WZ{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Sy{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new WZ}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(tl(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new uct(this.backendInstance),!0}setupRegisteredKernels(){$Z(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){$Z(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof r8)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,s=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,tl(`Initialization of backend ${e} failed`),tl(o.stack||o.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return tl(`Initialization of backend ${e} failed`),tl(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:s}=this.initializeBackend(r);if(s||i)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,s=this.readSync(n),o=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return Sy.nextTensorId++}nextVariableId(){return Sy.nextVariableId++}clone(e){const n=Fe.runKernel(G2,{x:e}),r={x:e},i=o=>({x:()=>{const a="float32",l={x:o},c={dtype:a};return Fe.runKernel(R2,l,c)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(PZ(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-n-s-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),s=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=XD(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(XD(e)){const{kernelName:p,inputs:v,attrs:g}=e;this.backendName==null&&this.backend;const m=PZ(p,this.backendName);ue(m!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const y=this.backend.numDataIds();l=m.kernelFunc({inputs:v,attrs:g,backend:this.backend});const x=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,y,x);const S=x.map(_=>_.rank!=null?_:this.makeTensorFromTensorInfo(_));if(i){const _=this.getTensorsForGradient(p,v,S);r=this.saveTensorsForBackwardMode(_)}return S}}else{const{forwardFunc:p}=e,v=g=>{i&&(r=g.map(m=>this.keep(this.clone(m))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,v));const m=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,g,m),m}}const{inputs:u,attrs:d}=e,f=XD(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),i&&this.addTapeNode(c,u,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(p=>u[p]!=null?u[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=NZ(e);if(i!=null){const s=i.inputsToSave||[],o=i.outputsToSave||[];let a;i.saveAllInputs?(ue(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=s.map(c=>n[c]);const l=r.filter((c,u)=>o[u]);return a.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let s=e;r==="string"&&_2(e[0])&&(s=e.map(l=>yh(l)));const o=i.write(s,n,r),a=new Qi(n,r,o,this.nextTensorId());if(this.trackTensor(a,i),r==="string"){const l=this.state.tensorInfo.get(o),c=zlt(s);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,i){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:s}=e,o=new Qi(i,s,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const s=new GA(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*BA(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof GA||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*BA(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,s,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=NZ(e);l!=null&&(i=l.gradFunc),i!=null&&(a.gradient=c=>(c=c.map((u,d)=>{if(u==null){const f=r[d],h=to(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return u}),i(c.length>1?c:c[0],s,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=ehe(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const o=this.state.activeScope.track[s];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(e,n,r,i=!1){if(ue(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));ue(s instanceof Qi,()=>"The result y returned by f() must be a tensor.");const o=hct(this.state.activeTape,n,s);if(!i&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[s.id]=r??wct(s.shape),pct(a,o,c=>this.tidy(c),Sct);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return ue(CF(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{ue(n.every(a=>a instanceof Qi),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((a,l)=>{i[l]=a});const s=(a,l)=>(r=e(...n,l),ue(r.value instanceof Qi,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),ue(CF(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];ue(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),ue(u.every(f=>f instanceof Qi),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=jo(),r=await this.backend.time(e);return r.wallMs=jo()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new WZ;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Sy.nextTensorId=0;Sy.nextVariableId=0;function wct(t){const e=a8(it(t),"float32");return Fe.makeTensor(e,t,"float32")}function nhe(){const t=yfe();if(t._tfengine==null){const e=new Glt(t);t._tfengine=new Sy(e)}return qlt(t._tfengine.ENV),vct(()=>t._tfengine),t._tfengine}const Fe=nhe();function Sct(t,e){const n={a:t,b:e};return Fe.runKernel(fx,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ct(){return typeof navigator<"u"&&navigator!=null}function rhe(t){if(t||_ct()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function ihe(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ta=Qe();ta.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ta.registerFlag("IS_BROWSER",()=>ihe());ta.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ta.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ta.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ta.registerFlag("PROD",()=>!1);ta.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ta.getBool("DEBUG"));ta.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ta.registerFlag("IS_TEST",()=>!1);ta.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ta.getBool("DEBUG"));ta.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ta.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ta.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x_(t,e){let n=t;if(oc(t))return e==="string"?[]:[t.length];if(Jfe(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(Qfe(t))return[t.buffer.size/(e==null?4:BA(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||oc(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&Qe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&she(t,r,[]),r}function she(t,e,n){if(n=n||[],!Array.isArray(t)&&!oc(t)){ue(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}ue(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),ue(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)she(t[i],r,n.concat(i))}function GZ(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function ke(t,e,n,r="numeric"){if(t instanceof rt())return GZ(r,t.dtype,e,n),t;let i=ux(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),GZ(r,i,e,n),t==null||!oc(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=x_(t,i);!oc(t)&&!Array.isArray(t)&&(t=[t]);const a=i!=="string"?Og(t,i):ag(t,[],!0);return Fe.makeTensor(a,s,i)}function ohe(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,o)=>ke(s,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cct="__op";function Ge(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Cct;const i=(...s)=>{Fe.startScope(n);try{const o=r(...s);return l8(o)&&console.error("Cannot return a Promise inside of tidy."),Fe.endScope(o),o}catch(o){throw Fe.endScope(null),o}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tct(t,e){const n=ke(t,"real","complex"),r=ke(e,"imag","complex");s8(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return Fe.runKernel(v8,i)}const lg=Ge({complex_:Tct});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b_(t,e,n,r){if(r==null)r=ux(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Qfe(t)||Jfe(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return Fe.backend.createTensorFromGPUData(t,e||n,r)}if(!oc(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){gf(e);const i=it(e),s=it(n);ue(i===s,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${s}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==it(e.slice(o)):!0;ue(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!oc(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Og(t,r):ag(t,[],!0),Fe.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rb(t,e,n){const r=x_(t,n);return b_(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HA={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class tp{static join(e){return new tp(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>oc(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+i.byteLength;this.shards.push({buffer:i,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,s=new ArrayBuffer(i),o=new Uint8Array(s);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+a-c.start,f=a,p=Math.min(n,c.end)-c.start,v=new Uint8Array(c.buffer,d,p-d);if(o.set(v,f),a+=v.length,n<c.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Ect(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Ect(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,s=e(t[i]);if(s===0)return i;s<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gu(){return Fe}function DF(){return Fe.memory()}function Ze(t,e){return Fe.tidy(t,e)}function Bn(t){ehe(t).forEach(n=>n.dispose())}function Wu(t){return Fe.keep(t)}function ahe(t,e,n=1){return Fe.registerBackend(t,e,n)}function Mct(){return Fe.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _y=4;async function HZ(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<i.length;++o){const a=i[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const f=await l.bytes(),h=f.reduce((g,m)=>g+m.length,0)+_y*f.length,p=new Uint8Array(h);let v=0;for(let g=0;g<f.length;g++){const m=f[g],y=new Uint8Array(new Uint32Array([m.length]).buffer);p.set(y,v),v+=_y,p.set(m,v),v+=m.length}d(p)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const s=await Promise.all(r);return{data:Rct(s),specs:n}}function Act(t,e){const n=new tp(t),r={};let i=0;for(const s of e){const o=kct(s,(a,l)=>n.slice(i+a,i+l));r[s.name]=Ict(s,n.slice(i,i+o)),i+=o}return r}function kct(t,e){const n=it(t.shape);let r;if("quantization"in t){const i=t.quantization;r=HA[i.dtype]}else if(t.dtype==="string"){let i=0;for(let s=0;s<n;s++)i+=_y+new Uint32Array(e(i,i+_y))[0];return i}else r=HA[t.dtype];return n*r}function Ict(t,e){const n=t.name,r=t.dtype,i=t.shape,s=it(i);let o,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=HA[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){o=new Float32Array(u.length);for(let d=0;d<u.length;d++){const f=u[d];o[d]=f*l.scale+l.min}}else if(l.dtype==="float16")o=zct()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(u.length);for(let d=0;d<u.length;d++){const f=u[d];o[d]=Math.round(f*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=s*c}else if(r==="string"){const l=it(t.shape);o=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(a,a+_y))[0];a+=_y;const d=new Uint8Array(e.slice(a,a+u));o.push(d),a+=u}}else{const l=HA[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const c=new Float32Array(o.length/2),u=new Float32Array(o.length/2);for(let p=0;p<c.length;p++)c[p]=o[p*2],u[p]=o[p*2+1];const d=Rb(c,i,"float32"),f=Rb(u,i,"float32"),h=lg(d,f);return d.dispose(),f.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=s*l}return Rb(o,i,r)}function Rct(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),i),i+=s.byteLength}),r.buffer}const Q8=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function jZ(t){return Q8?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Pct(t){if(Q8)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Nct(t){if(Q8){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function $ct(t){return tp.join(t)}function Dct(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function Lct(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function Oct(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),Lct(t,n,r)}function eV(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:jZ(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:jZ(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new tp(t.weightData).byteLength}}function XZ(t){const e=[];for(const n of t)e.push(...n.weights);return e}function Fct(){const t=n=>{let r=n<<13,i=0;for(;!(r&8388608);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function Bct(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function Uct(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function zct(){const t=Fct(),e=Bct(),n=Uct();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let o=0;o<r.length;o++){const a=r[o],l=t[n[a>>10]+(a&1023)]+e[a>>10];s[o]=l}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ds{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return ds.instance==null&&(ds.instance=new ds),ds.instance}static registerSaveRouter(e){ds.getInstance().saveRouters.push(e)}static registerLoadRouter(e){ds.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return ds.getHandlers(e,"save")}static getLoadHandlers(e,n){return ds.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?ds.getInstance().loadRouters:ds.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&i.push(a)}),i}}const Vct=t=>ds.getSaveHandlers(t),Wct=(t,e)=>ds.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LF="tensorflowjs",OF=1,xm="models_store",th="model_info_store";function lhe(){if(!Qe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function FF(t){const e=t.result;e.createObjectStore(xm,{keyPath:"modelPath"}),e.createObjectStore(th,{keyPath:"modelPath"})}class cg{constructor(e){if(this.indexedDB=lhe(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const s=this.indexedDB.open(LF,OF);s.onupgradeneeded=()=>FF(s),s.onsuccess=()=>{const o=s.result;if(n==null){const a=o.transaction(xm,"readonly"),c=a.objectStore(xm).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(o.close(),i(c.error)),a.oncomplete=()=>o.close()}else{n.weightData=tp.join(n.weightData);const a=eV(n),l=o.transaction(th,"readwrite");let c=l.objectStore(th),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(f){return i(f)}let d;u.onsuccess=()=>{d=o.transaction(xm,"readwrite");const f=d.objectStore(xm);let h;try{h=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return i(p)}h.onsuccess=()=>r({modelArtifactsInfo:a}),h.onerror=p=>{c=l.objectStore(th);const v=c.delete(this.modelPath);v.onsuccess=()=>(o.close(),i(h.error)),v.onerror=g=>(o.close(),i(h.error))}},u.onerror=f=>(o.close(),i(u.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},s.onerror=o=>i(s.error)})}}cg.URL_SCHEME="indexeddb://";const che=t=>Qe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(cg.URL_SCHEME)?Gct(t.slice(cg.URL_SCHEME.length)):null;ds.registerSaveRouter(che);ds.registerLoadRouter(che);function Gct(t){return new cg(t)}function Hct(t){return t.startsWith(cg.URL_SCHEME)?t.slice(cg.URL_SCHEME.length):t}class jct{constructor(){this.indexedDB=lhe()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(LF,OF);r.onupgradeneeded=()=>FF(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(th,"readonly"),a=s.objectStore(th).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(i.close(),n(a.error)),s.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=Hct(e),new Promise((n,r)=>{const i=this.indexedDB.open(LF,OF);i.onupgradeneeded=()=>FF(i),i.onsuccess=()=>{const s=i.result,o=s.transaction(th,"readwrite"),a=o.objectStore(th),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),d=()=>{c=s.transaction(xm,"readwrite");const h=c.objectStore(xm).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>r(l.error)};u.onsuccess=d,u.onerror=f=>(d(),s.close(),r(l.error))}},l.onerror=u=>(s.close(),r(l.error)),o.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},i.onerror=s=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dd="/",Z0="tensorflowjs_models",uhe="info",Xct="model_topology",qct="weight_specs",Yct="weight_data",Kct="model_metadata";function dhe(t){return{info:[Z0,t,uhe].join(Dd),topology:[Z0,t,Xct].join(Dd),weightSpecs:[Z0,t,qct].join(Dd),weightData:[Z0,t,Yct].join(Dd),modelMetadata:[Z0,t,Kct].join(Dd)}}function fhe(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function Zct(t){const e=t.split(Dd);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Dd)}function Jct(t){return t.startsWith(ug.URL_SCHEME)?t.slice(ug.URL_SCHEME.length):t}class ug{constructor(e){if(!Qe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=dhe(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=eV(e),s=tp.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Pct(s));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw fhe(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const a=JSON.parse(s);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Nct(o),n}}ug.URL_SCHEME="localstorage://";const hhe=t=>Qe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ug.URL_SCHEME)?Qct(t.slice(ug.URL_SCHEME.length)):null;ds.registerSaveRouter(hhe);ds.registerLoadRouter(hhe);function Qct(t){return new ug(t)}class eut{constructor(){ue(Qe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),ue(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Z0+Dd,r=Dd+uhe;for(let i=0;i<this.LS.length;++i){const s=this.LS.key(i);if(s.startsWith(n)&&s.endsWith(r)){const o=Zct(s);e[o]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=Jct(e);const n=dhe(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return fhe(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qZ="://";class yu{constructor(){this.managers={}}static getInstance(){return yu.instance==null&&(yu.instance=new yu),yu.instance}static registerManager(e,n){ue(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(qZ)&&(e=e.slice(0,e.indexOf(qZ))),ue(e.length>0,()=>"scheme must not be an empty string.");const r=yu.getInstance();ue(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=yu.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(yu.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tut{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!Qe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return Vfe(e)}}if(Qe().get("IS_BROWSER")){Qe().setPlatform("browser",new tut);try{yu.registerManager(ug.URL_SCHEME,new eut)}catch{}try{yu.registerManager(cg.URL_SCHEME,new jct)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nut={importFetch:()=>require("node-fetch")};let qD;class rut{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return Qe().global.fetch!=null?Qe().global.fetch(e,n):(qD==null&&(qD=nut.importFetch()),qD(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}Qe().get("IS_NODE")&&!Qe().get("IS_BROWSER")&&Qe().setPlatform("node",new rut);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hn(t,e="float32",n){return e=e||"float32",gf(t),new Ds(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iut(t,e){const n=ke(t,"x","cast");if(!Ult(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return Fe.runKernel(R2,r,i)}const Ut=Ge({cast_:iut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sut(t){const n={x:ke(t,"x","clone","string_or_numeric")};return Fe.runKernel(G2,n)}const Lm=Ge({clone_:sut});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function out(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */nhe();const aut={buffer:Hn,cast:Ut,clone:Lm,print:out};yct(aut);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lut(t,e){let n=ke(t,"a","add"),r=ke(e,"b","add");[n,r]=Pi(n,r);const i={a:n,b:r};return Fe.runKernel(fx,i)}const wt=Ge({add_:lut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cut(t,e){let n=ke(t,"a","floorDiv"),r=ke(e,"b","floorDiv");[n,r]=Pi(n,r);const i={a:n,b:r};return Fe.runKernel(V2,i)}const phe=Ge({floorDiv_:cut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uut(t,e){let n=ke(t,"a","div"),r=ke(e,"b","div");if([n,r]=Pi(n,r),n.dtype==="int32"&&r.dtype==="int32")return phe(n,r);const i={a:n,b:r},s={};return Fe.runKernel(L2,i,s)}const gn=Ge({div_:uut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dut(t,e){let n=ke(t,"a","mul"),r=ke(e,"b","mul");[n,r]=Pi(n,r);const i={a:n,b:r};return Fe.runKernel(Q2,i)}const Oe=Ge({mul_:dut});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fut(t){const e=ke(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return Fe.runKernel(n3,n)}else{const n={x:e};return Fe.runKernel(YR,n)}}const So=Ge({abs_:fut});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hut(t){const n={x:ke(t,"x","acos")};return Fe.runKernel(C2,n)}const put=Ge({acos_:hut});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mut(t){const n={x:ke(t,"x","acosh")};return Fe.runKernel(T2,n)}const gut=Ge({acosh_:mut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vut(t,e=null,n=!1){const i={x:ke(t,"x","all","bool")},s={axis:e,keepDims:n};return Fe.runKernel(d8,i,s)}const mhe=Ge({all_:vut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yut(t,e=null,n=!1){const i={x:ke(t,"x","any","bool")},s={axis:e,keepDims:n};return Fe.runKernel(f8,i,s)}const BF=Ge({any_:yut});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xut(t,e=0){const r={x:ke(t,"x","argMax")},i={axis:e};return Fe.runKernel(KR,r,i)}const lS=Ge({argMax_:xut});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function but(t,e=0){const r={x:ke(t,"x","argMin")},i={axis:e};return Fe.runKernel(ZR,r,i)}const wut=Ge({argMin_:but});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sut(t){const n={x:ke(t,"x","asin")};return Fe.runKernel(E2,n)}const _ut=Ge({asin_:Sut});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cut(t){const n={x:ke(t,"x","asinh")};return Fe.runKernel(M2,n)}const Tut=Ge({asinh_:Cut});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eut(t){const n={x:ke(t,"x","atan")};return Fe.runKernel(A2,n)}const Mut=Ge({atan_:Eut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aut(t,e){let n=ke(t,"a","atan2"),r=ke(e,"b","atan2");[n,r]=Pi(n,r);const i={a:n,b:r};return Fe.runKernel(I2,i)}const kut=Ge({atan2_:Aut});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iut(t){const n={x:ke(t,"x","atanh")};return Fe.runKernel(k2,n)}const Rut=Ge({atanh_:Iut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w_(t,e,n,r,i="NHWC",s){const o=t[3],a=[...e,o],l=yf(i);return Bs(t,a,n,s,r,null,null,l)}function dc(t,e,n,r,i,s,o="channelsLast"){const[a,l]=cS(e);let c;if(o==="channelsLast")c=[a,l,t[3],t[3]];else if(o==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Bs(t,c,n,r,i,s,!1,o)}function vf(t,e,n,r,i,s,o="NDHWC"){const[a,l,c]=UF(e);let u,d;if(o==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return np(t,u,n,r,i,!1,d,s)}function Bs(t,e,n,r,i,s,o=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,h,,p]=e,[v,g]=cS(n),[m,y]=cS(r),x=Hv(f,m),S=Hv(h,y),{padInfo:_,outHeight:C,outWidth:T}=$ut(i,c,u,v,g,x,S,s,a),A=o?p*d:p;let M;return a==="channelsFirst"?M=[l,A,C,T]:a==="channelsLast"&&(M=[l,C,T,A]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:C,outWidth:T,outChannels:A,padInfo:_,strideHeight:v,strideWidth:g,filterHeight:f,filterWidth:h,effectiveFilterHeight:x,effectiveFilterWidth:S,dilationHeight:m,dilationWidth:y,inShape:t,outShape:M,filterShape:e}}function np(t,e,n,r,i,s=!1,o="channelsLast",a){let[l,c,u,d,f]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d,f]=t;else if(o==="channelsFirst")[l,f,c,u,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[h,p,v,,g]=e,[m,y,x]=UF(n),[S,_,C]=UF(r),T=Hv(h,S),A=Hv(p,_),M=Hv(v,C),{padInfo:E,outDepth:P,outHeight:N,outWidth:F}=Dut(i,c,u,d,m,y,x,T,A,M,a),$=s?g*f:g;let O;return o==="channelsFirst"?O=[l,$,P,N,F]:o==="channelsLast"&&(O=[l,P,N,F,$]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:d,inChannels:f,outDepth:P,outHeight:N,outWidth:F,outChannels:$,padInfo:E,strideDepth:m,strideHeight:y,strideWidth:x,filterDepth:h,filterHeight:p,filterWidth:v,effectiveFilterDepth:T,effectiveFilterHeight:A,effectiveFilterWidth:M,dilationDepth:S,dilationHeight:_,dilationWidth:C,inShape:t,outShape:O,filterShape:e}}function Put(t,e,n,r,i){r==null&&(r=tV(t,e,n));const s=t[0],o=t[1],a=uS((s-e+2*r)/n+1,i),l=uS((o-e+2*r)/n+1,i);return[a,l]}function Nut(t,e,n,r,i,s){i==null&&(i=tV(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*i>=e[a]&&(o[a]=uS((t[a]-e[a]+2*i)/r[a]+1,s));return o}function tV(t,e,n,r=1){const i=Hv(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function cS(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function UF(t){return typeof t=="number"?[t,t,t]:t}function Hv(t,e){return e<=1?t:t+(t-1)*(e-1)}function $ut(t,e,n,r,i,s,o,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=Put([e,n],s,r,t,a);u=h[0],d=h[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/i);const f=Math.max(0,(u-1)*r+s-e),h=Math.max(0,(d-1)*i+o-n),p=Math.floor(f/2),v=f-p,g=Math.floor(h/2),m=h-g;c={top:p,bottom:v,left:g,right:m,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-s+1)/r),d=Math.ceil((n-o+1)/i);else if(typeof t=="object"){const f=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],v=l==="channelsLast"?t[2][1]:t[3][1];c={top:f,bottom:h,left:p,right:v,type:f===0&&h===0&&p===0&&v===0?"VALID":"EXPLICIT"},u=uS((e-s+f+h)/r+1,a),d=uS((n-o+p+v)/i+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function Dut(t,e,n,r,i,s,o,a,l,c,u){let d,f,h,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=Nut([e,n,r,1],[a,l,c],1,[i,s,o],t,u);f=g[0],h=g[1],p=g[2]}else if(t==="same"){f=Math.ceil(e/i),h=Math.ceil(n/s),p=Math.ceil(r/o);const v=(f-1)*i+a-e,g=(h-1)*s+l-n,m=(p-1)*o+c-r,y=Math.floor(v/2),x=v-y,S=Math.floor(g/2),_=g-S,C=Math.floor(m/2),T=m-C;d={top:S,bottom:_,left:C,right:T,front:y,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function uS(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function dg(t){const[e,n,r]=cS(t);return e===1&&n===1&&r===1}function io(t,e){return dg(t)||dg(e)}function fg(t){return cS(t).every(e=>e>0)}function yf(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function oa(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")ue(by(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{ue(by(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lut(t,e){const r={x:ke(t,"x","reshape","string_or_numeric")},i={shape:e};return Fe.runKernel(L3,r,i)}const We=Ge({reshape_:Lut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Out(t,e,n,r,i){const s=ke(t,"x","avgPool","float32"),o=1;ue(io(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=s,l=!1;s.rank===3&&(l=!0,a=We(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ue(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),oa("avgPool",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let d=Fe.runKernel(JR,c,u);return d=Ut(d,s.dtype),l?We(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const nV=Ge({avgPool_:Out});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fut(t,e,n,r,i,s="NDHWC"){const o=ke(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=We(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ue(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),ue(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),ue(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),oa("avgPool3d",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s};let d=Fe.runKernel(QR,c,u);return d=Ut(d,a.dtype),l?We(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const But=Ge({avgPool3d_:Fut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uut(t,e=0){ue(t.length>=1,()=>"Pass at least one tensor to concat");const n=ohe(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return Lm(n[0]);const r=n,i={axis:e};return Fe.runKernel(r3,r,i)}const Qo=Ge({concat_:Uut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zut(t,e,n=!1,r=!1){let i=ke(t,"a","matMul"),s=ke(e,"b","matMul");[i,s]=Pi(i,s);const o={a:i,b:s},a={transposeA:n,transposeB:r};return Fe.runKernel(e3,o,a)}const vr=Ge({matMul_:zut});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vut(t){const n={x:ke(t,"x","sigmoid","float32")};return Fe.runKernel(u_,n)}const hx=Ge({sigmoid_:Vut});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wut(t,e,n){const r=ke(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},s={begin:e,size:n};return Fe.runKernel(z3,i,s)}const Ur=Ge({slice_:Wut});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gut(t){const n={x:ke(t,"x","tanh","float32")};return Fe.runKernel(g_,n)}const rV=Ge({tanh_:Gut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hut(t,e,n){const r=ke(t,"x","batchToSpaceND"),i=e.reduce((a,l)=>a*l);ue(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),ue(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),ue(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const s={x:r},o={blockShape:e,crops:n};return Fe.runKernel(t3,s,o)}const iV=Ge({batchToSpaceND_:Hut});function jut(t){let e;return t.rank===0||t.rank===1?e=We(t,[1,1,1,t.size]):t.rank===2?e=We(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=We(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xut(t,e,n,r,i,s){s==null&&(s=.001);const o=ke(t,"x","batchNorm"),a=ke(e,"mean","batchNorm"),l=ke(n,"variance","batchNorm");let c;i!=null&&(c=ke(i,"scale","batchNorm"));let u;r!=null&&(u=ke(r,"offset","batchNorm")),ue(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ue(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ue(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:jut(o),scale:c,offset:u,mean:a,variance:l},h={varianceEpsilon:s},p=Fe.runKernel(f3,f,h);return We(p,o.shape)}const K3=Ge({batchNorm_:Xut});function qut(t,e,n,r,i,s){const o=ke(t,"x","batchNorm"),a=ke(e,"mean","batchNorm"),l=ke(n,"variance","batchNorm");let c;i!=null&&(c=ke(i,"scale","batchNorm"));let u;return r!=null&&(u=ke(r,"offset","batchNorm")),ue(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),ue(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),ue(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&ue(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&ue(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),K3(o,a,l,u,c,s)}const Yut=Ge({batchNorm2d_:qut});function Kut(t,e,n,r,i,s){const o=ke(t,"x","batchNorm"),a=ke(e,"mean","batchNorm"),l=ke(n,"variance","batchNorm");let c;i!=null&&(c=ke(i,"scale","batchNorm"));let u;return r!=null&&(u=ke(r,"offset","batchNorm")),ue(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),ue(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),ue(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&ue(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&ue(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),K3(o,a,l,u,c,s)}const Zut=Ge({batchNorm3d_:Kut});function Jut(t,e,n,r,i,s){const o=ke(t,"x","batchNorm"),a=ke(e,"mean","batchNorm"),l=ke(n,"variance","batchNorm");let c;i!=null&&(c=ke(i,"scale","batchNorm"));let u;return r!=null&&(u=ke(r,"offset","batchNorm")),ue(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),ue(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),ue(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&ue(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&ue(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),K3(o,a,l,u,c,s)}const Qut=Ge({batchNorm4d_:Jut});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function edt(t,e,n){const r=ke(t,"x","bincount"),i=ke(e,"weights","bincount");ue(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),ue(n>=0,()=>`size must be non-negative, but got ${n}.`),ue(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const s={x:r,weights:i},o={size:n};return Fe.runKernel(m8,s,o)}const tdt=Ge({bincount_:edt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ndt(t,e){let n=ke(t,"broadcastTo","x");const r=n.shape;if(gf(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=We(n,c)}const i=n.shape,s=Array.from(e);for(let c=e.length-1;c>=0;c--)if(i[c]===e[c])s[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return Lm(n);const a={x:n},l={reps:s};return Fe.runKernel(v_,a,l)}const Pb=Ge({broadcastTo_:ndt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rdt(t){const n={x:ke(t,"x","ceil","float32")};return Fe.runKernel(P2,n)}const idt=Ge({ceil_:rdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3(t,e,n){gf(t),n=n||ux(e);const r={shape:t,value:e,dtype:n};return Fe.runKernel(I8,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sdt(t,e,n){const r=ke(t,"x","clipByValue");if(ue(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Z3(r.shape,e,r.dtype);const i={x:r},s={clipValueMin:e,clipValueMax:n};return Fe.runKernel(N2,i,s)}const fl=Ge({clipByValue_:sdt});function odt(t){return Qo(t,0)}const adt=Ge({concat1d_:odt});function ldt(t,e){return Qo(t,e)}const cdt=Ge({concat2d_:ldt});function udt(t,e){return Qo(t,e)}const ddt=Ge({concat3d_:udt});function fdt(t,e){return Qo(t,e)}const hdt=Ge({concat4d_:fdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pdt(t,e,n,r,i="NHWC",s=[1,1],o){const a=ke(t,"x","conv2d","float32"),l=ke(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=We(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ue(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),ue(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),oa("conv2d",r,o);const d=i==="NHWC"?c.shape[3]:c.shape[1];ue(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),ue(io(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),ue(fg(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),ue(fg(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:c,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},p=Fe.runKernel(i3,f,h);return u?We(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const hg=Ge({conv2d_:pdt});function mdt(t,e,n,r,i="NWC",s=1,o){const a=ke(t,"x","conv1d"),l=ke(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=We(a,[1,a.shape[0],a.shape[1]])),ue(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),ue(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),oa("conv1d",r,o),ue(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),ue(io(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),ue(fg(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),ue(fg(n),()=>"Error in conv1D: Stride should be larger than 0."),ue(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const d=We(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=We(c,[c.shape[0],1,c.shape[1],c.shape[2]]),g=hg(f,d,[1,n],r,"NHWC",[1,s],o);return u?We(g,[g.shape[2],g.shape[3]]):We(g,[g.shape[0],g.shape[2],g.shape[3]])}const ghe=Ge({conv1d_:mdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gdt(t,e,n,r,i,s="NHWC",o){ue(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=We(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),ue(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),ue(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),ue(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=s==="NHWC"?a[3]:a[1],d=s==="NHWC"?l.shape[3]:l.shape[1];ue(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),ue(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),oa("conv2dDerInput",i,o);const f={dy:l,filter:n},h={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,inputShape:a},p=Fe.runKernel(s3,f,h);return c?We(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const sV=Ge({conv2DBackpropInput_:gdt});function vdt(t,e,n,r,i,s){const o=ke(t,"x","conv2dTranspose"),a=ke(e,"filter","conv2dTranspose");return sV(n,o,a,r,i,"NHWC",s)}const vhe=Ge({conv2dTranspose_:vdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ydt(t,e,n,r,i="NDHWC",s=[1,1,1]){const o=ke(t,"x","conv3d"),a=ke(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=We(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ue(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),ue(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),ue(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),ue(io(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),ue(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),ue(fg(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),ue(fg(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},d={strides:n,pad:r,dataFormat:i,dilations:s},f=Fe.runKernel(o3,u,d);return c?We(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const xdt=Ge({conv3d_:ydt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bdt(t,e,n,r,i){ue(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,o=e,a=!1;e.rank===4&&(a=!0,o=We(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],c=o.shape[4];ue(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),ue(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),ue(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),ue(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),ue(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:o,filter:n},d={pad:i,strides:r,inputShape:s},f=Fe.runKernel(b8,u,d);return a?We(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const yhe=Ge({conv3DBackpropInput_:bdt});function wdt(t,e,n,r,i){const s=ke(t,"x","conv3dTranspose"),o=ke(e,"filter","conv3dTranspose");return yhe(n,s,o,r,i)}const Sdt=Ge({conv3dTranspose_:wdt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _dt(t){const n={x:ke(t,"x","cos","float32")};return Fe.runKernel($2,n)}const oV=Ge({cos_:_dt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cdt(t){const n={x:ke(t,"x","cosh","float32")};return Fe.runKernel(D2,n)}const xhe=Ge({cosh_:Cdt});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tdt(t,e=0,n=!1,r=!1){const s={x:ke(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return Fe.runKernel(w8,s,o)}const zF=Ge({cumprod_:Tdt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Edt(t,e=0,n=!1,r=!1){const s={x:ke(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return Fe.runKernel(a3,s,o)}const bhe=Ge({cumsum_:Edt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mdt(t,e,n,r=!1){const i=ke(t,"x","denseBincount"),s=ke(e,"weights","denseBincount");ue(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),ue(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),ue(n>=0,()=>`size must be non-negative, but got ${n}.`),ue(s.size===i.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${s.shape}.`);const o={x:i,weights:s},a={size:n,binaryOutput:r};return Fe.runKernel(_8,o,a)}const YZ=Ge({denseBincount_:Mdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Adt(t,e,n="NHWC"){const r=ke(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];ue(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),ue(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),ue(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),ue(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return Fe.runKernel(C8,a,l)}const kdt=Ge({depthToSpace_:Adt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Idt(t,e,n,r,i="NHWC",s=[1,1],o){const a=ke(t,"x","depthwiseConv2d","float32"),l=ke(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=We(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ue(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),ue(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=i==="NHWC"?c.shape[3]:c.shape[1];ue(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),oa("depthwiseConv2d",r,o);const f={x:c,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o},p=Fe.runKernel(l3,f,h);return u?We(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const aV=Ge({depthwiseConv2d_:Idt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rdt(t,e,n,r,i=[1,1],s="NHWC"){const o=ke(t,"x","dilation2d"),a=ke(e,"filter","dilation2d");ue(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),ue(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),ue(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=o,c=!1;o.rank===3&&(l=We(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),ue(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},d={strides:n,pad:r,dilations:i},f=Fe.runKernel(c3,u,d);return c?We(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Pdt=Ge({dilation2d_:Rdt});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cy(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,o=t[s]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(s)}return r}function as(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1,o=e[s];(i==null||i===1&&o>1)&&n.unshift(s)}return n}function kn(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let s=t[t.length-i-1];s==null&&(s=1);let o=e[e.length-i-1];if(o==null&&(o=1),s===1)r[n-i-1]=o;else if(o===1)r[n-i-1]=s;else if(s!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-i-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ndt(t,e){let n=ke(t,"a","equal","string_or_numeric"),r=ke(e,"b","equal","string_or_numeric");[n,r]=Pi(n,r),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(u3,i)}const td=Ge({equal_:Ndt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $dt(t,e,n){const r=ke(e,"a","where"),i=ke(n,"b","where"),s=ke(t,"condition","where","bool"),o=kn(kn(s.shape,r.shape),i.shape),a=Pb(s,o),l=Pb(r,o),c=Pb(i,o),u={condition:a,t:l,e:c};return Fe.runKernel(U3,u)}const Po=Ge({where_:$dt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ddt(t){const n={x:ke(t,"x","zerosLike")};return Fe.runKernel(q3,n)}const or=Ge({zerosLike_:Ddt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ldt(t,e){let n=ke(t,"a","div"),r=ke(e,"b","div");[n,r]=Pi(n,r);const i=gn(n,r),s=or(i),o=td(r,s);return Po(o,s,i)}const Odt=Ge({divNoNan_:Ldt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fdt(t,e){const n=ke(t,"t1","dot"),r=ke(e,"t2","dot");ue((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(ue(i===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${s}.`),n.rank===1&&r.rank===1){const o=We(n,[1,-1]),a=We(r,[-1,1]),l=vr(o,a);return We(l,[])}else if(n.rank===1&&r.rank===2){const o=We(n,[1,-1]),a=We(r,[r.shape[0],r.shape[1]]),l=vr(o,a);return We(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=We(r,[-1,1]),a=vr(n,o);return We(a,[a.size])}else{const o=We(r,[r.shape[0],r.shape[1]]);return vr(n,o)}}const Bdt=Ge({dot_:Fdt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Udt(t,...e){const n=e.map((i,s)=>ke(i,`tensors${s}`,"einsum")),r={equation:t};return Fe.runKernel(M8,n,r)}const L1=Ge({einsum_:Udt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zdt(t){const n={x:ke(t,"x","elu","float32")};return Fe.runKernel(O2,n)}const J3=Ge({elu_:zdt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vdt(t){let e=ke(t,"x","erf");ue(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Ut(e,"float32"));const n={x:e};return Fe.runKernel(F2,n)}const Wdt=Ge({erf_:Vdt});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lV(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function whe(t,e,n){const r=t.length+e.length,i=[];let s=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?i.push(t[s++]):i.push(e[o++]);return i}function _s(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const i=e.map(s=>t[s]);return[n,i]}function ji(t,e){const n=e.map(r=>1);return whe(t,n,e)}function Us(t,e,n){ue(lV(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function fi(t,e){if(lV(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function rp(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Ni(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gdt(t,e=null,n=!1){const i={x:ke(t,"x","max")},s={reductionIndices:e,keepDims:n};return Fe.runKernel(S3,i,s)}const Wc=Ge({max_:Gdt});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hdt(t,e=null,n=!1){const i={x:ke(t,"x","min")},s={axis:e,keepDims:n};return Fe.runKernel(E3,i,s)}const jA=Ge({min_:Hdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jdt(t,e){let n=ke(t,"base","pow"),r=ke(e,"exp","pow");[n,r]=Pi(n,r);const i={a:n,b:r};return Fe.runKernel(e_,i)}const Ty=Ge({pow_:jdt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yr(t,e){if((oc(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&oc(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return b_(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xdt(t){const n={x:ke(t,"x","sqrt","float32")};return Fe.runKernel(f_,n)}const $o=Ge({sqrt_:Xdt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qdt(t){const e=ke(t,"x","square"),n={};return Fe.runKernel("Square",{x:e},n)}const Yr=Ge({square_:qdt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ydt(t,e=null,n=!1){let r=ke(t,"x","sum");r.dtype==="bool"&&(r=Ut(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return Fe.runKernel(V3,i,s)}const dn=Ge({sum_:Ydt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kdt(t,e="euclidean",n=null,r=!1){t=ke(t,"x","norm");const i=She(t,e,n);let s=i.shape;if(r){const o=qn(n,t.shape);s=ji(i.shape,o)}return We(i,s)}function She(t,e,n=null){if(t.rank===0)return So(t);if(t.rank!==1&&n===null)return She(We(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return dn(So(t),n);if(e===1/0)return Wc(So(t),n);if(e===-1/0)return jA(So(t),n);if(e==="euclidean"||e===2)return $o(dn(Ty(So(t),yr(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Wc(dn(So(t),n[0]),n[1]-1);if(e===1/0)return Wc(dn(So(t),n[1]),n[0]);if(e===-1/0)return jA(dn(So(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return $o(dn(Yr(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Q3=Ge({norm_:Kdt});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zdt(t,e=null,n=!1){return Q3(t,"euclidean",e,n)}const Jdt=Ge({euclideanNorm_:Zdt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qdt(t){const n={x:ke(t,"x","exp")};return Fe.runKernel(B2,n)}const nd=Ge({exp_:Qdt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eft(t,e=0){const n=ke(t,"x","expandDims","string_or_numeric");ue(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return Fe.runKernel(d3,r,i)}const Xo=Ge({expandDims_:eft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tft(t){const n={x:ke(t,"x","expm1")};return Fe.runKernel(U2,n)}const nft=Ge({expm1_:tft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rft(t,e){const n=ke(t,"x","tile","string_or_numeric");ue(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return Fe.runKernel(v_,r,i)}const Fc=Ge({tile_:rft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ift(t,e,n,r="float32"){e==null&&(e=t);const i=Hn([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)i.set(1,a,a);const o=We(i.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Fc(Xo(o,0),[n[0],1,1]);if(n.length===2)return Fc(Xo(Xo(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Fc(Xo(Xo(Xo(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const _he=Ge({eye_:ift});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sft(t){const n={x:ke(t,"x","floor","float32")};return Fe.runKernel(z2,n)}const eP=Ge({floor_:sft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oft(t,e,n=0,r=0){const i=ke(t,"x","gather"),s=ke(e,"indices","gather","int32"),o={x:i,indices:s},a={axis:n,batchDims:r};return Fe.runKernel(h3,o,a)}const cV=Ge({gather_:oft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aft(t,e){let n=ke(t,"a","greater","string_or_numeric"),r=ke(e,"b","greater","string_or_numeric");[n,r]=Pi(n,r),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(p3,i)}const vl=Ge({greater_:aft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lft(t,e){let n=ke(t,"a","greaterEqual","string_or_numeric"),r=ke(e,"b","greaterEqual","string_or_numeric");[n,r]=Pi(n,r),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(W2,i)}const Fg=Ge({greaterEqual_:lft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cft(t){const n={input:ke(t,"input","imag")};return Fe.runKernel(N8,n)}const uV=Ge({imag_:cft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uft(t){const n={x:ke(t,"x","isFinite")};return Fe.runKernel(H2,n)}const dft=Ge({isFinite_:uft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft(t){const n={x:ke(t,"x","isInf")};return Fe.runKernel(j2,n)}const hft=Ge({isInf_:fft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pft(t){const n={x:ke(t,"x","isNaN")};return Fe.runKernel(X2,n)}const mft=Ge({isNaN_:pft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gft(t,e=.2){const r={x:ke(t,"x","leakyRelu")},i={alpha:e};return Fe.runKernel(m3,r,i)}const dV=Ge({leakyRelu_:gft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vft(t,e){let n=ke(t,"a","less","string_or_numeric"),r=ke(e,"b","less","string_or_numeric");[n,r]=Pi(n,r),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(g3,i)}const XA=Ge({less_:vft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yft(t,e){let n=ke(t,"a","lessEqual","string_or_numeric"),r=ke(e,"b","lessEqual","string_or_numeric");[n,r]=Pi(n,r),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(v3,i)}const px=Ge({lessEqual_:yft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xft(t,e=5,n=1,r=1,i=.5){const s=ke(t,"x","localResponseNormalization");ue(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),ue(by(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=s,a=!1;s.rank===3&&(a=!0,o=We(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:o},c={depthRadius:e,bias:n,alpha:r,beta:i},u=Fe.runKernel(w3,l,c);return a?We(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const bft=Ge({localResponseNormalization_:xft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wft(t){const n={x:ke(t,"x","log","float32")};return Fe.runKernel(q2,n)}const rd=Ge({log_:wft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sft(t){const n={x:ke(t,"x","log1p")};return Fe.runKernel(Y2,n)}const Che=Ge({log1p_:Sft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ft(t,e){ue(CF(t),()=>"The f passed in variableGrads(f) must be a function"),ue(e==null||Array.isArray(e)&&e.every(c=>c instanceof GA),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in Fe.registeredVariables)e.push(Fe.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,i=e.length;e=e.filter(c=>c.trainable),ue(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const s=!0,{value:o,grads:a}=Fe.gradients(t,e,null,s);ue(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),ue(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:o,grads:l}}function Ey(t){return Fe.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cft(t){const n={x:ke(t,"x","neg")};return Fe.runKernel(A3,n)}const Ri=Ge({neg_:Cft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tft(t){const n={x:ke(t,"x","softplus")};return Fe.runKernel(d_,n)}const S_=Ge({softplus_:Tft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eft(t){const e=ke(t,"x","logSigmoid");return Ey(r=>({value:Ri(S_(Ri(r))),gradFunc:o=>Oe(o,hx(Ri(r)))}))(e)}const Mft=Ge({logSigmoid_:Eft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aft(t,e){let n=ke(t,"a","sub"),r=ke(e,"b","sub");[n,r]=Pi(n,r);const i={a:n,b:r};return Fe.runKernel(p_,i)}const bn=Ge({sub_:Aft});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kft(t,e=-1){const n=ke(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Ey((i,s)=>{const a=Wc(i,e,!0),l=bn(i,a),c=bn(Ut(l,"float32"),rd(dn(nd(l),e,!0)));return s([c]),{value:c,gradFunc:(d,f)=>{const[h]=f,p=!0,v=nd(h);return bn(d,Oe(dn(d,e,p),v))}}})(n)}const The=Ge({logSoftmax_:kft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ift(t,e=null,n=!1){const r=ke(t,"x","logSumExp"),i=qn(e,r.shape),s=Wc(r,i,!0),o=bn(r,s),a=nd(o),l=dn(a,i),c=rd(l),u=wt(We(s,c.shape),c);if(n){const d=ji(u.shape,i);return We(u,d)}return u}const Ehe=Ge({logSumExp_:Ift});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rft(t,e){const n=ke(t,"a","logicalAnd","bool"),r=ke(e,"b","logicalAnd","bool");kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(y3,i)}const lf=Ge({logicalAnd_:Rft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pft(t){const n={x:ke(t,"x","logicalNot","bool")};return Fe.runKernel(x3,n)}const fV=Ge({logicalNot_:Pft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nft(t,e){const n=ke(t,"a","logicalOr","bool"),r=ke(e,"b","logicalOr","bool");kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(b3,i)}const Mhe=Ge({logicalOr_:Nft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ft(t,e){const n=ke(t,"a","logicalXor","bool"),r=ke(e,"b","logicalXor","bool");return kn(n.shape,r.shape),lf(Mhe(t,e),fV(lf(t,e)))}const Dft=Ge({logicalXor_:$ft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lft(t,e,n,r,i){const s=ke(t,"x","maxPool"),o=1;let a=s,l=!1;s.rank===3&&(l=!0,a=We(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ue(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),ue(io(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),oa("maxPool",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i},d=Fe.runKernel(_3,c,u);return l?We(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const hV=Ge({maxPool_:Lft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oft(t,e=[1,1,1],n,r,i,s="NDHWC"){const o=ke(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=We(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ue(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),ue(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),oa("maxPool3d",r,i);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s},d=Fe.runKernel(C3,c,u);return l?We(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const Fft=Ge({maxPool3d_:Oft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bft(t,e){let n=ke(t,"a","maximum"),r=ke(e,"b","maximum");[n,r]=Pi(n,r),n.dtype==="bool"&&(n=Ut(n,"int32"),r=Ut(r,"int32")),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(K2,i)}const ip=Ge({maximum_:Bft});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uft(t,e=null,n=!1){const i={x:ke(t,"x","mean")},s={axis:e,keepDims:n};return Fe.runKernel(T3,i,s)}const Gi=Ge({mean_:Uft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gs(t,e="float32"){if(gf(t),e==="complex64"){const r=gs(t,"float32"),i=gs(t,"float32");return lg(r,i)}const n=to(it(t),e);return Fe.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sp(t,e="float32"){if(gf(t),e==="complex64"){const r=sp(t,"float32"),i=gs(t,"float32");return lg(r,i)}const n=a8(it(t),e);return Fe.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zft(t,e){let n=ke(t,"a","minimum"),r=ke(e,"b","minimum");[n,r]=Pi(n,r),n.dtype==="bool"&&(n=Ut(n,"int32"),r=Ut(r,"int32")),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(Z2,i)}const dS=Ge({minimum_:zft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vft(t,e,n){ue(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=ke(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");ue(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)ue(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),ue(e[a][0]>=0&&e[a][0]<=r.shape[a]-i&&e[a][1]>=0&&e[a][1]<=r.shape[a]-i,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-i} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},o={x:r};return Fe.runKernel(M3,o,s)}const Wft=Ge({mirrorPad_:Vft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gft(t,e){let n=ke(t,"a","mod"),r=ke(e,"b","mod");[n,r]=Pi(n,r);const i={a:n,b:r};return Fe.runKernel(J2,i)}const Hft=Ge({mod_:Gft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jft(t,e=null,n=!1){t=ke(t,"x","moments");const r=qn(e,t.shape),i=Gi(t,r,n);let s=i.shape;n||(s=ji(i.shape,r));const o=Yr(bn(Ut(t,"float32"),We(i,s))),a=Gi(o,r,n);return{mean:i,variance:a}}const pV=Ge({moments_:jft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xft(t,e){let n=ke(t,"a","notEqual","string_or_numeric"),r=ke(e,"b","notEqual","string_or_numeric");[n,r]=Pi(n,r),kn(n.shape,r.shape);const i={a:n,b:r};return Fe.runKernel(k3,i)}const qA=Ge({notEqual_:Xft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qft(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:ke(t,"indices","oneHot","int32")},a={dtype:i,depth:e,onValue:n,offValue:r};return Fe.runKernel(R3,o,a)}const Ahe=Ge({oneHot_:qft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yft(t){const n={x:ke(t,"x","onesLike")};return Fe.runKernel(I3,n)}const ac=Ge({onesLike_:Yft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kft(t,e,n=0){const r=ke(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},s={x:r};return Fe.runKernel(N3,s,i)}const mV=Ge({pad_:Kft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zft(t,e,n){const r=ke(t,"x","spaceToBatchND");ue(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),ue(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),ue(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},s={blockShape:e,paddings:n};return Fe.runKernel(W3,i,s)}const gV=Ge({spaceToBatchND_:Zft});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jft(t,e,n,r,i,s,o){i==null&&(i=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=ke(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=We(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ue(io(s,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${i}'`);const u=dc(l.shape,e,s,i,r),d=[u.dilationHeight,u.dilationWidth];let f;r==="same"?f=eht([u.filterHeight,u.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[p,v]=Qft([u.inHeight,u.inWidth],d,f),g=h?r:"valid",m=h?l:gV(l,d,p),x=(n==="avg"?()=>nV(m,e,s,g,o):()=>hV(m,e,s,g,o))(),S=h?x:iV(x,d,v);return c?We(S,[S.shape[1],S.shape[2],S.shape[3]]):S}function Qft(t,e,n){const r=n.map(u=>u[0]),i=n.map(u=>u[1]),s=t.concat(r,i),o=e.map((u,d)=>(u-s[d]%u)%u),a=i.map((u,d)=>u+o[d]),l=e.map((u,d)=>[r[d],a[d]]),c=e.map((u,d)=>[0,o[d]]);return[l,c]}function eht(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),s=r.map((o,a)=>o-i[a]);return r.map((o,a)=>[i[a],s[a]])}const tht=Ge({pool_:Jft});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nht(t,e){const n=ke(t,"x","prelu"),r=ke(e,"alpha","prelu"),i={x:n,alpha:r};return Fe.runKernel($3,i)}const vV=Ge({prelu_:nht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rht(t,e=null,n=!1){let r=ke(t,"x","prod");r.dtype==="bool"&&(r=Ut(r,"int32"));const i={x:r},s={axis:e,keepDims:n};return Fe.runKernel(D3,i,s)}const iht=Ge({prod_:rht});var yV={exports:{}};yV.exports;(function(t){(function(e,n,r){function i(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new i(l),d=c&&c.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&s(d,u),f.state=function(){return s(u,{})}),f}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Nc,t,!1)})(yV);var sht=yV.exports,xV={exports:{}};xV.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Nc,t,!1)})(xV);var oht=xV.exports,bV={exports:{}};bV.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Nc,t,!1)})(bV);var aht=bV.exports,wV={exports:{}};wV.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.x,d=l.i,f,h;return f=u[d],f^=f>>>7,h=f^f<<24,f=u[d+1&7],h^=f^f>>>10,f=u[d+3&7],h^=f^f>>>3,f=u[d+4&7],h^=f^f<<7,f=u[d+7&7],f=f^f<<13,h^=f^f<<9,u[d]=h,l.i=d+1&7,h};function c(u,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],u.x=h,u.i=0,f=256;f>0;--f)u.next()}c(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.x&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Nc,t,!1)})(wV);var lht=wV.exports,SV={exports:{}};SV.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.w,d=l.X,f=l.i,h,p;return l.w=u=u+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(u^u>>>16)|0};function c(u,d){var f,h,p,v,g,m=[],y=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,y=Math.max(y,d.length)),p=0,v=-32;v<y;++v)d&&(h^=d.charCodeAt((v+32)%d.length)),v===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(g=g+1640531527|0,f=m[v&127]^=h+g,p=f==0?p+1:0);for(p>=128&&(m[(d&&d.length||0)&127]=-1),p=127,v=4*128;v>0;--v)h=m[p+34&127],f=m[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,m[p]=h^f;u.w=g,u.X=m,u.i=p}c(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.X&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Nc,t,!1)})(SV);var cht=SV.exports,_V={exports:{}};_V.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Nc,t,!1)})(_V);var uht=_V.exports,khe={exports:{}};const dht={},fht=Object.freeze(Object.defineProperty({__proto__:null,default:dht},Symbol.toStringTag,{value:"Module"})),hht=Lee(fht);(function(t){(function(e,n,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),c=r.pow(2,o),u=c*2,d=i-1,f;function h(S,_,C){var T=[];_=_==!0?{entropy:!0}:_||{};var A=m(g(_.entropy?[S,x(n)]:S??y(),3),T),M=new p(T),E=function(){for(var P=M.g(s),N=l,F=0;P<c;)P=(P+F)*i,N*=i,F=M.g(1);for(;P>=u;)P/=2,N/=2,F>>>=1;return(P+F)/N};return E.int32=function(){return M.g(4)|0},E.quick=function(){return M.g(4)/4294967296},E.double=E,m(x(M.S),n),(_.pass||C||function(P,N,F,$){return $&&($.S&&v($,M),P.state=function(){return v(M,{})}),F?(r[a]=P,N):P})(E,A,"global"in _?_.global:this==r,_.state)}function p(S){var _,C=S.length,T=this,A=0,M=T.i=T.j=0,E=T.S=[];for(C||(S=[C++]);A<i;)E[A]=A++;for(A=0;A<i;A++)E[A]=E[M=d&M+S[A%C]+(_=E[A])],E[M]=_;(T.g=function(P){for(var N,F=0,$=T.i,O=T.j,z=T.S;P--;)N=z[$=d&$+1],F=F*i+z[d&(z[$]=z[O=d&O+N])+(z[O]=N)];return T.i=$,T.j=O,F})(i)}function v(S,_){return _.i=S.i,_.j=S.j,_.S=S.S.slice(),_}function g(S,_){var C=[],T=typeof S,A;if(_&&T=="object")for(A in S)try{C.push(g(S[A],_-1))}catch{}return C.length?C:T=="string"?S:S+"\0"}function m(S,_){for(var C=S+"",T,A=0;A<C.length;)_[d&A]=d&(T^=_[d&A]*19)+C.charCodeAt(A++);return x(_)}function y(){try{var S;return f&&(S=f.randomBytes)?S=S(i):(S=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(S)),x(S)}catch{var _=e.navigator,C=_&&_.plugins;return[+new Date,e,C,e.screen,x(n)]}}function x(S){return String.fromCharCode.apply(0,S)}if(m(r.random(),n),t.exports){t.exports=h;try{f=hht}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:Nc,[],Math)})(khe);var pht=khe.exports,mht=sht,ght=oht,vht=aht,yht=lht,xht=cht,bht=uht,Bg=pht;Bg.alea=mht;Bg.xor128=ght;Bg.xorwow=vht;Bg.xorshift7=yht;Bg.xor4096=xht;Bg.tychei=bht;var CV=Bg;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ihe{constructor(e,n,r,i,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=s||Math.random();this.random=CV.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,s,o;do i=2*this.random()-1,s=2*this.random()-1,o=i*i+s*s;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class wht{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=CV.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sht(t,e=0,n=1,r,i){if(gf(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new Ihe(e,n,r,!1,i),o=Hn(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const _ht=Ge({randomNormal_:Sht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cht(t,e=0,n=1,r="float32",i){gf(t);const s=Hn(t,r),o=new wht(e,n,null,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}const __=Ge({randomUniform_:Cht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fS(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return Fe.runKernel(U8,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tht(t){const n={input:ke(t,"input","real")};return Fe.runKernel(z8,n)}const YA=Ge({real_:Tht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eht(t){const n={x:ke(t,"x","reciprocal")};return Fe.runKernel(t_,n)}const Mht=Ge({reciprocal_:Eht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aht(t){const n={x:ke(t,"x","relu")};return Fe.runKernel(n_,n)}const Ug=Ge({relu_:Aht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kht(t){const n={x:ke(t,"x","relu6")};return Fe.runKernel(r_,n)}const Rhe=Ge({relu6_:kht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iht(t,e){const r={x:ke(t,"x","reverse")},i={dims:e};return Fe.runKernel(B3,r,i)}const pg=Ge({reverse_:Iht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rht(t){const n={x:ke(t,"x","round")};return Fe.runKernel(i_,n)}const Phe=Ge({round_:Rht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pht(t){const n={x:ke(t,"x","rsqrt","float32")};return Fe.runKernel(s_,n)}const Nhe=Ge({rsqrt_:Pht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nht(t){const n={x:ke(t,"x","selu")};return Fe.runKernel(o_,n)}const $he=Ge({selu_:Nht});function $ht(t,e,n,r,i,s=[1,1],o="NHWC"){const a=ke(t,"x","separableConv2d"),l=ke(e,"depthwiseFilter","separableConv2d"),c=ke(n,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(a.rank===3&&(d=!0,u=We(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ue(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),ue(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),ue(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),ue(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),ue(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const f=l.shape[2],h=l.shape[3];ue(c.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${c.shape[2]}.`);const p=aV(u,l,r,i,o,s),g=hg(p,c,1,"valid",o);return d?We(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Dhe=Ge({separableConv2d_:$ht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dht(t){const n={x:ke(t,"x","sign")};return Fe.runKernel(c_,n)}const Lht=Ge({sign_:Dht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oht(t){const n={x:ke(t,"x","sin","float32")};return Fe.runKernel(a_,n)}const Lhe=Ge({sin_:Oht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fht(t){const n={x:ke(t,"x","sinh")};return Fe.runKernel(l_,n)}const Ohe=Ge({sinh_:Fht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bht(t,e,n){const r=ke(t,"x","slice1d");return ue(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Ur(r,[e],[n])}const TV=Ge({slice1d_:Bht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uht(t,e,n){const r=ke(t,"x","slice2d");return ue(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Ur(r,e,n)}const Fhe=Ge({slice2d_:Uht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zht(t,e,n){const r=ke(t,"x","slice3d");return ue(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Ur(r,e,n)}const EV=Ge({slice3d_:zht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vht(t,e,n){const r=ke(t,"x","slice4d");return ue(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Ur(r,e,n)}const KA=Ge({slice4d_:Vht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wht(t,e=-1){const n=ke(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return Fe.runKernel(H3,r,i)}const MV=Ge({softmax_:Wht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ght(t){ue(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return Fe.runKernel(k8,e)}const Bhe=Ge({fft_:Ght});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hht(t){ue(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return Fe.runKernel(P8,e)}const VF=Ge({ifft_:Hht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jht(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=We(t,[n,e]);r=VF(i)}else{const i=[n,2*(e-1)],s=We(YA(t),[n,e]),o=We(uV(t),[n,e]),a=pg(Ur(s,[0,1],[n,e-2]),1),l=Oe(pg(Ur(o,[0,1],[n,e-2]),1),yr(-1)),c=Qo([s,a],1),u=Qo([o,l],1),d=We(lg(c,u),[i[0],i[1]]);r=VF(d)}if(r=YA(r),t.rank===3&&t.shape[0]!==0){const i=r,s=t.shape[0];r=We(r,[s,r.shape[0]/s,r.shape[1]]),i.dispose()}return r}const Xht=Ge({irfft_:jht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qht(t,e,n=0){const i={x:ke(t,"x","split")},s={numOrSizeSplits:e,axis:n};return Fe.runKernel(G3,i,s)}const cl=Ge({split_:qht});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yht(t,e){ue(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const p=t.shape.map(g=>0),v=t.shape.map(g=>g);v[t.shape.length-1]=e,i=Ur(t,p,v),n=e}else if(e!=null&&e>n){const p=t.shape.map(v=>v);p[t.shape.length-1]=e-n,i=Qo([t,gs(p)],t.shape.length-1),n=e}else i=t;const s=or(i),o=We(lg(i,s),[r,n]),a=Bhe(o),l=Math.floor(n/2)+1,c=YA(a),u=uV(a),d=cl(c,[l,n-l],c.shape.length-1),f=cl(u,[l,n-l],u.shape.length-1),h=i.shape.slice();return h[i.shape.length-1]=l,We(lg(d[0],f[0]),h)}const Kht=Ge({rfft_:Yht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zht(t,e){let n=ke(t,"a","squaredDifference"),r=ke(e,"b","squaredDifference");[n,r]=Pi(n,r),kn(n.shape,r.shape);const i={a:n,b:r},s={};return Fe.runKernel(h_,i,s)}const Jht=Ge({squaredDifference_:Zht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qht(t,e){const n=ke(t,"x","squeeze","string_or_numeric");return We(n,Qh(n.shape,e).newShape)}const C_=Ge({squeeze_:Qht});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ept(t,e=0){const n=ohe(t,"tensors","stack","string_or_numeric");ue(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&ue(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return Fe.runKernel(P3,r,i)}const cf=Ge({stack_:ept});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tpt(t,e=0){const r={x:ke(t,"x","step")},i={alpha:e};return Fe.runKernel(y_,r,i)}const T_=Ge({step_:tpt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function npt(t,e,n,r,i=0,s=0,o=0,a=0,l=0){const u={x:ke(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return Fe.runKernel(j8,u,d)}const rpt=Ge({stridedSlice_:npt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ipt(t){const n={x:ke(t,"x","tan","float32")};return Fe.runKernel(m_,n)}const spt=Ge({tan_:ipt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ca(t,e){o8(t);const n=x_(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return b_(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YD(t,e,n){if(o8(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=x_(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return b_(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function opt(t,e,n){if(o8(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=x_(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return b_(t,e,r,n)}function Uhe(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(s+` update.rank != ${i+t.length-r}`);for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(s+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(s+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function apt(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}Uhe(n,e,t)}function zg(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length;let o=1;for(let d=i;d<s;++d)o*=n[d];const a=i<1?1:i,l=it(e.shape)/a,c=[...on(n.slice(0,i)),1],u=it(n);return{sliceRank:i,numUpdates:l,sliceSize:o,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lpt(t,e=1,n=!0){const r=ke(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const s={x:r},o={k:e,sorted:n},[a,l]=Fe.runKernel(X8,s,o);return{values:a,indices:l}}const cpt=Ge({topk_:lpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function upt(t,e=0,n=1,r,i){if(gf(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new Ihe(e,n,r,!0,i),o=Hn(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}const zhe=Ge({truncatedNormal_:upt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dpt(t,e=0){const n=ke(t,"x","unique","string_or_numeric");ue(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[s,o]=Fe.runKernel(Y8,r,i);return{values:s,indices:o}}const fpt=Ge({unique_:dpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hpt(t,e,n){const r=ke(t,"x","unsortedSegmentSum"),i=ke(e,"segmentIds","unsortedSegmentSum","int32");ue(by(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:i},o={numSegments:n};return Fe.runKernel(X3,s,o)}const Vhe=Ge({unsortedSegmentSum_:hpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ppt(t,e=0){const n=ke(t,"x","unstack","string_or_numeric");ue(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return Fe.runKernel(j3,r,i)}const mg=Ge({unstack_:ppt});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mpt(t,e=!0,n,r){return Fe.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Whe(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=Hn(t,"int32"),i=Hn([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const o=r.indexToLoc(n[s]),a=s*t.length;i.values.set(o,a)}return i.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gpt(t,e,n){const r=ke(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),ue(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{ue(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},s={perm:e};return r.dtype==="complex64"?Ze(()=>{let o=YA(r),a=uV(r);return o=Fe.runKernel(Gv,{x:o},s),a=Fe.runKernel(Gv,{x:a},s),n&&(a=Ri(a)),lg(o,a)}):Fe.runKernel(Gv,i,s)}const ir=Ge({transpose_:gpt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vpt(t,e){if(e==null)return t.shape.slice();if(wr(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ypt(t,e,n,r){const i=ke(t,"x","dropout");if(ue(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),ue(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Qi?i.clone():i;const s=vpt(i,n),o=1-e,a=gn(eP(wt(__(s,0,1,"float32",r),o)),o);return Oe(i,a)}const xpt=Ge({dropout_:ypt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bpt(t,e,n,r,i,s="NHWC",o){let a=t;t.rank===3&&(a=We(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=We(e,[1,e.shape[0],e.shape[1],e.shape[2]])),ue(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),ue(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),ue(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=s==="NHWC"?a.shape[3]:a.shape[1],u=s==="NHWC"?l.shape[3]:l.shape[1];ue(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),ue(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),oa("conv2dDerFilter",i,o);const d={x:a,dy:l},f={strides:r,pad:i,dataFormat:s,dimRoundingMode:o,filterShape:n};return Fe.runKernel(y8,d,f)}const AV=Ge({conv2DBackpropFilter_:bpt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kV(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return Oe(t,T_(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function IV(t,e){let n=e;const r=as(t.shape,e.shape);return r.length>0&&(n=dn(n,r)),We(n,t.shape)}function RV(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Ug(t);if(e==="elu")return J3(t);if(e==="relu6")return Rhe(t);if(e==="prelu")return vV(t,n);if(e==="leakyrelu")return dV(t,r);if(e==="sigmoid")return hx(t);throw new Error(`Unknown fused activation ${e}.`)}const PV=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wpt({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",PV(Fe.state.gradientDepth,l)===!1){ue(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=hg(t,e,n,r,i,s,o);return a!=null&&(C=wt(C,a)),RV(C,l,c,u)}const d=ke(t,"x","conv2d","float32"),f=ke(e,"filter","conv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=We(d,[1,d.shape[0],d.shape[1],d.shape[2]])),ue(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),ue(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),oa("fused conv2d",r,o);const v=i==="NHWC"?h.shape[3]:h.shape[1];ue(f.shape[2]===v,()=>`Error in conv2d: depth of input (${v}) must match input depth for filter ${f.shape[2]}.`),ue(io(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const g=Bs(h.shape,f.shape,n,s,r,o);let m;a!=null&&(m=ke(a,"bias","fused conv2d"),[m]=Pi(m,d),i==="NHWC"?kn(g.outShape,m.shape):(ue(m.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${m.shape.length}.`),ue(m.shape.length===0||m.shape[0]===g.outChannels||m.shape[0]===1,()=>`Error in fused conv2d: bias shape (${m.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let y;if(c!=null){const C=c.shape;if(ue(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)ue(C[0]===1||C[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${g.outChannels}).`);else if(C.length===3)try{kn(C,g.outShape)}catch{const A=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(A)}y=ke(c,"prelu weights","fused conv2d")}const x=(C,T)=>{ue(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[A,M,E,P]=T,N=kV(C,E,l);ue(dg(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const F=sV(M.shape,N,A,n,r),$=AV(M,N,A.shape,n,r),O=[F,$];if(P!=null){const z=IV(P,N);O.push(z)}return O},S={x:h,filter:f,bias:m,preluActivationWeights:y},_={strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?Ey((T,A,M)=>{let E=Fe.runKernel(zA,S,_);return M([A,T,E]),p&&(E=We(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:x}})(h,f):Ey((T,A,M,E)=>{let P=Fe.runKernel(zA,S,_);return E([A,T,P,M]),p&&(P=We(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:x}})(h,f,m)}const Spt=Ge({fusedConv2d_:wpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _pt(t,e,n,r,i,s=[1,1],o){let a=t;t.rank===3&&(a=We(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=We(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:i,dimRoundingMode:o,dilations:s,filterShape:n};return Fe.runKernel(T8,c,u)}const Cpt=Ge({depthwiseConv2dNativeBackpropFilter_:_pt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tpt(t,e,n,r,i,s=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=We(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:i,dimRoundingMode:o,dilations:s,inputShape:t},d=Fe.runKernel(E8,c,u);return l?We(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Ept=Ge({depthwiseConv2dNativeBackpropInput_:Tpt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mpt({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(PV(Fe.state.gradientDepth,s)===!1){let P=vr(t,e,n,r);return i!=null&&(P=wt(P,i)),RV(P,s,o,a)}let l=ke(t,"a","fused matMul"),c=ke(e,"b","fused matMul");[l,c]=Pi(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?c.shape[c.rank-2]:c.shape[c.rank-1],p=l.shape.slice(0,-2),v=c.shape.slice(0,-2),g=it(p),m=it(v);ue(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=kn(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([f,h]),S=n?We(l,[g,u,f]):We(l,[g,f,u]),_=r?We(c,[m,h,d]):We(c,[m,d,h]);let C;i!=null&&(C=ke(i,"bias","fused matMul"),[C]=Pi(C,l),kn(x,C.shape));let T;o!=null&&(T=ke(o,"prelu weights","fused matMul"));const A=(P,N)=>{const[F,$,O,z]=N,X=kV(We(P,O.shape),O,s);let D,B;if(!n&&!r?(D=vr(X,$,!1,!0),B=vr(F,X,!0,!1)):!n&&r?(D=vr(X,$,!1,!1),B=vr(X,F,!0,!1)):n&&!r?(D=vr($,X,!1,!0),B=vr(F,X,!1,!1)):(D=vr($,X,!0,!0),B=vr(X,F,!0,!0)),i!=null){const V=IV(z,X);return[D,B,V]}else return[D,B]},M={a:S,b:_,bias:C,preluActivationWeights:T},E={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return i==null?Ey((N,F,$)=>{const O=Fe.runKernel(UA,M,E);return $([N,F,O]),{value:We(O,x),gradFunc:A}})(S,_):Ey((N,F,$,O)=>{const z=Fe.runKernel(UA,M,E);return O([N,F,z,$]),{value:We(z,x),gradFunc:A}})(S,_,C)}const KZ=Ge({fusedMatMul_:Mpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Apt(t,e,n,r,i="bilinear",s=0){const o=ke(t,"image","cropAndResize"),a=ke(e,"boxes","cropAndResize","float32"),l=ke(n,"boxInd","cropAndResize","int32"),c=a.shape[0];ue(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),ue(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),ue(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),ue(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),ue(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),ue(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const u={image:o,boxes:a,boxInd:l},d={method:i,extrapolationValue:s,cropSize:r};return Fe.runKernel(S8,u,d)}const kpt=Ge({cropAndResize_:Apt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ipt(t){const e=ke(t,"image","flipLeftRight","float32");ue(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return Fe.runKernel(R8,n,{})}const Rpt=Ge({flipLeftRight_:Ipt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ppt(t){const e=ke(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];ue(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),ue(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,Fc(e,i)}const Npt=Ge({grayscaleToRGB_:Ppt});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $pt(t){const e=ke(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];ue(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),ue(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,s=Ut(e,"float32"),o=Ca([.2989,.587,.114]);let a;switch(e.rank){case 2:a=L1("ij,j->i",s,o);break;case 3:a=L1("ijk,k->ij",s,o);break;case 4:a=L1("ijkl,l->ijk",s,o);break;case 5:a=L1("ijklm,m->ijkl",s,o);break;case 6:a=L1("ijklmn,n->ijklm",s,o);break;default:throw new Error("Not a valid tensor rank.")}return a=Xo(a,-1),Ut(a,i)}const Dpt=Ge({rgbToGrayscale_:$pt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lpt(t,e,n=0,r=.5){const i=ke(t,"image","rotateWithOffset","float32");ue(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const s={image:i},o={radians:e,fillValue:n,center:r};return Fe.runKernel(K8,s,o)}const Opt=Ge({rotateWithOffset_:Lpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mx(t,e,n,r,i,s){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),s==null&&(s=0);const o=t.shape[0];return n=Math.min(n,o),ue(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),ue(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),ue(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),ue(e.rank===1,()=>"scores must be a 1D tensor"),ue(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),ue(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fpt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=ke(t,"boxes","nonMaxSuppression","float32"),o=ke(e,"scores","nonMaxSuppression","float32"),a=mx(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return Fe.runKernel(O8,{boxes:s,scores:o},l)}const Bpt=Ge({nonMaxSuppression_:Fpt});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Upt(t,e,n){const r=zpt(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function zpt(t,e,n){return Wpt(t,e,n||Vpt)}function Vpt(t,e){return t>e?1:t<e?-1:0}function Wpt(t,e,n){let r=0,i=t.length,s=0,o=!1;for(;r<i;){s=r+(i-r>>>1);const a=n(e,t[s]);a>0?r=s+1:(i=s,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NV(t,e,n,r,i){return LV(t,e,n,r,i,0)}function $V(t,e,n,r,i,s){return LV(t,e,n,r,i,0,!1,s,!0)}function DV(t,e,n,r,i,s){return LV(t,e,n,r,i,s,!0)}function LV(t,e,n,r,i,s,o=!1,a=!1,l=!1){const c=[];for(let g=0;g<e.length;g++)e[g]>i&&c.push({score:e[g],boxIndex:g,suppressBeginIndex:0});c.sort(ZZ);const u=s>0?-.5/s:0,d=[],f=[];for(;d.length<n&&c.length>0;){const g=c.pop(),{score:m,boxIndex:y,suppressBeginIndex:x}=g;if(m<i)break;let S=!1;for(let _=d.length-1;_>=x;--_){const C=Gpt(t,y,d[_]);if(C>=r){S=!0;break}if(g.score=g.score*Hpt(r,u,C),g.score<=i)break}g.suppressBeginIndex=d.length,S||(g.score===m?(d.push(y),f.push(g.score)):g.score>i&&Upt(c,g,ZZ))}const h=d.length,p=n-h;a&&p>0&&(d.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const v={selectedIndices:d};return o&&(v.selectedScores=f),l&&(v.validOutputs=h),v}function Gpt(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),h=(a-s)*(l-o),p=(d-c)*(f-u);if(h<=0||p<=0)return 0;const v=Math.max(s,c),g=Math.max(o,u),m=Math.min(a,d),y=Math.min(l,f),x=Math.max(m-v,0)*Math.max(y-g,0);return x/(h+p-x)}function Hpt(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function ZZ(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function jpt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=ke(t,"boxes","nonMaxSuppressionAsync"),o=ke(e,"scores","nonMaxSuppressionAsync"),a=mx(s,o,n,r,i);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;const l=await Promise.all([s.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:d}=NV(c,u,n,r,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),Ca(d,"int32")}const Xpt=jpt;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qpt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=ke(t,"boxes","nonMaxSuppression"),a=ke(e,"scores","nonMaxSuppression"),l=mx(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c={boxes:o,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s},d=Fe.runKernel(B8,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const Ypt=Ge({nonMaxSuppressionWithScore_:qpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Kpt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=ke(t,"boxes","nonMaxSuppressionAsync"),a=ke(e,"scores","nonMaxSuppressionAsync"),l=mx(o,a,n,r,i,s);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,s=l.softNmsSigma;const c=await Promise.all([o.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:f,selectedScores:h}=DV(u,d,n,r,i,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Ca(f,"int32"),selectedScores:Ca(h)}}const Zpt=Kpt;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jpt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=ke(t,"boxes","nonMaxSuppression"),a=ke(e,"scores","nonMaxSuppression"),l=mx(o,a,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,f={boxes:o,scores:a},h={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:s},p=Fe.runKernel(F8,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}const Qpt=Ge({nonMaxSuppressionPadded_:Jpt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function emt(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=!1){const o=ke(t,"boxes","nonMaxSuppressionAsync"),a=ke(e,"scores","nonMaxSuppressionAsync"),l=mx(o,a,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([o.data(),a.data()]),{selectedIndices:p,validOutputs:v}=$V(f,h,c,u,d,s);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Ca(p,"int32"),validOutputs:yr(v,"int32")}}const tmt=emt;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nmt(t,e,n=!1,r=!1){const i=ke(t,"images","resizeBilinear");ue(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),ue(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),ue(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=We(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=Fe.runKernel(F3,a,l);return o?We(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Ghe=Ge({resizeBilinear_:nmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rmt(t,e,n=!1,r=!1){const i=ke(t,"images","resizeNearestNeighbor");ue(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),ue(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),ue(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),ue(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=i,o=!1;i.rank===3&&(o=!0,s=We(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=Fe.runKernel(O3,a,l);return o?We(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Hhe=Ge({resizeNearestNeighbor_:rmt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imt(t,e="binary",n=!1,r=.5){const i=ke(t,"image","threshold"),s=.2989,o=.587,a=.114,l=i.shape[0]*i.shape[1];let c=Oe(Ca([r]),255),u,d,f,h;if(ue(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),ue(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),ue(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),ue(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[u,d,f]=cl(i,[1,1,1],-1);const g=Oe(u,s),m=Oe(d,o),y=Oe(f,a);h=wt(wt(g,m),y)}else h=t;if(e==="otsu"){const g=tdt(Ut(Phe(h),"int32"),Rb([]),256);c=smt(g,l)}const p=n?px(h,c):vl(h,c);return Ut(Oe(p,255),"int32")}function smt(t,e){let n=Ca([-1]),r=Ca([0]),i=Ca([0]),s,o,a,l,c,u;for(let d=0;d<t.size-1;d++){s=Ur(t,0,d+1),o=Ur(t,d+1),c=gn(dn(s),e),u=gn(dn(o),e);const f=dn(Oe(s,fS(0,s.size)));a=gn(f,dn(s));const h=Z3(o.shape,s.size),p=wt(fS(0,o.size),h),v=Oe(o,p);l=gn(dn(v),dn(o));const g=bn(a,l),m=bn(a,l),y=Oe(c,u);i=Oe(Oe(y,g),m);const x=vl(i,r);r=Po(x,i,r),n=Po(x,Ca([d]),n)}return n}const omt=Ge({threshold_:imt});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function amt(t,e,n="nearest",r="constant",i=0,s){const o=ke(t,"image","transform","float32"),a=ke(e,"transforms","transform","float32");ue(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),ue(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),ue(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:o,transforms:a},c={interpolation:n,fillMode:r,fillValue:i,outputShape:s};return Fe.runKernel(q8,l,c)}const lmt=Ge({transform_:amt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cmt(t,e,n){const r=ke(t,"a","bandPart");ue(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(ue(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),ue(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),a=ke(e<0?s:e,"numLower","bandPart")):(ue(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Po(XA(e,0),s,dS(e,s))),typeof n=="number"?(ue(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),ue(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=ke(n<0?o:n,"numUpper","bandPart")):(ue(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Po(XA(n,0),o,dS(n,o)));const c=We(fS(0,s,1,"int32"),[-1,1]),u=fS(0,o,1,"int32"),d=bn(c,u),f=lf(px(d,a),Fg(d,Ri(l))),h=gs([s,o],r.dtype);return We(cf(mg(We(r,[-1,s,o])).map(p=>Po(f,p,h))),i)}const umt=Ge({bandPart_:cmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dmt(t){let e;if(Array.isArray(t)){e=!1,ue(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let s=1;s<t.length;++s)ue(t[s].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${i})`)}else e=!0,t=cl(t,t.shape[0],0).map(i=>C_(i,[0]));ue(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(Fe.tidy(()=>{let s=r[i];if(i>0)for(let o=0;o<i;++o){const a=Oe(dn(Oe(n[o],s)),n[o]);s=bn(s,a)}return gn(s,Q3(s,"euclidean"))}));return e?cf(n,0):n}const fmt=Ge({gramSchmidt_:dmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hmt(t,e=!1){if(ue(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return JZ(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=mg(We(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];r.forEach(l=>{const[c,u]=JZ(l,e);i.push(c),s.push(u)});const o=We(cf(i,0),t.shape),a=We(cf(s,0),t.shape);return[o,a]}}function JZ(t,e=!1){return Fe.tidy(()=>{ue(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=_he(n),s=Lm(t);const o=YD([[1]],[1,1]);let a=Lm(o);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=s,d=a,f=i;[a,s,i]=Fe.tidy(()=>{const h=Ur(s,[c,c],[n-c,1]),p=Q3(h),v=Ur(s,[c,c],[1,1]),g=Po(vl(v,0),YD([[-1]]),YD([[1]])),m=bn(v,Oe(g,p)),y=gn(h,m);y.shape[0]===1?a=Lm(o):a=Qo([o,Ur(y,[1,0],[y.shape[0]-1,y.shape[1]])],0);const x=Ri(gn(vr(g,m),p)),S=Ur(s,[c,0],[n-c,r]),_=Oe(x,a),C=ir(a);if(c===0)s=bn(S,vr(_,vr(C,S)));else{const M=bn(S,vr(_,vr(C,S)));s=Qo([Ur(s,[0,0],[c,r]),M],0)}const T=ir(_),A=Ur(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=bn(A,vr(vr(A,a),T));else{const M=bn(A,vr(vr(A,a),T));i=Qo([Ur(i,[0,0],[n,c]),M],1)}return[a,s,i]}),Bn([u,d,f])}return!e&&n>r&&(i=Ur(i,[0,0],[n,r]),s=Ur(s,[0,0],[r,r])),[i,s]})}const pmt=Ge({qr_:hmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gd={flipLeftRight:Rpt,grayscaleToRGB:Npt,resizeNearestNeighbor:Hhe,resizeBilinear:Ghe,rgbToGrayscale:Dpt,rotateWithOffset:Opt,cropAndResize:kpt,nonMaxSuppression:Bpt,nonMaxSuppressionAsync:Xpt,nonMaxSuppressionWithScore:Ypt,nonMaxSuppressionWithScoreAsync:Zpt,nonMaxSuppressionPadded:Qpt,nonMaxSuppressionPaddedAsync:tmt,threshold:omt,transform:lmt},mmt={bandPart:umt,gramSchmidt:fmt,qr:pmt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gmt=new Map,vmt=new Map;class gx{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Ul{constructor(){this.classNameMap={}}static getMap(){return Ul.instance==null&&(Ul.instance=new Ul),Ul.instance}static register(e){Ul.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function pt(t,e,n){ue(t.className!=null,()=>"Class being registered does not have the static className property defined."),ue(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),ue(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return Ul.register(t),gmt.set(i,t),vmt.set(t,i),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class op extends gx{minimize(e,n=!1,r){const{value:i,grads:s}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(o)}else this.applyGradients(s);return Bn(s),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return _ft(e,n)}dispose(){this.iterations_!=null&&Bn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:yr(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(op,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jhe extends op{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=Fe.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Fe.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:Ze(()=>or(s).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:Ze(()=>or(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;Ze(()=>{const u=wt(Oe(l,this.rho),Oe(Yr(a),1-this.rho)),d=Oe(gn($o(wt(c,this.epsilon)),$o(wt(l,this.epsilon))),a),f=wt(Oe(c,this.rho),Oe(Yr(d),1-this.rho));l.assign(u),c.assign(f);const h=wt(Oe(d,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Bn(this.accumulatedGrads.map(e=>e.variable)),Bn(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xhe extends op{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Fe.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:Ze(()=>Z3(s.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[i].variable;Ze(()=>{const l=wt(a,Yr(o));a.assign(l);const c=wt(Oe(gn(o,$o(wt(l,Fe.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Bn(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qhe extends op{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Ze(()=>{this.accBeta1=yr(n).variable(),this.accBeta2=yr(r).variable()}),i==null&&(this.epsilon=Fe.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ze(()=>{const r=bn(1,this.accBeta1),i=bn(1,this.accBeta2);n.forEach((s,o)=>{const a=Fe.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:Ze(()=>or(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${s}/v`,variable:Ze(()=>or(a).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,f=wt(Oe(u,this.beta1),Oe(c,1-this.beta1)),h=wt(Oe(d,this.beta2),Oe(Yr(c),1-this.beta2)),p=gn(f,r),v=gn(h,i);u.assign(f),d.assign(h);const g=wt(Oe(gn(p,wt($o(v),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(Oe(this.accBeta1,this.beta1)),this.accBeta2.assign(Oe(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Bn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Bn(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Ze(()=>{this.accBeta1.assign(Ty(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ty(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yhe extends op{static get className(){return"Adamax"}constructor(e,n,r,i=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Ze(()=>{this.iteration=yr(0).variable(),this.accBeta1=yr(n).variable()}),i==null&&(this.epsilon=Fe.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Ze(()=>{const r=bn(1,this.accBeta1),i=gn(-this.learningRate,wt(Oe(this.iteration,this.decay),1));n.forEach((s,o)=>{const a=Fe.registeredVariables[s],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${s}/m`,variable:or(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${s}/v`,variable:or(a).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,f=wt(Oe(u,this.beta1),Oe(c,1-this.beta1)),h=Oe(d,this.beta2),p=So(c),v=ip(h,p);u.assign(f),d.assign(v);const g=wt(Oe(gn(i,r),gn(f,wt(v,this.epsilon))),a);a.assign(g)}),this.iteration.assign(wt(this.iteration,1)),this.accBeta1.assign(Oe(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Bn(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Bn(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OV extends op{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const o=Fe.registeredVariables[r];Ze(()=>{const a=wt(Oe(this.c,s),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Wu(yr(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Khe extends OV{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=yr(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Fe.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:Ze(()=>or(s).variable(!1))});const o=this.accumulations[i].variable,a=Array.isArray(e)?e[i].tensor:e[r];a!=null&&Ze(()=>{let l;const c=wt(Oe(this.m,o),a);this.useNesterov?l=wt(Oe(this.c,wt(a,Oe(c,this.m))),s):l=wt(Oe(this.c,c),s),o.assign(c),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Bn(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zhe extends op{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,i==null&&(this.epsilon=Fe.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const s=Fe.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:Ze(()=>or(s).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:Ze(()=>or(s).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:Ze(()=>or(s).variable(o))});const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;Ze(()=>{const u=wt(Oe(l,this.decay),Oe(Yr(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[i].variable,f=wt(Oe(d,this.decay),Oe(a,1-this.decay)),h=gn(Oe(a,this.learningRate),$o(bn(u,wt(Yr(f),this.epsilon)))),p=wt(Oe(c,this.momentum),h);l.assign(u),d.assign(f),c.assign(p);const v=bn(s,p);s.assign(v)}else{const d=wt(Oe(l,this.decay),Oe(Yr(a),1-this.decay)),f=wt(Oe(c,this.momentum),gn(Oe(a,this.learningRate),$o(wt(d,this.epsilon))));l.assign(d),c.assign(f);const h=bn(s,f);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Bn(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Bn(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Bn(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ymt=[jhe,Xhe,qhe,Yhe,Khe,Zhe,OV];function xmt(){for(const t of ymt)pt(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QZ(t,e,n,r){o(t),n=n??0,r=r??1,a(n,r);let i=0;const s=l=>(l.then(c=>{const u=n+ ++i/t.length*(r-n);return e(u),c}),l);function o(l){ue(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){ue(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),ue(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),ue(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function bmt(t,e){e==null&&(e={});const n=e.fetchFunc==null?Qe().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),i=0,s=.5,a=(e.onProgress==null?await Promise.all(r):await QZ(r,e.onProgress,i,s)).map(d=>d.arrayBuffer()),l=.5,c=1;return e.onProgress==null?await Promise.all(a):await QZ(a,e.onProgress,l,c)}function wmt(t,e){var n;const r=e.fetchFunc==null?Qe().platform.fetch:e.fetchFunc;let i=0,s;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async o=>{for(var a;i<t.length;){s||(s=(await r(t[i],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await s.read();if(l){i++,s=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,i/t.length);continue}o.enqueue(c);return}o.close()}})}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Smt="application/octet-stream",_mt="application/json";class FV{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(ue(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Qe().platform.fetch,ue(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&ue(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=Dct(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(i)],{type:_mt}),"model.json"),e.weightData!=null){const o=tp.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:Smt}),"model.weights.bin")}const s=await this.fetch(this.path,n);if(s.ok)return{modelArtifactsInfo:eV(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,i=n.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return Oct(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=XZ(e.weightsManifest),i=()=>wmt(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:i})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=Cmt(n),s=this.weightPathPrefix||r,o=[],a=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(c)):o.push(s+c+i);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const n=await this.getWeightUrls(e),r=XZ(e),i=await bmt(n,this.loadOptions);return[r,i]}}FV.URL_SCHEME_REGEX=/^https?:\/\//;function Cmt(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}function eJ(t){return t.match(FV.URL_SCHEME_REGEX)!=null}const Jhe=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>eJ(r)):n=eJ(t),n)return Qhe(t,e)}return null};ds.registerSaveRouter(Jhe);ds.registerLoadRouter(Jhe);function Qhe(t,e){return new FV(t,e)}function Tmt(t,e){return Qhe(t,e)}function BV(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(it(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,s=i[i.length-1];let o=1;for(let d=0;d<i.length-1;++d)o*=i[d];const a=t.shape,l=i.slice();l.pop();let c=1;for(let d=s;d<n;++d)c*=a[d],l.push(a[d]);const u=[...on(t.shape).map(d=>d/c),1].slice(0,s);return[l,o,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WF=-2,Emt=-1;function UV(t,e,n){const r=t.shape.length;ue(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),ue(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)ue(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function Mmt(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function zV(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function epe(t,e,n,r){const i=[...t];for(let s=i.length;s<r.length;s++)i.push(1);for(let s=0;s<n;s++)s===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function tpe(t,e,n){return n<=t?n:n-(e-1)}function npe(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Amt(t,e,n,r,i,s,o,a,l){const c=t.length;let u=new Array(c),d=new Array(c),f=new Array(c);if(e.length&&n>0){const h=e[0],p=n+1;u=rpe(o,h,p,r,t),d=ipe(a,h,p,i,t),f=epe(s,h,p,t)}else for(let h=0;h<c;h++)u[h]=ope(o,r,s,t,h,l),d[h]=ape(a,i,s,t,h,l),f[h]=spe(s,h,l);return{begin:u,end:d,strides:f}}function rpe(t,e,n,r,i){const s=[...i],o=npe(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=0;else{const l=tpe(e,n,a);let c=r[l];t&1<<l&&(c=0),s[a]=c}return s}function ipe(t,e,n,r,i){const s=[...i],o=npe(n,e);for(let a=0;a<s.length;a++)if(o.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const l=tpe(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),s[a]=c}for(let a=0;a<s.length;a++){const l=i[a];s[a]<0&&(s[a]+=l),s[a]=og(0,s[a],i[a])}return s}function spe(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function ope(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),o=og(0,o,l-1),o}function ape(t,e,n,r,i,s){let o=e[i];const a=n[i]||1;(t&1<<i||s&1<<i||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),a>0?o=og(0,o,l):o=og(-1,o,l-1),o}function VV(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function WV(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function tP(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{ue(o!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(i).fill(-1):typeof n=="number"?s=[n,...new Array(i-1).fill(-1)]:n.length<i?s=n.concat(new Array(i-n.length).fill(-1)):s=n,s=s.map((o,a)=>o>=0?o:(ue(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,s]}function GV(t,e,n,r,i,s,o,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:s,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)u&&1<<x&a&&d.numAddAxisAfterEllipsis++,1<<x&o&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};kmt(d,f);let h=!0,p=!0,v=!0;const g=[],m=[];for(let x=0;x<t.length;++x){if(f.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const S=!!(f.shrinkAxisMask&1<<x),_=t[x];if(_===-1){g.push(S?1:-1);continue}const C=[f.beginMask&1<<x,f.endMask&1<<x],T=[f.strides[x]>0?0:-1,f.strides[x]>0?_:_-1];if(S&&f.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&f.strides[x]===1;const A=!!(f.beginMask&1<<x&&f.endMask&1<<x);if(f.beginValid&&f.endValid){if(S){const N=f.begin[x]<0?_+f.begin[x]:f.begin[x];if(f.begin[x]=N,f.end[x]=f.begin[x]+1,N<0||N>=_)throw Error(`slice index ${f.begin[x]} of dimension ${x} out of bounds.`)}else f.begin[x]=tJ(f.begin[x],0,f.strides[x],_,C,T),f.end[x]=tJ(f.end[x],1,f.strides[x],_,C,T);const P=f.strides[x]===1&&f.begin[x]===0&&f.end[x]===_;h=h&&P,p=p&&(x===0&&f.strides[x]===1||P)}else h=h&&f.strides[x]===1&&A,p=p&&(x===0&&f.strides[x]===1||A);let M,E=!1;if(f.beginValid&&f.endValid?(M=f.end[x]-f.begin[x],E=!0):S?(M=1,E=!0):A&&_>=0&&(f.strides[x]<0?M=-_:M=_,E=!0),E){let P;M===0||M<0!=f.strides[x]<0?P=0:P=Math.trunc(M/f.strides[x])+(M%f.strides[x]!==0?1:0),g.push(P)}else g.push(-1)}for(let x=0;x<f.finalShapeGatherIndices.length;++x){const S=f.finalShapeGatherIndices[x];S>=0?m.push(g[S]):S===WF&&m.push(1)}return{finalShapeSparse:m.filter((x,S)=>f.finalShapeGatherIndices[S]!==WF),finalShape:m,isIdentity:h,sliceDim0:p,isSimpleSlice:v,begin:f.begin,end:f.end,strides:f.strides}}function kmt(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(WF),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Emt),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function tJ(t,e,n,r,i,s){if(i[e])return n>0?s[e]:s[e+1&1];{const o=t<0?r+t:t;return o<s[0]?s[0]:o>s[1]?s[1]:o}}const Imt=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:UV,computeFlatOffset:WV,computeOutShape:zV,getNormalizedAxes:Amt,isSliceContinous:VV,maskToAxes:Mmt,parseSliceParams:tP,sliceInfo:GV,startForAxis:ope,startIndicesWithElidedDims:rpe,stopForAxis:ape,stopIndicesWithElidedDims:ipe,stridesForAxis:spe,stridesWithElidedDims:epe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rmt{static sgd(e){return new OV(e)}static momentum(e,n,r=!1){return new Khe(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,s=!1){return new Zhe(e,n,r,i,s)}static adam(e=.001,n=.9,r=.999,i=null){return new qhe(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new jhe(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,s=0){return new Yhe(e,n,r,i,s)}static adagrad(e,n=.1){return new Xhe(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V0=Rmt;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pmt=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function lpe(){return new Promise(t=>Pmt(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HV(t,e){const n=t[0].length;t.forEach((i,s)=>{ue(i.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),ue(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,s)=>{for(let o=0;o<n;o++)ue(o===e||i[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${s}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function Gu(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Rc;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Rc||(Rc={}));function cpe(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const s=n[i],o=r[r.length-n.length+i],a=r[o];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${s} but shape[${i+t}] = ${a}`)}else r[o]=s}return r}function upe(t){const e={FIRST_DIM_SIZE:Rc.FIRST_DIM_SIZE,VALUE_ROWIDS:Rc.VALUE_ROWIDS,ROW_LENGTHS:Rc.ROW_LENGTHS,ROW_SPLITS:Rc.ROW_SPLITS,ROW_LIMITS:Rc.ROW_LIMITS,ROW_STARTS:Rc.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function dpe(t){return t.length===0?0:t[0]===Rc.FIRST_DIM_SIZE?t.length-1:t.length}function fpe(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const s=t[i],o=e[i+1];if(s>=0&&o>=0&&s!==1&&s!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${s} but ragged tensor input.flatValues.shape[${i-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jV=30;function nP(t){return t<=jV?t:TF(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XV(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E_(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const s=e.length;for(let o=0;o<s;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(s+1))}return i}function M_(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],s=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?s.push(o):i.push(o);r.push(...i),r.push(0),r.push(...s)}return r}function A_(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?i.push(e[s-1]*t[s]):i.push(t[s]/e[s-1]):i.push(t[s]);return i}function qV(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function YV(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rP=1.7580993408473768,iP=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KV=.3275911,ZV=.254829592,JV=-.284496736,QV=1.421413741,eW=-1.453152027,tW=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uf(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function hpe(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function ppe(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function mpe(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function nW(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function gpe(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function vpe(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function ype(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),s=Math.sin(r);return{real:i,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KD="->",Nmt=/->/g,nJ=",",rJ="...";function rW(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(Nmt,"").length)/KD.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${KD}").`);const[r,i]=t.split(KD);ue(r.indexOf(rJ)===-1,()=>`The ellipsis notation ("${rJ}") is not supported yet.`);const s=r.split(nJ),o=s.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<i.length;++f){const h=i[f];if(!s.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let f=0;f<r.length;++f){const h=r[f];a.indexOf(h)===-1&&h!==nJ&&a.push(h)}const l=new Array(s.length);for(let f=0;f<o;++f){if(new Set(s[f].split("")).size!==s[f].length)throw new Error(`Found duplicate axes in input component ${s[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let h=0;h<s[f].length;++h)l[f].push(a.indexOf(s[f][h]))}const c=a.length,u=i.length,d=[];for(let f=u;f<c;++f)d.push(f);return{allDims:a,summedDims:d,idDims:l}}function iW(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function sW(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const s=n[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=s[o]:ue(r[e[i][o]]===s[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(s)}, but got dimension ${s[o]}`)}}function oW(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let o=0;o<i;++o)r.push([]);const s=[];for(let o=0;o<n.length;++o){const a=n[o],l=$mt(e,a);for(const c of l)s.indexOf(c)===-1&&(r[o].push(c),s.push(c))}return{path:n,steps:r}}function aW(t){return t.every((e,n)=>e===n)}function $mt(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function lW(t,e,n=0){let r=[];if(typeof e=="number")ue(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);ue(i<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[s]=t.shape[n]-o}ue(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xpe(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function bpe(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function wpe(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Spe(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function _pe(t,e){return`size ${t} must be non-negative, not ${e}`}function Cpe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Tpe(t,e){const n=it(t),r=it(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function Epe(t,e){const n=it(t),r=it(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GF(){return"segment ids must be >= 0"}function Mpe(){return"segment ids are not increasing"}function Ape(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function kpe(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ipe(t,e){let n=!1,r;for(t<=jV?(r=t,n=!0):r=TF(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=TF(t,r+1);return r}function Rpe(t,e,n){const r=[],i=t.length;for(let s=0;s<i;s++)s!==e?r.push(t[s]):r.push(n);return r}function cW(t,e,n,r){const i=e.shape.length,s=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],a=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<i;d++)a.push(e.shape[d]);for(let d=n+1;d<s;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}const Dmt=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:cW,computeOutShape:Rpe,segOpComputeOptimalWindowSize:Ipe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function df(t){try{return t.map(e=>Ph(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function Ppe(t){return t.map(e=>yh(e))}const Lmt=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:ZV,ERF_A2:JV,ERF_A3:QV,ERF_A4:eW,ERF_A5:tW,ERF_P:KV,PARALLELIZE_THRESHOLD:jV,get RowPartitionType(){return Rc},SELU_SCALE:iP,SELU_SCALEALPHA:rP,applyActivation:RV,assertAndGetBroadcastShape:kn,assertAxesAreInnerMostDims:Us,assertParamsConsistent:HV,assignToTypedArray:gpe,axesAreInnerMostDims:lV,calculateShapes:zg,checkEinsumDimSizes:sW,checkPadOnDimRoundingMode:oa,combineLocations:whe,combineRaggedTensorToTensorShapes:cpe,complexWithEvenIndex:ppe,complexWithOddIndex:mpe,computeConv2DInfo:Bs,computeConv3DInfo:np,computeDefaultPad:tV,computeDilation2DInfo:w_,computeOptimalWindowSize:nP,computeOutAndReduceShapes:_s,computeOutShape:Gu,computePool2DInfo:dc,computePool3DInfo:vf,convertConv2DDataFormat:yf,decodeEinsumEquation:rW,eitherStridesOrDilationsAreOne:io,expandShapeToKeepDim:ji,exponent:ype,exponents:vpe,fromStringArrayToUint8:Ppe,fromUint8ToStringArray:df,getAxesPermutation:fi,getBroadcastDims:Cy,getComplexWithIndex:nW,getEinsumComputePath:oW,getEinsumPermutation:iW,getFusedBiasGradient:IV,getFusedDyActivation:kV,getImageCenter:XV,getInnerMostAxes:Ni,getPermuted:M_,getRaggedRank:dpe,getReductionAxes:as,getReshaped:E_,getReshapedPermuted:A_,getRowPartitionTypesHelper:upe,getSliceBeginCoords:qV,getSliceSize:YV,getSparseFillEmptyRowsIndicesDenseShapeMismatch:xpe,getSparseFillEmptyRowsNegativeIndexErrorMessage:bpe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:wpe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:Cpe,getSparseReshapeInputOutputMismatchErrorMessage:Epe,getSparseReshapeInputOutputMultipleErrorMessage:Tpe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:Spe,getSparseReshapeNegativeOutputDimErrorMessage:_pe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:kpe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:GF,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:Mpe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:Ape,getUndoAxesPermutation:rp,isIdentityPermutation:aW,log:ect,mergeRealAndImagArrays:uf,prepareAndValidate:BV,prepareSplitSize:lW,segment_util:Dmt,shouldFuse:PV,slice_util:Imt,splitRealAndImagArrays:hpe,stridesOrDilationsArePositive:fg,tupleValuesAreOne:dg,upcastType:Pa,validateDefaultValueShape:fpe,validateInput:apt,validateUpdateShape:Uhe,warn:tl},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xmt();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Npe={kernelName:YR,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,T_(Ut(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Omt={kernelName:C2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Yr(Ut(n,"float32")),i=$o(bn(yr(1),r));return Ri(gn(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fmt={kernelName:T2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=$o(bn(Yr(Ut(n,"float32")),1));return gn(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bmt={kernelName:fx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{let a=t;const l=as(n.shape,i);return l.length>0&&(a=dn(a,l)),We(a,n.shape)},b:()=>{let a=t;const l=as(r.shape,i);return l.length>0&&(a=dn(a,l)),We(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Umt={kernelName:u8,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zmt={kernelName:KR,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>or(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vmt={kernelName:ZR,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>or(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wmt={kernelName:E2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>gn(t,$o(bn(yr(1),Yr(Ut(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gmt={kernelName:M2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=$o(wt(yr(1),Yr(Ut(n,"float32"))));return gn(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hmt={kernelName:I2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{const a=wt(Yr(n),Yr(r));let l=Oe(t,gn(r,a));const c=as(n.shape,i);return c.length>0&&(l=dn(l,c)),We(l,n.shape)},b:()=>{const a=wt(Yr(n),Yr(r));let l=Ri(Oe(t,gn(n,a)));const c=as(r.shape,i);return c.length>0&&(l=dn(l,c)),We(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jmt={kernelName:A2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>gn(t,wt(Yr(Ut(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xmt={kernelName:k2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>gn(t,bn(yr(1),Yr(Ut(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qmt(t,e,n,r,i,s){const o=ke(t,"dy","avgPool3dGrad"),a=ke(e,"input","avgPool3dGrad");let l=o,c=a,u=!1;a.rank===4&&(u=!0,l=We(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=We(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),ue(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),ue(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),oa("avgPool3dGrad",i,s);const d={dy:l,input:c},f={filterSize:n,strides:r,pad:i,dimRoundingMode:s},h=Fe.runKernel(p8,d,f);return u?We(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const Ymt=Ge({avgPool3dGrad_:qmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kmt={kernelName:QR,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o,dimRoundingMode:a}=n;return{x:()=>Ymt(t,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zmt(t,e,n,r,i){const s=ke(t,"dy","avgPoolGrad"),o=ke(e,"input","avgPoolGrad");ue(o.rank===s.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${s.rank})`);let a=o,l=s,c=!1;o.rank===3&&(c=!0,a=We(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=We(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ue(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),ue(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},d={filterSize:n,strides:r,pad:i},f=Fe.runKernel(h8,u,d);return c?We(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const Jmt=Ge({avgPoolGrad_:Zmt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qmt={kernelName:JR,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o}=n;return{x:()=>Jmt(t,r,i,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const egt={kernelName:e3,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:s,transposeB:o}=n;return!s&&!o?{a:()=>vr(t,i,!1,!0),b:()=>vr(r,t,!0,!1)}:!s&&o?{a:()=>vr(t,i,!1,!1),b:()=>vr(t,r,!0,!1)}:s&&!o?{a:()=>vr(i,t,!1,!0),b:()=>vr(r,t,!1,!1)}:{a:()=>vr(i,t,!0,!0),b:()=>vr(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tgt={kernelName:t3,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>gV(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ngt={kernelName:Klt,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,s=r.shape,o=Array.from(s);for(let l=i.length-1;l>=0;l--)if(i[l]===s[l])o[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${s}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>dn(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rgt={kernelName:R2,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const igt={kernelName:P2,gradFunc:t=>({x:()=>or(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sgt={kernelName:N2,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:s}=n;return{x:()=>Po(lf(Fg(r,i),px(r,s)),t,or(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ogt={kernelName:n3,inputsToSave:["x"],gradFunc:Npe.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const agt={kernelName:r3,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,s=qn(i,e[0].shape)[0],o=r.map(l=>l[s]);return cl(t,o,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lgt={kernelName:i3,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:s,strides:o,pad:a,dataFormat:l}=n;return ue(dg(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>sV(r.shape,t,i,o,a,l),filter:()=>AV(r,t,i.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cgt={kernelName:s3,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:s,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>hg(t,i,s,o,a,1,l),filter:()=>AV(t,r,i.shape,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ugt(t,e,n,r,i){let s=t;t.rank===4&&(s=We(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=We(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),ue(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),ue(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),ue(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),ue(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),ue(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:s,dy:o},l={strides:r,pad:i,filterShape:n};return Fe.runKernel(x8,a,l)}const dgt=Ge({conv3DBackpropFilter_:ugt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fgt={kernelName:o3,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s}=n;ue(dg(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>yhe(o.shape,t,a,i,s),filter:()=>dgt(o,t,a.shape,i,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hgt={kernelName:$2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(Ri(Lhe(Ut(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pgt={kernelName:D2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(Ohe(Ut(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mgt={kernelName:a3,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:s,reverse:o}=n;return{x:()=>{const a=fi([i],r.rank);let l=bhe(t,i,s,!o);return a!=null&&(l=ir(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ggt={kernelName:l3,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:o}=n,a=r??[1,1];ue(dg(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return ue(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),ue(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),ue(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),ue(io(i,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${a}'.`),oa("depthwiseConv2d",s,o),{x:()=>Ept(l.shape,t,c,i,s,a,o),filter:()=>Cpt(l,t,c.shape,i,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vgt={kernelName:c3,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,s={x:r,filter:i,dy:t},o={x:r,filter:i,dy:t};return{x:()=>Fe.runKernel(EF,s,n),filter:()=>Fe.runKernel(MF,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ygt={kernelName:O2,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>Fe.runKernel(A8,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xgt={kernelName:F2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Oe(nd(Ri(Yr(n))),2/Math.sqrt(Math.PI));return{x:()=>Oe(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bgt={kernelName:B2,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wgt={kernelName:d3,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>We(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sgt={kernelName:U2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,nd(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _gt={kernelName:z2,gradFunc:t=>({x:()=>or(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cgt={kernelName:V2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{const a=gn(t,Ut(r,"float32")),l=as(n.shape,i);return l.length>0?We(dn(a,l),n.shape):a},b:()=>{let a=Oe(t,Ut(n,"float32"));const l=as(r.shape,i);l.length>0&&(a=We(dn(a,l),r.shape));const c=Yr(r);return Ri(gn(a,Ut(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tgt={kernelName:f3,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,s,o,a]=e,l=a??yr(1),c=as(s.shape,i.shape),u=[];if(s.rank===1){for(let S=0;S<i.shape.length-1;++S)u.push(i.shape[S]);u.push(1)}const d=bn(i,s),f=Oe(t,l),h=Nhe(wt(o,yr(r))),p=Oe(Oe(Oe(h,h),h),yr(-.5));return{x:()=>s.rank===1?We(Oe(Oe(t,Fc(We(h,[1,1,1,s.shape[0]]),u)),l),i.shape):We(Oe(Oe(t,h),l),i.shape),mean:()=>{let S=Oe(Oe(h,yr(-1)),f);return s.rank===1&&(S=dn(S,c)),We(S,s.shape)},variance:()=>{let S=Oe(Oe(p,d),f);return s.rank===1&&(S=dn(S,c)),We(S,s.shape)},scale:()=>{const S=Oe(d,h);let _=Oe(t,S);return s.rank===1&&(_=dn(_,c)),We(_,s.shape)},offset:()=>{let S=t;return s.rank===1&&(S=dn(S,c)),We(S,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Egt={kernelName:h3,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:s,batchDims:o}=n,a=qn(s,r.shape)[0],l=(c,u,d)=>()=>{const f=c.shape,h=u.size,p=f.slice(0,a),v=p.length,g=f.slice(s,f.length).slice(1),m=g.length,y=iJ(0,v),x=iJ(v+1,v+1+m),S=sJ([p,[h],g]),_=We(d,S),C=We(u,[h]),T=sJ([[v],y,x]),A=ir(_,T);let M=Vhe(A,C,c.shape[a]);const E=rp(T);return M=ir(M,E),M};if(o===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>cf(u.map((h,p)=>l(h,i.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,t),indices:()=>i}}};function iJ(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function sJ(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mgt={kernelName:W2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>or(n),b:()=>or(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Agt={kernelName:G2,gradFunc:t=>({x:()=>Ut(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kgt={kernelName:H2,gradFunc:t=>({x:()=>or(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Igt={kernelName:j2,gradFunc:t=>({x:()=>or(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rgt={kernelName:X2,gradFunc:t=>({x:()=>or(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pgt={kernelName:m3,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,s=vl(r,0);return{x:()=>Po(s,t,Oe(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ngt={kernelName:Y2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>gn(t,wt(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $gt={kernelName:q2,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>gn(t,Ut(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dgt={kernelName:Jlt,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const o=nd(r);return bn(t,Oe(dn(t,i,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lgt(t,e,n,r=5,i=1,s=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:s,beta:o};return Fe.runKernel($8,a,l)}const Ogt=Ge({localResponseNormalizationBackprop_:Lgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fgt={kernelName:w3,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:s,bias:o,alpha:a,beta:l}=n;return{x:()=>Ogt(r,i,t,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $pe(t,e,n,r){return e.rank<n.rank&&(e=We(e,ji(e.shape,r))),t.rank<n.rank&&(t=We(t,ji(t.shape,r))),{x:()=>Oe(t,Ut(td(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oJ={kernelName:S3,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,s=e[0],o=e[1],a=qn(i,s.shape),l=$pe(t,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bgt={kernelName:K2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Oe(t,Ut(Fg(n,r),"float32")),b:()=>Oe(t,Ut(XA(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ugt(t,e,n,r,i,s,o){const a=ke(t,"dy","maxPool3dGrad"),l=ke(e,"input","maxPool3dGrad"),c=ke(n,"output","maxPool3dGrad");let u=a,d=l,f=c,h=!1;l.rank===4&&(h=!0,u=We(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=We(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=We(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),ue(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),ue(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),ue(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),oa("maxPool3dGrad",s,o);const p={dy:u,input:d,output:f},v={filterSize:r,strides:i,pad:s,dimRoundingMode:o},g=Fe.runKernel(L8,p,v);return h?We(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const zgt=Ge({maxPool3dGrad_:Ugt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vgt={kernelName:C3,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>zgt(t,r,i,s,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wgt(t,e,n,r,i,s,o){const a=ke(t,"dy","maxPoolGrad"),l=ke(e,"input","maxPoolGrad"),c=ke(n,"output","maxPoolGrad");ue(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),ue(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),ue(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),oa("maxPoolGrad",s,o);const u={dy:a,input:l,output:c},d={filterSize:r,strides:i,pad:s,dimRoundingMode:o};return Fe.runKernel(D8,u,d)}const Ggt=Ge({maxPoolGrad_:Wgt});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hgt={kernelName:_3,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:a}=n;return{x:()=>Ggt(t,r,i,s,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jgt={kernelName:T3,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,s=qn(i,r.shape),a=_s(r.shape,s)[1],l=it(a);return{x:()=>{const u=r.shape.slice();s.forEach(h=>{u[h]=1});const d=We(t,u);return gn(Oe(d,sp(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xgt={kernelName:E3,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[s,o]=e,a=qn(i,s.shape),l=$pe(t,o,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qgt={kernelName:Z2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Oe(t,Ut(px(n,r),"float32")),b:()=>Oe(t,Ut(vl(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ygt={kernelName:M3,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>Ur(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kgt={kernelName:J2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{const a=as(n.shape,i);return a.length>0?We(dn(t,a),n.shape):t},b:()=>{const a=Oe(t,Ri(eP(gn(n,r)))),l=as(r.shape,i);return l.length>0?We(dn(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zgt={kernelName:Q2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{const a=Oe(t,Ut(r,"float32")),l=as(n.shape,i);return l.length>0?We(dn(a,l),n.shape):a},b:()=>{const a=Oe(t,Ut(n,"float32")),l=as(r.shape,i);return l.length>0?We(dn(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jgt={kernelName:A3,gradFunc:t=>({x:()=>Ri(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qgt={kernelName:R3,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>gs(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e0t={kernelName:I3,gradFunc:t=>({x:()=>or(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t0t={kernelName:P3,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return mg(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aJ={kernelName:N3,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(o=>o[0]);return{x:()=>Ur(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n0t={kernelName:e_,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,s=n,o=r,a=kn(s.shape,o.shape);return{a:()=>{const u=Ut(o,"float32");let d=Oe(t,Oe(u,Ty(s,bn(u,yr(1)))));const f=as(s.shape,a);return f.length>0&&(d=dn(d,f)),We(d,s.shape)},b:()=>{const u=vl(s,0),d=Po(u,rd(s),or(s));let f=Oe(t,Oe(i,d));const h=as(o.shape,a);return h.length>0&&(f=dn(f,h)),We(f,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r0t={kernelName:$3,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=vl(n,0);return{x:()=>Po(i,t,Oe(t,r)),alpha:()=>{let s=Po(i,or(t),Oe(t,n));const o=as(r.shape,t.shape);return o.length>0&&(s=dn(s,o)),We(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i0t(t,e,n){const r=t.shape.slice();r[n]=1;const i=We(e,r),s=zF(t,n,!0,!1),o=zF(t,n,!0,!0),a=Oe(s,o);return Oe(i,a)}function s0t(t,e,n){const r=t.shape.length,i=r-n.length,s=fi(n,r);let o=t;s!=null&&(o=ir(t,s));const a=o.shape.slice(),c=a.splice(r-n.length,n.length).reduce((f,h)=>f*h,1);a.push(c);const u=o.reshape(a);let d=i0t(u,e,i);if(d=d.reshape(o.shape),s!=null){const f=rp(s);d=ir(d,f)}return d}const o0t={kernelName:D3,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let s=[];return i==null?s=r.shape.map((o,a)=>a):typeof i=="number"?s=[i]:s=i,{x:()=>s0t(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a0t={kernelName:L2,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{const a=gn(t,Ut(r,"float32")),l=as(n.shape,i);return l.length>0?We(dn(a,l),n.shape):a},b:()=>{let a=Oe(t,Ut(n,"float32"));const l=as(r.shape,i);l.length>0&&(a=We(dn(a,l),r.shape));const c=Yr(r);return Ri(gn(a,Ut(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l0t={kernelName:t_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>gn(t,Ri(Yr(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c0t={kernelName:r_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Oe(px(n,6),T_(n));return{x:()=>Oe(t,Ut(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u0t={kernelName:n_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,Ut(T_(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d0t={kernelName:L3,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>We(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f0t={kernelName:F3,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>Fe.runKernel(W8,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h0t={kernelName:O3,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>Fe.runKernel(V8,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p0t={kernelName:B3,gradFunc:(t,e,n)=>{const{dims:r}=n,i=qn(r,t.shape);return{x:()=>pg(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m0t={kernelName:i_,gradFunc:t=>({x:()=>or(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g0t={kernelName:s_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ri(gn(t,Oe(Ty(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v0t={kernelName:U3,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Ut(or(n),"float32"),t:()=>Oe(t,Ut(n,t.dtype)),e:()=>Oe(t,Ut(fV(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y0t={kernelName:o_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=vl(n,yr(0)),i=yr(rP),s=yr(iP),o=Oe(t,s),a=Oe(Oe(t,i),nd(Ut(n,"float32")));return Po(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x0t={kernelName:u_,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,Oe(n,bn(yr(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b0t={kernelName:c_,gradFunc:t=>({x:()=>or(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w0t={kernelName:a_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(oV(Ut(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S0t={kernelName:l_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(xhe(Ut(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _0t={kernelName:z3,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:s}=n,o=r.shape,[a,l]=tP(r,i,s),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],o[u]-a[u]-l[u]]);return{x:()=>mV(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C0t={kernelName:H3,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,s=!0,o=Oe(t,r);return{logits:()=>bn(o,Oe(dn(o,[i],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T0t={kernelName:d_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,hx(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lJ={kernelName:W3,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>iV(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cJ={kernelName:G3,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Qo(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E0t={kernelName:f_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>gn(t,Oe($o(Ut(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M0t={kernelName:G8,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(t,Oe(Ut(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A0t={kernelName:h_,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=yr(2);return{a:()=>Oe(t,Oe(i,bn(n,r))),b:()=>Oe(t,Oe(i,bn(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k0t={kernelName:y_,gradFunc:t=>({x:()=>or(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I0t={kernelName:p_,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=kn(n.shape,r.shape);return{a:()=>{let a=t;const l=as(n.shape,i);return l.length>0&&(a=dn(a,l)),We(a,n.shape)},b:()=>{let a=t;const l=as(r.shape,i);return l.length>0&&(a=dn(a,l)),We(Ri(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R0t={kernelName:V3,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:s}=n;qn(s,r.shape).forEach(c=>{i[c]=1});const a=We(t,i),l=Oe(a,sp(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P0t={kernelName:m_,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>gn(t,Yr(oV(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N0t={kernelName:g_,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Oe(bn(yr(1),Yr(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $0t={kernelName:v_,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let o=or(r);if(r.rank===1)for(let a=0;a<i[0];++a)o=wt(o,Ur(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)o=wt(o,Ur(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)o=wt(o,Ur(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<i[0];++a)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)for(let u=0;u<i[3];++u)o=wt(o,Ur(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D0t={kernelName:Gv,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,s=rp(i);return{x:()=>ir(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L0t={kernelName:j3,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>cf(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O0t={kernelName:X3,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>F0t(t,n)}}};function F0t(t,e){const n=ip(e,or(e)),r=cV(t,n);let i=Fg(e,yr(0,"int32"));const s=r.rank-i.rank;for(let a=0;a<s;++a)i=Xo(i,a+1);i=lf(i,sp(r.shape,"bool"));const o=or(r);return Po(i,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B0t={kernelName:q3,gradFunc:t=>({x:()=>or(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U0t=[Npe,Omt,Fmt,Bmt,Umt,zmt,Vmt,Wmt,Gmt,Hmt,jmt,Xmt,Kmt,Qmt,egt,tgt,ngt,rgt,igt,sgt,ogt,agt,cgt,lgt,fgt,hgt,pgt,mgt,ggt,vgt,a0t,ygt,xgt,bgt,wgt,Sgt,Cgt,_gt,Tgt,Egt,Mgt,Agt,kgt,Igt,Rgt,Pgt,Ngt,$gt,Dgt,Fgt,oJ,oJ,Bgt,Vgt,Hgt,jgt,Xgt,qgt,Ygt,Kgt,Zgt,Jgt,Qgt,e0t,t0t,aJ,aJ,n0t,r0t,o0t,l0t,c0t,u0t,d0t,f0t,h0t,p0t,m0t,g0t,v0t,y0t,x0t,b0t,w0t,S0t,_0t,C0t,T0t,lJ,lJ,cJ,cJ,E0t,A0t,M0t,k0t,I0t,R0t,P0t,N0t,$0t,D0t,L0t,O0t,B0t];for(const t of U0t)tct(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.abs=function(){return this.throwIfDisposed(),So(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.acos=function(){return this.throwIfDisposed(),put(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.acosh=function(){return this.throwIfDisposed(),gut(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.add=function(t){return this.throwIfDisposed(),wt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.all=function(t,e){return this.throwIfDisposed(),mhe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.any=function(t,e){return this.throwIfDisposed(),BF(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.argMax=function(t){return this.throwIfDisposed(),lS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.argMin=function(t){return this.throwIfDisposed(),wut(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.asScalar=function(){return this.throwIfDisposed(),ue(this.size===1,()=>"The array must have only 1 element."),We(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.asType=function(t){return this.throwIfDisposed(),Ut(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.as1D=function(){return this.throwIfDisposed(),We(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.as2D=function(t,e){return this.throwIfDisposed(),We(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),We(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),We(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),We(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.asin=function(){return this.throwIfDisposed(),_ut(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.asinh=function(){return this.throwIfDisposed(),Tut(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.atan=function(){return this.throwIfDisposed(),Mut(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.atan2=function(t){return this.throwIfDisposed(),kut(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.atanh=function(){return this.throwIfDisposed(),Rut(this)};rt().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),nV(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),iV(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),K3(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Pb(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.cast=function(t){return this.throwIfDisposed(),Ut(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.ceil=function(){return this.throwIfDisposed(),idt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),fl(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Qi&&(t=[t]),Qo([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.conv1d=function(t,e,n,r,i,s){return this.throwIfDisposed(),ghe(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),vhe(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.conv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),hg(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.cos=function(){return this.throwIfDisposed(),oV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.cosh=function(){return this.throwIfDisposed(),xhe(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),zF(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),bhe(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),kdt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.depthwiseConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),aV(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),Pdt(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.divNoNan=function(t){return this.throwIfDisposed(),Odt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.div=function(t){return this.throwIfDisposed(),gn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.dot=function(t){return this.throwIfDisposed(),Bdt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.elu=function(){return this.throwIfDisposed(),J3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.equal=function(t){return this.throwIfDisposed(),td(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.erf=function(){return this.throwIfDisposed(),Wdt(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),Jdt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.exp=function(){return this.throwIfDisposed(),nd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.expandDims=function(t){return this.throwIfDisposed(),Xo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.expm1=function(){return this.throwIfDisposed(),nft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.fft=function(){return this.throwIfDisposed(),Bhe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.flatten=function(){return this.throwIfDisposed(),We(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.floor=function(){return this.throwIfDisposed(),eP(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.floorDiv=function(t){return this.throwIfDisposed(),phe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.gather=function(t,e,n){return this.throwIfDisposed(),cV(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Fg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.greater=function(t){return this.throwIfDisposed(),vl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.ifft=function(){return this.throwIfDisposed(),VF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.irfft=function(){return this.throwIfDisposed(),Xht(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.isFinite=function(){return this.throwIfDisposed(),dft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.isInf=function(){return this.throwIfDisposed(),hft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.isNaN=function(){return this.throwIfDisposed(),mft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.leakyRelu=function(t){return this.throwIfDisposed(),dV(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.lessEqual=function(t){return this.throwIfDisposed(),px(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.less=function(t){return this.throwIfDisposed(),XA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),bft(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logSigmoid=function(){return this.throwIfDisposed(),Mft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logSoftmax=function(t){return this.throwIfDisposed(),The(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),Ehe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.log=function(){return this.throwIfDisposed(),rd(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.log1p=function(){return this.throwIfDisposed(),Che(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logicalAnd=function(t){return this.throwIfDisposed(),lf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logicalNot=function(){return this.throwIfDisposed(),fV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logicalOr=function(t){return this.throwIfDisposed(),Mhe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.logicalXor=function(t){return this.throwIfDisposed(),Dft(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),vr(this,t,e,n)};rt().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),hV(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.max=function(t,e){return this.throwIfDisposed(),Wc(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.maximum=function(t){return this.throwIfDisposed(),ip(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.mean=function(t,e){return this.throwIfDisposed(),Gi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.min=function(t,e){return this.throwIfDisposed(),jA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.minimum=function(t){return this.throwIfDisposed(),dS(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),Wft(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.mod=function(t){return this.throwIfDisposed(),Hft(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.mul=function(t){return this.throwIfDisposed(),Oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.neg=function(){return this.throwIfDisposed(),Ri(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Q3(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.notEqual=function(t){return this.throwIfDisposed(),qA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),Ahe(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.onesLike=function(){return this.throwIfDisposed(),ac(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.pad=function(t,e){return this.throwIfDisposed(),mV(this,t,e)};rt().prototype.pool=function(t,e,n,r,i,s){return this.throwIfDisposed(),tht(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.pow=function(t){return this.throwIfDisposed(),Ty(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.prelu=function(t){return this.throwIfDisposed(),vV(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.prod=function(t,e){return this.throwIfDisposed(),iht(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.reciprocal=function(){return this.throwIfDisposed(),Mht(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.relu=function(){return this.throwIfDisposed(),Ug(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.relu6=function(){return this.throwIfDisposed(),Rhe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.reshapeAs=function(t){return this.throwIfDisposed(),We(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.reshape=function(t){return this.throwIfDisposed(),We(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),Ghe(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),Hhe(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.reverse=function(t){return this.throwIfDisposed(),pg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.rfft=function(){return this.throwIfDisposed(),Kht(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.round=function(){return this.throwIfDisposed(),Phe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.rsqrt=function(){return this.throwIfDisposed(),Nhe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.selu=function(){return this.throwIfDisposed(),$he(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.separableConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),Dhe(this,t,e,n,r,i,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sigmoid=function(){return this.throwIfDisposed(),hx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sign=function(){return this.throwIfDisposed(),Lht(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sin=function(){return this.throwIfDisposed(),Lhe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sinh=function(){return this.throwIfDisposed(),Ohe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.slice=function(t,e){return this.throwIfDisposed(),Ur(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.softmax=function(t){return this.throwIfDisposed(),MV(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.softplus=function(){return this.throwIfDisposed(),S_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),gV(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.split=function(t,e){return this.throwIfDisposed(),cl(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sqrt=function(){return this.throwIfDisposed(),$o(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.square=function(){return this.throwIfDisposed(),Yr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.squaredDifference=function(t){return this.throwIfDisposed(),Jht(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.squeeze=function(t){return this.throwIfDisposed(),C_(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Qi?[this,t]:[this,...t];return cf(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.step=function(t){return this.throwIfDisposed(),T_(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.stridedSlice=function(t,e,n,r,i,s,o,a){return this.throwIfDisposed(),rpt(this,t,e,n,r,i,s,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sub=function(t){return this.throwIfDisposed(),bn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.sum=function(t,e){return this.throwIfDisposed(),dn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.tan=function(){return this.throwIfDisposed(),spt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.tanh=function(){return this.throwIfDisposed(),rV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.tile=function(t){return this.throwIfDisposed(),Fc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.toBool=function(){return this.throwIfDisposed(),Ut(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.toFloat=function(){return this.throwIfDisposed(),Ut(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.toInt=function(){return this.throwIfDisposed(),Ut(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.topk=function(t,e){return this.throwIfDisposed(),cpt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.transpose=function(t){return this.throwIfDisposed(),ir(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.unique=function(t){return this.throwIfDisposed(),fpt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Vhe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.unstack=function(t){return this.throwIfDisposed(),mg(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.where=function(t,e){return this.throwIfDisposed(),Po(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rt().prototype.zerosLike=function(){return this.throwIfDisposed(),or(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class wu extends Error{constructor(e){super(e),Object.setPrototypeOf(this,wu.prototype)}}class jl extends Error{constructor(e){super(e),Object.setPrototypeOf(this,jl.prototype)}}class Pe extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Pe.prototype)}}class Pn extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Pn.prototype)}}class uW extends Error{constructor(e){super(e),Object.setPrototypeOf(this,uW.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Dpe{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gg(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Su(t,e){if(!t)throw new uW(e)}function uJ(t,e){let n=0;for(const r of t)r===e&&n++;return n}function qo(t){return t.length===1?t[0]:t}function Cr(t){return Array.isArray(t)?t:[t]}function Rd(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function rm(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Al={};function dW(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function HF(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>HF(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:HF(r))}}}function k_(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const s=t;let o;if(s in n)o=n[s];else if(s in Al)o=Al[s];else if(o=e[s],o==null)throw new Pe(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const s=t;if(s.className==null||s.config==null)throw new Pe(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const o=s.className;let a,l;if(o in n?[a,l]=n[o]:o in Al?[a,l]=Al.className:o in e&&([a,l]=e[o]),a==null)throw new Pe(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const h of Object.keys(Al))c[h]=Al[h];for(const h of Object.keys(n))c[h]=n[h];const u=s.config;u.customObjects=c;const d=Object.assign({},Al);for(const h of Object.keys(n))Al[h]=n[h];HF(s.config);const f=l(a,s.config,n,i);return Al=Object.assign({},d),f}else{const c=Object.assign({},Al);for(const d of Object.keys(n))Al[d]=n[d];const u=new a(s.config);return Al=Object.assign({},c),u}}}function z0t(t,e){return t<e?-1:t>e?1:0}function bE(t,e){return-1*z0t(t,e)}function xh(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function V0t(t){if(t==null)throw new Pe(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Vg(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new Pe(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function fW(t,e,n=0,r=1/0){return Su(n>=0),Su(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function ys(t,e){Array.isArray(t)?(ue(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>ys(n,`element ${r+1} of ${e}`))):ue(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${Lpe(t)}.`)}function Lpe(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>Lpe(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function W0t(t,e,n){let r=n!=null?n():jo(),i;return(...o)=>{const a=n!=null?n():jo();return a-r<e||(r=a,i=t(...o)),i}}function Ope(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let G0t=0;function Fpe(){return G0t++}const wE={};function sP(t=""){return t in wE||(wE[t]=0),wE[t]+=1,t+wE[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const H0t=["channelsFirst","channelsLast"],j0t=["nearest","bilinear"],X0t=["valid","same","causal"],q0t=["max","avg"],Y0t=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const W0=new Map;function $i(t){Vg(H0t,"DataFormat",t)}function K0t(t){Vg(j0t,"InterpolationFormat",t)}function yl(t){Vg(X0t,"PaddingMode",t)}function Bpe(t){Vg(q0t,"PoolMode",t)}const Nb=[],dJ="/";function Om(t,e){Nb.push(t);try{const n=e();return Nb.pop(),n}catch(n){throw Nb.pop(),n}}function Z0t(){return Nb.length===0?"":Nb.join(dJ)+dJ}function Upe(t){if(!Vpe(t))throw new Error("Not a valid tensor name: '"+t+"'");return Z0t()+t}function zpe(t){if(!Vpe(t))throw new Error("Not a valid tensor name: '"+t+"'");W0.has(t)||W0.set(t,0);const e=W0.get(t);if(W0.set(t,W0.get(t)+1),e>0){const n=`${t}_${e}`;return W0.set(n,1),n}else return t}const J0t=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Vpe(t){return!!t.match(J0t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Q0t(t){return t===parseInt(t.toString(),10)}function bh(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function My(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Nh(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Yc(t,e){if(e<t)throw new Pe(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ZD;function ts(){return ZD==null&&(ZD=Mct().epsilon()),ZD}function Kc(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Hu(t,e){return Ut(t,e)}function I_(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),We(t,n)}function evt(t,e){return Ze(()=>{if(t.shape.length!==2)throw new Pe(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=I_(t,1);return jF(n,[1,e,1])})}function tvt(t){const e=[bh(t.shape)];return We(t,e)}function nvt(t){if(t.rank<=1)throw new Pe(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],bh(t.shape,1)];return We(t,e)}function Fm(t,e,n){return Ze(()=>{switch(t.rank){case 1:return TV(t,e,n);case 2:return Fhe(t,[e,0],[n,t.shape[1]]);case 3:return EV(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return KA(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Ur(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Ur(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Pe(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function JD(t,e,n){return Ze(()=>{switch(t.rank){case 1:return TV(t,e,n);case 2:return Fhe(t,[0,e],[t.shape[0],n]);case 3:return EV(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return KA(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Pe(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function SE(t,e,n,r){return Ze(()=>{switch(t.rank){case 1:return TV(t,e,n);case 2:switch(r){case 1:return Fm(t,e,n);case 2:return JD(t,e,n);default:throw new Pe(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Fm(t,e,n);case 2:return EV(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return JD(t,e,n);default:throw new Pe(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Fm(t,e,n);case 2:return KA(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return KA(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return JD(t,e,n);default:throw new Pe(`The axis is not within the rank of the tensor ${r}`)}default:throw new Pe(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function hW(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Qo(t,e)}function fJ(t,e){switch(t.rank){case 1:return adt([t,e]);case 2:return cdt([t,e],0);case 3:return ddt([t,e],0);case 4:return hdt([t,e],0);default:throw new Pe(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function jF(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new Pe(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Fc(t,e)}function oP(t,e=0,n=1,r,i){return _ht(t,e,n,r,i)}function ju(t,e,n,r){if(t.rank<2||e.rank<2)throw new Pn(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(i!==s)throw new Pn(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return KZ({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?XF(t.rank,r,Kc()):null,activation:n});{const i=t.shape.slice(),s=i.pop();t=We(t,[-1,s]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),c=[...o,a],u=Array.from({length:e.rank},(p,v)=>v===0?e.rank-2:v<=e.rank-2?v-1:v);e=We(ir(e,u),[l,-1]);const d=[...i,...c];return We(KZ({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?XF(t.rank,r,Kc()):null,activation:n}),d)}}function Wpe(t,e,n){return Ze(()=>(Array.isArray(e)?e=Ca(e,"int32"):e=Ut(e,"int32"),cV(t,e,n)))}function R_(t){return Oe(t,t)}function XF(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new Pe(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?We(e,[1,r[0],1,1,1]):We(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?We(e,[1,1,1,1,r[0]]):We(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?We(e,[1,r[0],1,1]):We(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?We(e,[1,1,1,r[0]]):We(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?We(e,[1,r[0],1]):We(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?We(e,[1,1,r[0]]):We(e,[1].concat(r))}else if(t<3)return e;throw new Pe(`Unsupported input rank by biasAdd: ${e.rank}`)}function ru(t,e,n){return Ze(()=>(n==null&&(n=Kc()),$i(n),wt(t,XF(t.rank,e,n))))}function rvt(t,e=1){if(e!==1)throw new Pn(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return J3(t)}function ivt(t){return Ze(()=>gn(t,wt(So(t),1)))}function Gpe(t,e,n,r){return Ze(()=>xpt(t,e,n,r))}function svt(t){return Ze(()=>{const e=wt(.5,Oe(.2,t));return fl(e,0,1)})}function P_(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ovt=["fanIn","fanOut","fanAvg"],avt=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lvt(t){Vg(ovt,"FanMode",t)}function cvt(t){Vg(avt,"Distribution",t)}class fc extends gx{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Hpe extends fc{apply(e,n){return gs(e,n)}}Hpe.className="Zeros";pt(Hpe);class pW extends fc{apply(e,n){return sp(e,n)}}pW.className="Ones";pt(pW);class jpe extends fc{constructor(e){if(super(),typeof e!="object")throw new Pe(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new Pe(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Ze(()=>Oe(yr(this.value),sp(e,n)))}getConfig(){return{value:this.value}}}jpe.className="Constant";pt(jpe);class Xpe extends fc{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return __(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}Xpe.className="RandomUniform";pt(Xpe);class qpe extends fc{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Pn(`randomNormal does not support dType ${n}.`);return oP(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}qpe.className="RandomNormal";pt(qpe);class Ype extends fc{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Pn(`truncatedNormal does not support dType ${n}.`);return zhe(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}Ype.className="TruncatedNormal";pt(Ype);class Kpe extends fc{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Ze(()=>{if(e.length!==2||e[0]!==e[1])throw new Pe("Identity matrix initializer can only be used for 2D square matrices.");return Oe(this.gain,_he(e[0]))})}getConfig(){return{gain:this.gain}}}Kpe.className="Identity";pt(Kpe);function uvt(t,e="channelsLast"){let n,r;if($i(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=bh(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=bh(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=bh(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class Na extends fc{constructor(e){if(super(),e.scale<0)throw new Pe(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,lvt(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,cvt(this.distribution),this.seed=e.seed}apply(e,n){const r=uvt(e),i=r[0],s=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,s):o/=Math.max(1,(i+s)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Pn(`${this.getClassName()} does not support dType ${n}.`);return zhe(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return __(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Na.className="VarianceScaling";pt(Na);class mW extends Na{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Na.className}}mW.className="GlorotUniform";pt(mW);class gW extends Na{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Na.className}}gW.className="GlorotNormal";pt(gW);class vW extends Na{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Na.className}}vW.className="HeNormal";pt(vW);class yW extends Na{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Na.className}}yW.className="HeUniform";pt(yW);class xW extends Na{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Na.className}}xW.className="LeCunNormal";pt(xW);class bW extends Na{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Na.className}}bW.className="LeCunUniform";pt(bW);class Zpe extends fc{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Ze(()=>{if(e.length<2)throw new Pn("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=it(e.slice(0,-1)),i=e[e.length-1],s=r*i;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const o=[Math.max(i,r),Math.min(i,r)],a=oP(o,0,1,n,this.seed),l=mmt.qr(a,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return c=Oe(c,d.sign()),r<i&&(c=c.transpose()),Oe(yr(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Zpe.className="Orthogonal";pt(Zpe);const hJ={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function pJ(t,e={}){return k_(t,Ul.getMap().classNameMap,e,"initializer")}function ui(t){return dW(t)}function ri(t){if(typeof t=="string"){const e=t in hJ?hJ[t]:t;if(e==="GlorotNormal")return new gW;if(e==="GlorotUniform")return new mW;if(e==="HeNormal")return new vW;if(e==="HeUniform")return new yW;if(e==="LeCunNormal")return new xW;if(e==="LeCunUniform")return new bW;{const n={};return n.className=e,n.config={},pJ(n)}}else return t instanceof fc?t:pJ(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qF(t){return Array.isArray(t)&&Array.isArray(t[0])}function ZA(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Sn(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new Pe(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function cr(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new Pe(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function JA(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const mJ="Variable";class dvt{constructor(e,n="float32",r=mJ,i=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=Fpe(),r=r??mJ,this.originalName=Upe(r),this.name=zpe(this.originalName),this.trainable_=i,this.constraint=s,this.val=mpt(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),fvt(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function fvt(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function YF(t){return t.map(e=>e.read())}function wW(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ns{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class id{constructor(e,n,r,i,s,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=s,this.outputTensorIndex=a,this.id=Fpe(),o!=null&&(this.originalName=Upe(o),this.name=zpe(this.originalName)),this.rank=n.length}}let hvt=0;class aP{constructor(e,n){this.callArgs=n,this.id=hvt++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let pvt=0;class Yn extends gx{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=pvt++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Rd(r)+"_"+sP(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new jl(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new Pe(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return qo(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return qo(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new wu(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new wu(`Layer ${this.name} is not connected, no input to return.`);return qo(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new wu(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new wu(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return qo(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Cr(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Cr(this.inputSpec);if(n.length!==r.length)throw new Pe(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let i=0;i<n.length;i++){const s=n[i],o=r[i];if(o==null)continue;const a=s.rank;if(o.ndim!=null&&a!==o.ndim)throw new Pe(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new Pe(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new Pe(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&s.dtype!==o.dtype)throw new Pe(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${s.dtype}.`);if(o.axes){const l=s.shape;for(const c in o.axes){const u=Number(c),d=o.axes[c],f=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(f)===-1)throw new Pe(`Input ${i} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=s.shape[l];if(c!=null&&u!=null&&c!==u)throw new Pe(`Input ${i} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Cr(e),i=vvt(e),s=yvt(e);if(i===s)throw new Pe("Arguments to apply() must be all SymbolicTensors or all Tensors");return Om(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of Cr(e))o.push(a.shape);this.build(qo(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=Cr(o),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(o=qo(l),this.activityRegularizer!=null)throw new Pn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=mvt(e),a=this.computeOutputShape(o);let l;const c=gvt(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new id(c,u,this,Cr(e),n,this.name,d)):l=new id(c,a,this,Cr(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new Pn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new wu(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new wu(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new jl(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return JA(this.weights)}build(e){this.built=!0}getWeights(e=!1){return YF(e?this.trainableWeights:this.weights)}setWeights(e){Ze(()=>{const n=this.weights;if(n.length!==e.length)throw new Pe(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=YF(n);for(let s=0;s<i.length;++s){const o=i[s],a=n[s],l=e[s];if(!wr(o.shape,l.shape))throw new Pe(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}wW(r)})}addWeight(e,n,r,i,s,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new Pe(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():ri("zeros"));const c=i.apply(n,r),u=new dvt(c,r,e,o,a);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(u.read())),o==null&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Cr(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),s=Cr(n),o=Cr(i);if(s.length!==o.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=o[a]}addInboundNode(e,n,r,i,s,o,a=null){const l=Cr(e);n=Cr(n),r=Cr(r),i=Cr(i),s=ZA(s),o=ZA(o);const c=[],u=[],d=[];for(const f of l)c.push(f.sourceLayer),u.push(f.nodeIndex),d.push(f.tensorIndex);new aP({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:s,outputShapes:o},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function mvt(t){t=Cr(t);const e=[];for(const n of t)e.push(n.shape);return qo(e)}function gvt(t){return"float32"}function Jpe(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let s=0;s<r.inboundLayers.length;s++){const o=r.inputTensors[s],a=r.inboundLayers[s],l=r.nodeIndices[s],c=Jpe(o,a,l);for(const u of c)i.indexOf(u)===-1&&i.push(u)}return i}}}function vvt(t){let e=!0;for(const n of Cr(t))if(!(n instanceof id)){e=!1;break}return e}function yvt(t){let e=!0;for(const n of Cr(t))if(n instanceof id){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class N_ extends Yn{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:sP("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new Pe("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new Pe("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new Pe("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new id(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new aP({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new Pe(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}N_.className="InputLayer";pt(N_);function xvt(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new Pe("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new N_({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bvt(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Ut(e,t.dtype)}catch{throw new Pe(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class nh{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof nh)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=bvt(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new Pe(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof id){if(this.id2Value[e.id]==null)throw new Pe(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Pe(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof id){if(this.id2Value[e.id]==null)throw new Pe(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Pe(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Bn(this.id2Mask)}}const QA=new Dpe,ek=new Dpe;function wvt(t){QA!=null&&QA.setMaxEntries(t),ek!=null&&ek.setMaxEntries(t)}function Y1(t,e,n,r){const i=n==null?!1:n.training,s=Array.isArray(t),o=s?t:[t],a=o.map(p=>p.name),l=[],c=e.names();for(const p of a)c.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const u=a.join(",")+"|"+e.names().sort().join(",");let d=QA.get(u),f;if(d==null){const p=Svt(o,e);d=p.sorted,f=p.recipientCounts,QA.put(u,d),ek.put(u,f)}f={},i||Object.assign(f,ek.get(u));const h=new nh(e);for(let p=0;p<d.length;++p){if(r!=null){const M=DF().numTensors;M>r.maxNumTensors&&(r.maxNumTensors=M),M<r.minNumTensors&&(r.minNumTensors=M)}const v=d[p],g=v.sourceLayer;if(g instanceof N_)continue;const m=[],y=[],x=[];let S=!1;for(const M of v.inputs){const E=h.getValue(M),P=h.getMask(M);m.push(E),y.push(P),P!=null&&(S=!0),i||(f[M.name]--,f[M.name]===0&&!e.hasKey(M)&&a.indexOf(M.name)===-1&&!E.isDisposed&&M.sourceLayer.stateful!==!0&&x.push(E))}S&&(n=n||{},n.mask=y[0]);const _=Cr(g.apply(m,n));let C=null;g.supportsMasking&&(C=g.computeMask(m,y));const T=Cvt(v),A=Array.isArray(T)?T:[T];for(let M=0;M<A.length;++M){h.hasKey(A[M])||h.add(A[M],_[M],Array.isArray(C)?C[0]:C);const E=a.indexOf(A[M].name);E!==-1&&(l[E]=_[M])}i||Bn(x)}return h.disposeMasks(),s?l:l[0]}function Svt(t,e){ue(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=gJ(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const s of t){const{sorted:o,recipientMap:a}=gJ(s,e);for(const l of o)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:_vt(r)}}function _vt(t){const e={};for(const n in t)e[n]=t[n].size;return e}function gJ(t,e){const n=new Set,r=[],i={};for(const a of e.names())n.add(a);const s=[],o=[];for(s.push(t);s.length>0;){const a=s[s.length-1];if(n.has(a.name)){s.pop();continue}const l=o[o.length-1]===s.length-1;if(a.inputs.length===0||l)s.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(s.length-1);for(const c of a.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(a.name),!n.has(c.name)&&s.push(c)}}return{sorted:r,recipientMap:i}}function Cvt(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tvt=Qe();Tvt.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,wvt);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function SW(t,e){return Ze(()=>$o(dn(Oe(t,t),e,!0)))}class $_ extends gx{getConfig(){return{}}}class Qpe extends $_{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ze(()=>{const n=SW(e,this.axis),r=fl(n,0,this.maxValue);return Oe(e,gn(r,wt(ts(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Qpe.className="MaxNorm";pt(Qpe);class eme extends $_{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ze(()=>gn(e,wt(ts(),SW(e,this.axis))))}getConfig(){return{axis:this.axis}}}eme.className="UnitNorm";pt(eme);class tme extends $_{apply(e){return Ug(e)}}tme.className="NonNeg";pt(tme);class nme extends $_{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Ze(()=>{const n=SW(e,this.axis),r=wt(Oe(this.rate,fl(n,this.minValue,this.maxValue)),Oe(1-this.rate,n));return Oe(e,gn(r,wt(ts(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}nme.className="MinMaxNorm";pt(nme);const vJ={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function is(t){return dW(t)}function yJ(t,e={}){return k_(t,Ul.getMap().classNameMap,e,"constraint")}function ss(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in vJ?vJ[t]:t,config:{}};return yJ(n)}else return t instanceof $_?t:yJ(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Bp(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const s=t[i];if(typeof s!="number"){const o=s;e.push(o.data()),n.push(i),r.push(o)}}if(e.length>0){const i=await Promise.all(e);for(let s=0;s<i.length;++s)t[n[s]]=i[s][0];Bn(r)}}function rme(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var xJ;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(xJ||(xJ={}));const Evt=125;class hS{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class Mvt{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class Avt extends hS{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const s=n[i];if(typeof s=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+s*r;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const a=Ze(()=>wt(this.totals[i],Oe(s,r)));this.totals[i]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Ze(()=>{const i=Oe(gn(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),Wu(n[r])}))}}class kvt extends hS{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const o=this.history[s];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(s),r.push(a)}}const i=await Promise.all(e);for(let s=0;s<i.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=i[s][0]}}class Ivt extends hS{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||lpe,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Evt),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");_F(this.yieldEvery)&&(this.maybeWait=W0t(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await Bp(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Bp(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Bp(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Bp(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Bp(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):_F(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Bp(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Bp(e),await this.trainEnd(e))}}function ime(t,e){return t==null&&(t={}),t instanceof hS?[t]:Array.isArray(t)&&t[0]instanceof hS?t:Cr(t).map(r=>new Ivt(r,e))}class Pl{constructor(){}static registerCallbackConstructor(e,n){ue(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Pl.checkForDuplicate(n),Pl.constructors[e]==null&&(Pl.constructors[e]=[]),Pl.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Pl.constructors)Pl.constructors[+n].forEach(i=>{if(i===e)throw new Pe("Duplicate callback constructor.")})}static clear(){Pl.constructors={}}static createCallbacks(e){const n=[];for(const r in Pl.constructors){const i=+r;e>=i&&n.push(...Pl.constructors[i])}return n.map(r=>new r)}}Pl.constructors={};function sme(t,e,n,r,i,s,o,a,l){const c=new kvt,u=[new Avt,...Pl.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const d=new Mvt(u);return d.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xu(t,e={},n=!1){return k_(t,Ul.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tk(t,e){return Ze(()=>{t.dtype!=="float32"&&(t=Ut(t,"float32"));const n=dn(R_(t),e,!0),r=Z3(n.shape,ts()),i=$o(ip(n,r));return gn(t,i)})}function lP(t,e){return Ze(()=>Gi(R_(bn(e,t)),-1))}function _W(t,e){return Ze(()=>Gi(So(bn(e,t)),-1))}function CW(t,e){return Ze(()=>{const n=bn(t,e),r=fl(So(t),ts(),Number.MAX_VALUE),i=So(gn(n,r));return Oe(100,Gi(i,-1))})}function Rvt(t,e){return Ze(()=>{const n=fl(e,ts(),Number.MAX_VALUE),r=rd(wt(1,n)),i=fl(t,ts(),Number.MAX_VALUE),s=rd(wt(1,i));return Gi(R_(bn(r,s)),-1)})}function Pvt(t,e){return Ze(()=>{const n=ip(0,bn(1,Oe(t,e)));return Gi(R_(n),-1)})}function Nvt(t,e){return Ze(()=>{const n=ip(0,bn(1,Oe(t,e)));return Gi(n,-1)})}function $vt(t,e){return Ze(()=>{const n=dn(Oe(t,e),-1),r=Wc(Oe(bn(1,t),e),-1);return ip(0,wt(1,bn(r,n)))})}function Dvt(t,e){return Ze(()=>{const n=Math.log(2),r=bn(e,t),i=bn(wt(r,S_(Oe(-2,r))),n);return Gi(i,-1)})}function pS(t,e,n=!1){return Ze(()=>{if(n)e=MV(e);else{const r=dn(e,e.shape.length-1,!0);e=gn(e,r)}return e=fl(e,ts(),1-ts()),Ri(dn(Oe(Ut(t,"float32"),rd(e)),e.shape.length-1))})}function nk(t,e,n=!1){return Ze(()=>{const r=Ut(eP(tvt(t)),"int32");e=fl(e,ts(),1-ts());const i=e.shape,s=We(Ahe(r,i[i.length-1]),i);return pS(s,e,n)})}function Lvt(t,e){if(!wr(t.shape,e.shape))throw new Pe(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Ze(()=>{const n=Ug(e),r=Ri(So(e));return wt(bn(n,Oe(e,t)),Che(nd(r)))})}function cP(t,e){return Ze(()=>{let n;return n=fl(e,ts(),1-ts()),n=rd(gn(n,bn(1,n))),Gi(Lvt(t,n),-1)})}function Ovt(t,e){return Ze(()=>{const n=fl(t,ts(),1),r=fl(e,ts(),1);return dn(Oe(t,rd(gn(n,r))),-1)})}function Fvt(t,e){return Ze(()=>{const n=rd(wt(ts(),e));return Gi(bn(e,Oe(t,n)),-1)})}function ome(t,e){return Ze(()=>{const n=tk(t,-1),r=tk(e,-1),i=Oe(n,r);return Ri(dn(i,-1))})}const rk={meanSquaredError:lP,meanAbsoluteError:_W,meanAbsolutePercentageError:CW,meanSquaredLogarithmicError:Rvt,squaredHinge:Pvt,hinge:Nvt,categoricalHinge:$vt,logcosh:Dvt,categoricalCrossentropy:pS,sparseCategoricalCrossentropy:nk,binaryCrossentropy:cP,kullbackLeiblerDivergence:Ovt,poisson:Fvt,cosineProximity:ome};function QD(t){if(typeof t=="string"){if(t in rk)return rk[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Pe(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ame(t,e){return Ze(()=>{const n=Oe(.5,ac(e)),r=Hu(vl(e,n),t.dtype);return Gi(td(t,r),-1)})}function lme(t,e){return Ze(()=>Hu(td(lS(t,-1),lS(e,-1)),"float32"))}function Bvt(t,e){return Ze(()=>Ut(dn(lf(td(t,1),td(e,1))),"float32"))}function Uvt(t,e){return Ze(()=>Ut(dn(lf(td(t,0),td(e,1))),"float32"))}function zvt(t,e){return Ze(()=>{const n=Bvt(t,e),r=Uvt(t,e),i=wt(n,r);return Ut(Po(vl(i,0),gn(n,i),0),"float32")})}function Vvt(t,e){return cP(t,e)}function Wvt(t,e){return t.rank===e.rank&&(t=C_(t,[t.rank-1])),e=lS(e,-1),e.dtype!==t.dtype&&(e=Ut(e,t.dtype)),Ut(td(t,e),"float32")}const Gvt=lP,Hvt=lP,jvt=_W,Xvt=_W,qvt=CW,Yvt=CW,cme=pS,Kvt=ome,ume=nk,ik={binaryAccuracy:ame,categoricalAccuracy:lme,precision:zvt,categoricalCrossentropy:cme,sparseCategoricalCrossentropy:ume,mse:Gvt,MSE:Hvt,mae:jvt,MAE:Xvt,mape:qvt,MAPE:Yvt,cosine:Kvt};function Zvt(t){if(typeof t=="string"&&t in ik)return ik[t];if(typeof t!="string"&&t!=null)return t;throw new Pe(`Unknown metric ${t}`)}function _E(t){if(Su(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(rk))if(rk[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(ik))if(ik[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Jvt(t){const e={Adagrad:()=>V0.adagrad(.01),Adadelta:()=>V0.adadelta(1,.95,ts()),Adam:()=>V0.adam(.001,.9,.999,ts()),Adamax:()=>V0.adamax(.002,.9,.999,ts(),0),RMSProp:()=>V0.rmsprop(.001,.9,0,ts()),SGD:()=>V0.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new Pe(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const bJ=1*1024*1024;function wJ(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!KF(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>bJ&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${bJ}.`)}}function KF(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!KF(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!KF(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qvt(t,e,n,r=console.log){const i=tyt(t),s=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let o;if(!i){s.push("Receives inputs"),o=[];for(const u in t.nodesByDepth)o.push(...t.nodesByDepth[u])}r("_".repeat(e)),sk(s,n,r),r("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)i?nyt(a[u],n,r):ryt(a[u],n,o,r),r((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=eyt(t),c=JA(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function eyt(t){let e;return t.collectedTrainableWeights!=null?e=JA(t.collectedTrainableWeights):e=JA(t.trainableWeights),e}function tyt(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let s=!1;for(const o of i.inboundNodes)if(r.indexOf(o)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function sk(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function nyt(t,e,n){let r,i;try{i=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,o=t.getClassName(),a=[`${s} (${o})`,i,r,t.countParams().toString()];sk(a,e,n)}function ryt(t,e,n,r){let i,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const o=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let f=0;f<d.inboundLayers.length;++f){const h=d.inboundLayers[f].name,p=d.nodeIndices[f],v=d.tensorIndices[f];o.push(`${h}[${p}][${v}]`)}const a=t.name,l=t.getClassName(),c=o.length===0?"":o[0],u=[`${a} (${l})`,s,i,t.countParams().toString(),c];sk(u,e,r);for(let d=1;d<o.length;++d)sk(["","","","",o[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dme(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function ok(t,e){if(t===null)return null;if(typeof t=="string")return rm(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];dme(e,i,s)?n.push(s):n.push(ok(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const s=rm(r);n[s]=ok(i,s)}}return n}}function ZF(t,e){if(t==null)return null;if(typeof t=="string")return Rd(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const s=t[i];dme(e,i,s)?n.push(s):n.push(ZF(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],s=Rd(r);(r==="name"||r==="className")&&typeof i=="string"?n[s]=i:n[s]=ZF(i,r)}return n}}/** @license See the LICENSE file. */const fme="4.15.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const iyt=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class _c extends Yn{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const y=this.getClassName().toLowerCase();this.name=sP(y)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],xh(this.inputs).length!==this.inputs.length)throw new Pe(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(y=>y.name)}`);xh(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(y=>y.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const x=y.sourceLayer,S=y.nodeIndex,_=y.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(S),this.outputLayersTensorIndices.push(_)}for(const y of this.inputs){const x=y.sourceLayer,S=y.nodeIndex,_=y.tensorIndex;Su(S===0,"input layer has >1 nodes"),Su(_===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(S),this.inputLayersTensorIndices.push(_)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const x=this.inputLayers[y];if(!(x instanceof N_))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${y} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(y=>y.shape),this.internalOutputShapes=this.outputs.map(y=>y.shape);const n={},r={},i={},s={},o={},a=[],l=(y,x,S,_,C,T)=>{(_==null||C==null||T==null)&&(_=y.sourceLayer,C=y.nodeIndex,T=y.tensorIndex);const A=_.inboundNodes[C];if(S.indexOf(A)!==-1)throw new jl(`The tensor ${y.name} at layer "${_.name}" is part of a cycle.`);if(x.indexOf(A)!==-1)return;this.containerNodes.add(_c.nodeKey(_,C)),_.id in o||(o[_.id]=Object.keys(o).length),S.indexOf(A)===-1&&S.push(A);const M=A.inboundLayers.length;for(let E=0;E<M;E++){const P=A.inputTensors[E],N=A.inboundLayers[E],F=A.nodeIndices[E],$=A.tensorIndices[E];l(P,x,S,N,F,$)}for(x.push(A);S.indexOf(A)>=0;)S.splice(S.indexOf(A),1);a.push(A)},c=[],u=[];for(const y of this.outputs)l(y,c,u);const d=a.slice().reverse();for(const y of d){r[y.id]=y,y.id in n||(n[y.id]=0);let x=n[y.id];const S=i[y.outboundLayer.id]==null?0:i[y.outboundLayer.id];x=Math.max(x,S),i[y.outboundLayer.id]=x,s[y.outboundLayer.id]=y.outboundLayer,n[y.id]=x;for(let _=0;_<y.inboundLayers.length;_++){const C=y.inboundLayers[_],T=y.nodeIndices[_],A=C.inboundNodes[T],M=n[A.id]==null?0:n[A.id];n[A.id]=Math.max(x+1,M),r[A.id]=A}}const f={};for(const y in n){const x=n[y];x in f||(f[x]=[]),f[x].push(r[y])}const h={};for(const y in i){const x=i[y];x in h||(h[x]=[]),h[x].push(s[y])}let p=Object.keys(h).map(y=>parseInt(y,10)).sort(bE);this.layers=[];for(const y of p){const x=h[y];x.sort((S,_)=>{const C=o[S.id],T=o[_.id];return C<T?-1:C>T?1:0});for(const S of x)S instanceof _c&&this.internalContainerRefs.push(S),this.layers.push(S)}this.layersByDepth=h,p=Object.keys(f).map(y=>parseInt(y,10)).sort(bE);const v=this.inputs.slice(),g=[];for(const y of p)for(const x of f[y]){const S=x.outboundLayer;if(S!=null){for(const _ of x.inputTensors)if(v.indexOf(_)===-1)throw new jl(`Graph disconnected: cannot obtain value for tensor ${_} at layer "${S.name}". The following previous layers were accessed without issue: ${g}`);for(const _ of x.outputTensors)v.push(_);g.push(S.name)}}this.nodesByDepth=f;const m=this.layers.map(y=>y.name);for(const y of m){const x=m.filter(S=>S===y).length;if(x!==1)throw new jl(`The name "${y}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(m))}this.outboundNodes=[],this.inboundNodes=[],new aP({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(y=>null),outputMasks:this.outputs.map(y=>null),inputShapes:this.inputs.map(y=>y.shape),outputShapes:this.outputs.map(y=>y.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Pe("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const s=iyt(e);s&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new Pe(`Duplicate weight name: ${u}`);r[u]=c,i++}const o=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(n)throw new Pe(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new Pe(`${a.length} of ${i} weights are not set: ${a}`)}wW(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],s=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!i.includes(o)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${fme}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=ZF(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Ze(()=>{e=Cr(e);const r=new nh;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return Y1(this.outputs,r,n)})}computeMask(e,n){return Ze(()=>{e=Cr(e);let r;return n==null?r=gg(null,e.length):r=Cr(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=ZA(e);if(n.length!==this.inputLayers.length)throw new Pe(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";r[u]=c}const i=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(bE);if(i.length>1)for(const a of i){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(v=>v.id).indexOf(u.id)!==-1)continue;const d=[];for(let v=0;v<c.inboundLayers.length;v++){const g=c.inboundLayers[v],m=c.nodeIndices[v],y=c.tensorIndices[v],x=`${g.name}_${m}_${y}`,S=r[x];d.push(S)}const f=u.computeOutputShape(qo(d)),h=ZA(f),p=u.inboundNodes.indexOf(c);for(let v=0;v<h.length;v++){const g=`${u.name}_${p}_${v}`;r[g]=h[v]}}}const s=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;o.push(d)}for(let a=0;a<o.length;a++){const l=o[a];Su(l in r),s.push(r[l])}return qo(s)}runInternalGraph(e,n){n==null&&(n=gg(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=n[l];r[c.id]=[u,d]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(bE);for(const l of i){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,f=u.inputTensors,h=u.outputTensors,p=new Array;for(const v of f)v.id in r&&p.push(r[v.id]);if(p.length===f.length){let v={},g,m,y,x;if(u.callArgs!=null&&(v=u.callArgs),p.length===1){const[S,_]=p[0];v.mask==null&&(v.mask=_),y=Cr(d.call(S,v)),x=Cr(d.computeMask(S,_)),g=[S],m=[_]}else g=p.map(S=>S[0]),m=p.map(S=>S[1]),v.mask==null&&(v.mask=m),y=Cr(d.call(g,v)),x=Cr(d.computeMask(g,m));if(d.activityRegularizer)throw new Pn("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let S=0;S<h.length;++S){const _=h[S],C=y[S],T=x[S];r[_.id]=[C,T]}}}}const s=[],o=[],a=[];for(const l of this.outputs){Su(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];a.push(c.shape),s.push(c),o.push(u)}return[s,o,a]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof _c?1:0;for(let s=0;s<i.inboundNodes.length;s++){const o=_c.nodeKey(i,s);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new Pe("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new Pe(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new Pe(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Ze(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=_c.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),c=[];for(let d=0;d<o.inboundNodes.length;d++){const f=o.inboundNodes[d],h=_c.nodeKey(o,d);let p={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(f.inboundLayers.length>0){const v=[];for(let g=0;g<f.inboundLayers.length;g++){const m=f.inboundLayers[g],y=f.nodeIndices[g],x=f.tensorIndices[g],S=_c.nodeKey(m,y);let _=n[S];_==null&&(_=0),v.push([m.name,_,x,p])}c.push(v)}}}const u={};u.name=o.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const i=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],c=_c.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[o];i.push([a.name,u,d])}e.inputLayers=i;const s=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=_c.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[o];s.push([a.name,u,d])}return e.outputLayers=s,e}static fromConfig(e,n,r={},i=!1){const s={},o={};function a(g,m){g.name in o?o[g.name].push(m):o[g.name]=[m]}function l(g,m){const y=[];let x;for(const S of m){const _=S[0],C=S[1],T=S[2];if(x=S[3]==null?{}:S[3],!(_ in s)){a(g,m);return}const A=s[_];if(A.inboundNodes.length<=C){a(g,m);return}const M=A.inboundNodes[C];y.push(M.outputTensors[T])}y.length>0&&g.apply(qo(y),x)}function c(g){const m=g.name,y=Xu(g,n.customObjects!=null?n.customObjects:{});y.setFastWeightInitDuringBuild(i),s[m]=y,g.inboundNodes.forEach(S=>{if(!(S instanceof Array))throw new Pe(`Corrupted configuration, expected array for nodeData: ${S}`);a(y,S)})}const u=n.name,d=n.layers;for(const g of d)c(g);for(;!V0t(o);)for(const g of d){const m=s[g.name];if(m.name in o){const y=o[m.name];delete o[m.name];for(const x of y)l(m,x)}}const f=[],h=[],p=n.inputLayers;for(const g of p){const m=g[0],y=g[1],x=g[2];Su(m in s);const _=s[m].inboundNodes[y].outputTensors;f.push(_[x])}const v=n.outputLayers;for(const g of v){const m=g[0],y=g[1],x=g[2];Su(m in s);const _=s[m].inboundNodes[y].outputTensors;h.push(_[x])}return new e({inputs:f,outputs:h,name:u})}get stateful(){if(this._stateful)throw new Pe("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Ze(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function syt(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(s=>{s in t?i.push(t[s]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function hme(t,e){return syt(t,e,"classWeight")}async function pme(t,e,n,r){if(e!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const i=Ze(()=>{if(t.shape.length===1)return Lm(t);if(t.shape.length===2){if(t.shape[1]>1)return lS(t,1);if(t.shape[1]===1)return We(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await i.data());Bn(i);const o=[];return s.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),Ca(o,"float32")}else return null}function oyt(t,e){return Oe(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ayt=32;function mme(t,e){let n,r;const i=e;n=i.xs,r=i.ys,ue(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=SJ("input",t.inputNames,n),o=SJ("output",t.outputNames,r),a=s[0].shape[0];ue(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),ue(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)ue(s[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)ue(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:s,ys:o}}function SJ(t,e,n){if(n instanceof Qi)return[n];if(Array.isArray(n))return ue(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new Pe(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function lyt(t){if(t.length===3)throw new Pn("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function cyt(t,e,n){const r=n.batchesPerEpoch!=null;if(ue(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),ue(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),ue(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),ue(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),ue(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let s,o;if(i)if(_J(n.validationData))ue(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=lyt(n.validationData);s=g.xs,o=g.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;i?c=l.slice().concat(l.map(g=>"val_"+g)):c=l.slice();const u=ime(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:h}=sme(u,d,n.epochs,null,null,uyt(e,n),null,i,c);f.setModel(t),t.history=h,await f.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,v=await e.iterator();for(;p<n.epochs;){const g={};await f.onEpochBegin(p);let m=0,y=0;for(r||(v=await e.iterator());!r||m<n.batchesPerEpoch;){const x=await v.next();if(r&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${m} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:S,ys:_}=mme(t,x.value),C={};C.batch=y,C.size=S[0].shape[0],await f.onBatchBegin(y,C);const T=[];if(n.classWeight!=null){const E=hme(n.classWeight,t.outputNames);for(let P=0;P<E.length;++P)T.push(await pme(_[P],null,E[P]))}const A=S.concat(_).concat(T),M=a(A);Bn(A);for(let E=0;E<l.length;++E){const P=l[E],N=M[E];C[P]=N,Wu(N)}await f.onBatchEnd(y,C),rme(C),y++,m++}if(r?m>=n.batchesPerEpoch:x.done){if(i){let S;_J(n.validationData)?S=Cr(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):S=Cr(t.evaluate(s,o,{batchSize:n.validationBatchSize==null?ayt:n.validationBatchSize,verbose:0}));for(let _=0;_<t.metricsNames.length;++_)g[`val_${t.metricsNames[_]}`]=S[_]}break}if(t.stopTraining_)break}if(await f.onEpochEnd(p,g),p++,t.stopTraining_)break}return await f.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function uyt(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function _J(t){return typeof t.iterator=="function"}function dyt(t){return typeof t.next=="function"}async function fyt(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let s=[];if(n.verbose>0)throw new Pn("Verbose mode is not implemented yet.");ue(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=dyt(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const c=await o.next();if(s=Ze(()=>{if(c.value){const{xs:u,ys:d}=mme(t,c.value),f=u.concat(d),h=Ze(()=>i(f));if(Bn(f),l===0)for(let v=0;v<h.length;++v)s.push(yr(0));const p=f[0].shape[0];for(let v=0;v<h.length;++v){const g=h[v],m=s[v];s[v]=Ze(()=>wt(s[v],Oe(p,g))),l>0&&Bn(m)}Bn(h),a+=p,++l}return s}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){const u=s[c];s[c]=gn(s[c],a),Bn(u)}return qo(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eL(t){ue(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function O1(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Fm(r,e,n-e)):Fm(t,e,n-e)}function JF(t,e){return Ze(()=>t==null?null:Array.isArray(t)?t.map(n=>JF(n,e)):Wpe(t,e.dtype==="int32"?e:Ut(e,"int32")))}function tL(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function gme(t){const e=[];t instanceof Qi&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(I_(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function wc(t,e){if(t==null)return;const n=[];if(e instanceof Qi)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const s=e[i];n.push(s.id)}const r=[];if(t instanceof Qi)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const s=t[i];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hyt(t){return t instanceof Qi}function QF(t){return Array.isArray(t)}function CJ(t){return!hyt(t)&&!QF(t)}function TJ(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(QF(t)&&t.length>0)o=!0;else if(CJ(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new Pe(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let s;if(CJ(t)){t=t,s=[];for(const o of e){if(t[o]==null)throw new Pe(`No data provided for "${o}". Need data for each key in: ${e}`);s.push(t[o])}}else if(QF(t)){if(t=t,t.length!==e.length)throw new Pe(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new Pe(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=gme(s),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new Pe(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u>=0&&c!==u)throw new Pe(`${i} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${i} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function pyt(t,e,n){const r=xh(t.map(s=>s.shape[0]));r.sort();const i=xh(e.map(s=>s.shape[0]));if(i.sort(),r.length>1)throw new Pe(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(i.length>1)throw new Pe(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&i.length>0&&!wr(r,i))throw new Pe(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function myt(t,e,n){const r=[lP,cP,pS];for(let i=0;i<t.length;++i){const s=t[i],o=e[i],a=n[i];if(o!=null){if(o===pS&&s.shape[s.shape.length-1]===1)throw new Pe(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=s.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const d=l[u],f=c[u];if(f!=null&&d!==f)throw new Pe(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function EJ(t,e,n,r=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new Pe(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new Pe(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=s[o];if(a.shape.length!==n[o].length)throw new Pe(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u!==c)throw new Pe(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function gyt(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let s=n.hasOwnProperty(i)?n[i]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const vyt="layers-model";class jv extends _c{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new Pe("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Qvt(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Jvt(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof op))throw new Pe("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new Pe(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(QD(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Pe(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>QD(a))}else{const o=QD(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Om("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=gyt(e.metrics,this.outputNames),s=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};Om("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=i[o];(c=>{const u="";let d,f,h;for(const p of c){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[o];g[g.length-1]===1||this.lossFunctions[o]===cP?["accuracy","acc"].indexOf(p)!==-1?f=ame:["crossentropy","ce"].indexOf(p)!==-1&&(f=Vvt):this.lossFunctions[o]===nk?["accuracy","acc"].indexOf(p)!==-1?f=Wvt:["crossentropy","ce"].indexOf(p)!==-1&&(f=ume):["accuracy","acc"].indexOf(p)!==-1?f=lme:["crossentropy","ce"].indexOf(p)!==-1&&(f=cme);let m;["accuracy","acc"].indexOf(p)!==-1?m="acc":["crossentropy","ce"].indexOf(p)!==-1&&(m="ce"),h=f,d=u+m}else h=Zvt(p),d=u+_E(p);let v;Om(d,()=>{v=h}),s(o,d,v)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;eL(i);const s=!0,o=this.standardizeUserDataXY(e,n,s,i);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,i,r.verbose,r.steps);return qo(c)}finally{wc(o[0],e),wc(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),fyt(this,e,n)}checkNumSamples(e,n,r,i="steps"){let s;if(r!=null){if(s=null,n!=null)throw new Pe(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new Pe(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new Pe("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],s=this.retrieveSymbolicTensors(i),o=new nh;if(e instanceof Qi&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Pe(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new Pe(`No value is provided for the model's input ${l.name}`);o.add(l,c)}const a=Y1(s,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=gg(null,e.length);let r=e.length;for(const i of this.layers){const s=Array.isArray(i.output)?i.output:[i.output],o=s.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((s,o)=>{s==null&&i.push(e[o])}),new Pe(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return Ze(()=>{const i=this.checkNumSamples(e);if(r)throw new Pn("Verbose predictLoop() is not implemented yet.");const s=tL(i,n),o=this.outputs.map(a=>[]);for(let a=0;a<s.length;++a)Ze(()=>{const c=s[a][0],u=s[a][1],d=O1(e,c,u),f=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)f.push({key:this.inputs[p],value:d[p]});else f.push({key:this.inputs[0],value:d});const h=new nh(f);return Y1(this.outputs,h)}).forEach((c,u)=>o[u].push(c));return qo(o.map(a=>Qo(a,0)))})}predict(e,n={}){const r=gme(e);EJ(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return eL(i),this.predictLoop(r,i)}finally{wc(r,e)}}predictOnBatch(e){EJ(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new jl("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===nk?s.push(a.slice(0,a.length-1).concat([1])):s.push(a)}if(e=TJ(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=TJ(n,this.feedOutputNames,s,!1,"target"),pyt(e,n),myt(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new Pe(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,s=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,s,o);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(i!=null){const u=hme(i,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await pme(l[d],null,u[d]))}return[a,l,c]}testLoop(e,n,r,i=0,s){return Ze(()=>{const o=this.checkNumSamples(n,r,s,"steps"),a=[];if(i>0)throw new Pn("Verbose mode is not implemented yet.");if(s!=null)throw new Pn("steps mode in testLoop() is not implemented yet");{const l=tL(o,r),c=Ca(Yc(0,o));for(let u=0;u<l.length;++u){const d=l[u][0],f=l[u][1],h=Fm(c,d,f-d),p=JF(n,h),v=e(p);if(u===0)for(let g=0;g<v.length;++g)a.push(yr(0));for(let g=0;g<v.length;++g){const m=v[g];a[g]=wt(a[g],Oe(f-d,m))}}for(let u=0;u<a.length;++u)a[u]=gn(a[u],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let s=i;if(uJ(e,i)>1){const o=uJ(e.slice(0,r),i);s+=`_${o}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const d=[];for(let v=0;v<this.inputs.length;++v)d.push({key:this.inputs[v],value:r[v]});const f=new nh(d),h=Y1(this.outputs,f,{training:!0});let p;for(let v=0;v<this.lossFunctions.length;++v){const g=this.lossFunctions[v];let m=g(i[v],h[v]);s[v]!=null&&(m=oyt(m,s[v]));const y=Gi(m);n.push(y),v===0?p=m:p=wt(p,m)}for(let v=0;v<this.metricsTensors.length;++v){let g;if(this.outputs.length>1&&v<this.outputs.length)g=n[v];else{const m=this.metricsTensors[v][0],y=this.metricsTensors[v][1];g=Gi(m(i[y],h[y]))}Wu(g),o.push(g)}return p=Gi(p),this.calculateLosses().forEach(v=>{p=wt(p,v)}),p},l=this.collectedTrainableWeights.map(d=>d.read()),c=!0;return[this.optimizer_.minimize(a,c,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>Ze(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let c=0;c<this.inputs.length;++c)o.push({key:this.inputs[c],value:i[c]});const a=new nh(o),l=Y1(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=Gi(u(s[c],l[c]));c===0?r=d:r=wt(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],f=Gi(u(s[d],l[d]));n.push(f)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,s,o,a,l,c,u,d,f;try{const h=r.batchSize==null?32:r.batchSize;eL(h);const p=!1,v=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,p,h);i=v[0],s=v[1],f=v[2];let g=!1,m;if(r.validationData!=null&&r.validationData.length>0){if(g=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new Pn("validationData including sample weights is not supported yet."):new Pe(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const M=!0,E=await this.standardizeUserData(l,c,null,null,M,h);u=E[0],d=E[1],m=u.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){g=!0;const M=Math.floor(i[0].shape[0]*(1-r.validationSplit)),E=i[0].shape[0];u=O1(i,M,E),o=i,i=O1(i,0,M),d=O1(s,M,E),a=s,s=O1(s,0,M),m=u.concat(d)}else r.validationSteps!=null&&(g=!0);const y=i.concat(s).concat(f);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),S=this.getDedupedMetricsNames();let _,C;g?(this.makeTestFunction(),_=this.testFunction,C=S.slice().concat(S.map(M=>"val_"+M))):(_=null,m=[],C=S.slice());const T=ime(r.callbacks,r.yieldEvery);return await this.fitLoop(x,y,S,h,r.epochs,r.verbose,T,_,m,r.shuffle,C,r.initialEpoch,null,null)}finally{this.isTraining=!1,wc(i,e),wc(s,n),wc(o,e),wc(a,n),wc(u,l),wc(d,c),f!=null&&Bn(f)}}async fitLoop(e,n,r,i,s,o,a,l,c,u,d,f,h,p){i==null&&(i=32),s==null&&(s=1),u==null&&(u=!0),f==null&&(f=0);let v=!1;if(l!=null&&c!=null&&(v=!0),p!=null&&(v=!0,h==null))throw new Pe("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(n,i,h,"steps_per_epoch");let m;g!=null&&(m=Yc(0,g)),o==null&&(o=1);const{callbackList:y,history:x}=sme(a,o,s,f,g,h,i,v,d);y.setModel(this),this.history=x,await y.onTrainBegin(),this.stopTraining_=!1;for(let S=f;S<s;++S){await y.onEpochBegin(S);const _={};if(h!=null)throw new Pn("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new Pn("batch shuffling is not implemneted yet");u&&Olt(m);const C=Ca(m),T=tL(g,i);for(let A=0;A<T.length;++A){const M={};if(await y.onBatchBegin(A,M),Ze(()=>{const E=T[A][0],P=T[A][1],N=Fm(C,E,P-E);M.batch=A,M.size=P-E;const F=JF(n,N),$=e(F);for(let O=0;O<r.length;++O){const z=r[O],X=$[O];M[z]=X,Wu(X)}if(A===T.length-1&&v){const O=this.testLoop(l,c,i);for(let z=0;z<r.length;++z){const X=r[z],D=O[z];Wu(D),_["val_"+X]=D}}}),await y.onBatchEnd(A,M),rme(M),this.stopTraining_)break}C.dispose()}if(await y.onEpochEnd(S,_),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return cyt(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],s=r[1],a=this.makeTrainFunction()(i.concat(s)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return Bn(a),wc(r[0],e),wc(r[1],n),qo(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let o=0;o<i.length;++o)r&&!i[o].trainable||n.push({name:i[o].originalName,tensor:s[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=DF().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-DF().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Rd(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Rd(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=Rd(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Rd(_E(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Rd(_E(e)));{const e={};for(const n in this.metrics)e[n]=Rd(_E(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=ok(e.optimizer_config),r=Xu(n);let i;if(typeof e.loss=="string")i=rm(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(o=>rm(o));else if(e.loss!=null){i={};for(const o in e.loss)i[o]=rm(e.loss[o])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(o=>rm(o));else if(e.metrics!=null){s={};for(const o in e.metrics)s[o]=rm(e.metrics[o])}this.compile({loss:i,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=Vct(e);if(c.length===0)throw new Pe(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new Pe(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new Pe("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await HZ(this.getNamedWeights(n)),i=!1,s=null,a={modelTopology:this.toJSON(s,i),format:vyt,generatedBy:`TensorFlow.js tfjs-layers v${fme}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await HZ(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=$ct([r.data,u])}return this.userDefinedMetadata!=null&&(wJ(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){wJ(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}jv.className="Model";pt(jv);class vme extends jv{}vme.className="Functional";pt(vme);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function yyt(t,e){if(e==null&&(e={}),typeof t=="string"){const n=Wct(t,e);if(n.length===0)n.push(Tmt(t,e));else if(n.length>1)throw new Pe(`Found more than one (${n.length}) load handlers for URL '${t}'`);t=n[0]}return xyt(t,void 0,e)}async function xyt(t,e,n){if(n==null&&(n={}),t.load==null)throw new Pe("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await t.load();let i=r.modelTopology;i.model_config!=null&&(i=i.model_config);const s=n.strict==null?!0:n.strict,o=r.weightData!=null&&r.weightSpecs!=null&&s,a=Xu(ok(i),e,o),l=r.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),r.userDefinedMetadata!=null&&a.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new Pe("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:c,optimizerWeights:u}=byt(r.weightData,r.weightSpecs);a.loadWeights(c,s),a.optimizer!=null&&u.length>0&&await a.optimizer.setWeights(u),Bn(c),Bn(u.map(d=>d.tensor))}return a}function byt(t,e){const n=Act(t,e),r={},i=[];return e.forEach(s=>{s.group==="optimizer"?i.push({name:s.name,tensor:n[s.name]}):r[s.name]=n[s.name]}),{modelWeights:r,optimizerWeights:i}}class mS extends jv{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:sP("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new Pe(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof mS||e instanceof jv;let r;if(n){if(r=e,r.outputs.length!==1)throw new Pe("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new Pe("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new Pe("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=xvt({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new Pe(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new Pe("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Jpe(this.outputs[0])}this.inboundNodes=[],new aP({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:gg(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(cr(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new jv({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new jl("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new jl("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new jl("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new jl("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let s,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new Pe("Legacy serialization format not supported yet.");s=n}else ue(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof mS))throw new Pn(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of s){const u=Xu(l,void 0,i);i&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new Pe("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new Pe("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}mS.className="Sequential";pt(mS);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let aa=class extends gx{getConfig(){return{}}};class yme extends aa{apply(e,n=1){return rvt(e,n)}}yme.className="elu";pt(yme);class xme extends aa{apply(e){return $he(e)}}xme.className="selu";pt(xme);class bme extends aa{apply(e){return Ug(e)}}bme.className="relu";pt(bme);class wme extends aa{apply(e){return Ze(()=>dS(6,Ug(e)))}}wme.className="relu6";pt(wme);class Sme extends aa{apply(e){return e}}Sme.className="linear";pt(Sme);class _me extends aa{apply(e){return hx(e)}}_me.className="sigmoid";pt(_me);class Cme extends aa{apply(e){return svt(e)}}Cme.className="hardSigmoid";pt(Cme);class Tme extends aa{apply(e){return S_(e)}}Tme.className="softplus";pt(Tme);class Eme extends aa{apply(e){return ivt(e)}}Eme.className="softsign";pt(Eme);class Mme extends aa{apply(e){return rV(e)}}Mme.className="tanh";pt(Mme);let TW=class extends aa{apply(e,n=-1){return MV(e,n)}};TW.className="softmax";pt(TW);class Ame extends aa{apply(e,n=-1){return The(e,n)}}Ame.className="logSoftmax";pt(Ame);class kme extends aa{apply(e,n=1){return Ze(()=>Oe(hx(Oe(e,n)),e))}}kme.className="swish";pt(kme);class Ime extends aa{apply(e){return Ze(()=>Oe(e,rV(S_(e))))}}Ime.className="mish";pt(Ime);function $h(t){return t.getClassName()}function nL(t,e={}){return k_(t,Ul.getMap().classNameMap,e,"activation")}function Dh(t){if(t==null){const e={};return e.className="linear",e.config={},nL(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},nL(e)}else return t instanceof aa?t:nL(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wyt(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class Rme extends gx{}class Pme extends Rme{constructor(e){super(),wyt(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Ze(()=>{let n=gs([1]);return this.hasL1&&(n=wt(n,dn(Oe(this.l1,So(e))))),this.hasL2&&(n=wt(n,dn(Oe(this.l2,R_(e))))),We(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}Pme.className="L1L2";pt(Pme);const MJ={l1l2:"L1L2"};function $r(t){return dW(t)}function AJ(t,e={}){return k_(t,Ul.getMap().classNameMap,e,"regularizer")}function ii(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in MJ?MJ[t]:t,config:{}};return AJ(n)}else return t instanceof Rme?t:AJ(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Nme extends Yn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Sn(e);let r=Ug(e);return this.maxValue!=null&&(r=fl(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}Nme.className="ReLU";pt(Nme);class $me extends Yn{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Sn(e);return dV(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}$me.className="LeakyReLU";pt($me);class Dme extends Yn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=ri(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=ii(e.alphaRegularizer),this.alphaConstraint=ss(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new Pe(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=cr(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new ns({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Sn(e),vV(e,this.alpha.read())}getConfig(){const e={alphaInitializer:ui(this.alphaInitializer),alphaRegularizer:$r(this.alphaRegularizer),alphaConstraint:is(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}Dme.className="PReLU";pt(Dme);let Lme=class extends Yn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Pn(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Sn(e);return J3(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};Lme.className="ELU";pt(Lme);class Ome extends Yn{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Sn(e);return Oe(r,Ut(vl(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}Ome.className="ThresholdedReLU";pt(Ome);class Fme extends Yn{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new TW().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Ze(()=>{let r=Sn(e);const i=n.mask;if(i!=null){const s=Oe(bn(sp(r.shape),Ut(i,r.dtype)),yr(-1e9));r=wt(r,s)}return this.axis instanceof Array?this.axis.length>1?nd(bn(r,Ehe(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}Fme.className="Softmax";pt(Fme);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xv(t,e,n){if(typeof t=="number")return gg(t,e);if(t.length!==e)throw new Pe(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!Q0t(i))throw new Pe(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function Gc(t,e,n,r,i=1){if(t==null)return t;const s=e+(e-1)*(i-1);let o;return n==="same"?o=t:o=t-s+1,Math.floor((o+r-1)/r)}function _u(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Nh([n-e,0]);else if(r==="same")t=t*e;else throw new Pe(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function EW(t,e){return Ze(()=>($i(e),e==="channelsFirst"?ir(t,[0,2,3,1]):t))}function Bme(t,e){return Ze(()=>($i(e),e==="channelsFirst"?ir(t,[0,2,3,4,1]):t))}function Syt(t,e,n,r=1,i="valid",s,o=1){return Ze(()=>{if(s==null&&(s=Kc()),$i(s),t.shape.length!==3)throw new Pe(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new Pe(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Pe(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(s==="channelsFirst"&&(t=ir(t,[0,2,1])),i==="causal")throw new Pn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=ghe(t,e,r,i==="same"?"same":"valid","NWC",o);return n!=null&&(a=ru(a,n)),a})}function kJ(t,e,n,r=[1,1],i="valid",s,o,a=null){return Ze(()=>{if(s==null&&(s=Kc()),$i(s),t.rank!==3&&t.rank!==4)throw new Pe(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new Pe(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=EW(t,s);if(i==="causal")throw new Pn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Spt({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),s==="channelsFirst"&&(l=ir(l,[0,3,1,2])),l})}function _yt(t,e,n,r=[1,1,1],i="valid",s,o){return Ze(()=>{if(s==null&&(s=Kc()),$i(s),t.rank!==4&&t.rank!==5)throw new Pe(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new Pe(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=Bme(t,s);if(i==="causal")throw new Pn("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=xdt(a,e,r,i==="same"?"same":"valid","NDHWC",o),n!=null&&(a=ru(a,n)),s==="channelsFirst"&&(a=ir(a,[0,4,1,2,3])),a})}class uP extends Yn{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",uP.verifyArgs(n),this.rank=e,ys(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Pn(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Xv(n.kernelSize,e,"kernelSize"),this.strides=Xv(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,yl(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,$i(this.dataFormat),this.activation=Dh(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=ri(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=ss(n.biasConstraint),this.biasRegularizer=ii(n.biasRegularizer),this.activityRegularizer=ii(n.activityRegularizer),this.dilationRate=Xv(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Pe(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Pe(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Pe(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Su("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!fW(e.kernelSize,"number",1,3))throw new Pe(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:$h(this.activation),useBias:this.useBias,biasInitializer:ui(this.biasInitializer),biasRegularizer:$r(this.biasRegularizer),activityRegularizer:$r(this.activityRegularizer),biasConstraint:is(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class vx extends uP{constructor(e,n){super(e,n),this.kernel=null,vx.verifyArgs(n),this.filters=n.filters,ys(this.filters,"filters"),this.kernelInitializer=ri(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=ss(n.kernelConstraint),this.kernelRegularizer=ii(n.kernelRegularizer)}build(e){e=cr(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Pe(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Ze(()=>{e=Sn(e);let r;const i=this.bias==null?null:this.bias.read(),s=Ope(this.activation.getClassName());if(s!=null&&this.rank===2)r=kJ(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=Syt(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=kJ(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=_yt(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Pn("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=cr(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const o=Gc(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(o)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:ui(this.kernelInitializer),kernelRegularizer:$r(this.kernelRegularizer),kernelConstraint:is(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new Pe(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class D_ extends vx{constructor(e){super(2,e),D_.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!fW(e.kernelSize,"number",1,2))throw new Pe(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}D_.className="Conv2D";pt(D_);class L_ extends vx{constructor(e){super(3,e),L_.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new Pe(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}L_.className="Conv3D";pt(L_);class Ume extends D_{constructor(e){if(super(e),this.inputSpec=[new ns({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Pe(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=cr(e),e.length!==4)throw new Pe("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Pe("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new ns({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Ze(()=>{let r=Sn(e);if(r.shape.length!==4)throw new Pe(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=i[o],c=i[a],u=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],h=this.strides[1],p=_u(l,f,u,this.padding),v=_u(c,h,d,this.padding),g=[s,p,v,this.filters];this.dataFormat!=="channelsLast"&&(r=ir(r,[0,2,3,1]));let m=vhe(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(m=ir(m,[0,3,1,2])),this.bias!=null&&(m=ru(m,this.bias.read(),this.dataFormat)),this.activation!=null&&(m=this.activation.apply(m)),m})}computeOutputShape(e){e=cr(e);const n=e.slice();let r,i,s;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3):(r=3,i=1,s=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[i]=_u(n[i],l,o,this.padding),n[s]=_u(n[s],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}Ume.className="Conv2DTranspose";pt(Ume);class zme extends L_{constructor(e){if(super(e),this.inputSpec=[new ns({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Pe(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=cr(e),e.length!==5)throw new Pe("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Pe("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new ns({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Ze(()=>{let r=Sn(e);if(r.shape.length!==5)throw new Pe(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,s=i[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const c=i[l],u=i[o],d=i[a],f=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],v=this.strides[0],g=this.strides[1],m=this.strides[2],y=_u(c,v,f,this.padding),x=_u(u,g,h,this.padding),S=_u(d,m,p,this.padding),_=[s,y,x,S,this.filters];this.dataFormat!=="channelsLast"&&(r=ir(r,[0,2,3,4,1]));let C=Sdt(r,this.kernel.read(),_,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=ir(C,[0,4,1,2,3])),this.bias!==null&&(C=ru(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=cr(e);const n=e.slice();let r,i,s,o;this.dataFormat==="channelsFirst"?(r=1,i=2,s=3,o=4):(r=4,i=1,s=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],f=this.strides[2];return n[r]=this.filters,n[i]=_u(n[i],u,a,this.padding),n[s]=_u(n[s],d,l,this.padding),n[o]=_u(n[o],f,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}zme.className="Conv3DTranspose";pt(zme);class Vme extends vx{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new Pe("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new Pe("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new Pe(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=ri(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=ii(n.depthwiseRegularizer),this.depthwiseConstraint=ss(n.depthwiseConstraint),this.pointwiseInitializer=ri(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=ii(n.pointwiseRegularizer),this.pointwiseConstraint=ss(n.pointwiseConstraint)}build(e){if(e=cr(e),e.length<this.rank+2)throw new Pe(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new Pe(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let a=0;a<this.rank;++a)s.push(1);s.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new ns({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Ze(()=>{e=Sn(e);let r;if(this.rank===1)throw new Pn("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=ir(e,[0,2,3,1])),r=Dhe(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=ru(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=ir(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=ui(this.depthwiseInitializer),e.pointwiseInitializer=ui(this.pointwiseInitializer),e.depthwiseRegularizer=$r(this.depthwiseRegularizer),e.pointwiseRegularizer=$r(this.pointwiseRegularizer),e.depthwiseConstraint=is(this.depthwiseConstraint),e.pointwiseConstraint=is(this.pointwiseConstraint),e}}Vme.className="SeparableConv";class Wme extends Vme{constructor(e){super(2,e)}}Wme.className="SeparableConv2D";pt(Wme);class dP extends vx{constructor(e){super(1,e),dP.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!fW(e.kernelSize,"number",1,1))throw new Pe(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}dP.className="Conv1D";pt(dP);class Gme extends Yn{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Ze(()=>{if(e=Sn(e),this.dataFormat==="channelsLast"){const r=SE(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return SE(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=SE(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return SE(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}Gme.className="Cropping2D";pt(Gme);class Hme extends Yn{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,$i(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,K0t(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Ze(()=>{let r=Sn(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=ir(r,[0,2,3,1]);const s=this.size[0]*i[2],o=this.size[1]*i[3],a=this.interpolation==="nearest"?Gd.resizeNearestNeighbor(r,[s,o]):Gd.resizeBilinear(r,[s,o]);return ir(a,[0,3,1,2])}else{const s=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?Gd.resizeNearestNeighbor(r,[s,o]):Gd.resizeBilinear(r,[s,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}Hme.className="UpSampling2D";pt(Hme);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Cyt(t,e,n=[1,1],r="valid",i,s){return Ze(()=>{i==null&&(i=Kc()),$i(i);let o=EW(t,i);if(t.rank!==4)throw new Pe(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new Pe(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=aV(o,e,n,r==="same"?"same":"valid","NHWC",s),i==="channelsFirst"&&(o=ir(o,[0,3,1,2])),o})}class jme extends uP{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=ri(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=ss(e.depthwiseConstraint),this.depthwiseRegularizer=ii(e.depthwiseRegularizer)}build(e){if(e=cr(e),e.length<4)throw new Pe(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new Pe(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ze(()=>{e=Sn(e);let r=Cyt(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=ru(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=cr(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=Gc(n,this.kernelSize[0],this.padding,this.strides[0]),o=Gc(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,s,o]:[e[0],s,o,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=ui(this.depthwiseInitializer),e.depthwiseRegularizer=$r(this.depthwiseRegularizer),e.depthwiseConstraint=is(this.depthwiseRegularizer),e}}jme.className="DepthwiseConv2D";pt(jme);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xme(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new Pe("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(s){return s==null||Array.isArray(s)?s:[s]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function qme(t,e,n,r=!1,i,s,o=!1,a=!1){return Ze(()=>{const l=e.shape.length;if(l<3)throw new Pe(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Yc(2,l));if(e=ir(e,c),s!=null)throw new Pn("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=Ut(Ut(i,"bool"),"float32"),i.rank===l-1&&(i=Xo(i,-1)),i=ir(i,c)),r&&(e=pg(e,0),i!=null&&(i=pg(i,0)));const u=[];let d,f=n;const h=e.shape[0],p=mg(e);let v;i!=null&&(v=mg(i));for(let m=0;m<h;++m){const y=p[m],x=Ze(()=>t(y,f));if(i==null)d=x[0],f=x[1];else{const S=Ze(()=>{const _=v[m],C=bn(ac(_),_),T=wt(Oe(x[0],_),Oe(f[0],C)),A=f.map((M,E)=>wt(Oe(x[1][E],_),Oe(M,C)));return{output:T,newStates:A}});d=S.output,f=S.newStates}a&&u.push(d)}let g;return a&&(g=cf(u,1)),[d,g,f]})}class ap extends Yn{constructor(e){super(e);let n;if(e.cell==null)throw new Pe("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new kW({cells:e.cell}):n=e.cell,n.stateSize==null)throw new Pe("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new ns({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Yc(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){qF(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const s=[];for(const o of n)s.push([e[0],o]);return[i].concat(s)}else return i}computeMask(e,n){return Ze(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(s=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Pn("Constants support is not implemented in RNN yet.");qF(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new ns({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!wr(this.stateSpec.map(o=>o.shape[o.shape.length-1]),s))throw new Pe(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(o=>new ns({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Ze(()=>{if(!this.stateful)throw new wu("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new Pe("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>gs([r,i])):this.states_=[gs([r,this.cell.stateSize])];else if(e==null)Bn(this.states_),this.keptStates!=null&&(Bn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>gs([r,i])):this.states_[0]=gs([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Pe(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):Bn(this.states_);for(let i=0;i<this.states_.length;++i){const s=e[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,a=[r,o];if(!wr(s.shape,a))throw new Pe(`State ${i} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${s.shape}`);this.states_[i]=s}}this.states_=this.states_.map(i=>Wu(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=Xme(e,r,i,this.numConstants);e=s.inputs,r=s.initialState,i=s.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new ns({shape:c.shape}));a=a.concat(this.stateSpec)}if(i!=null&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof id){const c=[e].concat(o),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const f=super.apply(c,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Ze(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let s=n==null?null:n.initialState;e=Sn(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==o)throw new Pe(`RNN Layer has ${o} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:i},c=qme((p,v)=>{const g=this.cell.call([p].concat(v),a);return[g[0],g.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],d=c[1],f=c[2];this.stateful&&this.resetStates(f,i);const h=this.returnSequences?d:u;return this.returnState?[h].concat(f):h})}getInitialState(e){return Ze(()=>{let n=gs(e.shape);return n=dn(n,[1,2]),n=I_(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?jF(n,[1,r]):n):this.cell.stateSize>1?[jF(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===ap.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,s=Xu(i,r);return new e(Object.assign(n,{cell:s}))}}ap.className="RNN";pt(ap);class fP extends Yn{}class MW extends fP{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ys(this.units,"units"),this.activation=Dh(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ri(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ri(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ri(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ii(e.kernelRegularizer),this.recurrentRegularizer=ii(e.recurrentRegularizer),this.biasRegularizer=ii(e.biasRegularizer),this.kernelConstraint=ss(e.kernelConstraint),this.recurrentConstraint=ss(e.recurrentConstraint),this.biasConstraint=ss(e.biasConstraint),this.dropout=My([1,Nh([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=My([1,Nh([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=cr(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ze(()=>{if(e=e,e.length!==2)throw new Pe(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Lh({ones:()=>ac(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Lh({ones:()=>ac(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let s;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?s=ju(Oe(e,o),this.kernel.read()):s=ju(e,this.kernel.read()),this.bias!=null&&(s=ru(s,this.bias.read())),a!=null&&(r=Oe(r,a));let l=wt(s,ju(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:$h(this.activation),useBias:this.useBias,kernelInitializer:ui(this.kernelInitializer),recurrentInitializer:ui(this.recurrentInitializer),biasInitializer:ui(this.biasInitializer),kernelRegularizer:$r(this.kernelRegularizer),recurrentRegularizer:$r(this.recurrentRegularizer),biasRegularizer:$r(this.biasRegularizer),activityRegularizer:$r(this.activityRegularizer),kernelConstraint:is(this.kernelConstraint),recurrentConstraint:is(this.recurrentConstraint),biasConstraint:is(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}MW.className="SimpleRNNCell";pt(MW);class Yme extends ap{constructor(e){e.cell=new MW(e),super(e)}call(e,n){return Ze(()=>{this.cell.dropoutMask!=null&&(Bn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Bn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return new e(n)}}Yme.className="SimpleRNN";pt(Yme);class AW extends fP{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Pe("GRUCell does not support reset_after parameter set to true.");this.units=e.units,ys(this.units,"units"),this.activation=Dh(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Dh(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ri(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ri(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ri(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=ii(e.kernelRegularizer),this.recurrentRegularizer=ii(e.recurrentRegularizer),this.biasRegularizer=ii(e.biasRegularizer),this.kernelConstraint=ss(e.kernelConstraint),this.recurrentConstraint=ss(e.recurrentConstraint),this.biasConstraint=ss(e.biasConstraint),this.dropout=My([1,Nh([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=My([1,Nh([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=cr(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Ze(()=>{if(e=e,e.length!==2)throw new Pe(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Lh({ones:()=>ac(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Lh({ones:()=>ac(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=Oe(e,s[0]));let u=ju(e,this.kernel.read());this.useBias&&(u=ru(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=Oe(i,o[0]));const d=this.recurrentKernel.read(),[f,h]=cl(d,[2*this.units,this.units],d.rank-1),p=ju(i,f),[v,g,m]=cl(u,3,u.rank-1),[y,x]=cl(p,2,p.rank-1);a=this.recurrentActivation.apply(wt(v,y)),l=this.recurrentActivation.apply(wt(g,x));const S=ju(Oe(l,i),h);c=this.activation.apply(wt(m,S));const _=wt(Oe(a,i),Oe(wt(1,Ri(a)),c));return[_,_]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:$h(this.activation),recurrentActivation:$h(this.recurrentActivation),useBias:this.useBias,kernelInitializer:ui(this.kernelInitializer),recurrentInitializer:ui(this.recurrentInitializer),biasInitializer:ui(this.biasInitializer),kernelRegularizer:$r(this.kernelRegularizer),recurrentRegularizer:$r(this.recurrentRegularizer),biasRegularizer:$r(this.biasRegularizer),activityRegularizer:$r(this.activityRegularizer),kernelConstraint:is(this.kernelConstraint),recurrentConstraint:is(this.recurrentConstraint),biasConstraint:is(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}AW.className="GRUCell";pt(AW);class Kme extends ap{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new AW(e),super(e)}call(e,n){return Ze(()=>{this.cell.dropoutMask!=null&&(Bn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Bn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Kme.className="GRU";pt(Kme);class hP extends fP{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,ys(this.units,"units"),this.activation=Dh(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Dh(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=ri(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ri(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ri(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=ii(e.kernelRegularizer),this.recurrentRegularizer=ii(e.recurrentRegularizer),this.biasRegularizer=ii(e.biasRegularizer),this.kernelConstraint=ss(e.kernelConstraint),this.recurrentConstraint=ss(e.recurrentConstraint),this.biasConstraint=ss(e.biasConstraint),this.dropout=My([1,Nh([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=My([1,Nh([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=cr(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,o=this.units;i=new(n=class extends fc{apply(l,c){const u=s.apply([o]),d=new pW().apply([o]),f=s.apply([o*2]);return fJ(fJ(u,d),f)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Ze(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new Pe(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Lh({ones:()=>ac(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Lh({ones:()=>ac(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=Oe(e,o[0]));let f=ju(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=Oe(i,a[0])),f=wt(f,ju(i,this.recurrentKernel.read())),this.useBias&&(f=ru(f,this.bias.read()));const[h,p,v,g]=cl(f,4,f.rank-1);l=this.recurrentActivation.apply(h),c=this.recurrentActivation.apply(p),u=wt(Oe(c,s),Oe(l,this.activation.apply(v))),d=this.recurrentActivation.apply(g);const m=Oe(d,this.activation.apply(u));return[m,m,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:$h(this.activation),recurrentActivation:$h(this.recurrentActivation),useBias:this.useBias,kernelInitializer:ui(this.kernelInitializer),recurrentInitializer:ui(this.recurrentInitializer),biasInitializer:ui(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:$r(this.kernelRegularizer),recurrentRegularizer:$r(this.recurrentRegularizer),biasRegularizer:$r(this.biasRegularizer),activityRegularizer:$r(this.activityRegularizer),kernelConstraint:is(this.kernelConstraint),recurrentConstraint:is(this.recurrentConstraint),biasConstraint:is(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}hP.className="LSTMCell";pt(hP);class Zme extends ap{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new hP(e),super(e)}call(e,n){return Ze(()=>{this.cell.dropoutMask!=null&&(Bn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Bn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}Zme.className="LSTM";pt(Zme);class kW extends fP{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Ze(()=>{e=e;let r=e.slice(1);const i=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?i.push(r.splice(0,a.stateSize.length)):i.push(r.splice(0,1));i.reverse();const s=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=i[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),s.push(o.slice(1))}r=[];for(const a of s.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){qF(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{Om(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const s of n.cells)i.push(Xu(s,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return YF(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,s=e.splice(i);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],s[o]])}wW(n)}}kW.className="StackedRNNCells";pt(kW);function Lh(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:s}=t,o=()=>s!=null?s(e(),n):Gpe(e(),n),a=()=>P_(o,e,r);return!i||i<=1?Wu(a().clone()):Array(i).fill(void 0).map(a).map(c=>Wu(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Tyt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Jme extends ap{constructor(e){if(e.unroll)throw new Pn("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Pn("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new ns({ndim:5})]}call(e,n){return Ze(()=>{if(this.cell.dropoutMask!=null&&(Bn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Bn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new Pe("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Ze(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)],o=gs(s);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){Ze(()=>{if(!this.stateful)throw new wu("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),s=[i[0],...i.slice(2)];if(r[0]==null)throw new Pe("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>gs(s)):this.states_=[gs(s)];else if(e==null)Bn(this.states_),this.keptStates!=null&&(Bn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>gs(s)):this.states_[0]=gs(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Pe(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):Bn(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=s;if(!wr(l.shape,c))throw new Pe(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>Wu(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:s,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=Gc(c,i[0],s,o[0],a[0]),f=Gc(u,i[1],s,o[1],a[1]);return[...e.slice(0,2),...l?[r,d,f]:[d,f,r]]}}Jme.className="ConvRNN2D";class IW extends hP{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:s,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,ys(this.filters,"filters"),this.kernelSize=Xv(r,2,"kernelSize"),this.kernelSize.forEach(l=>ys(l,"kernelSize")),this.strides=Xv(i||1,2,"strides"),this.strides.forEach(l=>ys(l,"strides")),this.padding=s||"valid",yl(this.padding),this.dataFormat=o||"channelsLast",$i(this.dataFormat),this.dilationRate=Xv(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>ys(l,"dilationRate"))}build(e){var n;e=cr(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new Pe(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],s=4,o=this.kernelSize.concat([i,this.filters*s]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends fc{apply(f,h){const p=c.apply([u]),v=sp([u]),g=c.apply([u*2]);return hW([p,v,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Ze(()=>{if(e.length!==3)throw new Pe(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],s=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Lh({ones:()=>ac(i),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(V,W,j)=>!W||!W[j]?V:Oe(W[j],V);let u=c(i,l,0),d=c(i,l,1),f=c(i,l,2),h=c(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Lh({ones:()=>ac(s),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let v=c(s,p,0),g=c(s,p,1),m=c(s,p,2),y=c(s,p,3);const x=3,[S,_,C,T]=cl(this.kernel.read(),a,x),[A,M,E,P]=this.useBias?cl(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,S,A,this.padding),d=this.inputConv(d,_,M,this.padding),f=this.inputConv(f,C,E,this.padding),h=this.inputConv(h,T,P,this.padding);const[N,F,$,O]=cl(this.recurrentKernel.read(),a,x);v=this.recurrentConv(v,N),g=this.recurrentConv(g,F),m=this.recurrentConv(m,$),y=this.recurrentConv(y,O);const z=this.recurrentActivation.apply(wt(u,v)),X=this.recurrentActivation.apply(wt(d,g)),D=wt(Oe(X,o),Oe(z,this.activation.apply(wt(f,m)))),B=Oe(this.recurrentActivation.apply(wt(h,y)),this.activation.apply(D));return[B,B,D]})}getConfig(){const e=super.getConfig(),n=Tyt(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,i){const s=hg(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?ru(s,r,this.dataFormat):s}recurrentConv(e,n){return hg(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}IW.className="ConvLSTM2DCell";pt(IW);class Qme extends Jme{constructor(e){const n=new IW(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}Qme.className="ConvLSTM2D";pt(Qme);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class RW extends Yn{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=Sn(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,s=this.getNoiseShape(r);return P_(()=>Gpe(r,this.rate,s,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}RW.className="Dropout";pt(RW);class ege extends RW{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}ege.className="SpatialDropout1D";pt(ege);class tge extends Yn{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,ys(this.units,"units"),this.activation=Dh(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=ri(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=ri(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=ss(e.kernelConstraint),this.biasConstraint=ss(e.biasConstraint),this.kernelRegularizer=ii(e.kernelRegularizer),this.biasRegularizer=ii(e.biasRegularizer),this.activityRegularizer=ii(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=cr(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=cr(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=Sn(e),i=Ope(this.activation.getClassName());let s;return i!=null?s=ju(r,this.kernel.read(),i,this.bias?this.bias.read():null):(s=ju(r,this.kernel.read()),this.bias!=null&&(s=ru(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:$h(this.activation),useBias:this.useBias,kernelInitializer:ui(this.kernelInitializer),biasInitializer:ui(this.biasInitializer),kernelRegularizer:$r(this.kernelRegularizer),biasRegularizer:$r(this.biasRegularizer),activityRegularizer:$r(this.activityRegularizer),kernelConstraint:is(this.kernelConstraint),biasConstraint:is(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}tge.className="Dense";pt(tge);class nge extends Yn{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=cr(e);for(const n of e.slice(1))if(n==null)throw new Pe(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],bh(e,1)]}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);let r=Sn(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let s=2;s<r.rank;++s)i.push(s);i.push(1),r=ir(r,i)}return nvt(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}nge.className="Flatten";pt(nge);class rge extends Yn{constructor(e){super(e),this.supportsMasking=!0,this.activation=Dh(e.activation)}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=Sn(e);return this.activation.apply(r)})}getConfig(){const e={activation:$h(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}rge.className="Activation";pt(rge);class ige extends Yn{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Ze(()=>(e=Sn(e),evt(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}ige.className="RepeatVector";pt(ige);class sge extends Yn{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let s=1,o=null;for(let l=0;l<i.length;++l){const c=i[l];if(this.isUnknown(c))if(o===null)o=l;else throw new Pe("Can only specifiy one unknown dimension.");else s*=c}const a=bh(e);if(o!==null){if(s===0||a%s!==0)throw new Pe(r);i[o]=a/s}else if(a!==s)throw new Pe(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=Sn(e),i=r.shape,s=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return We(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}sge.className="Reshape";pt(sge);class oge extends Yn{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Yc(1,e.dims.length+1);if(!wr(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new ns({ndim:this.dims.length+1})]}computeOutputShape(e){e=cr(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return ir(Sn(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}oge.className="Permute";pt(oge);class age extends Yn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Sn(e),i=-1;return BF(qA(r,this.maskValue),i)}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=Sn(e),i=-1,s=!0,o=BF(qA(r,this.maskValue),i,s);return Oe(r,Ut(o,r.dtype))})}}age.className="Masking";pt(age);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class lge extends Yn{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Cr(e.inputLength))}this.inputDim=e.inputDim,ys(this.inputDim,"inputDim"),this.outputDim=e.outputDim,ys(this.outputDim,"outputDim"),this.embeddingsInitializer=ri(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=ii(e.embeddingsRegularizer),this.activityRegularizer=ii(e.activityRegularizer),this.embeddingsConstraint=ss(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Ze(()=>this.maskZero?(e=Sn(e),qA(e,or(e))):null)}computeOutputShape(e){if(e=cr(e),this.inputLength==null)return[...e,this.outputDim];const n=Cr(this.inputLength);if(n.length!==e.length-1)throw new Pe(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const s=n[i],o=e[i+1];if(s!=null&&o!=null&&s!==o)throw new Pe(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);let r=Sn(e);r.dtype!=="int32"&&(r=Hu(r,"int32"));const i=Wpe(this.embeddings.read(),We(r,[r.size]));return We(i,cr(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:ui(this.embeddingsInitializer),embeddingsRegularizer:$r(this.embeddingsRegularizer),activityRegularizer:$r(this.activityRegularizer),embeddingsConstraint:is(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}lge.className="Embedding";pt(lge);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wg extends Yn{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Pn}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const s=e[e.length-n.length+i],o=n[i];if(s==null||o==null||s<0||o<0)r.push(null);else if(s===1)r.push(o);else if(o===1)r.push(s);else{if(s!==o)throw new Pe("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[cr(e)]),e=e,e.length<2)throw new Pe(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=xh(n),n.length>1)throw new Pe(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const o=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const i=e.map(s=>s.length);e.indexOf(null)===-1&&xh(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Ze(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(s=>s.rank);if(i.indexOf(null)===-1){const s=Nh(i);for(let o of e){const a=o.rank;for(let l=0;l<s-a;++l)o=I_(o,1);r.push(o)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],f=u.slice(1).concat([d]);let h=We(l,[d].concat(bh(u.slice(1))));h=ir(h,[1,0]),h=We(h,f),r.push(h),s=!0}else if(c>1){const u=Yc(1,c).concat([0]);r.push(ir(l,u)),s=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(s){if(a==null){const l=o.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));o=We(ir(We(o,[-1,u]),[1,0]),d)}else if(a>1){const l=[a-1].concat(Yc(0,a-1));o=ir(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const s=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=xh(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Ze(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Pe("`mask` should be an Array");if(!Array.isArray(e))throw new Pe("`inputs` should be an Array");if(n.length!==e.length)throw new Pe(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Xo(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=lf(r,n[i]);return r})}}class cge extends Wg{constructor(e){super(e)}mergeFunction(e){return Ze(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=wt(n,e[r]);return n})}}cge.className="Add";pt(cge);class uge extends Wg{constructor(e){super(e)}mergeFunction(e){return Ze(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Oe(n,e[r]);return n})}}uge.className="Multiply";pt(uge);class dge extends Wg{constructor(e){super(e)}mergeFunction(e){return Ze(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=wt(n,e[r]);return Oe(1/e.length,n)})}}dge.className="Average";pt(dge);class fge extends Wg{constructor(e){super(e)}mergeFunction(e){return Ze(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=ip(n,e[r]);return n})}}fge.className="Maximum";pt(fge);class hge extends Wg{constructor(e){super(e)}mergeFunction(e){return Ze(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=dS(n,e[r]);return n})}}hge.className="Minimum";pt(hge);class pge extends Wg{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new Pe("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const s=e[i].slice();s.splice(this.axis,1);let o=!1;for(const a of r)if(wr(a,s)){o=!0;break}o||r.push(s)}if(r.length>1)throw new Pe("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Ze(()=>hW(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new Pe("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[i]==null||s[i]==null){r[i]=null;break}r[i]+=s[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new Pe("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Pe("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new Pe(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Ze(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const i=[];for(let o=0;o<e.length;++o)n[o]==null?i.push(Ut(ac(e[o]),"bool")):n[o].rank<e[o].rank?i.push(Xo(n[o],-1)):i.push(n[o]);const s=Qo(i,this.axis);return mhe(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}pge.className="Concatenate";pt(pge);function F1(t,e){for(;t<0;)t+=e;return t}function Eyt(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Pn("batchDot is not implemented for tensors of 4D or higher rank yet");if(ue(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),ue(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Pn("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const s=n;return Ze(()=>{let o;if(r>i){o=r-i;const l=[];for(let c=0;c<o;++c)l.push(1);e=We(e,e.shape.concat(l))}else if(i>r){o=i-r;const l=[];for(let c=0;c<o;++c)l.push(1);t=We(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?a=dn(Oe(t,e),s[0]):a=dn(Oe(ir(t,[1,0]),e),s[1]);else{const l=s[0]!==t.shape.length-1,c=s[1]===e.shape.length-1;a=vr(t,e,l,c)}if(o>0){let l;r>i?l=r+i-3:l=r-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);a=C_(a,c)}return a.shape.length===1&&(a=Xo(a,1)),a})}class mge extends Wg{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){ue(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Pn("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new Pe(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new Pe(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((s,o)=>F1(s,e[o].shape.length)):i=[F1(this.axes,n.shape.length),F1(this.axes,r.shape.length)],this.normalize&&(n=tk(n,i[0]),r=tk(r,i[1])),Eyt(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[F1(this.axes,e.length),F1(this.axes,n.length)],r}computeOutputShape(e){ue(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Pn("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}mge.className="Dot";pt(mge);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gge extends Yn{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=Sn(e);return P_(()=>wt(oP(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}gge.className="GaussianNoise";pt(gge);class vge extends Yn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Ze(()=>{this.invokeCallHook(e,n);const r=Sn(e);return this.rate>0&&this.rate<1?P_(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return Oe(r,oP(r.shape,1,s))},()=>r,n.training||!1):r})}}vge.className="GaussianDropout";pt(vge);class yge extends Yn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Sn(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Ze(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return P_(()=>{const s=Sn(e),o=1.6732632423543772,a=1.0507009873554805,l=-o*a;let c=Fg(__(r),this.rate);c=Hu(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-u*l*this.rate,f=wt(Oe(s,c),Oe(wt(c,-1),l));return wt(Oe(f,u),d)},()=>Sn(e),n.training||!1)}return e})}}yge.className="AlphaDropout";pt(yge);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gS(t,e,n,r,i,s=.001){let o;if(t.rank===2)o=Yut(t,e,n,r,i,s);else if(t.rank===3)o=Zut(t,e,n,r,i,s);else if(t.rank===4)o=Qut(t,e,n,r,i,s);else throw new Pn(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function Myt(t,e,n,r,i=.001){return Ze(()=>{const s=pV(t,r),o=s.mean,a=s.variance;return[gS(t,o,a,n,e,i),o,a]})}function Ayt(t,e,n,r,i=.001){return Ze(()=>{const s=pV(t,r),o=s.mean,a=s.variance,l=[];for(const p of Yc(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const c=We(o,l),u=We(a,l),d=e==null?null:We(e,l),f=n==null?null:We(n,l);return[gS(t,c,u,f,d,i),o,a]})}function kyt(t,e,n,r,i=.001){return wr(r.slice().sort(),Yc(0,t.rank-1))?Myt(t,e,n,r,i):Ayt(t,e,n,r,i)}class xge extends Yn{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=ri(e.betaInitializer||"zeros"),this.gammaInitializer=ri(e.gammaInitializer||"ones"),this.movingMeanInitializer=ri(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=ri(e.movingVarianceInitializer||"ones"),this.betaConstraint=ss(e.betaConstraint),this.gammaConstraint=ss(e.gammaConstraint),this.betaRegularizer=ii(e.betaRegularizer),this.gammaRegularizer=ii(e.gammaRegularizer)}build(e){e=cr(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new Pe(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new ns({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Ze(()=>{const r=n.training==null?!1:n.training,i=Sn(e),s=i.shape,o=s.length,a=Yc(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const c=gg(1,o);c[l]=s[l];const u=a.slice();u.sort();const d=!wr(u,Yc(0,o).slice(0,o-1)),f=()=>{if(d){const y=We(this.movingMean.read(),c),x=We(this.movingVariance.read(),c),S=this.center?We(this.beta.read(),c):null,_=this.scale?We(this.gamma.read(),c):null;return gS(i,y,x,S,_,this.epsilon)}else return gS(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return f();const[h,p,v]=kyt(i,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(y,x,S)=>{Ze(()=>{const _=1-S,C=y.read(),T=Oe(bn(C,x),_);y.write(bn(C,T))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,v,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:ui(this.betaInitializer),gammaInitializer:ui(this.gammaInitializer),movingMeanInitializer:ui(this.movingMeanInitializer),movingVarianceInitializer:ui(this.movingVarianceInitializer),betaRegularizer:$r(this.betaRegularizer),gammaRegularizer:$r(this.gammaRegularizer),betaConstraint:is(this.betaConstraint),gammaConstraint:is(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}xge.className="BatchNormalization";pt(xge);class bge extends Yn{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=ri(e.betaInitializer||"zeros"),this.gammaInitializer=ri(e.gammaInitializer||"ones"),this.betaRegularizer=ii(e.betaRegularizer),this.gammaRegularizer=ii(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=cr(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==xh(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=Sn(e),i=r.shape,s=i.length;return Ze(()=>{let{mean:a,variance:l}=pV(r,this.axis,!0);const c=gg(1,s);for(const v of this.axis)c[v]=i[v];const u=v=>v!=null&&v.shape.length!==s?We(v,c):v;let d=this.scale?u(this.gamma.read()):null,f=this.center?u(this.beta.read()):null;const h=[],p=[];for(let v=0;v<s;++v)this.axis.indexOf(v)!==-1?(h.push(i[v]),p.push(1)):(h.push(1),p.push(i[v]));return a=Fc(a,h),l=Fc(l,h),d!=null&&(d=Fc(d,p)),f!=null&&(f=Fc(f,p)),gS(r,a,l,f,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:ui(this.betaInitializer),gammaInitializer:ui(this.gammaInitializer),betaRegularizer:$r(this.betaRegularizer),gammaRegularizer:$r(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}bge.className="LayerNormalization";pt(bge);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Iyt(t,e,n){return Ze(()=>{if(t.rank!==4)throw new Pe(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new Pe("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Kc()),n!=="channelsLast"&&n!=="channelsFirst")throw new Pe(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],mV(t,r)})}class wge extends Yn{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Kc():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new Pe(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new Pe(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new Pe(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new ns({ndim:4})]}computeOutputShape(e){e=cr(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Ze(()=>Iyt(Sn(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}wge.className="ZeroPadding2D";pt(wge);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pP(t,e,n,r,i,s){return Ze(()=>{$i(i),Bpe(s),yl(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=Kc()),s==null&&(s="max"),t=EW(t,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=hV(t,e,n,a):o=nV(t,e,n,a),i==="channelsFirst"&&(o=ir(o,[0,3,1,2])),o})}function Sge(t,e,n,r,i,s){return Ze(()=>{$i(i),Bpe(s),yl(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=Kc()),s==null&&(s="max"),t=Bme(t,i);let o;const a=r==="same"?"same":"valid";return s==="max"?o=Fft(t,e,n,a):o=But(t,e,n,a),i==="channelsFirst"&&(o=ir(o,[0,4,1,2,3])),o})}class _ge extends Yn{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new Pe(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(ys(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new Pe(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);ys(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,yl(this.padding),this.inputSpec=[new ns({ndim:3})]}computeOutputShape(e){e=cr(e);const n=Gc(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Ze(()=>{this.invokeCallHook(e,n),e=I_(Sn(e),2);const r=this.poolingFunction(Sn(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return C_(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class Cge extends _ge{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return $i(s),yl(i),pP(e,n,r,i,s,"max")}}Cge.className="MaxPooling1D";pt(Cge);class Tge extends _ge{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return $i(s),yl(i),pP(e,n,r,i,s,"avg")}}Tge.className="AveragePooling1D";pt(Tge);class Ege extends Yn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new Pe(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];ys(this.poolSize,"poolSize"),ys(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,$i(this.dataFormat),yl(this.padding),this.inputSpec=[new ns({ndim:4})]}computeOutputShape(e){e=cr(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Gc(n,this.poolSize[0],this.padding,this.strides[0]),r=Gc(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Ze(()=>(this.invokeCallHook(e,n),this.poolingFunction(Sn(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Mge extends Ege{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return $i(s),yl(i),pP(e,n,r,i,s,"max")}}Mge.className="MaxPooling2D";pt(Mge);class Age extends Ege{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return $i(s),yl(i),pP(e,n,r,i,s,"avg")}}Age.className="AveragePooling2D";pt(Age);class kge extends Yn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new Pe(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];ys(this.poolSize,"poolSize"),ys(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,$i(this.dataFormat),yl(this.padding),this.inputSpec=[new ns({ndim:5})]}computeOutputShape(e){e=cr(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Gc(n,this.poolSize[0],this.padding,this.strides[0]),r=Gc(r,this.poolSize[1],this.padding,this.strides[1]),i=Gc(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return Ze(()=>(this.invokeCallHook(e,n),this.poolingFunction(Sn(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Ige extends kge{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return $i(s),yl(i),Sge(e,n,r,i,s,"max")}}Ige.className="MaxPooling3D";pt(Ige);class Rge extends kge{constructor(e){super(e)}poolingFunction(e,n,r,i,s){return $i(s),yl(i),Sge(e,n,r,i,s,"avg")}}Rge.className="AveragePooling3D";pt(Rge);class Pge extends Yn{constructor(e){super(e),this.inputSpec=[new ns({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Pn}}class Nge extends Pge{constructor(e){super(e||{})}call(e,n){return Ze(()=>{const r=Sn(e);return Gi(r,1)})}}Nge.className="GlobalAveragePooling1D";pt(Nge);class $ge extends Pge{constructor(e){super(e||{})}call(e,n){return Ze(()=>{const r=Sn(e);return Wc(r,1)})}}$ge.className="GlobalMaxPooling1D";pt($ge);class Dge extends Yn{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,$i(this.dataFormat),this.inputSpec=[new ns({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Pn}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Lge extends Dge{call(e,n){return Ze(()=>{const r=Sn(e);return this.dataFormat==="channelsLast"?Gi(r,[1,2]):Gi(r,[2,3])})}}Lge.className="GlobalAveragePooling2D";pt(Lge);class Oge extends Dge{call(e,n){return Ze(()=>{const r=Sn(e);return this.dataFormat==="channelsLast"?Wc(r,[1,2]):Wc(r,[2,3])})}}Oge.className="GlobalMaxPooling2D";pt(Oge);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Fge extends Yn{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,s=Xu(i,r);delete n.layer;const o={layer:s};return Object.assign(o,n),new e(o)}}class Bge extends Fge{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=cr(e),e.length<3)throw new Pe(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=cr(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return Ze(()=>(e=Sn(e),qme((o,a)=>[Sn(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}Bge.className="TimeDistributed";pt(Bge);function Ryt(t){Vg(Y0t,"BidirectionalMergeMode",t)}const Pyt="concat";class Uge extends Fge{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Xu(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=Xu(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?Pyt:e.mergeMode,Ryt(this.mergeMode),e.weights)throw new Pn("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):qo(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const s=Xme(e,r,i,this.numConstants);if(e=s.inputs,r=s.initialState,i=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new Pe("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const u=r.map(d=>new ns({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(i!=null)throw new Pn("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof id;for(const c of o)if(c instanceof id!==l)throw new Pe("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(o),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const f=super.apply(c,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Ze(()=>{const r=n.initialState;let i,s;if(r==null)i=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(s.slice(1))),i=i[0],s=s[0]),this.returnSequences&&(s=pg(s,1));let a;return this.mergeMode==="concat"?a=hW([i,s]):this.mergeMode==="sum"?a=wt(i,s):this.mergeMode==="ave"?a=Oe(.5,wt(i,s)):this.mergeMode==="mul"?a=Oe(i,s):this.mergeMode==null&&(a=[i,s]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Om(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Om(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Xu(n.layer);if(delete n.layer,n.numConstants!=null)throw new Pn("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}Uge.className="Bidirectional";pt(Uge);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zge extends Yn{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Ze(()=>(e=Sn(e),e.dtype!=="float32"&&(e=Hu(e,"float32")),wt(Oe(e,this.scale),this.offset)))}}zge.className="Rescaling";pt(zge);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:Nyt,cropAndResize:$yt}=Gd;class Vge extends Yn{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,s,o,a,l){return Ze(()=>{let c,u=!1;const d=n/o,f=r/a,h=(i+n)/o,p=(s+r)/a,v=[d,f,h,p],g=[];e.rank===3?(u=!0,c=cf([e])):c=e;for(let _=0;_<c.shape[0];_++)g.push(v);const m=Rb(g,[g.length,4]),y=fS(0,g.length,1,"int32"),S=$yt(c,m,y,[i,s],"nearest");return Hu(u?Sn(mg(S)):S,l)})}upsize(e,n,r,i){return Ze(()=>{const s=Nyt(e,[n,r]);return Hu(s,i)})}call(e,n){return Ze(()=>{const r=Sn(e),i=r.dtype,s=r.shape,o=s[s.length-3],a=s[s.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,o,a,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=cr(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}Vge.className="CenterCrop";pt(Vge);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Dyt(t,e,n,r){let i=Sn(t);if(i.dtype!=="int32"&&(i=Hu(i,"int32")),e==="int")return i;const s=i.shape;if(i.rank===0&&(i=Xo(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Xo(i,-1)),i.rank>2)throw new Pe(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(e),a=i;let l;if(typeof r<"u"&&e==="count"?l=YZ(a,r,n,o):l=YZ(a,[],n,o),e!=="tfIdf")return l;if(r)return Oe(l,r);throw new Pe("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wge extends Yn{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=cr(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Ze(()=>{e=Sn(e),e.dtype!=="int32"&&(e=Hu(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new Pe(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Sn(n.countWeights)}const i=Wc(e),s=jA(e),o=vl(this.numTokens,i).bufferSync().get(0),a=Fg(s,0).bufferSync().get(0);if(!(o&&a))throw new Pe(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return Dyt(e,this.outputMode,this.numTokens,r)})}}Wge.className="CategoryEncoding";pt(Wge);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Lyt=["bilinear","nearest"],IJ=new Set(Lyt);class Gge extends Yn{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(IJ.has(e.interpolation))this.interpolation=e.interpolation;else throw new Pe(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=cr(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Ze(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Gd.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Gd.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...IJ]} are supported`)})}}Gge.className="Resizing";pt(Gge);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Hge{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}Hge.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class jge extends Yn{constructor(e){super(e),this.randomGenerator=new Hge(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}jge.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Oyt=["bilinear","nearest"],RJ=new Set(Oyt);class Xge extends jge{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Pe(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Pe(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Pe(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(RJ.has(r))this.interpolation=r;else throw new Pe(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=cr(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Ze(()=>{const r=Sn(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=__([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*i;s=Math.round(s);const o=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Gd.resizeBilinear(e,o);case"nearest":return Gd.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...RJ]} are supported`)}})}}Xge.className="RandomWidth";pt(Xge);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fyt=Qe();Fyt.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var PJ;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(PJ||(PJ={}));var NJ;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(NJ||(NJ={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var $J;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})($J||($J={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kt(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&ue(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Byt=Whe;class mP extends r8{nextDataId(){return mP.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new ffe(this,gu())}write(e,n,r){this.firstUse&&(this.firstUse=!1,Qe().get("IS_NODE")&&tl(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&_2(r[0])){const s=r.map(o=>yh(o));i=this.write(s,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,s){this.data.set(e,{values:n,dtype:i,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return uf(i,s)}return Wlt(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>Ph(i));return Hn(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Hn(e.shape,e.dtype,n)}makeOutput(e,n,r){return gu().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=jo();return e(),{kernelMs:jo()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Kt([e],"where");const n=this.readSync(e.dataId);return Byt(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}mP.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qge(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const Uyt=t=>{const{x:e}=t.inputs,n=t.backend;Kt(e,"abs");let r=new Float32Array(it(e.shape));const i=n.data.get(e.dataId).values;return r=qge(i),n.makeOutput(r,e.shape,e.dtype)},zyt={kernelName:YR,backendName:"cpu",kernelFunc:Uyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Di(t){return(e,n,r,i,s)=>{const o=kn(e,n),a=o.length,l=on(o),c=it(o),u=eo(s,c),d=e.length,f=n.length,h=on(e),p=on(n),v=Cy(e,o),g=Cy(n,o);if(v.length+g.length===0)for(let m=0;m<u.length;++m)u[m]=t(r[m%r.length],i[m%i.length]);else for(let m=0;m<u.length;++m){const y=dx(m,a,l),x=y.slice(-d);v.forEach(T=>x[T]=0);const S=Vu(x,d,h),_=y.slice(-f);g.forEach(T=>_[T]=0);const C=Vu(_,f,p);u[m]=t(r[S],i[C])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ba(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(i.shape,"float32",o)},a}const Vyt={kernelName:v8,backendName:"cpu",kernelFunc:ba};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ak(t,e,n="float32"){if(n==="complex64"){const i=ak(t,e,"float32"),s=ak(t,e,"float32");return ba({inputs:{real:i,imag:s},backend:t})}const r=to(it(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sd(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Wyt={kernelName:G2,backendName:"cpu",kernelFunc:sd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vg(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const Gyt={kernelName:z8,backendName:"cpu",kernelFunc:vg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yge(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=Og([0],n),[s,o]=Di((a,l)=>a!==l?1:0)(e,[],t,i,"bool");return[o,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Oh(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return sd({inputs:{x:i},backend:n});const u=ak(n,i.shape,i.dtype),d=Oh({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),f=ba({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),f}if(i.dtype==="complex64"){const u=vg({inputs:{input:i},backend:n}),d=Oh({inputs:{x:u},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(u),d}if(!pfe(i.dtype,s)){const u=sd({inputs:{x:i},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:s}}const o=n.data.get(i.dataId).values,[a,l,c]=Yge(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,l,c)}const Hyt={kernelName:R2,backendName:"cpu",kernelFunc:Oh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cs(t,e,n,r){return n==null?({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;Kt([o,a],t);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=o.dtype==="string"?df(c):c,f=o.dtype==="string"?df(u):u,h=r||o.dtype,[p,v]=e(o.shape,a.shape,d,f,h);return l.makeTensorInfo(v,h,p)}:({inputs:i,backend:s})=>{const{a:o,b:a}=i,l=s;if(o.dtype==="complex64"||a.dtype==="complex64"){const c=Oh({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,f=u.complexTensorInfos.imag,h=l.data.get(d.dataId).values,p=l.data.get(f.dataId).values,v=Oh({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(v.dataId),m=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,x=l.data.get(m.dataId).values,S=l.data.get(y.dataId).values,[_,C,T]=n(o.shape,a.shape,h,p,x,S),A=l.makeTensorInfo(T,"float32",_),M=l.makeTensorInfo(T,"float32",C),E=ba({inputs:{real:A,imag:M},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(v),l.disposeIntermediateTensorInfo(A),l.disposeIntermediateTensorInfo(M),E}else{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=r||o.dtype,[f,h]=e(o.shape,a.shape,c,u,d);return l.makeTensorInfo(h,d,f)}}}function PW(t){return(e,n,r,i,s,o)=>{const a=kn(e,n),l=it(a),c=a.length,u=on(a),d=eo("float32",l),f=eo("float32",l),h=Cy(e,a),p=Cy(n,a),v=uf(r,i),g=uf(s,o),m=e.length,y=on(e),x=n.length,S=on(n);if(h.length+p.length===0)for(let _=0;_<d.length;_++){const C=_%v.length,T=_%g.length,A=t(v[C*2],v[C*2+1],g[T*2],g[T*2+1]);d[_]=A.real,f[_]=A.imag}else for(let _=0;_<d.length;_++){const C=dx(_,c,u),T=C.slice(-m);h.forEach(N=>T[N]=0);const A=Vu(T,m,y),M=C.slice(-x);p.forEach(N=>M[N]=0);const E=Vu(M,x,S),P=t(v[A*2],v[A*2+1],g[E*2],g[E*2+1]);d[_]=P.real,f[_]=P.imag}return[d,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kge=Di((t,e)=>t+e),jyt=PW((t,e,n,r)=>({real:t+n,imag:e+r})),Ay=cs(fx,Kge,jyt),Xyt={kernelName:fx,backendName:"cpu",kernelFunc:Ay};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NW(t,e,n,r,i){const s=it(r),o=to(i,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s>0?o[l]+=e[a]:o[l]+=1)}return o}function Zge(t,e,n,r=!1){const i=t.shape[0],s=t.shape[1],o=Hn([i,n],e.dtype);for(let a=0;a<i;a++)for(let l=0;l<s;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,a,c):e.size>0?o.set(o.get(a,c)+e.get(a,l),a,c):o.set(o.get(a,c)+1,a,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jge=Di((t,e)=>t&e),qyt=cs(g8,Jge),Yyt={kernelName:g8,backendName:"cpu",kernelFunc:qyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ud(t){return(e,n,r)=>{const i=ki(n,e.length);for(let s=0;s<e.length;++s)i[s]=t(e[s],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tr(t,e,n){const r=ud(e);return lp(t,r,n)}function lp(t,e,n){return({inputs:r,attrs:i,backend:s})=>{const{x:o}=r;Kt(o,t);const a=s,l=a.data.get(o.dataId).values;let c;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=df(l)}else c=l;const u=n||o.dtype,d=e(c,u,i);return a.makeTensorInfo(o.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qge=ud(t=>Math.ceil(t)),Kyt=lp(P2,Qge),Zyt={kernelName:P2,backendName:"cpu",kernelFunc:Kyt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e0e(t,e,n,r){const i=ki(n,it(e));if(r&&n!=="string"){let s=0;t.forEach(o=>{const a=it(o.shape);i.set(o.vals,s),s+=a})}else{let s=0;t.forEach(o=>{const a=n==="string"?df(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*e[1]+s;for(let d=0;d<o.shape[1];++d)i[u+d]=a[l++]}s+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t0e=Di((t,e)=>t===e?1:0),n0e=cs(u3,t0e,null,"bool"),Jyt={kernelName:u3,backendName:"cpu",kernelFunc:n0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r0e=ud(t=>Math.exp(t)),i0e=lp(B2,r0e,"float32"),Qyt={kernelName:B2,backendName:"cpu",kernelFunc:i0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s0e=ud(t=>Math.expm1(t)),ext=lp(U2,s0e),txt={kernelName:U2,backendName:"cpu",kernelFunc:ext};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o0e=ud(t=>Math.floor(t)),nxt=lp(z2,o0e),rxt={kernelName:z2,backendName:"cpu",kernelFunc:nxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a0e=Di((t,e)=>Math.floor(t/e)),ixt=cs(V2,a0e,null,"int32"),sxt={kernelName:V2,backendName:"cpu",kernelFunc:ixt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l0e(t,e,n,r,i,s,o,a,l){const c=Hn([r,s],n);for(let u=0;u<r;u++){const d=[];let f=0;for(let h=0;h<i;h++){const p=t[u*i+h];f+=p*o[h],d.push(p)}if(f<0||f>=l/s)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<s;h++)c.values[u*s+h]=e.get(...e.indexToLoc(f*s+h))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c0e(t,e,n){const r=Hn(n,t.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),a=o[0],l=o[2],c=e.locToIndex([a,l]);o[2]=e.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(r.values[i]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u0e=Di((t,e)=>t>e?1:0),oxt=cs(p3,u0e,null,"bool"),axt={kernelName:p3,backendName:"cpu",kernelFunc:oxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d0e=Di((t,e)=>t>=e?1:0),lxt=cs(W2,d0e,null,"bool"),cxt={kernelName:W2,backendName:"cpu",kernelFunc:lxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f0e=Di((t,e)=>t<e?1:0),uxt=cs(g3,f0e,null,"bool"),dxt={kernelName:g3,backendName:"cpu",kernelFunc:uxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h0e=Di((t,e)=>t<=e?1:0),fxt=cs(v3,h0e,null,"bool"),hxt={kernelName:v3,backendName:"cpu",kernelFunc:fxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p0e(t,e,n){const r=(e-t)/(n-1),i=to(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m0e=ud(t=>Math.log(t)),pxt=lp(q2,m0e),mxt={kernelName:q2,backendName:"cpu",kernelFunc:pxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g0e(t,e,n,r){const i=eo(r,it(n));for(let s=0;s<i.length;++s){const o=s*e;let a=t[o];for(let l=0;l<e;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}i[s]=a}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v0e=Di((t,e)=>Math.max(t,e)),gxt=cs(K2,v0e),vxt={kernelName:K2,backendName:"cpu",kernelFunc:gxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y0e=Di((t,e)=>Math.min(t,e)),yxt=cs(Z2,y0e),xxt={kernelName:Z2,backendName:"cpu",kernelFunc:yxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $W=Di((t,e)=>t*e),bxt=PW((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),gP=cs(Q2,$W,bxt),wxt={kernelName:Q2,backendName:"cpu",kernelFunc:gP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x0e(t,e,n){const r=ep(-1,n);return $W([],e,r,t,n)}function Sxt(t){const{inputs:e,backend:n}=t,{x:r}=e;Kt(r,"neg");const i=n.data.get(r.dataId).values,[s,o]=x0e(i,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,s)}const _xt={kernelName:A3,backendName:"cpu",kernelFunc:Sxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b0e=Di((t,e)=>t!==e?1:0),Cxt=cs(k3,b0e,null,"bool"),Txt={kernelName:k3,backendName:"cpu",kernelFunc:Cxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DW(t,e,n,r,i){const s=e.length,o=it(e),a=on(e),l=on(i),c=eo(n,it(i));for(let u=0;u<o;++u){const d=dx(u,s,a),f=new Array(d.length);for(let p=0;p<f.length;p++)f[p]=d[r[p]];const h=Vu(f,s,l);c[h]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function na(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:s}=n;Kt(i,"transpose");const o=i.shape.length,a=new Array(o);for(let d=0;d<a.length;d++)a[d]=i.shape[s[d]];const l=r.data.get(i.dataId).values,c=DW(l,i.shape,i.dtype,s,a);return{dataId:r.write(c,a,i.dtype),shape:a,dtype:i.dtype}}const Ext={kernelName:Gv,backendName:"cpu",kernelFunc:na};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w0e(t,e,n,r){const[i,s]=_s(t,r),o=Pa(e,"int32"),a=to(it(i),o),l=it(s);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let f=0;f<l;++f)d*=n[u+f];a[c]=d}return{outVals:a,outShape:i,outDtype:o}}function Mxt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;Kt(i,"prod");const a=i.shape.length,l=qn(s,i.shape),c=fi(l,a);let u=l,d=i;const f=[];c!=null&&(d=na({inputs:{x:i},backend:n,attrs:{perm:c}}),f.push(d),u=Ni(u.length,a));const h=n.data.get(d.dataId).values,{outVals:p,outShape:v,outDtype:g}=w0e(d.shape,d.dtype,h,u);let m=v;return o&&(m=ji(v,l)),f.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(m,g,p)}const Axt={kernelName:D3,backendName:"cpu",kernelFunc:Mxt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kxt(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const s=dx(i,e.length,on(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function Ixt(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function Rxt(t,e,n,r){const i=[];let s=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);Ixt(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let f=0;f<n.length;++f){const h=n[f],p=f+e.length-1;if(p>=0){const v=a[p],g=v[v.length-1]-h[u];for(let m=u;m<d;++m)a[p].push(h[m+1]+g)}u=h[u],d=h[d]}d!==u&&(i.push([u,d]),s+=d-u)}return{outSplits:a,valueSlices:i,numValues:s}}function Pxt(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=ki("int32",r);e.push(i),t[n].forEach((s,o)=>i[o]=s)}return e}function DJ(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function Nxt(t,e,n,r,i,s){const o=DJ(e,2)[1],a=DJ(s,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)i[l*a+d]=t[u*o+d];++l}}function $xt(t,e,n,r,i){const s=e.slice();s[0]=i;const o=ki(n,it(s)),a=t.length,l=a===0?0:a/e[0];return Nxt(t,e,r,l,o,s),[o,s]}function S0e(t,e,n,r,i,s,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(kxt(s,o,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:f}=Rxt(s,o,t,c),h=Pxt(u),p=$xt(n,r,i,d,f);return[h,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LJ=2147483647;function _0e(t,e,n,r,i,s,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=i.length===0,c=o.length===0,u=[];a||u.push(e[0]),l||u.push(i[0]),c||u.push(o[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],f=ki("int32",d+1);f[0]=0;for(let g=0;g<d;++g){const m=a?t[0]:t[g],y=l?r[0]:r[g],x=c?s[0]:s[g];if(x===0)throw new Error("Requires delta != 0");let S;if(x>0&&y<m||x<0&&y>m)S=0;else if(S=Math.ceil(Math.abs((y-m)/x)),S>LJ)throw new Error(`Requires ((limit - start) / delta) <= ${LJ}`);f[g+1]=f[g]+S}const h=f[d],p=ki(n,h);let v=0;for(let g=0;g<d;++g){const m=f[g+1]-f[g];let y=a?t[0]:t[g];const x=c?s[0]:s[g];for(let S=0;S<m;++S)p[v++]=y,y+=x}return[f,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var kl=Rc;class lk{constructor(e,n,r,i,s,o,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=s,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=upe(u),this.raggedRank=dpe(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===kl.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===kl.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case kl.VALUE_ROWIDS:return lk.getMaxWidthValueRowID(n);case kl.ROW_SPLITS:return lk.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${kl[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const s=e[i+1]-e[i];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],s=0;for(let o=1;o<n;++o){const a=e[o];a!==i&&(i=a,s=Math.max(o-r,s),r=o)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return FJ(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;fpe(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=cpe(this.raggedRank,i,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),s=[];let o=0;for(let a=0;a<i;++a,o+=n)s.push(o);for(let a=i;a<e;++a)s.push(-1);return ue(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,i){const s=e.length,o=[];for(let a=0;a<s-1;++a){const l=e[a+1]-e[a];let c=Math.min(i,l),u=n[a];u===-1&&(c=0);for(let d=0;d<c;++d)o.push(u),u+=r;for(let d=0;d<l-c;++d)o.push(-1)}if(s>0&&o.length!==e[s-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,i){const s=e.length,o=[];if(s===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];o.push(c);for(let u=1;u<s;++u){const d=e[u];if(d===l)c>=0&&(++a,a<i?c+=r:c=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,i){const s=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case kl.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,i);case kl.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,i);default:throw new Error(`Unsupported partition type: ${kl[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case kl.FIRST_DIM_SIZE:return e[0];case kl.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case kl.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${kl[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const s=FJ(r,!1),o=ki(this.valuesDType,it(s));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,o,s)}return[s,o]}setOutput(e,n,r,i){if(r.length===0)return;const s=this.values,o=r;let a=i.slice();a=a.slice(e+1);const l=it(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const p=this.defaultValueShape;Ze(()=>{const v=We(u,p);u=Pb(v,a).dataSync()})}let d=0,f=0,h=0;for(let p=0;p<=c;++p){let v=p<c?n[p]:-1;if(v===h){++h;continue}if(f<h){const g=s.subarray(d*l),m=o.subarray(f*l),y=(h-f)*l;OJ(m,g,y)}if(p>=c){const g=r.length;v=Math.floor(g/l)}if(v>h)if(this.defaultValue.length===1)o.subarray(h*l,v*l).fill(this.defaultValue[0]),h=v;else for(;v>h;){const g=o.slice(h*l);OJ(g,u,l),++h}v<0?(d=p+1,f=h):(d=p,f=h,h=f+1)}}}function OJ(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function FJ(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function C0e(t,e,n,r,i,s,o,a,l,c){return new lk(t,e,n,r,i,s,o,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T0e(t,e,n,r){const i=t===e,s=t<e&&n<0,o=e<t&&n>1;if(i||s||o)return to(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=to(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E0e=ud(t=>1/Math.sqrt(t)),Dxt=lp(s_,E0e),Lxt={kernelName:s_,backendName:"cpu",kernelFunc:Dxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bm(t,e,n,r,i,s,o,a,l,c){const u=[r/i,i],d=t.values,f=e.values;if(r===0)return Hn(n,e.dtype);const h=l instanceof Ds?l:Hn(u,e.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let p=0;p<s;p++){const v=[];let g=0;for(let m=0;m<o;m++){const y=d[p*o+m];v.push(y),g+=y*a[m]}if(g<0||g>=r/i)throw new Error(`Invalid indices: ${v} does not index into ${n}`);for(let m=0;m<i;m++)c?h.values[g*i+m]+=f[p*i+m]:h.values[g*i+m]=e.rank===0?f[0]:f[p*i+m]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oxt=ud(t=>1/(1+Math.exp(-t))),M0e=Tr(u_,t=>1/(1+Math.exp(-t))),Fxt={kernelName:u_,backendName:"cpu",kernelFunc:M0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A0e(t,e,n,r,i){const s=VV(r,e,n),o=it(n),a=on(r);if(s){const d=WV(e,a);return i==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=i==="string"?df(t):t,c=Hn(r,i,l),u=Hn(n,i);for(let d=0;d<u.size;++d){const f=u.indexToLoc(d),h=f.map((p,v)=>p+e[v]);u.set(c.get(...h),...f)}return i==="string"?Ppe(u.values):u.values}function yg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:o}=r;Kt(i,"slice");const[a,l]=tP(i,s,o);UV(i,a,l);const c=n.data.get(i.dataId).values,u=A0e(c,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,u)}const Bxt={kernelName:z3,backendName:"cpu",kernelFunc:yg};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k0e(t,e,n,r,i,s,o){const a=e[0],l=s[0],c=new Array(l),u=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(xpe(a));const g=ki(n,0),m=ki(i,0);return[g,[0,d],m,c,u]}let f=!0,h=0;const p=new Array(l).fill(0);for(let g=0;g<a;++g){const m=t[g*d];if(m<0)throw new Error(bpe(g,m));if(m>=l)throw new Error(wpe(g,m,l));++p[m],f=f&&m>=h,h=m}let v=!0;for(let g=0;g<l;++g){const m=p[g]===0;c[g]=m,v=v&&!m,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(v&&f){const g=t,m=r;for(let y=0;y<a;++y)u[y]=y;return[g,[a,d],m,c,u]}else{const g=p[l-1],m=ki(n,g*d),y=ki(i,g),x=new Array(l).fill(0);for(let S=0;S<a;++S){const _=t[S*d],C=x[_],T=(_===0?0:p[_-1])+C;x[_]++;for(let A=0;A<d;++A)m[T*d+A]=t[S*d+A];y[T]=r[S],u[S]=T}for(let S=0;S<l;++S)if(x[S]===0){const C=S===0?0:p[S-1];m[C*d+0]=S;for(let T=1;T<d;++T)m[C*d+T]=0;y[C]=o}return[m,[g,d],y,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I0e(t,e,n,r,i){const s=it(r),o=e[0],a=i.length,l=[];let c=1,u=-1;for(let g=0;g<a;++g){const m=i[g];if(m===-1){if(u!==-1)throw new Error(Spe(u,g));u=g,l.push(1)}else{if(m<0)throw new Error(_pe(g,m));c*=m,l.push(m)}}if(u!==-1){if(c<=0)throw new Error(Cpe());const g=Math.trunc(s/c);if(c*g!==s)throw new Error(Tpe(r,l));l[u]=g}if(it(l)!==s)throw new Error(Epe(r,l));const f=r.length,h=[];if(f>0){h[f-1]=1;for(let g=f-2;g>=0;--g)h[g]=h[g+1]*r[g+1]}const p=[];if(a>0){p[a-1]=1;for(let g=a-2;g>=0;--g)p[g]=p[g+1]*l[g+1]}const v=ki(n,o*a);for(let g=0;g<o;++g){let m=0;for(let y=0;y<f;++y)m+=t[g*f+y]*h[y];for(let y=0;y<a;++y)v[g*a+y]=Math.trunc(m/p[y]),m%=p[y]}return[v,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LW(t,e,n,r,i,s=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],d=a>0?i[a-1]+1:0;if(d<0)throw new Error(GF());const f=e.slice();f[0]=d;const h=f.reduce((x,S)=>x*S,1),p=ki(n,h);if(a===0)return d>0&&p.fill(o),[p,f];if(d<=0)throw new Error(GF());let v=0,g=1,m=0,y=i[v];for(;;){let x=0;if(g<a){if(x=i[g],y===x){++g;continue}if(y>=x)throw new Error(Mpe())}if(y<0||y>=d)throw new Error(Ape(y,d));y>m&&p.fill(o,m*c,y*c);for(let S=v;S<g;++S){const _=r[S];if(_<0||_>=l[0])throw new Error(kpe(S,r[S],l[0]));for(let C=0;C<c;C++)p[y*c+C]+=t[_*c+C]}if(s)for(let S=0;S<c;S++)p[y*c+S]/=g-v;if(v=g,++g,m=y+1,y=x,g>a)break}return m<d&&p.fill(o,m*c,d*c),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uxt=ud(t=>Math.sqrt(t)),zxt=Tr(f_,t=>Math.sqrt(t)),Vxt={kernelName:f_,backendName:"cpu",kernelFunc:zxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R0e=Di((t,e)=>{const n=t-e;return n*n}),Wxt=cs(h_,R0e),Gxt={kernelName:h_,backendName:"cpu",kernelFunc:Wxt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P0e=ud((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),Hxt=lp(H8,P0e),jxt={kernelName:H8,backendName:"cpu",kernelFunc:Hxt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N0e(t,e,n,r){const i=Hn(t,e.dtype);for(let s=0;s<i.size;s++){const o=i.indexToLoc(s),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];i.set(e.get(...a),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xxt{constructor(e,n,r,i,s,o){this.separator=yh(e),this.nGramWidths=n,this.leftPad=yh(r),this.rightPad=yh(i),this.padWidth=s,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,s,o){for(let a=0;a<s;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(s-(a+1))),d=o-(c+u),f=n+(c>0?0:a-l);let h=0;h+=c*this.leftPad.length;for(let y=0;y<d;++y)h+=e[f+y].length;h+=u*this.rightPad.length;const p=c+u+d-1;h+=p*this.separator.length,r[i+a]=new Uint8Array(h);const v=r[i+a];let g=0;const m=y=>y.forEach(x=>v[g++]=x);for(let y=0;y<c;++y)m(this.leftPad),m(this.separator);for(let y=0;y<d-1;++y)m(e[f+y]),m(this.separator);if(d>0){m(e[f+d-1]);for(let y=0;y<u;++y)m(this.separator),m(this.rightPad)}else{for(let y=0;y<u-1;++y)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=i-1,o=ki("int32",i);if(r===0||i===0){const l=new Array(r);for(let c=0;c<=s;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=s;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[s]);for(let l=0;l<s;++l){const c=n[l];let u=o[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],h=this.getNumNGrams(f,d);this.createNGrams(e,c,a,u,h,d),u+=h}),this.preserveShort&&u===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth,h=1;this.createNGrams(e,c,a,u,h,f)}}return[a,o]}}function $0e(t,e,n,r,i,s,o,a){return new Xxt(n,r,i,s,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qxt(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let o=t.indexOf(s);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const o=t.subarray(i,s);(!n||o.length!==0)&&r.push(o),i=s+1}}function D0e(t,e,n){const r=t.length,i=[];let s=0,o=0;const a=new Array(r);for(let f=0;f<r;++f){const h=i.length;qxt(t[f],e,n,i);const p=i.length-h;a[f]=p,s+=p,o=Math.max(o,p)}const l=ki("int32",s*2),c=new Array(s),u=[r,o];let d=0;for(let f=0;f<r;++f)for(let h=0;h<a[f];++h)l[d*2]=f,l[d*2+1]=h,c[d]=i[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L0e(t,e){const n=ki("int32",t.length);for(let r=0;r<t.length;++r)n[r]=lct(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O0e=Di((t,e)=>t-e),Yxt=PW((t,e,n,r)=>({real:t-n,imag:e-r})),OW=cs(p_,O0e,Yxt),Kxt={kernelName:p_,backendName:"cpu",kernelFunc:OW};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F0e(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Hn(n,t.dtype);for(let i=0;i<r.values.length;++i){const s=r.indexToLoc(i),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=s[l]%t.shape[l];const a=t.locToIndex(o);r.values[i]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K1=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function B0e(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(e-l*u/a+d)),h=Math.min(r,Math.floor(e+(a-l)*u/a+d));B0e(t,e,f,h)}const i=t[e];let s=n,o=r;for(Y0(t,n,e),K1(t[r],i)>0&&Y0(t,n,r);s<o;){for(Y0(t,s,o),s++,o--;K1(t[s],i)<0;)s=s+1;for(;K1(t[o],i)>0;)o=o-1}K1(t[n],i)===0?Y0(t,n,o):(o=o+1,Y0(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function U0e(t,e,n,r,i){const s=e[e.length-1],[o,a]=[t.length/s,s],l=eo(n,o*r),c=eo("int32",o*r);for(let d=0;d<o;d++){const f=d*a,h=t.subarray(f,f+a);let p=new Array(h.length);h.forEach((y,x)=>p[x]={value:y,index:x}),r<p.length&&(B0e(p,r),p=p.slice(0,r)),i&&p.sort(K1);const v=d*r,g=l.subarray(v,v+r),m=c.subarray(v,v+r);for(let y=0;y<r;y++)g[y]=p[y].value,m[y]=p[y].index}const u=e.slice();return u[u.length-1]=r,[Hn(u,n,l),Hn(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z0e(t,e,n,r){const i=qn(e,n)[0],s=[1,n[0],1];for(let p=0;p<i;p++)s[0]*=n[p];s[1]=n[i];for(let p=i+1;p<n.length;p++)s[2]*=n[p];const o=new Map,a=new Int32Array(n[i]),l=new Ds(s,r,t),c=[],u=s[0]===1&&s[2]===1;for(let p=0;p<n[i];p++){let v;if(u)v=t[p].toString();else{const m=[];for(let y=0;y<s[0];y++)for(let x=0;x<s[2];x++)m.push(l.get(y,p,x));v=m.join(",")}const g=o.get(v);if(g!=null)a[p]=g;else{const m=o.size;o.set(v,m),a[p]=m,c.push(p)}}const d=s.slice();d[1]=o.size;const f=new Ds(d,r);c.forEach((p,v)=>{for(let g=0;g<s[0];g++)for(let m=0;m<s[2];m++)f.set(l.get(g,p,m),g,v,m)});const h=n.slice();return h[i]=d[1],{outputValues:f.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zxt=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Kge,bincountImpl:NW,bincountReduceImpl:Zge,bitwiseAndImpl:Jge,castImpl:Yge,ceilImpl:Qge,concatImpl:e0e,equalImpl:t0e,expImpl:r0e,expm1Impl:s0e,floorDivImpl:a0e,floorImpl:o0e,gatherNdImpl:l0e,gatherV2Impl:c0e,greaterEqualImpl:d0e,greaterImpl:u0e,lessEqualImpl:h0e,lessImpl:f0e,linSpaceImpl:p0e,logImpl:m0e,maxImpl:g0e,maximumImpl:v0e,minimumImpl:y0e,multiplyImpl:$W,negImpl:x0e,notEqualImpl:b0e,prodImpl:w0e,raggedGatherImpl:S0e,raggedRangeImpl:_0e,raggedTensorToTensorImpl:C0e,rangeImpl:T0e,rsqrtImpl:E0e,scatterImpl:bm,sigmoidImpl:Oxt,simpleAbsImpl:qge,sliceImpl:A0e,sparseFillEmptyRowsImpl:k0e,sparseReshapeImpl:I0e,sparseSegmentReductionImpl:LW,sqrtImpl:Uxt,squaredDifferenceImpl:R0e,staticRegexReplaceImpl:P0e,stridedSliceImpl:N0e,stringNGramsImpl:$0e,stringSplitImpl:D0e,stringToHashBucketFastImpl:L0e,subImpl:O0e,tileImpl:F0e,topKImpl:U0e,transposeImpl:DW,uniqueImpl:z0e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ahe("cpu",()=>new mP,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V0e=Tr(O2,t=>t>=0?t:Math.exp(t)-1),Jxt={kernelName:O2,backendName:"cpu",kernelFunc:V0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r;Kt([i],"leakyRelu");const o=it(i.shape),a=n.data.get(i.dataId).values,l=eo("float32",o);for(let c=0;c<a.length;c++)l[c]=a[c]<0?s*a[c]:a[c];return n.makeTensorInfo(i.shape,"float32",l)}const Qxt={kernelName:m3,backendName:"cpu",kernelFunc:W0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e1t=Di((t,e)=>t<0?e*t:t);function G0e(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;Kt([r,i],"prelu");const s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[a,l]=e1t(r.shape,i.shape,s,o,"float32");return n.makeTensorInfo(l,"float32",a)}const t1t={kernelName:$3,backendName:"cpu",kernelFunc:G0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H0e=Tr(n_,t=>Math.max(0,t)),n1t={kernelName:n_,backendName:"cpu",kernelFunc:H0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j0e=Tr(r_,t=>Math.min(Math.max(0,t),6)),r1t={kernelName:r_,backendName:"cpu",kernelFunc:j0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ck(t,e,n,r,i){if(n==="linear")return sd({inputs:{x:e},backend:t});if(n==="relu")return H0e({inputs:{x:e},backend:t});if(n==="elu")return V0e({inputs:{x:e},backend:t});if(n==="relu6")return j0e({inputs:{x:e},backend:t});if(n==="prelu")return G0e({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return W0e({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return M0e({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zr(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,o=it(i.shape),a=hfe(s,o),l=it(a);ue(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:i.dataId,shape:a,dtype:i.dtype}}const i1t={kernelName:L3,backendName:"cpu",kernelFunc:zr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X0e(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;Kt([i,s],"matMul");const l=i.shape.length,c=s.shape.length,u=o?i.shape[l-2]:i.shape[l-1],d=a?s.shape[c-1]:s.shape[c-2],f=o?i.shape[l-1]:i.shape[l-2],h=a?s.shape[c-2]:s.shape[c-1],p=i.shape.slice(0,-2),v=s.shape.slice(0,-2),g=it(p),m=it(v),x=kn(i.shape.slice(0,-2),s.shape.slice(0,-2)).concat([f,h]);ue(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${i.shape} and ${s.shape} and transposeA=${o} and transposeB=${a} must match.`);const S=o?[g,u,f]:[g,f,u],_=a?[m,h,d]:[m,d,h],C=zr({inputs:{x:i},backend:n,attrs:{shape:S}}),T=zr({inputs:{x:s},backend:n,attrs:{shape:_}}),A=o?C.shape[1]:C.shape[2],M=o?C.shape[2]:C.shape[1],E=a?T.shape[1]:T.shape[2],P=Math.max(g,m),N=n.data.get(C.dataId).values,F=n.data.get(T.dataId).values,$=on(C.shape),O=on(T.shape),[z,X,D]=o?[$[0],1,$[1]]:[$[0],$[1],1],[B,V,W]=a?[1,O[1],O[0]]:[O[1],1,O[0]],j=M*E,J=Hn([P,M,E],C.dtype),Q=J.values,te=n.blockSize;for(let re=0;re<P;re++){const se=re%g,fe=re%m;for(let ae=0;ae<M;ae+=te){const ye=Math.min(ae+te,M);for(let le=0;le<E;le+=te){const H=Math.min(le+te,E);for(let Me=0;Me<A;Me+=te){const we=Math.min(Me+te,A);for(let Ee=ae;Ee<ye;Ee++)for(let ge=le;ge<H;ge++){let qe=0;for(let Ae=Me;Ae<we;Ae++){const ee=N[se*z+Ee*X+Ae*D],Y=F[Ae*B+ge*V+fe*W];qe+=ee*Y}Q[re*j+(Ee*E+ge)]+=qe}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(T),n.makeTensorInfo(x,J.dtype,J.values)}const s1t={kernelName:e3,backendName:"cpu",kernelFunc:X0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o1t(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let f,h,p;const v=[];f=X0e({inputs:{a:i,b:s},attrs:{transposeA:l,transposeB:c},backend:n}),o&&(h=Ay({inputs:{a:f,b:o},backend:n}),v.push(f),f=h),u&&(p=ck(n,f,u,a,d),v.push(f),f=p);for(const m of v)n.disposeIntermediateTensorInfo(m);return f}const a1t={kernelName:UA,backendName:"cpu",kernelFunc:o1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l1t=Tr(C2,t=>Math.acos(t)),c1t={kernelName:C2,backendName:"cpu",kernelFunc:l1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u1t=Tr(T2,t=>Math.acosh(t)),d1t={kernelName:T2,backendName:"cpu",kernelFunc:u1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f1t(t){const{inputs:e,backend:n}=t,r=e;Kt(e,"addN");const i=r.map(a=>n.data.get(a.dataId).values),s=Hn(r[0].shape,r[0].dtype),o=s.values;for(let a=0;a<r.length;a++){const l=i[a];for(let c=0;c<o.length;c++)o[c]+=l[c]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const h1t={kernelName:u8,backendName:"cpu",kernelFunc:f1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;Kt(i,"all");const a=qn(s,i.shape);let l=a;const c=fi(l,i.shape.length);let u=i;c!=null&&(u=na({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Ni(l.length,i.shape.length)),Us("all",l,u.shape.length);const[d,f]=_s(u.shape,l),h=it(f),p=to(it(d),u.dtype),v=n.data.get(u.dataId).values;for(let m=0;m<p.length;++m){const y=m*h;let x=v[y];for(let S=0;S<h;++S){const _=v[y+S];x=x&&_}p[m]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,p);if(o){const m=ji(d,a),y=zr({inputs:{x:g},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(g),y}return g}const m1t={kernelName:d8,backendName:"cpu",kernelFunc:p1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;Kt(i,"any");const a=qn(s,i.shape);let l=a;const c=fi(l,i.shape.length);let u=i;c!=null&&(u=na({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Ni(l.length,i.shape.length)),Us("any",l,u.shape.length);const[d,f]=_s(u.shape,l),h=it(f),p=to(it(d),u.dtype),v=n.data.get(u.dataId).values;for(let m=0;m<p.length;++m){const y=m*h;let x=v[y];for(let S=0;S<h;++S){const _=v[y+S];x=x||_}p[m]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,p);if(o){const m=ji(d,a),y=zr({inputs:{x:g},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(g),y}return g}const v1t={kernelName:f8,backendName:"cpu",kernelFunc:g1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;Kt(i,"argMax");let o=qn(s,i.shape);const a=fi(o,i.shape.length);let l=i;const c=[];a!=null&&(l=na({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),o=Ni(o.length,l.shape.length)),o=[o[0]],Us("argMax",o,l.shape.length);const[u,d]=_s(l.shape,o),f=it(u),h=to(f,"int32"),p=it(d),v=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const m=g*p;let y=v[m],x=0;for(let S=0;S<p;++S){const _=v[m+S];_>y&&(y=_,x=S)}h[g]=x}return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",h)}const x1t={kernelName:KR,backendName:"cpu",kernelFunc:y1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;Kt(i,"argMin");let o=qn(s,i.shape);const a=fi(o,i.shape.length);let l=i;const c=[];a!=null&&(l=na({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),o=Ni(o.length,l.shape.length)),o=[o[0]],Us("argMin",o,l.shape.length);const[u,d]=_s(l.shape,o),f=it(u),h=to(f,"int32"),p=it(d),v=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const m=g*p;let y=v[m],x=0;for(let S=0;S<p;++S){const _=v[m+S];_<y&&(y=_,x=S)}h[g]=x}return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",h)}const w1t={kernelName:ZR,backendName:"cpu",kernelFunc:b1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S1t=Tr(E2,t=>Math.asin(t)),_1t={kernelName:E2,backendName:"cpu",kernelFunc:S1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C1t=Tr(M2,t=>Math.asinh(t)),T1t={kernelName:M2,backendName:"cpu",kernelFunc:C1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E1t=Tr(A2,t=>Math.atan(t)),M1t={kernelName:A2,backendName:"cpu",kernelFunc:E1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A1t=Di((t,e)=>Math.atan2(t,e)),k1t=cs(I2,A1t),I1t={kernelName:I2,backendName:"cpu",kernelFunc:k1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R1t=Tr(k2,t=>Math.atanh(t)),P1t={kernelName:k2,backendName:"cpu",kernelFunc:R1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FW(t,e,n,r,i,s){const o=i.strideHeight,a=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,u=i.effectiveFilterHeight,d=i.effectiveFilterWidth,f=i.padInfo.top,h=i.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Hn(i.outShape,n),g=v.values,m=i.outShape[1]*i.outShape[2]*i.outShape[3],y=i.outShape[2]*i.outShape[3],x=i.outShape[3];for(let S=0;S<i.batchSize;++S){const _=S*m,C=S*r[0];for(let T=0;T<i.inChannels;++T)for(let A=0;A<i.outHeight;++A){const M=A*o-f,E=Math.max(0,M),P=Math.min(i.inHeight,u+M),N=_+A*y;for(let F=0;F<i.outWidth;++F){const $=F*a-h,O=Math.max(0,$),z=Math.min(i.inWidth,d+$);let X=p,D=0,B=0;for(let W=E;W<P;W+=l){const j=C+W*r[1];for(let J=O;J<z;J+=c){const Q=j+J*r[2],te=t[Q+T];s==="max"&&te>X?X=te:s==="avg"&&(D+=te,B++)}if(isNaN(X))break}const V=N+F*x+T;g[V]=s==="avg"?D/B:X}}}return v}function q0e(t,e,n,r,i=!1,s=!1){const o=Hn(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,v=Hn(e,n,t);for(let g=0;g<r.batchSize;++g)for(let m=0;m<r.inChannels;++m)for(let y=0;y<r.outHeight;++y){const x=y*a-h;let S=x;for(;S<0;)S+=c;const _=Math.min(r.inHeight,d+x);for(let C=0;C<r.outWidth;++C){const T=C*l-p;let A=T;for(;A<0;)A+=u;const M=Math.min(r.inWidth,f+T);let E=Number.NEGATIVE_INFINITY,P=-1;for(let N=S;N<_;N+=c){const F=N-x;for(let $=A;$<M;$+=u){const O=$-T,z=v.get(g,N,$,m);z>E&&(E=z,i?P=s?((g*r.inHeight+N)*r.inWidth+$)*r.inChannels+m:(N*r.inWidth+$)*r.inChannels+m:P=F*f+O)}}o.set(P,g,y,C,m)}}return o}function Y0e(t,e,n,r,i,s){const o=i.strideDepth,a=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,u=i.dilationHeight,d=i.dilationWidth,f=i.effectiveFilterDepth,h=i.effectiveFilterHeight,p=i.effectiveFilterWidth,v=i.padInfo.front,g=i.padInfo.top,m=i.padInfo.left,y=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Hn(i.outShape,n),S=x.values,_=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[2]*i.outShape[3]*i.outShape[4],T=i.outShape[3]*i.outShape[4],A=i.outShape[4];for(let M=0;M<i.batchSize;++M){const E=M*_,P=M*r[0];for(let N=0;N<i.inChannels;++N)for(let F=0;F<i.outDepth;++F){const $=F*o-v;let O=$;for(;O<0;)O+=c;const z=Math.min(i.inDepth,f+$),X=E+F*C;for(let D=0;D<i.outHeight;++D){const B=D*a-g;let V=B;for(;V<0;)V+=u;const W=Math.min(i.inHeight,h+B),j=X+D*T;for(let J=0;J<i.outWidth;++J){const Q=J*l-m;let te=Q;for(;te<0;)te+=d;const re=Math.min(i.inWidth,p+Q),se=j+J*A;let fe=y,ae=0,ye=0;for(let H=O;H<z;H+=c){const Me=P+H*r[1];for(let we=V;we<W;we+=u){const Ee=Me+we*r[2];for(let ge=te;ge<re;ge+=d){const qe=Ee+ge*r[3],Ae=t[qe+N];if(s==="max"&&Ae>fe?fe=Ae:s==="avg"&&(ae+=Ae,ye++),isNaN(fe))break}if(isNaN(fe))break}if(isNaN(fe))break}const le=se+N;S[le]=s==="avg"?ae/Math.max(ye,1):fe}}}}return x}function N1t(t,e){const n=Hn(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,h=e.padInfo.top,p=e.padInfo.left;for(let v=0;v<e.batchSize;++v)for(let g=0;g<e.inChannels;++g)for(let m=0;m<e.outDepth;++m){const y=m*r-f;let x=y;for(;x<0;)x+=o;const S=Math.min(e.inDepth,c+y);for(let _=0;_<e.outHeight;++_){const C=_*i-h;let T=C;for(;T<0;)T+=a;const A=Math.min(e.inHeight,u+C);for(let M=0;M<e.outWidth;++M){const E=M*s-p;let P=E;for(;P<0;)P+=l;const N=Math.min(e.inWidth,d+E);let F=Number.NEGATIVE_INFINITY,$=-1;for(let O=x;O<S;O+=o){const z=O-y;for(let X=T;X<A;X+=a){const D=X-C;for(let B=P;B<N;B+=l){const V=B-E,W=t.get(v,O,X,B,g);W>=F&&(F=W,$=z*u*d+D*u+V)}}}n.set($,v,m,_,M,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Kt(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;ue(io(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=dc(i.shape,s,o,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&wr(u.inShape,u.outShape))d=sd({inputs:{x:i},backend:n});else{const f=n.data.get(i.dataId).values,h=on(i.shape),p=FW(f,i.shape,i.dtype,h,u,"avg");d=n.makeTensorInfo(u.outShape,i.dtype,p.values)}return d}const D1t={kernelName:JR,backendName:"cpu",kernelFunc:$1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;Kt(i,"avgPool3d");const u=vf(i.shape,s,o,1,a,l,c),d=n.data.get(i.dataId).values,f=Y0e(d,i.shape,i.dtype,on(i.shape),u,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const O1t={kernelName:QR,backendName:"cpu",kernelFunc:L1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F1t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;Kt([i,s],"avgPool3DGrad");const u=vf(s.shape,o,a,1,l,c),d=u.strideDepth,f=u.strideHeight,h=u.strideWidth,p=u.filterDepth,v=u.filterHeight,g=u.filterWidth,m=u.dilationDepth,y=u.dilationHeight,x=u.dilationWidth,S=u.effectiveFilterDepth,_=u.effectiveFilterHeight,C=u.effectiveFilterWidth,T=S-1-u.padInfo.front,A=C-1-u.padInfo.left,M=_-1-u.padInfo.top,E=Hn(s.shape,"float32"),P=1/(p*v*g),N=n.bufferSync(i);for(let F=0;F<u.batchSize;++F)for(let $=0;$<u.inChannels;++$)for(let O=0;O<u.inDepth;++O)for(let z=0;z<u.inHeight;++z)for(let X=0;X<u.inWidth;++X){const D=O-T,B=z-M,V=X-A;let W=0;for(let j=0;j<S;j+=m){const J=(D+j)/d;if(!(J<0||J>=u.outDepth||Math.floor(J)!==J))for(let Q=0;Q<_;Q+=y){const te=(B+Q)/f;if(!(te<0||te>=u.outHeight||Math.floor(te)!==te))for(let re=0;re<C;re+=x){const se=(V+re)/h;if(se<0||se>=u.outWidth||Math.floor(se)!==se)continue;const fe=N.get(F,J,te,se,$);W+=fe}}}E.set(W*P,F,O,z,X,$)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const B1t={kernelName:p8,backendName:"cpu",kernelFunc:F1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U1t(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s;Kt([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=dc(o.shape,a,l,1,c),d=u.strideHeight,f=u.strideWidth,h=u.filterHeight,p=u.filterWidth,v=u.dilationHeight,g=u.dilationWidth,m=u.effectiveFilterHeight,y=u.effectiveFilterWidth,x=y-1-u.padInfo.left,S=m-1-u.padInfo.top,_=Hn(o.shape,"float32"),C=1/(h*p),T=n.data.get(i.dataId).values,A=Hn(i.shape,"float32",T);for(let M=0;M<u.batchSize;++M)for(let E=0;E<u.inChannels;++E)for(let P=0;P<u.inHeight;++P)for(let N=0;N<u.inWidth;++N){const F=P-S,$=N-x;let O=0;for(let z=0;z<m;z+=v){const X=(F+z)/d;if(!(X<0||X>=u.outHeight||Math.floor(X)!==X))for(let D=0;D<y;D+=g){const B=($+D)/f;if(B<0||B>=u.outWidth||Math.floor(B)!==B)continue;const V=A.get(M,X,B,E);O+=V}}_.set(O*C,M,P,N,E)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const z1t={kernelName:h8,backendName:"cpu",kernelFunc:U1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:s,offset:o,mean:a,variance:l}=e;ue(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ue(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ue(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Kt([i,a,l,s,o],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,f=n.data.get(l.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(u.length),g=p.length,m=h.length,y=f.length,x=d.length;let S=0,_=0,C=0,T=0;for(let A=0;A<u.length;++A)v[A]=p[S++]+(u[A]-d[_++])*h[C++]/Math.sqrt(f[T++]+c),S>=g&&(S=0),_>=x&&(_=0),C>=m&&(C=0),T>=y&&(T=0);return n.makeTensorInfo(i.shape,i.dtype,v)}const W1t={kernelName:f3,backendName:"cpu",kernelFunc:V1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:o}=r;Kt([i],"batchToSpaceND");const a=s.reduce((m,y)=>m*y),l=E_(i.shape,s,a),c=M_(l.length,s.length),u=A_(i.shape,s,a),d=qV(o,s.length),f=YV(u,o,s.length),h=zr({inputs:{x:i},backend:n,attrs:{shape:l}}),p=na({inputs:{x:h},backend:n,attrs:{perm:c}}),v=zr({inputs:{x:p},backend:n,attrs:{shape:u}}),g=yg({inputs:{x:v},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),g}const H1t={kernelName:t3,backendName:"cpu",kernelFunc:G1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j1t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o}=r,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=NW(a,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}const X1t={kernelName:m8,backendName:"cpu",kernelFunc:j1t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q1t(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,a=kn(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const Y1t={kernelName:xfe,backendName:"cpu",kernelFunc:q1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K1t=Tr(N2,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),Z1t={kernelName:N2,backendName:"cpu",kernelFunc:K1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J1t=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(it(e.shape)),i=n.data.get(e.dataId),s=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],d=l[c];r[c]=Math.hypot(u,d)}return n.makeOutput(r,e.shape,"float32")},Q1t={kernelName:n3,backendName:"cpu",kernelFunc:J1t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ky(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,s)}const ebt={kernelName:N8,backendName:"cpu",kernelFunc:ky};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iy(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=qn(i,e[0].shape)[0],o=e.map(v=>v.shape);HV(o,s);let a=Gu(e.map(v=>v.shape),s);if(it(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(v=>it(v.shape)>0);if(l.length===1)return sd({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const v=l.map(S=>vg({inputs:{input:S},backend:n})),g=l.map(S=>ky({inputs:{input:S},backend:n})),m=Iy({inputs:v,backend:n,attrs:{axis:s}}),y=Iy({inputs:g,backend:n,attrs:{axis:s}}),x=ba({inputs:{real:m,imag:y},backend:n});return v.forEach(S=>n.disposeIntermediateTensorInfo(S)),g.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),x}const c=l.map(v=>{const m=[-1,it(v.shape.slice(s))];return zr({inputs:{x:v},backend:n,attrs:{shape:m}})}),u=c.map(v=>({vals:n.data.get(v.dataId).values,shape:v.shape}));a=Gu(c.map(v=>v.shape),1);const d=c[0].shape[0]===1,f=e0e(u,a,e[0].dtype,d),h=Gu(l.map(v=>v.shape),s),p=n.makeTensorInfo(h,e[0].dtype,f);return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),p}const tbt={kernelName:r3,backendName:"cpu",kernelFunc:Iy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;Kt([i,s],"conv2d");const d=yf(l),f=Bs(i.shape,s.shape,o,c,a,u,!1,d),h=f.filterHeight,p=f.filterWidth,v=f.dilationHeight,g=f.dilationWidth,m=f.padInfo.left,y=f.padInfo.top,x=f.dataFormat==="channelsLast",S=new Ds(f.outShape,i.dtype),_=on(i.shape),C=on(s.shape),T=_[0],A=x?_[1]:_[2],M=x?_[2]:1,E=x?1:_[1],P=S.strides[0],N=x?S.strides[1]:S.strides[2],F=x?S.strides[2]:1,$=x?1:S.strides[1],O=n.data.get(i.dataId).values,z=n.data.get(s.dataId).values,X=S.values;for(let D=0;D<f.batchSize;++D){const B=D*T,V=D*P;for(let W=0;W<f.outHeight;++W){const j=V+W*N,J=W*f.strideHeight-y;for(let Q=0;Q<h;++Q){const te=J+Q*v;if(te<0||te>=f.inHeight)continue;const re=Q*C[0],se=B+te*A;for(let fe=0;fe<f.outWidth;++fe){const ae=j+fe*F,ye=fe*f.strideWidth-m;for(let le=0;le<p;++le){const H=ye+le*g;if(H<0||H>=f.inWidth)continue;const Me=re+le*C[1],we=se+H*M;let Ee=Me;for(let ge=0;ge<f.inChannels;++ge){const qe=O[we+ge*E];for(let Ae=0;Ae<f.outChannels;++Ae)X[ae+Ae*$]+=qe*z[Ee+Ae];Ee+=f.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,X)}const nbt={kernelName:i3,backendName:"cpu",kernelFunc:K0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rbt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;Kt([i,s],"conv2dBackpropFilter");const d=yf(l),f=Bs(i.shape,u,o,1,a,c,!1,d),{strideHeight:h,strideWidth:p,filterHeight:v,filterWidth:g}=f,m=f.dataFormat==="channelsLast",y=new Ds(f.filterShape,"float32"),x=f.padInfo.left,S=f.padInfo.top,_=n.data.get(i.dataId).values,C=n.data.get(s.dataId).values,T=new Ds(i.shape,i.dtype,_),A=new Ds(s.shape,s.dtype,C);for(let M=0;M<v;++M){const E=Math.max(0,Math.ceil((S-M)/h)),P=Math.min(f.outHeight,(f.inHeight+S-M)/h);for(let N=0;N<g;++N){const F=Math.max(0,Math.ceil((x-N)/p)),$=Math.min(f.outWidth,(f.inWidth+x-N)/p);for(let O=0;O<f.inChannels;++O)for(let z=0;z<f.outChannels;++z){let X=0;for(let D=0;D<f.batchSize;++D)for(let B=E;B<P;++B){const V=M+B*h-S;for(let W=F;W<$;++W){const j=N+W*p-x;m?X+=T.get(D,V,j,O)*A.get(D,B,W,z):X+=T.get(D,O,V,j)*A.get(D,z,B,W)}}y.set(X,M,N,O,z)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const ibt={kernelName:y8,backendName:"cpu",kernelFunc:rbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sbt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;Kt([i,s],"conv2dBackpropInput");const d=on(s.shape),f=on(i.shape);let h=yf(c);const p=Bs(o,s.shape,a,1,l,u,!1,h),v=new Ds(p.inShape,"float32"),g=v.values,m=n.data.get(i.dataId).values,y=n.data.get(s.dataId).values,[x,S,_]=d,{batchSize:C,filterHeight:T,filterWidth:A,inChannels:M,inHeight:E,inWidth:P,outChannels:N,outHeight:F,outWidth:$,strideHeight:O,strideWidth:z}=p;h=p.dataFormat;const X=T-1-p.padInfo.top,D=A-1-p.padInfo.left,B=h==="channelsLast",V=v.strides[0],W=B?v.strides[1]:v.strides[2],j=B?v.strides[2]:1,J=B?1:v.strides[1],Q=f[0],te=B?f[1]:f[2],re=B?f[2]:1,se=B?1:f[1];for(let fe=0;fe<C;++fe)for(let ae=0;ae<M;++ae)for(let ye=0;ye<E;++ye){const le=ye-X,H=Math.max(0,Math.ceil(le/O)),Me=Math.min(F,(T+le)/O);for(let we=0;we<P;++we){const Ee=we-D,ge=Math.max(0,Math.ceil(Ee/z)),qe=Math.min($,(A+Ee)/z);let Ae=0;for(let Y=H;Y<Me;++Y){const oe=Y*O-le;for(let xe=ge;xe<qe;++xe){const Se=xe*z-Ee,be=Q*fe+te*Y+re*xe,Re=x*(T-1-oe)+S*(A-1-Se)+_*ae;for(let Ke=0;Ke<N;++Ke){const ze=m[be+se*Ke],Ne=y[Re+Ke];Ae+=ze*Ne}}}const ee=V*fe+W*ye+j*we+J*ae;g[ee]=Ae}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const obt={kernelName:s3,backendName:"cpu",kernelFunc:sbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function abt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r;Kt([i,s],"conv3d");const c=np(i.shape,s.shape,o,l,a),{filterDepth:u,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:p,dilationWidth:v,padInfo:g}=c,m=g.front,y=g.left,x=g.top,S=new Ds(c.outShape,i.dtype),_=n.data.get(i.dataId).values,C=n.data.get(s.dataId).values,T=S.values,A=on(i.shape),M=on(s.shape);for(let E=0;E<c.batchSize;++E){const P=E*A[0],N=E*S.strides[0];for(let F=0;F<c.outDepth;++F){const $=N+F*S.strides[1],O=F*c.strideDepth-m;for(let z=0;z<u;++z){const X=O+z*h;if(X<0||X>=c.inDepth)continue;const D=z*M[0],B=P+X*A[1];for(let V=0;V<c.outHeight;++V){const W=$+V*S.strides[2],j=V*c.strideHeight-x;for(let J=0;J<d;++J){const Q=j+J*p;if(Q<0||Q>=c.inHeight)continue;const te=D+J*M[1],re=B+Q*A[2];for(let se=0;se<c.outWidth;++se){const fe=W+se*c.outChannels,ae=se*c.strideWidth-y;for(let ye=0;ye<f;++ye){const le=ae+ye*v;if(le<0||le>=c.inWidth)continue;const H=te+ye*M[2],Me=re+le*c.inChannels;let we=H;for(let Ee=0;Ee<c.inChannels;++Ee){const ge=_[Me+Ee];for(let qe=0;qe<c.outChannels;++qe)T[fe+qe]+=ge*C[we+qe];we+=c.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const lbt={kernelName:o3,backendName:"cpu",kernelFunc:abt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cbt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r;Kt([i,s],"conv3dBackpropFilterV2");const c=on(i.shape),u=on(s.shape),d=np(i.shape,l,o,1,a),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,v=d.filterDepth,g=d.filterHeight,m=d.filterWidth,y=new Ds(d.filterShape,"float32"),x=y.values,[S,_,C,T]=y.strides,A=n.data.get(s.dataId).values,[M,E,P,N]=u,F=n.data.get(i.dataId).values,[$,O,z,X]=c,D=d.padInfo.front,B=d.padInfo.left,V=d.padInfo.top;for(let W=0;W<v;++W){const j=Math.max(0,Math.ceil((D-W)/f)),J=Math.min(d.outDepth,(d.inDepth+D-W)/f),Q=W*S;for(let te=0;te<g;++te){const re=Math.max(0,Math.ceil((V-te)/h)),se=Math.min(d.outHeight,(d.inHeight+V-te)/h),fe=te*_+Q;for(let ae=0;ae<m;++ae){const ye=Math.max(0,Math.ceil((B-ae)/p)),le=Math.min(d.outWidth,(d.inWidth+B-ae)/p),H=ae*C+fe;for(let Me=0;Me<d.inChannels;++Me){const we=Me*T+H;for(let Ee=0;Ee<d.outChannels;++Ee){let ge=0;for(let qe=0;qe<d.batchSize;++qe){const Ae=qe*$,ee=qe*M;for(let Y=j;Y<J;++Y){const xe=(W+Y*f-D)*O+Ae,Se=Y*E+ee;for(let be=re;be<se;++be){const Ke=(te+be*h-V)*z+xe,ze=be*P+Se;for(let Ne=ye;Ne<le;++Ne){const Ve=(ae+Ne*p-B)*X+Ke,gt=Ne*N+ze;ge+=F[Ve+Me]*A[gt+Ee]}}}}x[we+Ee]=ge}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const ubt={kernelName:x8,backendName:"cpu",kernelFunc:cbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dbt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r;Kt([i],"conv3dBackpropInputV2");const c=on(i.shape),u=on(s.shape),d=np(l,s.shape,a,1,o),f=new Ds(d.inShape,"float32"),h=f.values,[p,v,g,m]=f.strides,y=n.data.get(i.dataId).values,[x,S,_,C]=c,T=n.data.get(s.dataId).values,[A,M,E,P]=u,{batchSize:N,filterDepth:F,filterHeight:$,filterWidth:O,inChannels:z,inDepth:X,inHeight:D,inWidth:B,outChannels:V,outDepth:W,outHeight:j,outWidth:J,strideDepth:Q,strideHeight:te,strideWidth:re}=d,se=F-1-d.padInfo.front,fe=$-1-d.padInfo.top,ae=O-1-d.padInfo.left;for(let ye=0;ye<N;++ye)for(let le=0;le<z;++le)for(let H=0;H<X;++H){const Me=H-se,we=Math.max(0,Math.ceil(Me/Q)),Ee=Math.min(W,(F+Me)/Q);for(let ge=0;ge<D;++ge){const qe=ge-fe,Ae=Math.max(0,Math.ceil(qe/te)),ee=Math.min(j,($+qe)/te);for(let Y=0;Y<B;++Y){const oe=Y-ae,xe=Math.max(0,Math.ceil(oe/re)),Se=Math.min(J,(O+oe)/re);let be=0;for(let Re=we;Re<Ee;++Re){const Ke=Re*Q-Me;for(let ze=Ae;ze<ee;++ze){const Ne=ze*te-qe;for(let De=xe;De<Se;++De){const Ve=De*re-oe,gt=x*ye+S*Re+_*ze+C*De,ct=A*(F-1-Ke)+M*($-1-Ne)+E*(O-1-Ve)+P*le;for(let Ye=0;Ye<V;++Ye){const Xe=y[gt+Ye],Le=T[ct+Ye];be+=Xe*Le}}}}h[p*ye+v*H+g*ge+m*Y+le]=be}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const fbt={kernelName:b8,backendName:"cpu",kernelFunc:dbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hbt=Tr($2,t=>Math.cos(t)),pbt={kernelName:$2,backendName:"cpu",kernelFunc:hbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mbt=Tr(D2,t=>Math.cosh(t)),gbt={kernelName:D2,backendName:"cpu",kernelFunc:mbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vbt(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[u,d,f,h]=i.shape,p=s.shape[0],[v,g]=a,m=Hn([p,v,g,h],"float32"),y=n.data.get(s.dataId).values,x=n.data.get(o.dataId).values,S=n.data.get(i.dataId).values,_=on(i.shape),C=on(m.shape);for(let T=0;T<p;T++){const A=T*4,M=y[A],E=y[A+1],P=y[A+2],N=y[A+3],F=x[T];if(F>=u)continue;const $=v>1?(P-M)*(d-1)/(v-1):0,O=g>1?(N-E)*(f-1)/(g-1):0;for(let z=0;z<v;z++){const X=v>1?M*(d-1)+z*$:.5*(M+P)*(d-1);if(X<0||X>d-1){for(let D=0;D<g;D++)for(let B=0;B<h;B++){const V=B+D*C[2]+z*C[1]+T*C[0];m.values[V]=c}continue}if(l==="bilinear"){const D=Math.floor(X),B=Math.ceil(X),V=X-D;for(let W=0;W<g;W++){const j=g>1?E*(f-1)+W*O:.5*(E+N)*(f-1);if(j<0||j>f-1){for(let re=0;re<h;re++){const se=re+W*C[2]+z*C[1]+T*C[0];m.values[se]=c}continue}const J=Math.floor(j),Q=Math.ceil(j),te=j-J;for(let re=0;re<h;re++){let se=re+J*_[2]+D*_[1]+F*_[0];const fe=S[se];se=re+Q*_[2]+D*_[1]+F*_[0];const ae=S[se];se=re+J*_[2]+B*_[1]+F*_[0];const ye=S[se];se=re+Q*_[2]+B*_[1]+F*_[0];const le=S[se],H=fe+(ae-fe)*te,Me=ye+(le-ye)*te;se=re+W*C[2]+z*C[1]+T*C[0],m.values[se]=H+(Me-H)*V}}}else for(let D=0;D<g;++D){const B=g>1?E*(f-1)+D*O:.5*(E+N)*(f-1);if(B<0||B>f-1){for(let j=0;j<h;j++){const J=j+D*C[2]+z*C[1]+T*C[0];m.values[J]=c}continue}const V=Math.round(B),W=Math.round(X);for(let j=0;j<h;j++){const J=j+V*_[2]+W*_[1]+F*_[0],Q=j+D*C[2]+z*C[1]+T*C[0];m.values[Q]=S[J]}}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const ybt={kernelName:S8,backendName:"cpu",kernelFunc:vbt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xbt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;Kt(i,"cumprod");const l=fi([s],i.shape.length);let c=i;l!=null&&(c=na({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=Ni(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Pa(c.dtype,"int32"),f=a8(it(c.shape),d),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=a?(m,y)=>m+p-y-1:(m,y)=>m+y;for(let m=0;m<h.length;m+=p)for(let y=0;y<p;y++){const x=v(m,y);if(y===0)f[x]=o?1:h[x];else{const S=v(m,y-1);f[x]=o?h[S]*f[S]:h[x]*f[S]}}const g=n.makeTensorInfo(c.shape,d,f);if(l!=null){const m=rp(l),y=na({inputs:{x:g},backend:n,attrs:{perm:m}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),y}return g}const bbt={kernelName:w8,backendName:"cpu",kernelFunc:xbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wbt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;Kt(i,"cumsum");const l=fi([s],i.shape.length);let c=i;l!=null&&(c=na({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=Ni(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Pa(c.dtype,"int32"),f=to(it(c.shape),d),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=a?(m,y)=>m+p-y-1:(m,y)=>m+y;for(let m=0;m<h.length;m+=p)for(let y=0;y<p;y++){const x=v(m,y);if(y===0)f[x]=o?0:h[x];else{const S=v(m,y-1);f[x]=o?h[S]+f[S]:h[x]+f[S]}}const g=n.makeTensorInfo(c.shape,d,f);if(l!=null){const m=rp(l),y=na({inputs:{x:g},backend:n,attrs:{perm:m}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),y}return g}const Sbt={kernelName:a3,backendName:"cpu",kernelFunc:wbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _bt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,u=NW(l,c,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(s),u=Zge(l,c,o,a);return n.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const Cbt={kernelName:_8,backendName:"cpu",kernelFunc:_bt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tbt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:o}=r;ue(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=i.shape[0],l=i.shape[1],c=i.shape[2],u=i.shape[3],d=l*s,f=c*s,h=u/(s*s),p=n.data.get(i.dataId).values,v=new Float32Array(a*d*f*h);let g=0;for(let m=0;m<a;++m)for(let y=0;y<d;++y){const x=Math.floor(y/s),S=y%s;for(let _=0;_<f;++_){const C=Math.floor(_/s),T=_%s,A=(S*s+T)*h;for(let M=0;M<h;++M){const P=M+A+u*(C+c*(x+l*m));v[g++]=p[P]}}}return n.makeTensorInfo([a,d,f,h],i.dtype,v)}const Ebt={kernelName:C8,backendName:"cpu",kernelFunc:Tbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;Kt([i,s],"depthwiseConv2DNative");const u=on(i.shape),d=on(s.shape);let f=l;f==null&&(f=[1,1]),ue(io(o,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${f}'`);const h=Bs(i.shape,s.shape,o,f,a,c,!0),{filterHeight:p,filterWidth:v,dilationHeight:g,dilationWidth:m,padInfo:y}=h,x=y.left,S=y.top,_=h.outChannels/h.inChannels,C=new Ds(h.outShape,i.dtype),T=n.data.get(i.dataId).values,A=n.data.get(s.dataId).values,M=C.values;for(let E=0;E<h.batchSize;++E){const P=E*u[0],N=E*C.strides[0];for(let F=0;F<h.outHeight;++F){const $=N+F*C.strides[1],O=F*h.strideHeight-S;for(let z=0;z<p;++z){const X=O+z*g;if(X<0||X>=h.inHeight)continue;const D=z*d[0],B=P+X*u[1];for(let V=0;V<h.outWidth;++V){const W=$+V*C.strides[2],j=V*h.strideWidth-x;for(let J=0;J<v;++J){const Q=j+J*m;if(Q<0||Q>=h.inWidth)continue;const te=D+J*d[1],re=B+Q*h.inChannels;let se=W,fe=te;for(let ae=0;ae<h.inChannels;++ae){const ye=T[re+ae];for(let le=0;le<_;++le)M[se+le]+=ye*A[fe+le];se+=_,fe+=_}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const Mbt={kernelName:l3,backendName:"cpu",kernelFunc:Z0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Abt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;Kt([i,s],"depthwiseConv2dNativeBackpropFilter");const d=Bs(i.shape,u,o,a,l,c,!0),{strideHeight:f,strideWidth:h,filterHeight:p,filterWidth:v}=d,g=new Ds(d.filterShape,"float32"),m=d.padInfo.left,y=d.padInfo.top,x=d.outChannels/d.inChannels,S=n.data.get(i.dataId).values,_=new Ds(i.shape,i.dtype,S),C=n.data.get(s.dataId).values,T=new Ds(s.shape,s.dtype,C);for(let A=0;A<p;++A){const M=Math.max(0,Math.ceil((y-A)/f)),E=Math.min(d.outHeight,(d.inHeight+y-A)/f);for(let P=0;P<v;++P){const N=Math.max(0,Math.ceil((m-P)/h)),F=Math.min(d.outWidth,(d.inWidth+m-P)/h);for(let $=0;$<d.outChannels;++$){const O=Math.trunc($/x),z=$%x;let X=0;for(let D=0;D<d.batchSize;++D)for(let B=M;B<E;++B){const V=A+B*f-y;for(let W=N;W<F;++W){const j=P+W*h-m;X+=_.get(D,V,j,O)*T.get(D,B,W,$)}}g.set(X,A,P,O,z)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const kbt={kernelName:T8,backendName:"cpu",kernelFunc:Abt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ibt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;Kt([i,s],"depthwiseConv2DNativeBackpropInput");const d=on(i.shape),f=on(s.shape),h=Bs(u,s.shape,o,a,l,c,!0),p=new Ds(h.inShape,"float32"),v=p.values,[g,m,y]=p.strides,x=n.data.get(i.dataId).values,[S,_,C]=d,T=n.data.get(s.dataId).values,[A,M,E]=f,{batchSize:P,filterHeight:N,filterWidth:F,inChannels:$,inHeight:O,inWidth:z,outChannels:X,outHeight:D,outWidth:B,strideHeight:V,strideWidth:W}=h,j=N-1-h.padInfo.top,J=F-1-h.padInfo.left,Q=X/$;for(let te=0;te<P;++te)for(let re=0;re<$;++re)for(let se=0;se<O;++se){const fe=se-j,ae=Math.max(0,Math.ceil(fe/V)),ye=Math.min(D,(N+fe)/V);for(let le=0;le<z;++le){const H=le-J,Me=Math.max(0,Math.ceil(H/W)),we=Math.min(B,(F+H)/W);let Ee=0;for(let ge=ae;ge<ye;++ge){const qe=ge*V-fe;for(let Ae=Me;Ae<we;++Ae){const ee=Ae*W-H,Y=S*te+_*ge+C*Ae,oe=A*(N-1-qe)+M*(F-1-ee)+E*re;for(let xe=0;xe<Q;++xe){const Se=re*Q+xe,be=x[Y+Se],Re=T[oe+xe];Ee+=be*Re}}}v[g*te+m*se+y*le+re]=Ee}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const Rbt={kernelName:E8,backendName:"cpu",kernelFunc:Ibt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pbt(t){const{inputs:e,backend:n}=t,{x:r}=e,i=it(r.shape),s=n.data.get(r.dataId).values,o=Hn([i,i],r.dtype),a=o.values;for(let c=0;c<s.length;c++)a[c*i+c]=s[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const Nbt={kernelName:bfe,backendName:"cpu",kernelFunc:Pbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $bt={kernelName:c3,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:s,pad:o,dilations:a}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(i.dataId).values,f=i.shape.length,{batchSize:h,inHeight:p,inWidth:v,inChannels:g,outHeight:m,outWidth:y,padInfo:x,strideHeight:S,strideWidth:_,filterHeight:C,filterWidth:T,dilationHeight:A,dilationWidth:M,outShape:E}=w_(r.shape,i.shape,s,o,"NHWC",a),P=it(E),N=E.length,F=ki(r.dtype,P);for(let O=0;O<h;++O)for(let z=0;z<m;++z){const X=z*S-x.top;for(let D=0;D<y;++D){const B=D*_-x.left;for(let V=0;V<g;++V){let W=Number.MIN_SAFE_INTEGER;for(let J=0;J<C;++J){const Q=X+J*A;if(Q>=0&&Q<p)for(let te=0;te<T;++te){const re=B+te*M;if(re>=0&&re<v){const se=Vu([O,Q,re,V],u,on(r.shape)),fe=Vu([J,te,V],f,on(i.shape)),ae=c[se]+d[fe];ae>W&&(W=ae)}}}const j=Vu([O,z,D,V],N,on(E));F[j]=W}}}return{dataId:l.write(Og(F,r.dtype),E,r.dtype),shape:E,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dbt={kernelName:MF,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Vc(r.shape,c.data.get(r.dataId).values),d=Vc(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:v,outHeight:g,outWidth:m,padInfo:y,strideHeight:x,strideWidth:S,filterHeight:_,filterWidth:C,dilationHeight:T,dilationWidth:A,outShape:M}=w_(r.shape,i.shape,o,a,"NHWC",l);ue(s.rank===M.length,()=>`Error in ${MF}, dy must have the same rank as output ${M.length}, but got ${s.rank}`);const E=Vc(M,c.data.get(s.dataId).values),P=gfe(i.shape,i.dtype);for(let F=0;F<f;++F)for(let $=0;$<g;++$){const O=$*x-y.top;for(let z=0;z<m;++z){const X=z*S-y.left;for(let D=0;D<v;++D){let B=Number.MIN_SAFE_INTEGER,V=0,W=0;for(let j=0;j<_;++j){const J=O+j*T;if(J>=0&&J<h)for(let Q=0;Q<C;++Q){const te=X+Q*A;if(te>=0&&te<p){const re=u[F][J][te][D]+d[j][Q][D];re>B&&(B=re,V=j,W=Q)}}}P[V][W][D]+=E[F][$][z][D]}}}return{dataId:c.write(Og(P,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lbt={kernelName:EF,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:s}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Vc(r.shape,c.data.get(r.dataId).values),d=Vc(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:v,outHeight:g,outWidth:m,padInfo:y,strideHeight:x,strideWidth:S,filterHeight:_,filterWidth:C,dilationHeight:T,dilationWidth:A,outShape:M}=w_(r.shape,i.shape,o,a,"NHWC",l);ue(s.rank===M.length,()=>`Error in ${EF}, dy must have the same rank as output ${M.length}, but got ${s.rank}`);const E=Vc(M,c.data.get(s.dataId).values),P=gfe(r.shape,r.dtype);for(let F=0;F<f;++F)for(let $=0;$<g;++$){const O=$*x-y.top;for(let z=0;z<m;++z){const X=z*S-y.left;for(let D=0;D<v;++D){let B=Number.MIN_SAFE_INTEGER,V=O<0?0:O,W=X<0?0:X;for(let j=0;j<_;++j){const J=O+j*T;if(J>=0&&J<h)for(let Q=0;Q<C;++Q){const te=X+Q*A;if(te>=0&&te<p){const re=u[F][J][te][D]+d[j][Q][D];re>B&&(B=re,V=J,W=te)}}}P[F][V][W][D]+=E[F][$][z][D]}}}return{dataId:c.write(Og(P,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Obt(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:s,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=s.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[f,h]=i.shape.slice(0,2),p=i.shape.length===2?1:i.shape[2],v=n.data.get(i.dataId).values,g=i.dtype==="float32"?255:1,m=new Uint8ClampedArray(h*f*4);for(let x=0;x<f*h;++x){const S=[0,0,0,255*c];for(let C=0;C<p;C++){const T=v[x*p+C];if(i.dtype==="float32"){if(T<0||T>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${T}.`)}else if(i.dtype==="int32"&&(T<0||T>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${T}.`);p===1?(S[0]=T*g,S[1]=T*g,S[2]=T*g):S[C]=T*g}const _=x*4;m[_+0]=Math.round(S[0]),m[_+1]=Math.round(S[1]),m[_+2]=Math.round(S[2]),m[_+3]=Math.round(S[3])}s.width=h,s.height=f;const y=new ImageData(m,h,f);return d.putImageData(y,0,0),i}const Fbt={kernelName:Zlt,backendName:"cpu",kernelFunc:Obt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O_(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;Kt(i,"sum");let a;i.dtype==="bool"?a=Oh({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):a=sd({inputs:{x:i},backend:n});const l=a.shape.length,c=qn(s,a.shape),u=fi(c,l);let d=c,f=a;u!=null&&(f=na({inputs:{x:a},backend:n,attrs:{perm:u}}),d=Ni(d.length,l)),Us("sum",d,f.shape.length);const[h,p]=_s(f.shape,d),v=Pa(f.dtype,"int32");let g=ak(n,h,v);const m=it(p),y=n.data.get(g.dataId).values,x=n.data.get(f.dataId).values;for(let S=0;S<y.length;++S){const _=S*m;let C=0;for(let T=0;T<m;++T)C+=x[_+T];y[S]=C}if(o){const S=ji(g.shape,c),_=g;g=zr({inputs:{x:g},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(_)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(f),g}const Bbt={kernelName:V3,backendName:"cpu",kernelFunc:O_};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ubt(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=rW(i,s.length);sW(o.length,l,s);const{path:c,steps:u}=oW(a,l),d=u.length;let f=null,h=o.length;const p=[];for(let v=0;v<d;++v){for(const g of u[v]){const{permutationIndices:m,expandDims:y}=iW(h,l[g]);let x;aW(m)?x=s[g]:(x=na({inputs:{x:s[g]},backend:n,attrs:{perm:m}}),p.push(x));const S=x.shape.slice();for(let _=0;_<y.length;++_)S.splice(y[_],0,1);wr(x.shape,S)||(x=zr({inputs:{x},backend:n,attrs:{shape:S}}),p.push(x)),f===null?f=x:(f=gP({inputs:{a:x,b:f},backend:n}),p.push(f))}v<d-1&&(c[v]>=0&&(f=O_({inputs:{x:f},backend:n,attrs:{axis:c[v]-(o.length-h),keepDims:!1}}),p.push(f)),h--)}for(const v of p)v!==f&&n.disposeIntermediateTensorInfo(v);return f}const zbt={kernelName:M8,backendName:"cpu",kernelFunc:Ubt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbt(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;Kt([r,i],"eluGrad");const s=new Float32Array(it(i.shape)),o=n.data.get(i.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];c>=0?s[l]=a[l]:s[l]=a[l]*(c+1)}return n.makeTensorInfo(i.shape,"float32",s)}const Wbt={kernelName:A8,backendName:"cpu",kernelFunc:Vbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gbt=KV,Hbt=ZV,jbt=JV,Xbt=QV,qbt=eW,Ybt=tW,Kbt=Tr(F2,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+Gbt*n);return e*(1-((((Ybt*r+qbt)*r+Xbt)*r+jbt)*r+Hbt)*r*Math.exp(-n*n))}),Zbt={kernelName:F2,backendName:"cpu",kernelFunc:Kbt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uk(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:s}=r,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(ue(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),zr({inputs:{x:i},backend:n,attrs:{shape:a}})}const Jbt={kernelName:d3,backendName:"cpu",kernelFunc:uk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qbt=Di((t,e)=>t/e),BW=cs(L2,Qbt),e5={kernelName:L2,backendName:"cpu",kernelFunc:BW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J0e(t,e,n){const r=t.shape,i=r[0],s=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[i,s],u=it(c),d=eo("float32",u),f=eo("float32",u);for(let g=0;g<i;g++){const m=yg({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,s]}}),y=yg({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,s]}}),x=ba({inputs:{real:m,imag:y},backend:n}),{real:S,imag:_}=ewt(x,e,n),C=uf(S,_);for(let T=0;T<s;T++){const A=nW(C,T);d[g*s+T]=A.real,f[g*s+T]=A.imag}n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x)}const h=n.makeTensorInfo(c,"float32",d),p=n.makeTensorInfo(c,"float32",f),v=ba({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),v}function ewt(t,e,n){const r=it(t.shape),i=n.data.get(t.dataId),s=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if(twt(r)){const a=t5(s,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",ep(r,"float32")),f=sd({inputs:{x:d},backend:n}),h=e5.kernelFunc({inputs:{a:c,b:d},backend:n}),p=e5.kernelFunc({inputs:{a:u,b:f},backend:n}),v=n.data.get(h.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:v,imag:g}}return a}else{const a=uf(s,o),l=nwt(a,r,e);return hpe(l)}}function twt(t){return(t&t-1)===0}function t5(t,e,n,r,i){if(n===1)return{real:t,imag:e};const s=uf(t,e),o=n/2,a=ppe(s),l=a.real,c=a.imag,u=[l.length],d=i.makeTensorInfo(u,"float32",l),f=i.makeTensorInfo(u,"float32",c),h=ba({inputs:{real:d,imag:f},backend:i}),p=mpe(s),v=p.real,g=p.imag,m=[v.length],y=i.makeTensorInfo(m,"float32",v),x=i.makeTensorInfo(m,"float32",g),S=ba({inputs:{real:y,imag:x},backend:i}),_=t5(l,c,o,r,i),C=_.real,T=_.imag,A=[C.length],M=i.makeTensorInfo(A,"float32",C),E=i.makeTensorInfo(A,"float32",T),P=ba({inputs:{real:M,imag:E},backend:i}),N=t5(v,g,o,r,i),F=N.real,$=N.imag,O=[F.length],z=i.makeTensorInfo(O,"float32",F),X=i.makeTensorInfo(O,"float32",$),D=ba({inputs:{real:z,imag:X},backend:i}),B=vpe(n,r),V=[B.real.length],W=i.makeTensorInfo(V,"float32",B.real),j=i.makeTensorInfo(V,"float32",B.imag),J=ba({inputs:{real:W,imag:j},backend:i}),Q=gP({inputs:{a:J,b:D},backend:i}),te=Ay({inputs:{a:P,b:Q},backend:i}),re=OW({inputs:{a:P,b:Q},backend:i}),se=vg({inputs:{input:te},backend:i}),fe=vg({inputs:{input:re},backend:i}),ae=ky({inputs:{input:te},backend:i}),ye=ky({inputs:{input:re},backend:i}),le=Iy({inputs:[se,fe],backend:i,attrs:{axis:0}}),H=Iy({inputs:[ae,ye],backend:i,attrs:{axis:0}}),Me=i.data.get(le.dataId).values,we=i.data.get(H.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(S),i.disposeIntermediateTensorInfo(M),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(P),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(J),i.disposeIntermediateTensorInfo(Q),i.disposeIntermediateTensorInfo(te),i.disposeIntermediateTensorInfo(re),i.disposeIntermediateTensorInfo(se),i.disposeIntermediateTensorInfo(ae),i.disposeIntermediateTensorInfo(fe),i.disposeIntermediateTensorInfo(ye),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(H),{real:Me,imag:we}}function nwt(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let s=0,o=0;for(let a=0;a<e;a++){const l=ype(i*a,e,n),c=nW(t,a);s+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(s/=e,o/=e),gpe(r,s,o,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rwt(t){const{inputs:e,backend:n}=t,{input:r}=e,i=it(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=zr({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),l=J0e(a,!1,n),c=zr({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const iwt={kernelName:k8,backendName:"cpu",kernelFunc:rwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UW(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:s}=n,o=s||ux(i),a=ki(o,it(r));return owt(a,i,o),e.makeTensorInfo(r,o,a)}const swt={kernelName:I8,backendName:"cpu",kernelFunc:UW};function owt(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const awt={kernelName:R8,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,s=eo(r.dtype,it(r.shape)),[o,a,l,c]=r.shape,u=i.data.get(r.dataId).values;for(let f=0;f<o;f++){const h=f*l*a*c;for(let p=0;p<a;p++){const v=p*(l*c);for(let g=0;g<l;g++){const m=g*c;for(let y=0;y<c;y++){const x=Math.round(l-g-1),S=h+v+m+y;let _=u[S];if(x>=0&&x<l){const C=x*c,T=h+v+C+y;_=u[T]}s[S]=_}}}}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let v=K0e({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(o){const g=v;if(u==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const m=zr({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=Ay({inputs:{a:v,b:m},backend:n}),n.disposeIntermediateTensorInfo(m)}else v=Ay({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(g)}if(h){const g=v;if(u==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const m=zr({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});v=ck(n,v,h,m,p),n.disposeIntermediateTensorInfo(m)}else v=ck(n,v,h,a,p);n.disposeIntermediateTensorInfo(g)}return v}const cwt={kernelName:zA,backendName:"cpu",kernelFunc:lwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let v=Z0e({inputs:{x:i,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(o){const g=v;v=Ay({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=v;v=ck(n,v,h,a,p),n.disposeIntermediateTensorInfo(g)}return v}const dwt={kernelName:Bfe,backendName:"cpu",kernelFunc:uwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fwt(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=it(r.shape),o=i.shape,a=o[o.length-1],[l,c,u,d]=BV(r,i);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const f=n.data.get(i.dataId).values,h=n.bufferSync(r),p=l0e(f,h,r.dtype,c,a,u,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,p.values)}const hwt={kernelName:wfe,backendName:"cpu",kernelFunc:fwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:o,batchDims:a}=r;Kt([i,s],"gatherV2");const l=qn(o,i.shape)[0],c=n.data.get(s.dataId).values,u=i.shape[l];for(let S=0;S<c.length;++S){const _=c[S];ue(_<=u-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);const f=it(s.shape),h=cW(i,s,l,d),p=zr({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),v=zr({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),g=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],m=n.bufferSync(v),y=n.bufferSync(p),x=c0e(y,m,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(h.outputShape,x.dtype,x.values)}const mwt={kernelName:h3,backendName:"cpu",kernelFunc:pwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gwt(t){const{inputs:e,backend:n}=t,{input:r}=e,i=it(r.shape),s=r.shape[r.shape.length-1],o=i/s,a=zr({inputs:{x:r},backend:n,attrs:{shape:[o,s]}}),l=J0e(a,!0,n),c=zr({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const vwt={kernelName:P8,backendName:"cpu",kernelFunc:gwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ywt=Tr(H2,t=>Number.isFinite(t)?1:0,"bool"),xwt={kernelName:H2,backendName:"cpu",kernelFunc:ywt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bwt=Tr(j2,t=>Math.abs(t)===1/0?1:0,"bool"),wwt={kernelName:j2,backendName:"cpu",kernelFunc:bwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Swt=Tr(X2,t=>Number.isNaN(t)?1:0,"bool"),_wt={kernelName:X2,backendName:"cpu",kernelFunc:Swt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cwt(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,o=p0e(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const Twt={kernelName:Sfe,backendName:"cpu",kernelFunc:Cwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ewt=Tr(Y2,t=>Math.log1p(t)),Mwt={kernelName:Y2,backendName:"cpu",kernelFunc:Ewt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Awt=Di((t,e)=>t&&e),kwt=cs(y3,Awt,null,"bool"),Iwt={kernelName:y3,backendName:"cpu",kernelFunc:kwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rwt=Tr(x3,t=>t?0:1,"bool"),Pwt={kernelName:x3,backendName:"cpu",kernelFunc:Rwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nwt=Di((t,e)=>t||e),$wt=cs(b3,Nwt,null,"bool"),Dwt={kernelName:b3,backendName:"cpu",kernelFunc:$wt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r;Kt(i,"LRN");const c=i.shape[3],u=c-1,d=n.data.get(i.dataId).values,f=it(i.shape),h=new Float32Array(f);function p(v){const g=v%c;let m=v-g+Math.max(0,g-s);const y=v-g+Math.min(g+s,u);let x=0;for(;m<=y;m++){const S=d[m];x+=S*S}return x}for(let v=0;v<f;v++){const g=p(v),m=d[v]*Math.pow(o+a*g,-l);h[v]=m}return n.makeTensorInfo(i.shape,i.dtype,h)}const Owt={kernelName:w3,backendName:"cpu",kernelFunc:Lwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r;Kt(o,"LRNGrad");const d=it(o.shape),f=o.shape[3],h=n.data.get(o.dataId).values,p=n.data.get(i.dataId).values,v=n.data.get(s.dataId).values,g=new Float32Array(d),m=d;for(let y=0;y<m;y++){const x=y%f,S=y-x+Math.max(0,x-a),_=y-x+Math.min(f,x+a+1);let C=0;for(let T=S;T<_;T++)C+=Math.pow(p[T],2);C=c*C+l;for(let T=S;T<_;T++){let A=-2*c*u*p[T]*v[y]/C;y===T&&(A+=Math.pow(C,-u)),A*=h[y],g[T]+=A}}return n.makeTensorInfo(o.shape,i.dtype,g)}const Bwt={kernelName:$8,backendName:"cpu",kernelFunc:Fwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=n;let l=i.shape;const c=l.length,u=qn(s,l);let d=u;const f=fi(d,c);let h=a.data.get(i.dataId).values;if(f!=null){const S=new Array(c);for(let _=0;_<S.length;_++)S[_]=l[f[_]];h=DW(h,l,i.dtype,f,S),d=Ni(d.length,c),l=S}Kt(i,"max"),Us("max",d,c);const[p,v]=_s(l,d),g=it(v),m=g0e(h,g,p,i.dtype),y=a.write(m,p,i.dtype);let x=p;return o&&(x=ji(p,u)),{dataId:y,shape:x,dtype:i.dtype}}const Uwt={kernelName:S3,backendName:"cpu",kernelFunc:Q0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Kt(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;ue(io(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=dc(i.shape,s,o,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&wr(u.inShape,u.outShape))d=sd({inputs:{x:i},backend:n});else{const f=n.data.get(i.dataId).values,h=on(i.shape),p=FW(f,i.shape,i.dtype,h,u,"max");d=n.makeTensorInfo(u.outShape,i.dtype,p.values)}return d}const Vwt={kernelName:_3,backendName:"cpu",kernelFunc:zwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;Kt(i,"maxPool3d");const u=vf(i.shape,s,o,1,a,l,c),d=n.data.get(i.dataId).values,f=Y0e(d,i.shape,i.dtype,on(i.shape),u,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const Gwt={kernelName:C3,backendName:"cpu",kernelFunc:Wwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hwt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;Kt([i,s],"maxPool3DGrad");const u=vf(s.shape,o,a,1,l,c),d=n.bufferSync(s),f=N1t(d,u),h=u.strideDepth,p=u.strideHeight,v=u.strideWidth,g=u.dilationDepth,m=u.dilationHeight,y=u.dilationWidth,x=u.effectiveFilterDepth,S=u.effectiveFilterHeight,_=u.effectiveFilterWidth,C=x-1-u.padInfo.front,T=_-1-u.padInfo.left,A=S-1-u.padInfo.top,M=Hn(s.shape,"float32"),E=n.bufferSync(i);for(let P=0;P<u.batchSize;++P)for(let N=0;N<u.inChannels;++N)for(let F=0;F<u.inDepth;++F)for(let $=0;$<u.inHeight;++$)for(let O=0;O<u.inWidth;++O){const z=F-C,X=$-A,D=O-T;let B=0;for(let V=0;V<x;V+=g){const W=(z+V)/h;if(!(W<0||W>=u.outDepth||Math.floor(W)!==W))for(let j=0;j<S;j+=m){const J=(X+j)/p;if(!(J<0||J>=u.outHeight||Math.floor(J)!==J))for(let Q=0;Q<_;Q+=y){const te=(D+Q)/v;if(te<0||te>=u.outWidth||Math.floor(te)!==te)continue;const re=x*S*_-1-f.get(P,W,J,te,N),se=V*S*_+j*_+Q,fe=re===se?1:0;if(fe===0)continue;const ae=E.get(P,W,J,te,N);B+=ae*fe}}}M.set(B,P,F,$,O,N)}return n.makeTensorInfo(M.shape,M.dtype,M.values)}const jwt={kernelName:L8,backendName:"cpu",kernelFunc:Hwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xwt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:o}=e,a=s;Kt([s,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=dc(a.shape,l,c,1,u,d),h=n.data.get(a.dataId).values,p=Hn(f.outShape,a.dtype,q0e(h,a.shape,a.dtype,f).values),v=f.strideHeight,g=f.strideWidth,m=f.dilationHeight,y=f.dilationWidth,x=f.effectiveFilterHeight,S=f.effectiveFilterWidth,_=S-1-f.padInfo.left,C=x-1-f.padInfo.top,T=Hn(a.shape,"float32"),A=n.data.get(i.dataId).values,M=Hn(i.shape,"float32",A);for(let E=0;E<f.batchSize;++E)for(let P=0;P<f.inChannels;++P)for(let N=0;N<f.inHeight;++N)for(let F=0;F<f.inWidth;++F){const $=N-C,O=F-_;let z=0;for(let X=0;X<x;X+=m){const D=($+X)/v;if(!(D<0||D>=f.outHeight||Math.floor(D)!==D))for(let B=0;B<S;B+=y){const V=(O+B)/g;if(V<0||V>=f.outWidth||Math.floor(V)!==V)continue;const W=x*S-1-p.get(E,D,V,P),j=X*S+B,J=W===j?1:0;if(J===0)continue;const Q=M.get(E,D,V,P);z+=Q*J}}T.set(z,E,N,F,P)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const qwt={kernelName:D8,backendName:"cpu",kernelFunc:Xwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ywt(t,e,n,r,i){const s=on(e),o=FW(t,e,n,s,i,"max"),a=q0e(t,e,n,i,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kwt={kernelName:_fe,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=n;Kt(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=dc(r.shape,i,s,[1,1],o),[d,f]=Ywt(c,r.shape,r.dtype,a,u),h=l.write(d,u.outShape,r.dtype),p=l.write(f,u.outShape,r.dtype);return[{dataId:h,shape:u.outShape,dtype:r.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=qn(s,i.shape),c=_s(i.shape,a)[1],u=it(c),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(f);const h=Oh({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(h);const p=BW({inputs:{a:h,b:f},backend:n});d.push(p);const v=O_({inputs:{x:p},backend:n,attrs:{axis:s,keepDims:o}});return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),v}const Jwt={kernelName:T3,backendName:"cpu",kernelFunc:Zwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qwt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;Kt(i,"min");const a=qn(s,i.shape);let l=a;const c=fi(l,i.shape.length);let u=i;c!=null&&(u=na({inputs:{x:i},backend:n,attrs:{perm:c}}),l=Ni(l.length,i.shape.length)),Us("min",l,u.shape.length);const[d,f]=_s(u.shape,l),h=it(f),p=to(it(d),u.dtype),v=n.data.get(u.dataId).values;for(let m=0;m<p.length;++m){const y=m*h;let x=v[y];for(let S=0;S<h;++S){const _=v[y+S];(Number.isNaN(_)||_<x)&&(x=_)}p[m]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,p);if(o){const m=ji(d,a),y=zr({inputs:{x:g},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(g),y}return g}const eSt={kernelName:E3,backendName:"cpu",kernelFunc:Qwt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tSt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,mode:o}=r;Kt(i,"mirrorPad");const a=s.map((x,S)=>x[0]+i.shape[S]+x[1]),l=s.map(x=>x[0]),c=s.map((x,S)=>x[0]+i.shape[S]),u=o==="reflect"?0:1,d=n.data.get(i.dataId).values,f=i.shape.length,h=on(i.shape),p=it(a),v=a.length,g=on(a),m=eo(i.dtype,p);for(let x=0;x<p;x++){let S=dx(x,v,g);for(let C=0;C<v;C++)S[C]<l[C]?S[C]=l[C]*2-S[C]-u:S[C]>=c[C]&&(S[C]=(c[C]-1)*2-S[C]+u);S=S.map((C,T)=>C-l[T]);const _=Vu(S,f,h);m[x]=d[_]}return{dataId:n.write(m,a,i.dtype),shape:a,dtype:i.dtype}}const nSt={kernelName:M3,backendName:"cpu",kernelFunc:tSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rSt=Di((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),iSt=cs(J2,rSt),sSt={kernelName:J2,backendName:"cpu",kernelFunc:iSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eve(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,o=i.shape.length;let a=s;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=qn([a],i.shape),c=Q0e({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=ji(c.shape,l),d=zr({inputs:{x:c},backend:n,attrs:{shape:u}}),f=OW({inputs:{a:i,b:d},backend:n}),h=i0e({inputs:{x:f},backend:n}),p=O_({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),v=zr({inputs:{x:p},backend:n,attrs:{shape:u}}),g=BW({inputs:{a:h,b:v},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),g}const oSt={kernelName:H3,backendName:"cpu",kernelFunc:eve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aSt(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r;Kt(i,"multinomial");const l=a?i:eve({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,f=[c,s],h=to(it(f),"int32");for(let p=0;p<c;++p){const v=p*u,g=new Float32Array(u-1);g[0]=d[v];for(let x=1;x<g.length;++x)g[x]=g[x-1]+d[v+x];const m=CV.alea(o.toString()),y=p*s;for(let x=0;x<s;++x){const S=m();h[y+x]=g.length;for(let _=0;_<g.length;_++)if(S<g[_]){h[y+x]=_;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",h)}const lSt={kernelName:Cfe,backendName:"cpu",kernelFunc:aSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cSt=NV;function uSt(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;Kt(i,"NonMaxSuppression");const c=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,{selectedIndices:d}=cSt(c,u,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const dSt={kernelName:O8,backendName:"cpu",kernelFunc:uSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fSt=$V;function hSt(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;Kt(i,"NonMaxSuppressionPadded");const u=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:f,validOutputs:h}=fSt(u,d,o,a,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const pSt={kernelName:F8,backendName:"cpu",kernelFunc:hSt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mSt=DV;function gSt(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;Kt(i,"NonMaxSuppressionWithScore");const u=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,f=o,h=a,p=l,v=c,{selectedIndices:g,selectedScores:m}=mSt(u,d,f,h,p,v);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([m.length],"float32",new Float32Array(m))]}const vSt={kernelName:B8,backendName:"cpu",kernelFunc:gSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ySt(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r;Kt(i,"oneHot");const c=it(i.shape),u=new Float32Array(c*o);u.fill(l);const d=n.data.get(i.dataId).values;for(let f=0;f<c;++f)d[f]>=0&&d[f]<o&&(u[f*o+d[f]]=a);return n.makeTensorInfo([...i.shape,o],s,u)}const xSt={kernelName:R3,backendName:"cpu",kernelFunc:ySt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dk(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=vg({inputs:{input:r},backend:n}),s=dk({inputs:{x:i},backend:n}),o=ky({inputs:{input:r},backend:n}),a=dk({inputs:{x:o},backend:n}),l=ba({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return UW({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const bSt={kernelName:q3,backendName:"cpu",kernelFunc:dk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tve(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=vg({inputs:{input:r},backend:n}),s=tve({inputs:{x:i},backend:n}),o=ky({inputs:{input:r},backend:n}),a=dk({inputs:{x:o},backend:n}),l=ba({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return UW({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const wSt={kernelName:I3,backendName:"cpu",kernelFunc:tve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nve(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return uk({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(u=>{s8(s,u.shape,"All tensors passed to stack must have matching shapes"),ue(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=uk({inputs:{input:u},backend:n,attrs:{dim:i}});return a.push(d),d}),c=Iy({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const SSt={kernelName:P3,backendName:"cpu",kernelFunc:nve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _St(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:o}=r;Kt(i,"pad");const a=s.map((y,x)=>y[0]+i.shape[x]+y[1]),l=s.map(y=>y[0]),c=n.data.get(i.dataId).values,u=it(i.shape),d=i.shape.length,f=on(i.shape),h=it(a),p=a.length,v=on(a),g=eo(i.dtype,h);o!==0&&g.fill(o);for(let y=0;y<u;y++){const S=dx(y,d,f).map((C,T)=>C+l[T]),_=Vu(S,p,v);g[_]=c[y]}return{dataId:n.write(g,a,i.dtype),shape:a,dtype:i.dtype}}const rve={kernelName:N3,backendName:"cpu",kernelFunc:_St};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CSt=Di((t,e)=>Math.pow(t,e)),TSt=cs(e_,CSt),ESt={kernelName:e_,backendName:"cpu",kernelFunc:TSt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MSt(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,a=i.map(g=>n.data.get(g.dataId).values),l=i.map(g=>g.shape),c=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,[d,f,h]=S0e(a,l,c,s.shape,s.dtype,u,o.shape),p=d.map(g=>n.makeTensorInfo([g.length],"int32",g)),v=n.makeTensorInfo(h,s.dtype,f);return p.concat([v])}const ASt={kernelName:Tfe,backendName:"cpu",kernelFunc:MSt};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kSt(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,u]=_0e(o,r.shape,r.dtype,a,i.shape,l,s.shape),d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const ISt={kernelName:Efe,backendName:"cpu",kernelFunc:kSt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RSt(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,f=a.map(g=>n.data.get(g.dataId).values),h=a.map(g=>g.shape),[p,v]=C0e(c,i.shape,u,s.shape,s.dtype,d,o.shape,f,h,l);return n.makeTensorInfo(p,s.dtype,v)}const PSt={kernelName:Mfe,backendName:"cpu",kernelFunc:RSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NSt(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:s,step:o}=n,a=T0e(r,i,o,s);return e.makeTensorInfo([a.length],s,a)}const $St={kernelName:U8,backendName:"cpu",kernelFunc:NSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DSt=Tr(t_,t=>1/t),LSt={kernelName:t_,backendName:"cpu",kernelFunc:DSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OSt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;Kt(i,"resizeBilinear");const l=on(i.shape),[c,u]=a,[d,f,h,p]=i.shape,v=n.data.get(i.dataId).values,g=new Float32Array(it([d,c,u,p])),m=[s&&c>1?f-1:f,s&&u>1?h-1:h],y=[s&&c>1?c-1:c,s&&u>1?u-1:u];let x=0;const S=m[0]/y[0],_=m[1]/y[1];for(let C=0;C<d;C++)for(let T=0;T<c;T++){let A;o?A=S*(T+.5)-.5:A=S*T;const M=Math.max(0,Math.floor(A)),E=A-M,P=Math.min(f-1,Math.ceil(A)),N=C*l[0]+M*l[1],F=C*l[0]+P*l[1];for(let $=0;$<u;$++){let O;o?O=_*($+.5)-.5:O=_*$;const z=Math.max(0,Math.floor(O)),X=O-z,D=Math.min(h-1,Math.ceil(O)),B=N+z*l[2],V=F+z*l[2],W=N+D*l[2],j=F+D*l[2];for(let J=0;J<p;J++){const Q=v[B+J],te=v[V+J],re=v[W+J],se=v[j+J],fe=Q+(re-Q)*X,ae=te+(se-te)*X,ye=fe+(ae-fe)*E;g[x++]=ye}}}return n.makeTensorInfo([d,c,u,p],"float32",g)}const FSt={kernelName:F3,backendName:"cpu",kernelFunc:OSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BSt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r;Kt([s,i],"resizeBilinearGrad");const a=on(i.shape),[l,c,u,d]=i.shape,[,f,h]=s.shape,p=new Float32Array(l*c*u*d),v=[o&&f>1?c-1:c,o&&h>1?u-1:u],g=[o&&f>1?f-1:f,o&&h>1?h-1:h],m=v[0]/g[0],y=v[1]/g[1],x=n.data.get(s.dataId).values;let S=0;for(let _=0;_<l;_++){const C=_*a[0];for(let T=0;T<f;T++){const A=T*m,M=Math.floor(A),E=Math.min(Math.ceil(A),c-1),P=C+M*a[1],N=C+E*a[1],F=A-M,$=1-F;for(let O=0;O<h;O++){const z=O*y,X=Math.floor(z),D=Math.min(Math.ceil(z),u-1),B=z-X,V=1-B,W=P+X*a[2],j=P+D*a[2],J=N+X*a[2],Q=N+D*a[2],te=$*V,re=$*B,se=F*V,fe=F*B;for(let ae=0;ae<d;ae++){const ye=x[S++];p[W+ae]+=ye*te,p[j+ae]+=ye*re,p[J+ae]+=ye*se,p[Q+ae]+=ye*fe}}}}return n.makeTensorInfo([l,u,c,d],"float32",p)}const USt={kernelName:W8,backendName:"cpu",kernelFunc:BSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zSt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r;Kt(i,"resizeNearestNeighbor");const l=on(i.shape),[c,u]=a,[d,f,h,p]=i.shape,v=n.data.get(i.dataId).values,g=new Float32Array(d*c*u*p),m=[s&&c>1?f-1:f,s&&u>1?h-1:h],y=[s&&c>1?c-1:c,s&&u>1?u-1:u],x=m[0]/y[0],S=m[1]/y[1];let _=0;for(let C=0;C<d;C++){const T=C*l[0];for(let A=0;A<c;A++){const M=o?x*(A+.5):x*A;let E=Math.min(f-1,s?Math.round(M):Math.floor(M));o&&(E=Math.max(0,E));const P=T+E*l[1];for(let N=0;N<u;N++){const F=o?S*(N+.5):S*N;let $=Math.min(h-1,s?Math.round(F):Math.floor(F));o&&($=Math.max(0,$));const O=P+$*l[2];for(let z=0;z<p;z++){const X=v[O+z];g[_++]=X}}}}return n.makeTensorInfo([d,c,u,p],i.dtype,g)}const VSt={kernelName:O3,backendName:"cpu",kernelFunc:zSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WSt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r;Kt([s,i],"resizeNearestNeighborGrad");const a=on(i.shape),l=on(s.shape),[c,u,d,f]=i.shape,[,h,p]=s.shape,v=new Float32Array(c*u*d*f),g=n.data.get(s.dataId).values,m=[o&&h>1?u-1:u,o&&p>1?d-1:d],y=[o&&h>1?h-1:h,o&&p>1?p-1:p],x=m[0]/y[0],S=m[1]/y[1],_=1/x,C=1/S,T=Math.ceil(_)*2+2,A=Math.ceil(C)*2+2;for(let M=0;M<c;M++){const E=M*a[0];for(let P=0;P<u;P++){const N=E+P*a[1],F=Math.floor(P*_),$=Math.floor(F-T/2);for(let O=0;O<d;O++){const z=N+O*a[2],X=Math.floor(O*C),D=Math.floor(X-A/2);for(let B=0;B<f;B++){let V=0;for(let W=0;W<T;W++){const j=W+$;if(j<0||j>=h)continue;const J=E+j*l[1],Q=j*x,te=Math.min(u-1,o?Math.round(Q):Math.floor(Q));if(P===te)for(let re=0;re<A;re++){const se=re+D;if(se<0||se>=p)continue;const fe=J+se*l[2],ae=se*S,ye=Math.min(d-1,o?Math.round(ae):Math.floor(ae));O===ye&&(V+=g[fe+B])}}v[z+B]=V}}}}return n.makeTensorInfo(i.shape,i.dtype,v)}const GSt={kernelName:V8,backendName:"cpu",kernelFunc:WSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HSt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r;Kt(i,"reverse");const o=i.shape.length,a=qn(s,i.shape);if(o===0)return sd({inputs:{x:i},backend:n});const l=new Ds(i.shape,i.dtype),c=n.bufferSync(i);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),f=d.slice();a.forEach(h=>f[h]=i.shape[h]-1-f[h]),l.set(c.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const jSt={kernelName:B3,backendName:"cpu",kernelFunc:HSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XSt={kernelName:K8,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=eo(r.dtype,it(r.shape)),[c,u,d,f]=r.shape,[h,p]=XV(o,u,d),v=255,g=Math.sin(i),m=Math.cos(i),y=a.data.get(r.dataId).values;for(let S=0;S<c;S++){const _=S*d*u*f;for(let C=0;C<u;C++){const T=C*(d*f);for(let A=0;A<d;A++){const M=A*f;for(let E=0;E<f;E++){const P=[c,C,A,E],N=P[2],F=P[1];let $=(N-h)*m-(F-p)*g,O=(N-h)*g+(F-p)*m;$=Math.round($+h),O=Math.round(O+p);let z=s;if(typeof s!="number"&&(E===3?z=v:z=s[E]),$>=0&&$<d&&O>=0&&O<u){const D=O*(d*f),B=$*f,V=_+D+B+E;z=y[V]}const X=_+T+M+E;l[X]=z}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qSt=Tr(i_,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),YSt={kernelName:i_,backendName:"cpu",kernelFunc:qSt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KSt(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=zg(s,i,o),f=!0,h=n.bufferSync(i),p=n.bufferSync(s),v=bm(h,p,o,d,c,l,a,u,0,f);return n.makeTensorInfo(o,v.dtype,v.values)}const ZSt={kernelName:Afe,backendName:"cpu",kernelFunc:KSt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JSt(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function QSt(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function e2t(t,e,n,r,i,s){const o=ki("int32",n*i);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),c=a*i;for(let u=0;u<i;++u)o[c+u]=s==="left"?JSt(l,e[u+c]):QSt(l,e[u+c])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t2t(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:o}=r,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,c=e2t(a,l,i.shape[0],i.shape[1],s.shape[1],o);return n.makeTensorInfo(s.shape,"int32",c)}const n2t={kernelName:Ife,backendName:"cpu",kernelFunc:t2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r2t(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e;Kt([r,i,s],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,u=Pa(i.dtype,s.dtype),d=to(it(i.shape),u);let f=0;const h=o===0||o>1||i.shape.length===1?1:it(i.shape.slice(1));for(let p=0;p<a.length;p++)for(let v=0;v<h;v++)a[p]===1?d[f++]=l[p]:d[f++]=c[p];return n.makeTensorInfo(i.shape,u,d)}const i2t={kernelName:U3,backendName:"cpu",kernelFunc:r2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s2t=rP,o2t=iP,a2t=Tr(o_,t=>t>=0?o2t*t:s2t*(Math.exp(t)-1)),l2t={kernelName:o_,backendName:"cpu",kernelFunc:a2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c2t=Tr(c_,t=>t<0?-1:t>0?1:0),u2t={kernelName:c_,backendName:"cpu",kernelFunc:c2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d2t=Tr(a_,t=>Math.sin(t)),f2t={kernelName:a_,backendName:"cpu",kernelFunc:d2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h2t=Tr(l_,t=>Math.sinh(t)),p2t={kernelName:l_,backendName:"cpu",kernelFunc:h2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m2t=11920928955078125e-23,BJ=Math.log(m2t)+2,g2t=Tr(d_,t=>{const e=t>-BJ,n=t<BJ,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),v2t={kernelName:d_,backendName:"cpu",kernelFunc:g2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:o}=r;Kt([i],"spaceToBatchND");const a=it(s),l=[[0,0]];l.push(...o);for(let C=1+s.length;C<i.shape.length;++C)l.push([0,0]);const c=rve.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),u=E_(c.shape,s,a,!1),d=M_(u.length,s.length,!1),f=A_(c.shape,s,a,!1),v=zr({inputs:{x:c},backend:n,attrs:{shape:u}}),y=na({inputs:{x:v},backend:n,attrs:{perm:d}}),_=zr({inputs:{x:y},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),_}const x2t={kernelName:W3,backendName:"cpu",kernelFunc:y2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2t(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values[0],[d,f,h,p,v]=k0e(a,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],i.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const w2t={kernelName:Rfe,backendName:"cpu",kernelFunc:b2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2t(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.data.get(i.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[c,u,d]=I0e(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const _2t={kernelName:Pfe,backendName:"cpu",kernelFunc:S2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2t(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,u]=LW(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const T2t={kernelName:Nfe,backendName:"cpu",kernelFunc:C2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E2t(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(i.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values,[c,u]=LW(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const M2t={kernelName:$fe,backendName:"cpu",kernelFunc:E2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2t(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=zg(s,i,a),h=!1,p=n.bufferSync(i);let v;switch(s.dtype){case"bool":{const g=n.bufferSync(s),m=!!n.data.get(o.dataId).values[0];v=bm(p,g,a,f,u,c,l,d,m,h);break}case"float32":{const g=n.bufferSync(s),m=n.data.get(o.dataId).values[0];v=bm(p,g,a,f,u,c,l,d,m,h);break}case"int32":{const g=n.bufferSync(s),m=n.data.get(o.dataId).values[0];v=bm(p,g,a,f,u,c,l,d,m,h);break}case"string":{const g=n.bufferSync(s),m=Ph(n.data.get(o.dataId).values[0]);v=bm(p,g,a,f,u,c,l,d,m,h);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(a,v.dtype,v.values)}const k2t={kernelName:Dfe,backendName:"cpu",kernelFunc:A2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=qn(o,i.shape)[0],l=lW(i,s,a),c=new Array(i.shape.length).fill(0),u=i.shape.slice();return l.map(d=>{const f=[...u];f[a]=d;const h=yg({inputs:{x:i},backend:n,attrs:{begin:c,size:f}});return c[a]+=d,h})}const R2t={kernelName:G3,backendName:"cpu",kernelFunc:I2t};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P2t={kernelName:G8,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Kt(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let a=0;a<i.length;++a){const l=i[a];s[a]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N2t=Tr(y_,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),$2t={kernelName:y_,backendName:"cpu",kernelFunc:N2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r;Kt(i,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:v,sliceDim0:g,isSimpleSlice:m,begin:y,end:x,strides:S}=GV(i.shape,s,o,a,l,c,u,d,f);let _;if(v)_=zr({inputs:{x:i},backend:n,attrs:{shape:p}});else if(g||m){ue(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const C=zV(y,x,S),T=yg({inputs:{x:i},backend:n,attrs:{begin:y,size:C}});_=zr({inputs:{x:T},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(T)}else{const C=n.bufferSync(i),T=N0e(h,C,S,y);_=n.makeTensorInfo(p,T.dtype,T.values)}return _}const L2t={kernelName:j8,backendName:"cpu",kernelFunc:D2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2t(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.data.get(u.dataId).values,h=n.data.get(d.dataId).values,[p,v]=$0e(f,h,i,s,o,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",v)]}const F2t={kernelName:Lfe,backendName:"cpu",kernelFunc:O2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B2t(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values[0],[c,u,d]=D0e(a,l,i),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const U2t={kernelName:Ofe,backendName:"cpu",kernelFunc:B2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z2t(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(s.dataId).values,a=L0e(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const V2t={kernelName:Ffe,backendName:"cpu",kernelFunc:z2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W2t=Tr(m_,t=>Math.tan(t)),G2t={kernelName:m_,backendName:"cpu",kernelFunc:W2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H2t=Tr(g_,t=>Math.tanh(t)),j2t={kernelName:g_,backendName:"cpu",kernelFunc:H2t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2t(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:s}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=zg(s,i,r.shape),d=!1,f=n.bufferSync(i),h=n.bufferSync(s),p=n.bufferSync(r),v=bm(f,h,r.shape,u,l,a,o,c,p,d);return n.makeTensorInfo(r.shape,v.dtype,v.values)}const q2t={kernelName:kfe,backendName:"cpu",kernelFunc:X2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;Kt(i,"tile");const o=F0e(n.bufferSync(i),s);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const K2t={kernelName:v_,backendName:"cpu",kernelFunc:Y2t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z2t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:o}=r;Kt(i,"topk");const a=n.data.get(i.dataId).values,[l,c]=U0e(a,i.shape,i.dtype,s,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const J2t={kernelName:X8,backendName:"cpu",kernelFunc:Z2t};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2t(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=n,[u,d,f,h]=i.shape,[p,v]=c??[d,f],g=[u,p,v,h],m=on(i.shape),y=m[0],x=m[1],S=m[2],_=on(g),C=_[0],T=_[1],A=_[2],M=eo(i.dtype,it(g));M.fill(l);const E=r.data.get(i.dataId).values,P=r.data.get(s.dataId).values;for(let F=0;F<u;++F){const $=s.shape[0]===1?P:P.subarray(F*8,F*8+8);for(let O=0;O<p;++O)for(let z=0;z<v;++z)for(let X=0;X<h;++X){let D;const B=$[6]*z+$[7]*O+1;if(B===0)continue;const V=($[0]*z+$[1]*O+$[2])/B,W=($[3]*z+$[4]*O+$[5])/B,j=UJ(V,f,a),J=UJ(W,d,a);switch(o){case"nearest":D=s_t(E,d,f,y,x,S,F,J,j,X,l);break;case"bilinear":D=o_t(E,d,f,y,x,S,F,J,j,X,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const Q=F*C+O*T+z*A+X;M[Q]=D}return r.makeTensorInfo(g,i.dtype,M)}return{dataId:r.write(M,g,i.dtype),shape:i.shape,dtype:i.dtype}}const e_t={kernelName:q8,backendName:"cpu",kernelFunc:Q2t};function UJ(t,e,n){switch(n){case"reflect":return t_t(t,e);case"wrap":return n_t(t,e);case"nearest":return i_t(t,e);case"constant":default:return r_t(t)}}function t_t(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return og(0,n,e-1)}function n_t(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return og(0,n,e-1)}function r_t(t,e){return t}function i_t(t,e){return og(0,t,e-1)}function Z1(t,e,n,r,i,s,o,a,l,c,u){const d=o*r+a*i+l*s+c;return 0<=a&&a<e&&0<=l&&l<n?t[d]:u}function s_t(t,e,n,r,i,s,o,a,l,c,u){const d=Math.round(a),f=Math.round(l);return Z1(t,e,n,r,i,s,o,d,f,c,u)}function o_t(t,e,n,r,i,s,o,a,l,c,u){const d=Math.floor(a),f=Math.floor(l),h=d+1,p=f+1,v=(p-l)*Z1(t,e,n,r,i,s,o,d,f,c,u)+(l-f)*Z1(t,e,n,r,i,s,o,d,p,c,u),g=(p-l)*Z1(t,e,n,r,i,s,o,h,f,c,u)+(l-f)*Z1(t,e,n,r,i,s,o,h,p,c,u);return(h-a)*v+(a-d)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a_t(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;Kt(s,"unique");const o=r.data.get(s.dataId).values,{outputValues:a,outputShape:l,indices:c}=z0e(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const l_t={kernelName:Y8,backendName:"cpu",kernelFunc:a_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c_t(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i.shape.length,a=i.shape[s],l=new Array(o-1);let c=0;for(let h=0;h<o;h++)h!==s&&(l[c++]=i.shape[h]);const u=new Array(o).fill(0),d=i.shape.slice();d[s]=1;const f=new Array(a);for(let h=0;h<f.length;h++){u[s]=h;const p=yg({inputs:{x:i},backend:n,attrs:{begin:u,size:d}});f[h]=zr({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return f}const u_t={kernelName:j3,backendName:"cpu",kernelFunc:c_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d_t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:o}=r;Kt(i,"unsortedSegmentSum");const a=i.shape.length,l=s.shape.length,c=[],u=[],d=a-l;let f=s;for(let p=0;p<d;++p){const v=uk({inputs:{input:f},backend:n,attrs:{dim:p+1}});f=v,u.push(v)}for(let p=0;p<o;++p){const v=ep(p,"int32"),g=n.makeTensorInfo([],"int32",v),m=n0e({inputs:{a:g,b:f},backend:n}),y=Oh({inputs:{x:m},backend:n,attrs:{dtype:"float32"}}),x=gP({inputs:{a:y,b:i},backend:n}),S=O_({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});c.push(S),u.push(g),u.push(m),u.push(y),u.push(x),u.push(S)}const h=nve({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const f_t={kernelName:X3,backendName:"cpu",kernelFunc:d_t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h_t=[a1t,zyt,c1t,d1t,Xyt,h1t,m1t,v1t,x1t,w1t,_1t,T1t,M1t,I1t,P1t,D1t,O1t,B1t,z1t,s1t,W1t,H1t,X1t,Yyt,Y1t,Hyt,Zyt,Z1t,Vyt,Q1t,tbt,nbt,ibt,obt,lbt,ubt,fbt,pbt,gbt,ybt,bbt,Sbt,Cbt,Ebt,Mbt,kbt,Rbt,Nbt,$bt,Dbt,Lbt,Fbt,zbt,Jxt,Wbt,Jyt,Zbt,Qyt,Jbt,txt,iwt,swt,awt,rxt,sxt,cwt,dwt,hwt,mwt,axt,cxt,Wyt,vwt,ebt,xwt,wwt,_wt,Qxt,dxt,hxt,Twt,mxt,Mwt,Iwt,Pwt,Dwt,Owt,Bwt,Uwt,vxt,Vwt,Gwt,jwt,qwt,Kwt,Jwt,eSt,xxt,nSt,sSt,lSt,wxt,_xt,dSt,pSt,vSt,Txt,xSt,wSt,SSt,rve,ESt,t1t,Axt,ASt,ISt,PSt,$St,Gyt,e5,LSt,n1t,r1t,i1t,FSt,USt,VSt,GSt,jSt,XSt,YSt,Lxt,ZSt,n2t,i2t,l2t,Fxt,u2t,f2t,p2t,Bxt,oSt,v2t,x2t,w2t,_2t,T2t,M2t,k2t,R2t,Vxt,P2t,Gxt,jxt,$2t,L2t,F2t,U2t,V2t,Kxt,Bbt,G2t,j2t,q2t,K2t,J2t,e_t,Ext,l_t,u_t,f_t,bSt];for(const t of h_t)Ufe(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const im={},CE={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function p_t(t,e){im[t]=e}function Zc(t,e){if(!(t in im)||e!=null){const r=g_t(t,e);if(r!==null)im[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=im[t];return n==null||n.isContextLost()?(delete im[t],Zc(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),im[t])}function m_t(t){if(!Qe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function g_t(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??m_t(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete im[t]},!1),Qe().getBool("SOFTWARE_WEBGL_ENABLED")&&(CE.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",CE)||n.getContext("experimental-webgl",CE):n.getContext("webgl2",CE)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var vS;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(vS||(vS={}));var sl;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(sl||(sl={}));var Rs;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Rs||(Rs={}));function F_(t,e){return[e,t]}function v_t(t,e){return t*e}function TE(t){const e=it(t),n=Math.ceil(e/4);return SF(n)}function yx(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function y_t(t,e){const[n,r]=yx(t,e);return n*r*4}function zW(t,e){const n=t;let r,i,s,o,a,l,c,u,d,f;return Qe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,s=n.RGBA16F,o=n.RGBA32F,a=n.RED,c=4,u=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,s=t.RGBA,o=n.RGBA,a=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bt(t,e){const n=e();return Qe().getBool("DEBUG")&&x_t(t),n}function x_t(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+__t(t,e))}const b_t=596e-10,w_t=65504;function S_t(t){return!!(Qe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||b_t<Math.abs(t)&&Math.abs(t)<w_t)}function __t(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function EE(t,e){return xf(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function C_t(t,e){const n=xf(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Bt(t,()=>t.shaderSource(n,e)),Bt(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function T_t(t,e){const n=xf(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Bt(t,()=>t.shaderSource(n,e)),Bt(t,()=>t.compileShader(n)),Qe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw ive(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const E_t=/ERROR: [0-9]+:([0-9]+):/g;function ive(t,e){const n=E_t.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),s=i.length.toString().length+2,o=i.map((d,f)=>Wv((f+1).toString(),s)+d);let a=0;for(let d=0;d<o.length;d++)a=Math.max(o[d].length,a);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Wv(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function M_t(t){return xf(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function A_t(t,e){if(Bt(t,()=>t.linkProgram(e)),!Qe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function rL(t,e){if(Bt(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function k_t(t,e){const n=xf(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Bt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Bt(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function I_t(t,e){const n=xf(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Bt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Bt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function R_t(t){return xf(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function P_t(t,e){const n=Qe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function N_t(t){return xf(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function zJ(t,e,n,r,i,s,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(Bt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Bt(t,()=>t.vertexAttribPointer(a,i,t.FLOAT,!1,s,o)),Bt(t,()=>t.enableVertexAttribArray(a)),!0)}function $_t(t,e,n){B_t(t,n),Bt(t,()=>t.activeTexture(t.TEXTURE0+n)),Bt(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function D_t(t,e,n){return xf(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function L_t(t,e,n){return t.getUniformLocation(e,n)}function O_t(t,e,n,r){Bt(t,()=>$_t(t,e,r)),Bt(t,()=>t.uniform1i(n,r))}function iL(t,e,n){Bt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Bt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function VJ(t,e){Bt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Bt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function ME(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+F_t(t,e))}function F_t(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function xf(t,e,n){const r=Bt(t,()=>e());if(r==null)throw new Error(n);return r}function B_t(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Ry(t,e=2){return it(t.slice(0,t.length-e))}function Py(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function AE(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Ry(t),...Py(t)]),e}function U_t(t,e=!1){let n=Qe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Qe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Qe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?i8(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Qh(t).newShape);let i=it(t),s=null;t.length<=1&&i<=n?s=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const o=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||o)if(e){const a=Ry(t);let l=2,c=2;t.length&&([l,c]=Py(t)),i=a*(l/2)*(c/2),s=SF(i).map(u=>u*2)}else s=SF(i);return s}function kE(t){return t%2===0}function fk(t,e){if(t=t.slice(-2),e=e.slice(-2),wr(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||kE(n)&&kE(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&kE(t[0])&&kE(e[0])}let sL,oL;function z_t(t){if(sL==null){const e=Zc(t);sL=e.getParameter(e.MAX_TEXTURE_SIZE)}return sL}function V_t(t){if(oL==null){const e=Zc(t);oL=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,oL)}function W_t(t){if(t===0)return 0;let e;const n=Zc(t);return Xl(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Xl(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Xl(t,e){return t.getExtension(e)!=null}function WJ(t){try{if(Zc(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function G_t(t){if(t===0)return!1;const e=Zc(t);if(t===1){if(!Xl(e,"OES_texture_float"))return!1}else if(!Xl(e,"EXT_color_buffer_float"))return!1;return n5(e)}function H_t(t){if(t===0)return!1;const e=Zc(t);if(t===1){if(!Xl(e,"OES_texture_float")||!Xl(e,"WEBGL_color_buffer_float"))return!1}else{if(Xl(e,"EXT_color_buffer_float"))return n5(e);const r="EXT_color_buffer_half_float";if(Xl(e,r)){const i=e.getExtension(r);return j_t(e,i)}return!1}return n5(e)}function n5(t){const e=zW(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,i=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,i,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),o}function j_t(t,e){const n=zW(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const i=1,s=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,i,s,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function X_t(t){return t!==2?!1:Zc(t).fenceSync!=null}function B_(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&ue(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jt=Qe();Jt.registerFlag("HAS_WEBGL",()=>Jt.getNumber("WEBGL_VERSION")>0);Jt.registerFlag("WEBGL_VERSION",()=>WJ(2)?2:WJ(1)?1:0);Jt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Jt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Jt.get("WEBGL_VERSION")===2);Jt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Jt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Jt.registerFlag("WEBGL_PACK",()=>Jt.getBool("HAS_WEBGL"));Jt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Jt.getBool("WEBGL_PACK"));Jt.registerFlag("WEBGL_PACK_CLIP",()=>Jt.getBool("WEBGL_PACK"));Jt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Jt.getBool("WEBGL_PACK"));Jt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Jt.getBool("WEBGL_PACK"));Jt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Jt.getBool("WEBGL_PACK"));Jt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Jt.getBool("WEBGL_PACK"));Jt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Jt.getBool("WEBGL_PACK"));Jt.registerFlag("WEBGL_PACK_REDUCE",()=>Jt.getBool("WEBGL_PACK"));Jt.registerFlag("WEBGL_LAZILY_UNPACK",()=>Jt.getBool("WEBGL_PACK"));Jt.registerFlag("WEBGL_CONV_IM2COL",()=>Jt.getBool("WEBGL_PACK"));Jt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Jt.getBool("WEBGL_PACK"));Jt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>z_t(Jt.getNumber("WEBGL_VERSION")));Jt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>V_t(Jt.getNumber("WEBGL_VERSION")));Jt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Jt.getNumber("WEBGL_VERSION");return t===0?0:W_t(t)});Jt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Jt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!rhe());Jt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>G_t(Jt.getNumber("WEBGL_VERSION")));Jt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Jt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Jt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Jt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>H_t(Jt.getNumber("WEBGL_VERSION")));Jt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>X_t(Jt.getNumber("WEBGL_VERSION")));Jt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Jt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Jt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Jt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>rhe()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Jt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Jt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Jt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Jt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Jt.registerFlag("WEBGL_EXP_CONV",()=>!1);Jt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Jt.getBool("IS_TEST"));Jt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Jt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Jt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Jt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lo(){let t,e,n,r,i,s,o,a,l,c;return Qe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",o="out vec4 outputColor;",a=Qe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gg(t,e,n="index"){const r=on(e);return r.map((i,s)=>{const o=`int ${t[s]} = ${n} / ${i}`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${i}`:`index -= ${t[s]} * ${i}`;return`${o}; ${a};`}).join("")}function vP(t,e,n="index"){const r=on(e);return r.map((i,s)=>{const o=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${o}; ${a};`}).join("")}function q_t(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let s=n-3;s>=0;--s)i[s]=`(${i[s+1]} * ${r[s+1]})`;return i}function Y_t(t,e,n="index"){const r=t.map((s,o)=>o),i=q_t(r,e);return i.map((s,o)=>{const a=`int ${t[o]} = ${n} / ${i[o]}`,l=o===i.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${i[o]}`:`index -= ${t[o]} * ${i[o]}`;return`${a}; ${l};`}).join("")}function VW(t){const e=on(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function WW(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const sve=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:ove}=Lmt;function K_t(t,e,n){const r=[];if(t.forEach(h=>{const p=it(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:v}=GW(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(v.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const i=r.join(`
`),s=t.map(h=>Z_t(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=Lo(),l=eCt(a);let c,u,d=rCt(a);return e.isPacked?(c=J_t(e.logicalShape,o,n.enableShapeUniforms),u=nCt(a)):(c=Q_t(e.logicalShape,o,n.enableShapeUniforms),u=tCt(a)),n.packedInputs&&(d+=aCt),[d,l,u,i,c,s,n.userCode].join(`
`)}function xx(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return xCt(t,e);case 1:return wCt(t,e);case 2:return _Ct(t,e);case 3:return TCt(t,e);case 4:return MCt(t,e);case 5:return ACt(t);case 6:return kCt(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function ave(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return yCt(t);case 1:return bCt(t,e);case 2:return SCt(t,e);case 3:return CCt(t,e);default:return ECt(t,e)}}function Z_t(t,e,n=!1,r){let i="";n?i+=ave(t,r):i+=xx(t,r);const s=t.shapeInfo.logicalShape,o=e.logicalShape;return s.length<=o.length&&(n?i+=ICt(t,e):i+=RCt(t,e)),i}function J_t(t,e,n){switch(t.length){case 0:return lve();case 1:return lCt(t,e,n);case 2:return gCt(t,e,n);case 3:return uCt(t,e,n);default:return fCt(t,e,n)}}function Q_t(t,e,n){switch(t.length){case 0:return lve();case 1:return cCt(t,e,n);case 2:return vCt(t,e,n);case 3:return dCt(t,e,n);case 4:return hCt(t,e,n);case 5:return pCt(t,e);case 6:return mCt(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function eCt(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function tCt(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function nCt(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function rCt(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${iCt}
    ${sCt}
    ${oCt}
  `}const iCt=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,sCt=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,oCt=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,aCt=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function lve(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function lCt(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function cCt(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function uCt(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function dCt(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${vP(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Gg(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function fCt(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2);let o=s,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function hCt(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${vP(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Gg(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function pCt(t,e){const n=Gg(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function mCt(t,e){const n=Gg(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function gCt(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(wr(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function vCt(t,e,n){return wr(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Hg(t){return`offset${t}`}function yCt(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Lo();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function xCt(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,s]=t.shapeInfo.texShape;if(i===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Hg(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function bCt(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,s=Lo();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function wCt(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${bx(t)}
      }
    `;const i=t.shapeInfo.texShape,s=i[0],o=i[1];if(o===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Hg(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function SCt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=s[0],a=s[1],l=Lo();if(s!=null&&wr(n,s))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function _Ct(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&wr(n,s)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=s[0],h=s[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=Qh(n),l=o;if(l.length<n.length){const f=wx(t,l),h=["row","col"];return`
      ${xx(f,e)}
      float ${i}(int row, int col) {
        return ${i}(${Sx(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${bx(t)}
      }
    `;const c=s[0],u=s[1],d=Hg(r);return u===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function CCt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],p=wx(t,f),v=["b","row","col"];return`
        ${ave(p,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${Sx(v,h)});
        }
      `}const a=Lo();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],c=o[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function TCt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=Qh(n),c=a;if(c.length<n.length){const v=wx(t,c),g=["row","col","depth"];return`
        ${xx(v,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${Sx(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${o}, 1)));
        ${bx(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],f=u[1],h=t.shapeInfo.flatOffset;if(f===s&&h==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===o&&h==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=Hg(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function ECt(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=Lo();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,o=s.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(s[o-1]/2);let f=d*Math.ceil(s[o-2]/2),h="int b, int row, int col",p=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let v=2;v<o-1;v++)h=`int b${v}, `+h,f*=s[o-v-1],p=`b${v} * ${f} + `+p;return`
    vec4 ${r}(${h}) {
      int index = ${p};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function MCt(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],o=n[2]*s,a=n[1]*o,{newShape:l,keptDims:c}=Qh(n);if(l.length<n.length){const y=wx(t,l),x=["row","col","depth","depth2"];return`
      ${xx(y,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${Sx(x,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${s}, 1)));
        ${bx(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1],p=`int stride2 = ${r}Shape[3];`,v=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${p}
        ${v}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===s&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const m=Hg(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${v}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${m});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${m});
      return sampleTexture(${r}, uv);
    }
  `}function ACt(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],s=e[3]*i,o=e[2]*s,a=e[1]*o,{newShape:l,keptDims:c}=Qh(e);if(l.length<e.length){const v=wx(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${xx(v)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Sx(g,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${s}, ${i})) +
          depth3;
        ${bx(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1];if(h===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${s}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Hg(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${s} +
          depth2 * ${i} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function kCt(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:s}=Qh(e);if(i.length<e.length){const g=wx(t,i),m=["row","col","depth","depth2","depth3","depth4"];return`
      ${xx(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Sx(m,s)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${bx(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],p=f[1];if(p===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const v=Hg(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${v};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function bx(t){const e=t.name,n=it(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function ICt(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=ove(t.shapeInfo.logicalShape,e.logicalShape),l=Ir(o),c=o-s;let u;const d=["x","y","z","w","u","v"];s===0?u="":o<2&&a.length>=1?u="coords = 0;":u=a.map(y=>`coords.${d[y+c]} = 0;`).join(`
`);let f="";o<2&&s>0?f="coords":f=t.shapeInfo.logicalShape.map((y,x)=>`coords.${d[x+c]}`).join(", ");let h="return outputValue;";const v=it(t.shapeInfo.logicalShape)===1,m=it(e.logicalShape)===1;if(s===1&&!v&&!m)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(v&&!m)o===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const y=s-2,x=s-1;a.indexOf(y)>-1&&a.indexOf(x)>-1?h="return vec4(outputValue.x);":a.indexOf(y)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(x)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${f});
      ${h}
    }
  `}function RCt(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",s=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&wr(o,s))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Ir(l),u=ove(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let f;const h=["x","y","z","w","u","v"];a===0?f="":l<2&&u.length>=1?f="coords = 0;":f=u.map(v=>`coords.${h[v+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((v,g)=>`coords.${h[g+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${f}
      return get${r}(${p});
    }
  `}function Ir(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function GW(t,e,n){const{newShape:r,keptDims:i}=Qh(e),s=e.length,o=t&&s===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&s>1&&!wr(e,n)&&r.length<s||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:i}}function wx(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Sx(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PCt(t,e,n,r){const i=n.map((u,d)=>{const f={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(f.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),s=i.map(u=>u.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=K_t(i,o,e),l=T_t(t.gl,a),c=t.createProgram(l);return Qe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:o},cve(t,e,c)))}function cve(t,e,n){const r=[],i=[];let s,o,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),Qe().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const f={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(f.shape=t.getUniformLocation(n,`${d}Shape`,u),f.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),r.push(f)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),o=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)i.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:o}}function GJ(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,s=e[r],o=s.shape;if(!wr(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(n.isUniform&&s.isUniform)return;const a=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!wr(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function NCt(t,e,n,r,i){e.program.enableShapeUniforms||(GJ(e.inShapeInfos,n),GJ([e.outShapeInfo],[r]));const s=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,o[0],o[1]):t.setOutputMatrixTexture(s.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),Qe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:f,texShape:h}=e.variablesLocations[l];if(f){const{uniformShape:p}=GW(e.program.packedInputs,c.shape,c.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(f,new Int32Array(p));break;case 2:t.gl.uniform2iv(f,new Int32Array(p));break;case 3:t.gl.uniform3iv(f,new Int32Array(p));break;case 4:t.gl.uniform4iv(f,new Int32Array(p));break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(it(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let p=c.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(u,p)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=on(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=i[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function $Ct(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=GW(t.packedInputs,o.shape,l);let f="",h="",p="";if(u.length===1&&t.packedInputs){const _=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${_[0]>1}_${_[1]>1}`}else if(u.length===2&&!t.packedInputs)h=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const _=on(u);p=`${_[0]===l[1]}_${_[_.length-1]===l[1]}`}const v=o.shape.length,g=u.length===2&&wr(o.shape,l),m=it(o.shape)===1,y=Cy(o.shape,n.shape),x=!t.packedInputs&&v===n.shape.length&&wr(l,n.texData.texShape),S=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${v}_${x}_${c?d:""}_${u.length}_${m}_${y}_${g}_${f}_${h}_${p}_${S}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const i=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+i+`${Qe().getNumber("WEBGL_VERSION")}`,s}function so(t){return Qe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DCt{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=vS.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Lo();this.outputShape=e,this.enableShapeUniforms=so(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?vP(["r","c","d"],e):Gg(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LCt{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=vS.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Lo();this.outputShape=e,this.enableShapeUniforms=so(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?vP(["r","c","d"],e):Gg(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OCt{constructor(e){this.variableNames=["A"],this.outTexUsage=sl.DOWNLOAD;const n=Lo();this.outputShape=e,this.userCode=`
      ${sve}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FCt{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=sl.DOWNLOAD;const n=Lo();this.outputShape=e,this.userCode=`
      ${sve}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BCt={R:0,G:1,B:2,A:3};class HJ{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=Lo();this.outputShape=e,this.enableShapeUniforms=so(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${BCt[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?WW():VW(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UCt{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Lo();this.outputShape=e,this.enableShapeUniforms=so(this.outputShape.length);let i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;i+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?WW():VW(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zCt(t){const e=Lo(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return C_t(t,n)}function VCt(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return k_t(t,e)}function WCt(t){const e=new Uint16Array([0,1,2,2,1,3]);return I_t(t,e)}function U_(t,e,n,r,i,s){P_t(e,n);const o=R_t(t),a=t.TEXTURE_2D;return Bt(t,()=>t.bindTexture(a,o)),Bt(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Bt(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Bt(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Bt(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),Qe().getNumber("WEBGL_VERSION")===1?Bt(t,()=>t.texImage2D(a,0,r,e,n,0,i,s,null)):Bt(t,()=>t.texStorage2D(a,1,r,e,n)),Bt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function uve(t){return t.internalFormatFloat}function GCt(t,e,n,r){const[i,s]=F_(e,n);return U_(t,i,s,uve(r),r.textureFormatFloat,t.FLOAT)}function dve(t){return t.internalFormatHalfFloat}function HCt(t,e,n,r){const[i,s]=F_(e,n);return U_(t,i,s,dve(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function fve(t){return t.downloadTextureFormat}function jCt(t,e,n,r){const[i,s]=F_(e,n);return U_(t,i,s,fve(r),t.RGBA,t.UNSIGNED_BYTE)}function hve(t){return t.internalFormatPackedFloat}function XCt(t,e,n,r){const[i,s]=yx(e,n);return U_(t,i,s,hve(r),t.RGBA,t.FLOAT)}function pve(t){return t.internalFormatPackedHalfFloat}function qCt(t,e,n,r){const[i,s]=yx(e,n);return U_(t,i,s,pve(r),t.RGBA,r.textureTypeHalfFloat)}function YCt(t,e,n){return Bt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),zJ(t,e,"clipSpacePos",n,3,20,0)&&zJ(t,e,"uv",n,2,20,12)}function KCt(t,e,n,r,i,s){Bt(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;i instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=s.internalFormatPackedFloat),o.set(i),Qe().getNumber("WEBGL_VERSION")===2?Bt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):Bt(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),Bt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function ZCt(t,e,n){Bt(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?Qe().getNumber("WEBGL_VERSION")===2?Bt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Bt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):Qe().getNumber("WEBGL_VERSION")===2?Bt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Bt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Bt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function JCt(t,e,n,r){const i=t.createBuffer();Bt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const a=4*4*e*n;return Bt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Bt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Bt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function QCt(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function eTt(t,e,n,r){const[i,s]=F_(e,n),o=4,a=new Uint8Array(v_t(e*n,o));return Bt(t,()=>t.readPixels(0,0,i,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function tTt(t,e,n,r,i,s,o,a){const l=t,c=new Float32Array(y_t(s,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function nTt(t,e,n){const r=new Float32Array(e*n*4);return Bt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aL{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=Qe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,p_t(n,e)):this.gl=Zc(n),e=this.gl,Qe().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>Bt(s,()=>s.createVertexArray()),this.bindVertexArray=o=>Bt(s,()=>s.bindVertexArray(o)),this.deleteVertexArray=o=>Bt(s,()=>s.deleteVertexArray(o)),this.getVertexArray=()=>Bt(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Bt(e,()=>s.createVertexArrayOES()),this.bindVertexArray=o=>Bt(e,()=>s.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Bt(e,()=>s.deleteVertexArrayOES(o)),this.getVertexArray=()=>Bt(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),Qe().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=EE(this.gl,s),Xl(this.gl,o))this.textureHalfFloatExtension=EE(this.gl,o);else if(Qe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Xl(this.gl,i))this.colorBufferHalfFloatExtension=EE(this.gl,i);else if(Qe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Xl(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Xl(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=VCt(this.gl),this.indexBuffer=WCt(this.gl),this.framebuffer=N_t(this.gl),this.textureConfig=zW(this.gl,this.textureHalfFloatExtension)}get debug(){return Qe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Bt(e,()=>e.finish()),Bt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Bt(e,()=>e.deleteFramebuffer(this.framebuffer)),Bt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Bt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Bt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),GCt(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),HCt(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),jCt(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),ZCt(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),KCt(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),qCt(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),XCt(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(VJ(this.gl,this.framebuffer),this.outputTexture=null),Bt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>eTt(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,s,o){return tTt(this.gl,e,n,r,i,s,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return QCt(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=JCt(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(Qe().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,s=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=i.clientWaitSync(s,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},n=s}else Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>nTt(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=zCt(n));const r=M_t(n);Bt(n,()=>n.attachShader(r,this.vertexShader)),Bt(n,()=>n.attachShader(r,e)),A_t(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&rL(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Bt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),YCt(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Bt(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&rL(this.gl,this.program),Bt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?D_t(this.gl,e,n):L_t(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Bt(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),O_t(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,s]=yx(n,r);this.setOutputMatrixTextureDriver(e,i,s)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&rL(this.gl,this.program),ME(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Bt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Bt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=EE(this.gl,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await IZ(()=>this.disposed||this.isQueryAvailable(e,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=rTt(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in Qe().platform&&(r=Qe().platform.setTimeoutCustom.bind(Qe().platform)),IZ(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),iL(this.gl,e,this.framebuffer),this.debug&&ME(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(iL(this.gl,this.outputTexture,this.framebuffer),this.debug&&ME(this.gl)):VJ(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;iL(i,e,this.framebuffer),this.debug&&ME(i),this.outputTexture=e,Bt(i,()=>i.viewport(0,0,n,r)),Bt(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),Bt(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function rTt(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:iTt,bincountImpl:mve,bincountReduceImpl:sTt,bitwiseAndImpl:oTt,castImpl:aTt,ceilImpl:lTt,concatImpl:cTt,equalImpl:uTt,expImpl:dTt,expm1Impl:fTt,floorImpl:hTt,gatherNdImpl:pTt,gatherV2Impl:mTt,greaterImpl:gTt,greaterEqualImpl:vTt,lessImpl:yTt,lessEqualImpl:xTt,linSpaceImpl:bTt,logImpl:wTt,maxImpl:STt,maximumImpl:_Tt,minimumImpl:CTt,multiplyImpl:TTt,negImpl:ETt,notEqualImpl:MTt,prodImpl:ATt,raggedGatherImpl:kTt,raggedRangeImpl:ITt,raggedTensorToTensorImpl:RTt,rangeImpl:PTt,rsqrtImpl:NTt,scatterImpl:$Tt,sigmoidImpl:DTt,simpleAbsImpl:gve,sliceImpl:LTt,sparseFillEmptyRowsImpl:OTt,sparseReshapeImpl:FTt,sparseSegmentReductionImpl:vve,sqrtImpl:BTt,staticRegexReplaceImpl:UTt,stridedSliceImpl:zTt,stringNGramsImpl:VTt,stringSplitImpl:WTt,stringToHashBucketFastImpl:GTt,subImpl:HTt,tileImpl:jTt,topKImpl:XTt,transposeImpl:HW,uniqueImpl:qTt}=Zxt;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yve(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Mo(t,e){return e===1?[t]:yve(t,e)}function YTt(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KTt{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=so(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Mo("rc",this.rank),r=Ir(this.rank),i=this.getOutOfBoundsCondition(n),s=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)s=`${e[e.length-1-o]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xve{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=so(this.outputShape.length);let r="";for(let i=0;i<4;i++){let s="thisRC = rc;";i%2===1&&(s+="thisRC.z += 1;"),i>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${ZTt(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?WW():VW(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function ZTt(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?Y_t(["r","c","d"],"inputShape"):Gg(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JTt{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=XJ(n,r),s=qJ(e,i,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const o=jJ(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let a;return i===Rs.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Rs.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Rs.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Rs.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Rs.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const s=XJ(r,i),o=qJ(n,s,i);o in this.freeTextures||(this.freeTextures[o]=[]);const a=jJ(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=Qe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function QTt(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function jJ(t,e,n,r,i){const s=eEt(e,r);let o;if(i){const[l,c]=yx(t[0],t[1]);o=l*c}else{const[l,c]=F_(t[0],t[1]);o=l*c}const a=QTt(n,s);return o*a}function eEt(t,e){switch(t){case Rs.PACKED_2X2_FLOAT32:return hve(e);case Rs.PACKED_2X2_FLOAT16:return pve(e);case Rs.UNPACKED_FLOAT32:return uve(e);case Rs.UNPACKED_FLOAT16:return dve(e);case Rs.PACKED_4X1_UNSIGNED_BYTE:return fve(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function tEt(t){return Qe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Rs.PACKED_2X2_FLOAT32:Rs.UNPACKED_FLOAT32:t?Rs.PACKED_2X2_FLOAT16:Rs.UNPACKED_FLOAT16}function XJ(t,e){if(t===sl.UPLOAD)return Rs.PACKED_2X2_FLOAT32;if(t===sl.RENDER||t==null)return tEt(e);if(t===sl.DOWNLOAD||t===sl.PIXELS)return Rs.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function qJ(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iu{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=so(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const hc="if (isnan(x)) return x;",nEt="return x;",YJ="return abs(x);",rEt="return (x >= 0.0) ? x : (exp(x) - 1.0);",iEt=hc+`
  return (x < 0.0) ? 0.0 : x;
`,sEt=hc+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Gf="return x;",oEt="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aEt="return x;",lEt=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,cEt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,uEt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,dEt="return 1.0 / (1.0 + exp(-1.0 * x));";class rh{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=so(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fEt{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=so(this.outputShape.length);const n=e.length,r=Mo("rc",n),i=Ir(n),s=YTt(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hEt=Whe,pEt=1e-7,mEt=1e-4,IE={};function gEt(t){return t in IE||(IE[t]={}),IE[t]}const vEt=Qe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),yEt=600;function xEt(){return Qe().global.screen==null?1024:Qe().global.screen.height*Qe().global.screen.width*window.devicePixelRatio*yEt/1024/1024}class yP extends r8{nextDataId(){return yP.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Qe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof aL)n=e;else{const r=Zc(Qe().getNumber("WEBGL_VERSION"),e);n=new aL(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Zc(Qe().getNumber("WEBGL_VERSION"));n=new aL(r),this.binaryCache=gEt(Qe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new JTt(this.gpgpu),this.numMBBeforeWarning=xEt(),this.texData=new ffe(this,gu())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,s,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,s]},l.texShape=[i,s];const c=AE(n),u=new HJ(c,!1,o),d=this.runWebGLProgram(u,[a],r,[[i,s]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((Qe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Qe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:sl.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,s){if(Qe().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:sl.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:s,slice:o,shape:a,isPacked:l}=n;if(o!=null){let f;l?f=new rh(a,Gf):f=new Iu(a,Gf);const h=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:i}],i),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=jo());let d;if(i==="complex64"){const f=this.readSync(s.real.dataId),h=this.readSync(s.imag.dataId);d=uf(f,h)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=jo()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(v=>p.push(v))}const n=this.texData.get(e),{values:r,shape:i,slice:s,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(s!=null){let p;l?p=new rh(i,Gf):p=new Iu(i,Gf);const v=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:o}],o),g=this.read(v.dataId);return this.disposeIntermediateTensorInfo(v),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(Qe().getBool("DEBUG")&&!Qe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Qe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(o!=="complex64"&&Qe().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const p=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(p.texture.texture,...TE(i))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),v=p[0],g=p[1];d=uf(v,g)}else if(c==null)d=this.getValuesFromTexture(e);else{const p=it(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,p)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const p=this.gpgpu.gl;Bt(p,()=>p.deleteBuffer(c))}const f=this.convertAndCacheOnCPU(e,d),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&gu().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:s,slice:o,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let h;l?h=new rh(s,Gf):h=new Iu(s,Gf);const p=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:a}],a),v=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),v}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=gu().makeTensorFromTensorInfo(u),f=this.texData.get(u.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>Ph(i));return Hn(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Hn(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!S_t(r))throw Qe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),s=it(n);if(Qe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),h=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...TE(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(f),p}const o=Qe().getBool("WEBGL_PACK")&&i===!0,a=o?AE(n):n,l=o?new FCt(a):new OCt(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=ag(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=ag(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);a.kernelMs=Flt(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:o[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:jo(),endMs:null}}endTimer(e){return Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=jo(),e)}async getQueryTime(e){if(Qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:s,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,s,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=vEt){return Qe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&it(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){tl("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return hEt(e.shape,n)}packedUnaryOp(e,n,r){const i=new rh(e.shape,n),s=this.compileAndRun(i,[e],r);return gu().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=gve(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,YJ,e.dtype);const n=new Iu(e.shape,YJ),r=this.compileAndRun(n,[e]);return gu().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&_2(r[0])){const s=r.map(o=>yh(o));i=this.write(s,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return gu().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new fEt(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new KTt(e.shape),r=!0;return this.runWebGLProgram(n,[e],e.dtype,null,r)}packedReshape(e,n){const r=[Ry(e.shape),...Py(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},s=[Ry(n),...Py(n)],o=new xve(s,r),a=!0,l=[r],c=this.runWebGLProgram(o,[i],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:s,dtype:o}=r;if(n!=null){const f=it(s),h=n[0]*n[1]*4;ue(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=AE(s);let l;i?l=new LCt(a):l=new DCt(a);const c=!0,u=[n??TE(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,u,c,n);return{dtype:o,shape:s,dataId:d.dataId}}runWebGLProgram(e,n,r,i,s=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===vS.DENSE){const m=o??TE(e.outputShape);l.texShape=m.map(y=>y*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),it(a.shape)===0)return l.values=eo(a.dtype,0),a;const c=[],u=n.map(m=>{if(m.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let y=this.texData.get(m.dataId);if(y.texture==null){if(!e.packedInputs&&it(m.shape)<=Qe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:m.shape,texData:null,isUniform:!0,uniformValues:y.values};e.packedInputs&&(y.isPacked=!0,y.shape=m.shape)}if(this.uploadToGPU(m.dataId),!!y.isPacked!=!!e.packedInputs)m=y.isPacked?this.unpackTensor(m):this.packTensor(m),c.push(m),y=this.texData.get(m.dataId);else if(y.isPacked&&!fk(y.shape,m.shape)){const x=m,S=m.shape;m.shape=y.shape,m=this.packedReshape(m,S),c.push(m),y=this.texData.get(m.dataId),x.shape=S}return{shape:m.shape,texData:y,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},f=$Ct(e,u,d),h=this.getAndSaveBinary(f,()=>PCt(this.gpgpu,e,u,d)),p=this.activeTimers!=null;let v;p&&(v=this.startTimer()),Qe().get("ENGINE_COMPILE_ONLY")||NCt(this.gpgpu,h,u,d,i),c.forEach(m=>this.disposeIntermediateTensorInfo(m)),p&&(v=this.endTimer(v),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(v)}));const g=Qe().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const m=jo();m-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=m)}if(!Qe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const m=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),m}return a}compileAndRun(e,n,r,i,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Qe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ze(()=>{if(!Qe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Qe().getBool("DEBUG");Qe().set("DEBUG",!1);const n=this.abs(yr(1e-8)).dataSync()[0];if(Qe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?pEt:mEt}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:s,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const c=this.activeTimers!=null;let u;c&&(u=jo());let d=n.texShape;if(d==null&&(d=U_t(r,l),n.texShape=d),s!=null){const f=AE(r);let h,p=d[1],v=d[0];const g=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!g)&&([p,v]=yx(d[0],d[1])),l?h=new UCt(f,g):h=new HJ(f,g);const m=g?[v,p]:d,y=this.makeTensorInfo(m,i),x=this.texData.get(y.dataId);g?x.usage=sl.PIXELS:x.usage=sl.UPLOAD,x.texShape=m,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),p,v,s);const S=[[v,p]],_=!0,C=this.runWebGLProgram(h,[y],i,S,_),T=this.texData.get(C.dataId);n.texShape=T.texShape,n.isPacked=T.isPacked,n.usage=T.usage,Qe().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=T.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(y),c&&(this.uploadWaitMs+=jo()-u)}else{const f=this.acquireTexture(d,a,i,l);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=bEt(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*BA(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await lpe(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(ive(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:s,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=cve(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=s,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:s,width:o,channels:a}=e,l=gu().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(i,n,r,s,o,a);return gu().makeTensorFromDataId(c,n,r,l)}}yP.nextDataId=0;function bEt(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ihe()&&ahe("webgl",()=>new yP,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jW=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class xg{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=kn(n,r),this.enableShapeUniforms=so(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jg=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class _x{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=kn(n,r);const s=this.outputShape.length;this.enableShapeUniforms=so(s);let o="";if(i)if(s===0||it(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Ir(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Mo("coords",s);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $a(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const wEt={kernelName:G2,backendName:"webgl",kernelFunc:$a};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cp(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,s=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(s.dataId),a=$a({inputs:{x:r},backend:n}),l=$a({inputs:{x:i},backend:n});return o.complexTensorInfos={real:a,imag:l},s}const SEt={kernelName:v8,backendName:"webgl",kernelFunc:cp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bve="return (a < 0.) ? b * a : a;",wve=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function _Et(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:s}=r,o=n.makeTensorInfo([],"float32",ep(s,"float32")),a=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _x(wve,i.shape,o.shape):new xg(bve,i.shape,o.shape),l=n.runWebGLProgram(a,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const CEt={kernelName:m3,backendName:"webgl",kernelFunc:_Et};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sve="return (a < 0.) ? b * a : a;",_ve=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function TEt(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,s=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _x(_ve,r.shape,i.shape):new xg(Sve,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],"float32")}const EEt={kernelName:$3,backendName:"webgl",kernelFunc:TEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cx="if (isnan(x)) return x;";function ar({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:s})=>{const{x:o}=i,a=s,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const d=a.texData.get(o.dataId),f=n(d.values,l);return a.makeTensorInfo(o.shape,l,f)}const c=Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new rh(o.shape,e):u=new Iu(o.shape,t),a.runWebGLProgram(u,[o],l)}}function zs({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:s}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(r&&l.dtype==="complex64"){const p=u.texData.get(l.dataId),v=u.texData.get(c.dataId),[g,m]=[[p.complexTensorInfos.real,v.complexTensorInfos.real],[p.complexTensorInfos.imag,v.complexTensorInfos.imag]].map(x=>{const[S,_]=x,C={dataId:S.dataId,dtype:S.dtype,shape:l.shape},T={dataId:_.dataId,dtype:_.dtype,shape:c.shape},A=new xg(t,l.shape,c.shape);return u.runWebGLProgram(A,[C,T],Pa(S.dtype,_.dtype))}),y=cp({inputs:{real:g,imag:m},backend:u});return u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(m),y}const d=s||Pa(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&i!=null){const p=u.texData.get(l.dataId).values,v=u.texData.get(c.dataId).values,g=l.dtype==="string"?df(p):p,m=l.dtype==="string"?df(v):v,[y,x]=i(l.shape,c.shape,g,m,d),S=u.makeTensorInfo(x,d),_=u.texData.get(S.dataId);return _.values=y,S}const f=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return f?h=new _x(e,l.shape,c.shape,n):h=new xg(t,l.shape,c.shape),u.runWebGLProgram(h,[l,c],d)}}function yS(t,e=!1){if(t==="linear")return e?aEt:nEt;if(t==="relu")return e?cEt:iEt;if(t==="elu")return e?lEt:rEt;if(t==="relu6")return e?uEt:sEt;if(t==="prelu")return e?_ve:Sve;if(t==="leakyrelu")return e?wve:bve;if(t==="sigmoid")return e?dEt:oEt;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cve{constructor(e,n,r,i=!1,s=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=so(this.outputShape.length);const u=i?e[1]:e[2],d=Math.ceil(u/2),f=i?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",p=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",m="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,m="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let x="rc.x",S="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(S=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${S};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${v[0]});
          result += (${p[1]} * ${v[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${y}

        ${m}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KJ={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class ZJ{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=kn(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JJ="return a * b;";function XW(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=Pa(r.dtype,i.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),c=new ZJ(KJ.REAL,r.shape,i.shape),u=new ZJ(KJ.IMAG,r.shape,i.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],f=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(u,d,"float32"),p=cp({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([r,i])){const a=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[c,u]=TTt(r.shape,i.shape,a.values,l.values,s),d=n.makeTensorInfo(u,s),f=n.texData.get(d.dataId);return f.values=c,d}let o;return Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new _x(JJ,r.shape,i.shape):o=new xg(JJ,r.shape,i.shape),n.runWebGLProgram(o,[r,i],s)}const MEt={kernelName:Q2,backendName:"webgl",kernelFunc:XW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AEt(t,e,n){const r=[Ry(t.shape),...Py(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[Ry(e),...Py(e)],o=new xve(s,r),a=!0,l=[r],c=n.runWebGLProgram(o,[i],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:s}=r,o=n,a=it(i.shape),l=hfe(s,a),c=it(l);ue(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(i.dataId);return u.isPacked&&!fk(i.shape,l)&&!(u.texture!==null&&fk(u.shape,l))?AEt(i,l,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const kEt={kernelName:L3,backendName:"webgl",kernelFunc:kt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QJ{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${by(d)?d.toPrecision(2):d}, ones);`}let u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IEt{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:s,outSize:o}=e;this.outputShape=[i,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function REt(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=nP(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Xg(t,e,n,r){const i=REt(t.shape);let s=t;for(let o=0;o<i.length;o++){const{inSize:a,windowSize:l,outSize:c}=i[o];let u,d;n==="mean"?u=o===0?new QJ({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new QJ({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new IEt({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),d=s,s=r.runWebGLProgram(u,[s],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PEt{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const i=Ir(this.rank),s=NEt(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function NEt(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Et{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=Ir(this.rank),s=yve("rc",this.rank),o=new Array(this.rank);for(let u=0;u<n.length;u++)o[n[u]]=s[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xP(t,e,n){const r=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $Et(t.shape,e):new PEt(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DEt(t,e,n,r){const i=e,s=t.shape.length,o=qn(i,t.shape);let a=o;const l=fi(a,s),c=l!=null;let u=t;c&&(u=xP(t,l,r),a=Ni(a.length,s)),Us("sum",a,s);const[d,f]=_s(u.shape,a);let h=d;n&&(h=ji(d,o));const p=it(f),g=it(t.shape)/p,m=kt({inputs:{x:u},attrs:{shape:[g,p]},backend:r}),y=J8(t.dtype),x=Xg(m,y,"sum",r),S=kt({inputs:{x},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(x),c&&r.disposeIntermediateTensorInfo(u),S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bP(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r;return DEt(i,s,o,n)}const LEt={kernelName:V3,backendName:"webgl",kernelFunc:bP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Do(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:s}=r,o=n,a=i.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=i.shape[s[u]];let c;if(o.shouldExecuteOnCPU([i])){const d=o.texData.get(i.dataId).values,f=HW(d,i.shape,i.dtype,s,l);c=o.makeTensorInfo(l,i.dtype);const h=o.texData.get(c.dataId);h.values=f}else c=xP(i,s,o);return c}const OEt={kernelName:Gv,backendName:"webgl",kernelFunc:Do};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tve=1e3;function hk({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],f=r?e.shape[u-1]:e.shape[u-2],h=n?t.shape[c-1]:t.shape[c-2],p=r?e.shape[u-2]:e.shape[u-1],v=t.shape.slice(0,-2),g=e.shape.slice(0,-2),m=it(v),y=it(g),S=kn(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,p]);ue(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const _=n?[m,d,h]:[m,h,d],C=r?[y,p,f]:[y,f,p],T=kt({inputs:{x:t},backend:i,attrs:{shape:_}}),A=kt({inputs:{x:e},backend:i,attrs:{shape:C}}),M=[T,A],E=Math.max(m,y),P=n?T.shape[1]:T.shape[2],N=s!=null,F=o!=null,$=l==="leakyrelu",O=l!=null?yS(l,!0):null,z=N||F||$||O!=null;let X;if((h===1||p===1)&&P>Tve&&z===!1){let B=T,V=A;n&&(B=Do({inputs:{x:T},backend:i,attrs:{perm:[0,2,1]}}),M.push(B)),r&&(V=Do({inputs:{x:A},backend:i,attrs:{perm:[0,2,1]}}),M.push(V));const W=p!==1,j=p===1;let J=B;W&&(J=kt({inputs:{x:B},backend:i,attrs:{shape:[E,P,1]}}),M.push(J));const Q=p===1?2:1;let te=V;j&&(te=kt({inputs:{x:V},backend:i,attrs:{shape:[E,1,P]}}),M.push(te));const re=XW({inputs:{a:J,b:te},backend:i});X=bP({inputs:{x:re},backend:i,attrs:{axis:Q,keepDims:!0}}),M.push(re)}else{const B=Pa(t.dtype,e.dtype),V=new Cve(_,C,[E,h,p],n,r,N,O,F,$),W=[T,A];if(s!=null&&W.push(s),F&&W.push(o),$){const j=i.makeTensorInfo([],"float32",ep(a,"float32"));W.push(j),M.push(j)}X=i.runWebGLProgram(V,W,B)}const D=kt({inputs:{x:X},backend:i,attrs:{shape:S}});M.push(X);for(const B of M)i.disposeIntermediateTensorInfo(B);return D}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FEt(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return hk({a:i,b:s,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}const BEt={kernelName:UA,backendName:"webgl",kernelFunc:FEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eQ="return abs(x);";function UEt(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),o=gve(s.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let i;return Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new rh(r.shape,eQ):i=new Iu(r.shape,eQ),n.runWebGLProgram(i,[r],r.dtype)}const zEt={kernelName:YR,backendName:"webgl",kernelFunc:UEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VEt=hc+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,WEt=ar({opSnippet:VEt}),GEt={kernelName:C2,backendName:"webgl",kernelFunc:WEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HEt=hc+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,jEt=ar({opSnippet:HEt}),XEt={kernelName:T2,backendName:"webgl",kernelFunc:jEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tQ="return a + b;",qEt=zs({opSnippet:tQ,packedOpSnippet:tQ,supportsComplex:!0,cpuKernelImpl:iTt}),YEt={kernelName:fx,backendName:"webgl",kernelFunc:qEt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KEt{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZEt{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,o)=>`T${o}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const i=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vM(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return $a({inputs:{x:r[0]},backend:n});if(r.length>Qe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=vM({inputs:r.slice(0,l),backend:n}),u=vM({inputs:r.slice(l),backend:n});return vM({inputs:[c,u],backend:n})}const i=r.map(l=>l.dtype).reduce((l,c)=>Pa(l,c)),s=r.map(l=>l.shape),a=Qe().getBool("WEBGL_PACK")?new ZEt(r[0].shape,s):new KEt(r[0].shape,s);return n.runWebGLProgram(a,r,i)}const JEt={kernelName:u8,backendName:"webgl",kernelFunc:vM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QEt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=qn(s,i.shape);let c=l;const u=fi(c,a);let d=i;u!=null&&(d=Do({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Ni(c.length,a)),Us("all",c,a);const[f,h]=_s(d.shape,c),p=it(h),v=kt({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=Xg(v,v.dtype,"all",n);let m;if(o){const y=ji(f,l);m=kt({inputs:{x:g},backend:n,attrs:{shape:y}})}else m=kt({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(d),m}const eMt={kernelName:d8,backendName:"webgl",kernelFunc:QEt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=qn(s,i.shape);let c=l;const u=fi(c,a);let d=i;u!=null&&(d=Do({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Ni(c.length,a)),Us("any",c,a);const[f,h]=_s(d.shape,c),p=it(h),v=kt({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=Xg(v,v.dtype,"any",n);let m;if(o){const y=ji(f,l);m=kt({inputs:{x:g},backend:n,attrs:{shape:y}})}else m=kt({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(d),m}const nMt={kernelName:f8,backendName:"webgl",kernelFunc:tMt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rMt{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:s,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iMt{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,ue(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],o=Math.ceil(s/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=Ir(l),u=Mo("coords",l);let d,f;if(o===1){f=l+1;const A=Ir(f);d=`
        ${A} sourceLocR = ${A}(${u.join()}, 0);
        ++${u[l-1]};
        ${A} sourceLocG = ${A}(${u.join()}, 0);
        ++${u[l-2]};
        ${A} sourceLocA = ${A}(${u.join()}, 0);
        --${u[l-1]};
        ${A} sourceLocB = ${A}(${u.join()}, 0);
        --${u[l-2]};`}else f=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),p="."+h[f-1],v=h.map(A=>"int "+A),g=Mo("sourceLocR",f-1).concat("inIdx.r"),m=Mo("sourceLocG",f-1).concat("inIdx.g"),y=Mo("sourceLocB",f-1).concat("inIdx.b"),x=Mo("sourceLocA",f-1).concat("inIdx.a"),S=r==="max"?"greaterThan":"lessThan",_=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${x.join()})));`,C=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${m.join()}) : 0.,
            hasNextRow ? getAChannel(${y.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,T=i?"":`
      float getBestIndicesAChannel(${v.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${v.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${T}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${_}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${S}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eve(t,e,n,r=null){let i=e.shape[0],s=e.shape[1];r!=null&&(i=r.shape[0],s=r.shape[1]);const o=nP(s),a={windowSize:o,inSize:s,batchSize:i,outSize:Math.ceil(s/o)},l=new rMt(a,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=Eve(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function Mve(t,e,n,r=null){const i=r!=null?r.shape:e.shape,s=i[i.length-1],o=nP(s),a=new iMt(i,o,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=Mve(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function Ave(t,e,n,r){const i=[n];if(Us("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!Qe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),s.push(l));const[c,u]=_s(l.shape,i),d=it(u),f=kt({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});s.push(f);const h=Eve(t,f,r);s.push(h);const p=kt({inputs:{x:h},backend:t,attrs:{shape:c}});return s.forEach(v=>t.disposeIntermediateTensorInfo(v)),p}return Mve(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let o=qn(s,i.shape);const a=fi(o,i.shape.length);let l=i;const c=[];a!=null&&(l=Do({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),o=Ni(o.length,l.shape.length)),Us("argMax",[o[0]],l.shape.length);const u=Ave(n,l,o[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const oMt={kernelName:KR,backendName:"webgl",kernelFunc:sMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s}=r;let o=qn(s,i.shape);const a=fi(o,i.shape.length);let l=i;const c=[];a!=null&&(l=Do({inputs:{x:i},backend:n,attrs:{perm:a}}),c.push(l),o=Ni(o.length,l.shape.length)),Us("argMin",[o[0]],l.shape.length);const u=Ave(n,l,o[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const lMt={kernelName:ZR,backendName:"webgl",kernelFunc:aMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cMt=hc+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,uMt=ar({opSnippet:cMt}),dMt={kernelName:E2,backendName:"webgl",kernelFunc:uMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fMt=hc+"return log(x + sqrt(x * x + 1.0));",hMt=ar({opSnippet:fMt}),pMt={kernelName:M2,backendName:"webgl",kernelFunc:hMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mMt=hc+`
  return atan(x);
`,gMt=ar({opSnippet:mMt}),vMt={kernelName:A2,backendName:"webgl",kernelFunc:gMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yMt=jW+`
  return atan(a, b);
`,xMt=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+jg+`
  return result;
`,bMt=zs({opSnippet:yMt,packedOpSnippet:xMt}),wMt={kernelName:I2,backendName:"webgl",kernelFunc:bMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SMt=hc+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,_Mt=ar({opSnippet:SMt}),CMt={kernelName:k2,backendName:"webgl",kernelFunc:_Mt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xS{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,m=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let y="0.0";if(v||(y="-1.0 / 1e-20"),r){const A=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${A} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?s?g:m:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let S=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(S="avgValue / max(count, 1.0)");const _=Math.floor(o/4)*4,C=o%4,T=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${_}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${T}
          }

          int xC = xCCorner + ${_};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${T}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${T}
          }
        }
        setOutput(${S});
      }
    `}}class qW{constructor(e,n,r,i=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,v=e.effectiveFilterWidth,g=e.padInfo.front,m=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let S="0.0";if(x||(S="-1.0 / 1e-20"),r){const E=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${g}, ${m}, ${y});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${v};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${E} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${v} +
                      wR * ${v} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const _="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const T=Math.floor(o/4)*4,A=o%4,M=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${_}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${g}, ${m}, ${y});
      const float initializationValue = ${S};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${S});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${T}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${M}
            }

            int xC = xCCorner + ${T};
            if (${A===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${M}
            } else if (${A===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${M}
            } else if (${A===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${M}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;B_(i,"avgPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;ue(io(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=dc(i.shape,s,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&wr(u.inShape,u.outShape))return $a({inputs:{x:i},backend:n});const d=new xS(u,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const EMt={kernelName:JR,backendName:"webgl",kernelFunc:TMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=vf(i.shape,s,o,u,a,l,c),f=new qW(d,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}const AMt={kernelName:QR,backendName:"webgl",kernelFunc:MMt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kMt{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class IMt{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=d-1-e.padInfo.front,v=f-1-e.padInfo.top,g=h-1-e.padInfo.left,m=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${v}, ${g});
      const float avgMultiplier = float(${m});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RMt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=vf(o.shape,a,l,d,c,u),h=new IMt(f);return n.runWebGLProgram(h,[i],o.dtype)}const PMt={kernelName:p8,backendName:"webgl",kernelFunc:RMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NMt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s;B_([i,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=dc(o.shape,a,l,1,c),d=new kMt(u);return n.runWebGLProgram(d,[i],o.dtype)}const $Mt={kernelName:h8,backendName:"webgl",kernelFunc:NMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DMt(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:s}=e,{transposeA:o,transposeB:a}=r;return hk({a:i,b:s,transposeA:o,transposeB:a,backend:n})}const LMt={kernelName:e3,backendName:"webgl",kernelFunc:DMt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OMt{constructor(e,n,r,i,s,o){this.outputShape=[],this.variableNames=["x","mean","variance"],kn(e,n),kn(e,r);let a="0.0";i!=null&&(kn(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";s!=null&&(kn(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FMt{constructor(e,n,r,i,s,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],kn(e,n),kn(e,r);let a="vec4(0.0)";i!=null&&(kn(e,i),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(kn(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BMt=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:s,offset:o,scale:a}=t;ue(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),ue(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),ue(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,i,s];let u=null;o!=null&&(u=o.shape,c.push(o));let d=null;a!=null&&(d=a.shape,c.push(a));const f=Qe().getBool("WEBGL_PACK_NORMALIZATION")?new FMt(r.shape,i.shape,s.shape,u,d,l):new OMt(r.shape,i.shape,s.shape,u,d,l);return e.runWebGLProgram(f,c,c[0].dtype)},UMt={kernelName:f3,backendName:"webgl",kernelFunc:BMt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zMt{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Ir(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=VMt(this.rank);let i;const s=e.map((o,a)=>`sourceLoc.${r5[a]} = start[${a}] + coords.${r5[a]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const r5=["x","y","z","w","u","v"];function VMt(t){if(t===1)return"sourceLoc";if(t<=6)return r5.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WMt{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Ir(this.rank),r=Mo("coords",this.rank),i=Mo("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${s})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${i[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GMt(t,e,n,r){const i=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),o=r.texData.get(s.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=WV(e,on(t.shape));i.slice&&(a+=i.slice.flatOffset),o.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),s}function Tx(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,size:o}=r,[a,l]=tP(i,s,o);if(UV(i,a,l),it(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const d=n.texData.get(i.dataId),f=LTt(d.values,a,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,f)}const{isPacked:c}=n.texData.get(i.dataId),u=VV(i.shape,a,l);if(c||!u){const d=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new WMt(l):new zMt(l),f=[a];return n.runWebGLProgram(d,[i],i.dtype,f)}return n.uploadToGPU(i.dataId),GMt(i,a,l,n)}const HMt={kernelName:z3,backendName:"webgl",kernelFunc:Tx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jMt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,crops:o}=r;ue(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((y,x)=>y*x),l=E_(i.shape,s,a),c=M_(l.length,s.length),u=A_(i.shape,s,a),d=qV(o,s.length),f=YV(u,o,s.length),h=[],p=kt({inputs:{x:i},backend:n,attrs:{shape:l}}),v=Do({inputs:{x:p},backend:n,attrs:{perm:c}}),g=kt({inputs:{x:v},backend:n,attrs:{shape:u}}),m=Tx({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(v),h.push(g),h.forEach(y=>n.disposeIntermediateTensorInfo(y)),m},XMt={kernelName:t3,backendName:"webgl",kernelFunc:jMt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o}=r,a=n.readSync(i.dataId),l=n.readSync(s.dataId),c=mve(a,l,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,c)}const YMt={kernelName:m8,backendName:"webgl",kernelFunc:qMt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KMt=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,ZMt=`
  return float(int(a.r) & int(b.r));
`;function JMt(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,s=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=Qe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||o===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(i.dataId).values,[u,d]=oTt(r.shape,i.shape,l,c,r.dtype),f=n.makeTensorInfo(d,r.dtype),h=n.texData.get(f.dataId);return h.values=u,f}let a;return s?a=new _x(KMt,r.shape,i.shape,!1):a=new xg(ZMt,r.shape,i.shape),n.runWebGLProgram(a,[r,i],r.dtype)}const QMt={kernelName:g8,backendName:"webgl",kernelFunc:JMt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eAt(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,s=n.readSync(r.dataId),o=n.readSync(i.dataId),a=kn(Array.from(s),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const tAt={kernelName:xfe,backendName:"webgl",kernelFunc:eAt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nAt="return float(a != b);",kve=zs({opSnippet:nAt,cpuKernelImpl:MTt,dtype:"bool"}),rAt={kernelName:k3,backendName:"webgl",kernelFunc:kve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z_(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return $a({inputs:{x:i.complexTensorInfos.real},backend:n})}const iAt={kernelName:z8,backendName:"webgl",kernelFunc:z_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sAt="return float(int(x));";function oAt(t,e){const n=new Iu(t.shape,sAt),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i5(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:s}=r;if(s==="complex64"){if(i.dtype==="complex64")return $a({inputs:{x:i},backend:n});const o=gs(i.shape),a=i5({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=cp({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(i.dtype==="complex64"){const o=z_({inputs:{input:i},backend:n}),a=i5({inputs:{x:o},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(o),a}if(!pfe(i.dtype,s)){const o=$a({inputs:{x:i},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:s}}if(n.shouldExecuteOnCPU([i])){const o=n.texData.get(i.dataId).values,[a,l,c]=aTt(o,i.shape,i.dtype,s);return n.makeTensorInfo(a,l,c)}if(s==="int32")return oAt(i,n);if(s==="bool"){const o=n.makeTensorInfo([],"bool",eo("bool",1)),l=kve({inputs:{a:i,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${s}`)}const aAt={kernelName:R2,backendName:"webgl",kernelFunc:i5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nQ="return ceil(x);",lAt=ar({opSnippet:nQ,packedOpSnippet:nQ,cpuKernelImpl:lTt}),cAt={kernelName:P2,backendName:"webgl",kernelFunc:lAt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uAt{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dAt{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fAt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:s,clipValueMax:o}=r;let a;Qe().getBool("WEBGL_PACK_CLIP")?a=new dAt(i.shape):a=new uAt(i.shape);const l=[[s],[o]];return n.runWebGLProgram(a,[i],i.dtype,l)}const hAt={kernelName:N2,backendName:"webgl",kernelFunc:fAt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pAt{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rQ(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function mAt(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),s=new pAt(r.shape),o=[rQ(r,i.complexTensorInfos.real),rQ(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(s,o,o[0].dtype)}const gAt={kernelName:n3,backendName:"webgl",kernelFunc:mAt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vAt{constructor(e){this.outputShape=[],this.outputShape=Gu(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const i=n.length,s=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yAt{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Gu(e,n);const r=this.outputShape,i=r.length,s=Ir(i),o=Mo("coords",i),a=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((v,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let v=1;v<l.length;v++)l[v]=l[v-1]+e[v][n];const c=a[n],u=a.slice(-2),d=a.join();let f=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let v=1;v<l.length;v++){const g=l[v-1];f+=`
        if (${c} < ${l[v]}  && ${c} >= ${l[v-1]}) {
          return getChannel(
            getT${v}(${RE(a,c,g)}),
            vec2(${RE(u,c,g)}));
        }`}const h=l.length,p=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${RE(a,c,p)}),
          vec2(${RE(u,c,p)}));`,this.userCode=`
      float getValue(${a.map(v=>"int "+v)}) {
        ${f}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function RE(t,e,n){const r=t.indexOf(e);return t.map((s,o)=>o===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wP(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return $a({inputs:{x:i.complexTensorInfos.imag},backend:n})}const xAt={kernelName:N8,backendName:"webgl",kernelFunc:wP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J1(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(y=>z_({inputs:{input:y},backend:n})),p=t.map(y=>wP({inputs:{input:y},backend:n})),v=J1(h,e,n),g=J1(p,e,n),m=cp({inputs:{real:v,imag:g},backend:n});return h.forEach(y=>n.disposeIntermediateTensorInfo(y)),p.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),m}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const h=t.map(S=>{const C=[-1,it(S.shape.slice(e))];return kt({inputs:{x:S},backend:n,attrs:{shape:C}})}),p=h.map(S=>({vals:n.readSync(S.dataId),shape:S.shape})),v=Gu(h.map(S=>S.shape),1),g=h[0].shape[0]===1,m=cTt(p,v,r,g),y=Gu(t.map(S=>S.shape),e),x=n.makeTensorInfo(y,r,m);return h.forEach(S=>n.disposeIntermediateTensorInfo(S)),x}const s=t.filter(h=>it(h.shape)>0),o=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const h=o?new Iu(t[0].shape,Gf):new rh(t[0].shape,Gf);return n.runWebGLProgram(h,t,r)}const a=Qe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const h=[];for(let v=0;v<s.length;v+=a){const g=s.slice(v,v+a);h.push(J1(g,e,n))}const p=J1(h,e,n);for(const v of h)n.disposeIntermediateTensorInfo(v);return p}if(o){const h=new yAt(s.map(p=>p.shape),e);return n.runWebGLProgram(h,s,r)}const{tensors2D:l,outShape:c}=bAt(s,e,n),u=new vAt(l.map(h=>h.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(h=>n.disposeIntermediateTensorInfo(h));const f=kt({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),f}function bAt(t,e,n){const r=Gu(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>kt({inputs:{x:s},attrs:{shape:[-1,it(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ive(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,s=qn(i,e[0].shape)[0],o=e.map(c=>c.shape);HV(o,s);const a=Gu(e.map(c=>c.shape),s);if(it(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>it(c.shape)>0);return l.length===1?$a({inputs:{x:l[0]},backend:n}):J1(l,s,n)}const wAt={kernelName:r3,backendName:"webgl",kernelFunc:Ive};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rve{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,v=e.inChannels%4,g=e.dataFormat==="channelsLast",m=g?1:2,y=g?2:3,x=g?3:1;let S="",_="";r&&(i?S=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?S=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`
          float activation(float x) {
            ${r}
          }
        `,_="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${m}], coords[${y}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${v===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${v===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${v===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${_}
        setOutput(result);
      }
    `}}class SAt{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${v===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${v===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${v===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pve{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=so(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<u;g++)f+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;f+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<u;g++)f+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(d+1)/2;g++){const m=g*2;if(f+=`
           xC = xCCorner + ${m*l};
           `,a===1){if(m<u&&(o%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${m}Ready == 0) {
                   xTexelC${m} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${m}.zw = vec2(0.0);
                   }
                   xTexelC${m}Ready = 1;
                 }
               `,l===1&&m>0?f+=`
                 xC${m} = vec4(xTexelC${m-2}.zw, xTexelC${m}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${m} = vec4(previous.zw, xTexelC${m}.xy);
                   } else {
                     xC${m} = vec4(0.0, 0.0, xTexelC${m}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${m}Ready == 0) {
                   xTexelC${m} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${m}.zw = vec2(0.0);
                   }
                   xTexelC${m}Ready = 1;
                 }

                 xC${m} = xTexelC${m};
                 `,m+1<u)){const y=o%2===0?i8(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${y};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${m+1}Ready == 0) {
                     xTexelC${m+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${m+1}.zw = vec2(0.0);
                     }
                     xTexelC${m+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${m+1} = vec4(previous.zw, xTexelC${m+1}.xy);
                     } else {
                      xC${m+1} = vec4(0.0, 0.0, xTexelC${m+1}.xy);
                     }
                     `:f+=`
                     xC${m+1} = vec4(xTexelC${m}.zw, xTexelC${m+1}.xy);
                     `):y===1?f+=`
                     xC${m+1} = xTexelC${m};
                     `:f+=`
                     xCOffset = xC + ${y};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${m+1}Ready == 0) {
                       xTexelC${m+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${m+1}.zw = vec2(0.0);
                       }
                       xTexelC${m+1}Ready = 1;
                     }

                     xC${m+1} = xTexelC${m+1};
                     `}}else m<u&&(o%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${m}Ready == 0) {
                   xTexelC${m} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${m}.zw = vec2(0.0);
                   }
                   xTexelC${m}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${m+1}Ready == 0) {
                   xTexelC${m+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${m+1}.zw = vec2(0.0);
                   }
                   xTexelC${m+1}Ready = 1;
                 }

                 xC${m} = vec4(xTexelC${m}.zw, xTexelC${m+1}.zw);
               `,m+1<u&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${m+1} = vec4(xTexelC${m+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${m}Ready == 0) {
                   xTexelC${m} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${m}.zw = vec2(0.0);
                   }
                   xTexelC${m}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${m+1}Ready == 0) {
                   xTexelC${m+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${m+1}.zw = vec2(0.);
                   }
                   xTexelC${m+1}Ready = 1;
                 }

                 xC${m} = vec4(
                   xTexelC${m}.xy, xTexelC${m+1}.xy);
               `,m+1<u&&(f+=`
                   xC${m+1} = vec4(xTexelC${m}.zw, xTexelC${m+1}.zw);
                 `)));m<u&&(f+=`
             wTexel = getW(r, ${m}, d1, d2);
             dotProd += xC${m}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${m}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,m+1<u&&(f+=`
               wTexel = getW(r, ${m+1}, d1, d2);
               dotProd += xC${m+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${m+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let h="",p="";r&&(i?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${v}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _At{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=so(this.outputShape.length);const{dataFormat:r}=n,i=Lo(),s=r==="channelsLast",o=s?1:2,a=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pk(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Nve({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,v=!1;let g;const m=[];if(s!=null){const S=pk(s.shape,h);S!=null&&(s=kt({inputs:{x:s},backend:r,attrs:{shape:S}}),m.push(s))}if(i!=null){const S=pk(i.shape,h);S!=null&&(i=kt({inputs:{x:i},backend:r,attrs:{shape:S}}),m.push(i))}if(!((d===1||f===1)&&u>Tve)&&c.isPacked&&h&&c.texture!=null&&l[2]%2!==0&&wr(c.shape.slice(-3),l.slice(-3))){const S=l[0]*l[1]*(l[2]+1),_={dataId:t.dataId,shape:[1,S,n.inChannels],dtype:t.dtype},C=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,ue(fk(c.shape,_.shape),()=>`packed reshape ${c.shape} to ${_.shape} isn't free`);const T=kt({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});m.push(T);const A=hk({a:_,b:T,backend:r,transposeA:p,transposeB:v,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o}),M=r.texData.get(A.dataId);ue(M.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=C,M.shape=n.outShape,g=$a({inputs:{x:A},backend:r}),g.shape=n.outShape,m.push(A)}else{const S=n.outHeight*n.outWidth,_=kt({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,S,n.inChannels]:[n.batchSize,n.inChannels,S]}}),C=kt({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),T=hk({a:h?_:C,b:h?C:_,transposeA:!h,transposeB:v,backend:r,bias:i,activation:a,preluActivationWeights:s,leakyreluAlpha:o});g=kt({inputs:{x:T},backend:r,attrs:{shape:n.outShape}}),m.push(_),m.push(C),m.push(T)}for(const S of m)r.disposeIntermediateTensorInfo(S);return g}function $ve({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:f,dataFormat:h}=n,p=h==="channelsLast",v=l*c*u,g=f*d,m=[n.batchSize,v,g],y=!0,x=!1,S=[];if(s!=null){const D=pk(s.shape,p);D!=null&&(s=kt({inputs:{x:s},backend:r,attrs:{shape:D}}),S.push(s))}if(i!=null){const D=pk(i.shape,p);D!=null&&(i=kt({inputs:{x:i},backend:r,attrs:{shape:D}}),S.push(i))}const _=kt({inputs:{x:e},backend:r,attrs:{shape:[1,v,it(e.shape)/v]}});S.push(_);const C=new _At(m,n),T=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],A=r.runWebGLProgram(C,[t],"float32",T),M=kt({inputs:{x:A},backend:r,attrs:{shape:m}});S.push(A),S.push(M);const E=i!=null,P=s!=null,N=a==="leakyrelu",F=a?yS(a,!0):null,$=new Cve(p?M.shape:_.shape,p?_.shape:M.shape,p?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],y,x,E,F,P,N),O=p?[M,_]:[_,M];if(i&&O.push(i),P&&O.push(s),N){const D=r.makeTensorInfo([],"float32",ep(o,"float32"));O.push(D),S.push(D)}const z=r.runWebGLProgram($,O,"float32"),X=kt({inputs:{x:z},backend:r,attrs:{shape:n.outShape}});S.push(z);for(const D of S)r.disposeIntermediateTensorInfo(D);return X}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CAt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=yf(l),f=Bs(i.shape,s.shape,o,c,a,u,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=Nve({x:i,filter:s,convInfo:f,backend:n});else if(f.strideWidth<=2&&d==="channelsLast"&&Qe().getBool("WEBGL_EXP_CONV")){const v=new Pve(f),g=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];h=n.runWebGLProgram(v,[i,s],"float32",g)}else if(Qe().getBool("WEBGL_CONV_IM2COL"))h=$ve({x:i,filter:s,convInfo:f,backend:n});else{const v=new Rve(f);h=n.runWebGLProgram(v,[i,s],"float32")}const p=kt({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),p}const TAt={kernelName:i3,backendName:"webgl",kernelFunc:CAt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EAt{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class MAt{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=o?1:2,u=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class AAt{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class kAt{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IAt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=yf(l),f=Bs(i.shape,u,o,1,a,c,!1,d),h=new EAt(f);return n.runWebGLProgram(h,[i,s],"float32")}const RAt={kernelName:y8,backendName:"webgl",kernelFunc:IAt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PAt{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=so(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NAt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=yf(c),f=Bs(o,s.shape,a,1,l,u,!1,d);if(Qe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const h=[[f.strideHeight,f.strideWidth]],p=new PAt(f);return n.runWebGLProgram(p,[i,s],"float32",h)}else{const h=new MAt(f);return n.runWebGLProgram(h,[i,s],"float32")}}const $At={kernelName:s3,backendName:"webgl",kernelFunc:NAt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DAt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,c=np(i.shape,s.shape,o,l,a),u=new SAt(c);return n.runWebGLProgram(u,[i,s],"float32")}const LAt={kernelName:o3,backendName:"webgl",kernelFunc:DAt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OAt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,pad:a,filterShape:l}=r,c=np(i.shape,l,o,1,a),u=new AAt(c);return n.runWebGLProgram(u,[i,s],"float32")}const FAt={kernelName:x8,backendName:"webgl",kernelFunc:OAt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BAt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{pad:o,strides:a,inputShape:l}=r,c=np(l,s.shape,a,1,o),u=new kAt(c);return n.runWebGLProgram(u,[i,s],"float32")}const UAt={kernelName:b8,backendName:"webgl",kernelFunc:BAt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zAt=Cx+`
  return cos(x);
`,VAt=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${jg}
  return result;
`,WAt=ar({opSnippet:zAt,packedOpSnippet:VAt}),GAt={kernelName:$2,backendName:"webgl",kernelFunc:WAt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAt=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,jAt=ar({opSnippet:HAt}),XAt={kernelName:D2,backendName:"webgl",kernelFunc:jAt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qAt{constructor(e,n,r,i,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=e,[u]=n,[d,f]=r;this.outputShape=[u,d,f,c];const h=i==="bilinear"?1:0,[p,v]=[`${a-1}.0`,`${l-1}.0`],[g,m,y]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[x,S,_]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${v} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${v}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${m};
        float width_scale = ${S};

        float in_y = ${y};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${_};
        if( in_x < 0.0 || in_x > ${v} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YAt=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:s,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new qAt(i.shape,s.shape,a,l,c);return n.runWebGLProgram(u,[i,s,o],"float32")},KAt={kernelName:S8,backendName:"webgl",kernelFunc:YAt};var bS;(function(t){t.Prod="*",t.Sum="+"})(bS||(bS={}));class iQ{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,o=this.op===bS.Prod?"1.0":"0.0",a=r?o:`getX(${sQ(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=i?`end != ${l-1}`:"end != 0",u=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",u=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Ir(s)} coords = getOutputCoords();
        int end = ${oQ(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${oQ(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${sQ(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function sQ(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function oQ(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dve(t,e,n,r,i,s){const o=e.shape.length,a=fi([r],o);let l=e;a!=null&&(l=Do({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=Ni(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=$a({inputs:{x:l},backend:n});for(let f=0;f<=Math.ceil(Math.log2(u))-1;f++){const h=new iQ(t,l.shape,!1,s),p=[[f]],v=d;d=n.runWebGLProgram(h,[d],d.dtype,p),n.disposeIntermediateTensorInfo(v)}if(i){const f=new iQ(t,l.shape,i,s),h=d;d=n.runWebGLProgram(f,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(a!=null){const f=rp(a),h=Do({inputs:{x:d},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),h}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZAt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return Dve(bS.Prod,i,n,s,o,a)}const JAt={kernelName:w8,backendName:"webgl",kernelFunc:ZAt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QAt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,exclusive:o,reverse:a}=r;return Dve(bS.Sum,i,n,s,o,a)}const ekt={kernelName:a3,backendName:"webgl",kernelFunc:QAt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tkt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:s}=e,{size:o,binaryOutput:a}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),c=n.readSync(s.dataId),u=mve(l,c,s.dtype,s.shape,o);return n.makeTensorInfo([o],s.dtype,u)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(s),u=sTt(l,c,o,a);return n.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const nkt={kernelName:_8,backendName:"webgl",kernelFunc:tkt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rkt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ikt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:s,dataFormat:o}=r,a=i.shape[0],l=o==="NHWC"?i.shape[1]:i.shape[2],c=o==="NHWC"?i.shape[2]:i.shape[3],u=o==="NHWC"?i.shape[3]:i.shape[1],d=l*s,f=c*s,h=u/(s*s),p=o==="NHWC"?[a,d,f,h]:[a,h,d,f],v=new rkt(p,s,o);return n.runWebGLProgram(v,[i],i.dtype)}const skt={kernelName:C8,backendName:"webgl",kernelFunc:ikt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lve{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=so(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ove{constructor(e,n=!1,r=null,i=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=so(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let m=0;m<d;m++)h+=`
          vec4 xTexelC${m*2};
          int xTexelC${m*2}Ready;
          vec4 xTexelC${m*2+1};
          int xTexelC${m*2+1}Ready;
          vec4 xC${m};`;h+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let m=0;m<d;m++)h+=`
          xTexelC${m*2} = vec4(0.0);
          xTexelC${m*2}Ready = 0;
          xTexelC${m*2+1} = vec4(0.0);
          xTexelC${m*2+1}Ready = 0;
          xC${m} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let m=0;m<(f+1)/2;m++){const y=m*2;if(h+=`
          xC = xCCorner + ${y*c};
          `,l===1){if(y<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }
              `,c===1&&y>0?h+=`
                xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                  } else {
                    xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                xC${y} = xTexelC${y};
                `,y+1<d)){const x=a%2===0?i8(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                    xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${y+1}.zw = vec2(0.0);
                    }
                    xTexelC${y+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                    } else {
                     xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                    }
                    `:h+=`
                    xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                    `):x===1?h+=`
                    xC${y+1} = xTexelC${y};
                    `:h+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                      xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${y+1}.zw = vec2(0.0);
                      }
                      xTexelC${y+1}Ready = 1;
                    }

                    xC${y+1} = xTexelC${y+1};
                    `}}else y<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                  xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${y+1}.zw = vec2(0.0);
                  }
                  xTexelC${y+1}Ready = 1;
                }

                xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
              `,y+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                  xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y+1}.zw = vec2(0.);
                  }
                  xTexelC${y+1}Ready = 1;
                }

                xC${y} = vec4(
                  xTexelC${y}.xy, xTexelC${y+1}.xy);
              `,y+1<d&&(h+=`
                  xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                `)));y<d&&(h+=`
            wTexel = getW(r, ${y}, d1, q);
            dotProd += xC${y} * vec4(wTexel.xz, wTexel.xz);
          `,y+1<d&&(h+=`
              wTexel = getW(r, ${y+1}, d1, q);
              dotProd += xC${y+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",v="";r&&(i?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,v="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${v}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function okt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),ue(io(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const d=Bs(i.shape,s.shape,o,u,a,c,!0);let f;Qe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new Ove(d):f=new Lve(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[i,s],"float32",h)}const akt={kernelName:l3,backendName:"webgl",kernelFunc:okt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lkt{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,s=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class ckt{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,s=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ukt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,d=Bs(i.shape,u,o,a,l,c,!0),f=new lkt(d);return n.runWebGLProgram(f,[i,s],"float32")}const dkt={kernelName:T8,backendName:"webgl",kernelFunc:ukt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fkt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:s}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,d=Bs(u,s.shape,o,a,l,c,!0),f=new ckt(d);return n.runWebGLProgram(f,[i,s],"float32")}const hkt={kernelName:E8,backendName:"webgl",kernelFunc:fkt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pkt{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mkt(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],s=it(r.shape),o=kt({inputs:{x:r},backend:n,attrs:{shape:[s]}}),a=new pkt(s),l=n.runWebGLProgram(a,[o],o.dtype),c=kt({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const gkt={kernelName:bfe,backendName:"webgl",kernelFunc:mkt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vkt{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:s,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:f}=i;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${o});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ykt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s}=e,{strides:o,pad:a,dilations:l}=r,c=w_(i.shape,s.shape,o,a,"NHWC",l);let u;const d=new vkt(c);u=n.runWebGLProgram(d,[i,s],"float32");const f=kt({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),f}const xkt={kernelName:c3,backendName:"webgl",kernelFunc:ykt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bkt(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,s=e,{allDims:o,summedDims:a,idDims:l}=rW(i,s.length);sW(o.length,l,s);const{path:c,steps:u}=oW(a,l),d=u.length;let f=null,h=o.length;const p=[];for(let v=0;v<d;++v){for(const g of u[v]){const{permutationIndices:m,expandDims:y}=iW(h,l[g]);let x;aW(m)?x=s[g]:(x=Do({inputs:{x:s[g]},backend:n,attrs:{perm:m}}),p.push(x));const S=x.shape.slice();for(let _=0;_<y.length;++_)S.splice(y[_],0,1);wr(x.shape,S)||(x=kt({inputs:{x},backend:n,attrs:{shape:S}}),p.push(x)),f===null?f=x:(f=XW({inputs:{a:x,b:f},backend:n}),p.push(f))}v<d-1&&(c[v]>=0&&(f=bP({inputs:{x:f},backend:n,attrs:{axis:c[v]-(o.length-h),keepDims:!1}}),p.push(f)),h--)}for(const v of p)v!==f&&n.disposeIntermediateTensorInfo(v);return f}const wkt={kernelName:M8,backendName:"webgl",kernelFunc:bkt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Skt="return (x >= 0.0) ? x : (exp(x) - 1.0);",_kt=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Ckt=ar({opSnippet:Skt,packedOpSnippet:_kt}),Tkt={kernelName:O2,backendName:"webgl",kernelFunc:Ckt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ekt="return (b >= 0.0) ? a : a * (b + 1.0);",Mkt=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Akt=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,s=Qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new _x(Mkt,r.shape,i.shape):new xg(Ekt,r.shape,i.shape);return n.runWebGLProgram(s,[r,i],r.dtype)},kkt={kernelName:A8,backendName:"webgl",kernelFunc:Akt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ikt=`
  return vec4(equal(a, b));
`,Rkt="return float(a == b);",Pkt=zs({opSnippet:Rkt,packedOpSnippet:Ikt,dtype:"bool",cpuKernelImpl:uTt}),Nkt={kernelName:u3,backendName:"webgl",kernelFunc:Pkt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $kt=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${KV};
  float a1 = ${ZV};
  float a2 = ${JV};
  float a3 = ${QV};
  float a4 = ${eW};
  float a5 = ${tW};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,Dkt=ar({opSnippet:$kt}),Lkt={kernelName:F2,backendName:"webgl",kernelFunc:Dkt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Okt=Cx+`
  return exp(x);
`,Fkt=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Fve=ar({opSnippet:Okt,packedOpSnippet:Fkt,cpuKernelImpl:dTt,dtype:"float32"}),Bkt={kernelName:B2,backendName:"webgl",kernelFunc:Fve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:s}=e,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(ue(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),kt({inputs:{x:s},backend:r,attrs:{shape:a}})}const Ukt={kernelName:d3,backendName:"webgl",kernelFunc:s5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aQ="return exp(x) - 1.0;",zkt=ar({opSnippet:aQ,packedOpSnippet:aQ,cpuKernelImpl:fTt}),Vkt={kernelName:U2,backendName:"webgl",kernelFunc:zkt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lQ{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bve(t,e,n){const r=n.texData.get(t.dataId),i=it(t.shape),s=t.shape[t.shape.length-1],o=i/s,a=kt({inputs:{x:t},backend:n,attrs:{shape:[o,s]}}),l=a.shape,c=new lQ("real",l,e),u=new lQ("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(u,d,"float32"),p=cp({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const v=kt({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wkt(t){const{inputs:e,backend:n}=t,{input:r}=e;return Bve(r,!1,n)}const Gkt={kernelName:k8,backendName:"webgl",kernelFunc:Wkt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hkt{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V_(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:s}=n;if(s=s||ux(i),s==="string"){const o=ki(s,it(r));return o.fill(i),e.makeTensorInfo(r,s,o)}else{const o=new Hkt(r,i),a=[[i]];return e.runWebGLProgram(o,[],s,a)}}const jkt={kernelName:I8,backendName:"webgl",kernelFunc:V_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xkt{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qkt={kernelName:R8,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new Xkt(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cQ="return floor(x);",Ykt=ar({opSnippet:cQ,packedOpSnippet:cQ,cpuKernelImpl:hTt}),Kkt={kernelName:z2,backendName:"webgl",kernelFunc:Ykt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zkt=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,Jkt=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,Qkt=zs({opSnippet:Zkt,packedOpSnippet:Jkt,dtype:"int32"}),eIt={kernelName:V2,backendName:"webgl",kernelFunc:Qkt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tIt{constructor(e){this.variableNames=["A"];const n=Lo(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nIt{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Lo(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rIt={kernelName:Qlt,backendName:"webgl",kernelFunc:iIt};let G0,lL=Qe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function iIt(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:s}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=[c,l],d=[c,l,s];if(a||o){const v=Qe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(G0==null||v!==lL)&&(lL=v,G0=document.createElement("canvas").getContext("2d",{willReadFrequently:lL})),G0.canvas.width=l,G0.canvas.height=c,G0.drawImage(i,0,0,l,c),i=G0.canvas}const f=n.makeTensorInfo(u,"int32");n.texData.get(f.dataId).usage=sl.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),i);const h=Qe().getBool("WEBGL_PACK")?new nIt(d):new tIt(d),p=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sIt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r,v=yf(u),g=Bs(i.shape,s.shape,l,d,c,f,!1,v);let m;const y=[],x=o!=null,S=a!=null,_=h==="leakyrelu",C=()=>{const A=[i,s],M=(E,P)=>{if(P==="NCHW"&&E.shape.length===1&&E.shape[0]!==1){const N=kt({inputs:{x:E},backend:n,attrs:{shape:[E.shape[0],1,1]}});return y.push(N),N}return E};if(x&&A.push(M(o,u)),S&&A.push(M(a,u)),_){const E=n.makeTensorInfo([],"float32",ep(p,"float32"));A.push(E),y.push(E)}return A};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))m=Nve({x:i,filter:s,convInfo:g,backend:n,bias:o,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else if(g.strideWidth<=2&&v==="channelsLast"&&Qe().getBool("WEBGL_EXP_CONV")){const A=h?yS(h,!0):null,M=new Pve(g,x,A,S,_),E=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],P=C();m=n.runWebGLProgram(M,P,"float32",E)}else if(Qe().getBool("WEBGL_CONV_IM2COL"))m=$ve({x:i,filter:s,convInfo:g,backend:n,bias:o,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else{const A=h?yS(h,!1):null,M=new Rve(g,x,A,S,_),E=C();m=n.runWebGLProgram(M,E,"float32")}const T=kt({inputs:{x:m},backend:n,attrs:{shape:g.outShape}});return y.push(m),y.forEach(A=>n.disposeIntermediateTensorInfo(A)),T}const oIt={kernelName:zA,backendName:"webgl",kernelFunc:sIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aIt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:s,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r,p=[];let v=u;v==null&&(v=[1,1]),ue(io(l,v),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${v}'`);const g=Bs(i.shape,s.shape,l,v,c,d,!0),m=Qe().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,y=f?yS(f,m):null,x=[i,s],S=o!=null,_=a!=null,C=f==="leakyrelu";if(S&&x.push(o),_&&x.push(a),C){const E=n.makeTensorInfo([],"float32",ep(h,"float32"));x.push(E),p.push(E)}let T;m?T=new Ove(g,S,y,_,C):T=new Lve(g,S,y,_,C);const A=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],M=n.runWebGLProgram(T,x,"float32",A);return p.forEach(E=>n.disposeIntermediateTensorInfo(E)),M}const lIt={kernelName:Bfe,backendName:"webgl",kernelFunc:aIt};class cIt{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const s=Ir(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uIt(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,s=i.shape,o=s[s.length-1],a=it(r.shape),[l,c,u,d]=BV(r,i),f=kt({inputs:{x:i},backend:n,attrs:{shape:[c,o]}}),h=kt({inputs:{x:r},backend:n,attrs:{shape:[it(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const m=n.readSync(i.dataId),y=n.bufferSync(r),x=pTt(m,y,r.dtype,c,o,u,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,x.values)}const p=new cIt(o,d,[c,u],r.shape),v=n.runWebGLProgram(p,[h,f],h.dtype),g=kt({inputs:{x:v},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(v),g}const dIt={kernelName:wfe,backendName:"webgl",kernelFunc:uIt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fIt{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Ir(this.rank),i=hIt(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function hIt(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uve(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:s}=e,{axis:o,batchDims:a}=r,l=qn(o,i.shape)[0];if(Qe().get("DEBUG")){const y=n.readSync(s.dataId),x=i.shape[l];for(let S=0;S<y.length;++S){const _=y[S];ue(_<=x-1&&_>=0,()=>`GatherV2: the index value ${_} is not in [0, ${x-1}]`)}}const c=cW(i,s,l,a),u=it(s.shape),d=[],f=kt({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=kt({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(f),d.push(h);const p=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,s])||i.dtype==="string"){const y=n.bufferSync(h),x=n.bufferSync(f),S=mTt(x,y,p);return d.forEach(_=>n.disposeIntermediateTensorInfo(_)),n.makeTensorInfo(c.outputShape,S.dtype,S.values)}const v=new fIt(f.shape,p),g=n.runWebGLProgram(v,[f,h],f.dtype);d.push(g);const m=kt({inputs:{x:g},backend:n,attrs:{shape:c.outputShape}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const pIt={kernelName:h3,backendName:"webgl",kernelFunc:Uve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mIt="return float(a > b);",gIt=`
  return vec4(greaterThan(a, b));
`,vIt=zs({opSnippet:mIt,packedOpSnippet:gIt,cpuKernelImpl:gTt,dtype:"bool"}),yIt={kernelName:p3,backendName:"webgl",kernelFunc:vIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xIt="return float(a >= b);",bIt=`
  return vec4(greaterThanEqual(a, b));
`,wIt=zs({opSnippet:xIt,packedOpSnippet:bIt,dtype:"bool",cpuKernelImpl:vTt}),SIt={kernelName:W2,backendName:"webgl",kernelFunc:wIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _It(t){const{inputs:e,backend:n}=t,{input:r}=e;return Bve(r,!0,n)}const CIt={kernelName:P8,backendName:"webgl",kernelFunc:_It};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TIt="return float(!isnan(x) && !isinf(x));",EIt=ar({opSnippet:TIt,dtype:"bool"}),MIt={kernelName:H2,backendName:"webgl",kernelFunc:EIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AIt="return float(isinf(x));",kIt=ar({opSnippet:AIt,dtype:"bool"}),IIt={kernelName:j2,backendName:"webgl",kernelFunc:kIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RIt="return float(isnan(x));",PIt=ar({opSnippet:RIt,dtype:"bool"}),NIt={kernelName:X2,backendName:"webgl",kernelFunc:PIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $It="return float(a < b);",DIt=`
  return vec4(lessThan(a, b));
`,LIt=zs({opSnippet:$It,packedOpSnippet:DIt,cpuKernelImpl:yTt,dtype:"bool"}),OIt={kernelName:g3,backendName:"webgl",kernelFunc:LIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FIt="return float(a <= b);",BIt=`
  return vec4(lessThanEqual(a, b));
`,UIt=zs({opSnippet:FIt,packedOpSnippet:BIt,cpuKernelImpl:xTt,dtype:"bool"}),zIt={kernelName:v3,backendName:"webgl",kernelFunc:UIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VIt(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:s}=n,o=bTt(r,i,s);return e.makeTensorInfo([o.length],"float32",o)}const WIt={kernelName:Sfe,backendName:"webgl",kernelFunc:VIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GIt=Cx+`
  return x < 0.0 ? 0./0. : log(x);
`,HIt=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,jIt=ar({opSnippet:GIt,packedOpSnippet:HIt,cpuKernelImpl:wTt}),XIt={kernelName:q2,backendName:"webgl",kernelFunc:jIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qIt=Cx+`
  return log(1.0 + x);
`,YIt=ar({opSnippet:qIt}),KIt={kernelName:Y2,backendName:"webgl",kernelFunc:YIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZIt="return float(a >= 1.0 && b >= 1.0);",JIt=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,QIt=zs({opSnippet:ZIt,packedOpSnippet:JIt,dtype:"bool"}),eRt={kernelName:y3,backendName:"webgl",kernelFunc:QIt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tRt="return float(!(x >= 1.0));",nRt=ar({opSnippet:tRt}),rRt={kernelName:x3,backendName:"webgl",kernelFunc:nRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iRt="return float(a >= 1.0 || b >= 1.0);",sRt=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,oRt=zs({opSnippet:iRt,packedOpSnippet:sRt,dtype:"bool"}),aRt={kernelName:b3,backendName:"webgl",kernelFunc:oRt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lRt{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cRt{constructor(e,n,r,i,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uRt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:s,bias:o,alpha:a,beta:l}=r,c=Qe().getBool("WEBGL_PACK_NORMALIZATION")?new cRt(i.shape,s,o,a,l):new lRt(i.shape,s,o,a,l);return n.runWebGLProgram(c,[i],i.dtype)},dRt={kernelName:w3,backendName:"webgl",kernelFunc:uRt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fRt{constructor(e,n,r,i,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hRt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:s,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,d=new fRt(i.shape,a,l,c,u);return n.runWebGLProgram(d,[i,s,o],i.dtype)},pRt={kernelName:$8,backendName:"webgl",kernelFunc:hRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mRt(t,e,n,r){const i=it(e),o=it(t.shape)/i,a=kt({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=Xg(a,t.dtype,"max",r),c=kt({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zve(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:s,keepDims:o}=r,a=i.shape.length,l=qn(s,i.shape);let c=l;const u=fi(c,a),d=u!=null,f=n.shouldExecuteOnCPU([i]);let h=i;if(d){if(f){const x=n.texData.get(h.dataId).values,S=new Array(a);for(let T=0;T<S.length;T++)S[T]=i.shape[u[T]];const _=HW(x,i.shape,i.dtype,u,S);h=n.makeTensorInfo(S,i.dtype);const C=n.texData.get(h.dataId);C.values=_}else h=xP(i,u,n);c=Ni(c.length,a)}Us("max",c,a);const[p,v]=_s(h.shape,c);let g=p;o&&(g=ji(p,l));let m;if(f){const x=n.texData.get(h.dataId).values,S=STt(x,it(v),g,i.dtype);m=n.makeTensorInfo(g,i.dtype);const _=n.texData.get(m.dataId);_.values=S}else m=mRt(h,v,g,n);return d&&n.disposeIntermediateTensorInfo(h),m}const gRt={kernelName:S3,backendName:"webgl",kernelFunc:zve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vRt=jW+`
  return max(a, b);
`,yRt=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+jg+`
  return result;
`,xRt=zs({opSnippet:vRt,packedOpSnippet:yRt,cpuKernelImpl:_Tt}),bRt={kernelName:K2,backendName:"webgl",kernelFunc:xRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wRt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;B_(i,"maxPool");const{filterSize:s,strides:o,pad:a,dimRoundingMode:l}=r,c=1;ue(io(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=dc(i.shape,s,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&wr(u.inShape,u.outShape))return $a({inputs:{x:i},backend:n});const d=new xS(u,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const SRt={kernelName:_3,backendName:"webgl",kernelFunc:wRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Rt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:s,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=vf(i.shape,s,o,u,a,c,l),f=new qW(d,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}const CRt={kernelName:C3,backendName:"webgl",kernelFunc:_Rt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TRt{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,s=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=s-1-e.padInfo.top,l=o-1-e.padInfo.left,c=s*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class ERt{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,f=c-1-e.padInfo.top,h=u-1-e.padInfo.left,p=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MRt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s}=e,o=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=vf(o.shape,a,l,d,c,u),h=new qW(f,"max",!0),p=n.runWebGLProgram(h,[o],o.dtype),v=new ERt(f),g=n.runWebGLProgram(v,[i,p],o.dtype);return n.disposeIntermediateTensorInfo(p),g}const ARt={kernelName:L8,backendName:"webgl",kernelFunc:MRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kRt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:s,output:o}=e,a=s;B_([s,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=dc(a.shape,l,c,1,u,d),h=!0,p=new xS(f,"max",h),v=n.runWebGLProgram(p,[a],a.dtype),g=new TRt(f),m=n.runWebGLProgram(g,[i,v],a.dtype);return n.disposeIntermediateTensorInfo(v),m}const IRt={kernelName:D8,backendName:"webgl",kernelFunc:kRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RRt(t,e,n,r){let i=new xS(n,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");i=new xS(n,"max",!0,!0,e);const o=r.runWebGLProgram(i,[t],"float32");return[s,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRt={kernelName:_fe,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:a}=e,l=n;ue(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];ue(io(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const u=dc(r.shape,i,s,c,o),[d,f]=RRt(r,a,u,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NRt(t,e,n,r){const i=it(e),o=it(t.shape)/i,a=kt({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=Xg(a,"float32","mean",r),c=kt({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Rt={kernelName:T3,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:s}=e,o=n,a=r.shape.length,l=qn(s,r.shape);let c=l;const u=fi(c,a),d=u!=null,f=o.shouldExecuteOnCPU([r]),h=[];let p=r;if(d){if(f){const S=o.texData.get(p.dataId).values,_=new Array(a);for(let A=0;A<_.length;A++)_[A]=r.shape[u[A]];const C=HW(S,r.shape,r.dtype,u,_);p=o.makeTensorInfo(_,r.dtype);const T=o.texData.get(p.dataId);T.values=C}else p=xP(r,u,o);h.push(p),c=Ni(c.length,a)}Us("sum",c,a);const[v,g]=_s(p.shape,c);let m=v;i&&(m=ji(v,l));const y=NRt(p,g,m,o);for(const x of h)o.disposeIntermediateTensorInfo(x);return y}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DRt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=qn(s,i.shape);let c=l;const u=fi(c,a);let d=i;u!=null&&(d=Do({inputs:{x:i},backend:n,attrs:{perm:u}}),c=Ni(c.length,i.shape.length)),Us("min",c,a);const[f,h]=_s(d.shape,c),p=it(h),v=kt({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=Xg(v,v.dtype,"min",n);let m;if(o){const y=ji(f,l);m=kt({inputs:{x:g},backend:n,attrs:{shape:y}})}else m=kt({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(d),m}const LRt={kernelName:E3,backendName:"webgl",kernelFunc:DRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ORt=jW+`
  return min(a, b);
`,FRt=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+jg+`
  return result;
`,BRt=zs({opSnippet:ORt,packedOpSnippet:FRt,cpuKernelImpl:CTt}),URt={kernelName:Z2,backendName:"webgl",kernelFunc:BRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zRt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const i=e.length,s=Ir(i),o=n.map(u=>u[0]).join(","),a=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VRt{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,v)=>p[0]+e[v]+p[1]);const i=e.length,s=Ir(i),o=n.map(p=>p[0]).join(","),a=n.map((p,v)=>p[0]+e[v]).join(","),l=Mo("rc",i),c=Mo("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,f=r==="reflect"?0:1;let h="";if(i===1){const p=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const p=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${p}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[i-1]} += 1;
          if(${u}) {
            ${p}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WRt=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:s}=n,o=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new VRt(r.shape,i,s):new zRt(r.shape,i,s);return e.runWebGLProgram(o,[r],r.dtype)},GRt={kernelName:M3,backendName:"webgl",kernelFunc:WRt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HRt=`if (b == 0.0) return NAN;
  return mod(a, b);`,jRt=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+jg+`
  return result;
`,XRt=zs({opSnippet:HRt,packedOpSnippet:jRt}),qRt={kernelName:J2,backendName:"webgl",kernelFunc:XRt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YRt{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KRt=`
if (a == b) {
  return 1.0;
};
return a / b;`,ZRt=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Vve=zs({opSnippet:KRt,packedOpSnippet:ZRt,checkOutOfBounds:!0}),JRt={kernelName:L2,backendName:"webgl",kernelFunc:Vve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uQ="return a - b;",Wve=zs({opSnippet:uQ,packedOpSnippet:uQ,supportsComplex:!0,cpuKernelImpl:HTt}),QRt={kernelName:p_,backendName:"webgl",kernelFunc:Wve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gve(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:s}=r,o=qn([s],i.shape),a=zve({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=ji(a.shape,o),c=kt({inputs:{x:a},backend:n,attrs:{shape:l}}),u=Wve({inputs:{a:i,b:c},backend:n}),d=Fve({inputs:{x:u},backend:n}),f=bP({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),h=kt({inputs:{x:f},backend:n,attrs:{shape:l}}),p=Vve({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}const e3t={kernelName:H3,backendName:"webgl",kernelFunc:Gve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3t(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:s,seed:o,normalized:a}=r,l=a?i:Gve({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new YRt(c,u,s),f=[[o]],h=n.runWebGLProgram(d,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),h}const n3t={kernelName:Cfe,backendName:"webgl",kernelFunc:t3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r3t=hc+`
  return -x;
`,i3t=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function s3t(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[o,a]=ETt(s.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let i;return Qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new rh(r.shape,i3t):i=new Iu(r.shape,r3t),n.runWebGLProgram(i,[r],r.dtype)}const o3t={kernelName:A3,backendName:"webgl",kernelFunc:s3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a3t=NV;function l3t(t){tl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(i.dataId),u=n.readSync(s.dataId),{selectedIndices:d}=a3t(c,u,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const c3t={kernelName:O8,backendName:"webgl",kernelFunc:l3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u3t=$V;function d3t(t){tl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(i.dataId),d=n.readSync(s.dataId),{selectedIndices:f,validOutputs:h}=u3t(u,d,o,a,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const f3t={kernelName:F8,backendName:"webgl",kernelFunc:d3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h3t=DV;function p3t(t){tl("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:s}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(i.dataId),d=n.readSync(s.dataId),f=o,h=a,p=l,v=c,{selectedIndices:g,selectedScores:m}=h3t(u,d,f,h,p,v);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([m.length],"float32",new Float32Array(m))]}const m3t={kernelName:B8,backendName:"webgl",kernelFunc:p3t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g3t{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v3t=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:s,depth:o,onValue:a,offValue:l}=r,c=it(i.shape),u=new g3t(c,o,a,l),d=kt({inputs:{x:i},backend:n,attrs:{shape:[c]}}),f=n.runWebGLProgram(u,[d],s);n.disposeIntermediateTensorInfo(d);const h=[...i.shape,o],p=kt({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),p},y3t={kernelName:R3,backendName:"webgl",kernelFunc:v3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mk(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=z_({inputs:{input:r},backend:n}),s=mk({inputs:{x:i},backend:n}),o=wP({inputs:{input:r},backend:n}),a=mk({inputs:{x:o},backend:n}),l=cp({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return V_({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const x3t={kernelName:q3,backendName:"webgl",kernelFunc:mk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hve(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=z_({inputs:{input:r},backend:n}),s=Hve({inputs:{x:i},backend:n}),o=wP({inputs:{input:r},backend:n}),a=mk({inputs:{x:o},backend:n}),l=cp({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return V_({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const b3t={kernelName:I3,backendName:"webgl",kernelFunc:Hve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3t(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return s5({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const s=e[0].shape,o=e[0].dtype;e.forEach(u=>{s8(s,u.shape,"All tensors passed to stack must have matching shapes"),ue(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=s5({inputs:{input:u},backend:n,attrs:{dim:i}});return a.push(d),d}),c=Ive({inputs:l,backend:n,attrs:{axis:i}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const S3t={kernelName:P3,backendName:"webgl",kernelFunc:w3t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _3t{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const i=e.length,s=Ir(i),o=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${o});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C3t{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((v,g)=>v[0]+e[g]+v[1]);const i=e.length,s=Ir(i),o=n.map(v=>v[0]).join(","),a=n.map((v,g)=>v[0]+e[g]).join(","),l=Mo("rc",i),c=Mo("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,f=[`${s} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${u}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${u}) {`],h=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let v=0,g=i===1?2:4;v<g;v++)p+=`
        ${f[v]}
        if (${h}) {
          result[${v}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${v}] = getChannel(getX(${c.join()}), ${d});
        }
      `;p+=i===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${o});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jve=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:s,constantValue:o}=r;if(it(i.shape)===0){const c=s.map((u,d)=>u[0]+i.shape[d]+u[1]);return V_({backend:n,attrs:{shape:c,value:o,dtype:i.dtype}})}const a=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new C3t(i.shape,s,o):new _3t(i.shape,s,o),l=[[o]];return n.runWebGLProgram(a,[i],i.dtype,l)},T3t={kernelName:N3,backendName:"webgl",kernelFunc:jve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E3t=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,M3t=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+jg+`
  return result;
`,A3t=zs({opSnippet:E3t,packedOpSnippet:M3t}),k3t={kernelName:e_,backendName:"webgl",kernelFunc:A3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:s,keepDims:o}=r,a=i.shape.length,l=[],c=qn(s,i.shape);let u=c;const d=fi(u,a);let f=i;d!=null&&(f=Do({inputs:{x:i},backend:n,attrs:{perm:d}}),u=Ni(u.length,a),l.push(f)),Us("prod",u,a);let h;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:v,outShape:g,outDtype:m}=ATt(f.shape,f.dtype,p,u);h=n.makeTensorInfo(g,m,v)}else{const[p,v]=_s(f.shape,u),g=it(v),m=kt({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}}),y=J8(i.dtype),x=Xg(m,y,"prod",n);h=kt({inputs:{x},backend:n,attrs:{shape:p}}),l.push(m),l.push(x)}if(o){l.push(h);const p=ji(h.shape,c);h=kt({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const R3t={kernelName:D3,backendName:"webgl",kernelFunc:I3t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3t(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:s,indices:o}=e,{outputRaggedRank:a}=r,l=i.map(m=>n.readSync(m.dataId)),c=i.map(m=>m.shape),u=n.readSync(s.dataId),d=n.readSync(o.dataId),[f,h,p]=kTt(l,c,u,s.shape,s.dtype,d,o.shape,a),v=f.map(m=>n.makeTensorInfo([m.length],"int32",m)),g=n.makeTensorInfo(p,s.dtype,h);return v.concat([g])}const N3t={kernelName:Tfe,backendName:"webgl",kernelFunc:P3t};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3t(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:s}=e,o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,u]=ITt(o,r.shape,r.dtype,a,i.shape,l,s.shape),d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const D3t={kernelName:Efe,backendName:"webgl",kernelFunc:$3t};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3t(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:s,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(i.dataId),u=n.readSync(s.dataId),d=n.readSync(o.dataId),f=a.map(g=>n.readSync(g.dataId)),h=a.map(g=>g.shape),[p,v]=RTt(c,i.shape,u,s.shape,s.dtype,d,o.shape,f,h,l);return n.makeTensorInfo(p,s.dtype,v)}const O3t={kernelName:Mfe,backendName:"webgl",kernelFunc:L3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xve=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:s,dtype:o}=n,a=PTt(r,i,s,o);return e.makeTensorInfo([a.length],o,a)},F3t={kernelName:U8,backendName:"webgl",kernelFunc:Xve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B3t="return 1.0 / x;",U3t=ar({opSnippet:B3t}),z3t={kernelName:t_,backendName:"webgl",kernelFunc:U3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V3t=hc+`
  return (x < 0.0) ? 0.0 : x;
`,W3t=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,G3t=ar({opSnippet:V3t,packedOpSnippet:W3t}),H3t={kernelName:n_,backendName:"webgl",kernelFunc:G3t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j3t=hc+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,X3t=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,q3t=ar({opSnippet:j3t,packedOpSnippet:X3t}),Y3t={kernelName:r_,backendName:"webgl",kernelFunc:q3t};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K3t{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let f;s?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z3t{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let f;s?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3t(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,c]=a,u=Qe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Z3t(i.shape,l,c,s,o):new K3t(i.shape,l,c,s,o);return n.runWebGLProgram(u,[i],"float32")}const Q3t={kernelName:F3,backendName:"webgl",kernelFunc:J3t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ePt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],f=1/u,h=1/d,p=Math.ceil(f)*2+2,v=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tPt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r,a=new ePt(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const nPt={kernelName:W8,backendName:"webgl",kernelFunc:tPt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rPt{constructor(e,n,r,i,s){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],f=i?"0.5":"0.0";let h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iPt{constructor(e,n,r,i,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?a-1:a,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],f=i?"0.5":"0.0";let h;s?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sPt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:s,halfPixelCenters:o,size:a}=r,[l,c]=a,u=Qe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new iPt(i.shape,l,c,s,o):new rPt(i.shape,l,c,s,o);return n.runWebGLProgram(u,[i],i.dtype)}const oPt={kernelName:O3,backendName:"webgl",kernelFunc:sPt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aPt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,s]=n,[,o,a]=e,l=[r&&o>1?i-1:i,r&&a>1?s-1:s],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],f=1/u,h=1/d,p=Math.ceil(f)*2+2,v=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${v});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lPt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:s}=e,{alignCorners:o}=r,a=new aPt(s.shape,i.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const cPt={kernelName:V8,backendName:"webgl",kernelFunc:lPt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uPt{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,s=e.map((a,l)=>i(l)).join(","),o=Ir(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dPt{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=Mo("rc",r),s=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Ir(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${s}){
            result.g = ${c(i.slice())};
          }
          if(${o}) {
            result.b = ${u(i.slice())};
            if(${s}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return f(p)}function c(p){return p[r-1]="("+p[r-1]+" + 1)",f(p)}function u(p){return p[r-2]="("+p[r-2]+" + 1)",f(p)}function d(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",f(p)}function f(p){const v=e.map((y,x)=>h(x,p)),g=v.join(","),m=v.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${m}))`}function h(p,v){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${v[p]} - 1`:`${v[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fPt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:s}=r,o=i.shape.length,a=qn(s,i.shape);if(o===0)return $a({inputs:{x:i},backend:n});const l=Qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dPt(i.shape,a):new uPt(i.shape,a);return n.runWebGLProgram(l,[i],i.dtype)}const hPt={kernelName:B3,backendName:"webgl",kernelFunc:fPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pPt{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mPt={kernelName:K8,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:s,center:o}=e,a=n,l=new pPt(r.shape,s),[c,u]=XV(o,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(i),Math.cos(i)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gPt=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,vPt=ar({opSnippet:gPt}),yPt={kernelName:i_,backendName:"webgl",kernelFunc:vPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xPt="return inversesqrt(x);",bPt=ar({opSnippet:xPt,cpuKernelImpl:NTt}),wPt={kernelName:s_,backendName:"webgl",kernelFunc:bPt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YW{constructor(e,n,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=Ir(s.length),u=Ir(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let v="";l&&(v="coords[0], coords[1]");const g=`getDefaultValue(${v})`,m=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${m};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SPt{constructor(e,n,r,i,s,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=Ir(s.length),u=Ir(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let v="";l&&(v="coords[0], coords[1]");const g=`getDefaultValue(${v})`,m=n>1?"strides[j]":"strides",y=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${m};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${y};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Pt(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:s}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=zg(s,i,o),f=[d/c,c];if(d===0)return n.makeTensorInfo(o,i.dtype);const h=kt({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),p=kt({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;Qe().getBool("WEBGL_PACK")?g=new SPt(l,a,h.shape.length,p.shape.length,u,f):g=new YW(l,a,h.shape.length,p.shape.length,u,f);const m=n.runWebGLProgram(g,[p,h,v],p.dtype),y=kt({inputs:{x:m},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),y}const CPt={kernelName:Afe,backendName:"webgl",kernelFunc:_Pt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TPt{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=Qe().getNumber("WEBGL_VERSION")===2?s:o,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EPt(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:s}=e,{side:o}=r,a=new TPt(i.shape[0],i.shape[1],s.shape[1],o),l=[[i.shape[1]]];return n.runWebGLProgram(a,[i,s],"int32",l)}const MPt={kernelName:Ife,backendName:"webgl",kernelFunc:EPt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class APt{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",i="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);i=l.join(),s=c.join()}const o=Ir(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kPt(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:s}=e,o=new APt(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,s],Pa(i.dtype,s.dtype))}const IPt={kernelName:U3,backendName:"webgl",kernelFunc:kPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RPt=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${rP};
  float scale = ${iP};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,PPt=ar({opSnippet:RPt}),NPt={kernelName:o_,backendName:"webgl",kernelFunc:PPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Pt=Cx+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,DPt=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,LPt=ar({opSnippet:$Pt,packedOpSnippet:DPt,cpuKernelImpl:DTt}),OPt={kernelName:u_,backendName:"webgl",kernelFunc:LPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FPt=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,BPt=ar({opSnippet:FPt}),UPt={kernelName:c_,backendName:"webgl",kernelFunc:BPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zPt=Cx+`
  return sin(x);
`,VPt=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${jg}
  return result;
`,WPt=ar({opSnippet:zPt,packedOpSnippet:VPt}),GPt={kernelName:a_,backendName:"webgl",kernelFunc:WPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HPt=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,jPt=ar({opSnippet:HPt}),XPt={kernelName:l_,backendName:"webgl",kernelFunc:jPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qPt=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,YPt=ar({opSnippet:qPt}),KPt={kernelName:d_,backendName:"webgl",kernelFunc:YPt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZPt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:s,paddings:o}=r;ue(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((m,y)=>m*y),l=[[0,0]];l.push(...o);for(let m=1+s.length;m<i.shape.length;++m)l.push([0,0]);const c=[],u=jve({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),d=E_(u.shape,s,a,!1),f=M_(d.length,s.length,!1),h=A_(u.shape,s,a,!1),p=kt({inputs:{x:u},backend:n,attrs:{shape:d}}),v=Do({inputs:{x:p},backend:n,attrs:{perm:f}}),g=kt({inputs:{x:v},backend:n,attrs:{shape:h}});return c.push(u),c.push(p),c.push(v),c.forEach(m=>n.disposeIntermediateTensorInfo(m)),g},JPt={kernelName:W3,backendName:"webgl",kernelFunc:ZPt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QPt(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:s,defaultValue:o}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(i.dataId),c=n.readSync(s.dataId),u=n.readSync(o.dataId)[0],[d,f,h,p,v]=OTt(a,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],i.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}const eNt={kernelName:Rfe,backendName:"webgl",kernelFunc:QPt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tNt(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const o=Array.from(n.readSync(i.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[c,u,d]=FTt(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const nNt={kernelName:Pfe,backendName:"webgl",kernelFunc:tNt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rNt(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,u]=vve(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const iNt={kernelName:Nfe,backendName:"webgl",kernelFunc:rNt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sNt(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const o=n.readSync(r.dataId),a=n.readSync(i.dataId),l=n.readSync(s.dataId),[c,u]=vve(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const oNt={kernelName:$fe,backendName:"webgl",kernelFunc:sNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aNt(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:s,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=zg(s,i,a),h=!1;if(s.dtype==="string"){const m=n.bufferSync(i),y=n.bufferSync(s),x=Ph(n.readSync(o.dataId)[0]),S=$Tt(m,y,a,f,u,c,l,d,x,h);return n.makeTensorInfo(a,S.dtype,S.values)}const p=new YW(c,l,i.shape.length,s.shape.length,d,[f,1],h),v=n.runWebGLProgram(p,[s,i,o],s.dtype),g=kt({inputs:{x:v},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(v),g}const lNt={kernelName:Dfe,backendName:"webgl",kernelFunc:aNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cNt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:s,axis:o}=r,a=qn(o,i.shape)[0],l=lW(i,s,a),c=i.shape.length,u=new Array(c).fill(0),d=i.shape.slice();return l.map(f=>{const h=[...d];h[a]=f;const p=Tx({inputs:{x:i},backend:n,attrs:{begin:u,size:h}});return u[a]+=f,p})}const uNt={kernelName:G3,backendName:"webgl",kernelFunc:cNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dQ="return sqrt(x);",dNt=ar({opSnippet:dQ,packedOpSnippet:dQ,cpuKernelImpl:BTt}),fNt={kernelName:f_,backendName:"webgl",kernelFunc:dNt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hNt="return x * x;",pNt=ar({opSnippet:hNt}),mNt={kernelName:G8,backendName:"webgl",kernelFunc:pNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fQ="return (a - b) * (a - b);",gNt=zs({opSnippet:fQ,packedOpSnippet:fQ}),vNt={kernelName:h_,backendName:"webgl",kernelFunc:gNt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yNt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(i.dataId),o=df(s),a=UTt(o,"string",r);return n.makeTensorInfo(i.shape,"string",a)}const xNt={kernelName:H8,backendName:"webgl",kernelFunc:yNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bNt({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=hc+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new Iu(r.shape,i);return n.runWebGLProgram(s,[r],r.dtype)}const wNt={kernelName:y_,backendName:"webgl",kernelFunc:bNt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SNt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,s=Ir(r.length),o=Ir(r.length);let a="";if(i===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Nt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:s,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:h,finalShape:p,isIdentity:v,sliceDim0:g,isSimpleSlice:m,begin:y,end:x,strides:S}=GV(i.shape,s,o,a,l,c,u,d,f);let _;if(v)_=kt({inputs:{x:i},backend:n,attrs:{shape:p}});else if(g||m){ue(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const T=zV(y,x,S),A=Tx({inputs:{x:i},backend:n,attrs:{begin:y,size:T}});_=kt({inputs:{x:A},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(A)}else if(n.shouldExecuteOnCPU([i])){const A=n.readSync(i.dataId),M=Hn(i.shape,i.dtype,A),E=zTt(h,M,S,y);_=n.makeTensorInfo(p,i.dtype,E.values)}else{const A=new SNt(y,S,h);_=n.runWebGLProgram(A,[i],i.dtype)}const C=kt({inputs:{x:_},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(_),C}const CNt={kernelName:j8,backendName:"webgl",kernelFunc:_Nt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TNt(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:s,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.readSync(u.dataId),h=n.readSync(d.dataId),[p,v]=VTt(f,h,i,s,o,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",v)]}const ENt={kernelName:Lfe,backendName:"webgl",kernelFunc:TNt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MNt(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:s,delimiter:o}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(s.dataId),l=n.readSync(o.dataId)[0],[c,u,d]=WTt(a,l,i),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const ANt={kernelName:Ofe,backendName:"webgl",kernelFunc:MNt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kNt(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(s.dataId),a=GTt(o,i);return n.makeTensorInfo(s.shape,"int32",a)}const INt={kernelName:Ffe,backendName:"webgl",kernelFunc:kNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RNt="return tan(x);",PNt=ar({opSnippet:RNt}),NNt={kernelName:m_,backendName:"webgl",kernelFunc:PNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Nt=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,DNt=ar({opSnippet:$Nt}),LNt={kernelName:g_,backendName:"webgl",kernelFunc:DNt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ONt(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:s,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=zg(o,s,i.shape),f=[d/c,c];if(d===0)return n.makeTensorInfo(i.shape,s.dtype);const h=kt({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),p=kt({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),v=kt({inputs:{x:i},backend:n,attrs:{shape:f}}),g=new YW(l,a,h.shape.length,p.shape.length,u,f,!1,!0),m=n.runWebGLProgram(g,[p,h,v],v.dtype),y=kt({inputs:{x:m},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),y}const FNt={kernelName:kfe,backendName:"webgl",kernelFunc:ONt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BNt{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const i=Ir(this.rank),s=UNt(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function UNt(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qve(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:s}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),c=i.dtype==="string"?l.map(f=>Ph(f)):l,u=Hn(i.shape,i.dtype,c),d=jTt(u,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new BNt(i.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}const zNt={kernelName:v_,backendName:"webgl",kernelFunc:qve};class VNt{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class WNt{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Up(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function hQ(t){let e=1;for(;e<t;)e*=2;return e}function GNt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:s,sorted:o}=r,a=Qe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Qe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([i])||u<a||s>l){const E=n.readSync(i.dataId),[P,N]=XTt(E,c,i.dtype,s,o);return[n.makeTensorInfo(P.shape,P.dtype,P.values),n.makeTensorInfo(N.shape,N.dtype,N.values)]}if(s===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[i,V_({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(i.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(i):i,v=it(c)/u,g=kt({inputs:{x:h},attrs:{shape:[v,u]},backend:n});f&&Up(n,h);const m=hQ(s),y=hQ(u);let x=null;const S=()=>x===null?[g,g]:[g,x],_=(E,P,N)=>{const F=S(),$=new VNt(N),z=[[u],[x===null?1:0],[Number.NEGATIVE_INFINITY],[E],[P]],X=x;x=n.runWebGLProgram($,F,"int32",z),Up(n,X)};for(let E=1;E<m;E*=2){const P=E*2;for(let N=E;N>=1;N/=2)_(P,N,[v,y])}for(let E=y;E>m;E/=2){const P=S(),N=new WNt([v,E/2]),$=[[u],[x===null?1:0],[m]],O=x;x=n.runWebGLProgram(N,P,"int32",$),Up(n,O);const z=m/2,X=z*2;for(let D=z;D>=1;D/=2)_(X,D,x.shape)}let C=x;x=Tx({inputs:{x},backend:n,attrs:{begin:0,size:[v,s]}}),Up(n,C);let T=Uve({inputs:{x:g,indices:x},backend:n,attrs:{axis:1,batchDims:1}});Up(n,g);const A=c.slice(0,-1);A.push(s),C=x,x=kt({inputs:{x},attrs:{shape:A},backend:n}),Up(n,C);const M=T;return T=kt({inputs:{x:T},attrs:{shape:A},backend:n}),Up(n,M),[T,x]}const HNt={kernelName:X8,backendName:"webgl",kernelFunc:GNt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jNt{constructor(e,n,r,i,s,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XNt(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:s}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=r,[u,d,f,h]=i.shape,[p,v]=c??[d,f],g=[u,p,v,h],m=new jNt(d,f,o,a,l,g);return n.runWebGLProgram(m,[i,s],"float32")}const qNt={kernelName:q8,backendName:"webgl",kernelFunc:XNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YNt(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:s}=e;B_(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(s.dataId),{outputValues:a,outputShape:l,indices:c}=qTt(o,i,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const KNt={kernelName:Y8,backendName:"webgl",kernelFunc:YNt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZNt(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:s}=r;s<0&&(s+=i.shape.length);const o=i,a=o.shape.length,l=i.shape[s],c=new Array(a-1);let u=0;for(let v=0;v<a;v++)v!==s&&(c[u++]=o.shape[v]);const d=[],f=new Array(a).fill(0),h=o.shape.slice();h[s]=1;const p=new Array(l);for(let v=0;v<p.length;v++){f[s]=v;const g=Tx({inputs:{x:o},backend:n,attrs:{begin:f,size:h}}),m=kt({inputs:{x:g},backend:n,attrs:{shape:c}});p[v]=m,d.push(g)}return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),p}const JNt={kernelName:j3,backendName:"webgl",kernelFunc:ZNt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QNt{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,s=e.inSize,o=e.numSegments,a=o*Math.ceil(s/r);this.outputShape=[i,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$t(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:s}=e,{numSegments:o}=r,a=i.shape.length,l=[];let c=0;const u=fi([c],a);let d=i;u!=null&&(d=Do({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(d),c=Ni(1,a)[0]);const f=Rpe(d.shape,c,o),h=it([d.shape[c]]),p=kt({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(p);const v=J8(i.dtype),g=(S,_,C,T,A)=>{const M=S.shape[0],E=S.shape[1],P=Ipe(E,A),N={windowSize:P,inSize:E,batchSize:M,numSegments:A},F=new QNt(N,_),$=n.compileAndRun(F,[S,C],T);if(l.push($),$.shape[1]===A)return $;const O=Xve({backend:n,attrs:{start:0,stop:A,step:1,dtype:"float32"}}),z=qve({inputs:{x:O},backend:n,attrs:{reps:[E/P]}});return l.push(O),l.push(z),g($,_,z,T,A)},m=g(p,"unsortedSegmentSum",s,v,o),y=kt({inputs:{x:m},backend:n,attrs:{shape:f}});let x=y;if(u!=null){l.push(y);const S=rp(u);x=Do({inputs:{x},backend:n,attrs:{perm:S}})}return l.forEach(S=>n.disposeIntermediateTensorInfo(S)),x}const t$t={kernelName:X3,backendName:"webgl",kernelFunc:e$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n$t=[BEt,zEt,GEt,XEt,YEt,JEt,eMt,nMt,oMt,lMt,dMt,pMt,vMt,wMt,CMt,EMt,AMt,PMt,$Mt,LMt,UMt,XMt,YMt,QMt,tAt,aAt,cAt,hAt,SEt,gAt,wAt,TAt,RAt,$At,LAt,FAt,UAt,GAt,XAt,KAt,JAt,ekt,nkt,skt,akt,dkt,hkt,gkt,xkt,wkt,Tkt,kkt,Nkt,Lkt,Bkt,Ukt,Vkt,Gkt,jkt,qkt,Kkt,eIt,rIt,oIt,lIt,dIt,pIt,yIt,SIt,wEt,CIt,xAt,MIt,IIt,NIt,CEt,OIt,zIt,WIt,XIt,KIt,eRt,rRt,aRt,dRt,pRt,gRt,bRt,SRt,CRt,ARt,IRt,PRt,$Rt,LRt,URt,GRt,qRt,n3t,MEt,o3t,c3t,f3t,m3t,rAt,y3t,b3t,S3t,T3t,k3t,EEt,R3t,N3t,D3t,O3t,F3t,iAt,JRt,z3t,H3t,Y3t,kEt,Q3t,nPt,oPt,cPt,hPt,mPt,yPt,wPt,CPt,MPt,IPt,NPt,OPt,UPt,GPt,XPt,HMt,e3t,KPt,JPt,eNt,nNt,iNt,oNt,lNt,uNt,fNt,mNt,vNt,xNt,wNt,CNt,ENt,ANt,INt,QRt,LEt,NNt,LNt,FNt,zNt,HNt,qNt,OEt,KNt,JNt,t$t,x3t];for(const t of n$t)Ufe(t);let H0=[],cL=[];function r$t(){let t=R.useRef(),[e,n]=R.useState(-1);const[r,i]=R.useState(!0),[s,o]=R.useState(!1);R.useEffect(()=>(a(),console.log("MNIST MOUNTED"),()=>{console.log("MNIST UNMONUNTED")}),[]);const a=()=>{const f=t.current.getContext("2d");t.current.width=280,t.current.height=280,f.lineWidth=10,f.strokeStyle="red",f.beginPath(),f.rect(20,280*.2,240,280*.7),f.stroke();let h=!1;t.current.addEventListener("mousedown",p);function p(){r?h=!0:h=!1}t.current.addEventListener("mouseup",v);function v(){h=!1,f.beginPath(),o(!0)}t.current.addEventListener("mousemove",g);function g(m){if(!h)return;f.lineWidth=22,f.lineCap="round",f.beginPath();let y=m.clientX-t.current.offsetLeft,x=m.clientY-t.current.offsetTop;H0.push(y),H0.push(x),f.lineTo(y,x),f.strokeStyle="white",f.stroke()}};function l(){let f=[];const h=t.current.getContext("2d");let p=0,v=0,g=0;g=H0.length/2,f=H0,d(),h.scale(.095,.095);for(let y=0;y<g;y++)p=f[Math.floor(2*y)],v=f[Math.floor(2*y)+1],h.lineTo(p,v),h.strokeStyle="white",h.stroke();h.setTransform(1,0,0,1,0,0);const m=h.getImageData(0,0,28,28).data;for(let y=0;y<m.length;y++)y%4===1&&cL.push(m[y]>0?1:0)}function c(f){if(f.length===0)return-1;for(var h=f[0],p=0,v=1;v<f.length;v++)f[v]>h&&(p=v,h=f[v]);return p}async function u(){const f=await yyt("https://raw.githubusercontent.com/edwin-torres/cnn/main/model.json"),h=opt(cL,[1,28,28,1]),p=f.predict(h);n(c(p.dataSync())),H0=[],cL=[]}function d(){H0=[];const f=t.current.getContext("2d");f.beginPath(),f.strokeStyle="#DC143C",f.clearRect(0,0,t.current.width,t.current.height)}return L.jsxs("div",{children:[L.jsxs(Gn,{sx:{textAlign:"center",m:2},children:[L.jsxs(un,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left"},children:["Using ",L.jsx(un,{sx:{textAlign:"left",color:"red",fontSize:35},gutterBottom:!0,display:"inline",children:" ONE"})," stroke, use the mouse to draw a single digit inside the red box.  Cover as much of the red box as possible."]}),L.jsxs(un,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left"},children:["The nueral network used in this project was developed in  ",L.jsx(Xc,{href:"https://github.com/edwin-torres/cnn/blob/main/DigitPrediction-CNN.ipynb",target:"_blank",underline:"hover",children:"this jupyter notebook."}),"."]}),L.jsxs(un,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left",color:"NavajoWhite",fontSize:55},children:["Prediction: ",e>-1?e:" "]})]}),r?L.jsx("div",{style:{textAlign:"center"},children:L.jsx("canvas",{style:{size:"100%",border:"5px solid black",background:"black"},ref:t})}):L.jsx(L.Fragment,{}),r&&s?L.jsxs(Gn,{sx:{m:2,textAlign:"center"},children:[L.jsx(Is,{onClick:()=>{l(),u(),i(!1)},sx:{m:2,textAlign:"center"},variant:"contained",children:"Make Prediction"}),"   "]}):L.jsx(L.Fragment,{})]})}function i$t({name:t,description:e,code_url:n}){return L.jsxs(cie,{sx:{p:0,m:0,bgcolor:"#d7ccc8",borderRadius:"16px",justifyContent:"center",textAlign:"center",display:"flex"},children:[L.jsx(die,{children:L.jsxs(Gn,{sx:{p:0,m:0,height:200,width:355},children:[L.jsx(un,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0}),L.jsx(Gn,{sx:{justifyContent:"center",textAlign:"center",display:"flex"},children:L.jsx(un,{variant:"h5",component:"div",sx:{mt:3,mb:3,maxWidth:200,minHeight:75},children:t})}),L.jsxs(un,{sx:{mb:3},variant:"body2",children:[e,L.jsx("br",{})]}),L.jsx(Is,{component:iw,to:n,target:"_blank",sx:{m:1,bgcolor:"#30a7d7","&.MuiButton-root:hover":{bgcolor:"#F15A59"}},variant:"contained",size:"small",children:" Notebook"})]})}),L.jsx(uie,{})]})}function s$t(){const t=[{name:"Forecasting Oil Production",description:" ",codeUrl:"https://github.com/edwin-torres/Shale/blob/main/shale.ipynb"},{name:"Airline Passanger Ratings",description:" ",codeUrl:"https://github.com/edwin-torres/airline-reviews/blob/main/AirlineReviews.ipynb"},{name:"Congress Generations",description:" ",codeUrl:"https://github.com/edwin-torres/congress/blob/main/Congress.ipynb"}];return L.jsx(Gn,{sx:{p:0,m:0,flexGrow:1,bgcolor:"black",textAlign:"center",justifyContent:"center",display:"flex"},children:L.jsx(iA,{container:!0,sx:{bgcolor:"black"},spacing:{xs:1,md:2},columns:{xs:1,sm:2,md:3},children:t.map((e,n)=>L.jsx(iA,{sx:{bgcolor:"black"},xs:1,sm:1,md:1,children:L.jsx(i$t,{name:e.name,description:e.description,code_url:e.codeUrl})},n))})})}function o$t(){let t=R.useRef();const e=R.useRef();R.useEffect(()=>(n(),console.log("Breakout MOUNTED"),()=>{cancelAnimationFrame(e.current),console.log("Breakout UNMONUNTED")}));const n=()=>{let r=t.current.getContext("2d"),i={},s=0,o=3,a="white",l=t.current.width/2,c=t.current.height-30,u=-2,d=-2,f=10;function h(){r.beginPath(),r.arc(l,c,f,0,Math.PI*2),r.fillStyle=a,r.fill(),r.closePath()}let p=10,v=85,g=t.current.width/2-v/2;function m(){r.beginPath(),r.rect(g,t.current.height-p,v,v),r.fillStyle=a,r.fill(),r.closePath()}let y=3,x=5,S=75,_=10,C=10,T=55,A=165,M=[],E=0,P=0;for(let j=0;j<x;j++){M[j]=[];for(let J=0;J<y;J++)M[j][J]={x:0,y:0,status:1}}function N(){for(let j=0;j<x;j++)for(let J=0;J<y;J++)M[j][J].status===1&&(E=j*(S+C)+A,P=J*(_+C)+T,M[j][J].x=E,M[j][J].y=P,r.beginPath(),r.rect(E,P,S,_),r.fillStyle="white",r.fill())}function F(){for(let j=0;j<x;j++)for(let J=0;J<y;J++)i=M[j][J],i.status===1&&(l>i.x&&l<i.x+S&&c>i.y&&c<i.y+_&&(d=-d,i.status=0,s++),s===x*y&&(alert(`USER WINS!
Score: `+s),document.location.reload()))}function $(){r.font="15px Arial",r.fillStyle="white",r.fillText("Score: "+s,8,20)}function O(){r.font="15px Arial",r.fillStyle="white",r.fillText("Lives: "+o,t.current.width-65,20)}let z=!1,X=!1;document.addEventListener("keydown",B,!1),document.addEventListener("keyup",V,!1),t.current.addEventListener("mousemove",D,!1);function D(j){let J=j.clientX-t.current.offsetLeft;J>v/4&&J<t.current.width-v/4&&(g=J-v/2)}function B(j){j.key==="Right"||j.key==="ArrowRight"?z=!0:(j.key==="Left"||j.key==="ArrowLeft")&&(X=!0)}function V(j){j.key==="Right"||j.key==="ArrowRight"?z=!1:(j.key==="Left"||j.key==="ArrowLeft")&&(X=!1)}function W(){r.clearRect(0,0,t.current.width,t.current.height),h(),m(),$(),O(),N(),F(),(l+u-f<0||l+u+f>t.current.width)&&(u=-u),c+d-f<0?d=-d:c+d+f>t.current.height&&(l>g&&l<g+v?d=-1.03*d:(o--,o===0?(alert("Game Over!"),document.location.reload()):(l=t.current.width/2,c=t.current.height-30,u=-2,d=-2,g=t.current.width/2-v/2))),l=l+u,c=c+d,z===!0&&(g=g+7,g+v>t.current.width&&(g=t.current.width-v)),X===!0&&(g=g-7,g<0&&(g=0)),e.current=requestAnimationFrame(W)}W()};return L.jsxs(Gn,{sx:{textAlign:"center",justifyItems:"center"},children:[L.jsx(un,{variant:"h3",sx:{textAlign:"center"},children:"Breakout"}),L.jsxs(un,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left"},children:["Following this ",L.jsx(Xc,{href:"https://developer.mozilla.org/en-US/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript",target:"_blank",underline:"hover",children:"canvas tutorial"}),"."]}),L.jsx(Gn,{sx:{display:"relative"},children:L.jsx("canvas",{style:{size:"100%",border:"10px solid #424242"},ref:t,width:"750",height:"500"})})]})}function Hd(){return Hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hd.apply(this,arguments)}var a$t=function(t){var e=t.layer,n=t.fillOpacity,r=t.borderWidth,i=t.getBorderColor,s=t.isInteractive,o=t.tooltip,a=Wy(),l=a.showTooltipFromEvent,c=a.hideTooltip,u=R.useCallback(function(g){l(R.createElement(o,{layer:e}),g,"left")},[l,e]),d=no(),f=d.animate,h=d.config,p=Gae(e.path),v=Jc({color:e.color,config:h,immediate:!f});return L.jsx(sr.path,{d:p,fill:e.fill?e.fill:v.color,fillOpacity:n,stroke:i(e),strokeWidth:r,onMouseMove:s?u:void 0,onMouseEnter:s?u:void 0,onMouseLeave:s?c:void 0})},l$t=function(t){var e=t.layers,n=t.fillOpacity,r=t.borderWidth,i=t.getBorderColor,s=t.isInteractive,o=t.tooltip;return L.jsx("g",{children:e.map(function(a,l){return L.jsx(a$t,{layer:a,getBorderColor:i,borderWidth:r,fillOpacity:n,isInteractive:s,tooltip:o},l)})})},c$t=function(t,e){var n=t.y2;return e==="center"?n=t.y1+(t.y2-t.y1)/2:e==="start"&&(n=t.y1),n},u$t=function(t){var e=t.data,n=t.dotComponent,r=t.position,i=t.getSize,s=t.getColor,o=t.getBorderWidth,a=t.getBorderColor;return L.jsx(L.Fragment,{children:e.map(function(l,c){return R.createElement(n,{key:c,datum:l,x:l.x,y:c$t(l,r),size:i(l),color:s(l),borderWidth:o(l),borderColor:a(l)})})})},d$t=function(t){var e=t.slice,n=t.height,r=t.tooltip,i=R.useState(!1),s=i[0],o=i[1],a=Wy(),l=a.showTooltipFromEvent,c=a.hideTooltip,u=R.useCallback(function(f){o(!0),l(R.createElement(r,{slice:e}),f,"left")},[o,l,r,e]),d=R.useCallback(function(){o(!1),c()},[o,c]);return L.jsxs("g",{transform:"translate("+e.x+", 0)",children:[s&&L.jsx("line",{x1:0,x2:0,y1:0,y2:n,stroke:"#000",strokeOpacity:.35,strokeWidth:1}),L.jsx("rect",{x:-20,width:40,height:n,fill:"#000",fillOpacity:0,onMouseEnter:u,onMouseMove:u,onMouseLeave:d})]})},f$t=function(t){var e=t.slices,n=t.height,r=t.tooltip;return L.jsx("g",{children:e.map(function(i){return L.jsx(d$t,{slice:i,height:n,tooltip:r},i.index)})})},Sc={label:"id",order:"none",offsetType:"wiggle",curve:"catmullRom",axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,colors:{scheme:"nivo"},fillOpacity:1,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableDots:!1,dotPosition:"center",dotComponent:function(t){var e=t.x,n=t.y,r=t.size,i=t.color,s=t.borderWidth,o=t.borderColor,a=no(),l=a.animate,c=a.config,u=Jc({x:e,y:n,radius:.5*r,color:i,config:c,immediate:!l});return L.jsx(sr.circle,{cx:u.x,cy:u.y,r:u.radius,fill:u.color,strokeWidth:s,stroke:o})},dotSize:6,dotColor:{from:"color"},dotBorderWidth:0,dotBorderColor:{from:"color"},isInteractive:!0,tooltip:function(t){var e=t.layer;return L.jsx(BI,{id:e.label,enableChip:!0,color:e.color})},enableStackTooltip:!0,stackTooltip:function(t){var e=t.slice,n=R.useMemo(function(){return e.stack.map(function(r){return[L.jsx(gse,{color:r.color},r.layerId),r.layerLabel,r.formattedValue]})},[e]);return L.jsx(vse,{rows:n})},legends:[],legendLabel:"id",role:"application"},Zi=Hd({},Sc,{layers:["grid","axes","layers","dots","slices","legends"],defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),h$t=["isInteractive","animate","motionConfig","theme","renderWrapper"],p$t=function(t){var e=t.data,n=t.keys,r=t.label,i=t.valueFormat,s=t.offsetType,o=t.order,a=t.curve,l=t.layers,c=l===void 0?Zi.layers:l,u=t.width,d=t.height,f=t.margin,h=t.axisTop,p=t.axisRight,v=t.axisBottom,g=v===void 0?Zi.axisBottom:v,m=t.axisLeft,y=m===void 0?Zi.axisLeft:m,x=t.enableGridX,S=x===void 0?Zi.enableGridX:x,_=t.enableGridY,C=_===void 0?Zi.enableGridY:_,T=t.colors,A=t.fillOpacity,M=A===void 0?Zi.fillOpacity:A,E=t.borderWidth,P=E===void 0?Zi.borderWidth:E,N=t.borderColor,F=t.defs,$=F===void 0?Zi.defs:F,O=t.fill,z=O===void 0?Zi.fill:O,X=t.enableDots,D=X===void 0?Zi.enableDots:X,B=t.dotPosition,V=B===void 0?Zi.dotPosition:B,W=t.dotComponent,j=W===void 0?Zi.dotComponent:W,J=t.dotSize,Q=t.dotColor,te=t.dotBorderWidth,re=t.dotBorderColor,se=t.isInteractive,fe=se===void 0?Zi.isInteractive:se,ae=t.tooltip,ye=ae===void 0?Zi.tooltip:ae,le=t.enableStackTooltip,H=le===void 0?Zi.enableStackTooltip:le,Me=t.stackTooltip,we=Me===void 0?Zi.stackTooltip:Me,Ee=t.legends,ge=Ee===void 0?Zi.legends:Ee,qe=t.role,Ae=t.ariaLabel,ee=t.ariaLabelledBy,Y=t.ariaDescribedBy,oe=o2(u,d,f),xe=oe.margin,Se=oe.innerWidth,be=oe.innerHeight,Re=oe.outerWidth,Ke=oe.outerHeight,ze=function(Ie){var Ce=Ie.width,ut=Ie.height,dt=Ie.data,yt=Ie.keys,vt=Ie.label,Vt=vt===void 0?Sc.label:vt,It=Ie.valueFormat,en=Ie.offsetType,Dt=en===void 0?Sc.offsetType:en,mt=Ie.order,jt=mt===void 0?Sc.order:mt,mn=Ie.curve,fn=mn===void 0?Sc.curve:mn,_t=Ie.colors,Lt=_t===void 0?Sc.colors:_t,Pt=Ie.borderColor,bt=Pt===void 0?Sc.borderColor:Pt,Wt=Ie.dotSize,Cn=Wt===void 0?Sc.dotSize:Wt,Z=Ie.dotColor,K=Z===void 0?Sc.dotColor:Z,ne=Ie.dotBorderWidth,G=ne===void 0?Sc.dotBorderWidth:ne,ie=Ie.dotBorderColor,ce=ie===void 0?Sc.dotBorderColor:ie,Te=PGe(fn),de=R.useMemo(function(){return oVe().x(function(Vn){return Vn.x}).y0(function(Vn){return Vn.y1}).y1(function(Vn){return Vn.y2}).curve(Te)},[Te]),Be=R.useMemo(function(){return Eae().keys(yt).offset(IGe(Dt)).order(AGe(jt))},[yt,Dt,jt]),Je=R.useMemo(function(){var Vn=[],Zn=[],Tn=Be(dt).map(function(rn){return rn.map(function(an){return Vn.push(an[0]),Zn.push(an[1]),Hd({},an,{value:an.data[rn.key]})})}),hn=Math.min.apply(Math,Vn),er=Math.max.apply(Math,Zn);return[Tn,ule({type:"point"},{all:Array.from({length:dt.length},function(rn,an){return an}),min:0,max:dt.length},Ce),cle({type:"linear",min:hn},{all:[hn,er],min:hn,max:er},ut,"y")]},[Be,dt,Ce,ut]),nt=Je[0],$e=Je[1],Ct=Je[2],ht=Pr(),ft=Yz(Lt,"id"),Ot=zc(bt,ht),Qt=R.useMemo(function(){return typeof Cn=="function"?Cn:function(){return Cn}},[Cn]),nn=zc(K,ht),vn=R.useMemo(function(){return typeof G=="function"?G:function(){return G}},[G]),Nt=zc(ce,ht),Mt=qd(Vt),En=a2(It),tn=R.useMemo(function(){return nt.map(function(Vn,Zn){var Tn=Vn.map(function(rn,an){return{layerId:yt[Zn],layerLabel:"",index:an,color:"",x:$e(an),value:rn.value,formattedValue:En(rn.value),y1:Ct(rn[0]),y2:Ct(rn[1])}}),hn={id:yt[Zn],path:de(Tn)},er=Hd({},hn,{label:Mt(hn),color:ft(hn)});return Hd({},er,{data:Tn.map(function(rn){return rn.layerLabel=er.label,rn.color=er.color,rn})})})},[nt,yt,Mt,de,ft,$e,Ct,En]),cn=R.useMemo(function(){return Array.from({length:dt.length},function(Vn,Zn){var Tn=tn.map(function(hn){return hn.data[Zn]}).sort(function(hn,er){return hn.y2-er.y2});return{index:Zn,x:tn[0].data[Zn].x,stack:Tn}})},[dt.length,tn]),lr=R.useMemo(function(){return{xScale:$e,yScale:Ct,layers:tn,slices:cn}},[$e,Ct,tn,cn]);return{xScale:$e,yScale:Ct,layers:tn,slices:cn,getBorderColor:Ot,getDotSize:Qt,getDotColor:nn,getDotBorderWidth:vn,getDotBorderColor:Nt,layerContext:lr}}({width:Se,height:be,data:e,keys:n,label:r,valueFormat:i,offsetType:s,order:o,curve:a,colors:T,borderColor:N,dotSize:J,dotColor:Q,dotBorderWidth:te,dotBorderColor:re}),Ne=ze.xScale,De=ze.yScale,Ve=ze.layers,gt=ze.slices,ct=ze.getBorderColor,Ye=ze.getDotSize,Xe=ze.getDotColor,Le=ze.getDotBorderWidth,pe=ze.getDotBorderColor,He=ze.layerContext,ot=Nz($,Ve,z),et={grid:null,axes:null,layers:null,dots:null,slices:null,legends:null};return c.includes("grid")&&(et.grid=L.jsx(Oz,{width:Se,height:be,xScale:S?Ne:null,yScale:C?De:null},"grid")),c.includes("axes")&&(et.axes=L.jsx(Lz,{xScale:Ne,yScale:De,width:Se,height:be,top:h,right:p,bottom:g,left:y},"axes")),c.includes("layers")&&(et.layers=L.jsx(l$t,{layers:Ve,fillOpacity:M,borderWidth:P,getBorderColor:ct,isInteractive:fe,tooltip:ye},"layers")),c.includes("dots")&&D&&(et.dots=L.jsx(R.Fragment,{children:Ve.map(function(Ie){return L.jsx(u$t,{id:Ie.id,color:Ie.color,data:Ie.data,dotComponent:j,position:V,getSize:Ye,getColor:Xe,getBorderWidth:Le,getBorderColor:pe},Ie.id)})},"dots")),c.includes("slices")&&fe&&H&&(et.slices=L.jsx(f$t,{slices:gt,height:be,tooltip:we},"slices")),c.includes("legends")&&(et.legends=L.jsx(R.Fragment,{children:ge.map(function(Ie,Ce){var ut=Ve.map(function(dt){return{id:dt.id,label:dt.label,color:dt.color,fill:dt.fill}}).reverse();return L.jsx(Jz,Hd({},Ie,{containerWidth:Se,containerHeight:be,data:ut}),Ce)})},"legends")),L.jsx(l2,{width:Re,height:Ke,margin:xe,defs:ot,role:qe,ariaLabel:Ae,ariaLabelledBy:ee,ariaDescribedBy:Y,children:c.map(function(Ie,Ce){var ut;return typeof Ie=="function"?L.jsx(R.Fragment,{children:R.createElement(Ie,He)},Ce):(ut=et==null?void 0:et[Ie])!=null?ut:null})})},m$t=function(t){var e=t.isInteractive,n=e===void 0?Zi.isInteractive:e,r=t.animate,i=r===void 0?Zi.animate:r,s=t.motionConfig,o=s===void 0?Zi.motionConfig:s,a=t.theme,l=t.renderWrapper,c=function(u,d){if(u==null)return{};var f,h,p={},v=Object.keys(u);for(h=0;h<v.length;h++)f=v[h],d.indexOf(f)>=0||(p[f]=u[f]);return p}(t,h$t);return L.jsx(tx,{animate:i,isInteractive:n,motionConfig:o,renderWrapper:l,theme:a,children:L.jsx(p$t,Hd({isInteractive:n},c))})},g$t=function(t){return L.jsx(nx,{children:function(e){var n=e.width,r=e.height;return L.jsx(m$t,Hd({width:n,height:r},t))}})};const v$t=[{Progressive:.53,Missionary:37.54,Lost:52.49,Greatest:9.43,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:.36,Missionary:30.36,Lost:56.18,Greatest:13.09,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:.36,Missionary:30.62,Lost:56.16,Greatest:12.86,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:.18,Missionary:27.95,Lost:55.54,Greatest:16.33,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:.18,Missionary:27.75,Lost:55.5,Greatest:16.58,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:.18,Missionary:22.53,Lost:56.23,Greatest:21.06,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:21.74,Lost:56.7,Greatest:21.56,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:15.88,Lost:53.83,Greatest:30.29,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:15.48,Lost:53.92,Greatest:30.6,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:11.4,Lost:52.39,Greatest:36.21,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:11.36,Lost:52.38,Greatest:36.26,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:9.16,Lost:50.92,Greatest:39.93,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:9.09,Lost:51.09,Greatest:39.82,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:6.86,Lost:46.94,Greatest:46.2,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:6.38,Lost:47.72,Greatest:45.9,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:5.02,Lost:43.68,Greatest:51.3,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:4.81,Lost:43.81,Greatest:51.39,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:4.61,Lost:39.48,Greatest:55.9,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:4.41,Lost:39.52,Greatest:56.07,Silent:0,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:2.55,Lost:30.6,Greatest:66.67,Silent:.18,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:2.55,Lost:30.73,Greatest:66.55,Silent:.18,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:1.64,Lost:27.45,Greatest:70.18,Silent:.73,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:1.62,Lost:27.21,Greatest:70.27,Silent:.9,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:.73,Lost:21.1,Greatest:75.6,Silent:2.57,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:.73,Lost:20.99,Greatest:75.18,Silent:3.1,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:.37,Lost:14.13,Greatest:80,Silent:5.5,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:.37,Lost:13.92,Greatest:80.22,Silent:5.49,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:.37,Lost:11.11,Greatest:80.37,Silent:8.15,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:.37,Lost:11.09,Greatest:80.22,Silent:8.32,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:8.03,Greatest:80.29,Silent:11.68,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:8,Greatest:80.18,Silent:11.82,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:6.06,Greatest:77.43,Silent:16.51,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:5.88,Greatest:77.21,Silent:16.91,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:3.85,Greatest:72.53,Silent:23.63,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:3.49,Greatest:72.66,Silent:23.85,"Baby Boomer":0,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:2.56,Greatest:62.34,Silent:34.37,"Baby Boomer":.73,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:2.56,Greatest:61.97,Silent:34.73,"Baby Boomer":.73,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:1.1,Greatest:54.31,Silent:42.75,"Baby Boomer":1.83,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:1.1,Greatest:53.68,Silent:43.38,"Baby Boomer":1.84,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.37,Greatest:45.49,Silent:50.83,"Baby Boomer":3.31,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.37,Greatest:45.4,Silent:50.92,"Baby Boomer":3.31,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:36.31,Silent:56.2,"Baby Boomer":7.3,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:36.31,Silent:56.2,"Baby Boomer":7.3,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:31.99,Silent:56.99,"Baby Boomer":10.85,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:31.8,Silent:57.17,"Baby Boomer":10.85,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:28.12,Silent:59.38,"Baby Boomer":12.32,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:28.31,Silent:59.19,"Baby Boomer":12.32,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:23.84,Silent:61,"Baby Boomer":14.97,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:.18,Greatest:23.25,Silent:61.25,"Baby Boomer":15.31,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:20.15,Silent:62.66,"Baby Boomer":17.19,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:20.37,Silent:62.04,"Baby Boomer":17.59,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:18.3,Silent:61.18,"Baby Boomer":20.52,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:17.74,Silent:61.55,"Baby Boomer":20.7,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:12.36,Silent:57.56,"Baby Boomer":30.07,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:12.18,Silent:57.56,"Baby Boomer":30.26,"Generation X":0,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:8.92,Silent:52.97,"Baby Boomer":37.55,"Generation X":.56,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:8.72,Silent:52.88,"Baby Boomer":37.85,"Generation X":.56,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:6.51,Silent:49.44,"Baby Boomer":42.94,"Generation X":1.12,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:6.48,Silent:49.26,"Baby Boomer":43.15,"Generation X":1.11,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:5,Silent:47.04,"Baby Boomer":46.67,"Generation X":1.3,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:5,Silent:47.04,"Baby Boomer":46.67,"Generation X":1.3,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:3.7,Silent:44.44,"Baby Boomer":49.81,"Generation X":2.04,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:3.54,Silent:43.76,"Baby Boomer":50.47,"Generation X":2.23,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:2.6,Silent:40.82,"Baby Boomer":53.25,"Generation X":3.34,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:2.6,Silent:40.15,"Baby Boomer":53.72,"Generation X":3.53,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:2.04,Silent:37.48,"Baby Boomer":55.84,"Generation X":4.64,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:2.04,Silent:37.55,"Baby Boomer":55.76,"Generation X":4.65,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:1.86,Silent:32.22,"Baby Boomer":59.78,"Generation X":6.15,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:1.86,Silent:31.97,"Baby Boomer":59.85,"Generation X":6.32,Millennial:0,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:1.29,Silent:29.94,"Baby Boomer":59.52,"Generation X":9.06,Millennial:.18,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:1.11,Silent:28.89,"Baby Boomer":59.81,"Generation X":10,Millennial:.19,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:1.11,Silent:23.15,"Baby Boomer":61.11,"Generation X":14.44,Millennial:.19,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:.93,Silent:23.05,"Baby Boomer":61.52,"Generation X":14.31,Millennial:.19,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:.37,Silent:18,"Baby Boomer":62.89,"Generation X":18.18,Millennial:.56,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:.37,Silent:17.56,"Baby Boomer":63.4,"Generation X":18.11,Millennial:.55,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:14.26,"Baby Boomer":62.78,"Generation X":22.41,Millennial:.56,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:14.1,"Baby Boomer":62.71,"Generation X":22.63,Millennial:.56,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:11.52,"Baby Boomer":62.45,"Generation X":25.09,Millennial:.93,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:10.99,"Baby Boomer":62.94,"Generation X":24.95,Millennial:1.12,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:9.7,"Baby Boomer":55.78,"Generation X":29.66,Millennial:4.85,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:9.33,"Baby Boomer":56.16,"Generation X":29.66,Millennial:4.85,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:7.04,"Baby Boomer":55.19,"Generation X":31.48,Millennial:6.3,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:6.9,"Baby Boomer":54.29,"Generation X":31.72,Millennial:7.09,"Generation Z":0},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:5.38,"Baby Boomer":48.24,"Generation X":35.81,Millennial:10.39,"Generation Z":.19},{Progressive:0,Missionary:0,Lost:0,Greatest:0,Silent:5.39,"Baby Boomer":48.14,"Generation X":35.87,Millennial:10.41,"Generation Z":.19}],y$t=()=>L.jsxs(L.Fragment,{children:[L.jsxs(Gn,{sx:{textAlign:"center",m:2,display:{xs:"none",sm:"block"}},children:[L.jsxs(un,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left"},children:["Source:  ",L.jsx(Xc,{href:"https://github.com/unitedstates/congress-legislators",target:"_blank",underline:"hover",children:"unitedstates github"})]}),L.jsxs(un,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left"},children:["Data Preparation:  ",L.jsx(Xc,{href:"https://github.com/edwin-torres/congress/blob/main/Congress.ipynb",target:"_blank",underline:"hover",children:"code"})]})]}),L.jsx(Gn,{sx:{height:75,color:"#ffffff",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"none",sm:"block"}},children:L.jsxs(un,{sx:{pt:2},variant:"h4",gutterBottom:!0,children:["Composition of U.S. Congress ",L.jsx("br",{})," by Generation (1940-2024)"]})}),L.jsx(Gn,{sx:{height:75,color:"#ffffff",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"block",sm:"none"}},children:L.jsxs(un,{sx:{pt:2},variant:"h4",gutterBottom:!0,children:["Please Rotate Phone ",L.jsx(fR,{})," or Enlarge Screen ",L.jsx(hR,{})]})}),L.jsx(Gn,{sx:{height:{xs:400,lg:800},width:"80%",color:"black",bgcolor:"white",display:{xs:"none",sm:"block"},aspectRatio:.99,m:"auto",mt:5},children:L.jsx(x$t,{data:v$t})})]}),x$t=({data:t})=>L.jsx(g$t,{data:t,theme:{background:"black",text:{fontSize:14,fill:"#85d5f5"},legends:{title:{text:{fontSize:20,fill:"#85d5f5"}}}},curve:"basis",keys:["Progressive","Missionary","Lost","Greatest","Silent","Baby Boomer","Generation X","Millennial","Generation Z"],margin:{top:20,right:125,bottom:50,left:60},axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"",legendOffset:36,format:function(e){const n=e+1940;return n%10===0?n.toString():""}},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"",legendOffset:-40,format:function(e){return(e+50).toString()+"%"}},enableGridX:!1,enableGridY:!1,offsetType:"silhouette",colors:{scheme:"category10"},fillOpacity:.85,borderColor:{theme:"background"},defs:[{id:"dots",type:"patternDots",background:"inherit",color:"#2c998f",size:4,padding:2,stagger:!0},{id:"squares",type:"patternSquares",background:"inherit",color:"#e4c912",size:6,padding:2,stagger:!0}],fill:[{match:{id:"Paul"},id:"dots"},{match:{id:"Marcel"},id:"squares"}],dotSize:8,dotColor:{from:"color"},dotBorderWidth:2,dotBorderColor:{from:"color",modifiers:[["darker",.7]]},legends:[{anchor:"bottom-right",direction:"column",translateX:65,itemWidth:55,itemHeight:30,itemTextColor:"#ffffff",symbolSize:13,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#85d5f5"}}]}]});function Dr(){return Dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dr.apply(this,arguments)}function Ex(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var pQ,b$t=function(t){var e=t.bars,n=t.annotations,r=Qz({data:e,annotations:n,getPosition:function(i){return{x:i.x+i.width/2,y:i.y+i.height/2}},getDimensions:function(i){var s=i.height,o=i.width;return{width:o,height:s,size:Math.max(o,s)}}});return L.jsx(L.Fragment,{children:r.map(function(i,s){return L.jsx(uce,Dr({},i),s)})})},w$t=function(t){var e=t.width,n=t.height,r=t.legends,i=t.toggleSerie;return L.jsx(L.Fragment,{children:r.map(function(s,o){var a,l=s[0],c=s[1];return L.jsx(Jz,Dr({},l,{containerWidth:e,containerHeight:n,data:(a=l.data)!=null?a:c,toggleSerie:l.toggleSerie&&l.dataFrom==="keys"?i:void 0}),o)})})},S$t=["data"],_$t=function(t){var e,n=t.bar,r=n.data,i=Ex(n,S$t),s=t.style,o=s.borderColor,a=s.color,l=s.height,c=s.labelColor,u=s.labelOpacity,d=s.labelX,f=s.labelY,h=s.transform,p=s.width,v=t.borderRadius,g=t.borderWidth,m=t.label,y=t.shouldRenderLabel,x=t.isInteractive,S=t.onClick,_=t.onMouseEnter,C=t.onMouseLeave,T=t.tooltip,A=t.isFocusable,M=t.ariaLabel,E=t.ariaLabelledBy,P=t.ariaDescribedBy,N=Pr(),F=Wy(),$=F.showTooltipFromEvent,O=F.showTooltipAt,z=F.hideTooltip,X=R.useMemo(function(){return function(){return R.createElement(T,Dr({},i,r))}},[T,i,r]),D=R.useCallback(function(Q){S==null||S(Dr({color:i.color},r),Q)},[i,r,S]),B=R.useCallback(function(Q){return $(X(),Q)},[$,X]),V=R.useCallback(function(Q){_==null||_(r,Q),$(X(),Q)},[r,_,$,X]),W=R.useCallback(function(Q){C==null||C(r,Q),z()},[r,z,C]),j=R.useCallback(function(){O(X(),[i.absX+i.width/2,i.absY])},[O,X,i]),J=R.useCallback(function(){z()},[z]);return L.jsxs(sr.g,{transform:h,children:[L.jsx(sr.rect,{width:rc(p,function(Q){return Math.max(Q,0)}),height:rc(l,function(Q){return Math.max(Q,0)}),rx:v,ry:v,fill:(e=r.fill)!=null?e:a,strokeWidth:g,stroke:o,focusable:A,tabIndex:A?0:void 0,"aria-label":M?M(r):void 0,"aria-labelledby":E?E(r):void 0,"aria-describedby":P?P(r):void 0,onMouseEnter:x?V:void 0,onMouseMove:x?B:void 0,onMouseLeave:x?W:void 0,onClick:x?D:void 0,onFocus:x&&A?j:void 0,onBlur:x&&A?J:void 0}),y&&L.jsx(sr.text,{x:d,y:f,textAnchor:"middle",dominantBaseline:"central",fillOpacity:u,style:Dr({},N.labels.text,{pointerEvents:"none",fill:c}),children:m})]})},C$t=["color","label"],T$t=function(t){var e=t.color,n=t.label,r=Ex(t,C$t);return L.jsx(BI,{id:n,value:r.formattedValue,enableChip:!0,color:e})},ai={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{from:"theme",theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:T$t,tooltipLabel:function(t){return t.id+" - "+t.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[]},Ti=Dr({},ai,{layers:["grid","axes","bars","markers","legends","annotations"],barComponent:_$t,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),ha=Dr({},ai,{layers:["grid","axes","bars","legends","annotations"],pixelRatio:typeof window<"u"&&(pQ=window.devicePixelRatio)!=null?pQ:1}),Yve=function(t,e,n,r,i,s){return Dz(r,{all:t.map(e),min:0,max:0},i,s).padding(n)},Kve=function(t,e){return t.map(function(n){return Dr({},e.reduce(function(r,i){return r[i]=null,r},{}),n)})},SP=function(t){return Object.keys(t).reduce(function(e,n){return t[n]&&(e[n]=t[n]),e},{})},_P=function(t){return[t,Number(t)]},E$t=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],KW=function(t,e){return t>e},Zve=function(t,e){return t<e},Jve=function(t,e){return Array.from(" ".repeat(e-t),function(n,r){return t+r})},M$t=function(t){return KW(t,0)?0:t},A$t=function(t,e,n,r){var i=t.data,s=t.formatValue,o=t.getColor,a=t.getIndex,l=t.getTooltipLabel,c=t.innerPadding,u=c===void 0?0:c,d=t.keys,f=t.xScale,h=t.yScale,p=t.margin,v=n?Zve:KW,g=i.map(SP),m=[];return d.forEach(function(y,x){return Jve(0,f.domain().length).forEach(function(S){var _,C,T,A=_P(i[S][y]),M=A[0],E=A[1],P=a(i[S]),N=((_=f(P))!=null?_:0)+e*x+u*x,F=v(C=E,0)?(T=h(C))!=null?T:0:r,$=function(z,X){var D;return v(z,0)?r-X:((D=h(z))!=null?D:0)-r}(E,F),O={id:y,value:M===null?M:E,formattedValue:s(E),hidden:!1,index:S,indexValue:P,data:g[S]};m.push({key:y+"."+O.indexValue,index:m.length,data:O,x:N,y:F,absX:p.left+N,absY:p.top+F,width:e,height:$,color:o(O),label:l(O)})})}),m},k$t=function(t,e,n,r){var i=t.data,s=t.formatValue,o=t.getIndex,a=t.getColor,l=t.getTooltipLabel,c=t.keys,u=t.innerPadding,d=u===void 0?0:u,f=t.xScale,h=t.yScale,p=t.margin,v=n?Zve:KW,g=i.map(SP),m=[];return c.forEach(function(y,x){return Jve(0,h.domain().length).forEach(function(S){var _,C,T,A=_P(i[S][y]),M=A[0],E=A[1],P=o(i[S]),N=v(C=E,0)?r:(T=f(C))!=null?T:0,F=((_=h(P))!=null?_:0)+e*x+d*x,$=function(z,X){var D;return v(z,0)?((D=f(z))!=null?D:0)-r:r-X}(E,N),O={id:y,value:M===null?M:E,formattedValue:s(E),hidden:!1,index:S,indexValue:P,data:g[S]};m.push({key:y+"."+O.indexValue,index:m.length,data:O,x:N,y:F,absX:p.left+N,absY:p.top+F,width:$,height:e,color:a(O),label:l(O)})})}),m},I$t=function(t){var e,n,r=t.layout,i=t.minValue,s=t.maxValue,o=t.reverse,a=t.width,l=t.height,c=t.padding,u=c===void 0?0:c,d=t.innerPadding,f=d===void 0?0:d,h=t.valueScale,p=t.indexScale,v=t.hiddenIds,g=v===void 0?[]:v,m=Ex(t,E$t),y=m.keys.filter(function(V){return!g.includes(V)}),x=Kve(m.data,y),S=r==="vertical"?["y","x",a]:["x","y",l],_=S[0],C=S[1],T=S[2],A=Yve(x,m.getIndex,u,p,T,C),M=Dr({max:s,min:i,reverse:o},h),E=M.min==="auto"?M$t:function(V){return V},P=x.reduce(function(V,W){return[].concat(V,y.map(function(j){return W[j]}))},[]).filter(Boolean),N=E(Math.min.apply(Math,P)),F=(n=Math.max.apply(Math,P),isFinite(n)?n:0),$=Dz(M,{all:P,min:N,max:F},_==="x"?a:l,_),O=r==="vertical"?[A,$]:[$,A],z=O[0],X=O[1],D=(A.bandwidth()-f*(y.length-1))/y.length,B=[Dr({},m,{data:x,keys:y,innerPadding:f,xScale:z,yScale:X}),D,M.reverse,(e=$(0))!=null?e:0];return{xScale:z,yScale:X,bars:D>0?r==="vertical"?A$t.apply(void 0,B):k$t.apply(void 0,B):[]}},R$t=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],P$t=function t(e){var n;return e.some(Array.isArray)?t((n=[]).concat.apply(n,e)):e},N$t=function(t,e,n){var r=t.formatValue,i=t.getColor,s=t.getIndex,o=t.getTooltipLabel,a=t.innerPadding,l=t.stackedData,c=t.xScale,u=t.yScale,d=t.margin,f=[];return l.forEach(function(h){return c.domain().forEach(function(p,v){var g,m,y=h[v],x=(g=c(s(y.data)))!=null?g:0,S=((m=function(E){return u(E[n?0:1])}(y))!=null?m:0)+.5*a,_=function(E,P){var N;return((N=u(E[n?1:0]))!=null?N:0)-P}(y,S)-a,C=_P(y.data[h.key]),T=C[0],A=C[1],M={id:h.key,value:T===null?T:A,formattedValue:r(A),hidden:!1,index:v,indexValue:p,data:SP(y.data)};f.push({key:h.key+"."+p,index:f.length,data:M,x,y:S,absX:d.left+x,absY:d.top+S,width:e,height:_,color:i(M),label:o(M)})})}),f},$$t=function(t,e,n){var r=t.formatValue,i=t.getColor,s=t.getIndex,o=t.getTooltipLabel,a=t.innerPadding,l=t.stackedData,c=t.xScale,u=t.yScale,d=t.margin,f=[];return l.forEach(function(h){return u.domain().forEach(function(p,v){var g,m,y=h[v],x=(g=u(s(y.data)))!=null?g:0,S=((m=function(E){return c(E[n?1:0])}(y))!=null?m:0)+.5*a,_=function(E,P){var N;return((N=c(E[n?0:1]))!=null?N:0)-P}(y,S)-a,C=_P(y.data[h.key]),T=C[0],A=C[1],M={id:h.key,value:T===null?T:A,formattedValue:r(A),hidden:!1,index:v,indexValue:p,data:SP(y.data)};f.push({key:h.key+"."+p,index:f.length,data:M,x:S,y:x,absX:d.left+S,absY:d.top+x,width:_,height:e,color:i(M),label:o(M)})})}),f},D$t=function(t){var e,n=t.data,r=t.layout,i=t.minValue,s=t.maxValue,o=t.reverse,a=t.width,l=t.height,c=t.padding,u=c===void 0?0:c,d=t.valueScale,f=t.indexScale,h=t.hiddenIds,p=h===void 0?[]:h,v=Ex(t,R$t),g=v.keys.filter(function(D){return!p.includes(D)}),m=Eae().keys(g).offset(Mae)(Kve(n,g)),y=r==="vertical"?["y","x",a]:["x","y",l],x=y[0],S=y[1],_=y[2],C=Yve(n,v.getIndex,u,f,_,S),T=Dr({max:s,min:i,reverse:o},d),A=(e=P$t(m),d.type==="log"?e.filter(function(D){return D!==0}):e),M=Math.min.apply(Math,A),E=Math.max.apply(Math,A),P=Dz(T,{all:A,min:M,max:E},x==="x"?a:l,x),N=r==="vertical"?[C,P]:[P,C],F=N[0],$=N[1],O=v.innerPadding>0?v.innerPadding:0,z=C.bandwidth(),X=[Dr({},v,{innerPadding:O,stackedData:m,xScale:F,yScale:$}),z,T.reverse];return{xScale:F,yScale:$,bars:z>0?r==="vertical"?N$t.apply(void 0,X):$$t.apply(void 0,X):[]}},L$t=function(t){var e=t.bars,n=t.direction,r=t.from,i=t.groupMode,s=t.layout,o=t.legendLabel,a=t.reverse,l=sle(o??(r==="indexes"?"indexValue":"id"));return r==="indexes"?function(c,u,d){var f=kq(c.map(function(h){var p,v;return{id:(p=h.data.indexValue)!=null?p:"",label:d(h.data),hidden:h.data.hidden,color:(v=h.color)!=null?v:"#000"}}),function(h){return h.id});return u==="horizontal"&&f.reverse(),f}(e,s,l):function(c,u,d,f,h,p){var v=kq(c.map(function(g){var m;return{id:g.data.id,label:p(g.data),hidden:g.data.hidden,color:(m=g.color)!=null?m:"#000"}}),function(g){return g.id});return(u==="vertical"&&f==="stacked"&&d==="column"&&h!==!0||u==="horizontal"&&f==="stacked"&&h===!0)&&v.reverse(),v}(e,s,n,i,a,l)},Qve=function(t){var e=t.indexBy,n=e===void 0?ai.indexBy:e,r=t.keys,i=r===void 0?ai.keys:r,s=t.label,o=s===void 0?ai.label:s,a=t.tooltipLabel,l=a===void 0?ai.tooltipLabel:a,c=t.valueFormat,u=t.colors,d=u===void 0?ai.colors:u,f=t.colorBy,h=f===void 0?ai.colorBy:f,p=t.borderColor,v=p===void 0?ai.borderColor:p,g=t.labelTextColor,m=g===void 0?ai.labelTextColor:g,y=t.groupMode,x=y===void 0?ai.groupMode:y,S=t.layout,_=S===void 0?ai.layout:S,C=t.reverse,T=C===void 0?ai.reverse:C,A=t.data,M=t.minValue,E=M===void 0?ai.minValue:M,P=t.maxValue,N=P===void 0?ai.maxValue:P,F=t.margin,$=t.width,O=t.height,z=t.padding,X=z===void 0?ai.padding:z,D=t.innerPadding,B=D===void 0?ai.innerPadding:D,V=t.valueScale,W=V===void 0?ai.valueScale:V,j=t.indexScale,J=j===void 0?ai.indexScale:j,Q=t.initialHiddenIds,te=Q===void 0?ai.initialHiddenIds:Q,re=t.enableLabel,se=re===void 0?ai.enableLabel:re,fe=t.labelSkipWidth,ae=fe===void 0?ai.labelSkipWidth:fe,ye=t.labelSkipHeight,le=ye===void 0?ai.labelSkipHeight:ye,H=t.legends,Me=H===void 0?ai.legends:H,we=t.legendLabel,Ee=R.useState(te??[]),ge=Ee[0],qe=Ee[1],Ae=R.useCallback(function(Le){qe(function(pe){return pe.indexOf(Le)>-1?pe.filter(function(He){return He!==Le}):[].concat(pe,[Le])})},[]),ee=qd(n),Y=qd(o),oe=qd(l),xe=a2(c),Se=Pr(),be=Yz(d,h),Re=zc(v,Se),Ke=zc(m,Se),ze=(x==="grouped"?I$t:D$t)({layout:_,reverse:T,data:A,getIndex:ee,keys:i,minValue:E,maxValue:N,width:$,height:O,getColor:be,padding:X,innerPadding:B,valueScale:W,indexScale:J,hiddenIds:ge,formatValue:xe,getTooltipLabel:oe,margin:F}),Ne=ze.bars,De=ze.xScale,Ve=ze.yScale,gt=R.useMemo(function(){return Ne.filter(function(Le){return Le.data.value!==null}).map(function(Le,pe){return Dr({},Le,{index:pe})})},[Ne]),ct=R.useCallback(function(Le){var pe=Le.width,He=Le.height;return!!se&&!(ae>0&&pe<ae)&&!(le>0&&He<le)},[se,ae,le]),Ye=R.useMemo(function(){return i.map(function(Le){var pe=Ne.find(function(He){return He.data.id===Le});return Dr({},pe,{data:Dr({id:Le},pe==null?void 0:pe.data,{hidden:ge.includes(Le)})})})},[ge,i,Ne]),Xe=R.useMemo(function(){return Me.map(function(Le){return[Le,L$t({bars:Le.dataFrom==="keys"?Ye:Ne,direction:Le.direction,from:Le.dataFrom,groupMode:x,layout:_,legendLabel:we,reverse:T})]})},[Me,Ye,Ne,x,_,we,T]);return{bars:Ne,barsWithValue:gt,xScale:De,yScale:Ve,getIndex:ee,getLabel:Y,getTooltipLabel:oe,formatValue:xe,getColor:be,getBorderColor:Re,getLabelColor:Ke,shouldRenderBarLabel:ct,hiddenIds:ge,toggleSerie:Ae,legendsWithData:Xe}},O$t=["isInteractive","animate","motionConfig","theme","renderWrapper"],F$t=function(t){var e=t.data,n=t.indexBy,r=t.keys,i=t.margin,s=t.width,o=t.height,a=t.groupMode,l=t.layout,c=t.reverse,u=t.minValue,d=t.maxValue,f=t.valueScale,h=t.indexScale,p=t.padding,v=t.innerPadding,g=t.axisTop,m=t.axisRight,y=t.axisBottom,x=y===void 0?Ti.axisBottom:y,S=t.axisLeft,_=S===void 0?Ti.axisLeft:S,C=t.enableGridX,T=C===void 0?Ti.enableGridX:C,A=t.enableGridY,M=A===void 0?Ti.enableGridY:A,E=t.gridXValues,P=t.gridYValues,N=t.layers,F=N===void 0?Ti.layers:N,$=t.barComponent,O=$===void 0?Ti.barComponent:$,z=t.enableLabel,X=z===void 0?Ti.enableLabel:z,D=t.label,B=t.labelSkipWidth,V=B===void 0?Ti.labelSkipWidth:B,W=t.labelSkipHeight,j=W===void 0?Ti.labelSkipHeight:W,J=t.labelTextColor,Q=t.markers,te=Q===void 0?Ti.markers:Q,re=t.colorBy,se=t.colors,fe=t.defs,ae=fe===void 0?Ti.defs:fe,ye=t.fill,le=ye===void 0?Ti.fill:ye,H=t.borderRadius,Me=H===void 0?Ti.borderRadius:H,we=t.borderWidth,Ee=we===void 0?Ti.borderWidth:we,ge=t.borderColor,qe=t.annotations,Ae=qe===void 0?Ti.annotations:qe,ee=t.legendLabel,Y=t.tooltipLabel,oe=t.valueFormat,xe=t.isInteractive,Se=xe===void 0?Ti.isInteractive:xe,be=t.tooltip,Re=be===void 0?Ti.tooltip:be,Ke=t.onClick,ze=t.onMouseEnter,Ne=t.onMouseLeave,De=t.legends,Ve=t.role,gt=Ve===void 0?Ti.role:Ve,ct=t.ariaLabel,Ye=t.ariaLabelledBy,Xe=t.ariaDescribedBy,Le=t.isFocusable,pe=Le===void 0?Ti.isFocusable:Le,He=t.barAriaLabel,ot=t.barAriaLabelledBy,et=t.barAriaDescribedBy,Ie=t.initialHiddenIds,Ce=no(),ut=Ce.animate,dt=Ce.config,yt=o2(s,o,i),vt=yt.outerWidth,Vt=yt.outerHeight,It=yt.margin,en=yt.innerWidth,Dt=yt.innerHeight,mt=Qve({indexBy:n,label:D,tooltipLabel:Y,valueFormat:oe,colors:se,colorBy:re,borderColor:ge,labelTextColor:J,groupMode:a,layout:l,reverse:c,data:e,keys:r,minValue:u,maxValue:d,margin:It,width:en,height:Dt,padding:p,innerPadding:v,valueScale:f,indexScale:h,enableLabel:X,labelSkipWidth:V,labelSkipHeight:j,legends:De,legendLabel:ee,initialHiddenIds:Ie}),jt=mt.bars,mn=mt.barsWithValue,fn=mt.xScale,_t=mt.yScale,Lt=mt.getLabel,Pt=mt.getTooltipLabel,bt=mt.getBorderColor,Wt=mt.getLabelColor,Cn=mt.shouldRenderBarLabel,Z=mt.toggleSerie,K=mt.legendsWithData,ne=Cg(mn,{keys:function(de){return de.key},from:function(de){return Dr({borderColor:bt(de),color:de.color,height:0,labelColor:Wt(de),labelOpacity:0,labelX:de.width/2,labelY:de.height/2,transform:"translate("+de.x+", "+(de.y+de.height)+")",width:de.width},l==="vertical"?{}:{height:de.height,transform:"translate("+de.x+", "+de.y+")",width:0})},enter:function(de){return{borderColor:bt(de),color:de.color,height:de.height,labelColor:Wt(de),labelOpacity:1,labelX:de.width/2,labelY:de.height/2,transform:"translate("+de.x+", "+de.y+")",width:de.width}},update:function(de){return{borderColor:bt(de),color:de.color,height:de.height,labelColor:Wt(de),labelOpacity:1,labelX:de.width/2,labelY:de.height/2,transform:"translate("+de.x+", "+de.y+")",width:de.width}},leave:function(de){return Dr({borderColor:bt(de),color:de.color,height:0,labelColor:Wt(de),labelOpacity:0,labelX:de.width/2,labelY:0,transform:"translate("+de.x+", "+(de.y+de.height)+")",width:de.width},l==="vertical"?{}:{labelX:0,labelY:de.height/2,height:de.height,transform:"translate("+de.x+", "+de.y+")",width:0})},config:dt,immediate:!ut,initial:ut?void 0:null}),G=R.useMemo(function(){return{borderRadius:Me,borderWidth:Ee,enableLabel:X,isInteractive:Se,labelSkipWidth:V,labelSkipHeight:j,onClick:Ke,onMouseEnter:ze,onMouseLeave:Ne,getTooltipLabel:Pt,tooltip:Re,isFocusable:pe,ariaLabel:He,ariaLabelledBy:ot,ariaDescribedBy:et}},[Me,Ee,X,Pt,Se,j,V,Ke,ze,Ne,Re,pe,He,ot,et]),ie=Nz(ae,jt,le,{dataKey:"data",targetKey:"data.fill"}),ce={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null};F.includes("annotations")&&(ce.annotations=L.jsx(b$t,{bars:jt,annotations:Ae},"annotations")),F.includes("axes")&&(ce.axes=L.jsx(Lz,{xScale:fn,yScale:_t,width:en,height:Dt,top:g,right:m,bottom:x,left:_},"axes")),F.includes("bars")&&(ce.bars=L.jsx(R.Fragment,{children:ne(function(de,Be){return R.createElement(O,Dr({},G,{bar:Be,style:de,shouldRenderLabel:Cn(Be),label:Lt(Be.data)}))})},"bars")),F.includes("grid")&&(ce.grid=L.jsx(Oz,{width:en,height:Dt,xScale:T?fn:null,yScale:M?_t:null,xValues:E,yValues:P},"grid")),F.includes("legends")&&(ce.legends=L.jsx(w$t,{width:en,height:Dt,legends:K,toggleSerie:Z},"legends")),F.includes("markers")&&(ce.markers=L.jsx(HGe,{markers:te,width:en,height:Dt,xScale:fn,yScale:_t},"markers"));var Te=R.useMemo(function(){return Dr({},G,{margin:It,width:s,height:o,innerWidth:en,innerHeight:Dt,bars:jt,legendData:K,enableLabel:X,xScale:fn,yScale:_t,tooltip:Re,getTooltipLabel:Pt,onClick:Ke,onMouseEnter:ze,onMouseLeave:Ne})},[G,It,s,o,en,Dt,jt,K,X,fn,_t,Re,Pt,Ke,ze,Ne]);return L.jsx(l2,{width:vt,height:Vt,margin:It,defs:ie,role:gt,ariaLabel:ct,ariaLabelledBy:Ye,ariaDescribedBy:Xe,isFocusable:pe,children:F.map(function(de,Be){var Je;return typeof de=="function"?L.jsx(R.Fragment,{children:R.createElement(de,Te)},Be):(Je=ce==null?void 0:ce[de])!=null?Je:null})})},B$t=function(t){var e=t.isInteractive,n=e===void 0?Ti.isInteractive:e,r=t.animate,i=r===void 0?Ti.animate:r,s=t.motionConfig,o=s===void 0?Ti.motionConfig:s,a=t.theme,l=t.renderWrapper,c=Ex(t,O$t);return L.jsx(tx,{animate:i,isInteractive:n,motionConfig:o,renderWrapper:l,theme:a,children:L.jsx(F$t,Dr({isInteractive:n},c))})},U$t=["isInteractive","renderWrapper","theme"],uL=function(t,e,n,r){return t.find(function(i){return jGe(i.x+e.left,i.y+e.top,i.width,i.height,n,r)})},z$t=function(t){var e=t.data,n=t.indexBy,r=t.keys,i=t.margin,s=t.width,o=t.height,a=t.groupMode,l=t.layout,c=t.reverse,u=t.minValue,d=t.maxValue,f=t.valueScale,h=t.indexScale,p=t.padding,v=t.innerPadding,g=t.axisTop,m=t.axisRight,y=t.axisBottom,x=y===void 0?ha.axisBottom:y,S=t.axisLeft,_=S===void 0?ha.axisLeft:S,C=t.enableGridX,T=C===void 0?ha.enableGridX:C,A=t.enableGridY,M=A===void 0?ha.enableGridY:A,E=t.gridXValues,P=t.gridYValues,N=t.layers,F=N===void 0?ha.layers:N,$=t.renderBar,O=$===void 0?function(_t,Lt){var Pt=Lt.bar,bt=Pt.color,Wt=Pt.height,Cn=Pt.width,Z=Pt.x,K=Pt.y,ne=Lt.borderColor,G=Lt.borderRadius,ie=Lt.borderWidth,ce=Lt.label,Te=Lt.labelColor,de=Lt.shouldRenderLabel;if(_t.fillStyle=bt,ie>0&&(_t.strokeStyle=ne,_t.lineWidth=ie),_t.beginPath(),G>0){var Be=Math.min(G,Wt);_t.moveTo(Z+Be,K),_t.lineTo(Z+Cn-Be,K),_t.quadraticCurveTo(Z+Cn,K,Z+Cn,K+Be),_t.lineTo(Z+Cn,K+Wt-Be),_t.quadraticCurveTo(Z+Cn,K+Wt,Z+Cn-Be,K+Wt),_t.lineTo(Z+Be,K+Wt),_t.quadraticCurveTo(Z,K+Wt,Z,K+Wt-Be),_t.lineTo(Z,K+Be),_t.quadraticCurveTo(Z,K,Z+Be,K),_t.closePath()}else _t.rect(Z,K,Cn,Wt);_t.fill(),ie>0&&_t.stroke(),de&&(_t.textBaseline="middle",_t.textAlign="center",_t.fillStyle=Te,_t.fillText(ce,Z+Cn/2,K+Wt/2))}:$,z=t.enableLabel,X=z===void 0?ha.enableLabel:z,D=t.label,B=t.labelSkipWidth,V=B===void 0?ha.labelSkipWidth:B,W=t.labelSkipHeight,j=W===void 0?ha.labelSkipHeight:W,J=t.labelTextColor,Q=t.colorBy,te=t.colors,re=t.borderRadius,se=re===void 0?ha.borderRadius:re,fe=t.borderWidth,ae=fe===void 0?ha.borderWidth:fe,ye=t.borderColor,le=t.annotations,H=le===void 0?ha.annotations:le,Me=t.legendLabel,we=t.tooltipLabel,Ee=t.valueFormat,ge=t.isInteractive,qe=ge===void 0?ha.isInteractive:ge,Ae=t.tooltip,ee=Ae===void 0?ha.tooltip:Ae,Y=t.onClick,oe=t.onMouseEnter,xe=t.onMouseLeave,Se=t.legends,be=t.pixelRatio,Re=be===void 0?ha.pixelRatio:be,Ke=t.canvasRef,ze=R.useRef(null),Ne=Pr(),De=o2(s,o,i),Ve=De.margin,gt=De.innerWidth,ct=De.innerHeight,Ye=De.outerWidth,Xe=De.outerHeight,Le=Qve({indexBy:n,label:D,tooltipLabel:we,valueFormat:Ee,colors:te,colorBy:Q,borderColor:ye,labelTextColor:J,groupMode:a,layout:l,reverse:c,data:e,keys:r,minValue:u,maxValue:d,margin:Ve,width:gt,height:ct,padding:p,innerPadding:v,valueScale:f,indexScale:h,enableLabel:X,labelSkipWidth:V,labelSkipHeight:j,legends:Se,legendLabel:Me}),pe=Le.bars,He=Le.barsWithValue,ot=Le.xScale,et=Le.yScale,Ie=Le.getLabel,Ce=Le.getTooltipLabel,ut=Le.getBorderColor,dt=Le.getLabelColor,yt=Le.shouldRenderBarLabel,vt=Le.legendsWithData,Vt=Wy(),It=Vt.showTooltipFromEvent,en=Vt.hideTooltip,Dt=AZe({annotations:Qz({data:pe,annotations:H,getPosition:function(_t){return{x:_t.x,y:_t.y}},getDimensions:function(_t){var Lt=_t.width,Pt=_t.height;return{width:Lt,height:Pt,size:Math.max(Lt,Pt)}}})}),mt=R.useMemo(function(){return{borderRadius:se,borderWidth:ae,isInteractive:qe,isFocusable:!1,labelSkipWidth:V,labelSkipHeight:j,margin:Ve,width:s,height:o,innerWidth:gt,innerHeight:ct,bars:pe,legendData:vt,enableLabel:X,xScale:ot,yScale:et,tooltip:ee,getTooltipLabel:Ce,onClick:Y,onMouseEnter:oe,onMouseLeave:xe}},[se,ae,qe,V,j,Ve,s,o,gt,ct,pe,vt,X,ot,et,ee,Ce,Y,oe,xe]);R.useEffect(function(){var _t,Lt=(_t=ze.current)==null?void 0:_t.getContext("2d");ze.current&&Lt&&(ze.current.width=Ye*Re,ze.current.height=Xe*Re,Lt.scale(Re,Re),Lt.fillStyle=Ne.background,Lt.fillRect(0,0,Ye,Xe),Lt.translate(Ve.left,Ve.top),F.forEach(function(Pt){Pt==="grid"?typeof Ne.grid.line.strokeWidth=="number"&&Ne.grid.line.strokeWidth>0&&(Lt.lineWidth=Ne.grid.line.strokeWidth,Lt.strokeStyle=Ne.grid.line.stroke,T&&$q(Lt,{width:s,height:o,scale:ot,axis:"x",values:E}),M&&$q(Lt,{width:s,height:o,scale:et,axis:"y",values:P})):Pt==="axes"?ije(Lt,{xScale:ot,yScale:et,width:gt,height:ct,top:g,right:m,bottom:x,left:_,theme:Ne}):Pt==="bars"?He.forEach(function(bt){O(Lt,{bar:bt,borderColor:ut(bt),borderRadius:se,borderWidth:ae,label:Ie(bt.data),labelColor:dt(bt),shouldRenderLabel:yt(bt)})}):Pt==="legends"?vt.forEach(function(bt){var Wt=bt[0],Cn=bt[1];cqe(Lt,Dr({},Wt,{data:Cn,containerWidth:gt,containerHeight:ct,theme:Ne}))}):Pt==="annotations"?$Ze(Lt,{annotations:Dt,theme:Ne}):typeof Pt=="function"&&Pt(Lt,mt)}),Lt.save())},[x,_,m,g,He,se,ae,Dt,T,M,ut,Ie,dt,E,P,a,o,ct,gt,mt,F,l,vt,Ve.left,Ve.top,Xe,Ye,Re,O,ot,et,c,yt,Ne,s]);var jt=R.useCallback(function(_t){if(pe&&ze.current){var Lt=N$(ze.current,_t),Pt=Lt[0],bt=Lt[1],Wt=uL(pe,Ve,Pt,bt);Wt!==void 0?(It(R.createElement(ee,Dr({},Wt.data,{color:Wt.color,label:Wt.label,value:Number(Wt.data.value)})),_t),_t.type==="mouseenter"&&(oe==null||oe(Wt.data,_t))):en()}},[en,Ve,oe,pe,It,ee]),mn=R.useCallback(function(_t){if(pe&&ze.current){en();var Lt=N$(ze.current,_t),Pt=Lt[0],bt=Lt[1],Wt=uL(pe,Ve,Pt,bt);Wt&&(xe==null||xe(Wt.data,_t))}},[en,Ve,xe,pe]),fn=R.useCallback(function(_t){if(pe&&ze.current){var Lt=N$(ze.current,_t),Pt=Lt[0],bt=Lt[1],Wt=uL(pe,Ve,Pt,bt);Wt!==void 0&&(Y==null||Y(Dr({},Wt.data,{color:Wt.color}),_t))}},[Ve,Y,pe]);return L.jsx("canvas",{ref:function(_t){ze.current=_t,Ke&&"current"in Ke&&(Ke.current=_t)},width:Ye*Re,height:Xe*Re,style:{width:Ye,height:Xe,cursor:qe?"auto":"normal"},onMouseEnter:qe?jt:void 0,onMouseMove:qe?jt:void 0,onMouseLeave:qe?mn:void 0,onClick:qe?fn:void 0})},V$t=R.forwardRef(function(t,e){var n=t.isInteractive,r=t.renderWrapper,i=t.theme,s=Ex(t,U$t);return L.jsx(tx,{isInteractive:n,renderWrapper:r,theme:i,animate:!1,children:L.jsx(z$t,Dr({},s,{canvasRef:e}))})}),eye=function(t){return L.jsx(nx,{children:function(e){var n=e.width,r=e.height;return L.jsx(B$t,Dr({width:n,height:r},t))}})};R.forwardRef(function(t,e){return L.jsx(nx,{children:function(n){var r=n.width,i=n.height;return L.jsx(V$t,Dr({width:r,height:i},t,{ref:e}))}})});const W$t=[{status:"Full Time",male:1449,maleColor:"hsl(131, 70%, 50%)",female:2133,femaleColor:"hsl(153, 70%, 50%)"},{status:"Part Time",male:2905,maleColor:"hsl(13, 70%, 50%)",female:3705,femaleColor:"hsl(267, 70%, 50%)"}],G$t=({data:t})=>L.jsx(eye,{data:t,theme:{background:"black",text:{fontSize:22,fill:"#b0bec5"},axis:{legend:{text:{fontSize:22}}},labels:{text:{fontSize:18}}},keys:["male","female"],indexBy:"status",margin:{top:20,right:125,bottom:75,left:95},padding:.25,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"set2"},borderRadius:4,borderWidth:1,borderColor:{theme:"labels.text.fill"},axisTop:null,axisRight:null,axisBottom:{tickSize:2,tickPadding:2,tickRotation:0,legend:"Enrollment Type",legendPosition:"middle",legendOffset:55,truncateTickAt:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Total Enrollment",legendPosition:"middle",legendOffset:-80,truncateTickAt:0},labelSkipWidth:8,labelSkipHeight:7,labelTextColor:"black",legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:-149,itemsSpacing:2,itemWidth:99,itemHeight:25,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],role:"application",ariaLabel:"Nivo bar chart demo",groupMode:"grouped",maxValue:7e3});function jr(){return jr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jr.apply(this,arguments)}var H$t={pointerEvents:"none"},j$t=function(t){var e=t.label,n=t.style,r=Pr();return L.jsx(sr.g,{transform:n.transform,opacity:n.progress,style:H$t,children:L.jsx(sr.text,{textAnchor:"middle",dominantBaseline:"central",style:jr({},r.labels.text,{fill:n.textColor}),children:e})})},tye=function(t){var e=t%(2*Math.PI);return e<0&&(e+=2*Math.PI),e},X$t=function(t,e){return t.filter(function(n){return Math.abs(oR(n.arc.endAngle-n.arc.startAngle))>=e})},q$t={startAngle:{enter:function(t){return jr({},t,{endAngle:t.startAngle})},update:function(t){return t},leave:function(t){return jr({},t,{startAngle:t.endAngle})}},middleAngle:{enter:function(t){var e=t.startAngle+(t.endAngle-t.startAngle)/2;return jr({},t,{startAngle:e,endAngle:e})},update:function(t){return t},leave:function(t){var e=t.startAngle+(t.endAngle-t.startAngle)/2;return jr({},t,{startAngle:e,endAngle:e})}},endAngle:{enter:function(t){return jr({},t,{startAngle:t.endAngle})},update:function(t){return t},leave:function(t){return jr({},t,{endAngle:t.startAngle})}},innerRadius:{enter:function(t){return jr({},t,{outerRadius:t.innerRadius})},update:function(t){return t},leave:function(t){return jr({},t,{innerRadius:t.outerRadius})}},centerRadius:{enter:function(t){var e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;return jr({},t,{innerRadius:e,outerRadius:e})},update:function(t){return t},leave:function(t){var e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;return jr({},t,{innerRadius:e,outerRadius:e})}},outerRadius:{enter:function(t){return jr({},t,{innerRadius:t.outerRadius})},update:function(t){return t},leave:function(t){return jr({},t,{outerRadius:t.innerRadius})}},pushIn:{enter:function(t){return jr({},t,{innerRadius:t.innerRadius-t.outerRadius+t.innerRadius,outerRadius:t.innerRadius})},update:function(t){return t},leave:function(t){return jr({},t,{innerRadius:t.outerRadius,outerRadius:t.outerRadius+t.outerRadius-t.innerRadius})}},pushOut:{enter:function(t){return jr({},t,{innerRadius:t.outerRadius,outerRadius:t.outerRadius+t.outerRadius-t.innerRadius})},update:function(t){return t},leave:function(t){return jr({},t,{innerRadius:t.innerRadius-t.outerRadius+t.innerRadius,outerRadius:t.innerRadius})}}},nye=function(t,e){return R.useMemo(function(){var n=q$t[t];return{enter:function(r){return jr({progress:0},n.enter(r.arc),e?e.enter(r):{})},update:function(r){return jr({progress:1},n.update(r.arc),e?e.update(r):{})},leave:function(r){return jr({progress:0},n.leave(r.arc),e?e.leave(r):{})}}},[t,e])},Y$t=function(t,e){var n=FGe(t)-Math.PI/2,r=t.innerRadius+(t.outerRadius-t.innerRadius)*e;return Em(n,r)},K$t=function(t){return function(e,n,r,i){return rc([e,n,r,i],function(s,o,a,l){var c=Y$t({startAngle:s,endAngle:o,innerRadius:a,outerRadius:l},t);return"translate("+c.x+","+c.y+")"})}},Z$t=function(t,e,n,r){e===void 0&&(e=.5),n===void 0&&(n="innerRadius");var i=no(),s=i.animate,o=i.config,a=nye(n,r);return{transition:Cg(t,{keys:function(l){return l.id},initial:a.update,from:a.enter,enter:a.update,update:a.update,leave:a.leave,config:o,immediate:!s}),interpolate:K$t(e)}},J$t=function(t){var e=t.center,n=t.data,r=t.transitionMode,i=t.label,s=t.radiusOffset,o=t.skipAngle,a=t.textColor,l=t.component,c=l===void 0?j$t:l,u=qd(i),d=Pr(),f=zc(a,d),h=R.useMemo(function(){return n.filter(function(y){return Math.abs(oR(y.arc.endAngle-y.arc.startAngle))>=o})},[n,o]),p=Z$t(h,s,r),v=p.transition,g=p.interpolate,m=c;return L.jsx("g",{transform:"translate("+e[0]+","+e[1]+")",children:v(function(y,x){return R.createElement(m,{key:x.id,datum:x,label:u(x),style:jr({},y,{transform:g(y.startAngle,y.endAngle,y.innerRadius,y.outerRadius),textColor:f(x)})})})})},Q$t=function(t){var e=t.label,n=t.style,r=Pr();return L.jsxs(sr.g,{opacity:n.opacity,children:[L.jsx(sr.path,{fill:"none",stroke:n.linkColor,strokeWidth:n.thickness,d:n.path}),L.jsx(sr.text,{transform:n.textPosition,textAnchor:n.textAnchor,dominantBaseline:"central",style:jr({},r.labels.text,{fill:n.textColor}),children:e})]})},eDt=function(t){var e=tye(t.startAngle+(t.endAngle-t.startAngle)/2-Math.PI/2);return e<Math.PI/2||e>1.5*Math.PI?"start":"end"},rye=function(t,e,n,r){var i,s,o=tye(t.startAngle+(t.endAngle-t.startAngle)/2-Math.PI/2),a=Em(o,t.outerRadius+e),l=Em(o,t.outerRadius+e+n);return o<Math.PI/2||o>1.5*Math.PI?(i="after",s={x:l.x+r,y:l.y}):(i="before",s={x:l.x-r,y:l.y}),{side:i,points:[a,l,s]}},tDt=mae().x(function(t){return t.x}).y(function(t){return t.y}),nDt=function(t,e,n,r,i,s,o){return rc([t,e,n,r,i,s,o],function(a,l,c,u,d,f,h){var p=rye({startAngle:a,endAngle:l,innerRadius:c,outerRadius:u},d,f,h).points;return tDt(p)})},rDt=function(t,e,n,r){return rc([t,e,n,r],function(i,s,o,a){return eDt({startAngle:i,endAngle:s,innerRadius:o,outerRadius:a})})},iDt=function(t,e,n,r,i,s,o,a){return rc([t,e,n,r,i,s,o,a],function(l,c,u,d,f,h,p,v){var g=rye({startAngle:l,endAngle:c,innerRadius:u,outerRadius:d},f,h,p),m=g.points,y=g.side,x=m[2];return y==="before"?x.x-=v:x.x+=v,"translate("+x.x+","+x.y+")"})},sDt=function(t){var e=t.data,n=t.offset,r=n===void 0?0:n,i=t.diagonalLength,s=t.straightLength,o=t.skipAngle,a=o===void 0?0:o,l=t.textOffset,c=t.linkColor,u=t.textColor,d=no(),f=d.animate,h=d.config,p=Pr(),v=zc(c,p),g=zc(u,p),m=function(x,S){return R.useMemo(function(){return X$t(x,S)},[x,S])}(e,a),y=function(x){var S=x.offset,_=x.diagonalLength,C=x.straightLength,T=x.textOffset,A=x.getLinkColor,M=x.getTextColor;return R.useMemo(function(){return{enter:function(E){return{startAngle:E.arc.startAngle,endAngle:E.arc.endAngle,innerRadius:E.arc.innerRadius,outerRadius:E.arc.outerRadius,offset:S,diagonalLength:0,straightLength:0,textOffset:T,linkColor:A(E),textColor:M(E),opacity:0}},update:function(E){return{startAngle:E.arc.startAngle,endAngle:E.arc.endAngle,innerRadius:E.arc.innerRadius,outerRadius:E.arc.outerRadius,offset:S,diagonalLength:_,straightLength:C,textOffset:T,linkColor:A(E),textColor:M(E),opacity:1}},leave:function(E){return{startAngle:E.arc.startAngle,endAngle:E.arc.endAngle,innerRadius:E.arc.innerRadius,outerRadius:E.arc.outerRadius,offset:S,diagonalLength:0,straightLength:0,textOffset:T,linkColor:A(E),textColor:M(E),opacity:0}}}},[_,C,T,A,M,S])}({offset:r,diagonalLength:i,straightLength:s,textOffset:l,getLinkColor:v,getTextColor:g});return{transition:Cg(m,{keys:function(x){return x.id},initial:y.update,from:y.enter,enter:y.update,update:y.update,leave:y.leave,config:h,immediate:!f}),interpolateLink:nDt,interpolateTextAnchor:rDt,interpolateTextPosition:iDt}},oDt=function(t){var e=t.center,n=t.data,r=t.label,i=t.skipAngle,s=t.offset,o=t.diagonalLength,a=t.straightLength,l=t.strokeWidth,c=t.textOffset,u=t.textColor,d=t.linkColor,f=t.component,h=f===void 0?Q$t:f,p=qd(r),v=sDt({data:n,skipAngle:i,offset:s,diagonalLength:o,straightLength:a,textOffset:c,linkColor:d,textColor:u}),g=v.transition,m=v.interpolateLink,y=v.interpolateTextAnchor,x=v.interpolateTextPosition,S=h;return L.jsx("g",{transform:"translate("+e[0]+","+e[1]+")",children:g(function(_,C){return R.createElement(S,{key:C.id,datum:C,label:p(C),style:jr({},_,{thickness:l,path:m(_.startAngle,_.endAngle,_.innerRadius,_.outerRadius,_.offset,_.diagonalLength,_.straightLength),textAnchor:y(_.startAngle,_.endAngle,_.innerRadius,_.outerRadius),textPosition:x(_.startAngle,_.endAngle,_.innerRadius,_.outerRadius,_.offset,_.diagonalLength,_.straightLength,_.textOffset)})})})})},aDt=function(t){var e=t.datum,n=t.style,r=t.onClick,i=t.onMouseEnter,s=t.onMouseMove,o=t.onMouseLeave,a=R.useCallback(function(d){return r==null?void 0:r(e,d)},[r,e]),l=R.useCallback(function(d){return i==null?void 0:i(e,d)},[i,e]),c=R.useCallback(function(d){return s==null?void 0:s(e,d)},[s,e]),u=R.useCallback(function(d){return o==null?void 0:o(e,d)},[o,e]);return L.jsx(sr.path,{d:n.path,opacity:n.opacity,fill:e.fill||n.color,stroke:n.borderColor,strokeWidth:n.borderWidth,onClick:r?a:void 0,onMouseEnter:i?l:void 0,onMouseMove:s?c:void 0,onMouseLeave:o?u:void 0})},lDt=function(t,e,n,r,i){return rc([t,e,n,r],function(s,o,a,l){return i({startAngle:s,endAngle:o,innerRadius:Math.max(0,a),outerRadius:Math.max(0,l)})})},cDt=function(t,e,n){e===void 0&&(e="innerRadius");var r=no(),i=r.animate,s=r.config,o=nye(e,n);return{transition:Cg(t,{keys:function(a){return a.id},initial:o.update,from:o.enter,enter:o.update,update:o.update,leave:o.leave,config:s,immediate:!i}),interpolate:lDt}},uDt=function(t){var e=t.center,n=t.data,r=t.arcGenerator,i=t.borderWidth,s=t.borderColor,o=t.onClick,a=t.onMouseEnter,l=t.onMouseMove,c=t.onMouseLeave,u=t.transitionMode,d=t.component,f=d===void 0?aDt:d,h=Pr(),p=zc(s,h),v=cDt(n,u,{enter:function(x){return{opacity:0,color:x.color,borderColor:p(x)}},update:function(x){return{opacity:1,color:x.color,borderColor:p(x)}},leave:function(x){return{opacity:0,color:x.color,borderColor:p(x)}}}),g=v.transition,m=v.interpolate,y=f;return L.jsx("g",{transform:"translate("+e[0]+","+e[1]+")",children:g(function(x,S){return R.createElement(y,{key:S.id,datum:S,style:jr({},x,{borderWidth:i,path:m(x.startAngle,x.endAngle,x.innerRadius,x.outerRadius,r)}),onClick:o,onMouseEnter:a,onMouseMove:l,onMouseLeave:c})})})},dDt=function(t,e,n,r,i,s){s===void 0&&(s=!0);var o=[],a=Em(Kl(r),n);o.push([a.x,a.y]);var l=Em(Kl(i),n);o.push([l.x,l.y]);for(var c=Math.round(Math.min(r,i));c<=Math.round(Math.max(r,i));c++)if(c%90==0){var u=Em(Kl(c),n);o.push([u.x,u.y])}o=o.map(function(g){var m=g[0],y=g[1];return[t+m,e+y]}),s&&o.push([t,e]);var d=o.map(function(g){return g[0]}),f=o.map(function(g){return g[1]}),h=Math.min.apply(Math,d),p=Math.max.apply(Math,d),v=Math.min.apply(Math,f);return{points:o,x:h,y:v,width:p-h,height:Math.max.apply(Math,f)-v}},fDt=function(t){var e=t===void 0?{}:t,n=e.cornerRadius,r=n===void 0?0:n,i=e.padAngle,s=i===void 0?0:i;return R.useMemo(function(){return sVe().innerRadius(function(o){return o.innerRadius}).outerRadius(function(o){return o.outerRadius}).cornerRadius(r).padAngle(s)},[r,s])};function Fh(){return Fh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fh.apply(this,arguments)}function iye(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var mQ,hDt=function(t){var e=t.width,n=t.height,r=t.legends,i=t.data,s=t.toggleSerie;return L.jsx(L.Fragment,{children:r.map(function(o,a){var l;return L.jsx(Jz,Fh({},o,{containerWidth:e,containerHeight:n,data:(l=o.data)!=null?l:i,toggleSerie:o.toggleSerie?s:void 0}),a)})})},xn={id:"id",value:"value",sortByValue:!1,innerRadius:0,padAngle:0,cornerRadius:0,layers:["arcs","arcLinkLabels","arcLabels","legends"],startAngle:0,endAngle:360,fit:!0,activeInnerRadiusOffset:0,activeOuterRadiusOffset:0,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableArcLabels:!0,arcLabel:"formattedValue",arcLabelsSkipAngle:0,arcLabelsRadiusOffset:.5,arcLabelsTextColor:{theme:"labels.text.fill"},enableArcLinkLabels:!0,arcLinkLabel:"id",arcLinkLabelsSkipAngle:0,arcLinkLabelsOffset:0,arcLinkLabelsDiagonalLength:16,arcLinkLabelsStraightLength:24,arcLinkLabelsThickness:1,arcLinkLabelsTextOffset:6,arcLinkLabelsTextColor:{theme:"labels.text.fill"},arcLinkLabelsColor:{theme:"axis.ticks.line.stroke"},colors:{scheme:"nivo"},defs:[],fill:[],isInteractive:!0,animate:!0,motionConfig:"gentle",transitionMode:"innerRadius",tooltip:function(t){var e=t.datum;return L.jsx(BI,{id:e.id,value:e.formattedValue,enableChip:!0,color:e.color})},legends:[],role:"img",pixelRatio:typeof window<"u"&&(mQ=window.devicePixelRatio)!=null?mQ:1},pDt=["points"],mDt=function(t){var e=t.data,n=t.id,r=n===void 0?xn.id:n,i=t.value,s=i===void 0?xn.value:i,o=t.valueFormat,a=t.colors,l=a===void 0?xn.colors:a,c=qd(r),u=qd(s),d=a2(o),f=Yz(l,"id");return R.useMemo(function(){return e.map(function(h){var p,v=c(h),g=u(h),m={id:v,label:(p=h.label)!=null?p:v,hidden:!1,value:g,formattedValue:d(g),data:h};return Fh({},m,{color:f(m)})})},[e,c,u,d,f])},gDt=function(t){var e=t.data,n=t.startAngle,r=t.endAngle,i=t.innerRadius,s=t.outerRadius,o=t.padAngle,a=t.sortByValue,l=t.activeId,c=t.activeInnerRadiusOffset,u=t.activeOuterRadiusOffset,d=t.hiddenIds,f=t.forwardLegendData,h=R.useMemo(function(){var m=cVe().value(function(y){return y.value}).startAngle(Kl(n)).endAngle(Kl(r)).padAngle(Kl(o));return a||m.sortValues(null),m},[n,r,o,a]),p=R.useMemo(function(){var m=e.filter(function(y){return!d.includes(y.id)});return{dataWithArc:h(m).map(function(y){var x=Math.abs(y.endAngle-y.startAngle);return Fh({},y.data,{arc:{index:y.index,startAngle:y.startAngle,endAngle:y.endAngle,innerRadius:l===y.data.id?i-c:i,outerRadius:l===y.data.id?s+u:s,thickness:s-i,padAngle:y.padAngle,angle:x,angleDeg:oR(x)}})}),legendData:e.map(function(y){return{id:y.id,label:y.label,color:y.color,hidden:d.includes(y.id),data:y}})}},[h,e,d,l,i,c,s,u]),v=p.legendData,g=R.useRef(f);return R.useEffect(function(){typeof g.current=="function"&&g.current(v)},[g,v]),p},vDt=function(t){var e=t.activeId,n=t.onActiveIdChange,r=t.defaultActiveId,i=e!==void 0,s=R.useState(i||r===void 0?null:r),o=s[0],a=s[1];return{activeId:i?e:o,setActiveId:R.useCallback(function(l){n&&n(l),i||a(l)},[i,n,a])}},yDt=function(t){var e=t.data,n=t.width,r=t.height,i=t.innerRadius,s=i===void 0?xn.innerRadius:i,o=t.startAngle,a=o===void 0?xn.startAngle:o,l=t.endAngle,c=l===void 0?xn.endAngle:l,u=t.padAngle,d=u===void 0?xn.padAngle:u,f=t.sortByValue,h=f===void 0?xn.sortByValue:f,p=t.cornerRadius,v=p===void 0?xn.cornerRadius:p,g=t.fit,m=g===void 0?xn.fit:g,y=t.activeInnerRadiusOffset,x=y===void 0?xn.activeInnerRadiusOffset:y,S=t.activeOuterRadiusOffset,_=S===void 0?xn.activeOuterRadiusOffset:S,C=t.activeId,T=t.onActiveIdChange,A=t.defaultActiveId,M=t.forwardLegendData,E=vDt({activeId:C,onActiveIdChange:T,defaultActiveId:A}),P=E.activeId,N=E.setActiveId,F=R.useState([]),$=F[0],O=F[1],z=R.useMemo(function(){var B,V=Math.min(n,r)/2,W=V*Math.min(s,1),j=n/2,J=r/2;if(m){var Q=dDt(j,J,V,a-90,c-90),te=Q.points,re=iye(Q,pDt),se=Math.min(n/re.width,r/re.height),fe={width:re.width*se,height:re.height*se};fe.x=(n-fe.width)/2,fe.y=(r-fe.height)/2,j=(j-re.x)/re.width*re.width*se+fe.x,J=(J-re.y)/re.height*re.height*se+fe.y,B={box:re,ratio:se,points:te},V*=se,W*=se}return{centerX:j,centerY:J,radius:V,innerRadius:W,debug:B}},[n,r,s,a,c,m]),X=gDt({data:e,startAngle:a,endAngle:c,innerRadius:z.innerRadius,outerRadius:z.radius,padAngle:d,sortByValue:h,activeId:P,activeInnerRadiusOffset:x,activeOuterRadiusOffset:_,hiddenIds:$,forwardLegendData:M}),D=R.useCallback(function(B){O(function(V){return V.indexOf(B)>-1?V.filter(function(W){return W!==B}):[].concat(V,[B])})},[]);return Fh({arcGenerator:fDt({cornerRadius:v,padAngle:Kl(d)}),activeId:P,setActiveId:N,toggleSerie:D},X,z)},xDt=function(t){var e=t.dataWithArc,n=t.arcGenerator,r=t.centerX,i=t.centerY,s=t.radius,o=t.innerRadius;return R.useMemo(function(){return{dataWithArc:e,arcGenerator:n,centerX:r,centerY:i,radius:s,innerRadius:o}},[e,n,r,i,s,o])},bDt=function(t){var e=t.center,n=t.data,r=t.arcGenerator,i=t.borderWidth,s=t.borderColor,o=t.isInteractive,a=t.onClick,l=t.onMouseEnter,c=t.onMouseMove,u=t.onMouseLeave,d=t.setActiveId,f=t.tooltip,h=t.transitionMode,p=Wy(),v=p.showTooltipFromEvent,g=p.hideTooltip,m=R.useMemo(function(){if(o)return function(_,C){a==null||a(_,C)}},[o,a]),y=R.useMemo(function(){if(o)return function(_,C){v(R.createElement(f,{datum:_}),C),d(_.id),l==null||l(_,C)}},[o,v,d,l,f]),x=R.useMemo(function(){if(o)return function(_,C){v(R.createElement(f,{datum:_}),C),c==null||c(_,C)}},[o,v,c,f]),S=R.useMemo(function(){if(o)return function(_,C){g(),d(null),u==null||u(_,C)}},[o,g,d,u]);return L.jsx(uDt,{center:e,data:n,arcGenerator:r,borderWidth:i,borderColor:s,transitionMode:h,onClick:m,onMouseEnter:y,onMouseMove:x,onMouseLeave:S})},wDt=["isInteractive","animate","motionConfig","theme","renderWrapper"],SDt=function(t){var e=t.data,n=t.id,r=n===void 0?xn.id:n,i=t.value,s=i===void 0?xn.value:i,o=t.valueFormat,a=t.sortByValue,l=a===void 0?xn.sortByValue:a,c=t.layers,u=c===void 0?xn.layers:c,d=t.startAngle,f=d===void 0?xn.startAngle:d,h=t.endAngle,p=h===void 0?xn.endAngle:h,v=t.padAngle,g=v===void 0?xn.padAngle:v,m=t.fit,y=m===void 0?xn.fit:m,x=t.innerRadius,S=x===void 0?xn.innerRadius:x,_=t.cornerRadius,C=_===void 0?xn.cornerRadius:_,T=t.activeInnerRadiusOffset,A=T===void 0?xn.activeInnerRadiusOffset:T,M=t.activeOuterRadiusOffset,E=M===void 0?xn.activeOuterRadiusOffset:M,P=t.width,N=t.height,F=t.margin,$=t.colors,O=$===void 0?xn.colors:$,z=t.borderWidth,X=z===void 0?xn.borderWidth:z,D=t.borderColor,B=D===void 0?xn.borderColor:D,V=t.enableArcLabels,W=V===void 0?xn.enableArcLabels:V,j=t.arcLabel,J=j===void 0?xn.arcLabel:j,Q=t.arcLabelsSkipAngle,te=Q===void 0?xn.arcLabelsSkipAngle:Q,re=t.arcLabelsTextColor,se=re===void 0?xn.arcLabelsTextColor:re,fe=t.arcLabelsRadiusOffset,ae=fe===void 0?xn.arcLabelsRadiusOffset:fe,ye=t.arcLabelsComponent,le=t.enableArcLinkLabels,H=le===void 0?xn.enableArcLinkLabels:le,Me=t.arcLinkLabel,we=Me===void 0?xn.arcLinkLabel:Me,Ee=t.arcLinkLabelsSkipAngle,ge=Ee===void 0?xn.arcLinkLabelsSkipAngle:Ee,qe=t.arcLinkLabelsOffset,Ae=qe===void 0?xn.arcLinkLabelsOffset:qe,ee=t.arcLinkLabelsDiagonalLength,Y=ee===void 0?xn.arcLinkLabelsDiagonalLength:ee,oe=t.arcLinkLabelsStraightLength,xe=oe===void 0?xn.arcLinkLabelsStraightLength:oe,Se=t.arcLinkLabelsThickness,be=Se===void 0?xn.arcLinkLabelsThickness:Se,Re=t.arcLinkLabelsTextOffset,Ke=Re===void 0?xn.arcLinkLabelsTextOffset:Re,ze=t.arcLinkLabelsTextColor,Ne=ze===void 0?xn.arcLinkLabelsTextColor:ze,De=t.arcLinkLabelsColor,Ve=De===void 0?xn.arcLinkLabelsColor:De,gt=t.arcLinkLabelComponent,ct=t.defs,Ye=ct===void 0?xn.defs:ct,Xe=t.fill,Le=Xe===void 0?xn.fill:Xe,pe=t.isInteractive,He=pe===void 0?xn.isInteractive:pe,ot=t.onClick,et=t.onMouseEnter,Ie=t.onMouseMove,Ce=t.onMouseLeave,ut=t.tooltip,dt=ut===void 0?xn.tooltip:ut,yt=t.activeId,vt=t.onActiveIdChange,Vt=t.defaultActiveId,It=t.transitionMode,en=It===void 0?xn.transitionMode:It,Dt=t.legends,mt=Dt===void 0?xn.legends:Dt,jt=t.forwardLegendData,mn=t.role,fn=mn===void 0?xn.role:mn,_t=o2(P,N,F),Lt=_t.outerWidth,Pt=_t.outerHeight,bt=_t.margin,Wt=_t.innerWidth,Cn=_t.innerHeight,Z=mDt({data:e,id:r,value:s,valueFormat:o,colors:O}),K=yDt({data:Z,width:Wt,height:Cn,fit:y,innerRadius:S,startAngle:f,endAngle:p,padAngle:g,sortByValue:l,cornerRadius:C,activeInnerRadiusOffset:A,activeOuterRadiusOffset:E,activeId:yt,onActiveIdChange:vt,defaultActiveId:Vt,forwardLegendData:jt}),ne=K.dataWithArc,G=K.legendData,ie=K.arcGenerator,ce=K.centerX,Te=K.centerY,de=K.radius,Be=K.innerRadius,Je=K.setActiveId,nt=K.toggleSerie,$e=Nz(Ye,ne,Le),Ct={arcs:null,arcLinkLabels:null,arcLabels:null,legends:null};u.includes("arcs")&&(Ct.arcs=L.jsx(bDt,{center:[ce,Te],data:ne,arcGenerator:ie,borderWidth:X,borderColor:B,isInteractive:He,onClick:ot,onMouseEnter:et,onMouseMove:Ie,onMouseLeave:Ce,setActiveId:Je,tooltip:dt,transitionMode:en},"arcs")),H&&u.includes("arcLinkLabels")&&(Ct.arcLinkLabels=L.jsx(oDt,{center:[ce,Te],data:ne,label:we,skipAngle:ge,offset:Ae,diagonalLength:Y,straightLength:xe,strokeWidth:be,textOffset:Ke,textColor:Ne,linkColor:Ve,component:gt},"arcLinkLabels")),W&&u.includes("arcLabels")&&(Ct.arcLabels=L.jsx(J$t,{center:[ce,Te],data:ne,label:J,radiusOffset:ae,skipAngle:te,textColor:se,transitionMode:en,component:ye},"arcLabels")),mt.length>0&&u.includes("legends")&&(Ct.legends=L.jsx(hDt,{width:Wt,height:Cn,data:G,legends:mt,toggleSerie:nt},"legends"));var ht=xDt({dataWithArc:ne,arcGenerator:ie,centerX:ce,centerY:Te,radius:de,innerRadius:Be});return L.jsx(l2,{width:Lt,height:Pt,margin:bt,defs:$e,role:fn,children:u.map(function(ft,Ot){return Ct[ft]!==void 0?Ct[ft]:typeof ft=="function"?L.jsx(R.Fragment,{children:R.createElement(ft,ht)},Ot):null})})},_Dt=function(t){var e=t.isInteractive,n=e===void 0?xn.isInteractive:e,r=t.animate,i=r===void 0?xn.animate:r,s=t.motionConfig,o=s===void 0?xn.motionConfig:s,a=t.theme,l=t.renderWrapper,c=iye(t,wDt);return L.jsx(tx,{animate:i,isInteractive:n,motionConfig:o,renderWrapper:l,theme:a,children:L.jsx(SDt,Fh({isInteractive:n},c))})},CDt=function(t){return L.jsx(nx,{children:function(e){var n=e.width,r=e.height;return L.jsx(_Dt,Fh({width:n,height:r},t))}})};const PE={"Academic Majors":{Male:3285,Female:4693},"Vocational Majors":{Male:740,Female:801},"Tech-Prep Majors":{Male:329,Female:344}},TDt=({data:t})=>L.jsx(CDt,{data:t,tooltip:({datum:{id:e,value:n,color:r}})=>L.jsxs(Gn,{style:{padding:12,color:r,background:"#222222"},children:[L.jsxs("strong",{children:[e,L.jsx("br",{})," Total Enrollment: ",PE[e].Female+PE[e].Male]}),L.jsx(un,{children:"-----------"}),L.jsxs("strong",{children:["Male: ",PE[e].Male]}),L.jsx("br",{}),L.jsxs("strong",{children:["Female: ",PE[e].Female]}),L.jsx(un,{children:"-----------"})]}),arcLabel:e=>e.value+"%",theme:{background:"black",text:{fontSize:22,fill:"#b0bec5"},labels:{text:{fontSize:22}},axis:{legend:{text:{fontSize:22}}}},margin:{top:35,right:55,bottom:70,left:95},cornerRadius:5,activeInnerRadiusOffset:22,activeOuterRadiusOffset:16,colors:{scheme:"accent"},borderColor:{from:"color",modifiers:[["darker","0.6"]]},arcLinkLabelsSkipAngle:15,arcLinkLabelsTextOffset:4,arcLinkLabelsTextColor:"#e3f2fd",arcLinkLabelsOffset:-7,arcLinkLabelsStraightLength:28,arcLinkLabelsThickness:5,arcLinkLabelsColor:{from:"color"},arcLabelsRadiusOffset:.75,arcLabelsSkipAngle:23,arcLabelsTextColor:"black",legends:[{anchor:"bottom",direction:"row",justify:!1,translateX:20,translateY:45,itemsSpacing:0,itemWidth:210,itemHeight:15,itemTextColor:"#e3f2fd",itemDirection:"left-to-right",itemOpacity:1,symbolSize:20,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}]}]}),EDt=[{id:"Academic Majors",label:"Academic Majors",value:78.28,color:"hsl(3, 70%, 50%)"},{id:"Vocational Majors",label:"Vocational Majors",value:15.12,color:"hsl(242, 70%, 50%)"},{id:"Tech-Prep Majors",label:"Tech-Prep Majors",value:6.6,color:"hsl(105, 70%, 50%)"}],MDt=[{age:"Under 18",male:1641,maleColor:"hsl(131, 70%, 50%)",female:2175,femaleColor:"hsl(153, 70%, 50%)"},{age:"18-20",male:1553,maleColor:"hsl(13, 70%, 50%)",female:1958,femaleColor:"hsl(267, 70%, 50%)"},{age:"21-25",male:806,maleColor:"hsl(131, 70%, 50%)",female:1020,femaleColor:"hsl(153, 70%, 50%)"},{age:"26-30",male:176,maleColor:"hsl(13, 70%, 50%)",female:304,femaleColor:"hsl(267, 70%, 50%)"},{age:"31-40",male:95,maleColor:"hsl(131, 70%, 50%)",female:258,femaleColor:"hsl(153, 70%, 50%)"},{age:"Over 40",male:83,maleColor:"hsl(13, 70%, 50%)",female:123,femaleColor:"hsl(267, 70%, 50%)"}],ADt=({data:t})=>L.jsx(eye,{data:t,theme:{background:"black",text:{fontSize:18,fill:"#b0bec5"},axis:{legend:{text:{fontSize:30}}},labels:{text:{fontSize:15}}},keys:["male","female"],indexBy:"age",margin:{top:20,right:125,bottom:75,left:95},padding:.25,valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:{scheme:"set2"},borderRadius:4,borderWidth:1,borderColor:{theme:"labels.text.fill"},axisTop:null,axisRight:null,axisBottom:{tickSize:2,tickPadding:2,tickRotation:0,legend:"Age",legendPosition:"middle",legendOffset:55,truncateTickAt:0},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Total Enrollment",legendPosition:"middle",legendOffset:-80,truncateTickAt:0},labelSkipWidth:8,labelSkipHeight:7,labelTextColor:"black",legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:-149,itemsSpacing:2,itemWidth:99,itemHeight:25,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],role:"application",ariaLabel:"Nivo bar chart demo",maxValue:4e3,enableLabel:!1,enableGridX:!1,enableGridY:!1}),kDt=()=>L.jsxs(L.Fragment,{children:[L.jsxs(Gn,{sx:{textAlign:"center",m:2,display:{xs:"none",sm:"block"}},children:[L.jsxs(un,{variant:"h6",gutterBottom:!0,sx:{textAlign:"left"},children:["Source:  ",L.jsx(Xc,{href:"https://www.laredo.edu/about/institutional-research-and-planning/_files/Students%20Demographics%20by%20Semester%20FALL%202023%20Nov%20171.pdf",target:"_blank",underline:"hover",children:"Laredo College Fall 2023 Data"})]}),L.jsx(un,{variant:"h6",gutterBottom:!0,sx:{textAlign:"left"},children:"This data provides an overview of the student population at Laredo College in Fall 2023, highlighting its diversity and educational preferences."}),L.jsxs(un,{variant:"h6",gutterBottom:!0,sx:{textAlign:"left"},children:[L.jsx("strong",{style:{color:"#009688"},children:" Gender Distribution: "})," There is a higher number of female students compared to male students, with females constituting over 57% of the total headcount."]}),L.jsxs(un,{variant:"h6",gutterBottom:!0,sx:{textAlign:"left"},children:[L.jsx("strong",{style:{color:"#009688"},children:"Enrollment Status: "}),"A significant majority of students are enrolled part-time, which may indicate that many students are balancing education with other commitments like work or family."]}),L.jsxs(un,{variant:"h6",gutterBottom:!0,sx:{textAlign:"left"},children:[L.jsx("strong",{style:{color:"#009688"},children:"Major Preferences:"})," Academic majors are the most popular choice among students, followed by vocational and tech-prep majors. This suggests a strong inclination towards academic and traditional educational paths."]}),L.jsxs(un,{variant:"h6",gutterBottom:!0,sx:{textAlign:"left"},children:[L.jsx("strong",{style:{color:"#009688"},children:" Age Diversity: "}),"The age distribution is varied, with the largest group being those aged under 18, followed closely by the 18-20 age group. The majority of students are in the traditional college age range, but there is also a notable presence of older students."]})]}),L.jsx(Gn,{sx:{height:75,color:"#f1f8e9",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"none",sm:"block"}},children:L.jsx(un,{sx:{pt:1},variant:"h3",gutterBottom:!0,children:"Enrollement Status"})}),L.jsx(Gn,{sx:{height:75,color:"#ffffff",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"block",sm:"none"}},children:L.jsxs(un,{sx:{pt:2},variant:"h4",gutterBottom:!0,children:["Please Rotate Phone ",L.jsx(fR,{})," or Enlarge Screen ",L.jsx(hR,{})]})}),L.jsx(Gn,{sx:{height:{sm:400,lg:800},width:"80%",color:"black",bgcolor:"white",display:{xs:"none",sm:"block"},aspectRatio:.99,m:"auto"},children:L.jsx(G$t,{data:W$t})}),L.jsx(Gn,{sx:{height:75,color:"#f1f8e9",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"none",sm:"block"},mt:10},children:L.jsx(un,{sx:{pt:2},variant:"h3",gutterBottom:!0,children:"Declared Major"})}),L.jsx(Gn,{sx:{height:{sm:400,lg:800},width:"80%",color:"black",bgcolor:"white",display:{xs:"none",sm:"block"},aspectRatio:.99,m:"auto"},children:L.jsx(TDt,{data:EDt})}),L.jsx(Gn,{sx:{height:75,color:"#f1f8e9",bgcolor:"black",m:"auto",borderRadius:"16px",textAlign:"center",display:{xs:"none",sm:"block"},mt:10},children:L.jsx(un,{sx:{pt:2},variant:"h3",gutterBottom:!0,children:"Age Distribution"})}),L.jsx(Gn,{sx:{height:{sm:400,lg:800},width:"80%",color:"black",bgcolor:"white",display:{xs:"none",sm:"block"},aspectRatio:.99,m:"auto"},children:L.jsx(ADt,{data:MDt})})]}),sye=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),CP=R.createContext({}),ZW=R.createContext(null),JW=typeof window<"u",IDt=JW?R.useLayoutEffect:R.useEffect,oye=R.createContext({strict:!1}),TP=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),RDt="framerAppearId",aye="data-"+TP(RDt),PDt={skipAnimations:!1,useManualTiming:!1};function NDt(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const h=d&&r?e:n;return u&&s.add(c),h.has(c)||h.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,i&&(i=!1,l.process(c))}};return l}const NE=["read","resolveKeyframes","update","preRender","render","postRender"],$Dt=40;function lye(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=NE.reduce((m,y)=>(m[y]=NDt(s),m),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:f}=o,h=()=>{const m=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(m-i.timestamp,$Dt),1),i.timestamp=m,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),f.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(h))},p=()=>{n=!0,r=!0,i.isProcessing||t(h)};return{schedule:NE.reduce((m,y)=>{const x=o[y];return m[y]=(S,_=!1,C=!1)=>(n||p(),x.schedule(S,_,C)),m},{}),cancel:m=>{for(let y=0;y<NE.length;y++)o[NE[y]].cancel(m)},state:i,steps:o}}const{schedule:QW,cancel:p5t}=lye(queueMicrotask,!1);function bv(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const cye=R.createContext({});let gQ=!1;function DDt(t,e,n,r,i){const{visualElement:s}=R.useContext(CP),o=R.useContext(oye),a=R.useContext(ZW),l=R.useContext(sye).reducedMotion,c=R.useRef();r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,d=R.useContext(cye);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&ODt(c.current,n,i,d),R.useInsertionEffect(()=>{u&&u.update(n,a)});const f=R.useRef(!!(n[aye]&&!window.HandoffComplete));return IDt(()=>{u&&(u.updateFeatures(),QW.render(u.render),f.current&&u.animationState&&u.animationState.animateChanges())}),R.useEffect(()=>{u&&(!f.current&&u.animationState&&u.animationState.animateChanges(),f.current&&(f.current=!1,gQ||(gQ=!0,queueMicrotask(LDt))))}),u}function LDt(){window.HandoffComplete=!0}function ODt(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:uye(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&bv(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function uye(t){if(t)return t.options.allowProjection!==!1?t.projection:uye(t.parent)}function FDt(t,e,n){return R.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):bv(n)&&(n.current=r))},[e])}function wS(t){return typeof t=="string"||Array.isArray(t)}function SS(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const e7=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],t7=["initial",...e7];function EP(t){return SS(t.animate)||t7.some(e=>wS(t[e]))}function dye(t){return!!(EP(t)||t.variants)}function BDt(t,e){if(EP(t)){const{initial:n,animate:r}=t;return{initial:n===!1||wS(n)?n:void 0,animate:wS(r)?r:void 0}}return t.inherit!==!1?e:{}}function UDt(t){const{initial:e,animate:n}=BDt(t,R.useContext(CP));return R.useMemo(()=>({initial:e,animate:n}),[vQ(e),vQ(n)])}function vQ(t){return Array.isArray(t)?t.join(" "):t}const yQ={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ny={};for(const t in yQ)Ny[t]={isEnabled:e=>yQ[t].some(n=>!!e[n])};function zDt(t){for(const e in t)Ny[e]={...Ny[e],...t[e]}}const fye=R.createContext({}),VDt=Symbol.for("motionComponentSymbol"),Js=t=>t;let WDt=Js,hye=Js;function GDt({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&zDt(t);function s(a,l){let c;const u={...R.useContext(sye),...a,layoutId:HDt(a)},{isStatic:d}=u,f=UDt(a),h=r(a,d);if(!d&&JW){jDt();const p=XDt(u);c=p.MeasureLayout,f.visualElement=DDt(i,h,u,e,p.ProjectionNode)}return L.jsxs(CP.Provider,{value:f,children:[c&&f.visualElement?L.jsx(c,{visualElement:f.visualElement,...u}):null,n(i,a,FDt(h,f.visualElement,l),h,d,f.visualElement)]})}const o=R.forwardRef(s);return o[VDt]=i,o}function HDt({layoutId:t}){const e=R.useContext(fye).id;return e&&t!==void 0?e+"-"+t:t}function jDt(t,e){R.useContext(oye).strict}function XDt(t){const{drag:e,layout:n}=Ny;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function qDt(t){function e(r,i={}){return GDt(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const YDt=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function n7(t){return typeof t!="string"||t.includes("-")?!1:!!(YDt.indexOf(t)>-1||/[A-Z]/u.test(t))}const gk={};function KDt(t){Object.assign(gk,t)}const W_=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],up=new Set(W_);function pye(t,{layout:e,layoutId:n}){return up.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!gk[t]||t==="opacity")}const ko=t=>!!(t&&t.getVelocity),ZDt={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},JDt=W_.length;function QDt(t,e,n){let r="";for(let i=0;i<JDt;i++){const s=W_[i];if(t[s]!==void 0){const o=ZDt[s]||s;r+=`${o}(${t[s]}) `}}return r=r.trim(),n?r=n(t,e?"":r):e&&(r="none"),r}const mye=t=>e=>typeof e=="string"&&e.startsWith(t),gye=mye("--"),eLt=mye("var(--"),r7=t=>eLt(t)?tLt.test(t.split("/*")[0].trim()):!1,tLt=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,nLt=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Bh=(t,e,n)=>n>e?e:n<t?t:n,Mx={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},$b={...Mx,transform:t=>Bh(0,1,t)},$E={...Mx,default:1},Db=t=>Math.round(t*1e5)/1e5,i7=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,rLt=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,iLt=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function G_(t){return typeof t=="string"}function sLt(t){return t==null}const H_=t=>({test:e=>G_(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),zf=H_("deg"),qu=H_("%"),wn=H_("px"),oLt=H_("vh"),aLt=H_("vw"),xQ={...qu,parse:t=>qu.parse(t)/100,transform:t=>qu.transform(t*100)},bQ={...Mx,transform:Math.round},vye={borderWidth:wn,borderTopWidth:wn,borderRightWidth:wn,borderBottomWidth:wn,borderLeftWidth:wn,borderRadius:wn,radius:wn,borderTopLeftRadius:wn,borderTopRightRadius:wn,borderBottomRightRadius:wn,borderBottomLeftRadius:wn,width:wn,maxWidth:wn,height:wn,maxHeight:wn,size:wn,top:wn,right:wn,bottom:wn,left:wn,padding:wn,paddingTop:wn,paddingRight:wn,paddingBottom:wn,paddingLeft:wn,margin:wn,marginTop:wn,marginRight:wn,marginBottom:wn,marginLeft:wn,rotate:zf,rotateX:zf,rotateY:zf,rotateZ:zf,scale:$E,scaleX:$E,scaleY:$E,scaleZ:$E,skew:zf,skewX:zf,skewY:zf,distance:wn,translateX:wn,translateY:wn,translateZ:wn,x:wn,y:wn,z:wn,perspective:wn,transformPerspective:wn,opacity:$b,originX:xQ,originY:xQ,originZ:wn,zIndex:bQ,backgroundPositionX:wn,backgroundPositionY:wn,fillOpacity:$b,strokeOpacity:$b,numOctaves:bQ};function s7(t,e,n){const{style:r,vars:i,transform:s,transformOrigin:o}=t;let a=!1,l=!1,c=!0;for(const u in e){const d=e[u];if(gye(u)){i[u]=d;continue}const f=vye[u],h=nLt(d,f);if(up.has(u)){if(a=!0,s[u]=h,!c)continue;d!==(f.default||0)&&(c=!1)}else u.startsWith("origin")?(l=!0,o[u]=h):r[u]=h}if(e.transform||(a||n?r.transform=QDt(t.transform,c,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:f=0}=o;r.transformOrigin=`${u} ${d} ${f}`}}const o7=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yye(t,e,n){for(const r in e)!ko(e[r])&&!pye(r,n)&&(t[r]=e[r])}function lLt({transformTemplate:t},e){return R.useMemo(()=>{const n=o7();return s7(n,e,t),Object.assign({},n.vars,n.style)},[e])}function cLt(t,e){const n=t.style||{},r={};return yye(r,n,t),Object.assign(r,lLt(t,e)),r}function uLt(t,e){const n={},r=cLt(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const dLt=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vk(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||dLt.has(t)}let xye=t=>!vk(t);function fLt(t){t&&(xye=e=>e.startsWith("on")?!vk(e):t(e))}try{fLt(require("@emotion/is-prop-valid").default)}catch{}function hLt(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(xye(i)||n===!0&&vk(i)||!e&&!vk(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function wQ(t,e,n){return typeof t=="string"?t:wn.transform(e+n*t)}function pLt(t,e,n){const r=wQ(e,t.x,t.width),i=wQ(n,t.y,t.height);return`${r} ${i}`}const mLt={offset:"stroke-dashoffset",array:"stroke-dasharray"},gLt={offset:"strokeDashoffset",array:"strokeDasharray"};function vLt(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?mLt:gLt;t[s.offset]=wn.transform(-r);const o=wn.transform(e),a=wn.transform(n);t[s.array]=`${o} ${a}`}function a7(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(s7(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h,dimensions:p}=t;f.transform&&(p&&(h.transform=f.transform),delete f.transform),p&&(i!==void 0||s!==void 0||h.transform)&&(h.transformOrigin=pLt(p,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&vLt(f,o,a,l,!1)}const bye=()=>({...o7(),attrs:{}}),l7=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yLt(t,e,n,r){const i=R.useMemo(()=>{const s=bye();return a7(s,e,l7(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};yye(s,t.style,t),i.style={...s,...i.style}}return i}function xLt(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(n7(n)?yLt:uLt)(r,s,o,n),c=hLt(r,typeof n=="string",t),u=n!==R.Fragment?{...c,...l,ref:i}:{},{children:d}=r,f=R.useMemo(()=>ko(d)?d.get():d,[d]);return R.createElement(n,{...u,children:f})}}function wye(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const Sye=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _ye(t,e,n,r){wye(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Sye.has(i)?i:TP(i),e.attrs[i])}function c7(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(ko(i[o])||e.style&&ko(e.style[o])||pye(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return n&&i&&typeof i.willChange=="string"&&(n.applyWillChange=!1),s}function Cye(t,e,n){const r=c7(t,e,n);for(const i in t)if(ko(t[i])||ko(e[i])){const s=W_.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function SQ(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function u7(t,e,n,r){if(typeof e=="function"){const[i,s]=SQ(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=SQ(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function bLt(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const o5=t=>Array.isArray(t),wLt=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),SLt=t=>o5(t)?t[t.length-1]||0:t;function yM(t){const e=ko(t)?t.get():t;return wLt(e)?e.toValue():e}const Tye=new Set(["opacity","clipPath","filter","transform"]);function Eye(t){if(up.has(t))return"transform";if(Tye.has(t))return TP(t)}function MP(t,e){t.indexOf(e)===-1&&t.push(e)}function AP(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function _Lt({applyWillChange:t=!1,scrapeMotionValuesFromProps:e,createRenderState:n,onMount:r},i,s,o,a){const l={latestValues:TLt(i,s,o,a?!1:t,e),renderState:n()};return r&&(l.mount=c=>r(i,c,l)),l}const Mye=t=>(e,n)=>{const r=R.useContext(CP),i=R.useContext(ZW),s=()=>_Lt(t,e,r,i,n);return n?s():bLt(s)};function CLt(t,e){const n=Eye(e);n&&MP(t,n)}function _Q(t,e,n){const r=Array.isArray(e)?e:[e];for(let i=0;i<r.length;i++){const s=u7(t,r[i]);if(s){const{transitionEnd:o,transition:a,...l}=s;n(l,o)}}}function TLt(t,e,n,r,i){var s;const o={},a=[],l=r&&((s=t.style)===null||s===void 0?void 0:s.willChange)===void 0,c=i(t,{});for(const g in c)o[g]=yM(c[g]);let{initial:u,animate:d}=t;const f=EP(t),h=dye(t);e&&h&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let p=n?n.initial===!1:!1;p=p||u===!1;const v=p?d:u;return v&&typeof v!="boolean"&&!SS(v)&&_Q(t,v,(g,m)=>{for(const y in g){let x=g[y];if(Array.isArray(x)){const S=p?x.length-1:0;x=x[S]}x!==null&&(o[y]=x)}for(const y in m)o[y]=m[y]}),l&&(d&&u!==!1&&!SS(d)&&_Q(t,d,g=>{for(const m in g)CLt(a,m)}),a.length&&(o.willChange=a.join(","))),o}const{schedule:Lr,cancel:ff,state:Ys,steps:dL}=lye(typeof requestAnimationFrame<"u"?requestAnimationFrame:Js,!0),ELt={useVisualState:Mye({scrapeMotionValuesFromProps:Cye,createRenderState:bye,onMount:(t,e,{renderState:n,latestValues:r})=>{Lr.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Lr.render(()=>{a7(n,r,l7(e.tagName),t.transformTemplate),_ye(e,n)})}})},MLt={useVisualState:Mye({applyWillChange:!0,scrapeMotionValuesFromProps:c7,createRenderState:o7})};function ALt(t,{forwardMotionProps:e=!1},n,r){return{...n7(t)?ELt:MLt,preloadedFeatures:n,useRender:xLt(e),createVisualElement:r,Component:t}}function jd(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Aye=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function kP(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const kLt=t=>e=>Aye(e)&&t(e,kP(e));function Kd(t,e,n,r){return jd(t,e,kLt(n),r)}const ILt=(t,e)=>n=>e(t(n)),Zd=(...t)=>t.reduce(ILt);function kye(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const CQ=kye("dragHorizontal"),TQ=kye("dragVertical");function Iye(t){let e=!1;if(t==="y")e=TQ();else if(t==="x")e=CQ();else{const n=CQ(),r=TQ();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function Rye(){const t=Iye(!0);return t?(t(),!1):!0}class dp{constructor(e){this.isMounted=!1,this.node=e}update(){}}function EQ(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||Rye())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[r];l&&Lr.postRender(()=>l(s,o))};return Kd(t.current,n,i,{passive:!t.getProps()[r]})}class RLt extends dp{mount(){this.unmount=Zd(EQ(this.node,!0),EQ(this.node,!1))}unmount(){}}class PLt extends dp{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zd(jd(this.node.current,"focus",()=>this.onFocus()),jd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Pye=(t,e)=>e?t===e?!0:Pye(t,e.parentElement):!1;function fL(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,kP(n))}class NLt extends dp{constructor(){super(...arguments),this.removeStartListeners=Js,this.removeEndListeners=Js,this.removeAccessibleListeners=Js,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Kd(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps(),f=!d&&!Pye(this.node.current,a.target)?u:c;f&&Lr.update(()=>f(a,l))},{passive:!(r.onTap||r.onPointerUp)}),o=Kd(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Zd(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||fL("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Lr.postRender(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=jd(this.node.current,"keyup",o),fL("down",(a,l)=>{this.startPress(a,l)})},n=jd(this.node.current,"keydown",e),r=()=>{this.isPressing&&fL("cancel",(s,o)=>this.cancelPress(s,o))},i=jd(this.node.current,"blur",r);this.removeAccessibleListeners=Zd(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Lr.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Rye()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Lr.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Kd(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=jd(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Zd(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const a5=new WeakMap,hL=new WeakMap,$Lt=t=>{const e=a5.get(t.target);e&&e(t)},DLt=t=>{t.forEach($Lt)};function LLt({root:t,...e}){const n=t||document;hL.has(n)||hL.set(n,{});const r=hL.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(DLt,{root:t,...e})),r[i]}function OLt(t,e,n){const r=LLt(e);return a5.set(t,n),r.observe(t),()=>{a5.delete(t),r.unobserve(t)}}const FLt={some:0,all:1};class BLt extends dp{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:FLt[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return OLt(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ULt(e,n))&&this.startObserver()}unmount(){}}function ULt({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const zLt={inView:{Feature:BLt},tap:{Feature:NLt},focus:{Feature:PLt},hover:{Feature:RLt}};function Nye(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function IP(t,e,n){const r=t.getProps();return u7(r,e,n!==void 0?n:r.custom,t)}const Jd=t=>t*1e3,Qd=t=>t/1e3,VLt={type:"spring",stiffness:500,damping:25,restSpeed:10},WLt=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),GLt={type:"keyframes",duration:.8},HLt={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},jLt=(t,{keyframes:e})=>e.length>2?GLt:up.has(t)?t.startsWith("scale")?WLt(e[1]):VLt:HLt;function XLt({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function d7(t,e){return t[e]||t.default||t}const qLt=t=>t!==null;function RP(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(qLt),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}let xM;function YLt(){xM=void 0}const wh={now:()=>(xM===void 0&&wh.set(Ys.isProcessing||PDt.useManualTiming?Ys.timestamp:performance.now()),xM),set:t=>{xM=t,queueMicrotask(YLt)}},$ye=t=>/^0[^.\s]+$/u.test(t);function KLt(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||$ye(t):!0}const Dye=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),ZLt=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function JLt(t){const e=ZLt.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function Lye(t,e,n=1){const[r,i]=JLt(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Dye(o)?parseFloat(o):o}return r7(i)?Lye(i,e,n+1):i}const QLt=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),MQ=t=>t===Mx||t===wn,AQ=(t,e)=>parseFloat(t.split(", ")[e]),kQ=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return AQ(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?AQ(s[1],t):0}},eOt=new Set(["x","y","z"]),tOt=W_.filter(t=>!eOt.has(t));function nOt(t){const e=[];return tOt.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const $y={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:kQ(4,13),y:kQ(5,14)};$y.translateX=$y.x;$y.translateY=$y.y;const Oye=t=>e=>e.test(t),rOt={test:t=>t==="auto",parse:t=>t},Fye=[Mx,wn,qu,zf,aLt,oLt,rOt],IQ=t=>Fye.find(Oye(t)),Bm=new Set;let l5=!1,c5=!1;function Bye(){if(c5){const t=Array.from(Bm).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=nOt(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}c5=!1,l5=!1,Bm.forEach(t=>t.complete()),Bm.clear()}function Uye(){Bm.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(c5=!0)})}function iOt(){Uye(),Bye()}class f7{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Bm.add(this),l5||(l5=!0,Lr.read(Uye),Lr.resolveKeyframes(Bye))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Bm.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Bm.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const h7=(t,e)=>n=>!!(G_(n)&&iLt.test(n)&&n.startsWith(t)||e&&!sLt(n)&&Object.prototype.hasOwnProperty.call(n,e)),zye=(t,e,n)=>r=>{if(!G_(r))return r;const[i,s,o,a]=r.match(i7);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},sOt=t=>Bh(0,255,t),pL={...Mx,transform:t=>Math.round(sOt(t))},wm={test:h7("rgb","red"),parse:zye("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+pL.transform(t)+", "+pL.transform(e)+", "+pL.transform(n)+", "+Db($b.transform(r))+")"};function oOt(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const u5={test:h7("#"),parse:oOt,transform:wm.transform},wv={test:h7("hsl","hue"),parse:zye("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+qu.transform(Db(e))+", "+qu.transform(Db(n))+", "+Db($b.transform(r))+")"},wo={test:t=>wm.test(t)||u5.test(t)||wv.test(t),parse:t=>wm.test(t)?wm.parse(t):wv.test(t)?wv.parse(t):u5.parse(t),transform:t=>G_(t)?t:t.hasOwnProperty("red")?wm.transform(t):wv.transform(t)};function aOt(t){var e,n;return isNaN(t)&&G_(t)&&(((e=t.match(i7))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(rLt))===null||n===void 0?void 0:n.length)||0)>0}const Vye="number",Wye="color",lOt="var",cOt="var(",RQ="${}",uOt=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _S(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(uOt,l=>(wo.test(l)?(r.color.push(s),i.push(Wye),n.push(wo.parse(l))):l.startsWith(cOt)?(r.var.push(s),i.push(lOt),n.push(l)):(r.number.push(s),i.push(Vye),n.push(parseFloat(l))),++s,RQ)).split(RQ);return{values:n,split:a,indexes:r,types:i}}function Gye(t){return _S(t).values}function Hye(t){const{split:e,types:n}=_S(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Vye?s+=Db(i[o]):a===Wye?s+=wo.transform(i[o]):s+=i[o]}return s}}const dOt=t=>typeof t=="number"?0:t;function fOt(t){const e=Gye(t);return Hye(t)(e.map(dOt))}const Uh={test:aOt,parse:Gye,createTransformer:Hye,getAnimatableNone:fOt},hOt=new Set(["brightness","contrast","saturate","opacity"]);function pOt(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(i7)||[];if(!r)return t;const i=n.replace(r,"");let s=hOt.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const mOt=/\b([a-z-]*)\(.*?\)/gu,d5={...Uh,getAnimatableNone:t=>{const e=t.match(mOt);return e?e.map(pOt).join(" "):t}},gOt={...vye,color:wo,backgroundColor:wo,outlineColor:wo,fill:wo,stroke:wo,borderColor:wo,borderTopColor:wo,borderRightColor:wo,borderBottomColor:wo,borderLeftColor:wo,filter:d5,WebkitFilter:d5},p7=t=>gOt[t];function jye(t,e){let n=p7(t);return n!==d5&&(n=Uh),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const vOt=new Set(["auto","none","0"]);function yOt(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!vOt.has(s)&&_S(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=jye(n,i)}class Xye extends f7{constructor(e,n,r,i){super(e,n,r,i,i==null?void 0:i.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),r7(c))){const u=Lye(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!QLt.has(r)||e.length!==2)return;const[i,s]=e,o=IQ(i),a=IQ(s);if(o!==a)if(MQ(o)&&MQ(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)KLt(e[i])&&r.push(i);r.length&&yOt(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$y[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=$y[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function qye(t){let e;return()=>(e===void 0&&(e=t()),e)}const PQ=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Uh.test(t)||t==="0")&&!t.startsWith("url("));function xOt(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function bOt(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=PQ(i,e),a=PQ(s,e);return!o||!a?!1:xOt(t)||n==="spring"&&r}class Yye{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&iOt(),this._resolved}onKeyframesResolved(e,n){this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!bOt(e,r,i,s))if(o)this.options.duration=0;else{l==null||l(RP(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function Kye(t,e){return e?t*(1e3/e):0}const wOt=5;function Zye(t,e,n){const r=Math.max(e-wOt,0);return Kye(n-t(r),e-r)}const mL=.001,SOt=.01,NQ=10,_Ot=.05,COt=1;function TOt({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s;WDt(t<=Jd(NQ));let o=1-e;o=Bh(_Ot,COt,o),t=Bh(SOt,NQ,Qd(t)),o<1?(i=c=>{const u=c*o,d=u*t,f=u-n,h=f5(c,o),p=Math.exp(-d);return mL-f/h*p},s=c=>{const d=c*o*t,f=d*n+n,h=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-d),v=f5(Math.pow(c,2),o);return(-i(c)+mL>0?-1:1)*((f-h)*p)/v}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-mL+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=MOt(i,s,a);if(t=Jd(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const EOt=12;function MOt(t,e,n){let r=n;for(let i=1;i<EOt;i++)r=r-t(r)/e(r);return r}function f5(t,e){return t*Math.sqrt(1-e*e)}const AOt=["duration","bounce"],kOt=["stiffness","damping","mass"];function $Q(t,e){return e.some(n=>t[n]!==void 0)}function IOt(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!$Q(t,kOt)&&$Q(t,AOt)){const n=TOt(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function Jye({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:u,velocity:d,isResolvedFromDuration:f}=IOt({...r,velocity:-Qd(r.velocity||0)}),h=d||0,p=l/(2*Math.sqrt(a*c)),v=s-i,g=Qd(Math.sqrt(a/c)),m=Math.abs(v)<5;n||(n=m?.01:2),e||(e=m?.005:.5);let y;if(p<1){const x=f5(g,p);y=S=>{const _=Math.exp(-p*g*S);return s-_*((h+p*g*v)/x*Math.sin(x*S)+v*Math.cos(x*S))}}else if(p===1)y=x=>s-Math.exp(-g*x)*(v+(h+g*v)*x);else{const x=g*Math.sqrt(p*p-1);y=S=>{const _=Math.exp(-p*g*S),C=Math.min(x*S,300);return s-_*((h+p*g*v)*Math.sinh(C)+x*v*Math.cosh(C))/x}}return{calculatedDuration:f&&u||null,next:x=>{const S=y(x);if(f)o.done=x>=u;else{let _=h;x!==0&&(p<1?_=Zye(y,x,S):_=0);const C=Math.abs(_)<=n,T=Math.abs(s-S)<=e;o.done=C&&T}return o.value=o.done?s:S,o}}}function DQ({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},h=A=>a!==void 0&&A<a||l!==void 0&&A>l,p=A=>a===void 0?l:l===void 0||Math.abs(a-A)<Math.abs(l-A)?a:l;let v=n*e;const g=d+v,m=o===void 0?g:o(g);m!==g&&(v=m-d);const y=A=>-v*Math.exp(-A/r),x=A=>m+y(A),S=A=>{const M=y(A),E=x(A);f.done=Math.abs(M)<=c,f.value=f.done?m:E};let _,C;const T=A=>{h(f.value)&&(_=A,C=Jye({keyframes:[f.value,p(f.value)],velocity:Zye(x,A,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:A=>{let M=!1;return!C&&_===void 0&&(M=!0,S(A),T(A)),_!==void 0&&A>=_?C.next(A-_):(!M&&S(A),f)}}}const Qye=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ROt=1e-7,POt=12;function NOt(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=Qye(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>ROt&&++a<POt);return o}function j_(t,e,n,r){if(t===e&&n===r)return Js;const i=s=>NOt(s,0,1,t,n);return s=>s===0||s===1?s:Qye(i(s),e,r)}const $Ot=j_(.42,0,1,1),DOt=j_(0,0,.58,1),exe=j_(.42,0,.58,1),LOt=t=>Array.isArray(t)&&typeof t[0]!="number",txe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,nxe=t=>e=>1-t(1-e),m7=t=>1-Math.sin(Math.acos(t)),rxe=nxe(m7),OOt=txe(m7),ixe=j_(.33,1.53,.69,.99),g7=nxe(ixe),FOt=txe(g7),BOt=t=>(t*=2)<1?.5*g7(t):.5*(2-Math.pow(2,-10*(t-1))),UOt={linear:Js,easeIn:$Ot,easeInOut:exe,easeOut:DOt,circIn:m7,circInOut:OOt,circOut:rxe,backIn:g7,backInOut:FOt,backOut:ixe,anticipate:BOt},LQ=t=>{if(Array.isArray(t)){hye(t.length===4);const[e,n,r,i]=t;return j_(e,n,r,i)}else if(typeof t=="string")return UOt[t];return t},CS=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},yi=(t,e,n)=>t+(e-t)*n;function gL(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function zOt({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=gL(l,a,t+1/3),s=gL(l,a,t),o=gL(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function yk(t,e){return n=>n>0?e:t}const vL=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},VOt=[u5,wm,wv],WOt=t=>VOt.find(e=>e.test(t));function OQ(t){const e=WOt(t);if(!e)return!1;let n=e.parse(t);return e===wv&&(n=zOt(n)),n}const FQ=(t,e)=>{const n=OQ(t),r=OQ(e);if(!n||!r)return yk(t,e);const i={...n};return s=>(i.red=vL(n.red,r.red,s),i.green=vL(n.green,r.green,s),i.blue=vL(n.blue,r.blue,s),i.alpha=yi(n.alpha,r.alpha,s),wm.transform(i))},h5=new Set(["none","hidden"]);function GOt(t,e){return h5.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function HOt(t,e){return n=>yi(t,e,n)}function v7(t){return typeof t=="number"?HOt:typeof t=="string"?r7(t)?yk:wo.test(t)?FQ:qOt:Array.isArray(t)?sxe:typeof t=="object"?wo.test(t)?FQ:jOt:yk}function sxe(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>v7(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function jOt(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=v7(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function XOt(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const qOt=(t,e)=>{const n=Uh.createTransformer(e),r=_S(t),i=_S(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?h5.has(t)&&!i.values.length||h5.has(e)&&!r.values.length?GOt(t,e):Zd(sxe(XOt(r,i),i.values),n):yk(t,e)};function oxe(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?yi(t,e,n):v7(t)(t,e)}function YOt(t,e,n){const r=[],i=n||oxe,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Js:e;a=Zd(l,a)}r.push(a)}return r}function KOt(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(hye(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=YOt(e,r,i),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const d=CS(t[u],t[u+1],c);return o[u](d)};return n?c=>l(Bh(t[0],t[s-1],c)):l}function ZOt(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=CS(0,e,r);t.push(yi(n,1,i))}}function JOt(t){const e=[0];return ZOt(e,t.length-1),e}function QOt(t,e){return t.map(n=>n*e)}function e4t(t,e){return t.map(()=>e||exe).splice(0,t.length-1)}function xk({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=LOt(r)?r.map(LQ):LQ(r),s={done:!1,value:e[0]},o=QOt(n&&n.length===e.length?n:JOt(e),t),a=KOt(o,e,{ease:Array.isArray(i)?i:e4t(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const BQ=2e4;function t4t(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<BQ;)e+=n,r=t.next(e);return e>=BQ?1/0:e}const n4t=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Lr.update(e,!0),stop:()=>ff(e),now:()=>Ys.isProcessing?Ys.timestamp:wh.now()}},r4t={decay:DQ,inertia:DQ,tween:xk,keyframes:xk,spring:Jye},i4t=t=>t/100;class y7 extends Yye{constructor({KeyframeResolver:e=f7,...n}){super(n),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:r,motionValue:i,keyframes:s}=this.options,o=(a,l)=>this.onKeyframesResolved(a,l);r&&i&&i.owner?this.resolver=i.owner.resolveKeyframes(s,o,r,i):this.resolver=new e(s,o,r,i),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=r4t[n]||xk;let l,c;a!==xk&&typeof e[0]!="number"&&(l=Zd(i4t,oxe(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=t4t(u));const{calculatedDuration:d}=u,f=d+i,h=f*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:h,repeatType:p,repeatDelay:v,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const m=this.currentTime-f*(this.speed>=0?1:-1),y=this.speed>=0?m<0:m>u;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let x=this.currentTime,S=s;if(h){const A=Math.min(this.currentTime,u)/d;let M=Math.floor(A),E=A%1;!E&&A>=1&&(E=1),E===1&&M--,M=Math.min(M,h+1),!!(M%2)&&(p==="reverse"?(E=1-E,v&&(E-=v/d)):p==="mirror"&&(S=o)),x=Bh(0,1,E)*d}const _=y?{done:!1,value:l[0]}:S.next(x);a&&(_.value=a(_.value));let{done:C}=_;!y&&c!==null&&(C=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return T&&i!==void 0&&(_.value=RP(l,this.options,i)),g&&g(_.value),T&&this.finish(),_}get duration(){const{resolved:e}=this;return e?Qd(e.calculatedDuration):0}get time(){return Qd(this.currentTime)}set time(e){e=Jd(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Qd(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=n4t,onPlay:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=r),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const axe=t=>Array.isArray(t)&&typeof t[0]=="number";function lxe(t){return!!(!t||typeof t=="string"&&t in x7||axe(t)||Array.isArray(t)&&t.every(lxe))}const Q1=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,x7={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Q1([0,.65,.55,1]),circOut:Q1([.55,0,1,.45]),backIn:Q1([.31,.01,.66,-.59]),backOut:Q1([.33,1.53,.69,.99])};function s4t(t){return cxe(t)||x7.easeOut}function cxe(t){if(t)return axe(t)?Q1(t):Array.isArray(t)?t.map(s4t):x7[t]}function o4t(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=cxe(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const a4t=qye(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),bk=10,l4t=2e4;function c4t(t){return t.type==="spring"||!lxe(t.ease)}function u4t(t,e){const n=new y7({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<l4t;)r=n.sample(s),i.push(r.value),s+=bk;return{times:void 0,keyframes:i,duration:s-bk,ease:"linear"}}class UQ extends Yye{constructor(e){super(e);const{name:n,motionValue:r,keyframes:i}=this.options;this.resolver=new Xye(i,(s,o)=>this.onKeyframesResolved(s,o),n,r),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:o,type:a,motionValue:l,name:c}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(c4t(this.options)){const{onComplete:d,onUpdate:f,motionValue:h,...p}=this.options,v=u4t(e,p);e=v.keyframes,e.length===1&&(e[1]=e[0]),i=v.duration,s=v.times,o=v.ease,a="keyframes"}const u=o4t(l.owner.current,c,e,{...this.options,duration:i,times:s,ease:o});return u.startTime=wh.now(),this.pendingTimeline?(u.timeline=this.pendingTimeline,this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;l.set(RP(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Qd(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Qd(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Jd(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Js;const{animation:r}=n;r.timeline=e,r.onfinish=null}return Js}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,...f}=this.options,h=new y7({...f,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),p=Jd(this.time);c.setWithVelocity(h.sample(p-bk).value,h.sample(p).value,bk)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return a4t()&&r&&Tye.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}function d4t(t,e){let n;const r=()=>{const{currentTime:i}=e,o=(i===null?0:i.value)/100;n!==o&&t(o),n=o};return Lr.update(r,!0),()=>ff(r)}const f4t=qye(()=>window.ScrollTimeline!==void 0);class h4t{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e){const n=this.animations.map(r=>{if(f4t()&&r.attachTimeline)r.attachTimeline(e);else return r.pause(),d4t(i=>{r.time=r.duration*i},e)});return()=>{n.forEach((r,i)=>{r&&r(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const b7=(t,e,n,r={},i,s,o)=>a=>{const l=d7(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Jd(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:h=>{e.set(h),l.onUpdate&&l.onUpdate(h)},onComplete:()=>{a(),l.onComplete&&l.onComplete(),o&&o()},onStop:o,name:t,motionValue:e,element:s?void 0:i};XLt(l)||(d={...d,...jLt(t,d)}),d.duration&&(d.duration=Jd(d.duration)),d.repeatDelay&&(d.repeatDelay=Jd(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const h=RP(d.keyframes,l);if(h!==void 0)return Lr.update(()=>{d.onUpdate(h),d.onComplete()}),new h4t([])}return!s&&UQ.supports(d)?new UQ(d):new y7(d)};class w7{constructor(){this.subscriptions=[]}add(e){return MP(this.subscriptions,e),()=>AP(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zQ=30,p4t=t=>!isNaN(parseFloat(t));class uxe{constructor(e,n={}){this.version="11.3.19",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=wh.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=wh.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=p4t(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new w7);const r=this.events[e].add(n);return e==="change"?()=>{r(),Lr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=wh.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>zQ)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,zQ);return Kye(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function TS(t,e){return new uxe(t,e)}function m4t(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,TS(n))}function g4t(t,e){const n=IP(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=SLt(s[o]);m4t(t,o,a)}}function dxe(t){return t.getProps()[aye]}class v4t extends uxe{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(e){const n=Eye(e);if(!n)return;const r=this.counts.get(n)||0;this.counts.set(n,r+1),r===0&&(this.output.push(n),this.update());let i=!1;return()=>{if(i)return;i=!0;const s=this.counts.get(n)-1;this.counts.set(n,s),s===0&&(AP(this.output,n),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}function y4t(t){return!!(ko(t)&&t.add)}function p5(t,e){var n;if(!t.applyWillChange)return;let r=t.getValue("willChange");if(!r&&!(!((n=t.props.style)===null||n===void 0)&&n.willChange)&&(r=new v4t("auto"),t.addValue("willChange",r)),y4t(r))return r.add(e)}function x4t({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function fxe(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),h=l[d];if(h===void 0||u&&x4t(u,d))continue;const p={delay:n,elapsed:0,...d7(o||{},d)};let v=!1;if(window.HandoffAppearAnimations){const m=dxe(t);if(m){const y=window.HandoffAppearAnimations(m,d,f,Lr);y!==null&&(p.elapsed=y,v=!0)}}f.start(b7(d,f,h,t.shouldReduceMotion&&up.has(d)?{type:!1}:p,t,v,p5(t,d)));const g=f.animation;g&&c.push(g)}return a&&Promise.all(c).then(()=>{Lr.update(()=>{a&&g4t(t,a)})}),c}function m5(t,e,n={}){var r;const i=IP(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(fxe(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return b4t(t,e,u+c,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function b4t(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(w4t).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(m5(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function w4t(t,e){return t.sortNodePosition(e)}function S4t(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>m5(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=m5(t,e,n);else{const i=typeof e=="function"?IP(t,e,n.custom):e;r=Promise.all(fxe(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const _4t=[...e7].reverse(),C4t=e7.length;function T4t(t){return e=>Promise.all(e.map(({animation:n,options:r})=>S4t(t,n,r)))}function E4t(t){let e=T4t(t),n=VQ(),r=!0;const i=l=>(c,u)=>{var d;const f=IP(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:h,transitionEnd:p,...v}=f;c={...c,...v,...p}}return c};function s(l){e=l(t)}function o(l){const c=t.getProps(),u=t.getVariantContext(!0)||{},d=[],f=new Set;let h={},p=1/0;for(let g=0;g<C4t;g++){const m=_4t[g],y=n[m],x=c[m]!==void 0?c[m]:u[m],S=wS(x),_=m===l?y.isActive:null;_===!1&&(p=g);let C=x===u[m]&&x!==c[m]&&S;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),y.protectedKeys={...h},!y.isActive&&_===null||!x&&!y.prevProp||SS(x)||typeof x=="boolean")continue;let A=M4t(y.prevProp,x)||m===l&&y.isActive&&!C&&S||g>p&&S,M=!1;const E=Array.isArray(x)?x:[x];let P=E.reduce(i(m),{});_===!1&&(P={});const{prevResolvedValues:N={}}=y,F={...N,...P},$=O=>{A=!0,f.has(O)&&(M=!0,f.delete(O)),y.needsAnimating[O]=!0;const z=t.getValue(O);z&&(z.liveStyle=!1)};for(const O in F){const z=P[O],X=N[O];if(h.hasOwnProperty(O))continue;let D=!1;o5(z)&&o5(X)?D=!Nye(z,X):D=z!==X,D?z!=null?$(O):f.add(O):z!==void 0&&f.has(O)?$(O):y.protectedKeys[O]=!0}y.prevProp=x,y.prevResolvedValues=P,y.isActive&&(h={...h,...P}),r&&t.blockInitialAnimation&&(A=!1),A&&(!C||M)&&d.push(...E.map(O=>({animation:O,options:{type:m}})))}if(f.size){const g={};f.forEach(m=>{const y=t.getBaseTarget(m),x=t.getValue(m);x&&(x.liveStyle=!0),g[m]=y??null}),d.push({animation:g})}let v=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var h;return(h=f.animationState)===null||h===void 0?void 0:h.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=VQ(),r=!0}}}function M4t(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Nye(e,t):!1}function zp(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VQ(){return{animate:zp(!0),whileInView:zp(),whileHover:zp(),whileTap:zp(),whileDrag:zp(),whileFocus:zp(),exit:zp()}}class A4t extends dp{constructor(e){super(e),e.animationState||(e.animationState=E4t(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();SS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let k4t=0;class I4t extends dp{constructor(){super(...arguments),this.id=k4t++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const R4t={animation:{Feature:A4t},exit:{Feature:I4t}},WQ=(t,e)=>Math.abs(t-e);function P4t(t,e){const n=WQ(t.x,e.x),r=WQ(t.y,e.y);return Math.sqrt(n**2+r**2)}class hxe{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=xL(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=P4t(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:p}=d,{timestamp:v}=Ys;this.history.push({...p,timestamp:v});const{onStart:g,onMove:m}=this.handlers;f||(g&&g(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=yL(f,this.transformPagePoint),Lr.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=xL(d.type==="pointercancel"?this.lastMoveEventInfo:yL(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,g),p&&p(d,g)},!Aye(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=kP(e),a=yL(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Ys;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,xL(a,this.history)),this.removeListeners=Zd(Kd(this.contextWindow,"pointermove",this.handlePointerMove),Kd(this.contextWindow,"pointerup",this.handlePointerUp),Kd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ff(this.updatePoint)}}function yL(t,e){return e?{point:e(t.point)}:t}function GQ(t,e){return{x:t.x-e.x,y:t.y-e.y}}function xL({point:t},e){return{point:t,delta:GQ(t,pxe(e)),offset:GQ(t,N4t(e)),velocity:$4t(e,.1)}}function N4t(t){return t[0]}function pxe(t){return t[t.length-1]}function $4t(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=pxe(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Jd(e)));)n--;if(!r)return{x:0,y:0};const s=Qd(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const mxe=1e-4,D4t=1-mxe,L4t=1+mxe,gxe=.01,O4t=0-gxe,F4t=0+gxe;function hl(t){return t.max-t.min}function B4t(t,e,n){return Math.abs(t-e)<=n}function HQ(t,e,n,r=.5){t.origin=r,t.originPoint=yi(e.min,e.max,t.origin),t.scale=hl(n)/hl(e),t.translate=yi(n.min,n.max,t.origin)-t.originPoint,(t.scale>=D4t&&t.scale<=L4t||isNaN(t.scale))&&(t.scale=1),(t.translate>=O4t&&t.translate<=F4t||isNaN(t.translate))&&(t.translate=0)}function Lb(t,e,n,r){HQ(t.x,e.x,n.x,r?r.originX:void 0),HQ(t.y,e.y,n.y,r?r.originY:void 0)}function jQ(t,e,n){t.min=n.min+e.min,t.max=t.min+hl(e)}function U4t(t,e,n){jQ(t.x,e.x,n.x),jQ(t.y,e.y,n.y)}function XQ(t,e,n){t.min=e.min-n.min,t.max=t.min+hl(e)}function Ob(t,e,n){XQ(t.x,e.x,n.x),XQ(t.y,e.y,n.y)}function z4t(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?yi(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?yi(n,t,r.max):Math.min(t,n)),t}function qQ(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function V4t(t,{top:e,left:n,bottom:r,right:i}){return{x:qQ(t.x,n,i),y:qQ(t.y,e,r)}}function YQ(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function W4t(t,e){return{x:YQ(t.x,e.x),y:YQ(t.y,e.y)}}function G4t(t,e){let n=.5;const r=hl(t),i=hl(e);return i>r?n=CS(e.min,e.max-r,t.min):r>i&&(n=CS(t.min,t.max-i,e.min)),Bh(0,1,n)}function H4t(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const g5=.35;function j4t(t=g5){return t===!1?t=0:t===!0&&(t=g5),{x:KQ(t,"left","right"),y:KQ(t,"top","bottom")}}function KQ(t,e,n){return{min:ZQ(t,e),max:ZQ(t,n)}}function ZQ(t,e){return typeof t=="number"?t:t[e]||0}const JQ=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sv=()=>({x:JQ(),y:JQ()}),QQ=()=>({min:0,max:0}),zi=()=>({x:QQ(),y:QQ()});function Rl(t){return[t("x"),t("y")]}function vxe({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function X4t({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function q4t(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function bL(t){return t===void 0||t===1}function v5({scale:t,scaleX:e,scaleY:n}){return!bL(t)||!bL(e)||!bL(n)}function Qp(t){return v5(t)||yxe(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function yxe(t){return eee(t.x)||eee(t.y)}function eee(t){return t&&t!=="0%"}function wk(t,e,n){const r=t-n,i=e*r;return n+i}function tee(t,e,n,r,i){return i!==void 0&&(t=wk(t,i,r)),wk(t,n,r)+e}function y5(t,e=0,n=1,r,i){t.min=tee(t.min,e,n,r,i),t.max=tee(t.max,e,n,r,i)}function xxe(t,{x:e,y:n}){y5(t.x,e.translate,e.scale,e.originPoint),y5(t.y,n.translate,n.scale,n.originPoint)}const nee=.999999999999,ree=1.0000000000001;function Y4t(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Cv(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,xxe(t,o)),r&&Qp(s.latestValues)&&Cv(t,s.latestValues))}e.x<ree&&e.x>nee&&(e.x=1),e.y<ree&&e.y>nee&&(e.y=1)}function _v(t,e){t.min=t.min+e,t.max=t.max+e}function iee(t,e,n,r,i=.5){const s=yi(t.min,t.max,i);y5(t,e,n,s,r)}function Cv(t,e){iee(t.x,e.x,e.scaleX,e.scale,e.originX),iee(t.y,e.y,e.scaleY,e.scale,e.originY)}function bxe(t,e){return vxe(q4t(t.getBoundingClientRect(),e))}function K4t(t,e,n){const r=bxe(t,n),{scroll:i}=e;return i&&(_v(r.x,i.offset.x),_v(r.y,i.offset.y)),r}const wxe=({current:t})=>t?t.ownerDocument.defaultView:null,Z4t=new WeakMap;class J4t{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=zi(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(kP(u,"page").point)},s=(u,d)=>{var f;const{drag:h,dragPropagation:p,onDragStart:v}=this.getProps();if(h&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Iye(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rl(m=>{let y=this.getAxisMotionValue(m).get()||0;if(qu.test(y)){const{projection:x}=this.visualElement;if(x&&x.layout){const S=x.layout.layoutBox[m];S&&(y=hl(S)*(parseFloat(y)/100))}}this.originPoint[m]=y}),v&&Lr.postRender(()=>v(u,d)),(f=this.removeWillChange)===null||f===void 0||f.call(this),this.removeWillChange=p5(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:p,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:g}=d;if(h&&this.currentDirection===null){this.currentDirection=Q4t(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,g),this.updateAxis("y",d.point,g),this.visualElement.render(),v&&v(u,d)},a=(u,d)=>this.stop(u,d),l=()=>Rl(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new hxe(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:wxe(this.visualElement)})}stop(e,n){var r;(r=this.removeWillChange)===null||r===void 0||r.call(this);const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Lr.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!DE(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=z4t(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&bv(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=V4t(i.layoutBox,n):this.constraints=!1,this.elastic=j4t(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Rl(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=H4t(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!bv(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=K4t(r,i.root,this.visualElement.getTransformPagePoint());let o=W4t(i.layout.layoutBox,s);if(n){const a=n(X4t(o));this.hasMutatedConstraints=!!a,a&&(o=vxe(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Rl(u=>{if(!DE(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(b7(e,r,0,n,this.visualElement,!1,p5(this.visualElement,e)))}stopAnimation(){Rl(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Rl(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Rl(n=>{const{drag:r}=this.getProps();if(!DE(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-yi(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!bv(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Rl(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=G4t({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Rl(o=>{if(!DE(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(yi(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;Z4t.set(this.visualElement,this);const e=this.visualElement.current,n=Kd(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();bv(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Lr.read(r);const o=jd(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Rl(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=g5,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function DE(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Q4t(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class eFt extends dp{constructor(e){super(e),this.removeGroupControls=Js,this.removeListeners=Js,this.controls=new J4t(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Js}unmount(){this.removeGroupControls(),this.removeListeners()}}const see=t=>(e,n)=>{t&&Lr.postRender(()=>t(e,n))};class tFt extends dp{constructor(){super(...arguments),this.removePointerDownListener=Js}onPointerDown(e){this.session=new hxe(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wxe(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:see(e),onStart:see(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Lr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Kd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function nFt(){const t=R.useContext(ZW);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=R.useId();R.useEffect(()=>r(i),[]);const s=R.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const bM={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function oee(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const B1={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(wn.test(t))t=parseFloat(t);else return t;const n=oee(t,e.target.x),r=oee(t,e.target.y);return`${n}% ${r}%`}},rFt={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Uh.parse(t);if(i.length>5)return r;const s=Uh.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=yi(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class iFt extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;KDt(sFt),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),bM.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Lr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),QW.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Sxe(t){const[e,n]=nFt(),r=R.useContext(fye);return L.jsx(iFt,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(cye),isPresent:e,safeToRemove:n})}const sFt={borderRadius:{...B1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:B1,borderTopRightRadius:B1,borderBottomLeftRadius:B1,borderBottomRightRadius:B1,boxShadow:rFt},_xe=["TopLeft","TopRight","BottomLeft","BottomRight"],oFt=_xe.length,aee=t=>typeof t=="string"?parseFloat(t):t,lee=t=>typeof t=="number"||wn.test(t);function aFt(t,e,n,r,i,s){i?(t.opacity=yi(0,n.opacity!==void 0?n.opacity:1,lFt(r)),t.opacityExit=yi(e.opacity!==void 0?e.opacity:1,0,cFt(r))):s&&(t.opacity=yi(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<oFt;o++){const a=`border${_xe[o]}Radius`;let l=cee(e,a),c=cee(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||lee(l)===lee(c)?(t[a]=Math.max(yi(aee(l),aee(c),r),0),(qu.test(c)||qu.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=yi(e.rotate||0,n.rotate||0,r))}function cee(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const lFt=Cxe(0,.5,rxe),cFt=Cxe(.5,.95,Js);function Cxe(t,e,n){return r=>r<t?0:r>e?1:n(CS(t,e,r))}function uee(t,e){t.min=e.min,t.max=e.max}function Il(t,e){uee(t.x,e.x),uee(t.y,e.y)}function dee(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function fee(t,e,n,r,i){return t-=e,t=wk(t,1/n,r),i!==void 0&&(t=wk(t,1/i,r)),t}function uFt(t,e=0,n=1,r=.5,i,s=t,o=t){if(qu.test(e)&&(e=parseFloat(e),e=yi(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=yi(s.min,s.max,r);t===s&&(a-=e),t.min=fee(t.min,e,n,a,i),t.max=fee(t.max,e,n,a,i)}function hee(t,e,[n,r,i],s,o){uFt(t,e[n],e[r],e[i],e.scale,s,o)}const dFt=["x","scaleX","originX"],fFt=["y","scaleY","originY"];function pee(t,e,n,r){hee(t.x,e,dFt,n?n.x:void 0,r?r.x:void 0),hee(t.y,e,fFt,n?n.y:void 0,r?r.y:void 0)}function mee(t){return t.translate===0&&t.scale===1}function Txe(t){return mee(t.x)&&mee(t.y)}function gee(t,e){return t.min===e.min&&t.max===e.max}function hFt(t,e){return gee(t.x,e.x)&&gee(t.y,e.y)}function vee(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Exe(t,e){return vee(t.x,e.x)&&vee(t.y,e.y)}function yee(t){return hl(t.x)/hl(t.y)}function xee(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class pFt{constructor(){this.members=[]}add(e){MP(this.members,e),e.scheduleRender()}remove(e){if(AP(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function mFt(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:h,skewY:p}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),h&&(r+=`skewX(${h}deg) `),p&&(r+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const gFt=(t,e)=>t.depth-e.depth;class vFt{constructor(){this.children=[],this.isDirty=!1}add(e){MP(this.children,e),this.isDirty=!0}remove(e){AP(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gFt),this.isDirty=!1,this.children.forEach(e)}}function yFt(t,e){const n=wh.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ff(r),t(s-e))};return Lr.read(r,!0),()=>ff(r)}function xFt(t){return t instanceof SVGElement&&t.tagName!=="svg"}function bFt(t,e,n){const r=ko(t)?t:TS(t);return r.start(b7("",r,e,n)),r.animation}const em={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},eb=typeof window<"u"&&window.MotionDebug!==void 0,wL=["","X","Y","Z"],wFt={visibility:"hidden"},bee=1e3;let SFt=0;function SL(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Mxe(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return!1;const{visualElement:e}=t.options;return e?dxe(e)?!0:t.parent&&!t.parent.hasCheckedOptimisedAppear?Mxe(t.parent):!1:!1}function Axe({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=SFt++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,eb&&(em.totalNodes=em.resolvedTargetDeltas=em.recalculatedProjection=0),this.nodes.forEach(TFt),this.nodes.forEach(IFt),this.nodes.forEach(RFt),this.nodes.forEach(EFt),eb&&window.MotionDebug.record(em)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new vFt)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new w7),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=xFt(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=yFt(f,250),bM.hasAnimatedSinceResize&&(bM.hasAnimatedSinceResize=!1,this.nodes.forEach(See))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||LFt,{onLayoutAnimationStart:g,onLayoutAnimationComplete:m}=u.getProps(),y=!this.targetLayout||!Exe(this.targetLayout,p)||h,x=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const S={...d7(v,"layout"),onPlay:g,onComplete:m};(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||See(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ff(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PFt),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.HandoffCancelAllAnimations&&Mxe(this)&&window.HandoffCancelAllAnimations(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(wee);return}this.isUpdating||this.nodes.forEach(AFt),this.isUpdating=!1,this.nodes.forEach(kFt),this.nodes.forEach(_Ft),this.nodes.forEach(CFt),this.clearAllSnapshots();const a=wh.now();Ys.delta=Bh(0,1e3/60,a-Ys.timestamp),Ys.timestamp=a,Ys.isProcessing=!0,dL.update.process(Ys),dL.preRender.process(Ys),dL.render.process(Ys),Ys.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,QW.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(MFt),this.sharedNodes.forEach(NFt)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Lr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Lr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=zi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Txe(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Qp(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),OFt(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return zi();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(FFt))){const{scroll:u}=this.root;u&&(_v(l.x,u.offset.x),_v(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=zi();if(Il(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Il(l,o),_v(l.x,d.offset.x),_v(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=zi();Il(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Cv(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Qp(u.latestValues)&&Cv(l,u.latestValues)}return Qp(this.latestValues)&&Cv(l,this.latestValues),l}removeTransform(o){const a=zi();Il(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Qp(c.latestValues))continue;v5(c.latestValues)&&c.updateSnapshot();const u=zi(),d=c.measurePageBox();Il(u,d),pee(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Qp(this.latestValues)&&pee(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ys.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Ys.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zi(),this.relativeTargetOrigin=zi(),Ob(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),Il(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=zi(),this.targetWithTransforms=zi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),U4t(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Il(this.target,this.layout.layoutBox),xxe(this.target,this.targetDelta)):Il(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zi(),this.relativeTargetOrigin=zi(),Ob(this.relativeTargetOrigin,this.target,h.target),Il(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}eb&&em.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||v5(this.parent.latestValues)||yxe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ys.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Il(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;Y4t(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=zi());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(dee(this.prevProjectionDelta.x,this.projectionDelta.x),dee(this.prevProjectionDelta.y,this.projectionDelta.y)),Lb(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!xee(this.projectionDelta.x,this.prevProjectionDelta.x)||!xee(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),eb&&em.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Sv(),this.projectionDelta=Sv(),this.projectionDeltaWithTransform=Sv()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Sv();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=zi(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,v=h!==p,g=this.getStack(),m=!g||g.members.length<=1,y=!!(v&&!m&&this.options.crossfade===!0&&!this.path.some(DFt));this.animationProgress=0;let x;this.mixTargetDelta=S=>{const _=S/1e3;_ee(d.x,o.x,_),_ee(d.y,o.y,_),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ob(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$Ft(this.relativeTarget,this.relativeTargetOrigin,f,_),x&&hFt(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=zi()),Il(x,this.relativeTarget)),v&&(this.animationValues=u,aFt(u,c,this.latestValues,_,y,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ff(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Lr.update(()=>{bM.hasAnimatedSinceResize=!0,this.currentAnimation=bFt(0,bee,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bee),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&kxe(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||zi();const d=hl(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=hl(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Il(a,l),Cv(a,u),Lb(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new pFt),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&SL("z",o,c,this.animationValues);for(let u=0;u<wL.length;u++)SL(`rotate${wL[u]}`,o,c,this.animationValues),SL(`skew${wL[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return wFt;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=yM(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=yM(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Qp(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=mFt(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:h,y:p}=this.projectionDelta;c.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in gk){if(f[v]===void 0)continue;const{correct:g,applyTo:m}=gk[v],y=c.transform==="none"?f[v]:g(f[v],d);if(m){const x=m.length;for(let S=0;S<x;S++)c[m[S]]=y}else c[v]=y}return this.options.layoutId&&(c.pointerEvents=d===this?yM(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(wee),this.root.sharedNodes.clear()}}}function _Ft(t){t.updateLayout()}function CFt(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Rl(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=hl(f);f.min=r[d].min,f.max=f.min+h}):kxe(s,n.layoutBox,r)&&Rl(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=hl(r[d]);f.max=f.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+h)});const a=Sv();Lb(a,r,n.layoutBox);const l=Sv();o?Lb(l,t.applyTransform(i,!0),n.measuredBox):Lb(l,r,n.layoutBox);const c=!Txe(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const p=zi();Ob(p,n.layoutBox,f.layoutBox);const v=zi();Ob(v,r,h.layoutBox),Exe(p,v)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function TFt(t){eb&&em.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function EFt(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function MFt(t){t.clearSnapshot()}function wee(t){t.clearMeasurements()}function AFt(t){t.isLayoutDirty=!1}function kFt(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function See(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function IFt(t){t.resolveTargetDelta()}function RFt(t){t.calcProjection()}function PFt(t){t.resetSkewAndRotation()}function NFt(t){t.removeLeadSnapshot()}function _ee(t,e,n){t.translate=yi(e.translate,0,n),t.scale=yi(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Cee(t,e,n,r){t.min=yi(e.min,n.min,r),t.max=yi(e.max,n.max,r)}function $Ft(t,e,n,r){Cee(t.x,e.x,n.x,r),Cee(t.y,e.y,n.y,r)}function DFt(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const LFt={duration:.45,ease:[.4,0,.1,1]},Tee=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Eee=Tee("applewebkit/")&&!Tee("chrome/")?Math.round:Js;function Mee(t){t.min=Eee(t.min),t.max=Eee(t.max)}function OFt(t){Mee(t.x),Mee(t.y)}function kxe(t,e,n){return t==="position"||t==="preserve-aspect"&&!B4t(yee(e),yee(n),.2)}function FFt(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const BFt=Axe({attachResizeListener:(t,e)=>jd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_L={current:void 0},Ixe=Axe({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_L.current){const t=new BFt({});t.mount(window),t.setOptions({layoutScroll:!0}),_L.current=t}return _L.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),UFt={pan:{Feature:tFt},drag:{Feature:eFt,ProjectionNode:Ixe,MeasureLayout:Sxe}},x5={current:null},Rxe={current:!1};function zFt(){if(Rxe.current=!0,!!JW)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>x5.current=t.matches;t.addListener(e),e()}else x5.current=!1}function VFt(t,e,n){for(const r in e){const i=e[r],s=n[r];if(ko(i))t.addValue(r,i);else if(ko(s))t.addValue(r,TS(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,TS(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Aee=new WeakMap,WFt=[...Fye,wo,Uh],GFt=t=>WFt.find(Oye(t)),kee=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],HFt=t7.length;class jFt{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.applyWillChange=!1,this.resolveKeyframes=(f,h,p,v)=>new this.KeyframeResolver(f,h,p,v,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=f7,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.isRenderScheduled=!1,this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.isRenderScheduled=!1,this.scheduleRender=()=>{this.isRenderScheduled||(this.isRenderScheduled=!0,Lr.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=EP(n),this.isVariantNode=dye(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const h=d[f];l[f]!==void 0&&ko(h)&&h.set(l[f],!1)}}mount(e){this.current=e,Aee.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Rxe.current||zFt(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:x5.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Aee.delete(this.current),this.projection&&this.projection.unmount(),ff(this.notifyUpdate),ff(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){const r=up.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Lr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ny){const n=Ny[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):zi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<kee.length;r++){const i=kee[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=VFt(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<HFt;r++){const i=t7[r],s=this.props[i];(wS(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=TS(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Dye(i)||$ye(i))?i=parseFloat(i):!GFt(i)&&Uh.test(n)&&(i=jye(e,n)),this.setBaseTarget(e,ko(i)?i.get():i)),ko(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=u7(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ko(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new w7),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Pxe extends jFt{constructor(){super(...arguments),this.KeyframeResolver=Xye}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function XFt(t){return window.getComputedStyle(t)}class qFt extends Pxe{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=wye}readValueFromInstance(e,n){if(up.has(n)){const r=p7(n);return r&&r.default||0}else{const r=XFt(e),i=(gye(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return bxe(e,n)}build(e,n,r){s7(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return c7(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ko(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class YFt extends Pxe{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=zi}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(up.has(n)){const r=p7(n);return r&&r.default||0}return n=Sye.has(n)?n:TP(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Cye(e,n,r)}build(e,n,r){a7(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){_ye(e,n,r,i)}mount(e){this.isSVGTag=l7(e.tagName),super.mount(e)}}const KFt=(t,e)=>n7(t)?new YFt(e):new qFt(e,{allowProjection:t!==R.Fragment}),ZFt={layout:{ProjectionNode:Ixe,MeasureLayout:Sxe}},JFt={...R4t,...zLt,...UFt,...ZFt},Iee=qDt((t,e)=>ALt(t,e,JFt,KFt)),Uf=LB({palette:{primary:{main:"#42a5f5"},secondary:{main:"#03dac6"},success:{main:"#4caf50"},error:{main:"#f44336"},background:{default:"#d7ccc8"},text:{primary:"#000000",secondary:"#ffffff"}},typography:{h4:{fontWeight:600}}}),Ree=[{id:1,name:"Apple",category:"Fruits"},{id:2,name:"Orange",category:"Fruits"},{id:3,name:"Banana",category:"Fruits"},{id:4,name:"Grape",category:"Fruits"},{id:5,name:"Dog",category:"Animals"},{id:6,name:"Cat",category:"Animals"},{id:7,name:"Bird",category:"Animals"},{id:8,name:"Fish",category:"Animals"},{id:9,name:"Red",category:"Colors"},{id:10,name:"Blue",category:"Colors"},{id:11,name:"Green",category:"Colors"},{id:12,name:"Yellow",category:"Colors"},{id:13,name:"Car",category:"Modes of Transport"},{id:14,name:"Bike",category:"Modes of Transport"},{id:15,name:"Bus",category:"Modes of Transport"},{id:16,name:"Train",category:"Modes of Transport"}],Pee=[{id:1,name:"Gryffindor",category:"Hogwarts Houses"},{id:2,name:"Hufflepuff",category:"Hogwarts Houses"},{id:3,name:"Ravenclaw",category:"Hogwarts Houses"},{id:4,name:"Slytherin",category:"Hogwarts Houses"},{id:5,name:"Harry Potter",category:"Main Characters"},{id:6,name:"Hermione Granger",category:"Main Characters"},{id:7,name:"Ron Weasley",category:"Main Characters"},{id:8,name:"Albus Dumbledore",category:"Main Characters"},{id:9,name:"Expelliarmus",category:"Spells"},{id:10,name:"Wingardium Leviosa",category:"Spells"},{id:11,name:"Expecto Patronum",category:"Spells"},{id:12,name:"Lumos",category:"Spells"},{id:13,name:"Hippogriff",category:"Magical Creatures"},{id:14,name:"Thestral",category:"Magical Creatures"},{id:15,name:"Basilisk",category:"Magical Creatures"},{id:16,name:"House-elf",category:"Magical Creatures"}],Nee=[{id:1,name:"Iron Man",category:"Avengers"},{id:2,name:"Captain America",category:"Avengers"},{id:3,name:"Thor",category:"Avengers"},{id:4,name:"Black Widow",category:"Avengers"},{id:5,name:"Star-Lord",category:"Guardians of the Galaxy"},{id:6,name:"Gamora",category:"Guardians of the Galaxy"},{id:7,name:"Drax",category:"Guardians of the Galaxy"},{id:8,name:"Rocket Raccoon",category:"Guardians of the Galaxy"},{id:9,name:"Thanos",category:"Villains"},{id:10,name:"Loki",category:"Villains"},{id:11,name:"Ultron",category:"Villains"},{id:12,name:"Hela",category:"Villains"},{id:13,name:"Mjolnir",category:"Weapons and Artifacts"},{id:14,name:"Infinity Gauntlet",category:"Weapons and Artifacts"},{id:15,name:"Tesseract",category:"Weapons and Artifacts"},{id:16,name:"Arc Reactor",category:"Weapons and Artifacts"}],$ee=RB(Hh)(({theme:t})=>({padding:t.spacing(4),textAlign:"center",color:t.palette.text.primary,cursor:"pointer","&:hover":{backgroundColor:t.palette.grey[300]}})),QFt={initial:{x:0},animate:{x:[0,-10,10,-10,10,0]},transition:{duration:.4}},e5t={initial:{scale:1},animate:{scale:1.05},transition:{duration:.2}},CL=t=>t.sort(()=>Math.random()-.5),t5t=t=>t.reduce((n,r)=>(n[r.category]||(n[r.category]=[]),n[r.category].push(r),n),{});function n5t(){const[t,e]=R.useState([]),[n,r]=R.useState(null),[i,s]=R.useState([]),[o,a]=R.useState([]),[l,c]=R.useState(!1),[u,d]=R.useState(!1),[f,h]=R.useState("version1"),[p,v]=R.useState(window.innerWidth>1e3);R.useEffect(()=>{g(f)},[f]),R.useEffect(()=>{const A=()=>{v(window.innerWidth>1e3)};return window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)}},[]);const g=A=>{e([]),r(null),a([]),d(!1),s(CL(A==="version1"?[...Ree]:A==="version2"?[...Pee]:[...Nee]))},m=A=>{t.includes(A)?e(M=>M.filter(E=>E!==A)):t.length<4&&!t.includes(A)&&!o.some(M=>M.category===A.category)&&e(M=>[...M,A]),r(null)},y=()=>{g(f)},x=()=>{if(t.length===4){const A=t.map(E=>E.category),M=A.every(E=>E===A[0]);if(M){const E=i.filter(P=>!t.includes(P));a(P=>[...P,{category:A[0],items:t}]),s(E),e([]),E.length===0&&c(!0)}r(M?"success":"error")}},S=()=>{d(A=>!A)},_=()=>{c(!1)},T=t5t(f==="version1"?Ree:f==="version2"?Pee:Nee);return L.jsxs(FTe,{theme:Uf,children:[L.jsx(_Ie,{}),p?L.jsxs(KB,{children:[L.jsx(un,{variant:"h3",gutterBottom:!0,sx:{textAlign:"center"},children:"Connections"}),L.jsxs(un,{variant:"h4",gutterBottom:!0,sx:{textAlign:"left",color:"white",fontWeight:"normal"},children:["This is an implementation of ",L.jsx(Xc,{href:"https://en.wikipedia.org/wiki/The_New_York_Times_Connections",target:"_blank",underline:"hover",children:"The New York Times Connections"}),"."]}),L.jsx(un,{variant:"h5",gutterBottom:!0,sx:{textAlign:"left",maxWidth:"555px"},children:'In Connections, the goal is to divide a grid of sixteen words into four groups of four such that the words in each group belong to a specific category (e.g., "dog", "cat", "fish", and "parrot" for the category "Household Pets").'}),L.jsxs(Gn,{display:"flex",justifyContent:"center",marginBottom:2,children:[L.jsx(Is,{variant:f==="version1"?"contained":"outlined",color:"primary",onClick:()=>h("version1"),style:{marginRight:"10px"},children:"Version 1"}),L.jsx(Is,{variant:f==="version2"?"contained":"outlined",color:"secondary",onClick:()=>h("version2"),style:{marginRight:"10px"},children:"Version 2"}),L.jsx(Is,{variant:f==="version3"?"contained":"outlined",color:"primary",onClick:()=>h("version3"),children:"Version 3"})]}),L.jsxs(i$,{container:!0,spacing:2,children:[o.map((A,M)=>L.jsx(i$,{item:!0,xs:12,children:L.jsx(Iee.div,{layout:!0,children:L.jsxs($ee,{style:{backgroundColor:Uf.palette.success.main,padding:Uf.spacing(4)},children:[L.jsx(un,{variant:"h6",component:"div",style:{fontWeight:"bold"},children:A.category}),L.jsx(un,{variant:"body1",children:A.items.map(E=>E.name).join(", ")})]})})},`correct-${M}`)),i.map(A=>L.jsx(i$,{item:!0,xs:3,children:L.jsx(Iee.div,{layout:!0,initial:"initial",animate:t.includes(A)?"animate":"initial",variants:e5t,...n==="error"&&t.includes(A)?QFt:{},children:L.jsx($ee,{onClick:()=>m(A),style:{backgroundColor:o.some(M=>M.items.includes(A))?Uf.palette.success.main:t.includes(A)?n==="success"?Uf.palette.success.main:n==="error"?Uf.palette.error.main:Uf.palette.primary.light:Uf.palette.background.default,cursor:o.some(M=>M.items.includes(A))?"default":"pointer"},children:A.name})})},A.id))]}),L.jsxs(Gn,{display:"flex",justifyContent:"center",marginTop:2,children:[L.jsx(Is,{variant:"contained",color:"primary",onClick:x,style:{marginRight:"10px"},disabled:t.length!==4,children:"Check"}),L.jsx(Is,{variant:"contained",color:"secondary",onClick:y,style:{marginRight:"10px"},children:"Reset"}),L.jsx(Is,{variant:"contained",color:"secondary",onClick:S,children:u?"Hide Solutions":"Reveal Solutions"})]}),u&&L.jsxs(Gn,{marginTop:4,children:[L.jsx(un,{variant:"h6",gutterBottom:!0,children:"Solutions:"}),Object.keys(T).map((A,M)=>L.jsxs(Gn,{marginBottom:2,children:[L.jsx(un,{variant:"h6",children:A}),L.jsx(un,{variant:"body1",children:T[A].map(E=>E.name).join(", ")})]},`solution-${M}`))]})]}):L.jsx(Gn,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:L.jsx(un,{variant:"h4",color:"error",children:"Please maximize your screen to view the content."})}),L.jsxs(UIe,{open:l,onClose:_,children:[L.jsx(oRe,{children:"Congratulations!"}),L.jsx(tRe,{children:L.jsx(un,{variant:"h6",children:"You have successfully completed all categories!"})}),L.jsx(jIe,{children:L.jsx(Is,{onClick:_,color:"primary",autoFocus:!0,children:"OK"})})]})]})}function r5t(){return L.jsxs(L.Fragment,{children:[L.jsx(fNe,{}),L.jsx(KB,{maxWidth:!1,disableGutters:!0,sx:{p:2,bgcolor:"black",color:"white"},children:L.jsxs(wSe,{children:[L.jsx(vo,{path:"/",element:L.jsx(l$,{})}),L.jsx(vo,{path:"/home",element:L.jsx(l$,{})}),L.jsx(vo,{path:"/projects",element:L.jsx(pNe,{})}),L.jsx(vo,{path:"/jupyter-notebooks",element:L.jsx(s$t,{})}),L.jsx(vo,{path:"/projects/ratings",element:L.jsx(uJe,{})}),L.jsx(vo,{path:"/projects/lorenz",element:L.jsx(Tlt,{})}),L.jsx(vo,{path:"/projects/astar",element:L.jsx(Alt,{})}),L.jsx(vo,{path:"/projects/chaos",element:L.jsx(Rlt,{})}),L.jsx(vo,{path:"/projects/spiral",element:L.jsx($lt,{})}),L.jsx(vo,{path:"/projects/mnist",element:L.jsx(r$t,{})}),L.jsx(vo,{path:"/projects/breakout",element:L.jsx(o$t,{})}),L.jsx(vo,{path:"/projects/congress",element:L.jsx(y$t,{})}),L.jsx(vo,{path:"/projects/college-demographics",element:L.jsx(kDt,{})}),L.jsx(vo,{path:"/projects/connections",element:L.jsx(n5t,{})}),L.jsx(vo,{path:"*",element:L.jsx(l$,{})})]})})]})}TL.createRoot(document.getElementById("root")).render(L.jsx($c.StrictMode,{children:L.jsx(ASe,{children:L.jsx(r5t,{})})}));
