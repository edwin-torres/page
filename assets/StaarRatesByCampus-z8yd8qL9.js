import{s as D,_ as b,a as P,r as c,h as _,i as z,j as i,l as $,m as E,p as F,P as O,B as M,T as x,F as w,I as W,S as N,M as T,q as V,t as R,v as U,c as G}from"./index-_Fk8in2f.js";import{e as k,S as y}from"./tiaData-bhnswqLc.js";const H=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],Y=e=>{const{absolute:t,children:o,classes:d,flexItem:f,light:n,orientation:u,textAlign:s,variant:m}=e;return E({root:["root",t&&"absolute",m,n&&"light",u==="vertical"&&"vertical",f&&"flexItem",o&&"withChildren",o&&u==="vertical"&&"withChildrenVertical",s==="right"&&u!=="vertical"&&"textAlignRight",s==="left"&&u!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",u==="vertical"&&"wrapperVertical"]},F,d)},X=D("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.absolute&&t.absolute,t[o.variant],o.light&&t.light,o.orientation==="vertical"&&t.vertical,o.flexItem&&t.flexItem,o.children&&t.withChildren,o.children&&o.orientation==="vertical"&&t.withChildrenVertical,o.textAlign==="right"&&o.orientation!=="vertical"&&t.textAlignRight,o.textAlign==="left"&&o.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>b({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:P(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:e})=>b({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:e,ownerState:t})=>b({},t.children&&t.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`}}),({theme:e,ownerState:t})=>b({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`}}),({ownerState:e})=>b({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),q=D("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.wrapper,o.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>b({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),L=c.forwardRef(function(t,o){const d=_({props:t,name:"MuiDivider"}),{absolute:f=!1,children:n,className:u,component:s=n?"div":"hr",flexItem:m=!1,light:S=!1,orientation:p="horizontal",role:g=s!=="hr"?"separator":void 0,textAlign:h="center",variant:j="fullWidth"}=d,I=z(d,H),v=b({},d,{absolute:f,component:s,flexItem:m,light:S,orientation:p,role:g,textAlign:h,variant:j}),A=Y(v);return i.jsx(X,b({as:s,className:$(A.root,u),role:g,ref:o,ownerState:v},I,{children:n?i.jsx(q,{className:A.wrapper,ownerState:v,children:n}):null}))});L.muiSkipListHighlight=!0;const K=L,l={bg:"#f4f6f8",paper:"#ffffff",primary:"#1b5e20",bars:"#59A14F",text:"#000000ff",tabUnselected:"#000000ff"},J=e=>e==null?"":String(e).replace(/^'+/,""),B=e=>e==null||Number.isNaN(e)?"—":`${(e*100).toFixed(1)}%`;function ee({subject:e="algebra"}){const[t,o]=c.useState(2024),[d,f]=c.useState("All Students"),[n,u]=c.useState("Approaches"),s=e==="english"?"English I":"Algebra I",m=17,S=17,p=c.useMemo(()=>{const r=new Set((k||[]).filter(a=>String(a.subject)===String(s)).map(a=>a.year));return Array.from(r).sort((a,C)=>a-C)},[s]),g=c.useMemo(()=>{const r=new Set((k||[]).filter(a=>String(a.subject)===String(s)&&Number(a.year)===Number(t)).map(a=>a.subgroup));return Array.from(r).sort((a,C)=>a.localeCompare(C))},[s,t]);c.useEffect(()=>{!p.includes(t)&&p.length>0&&o(p[p.length-1])},[p]),c.useEffect(()=>{g.includes(d)||f(g.includes("All Students")?"All Students":g[0]||"All Students")},[g]);const h=c.useMemo(()=>(k||[]).filter(r=>String(r.subject)===String(s)&&Number(r.year)===Number(t)&&String(r.subgroup)===String(d)).map(r=>({...r,CAMPUS_ID:J(r.CAMPUS_ID)})),[s,t,d]),j=c.useMemo(()=>{const r=h.filter(a=>a.level===n&&a.rate!=null);return r.sort((a,C)=>String(a.CAMPUS).localeCompare(String(C.CAMPUS))),r.map(a=>({campus:a.CAMPUS,rate:a.rate}))},[h,n]),I=c.useMemo(()=>new Set(h.map(a=>a.CAMPUS)).size,[h]),v=c.useMemo(()=>h.filter(r=>r.level===n&&r.rate==null).length,[h,n]),A={mb:0,"& .MuiToggleButton-root":{textTransform:"none",fontWeight:600,fontSize:"1rem",color:l.tabUnselected,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:2,px:3,minHeight:40,border:"none",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(0,0,0,0.1)",color:l.primary}},"& .MuiToggleButton-root.Mui-selected":{color:"#ffffff",backgroundColor:l.primary,boxShadow:"0 4px 12px rgba(27, 94, 32, 0.3)","&:hover":{backgroundColor:l.primary}}};return i.jsx(O,{elevation:0,sx:{p:{xs:2,md:3},borderRadius:3,border:"1px solid",borderColor:"divider",backgroundColor:l.paper},children:i.jsxs(y,{spacing:2,children:[i.jsxs(M,{children:[i.jsx(x,{variant:"h6",sx:{fontWeight:800,color:l.text},children:"STAAR Rates by Campus"}),i.jsxs(x,{variant:"body2",sx:{color:l.tabUnselected},children:[s," • Filter by year and subgroup, then choose Approaches/Meets/Masters to compare campuses."]})]}),i.jsx(K,{}),i.jsxs(y,{direction:{xs:"column",md:"row"},spacing:2,alignItems:{xs:"stretch",md:"center"},justifyContent:"space-between",children:[i.jsxs(y,{direction:{xs:"column",sm:"row"},spacing:2,flexWrap:"wrap",children:[i.jsxs(w,{size:"small",sx:{minWidth:160},children:[i.jsx(W,{children:"Year"}),i.jsx(N,{value:t,label:"Year",onChange:r=>o(r.target.value),children:p.map(r=>i.jsx(T,{value:r,children:r},r))})]}),i.jsxs(w,{size:"small",sx:{minWidth:260},children:[i.jsx(W,{children:"Subgroup"}),i.jsx(N,{value:d,label:"Subgroup",onChange:r=>f(r.target.value),children:g.map(r=>i.jsx(T,{value:r,children:r},r))})]}),i.jsxs(V,{size:"small",exclusive:!0,value:n,onChange:(r,a)=>a&&u(a),sx:A,children:[i.jsx(R,{value:"Approaches",children:"Approaches"}),i.jsx(R,{value:"Meets",children:"Meets"}),i.jsx(R,{value:"Masters",children:"Masters"})]})]}),i.jsxs(y,{direction:"row",spacing:1,alignItems:"center",children:[i.jsx(U,{size:"small",label:`${I} campuses`,variant:"outlined",sx:{color:l.text,borderColor:"rgba(0,0,0,0.15)"}}),i.jsx(U,{size:"small",label:`${v} missing`,variant:"outlined",sx:{color:l.text,borderColor:"rgba(0,0,0,0.15)"}})]})]}),i.jsx(M,{sx:{height:{xs:420,md:520}},children:j.length===0?i.jsx(M,{sx:{height:"100%",display:"grid",placeItems:"center",borderRadius:2,border:"1px dashed",borderColor:"divider",backgroundColor:l.bg},children:i.jsx(x,{variant:"body2",sx:{color:l.tabUnselected},children:"No chartable values for this selection (all missing/suppressed)."})}):i.jsx(G,{data:j,keys:["rate"],indexBy:"campus",margin:{top:30,right:20,bottom:120,left:75},padding:.25,valueScale:{type:"linear",min:0,max:1},indexScale:{type:"band",round:!0},colors:()=>l.bars,enableLabel:!0,label:r=>B(r.value),labelSkipWidth:12,labelSkipHeight:12,labelTextColor:"#080000ff",labelPosition:"end",labelOffset:-5,borderWidth:1,borderColor:{from:"color",modifiers:[["darker",.6]]},axisLeft:{tickValues:6,legend:"Rate",legendPosition:"middle",legendOffset:-60,format:r=>`${Math.round(r*100)}%`},axisBottom:{tickRotation:0,legend:"Campus",legendPosition:"middle",legendOffset:55},tooltip:({indexValue:r,value:a})=>i.jsxs(M,{sx:{p:1,bgcolor:l.paper,border:"1px solid",borderColor:"divider",borderRadius:2},children:[i.jsx(x,{variant:"subtitle2",sx:{fontWeight:800,color:l.text},children:r}),i.jsxs(x,{variant:"body2",sx:{color:l.tabUnselected},children:[s," • ",d," • ",n,":"," ",i.jsx("b",{style:{color:l.primary},children:B(a)})]})]}),theme:{axis:{ticks:{text:{fill:l.tabUnselected,fontSize:m}},legend:{text:{fill:l.tabUnselected,fontSize:S}}},labels:{text:{fill:"#000000ff",fontSize:18,fontWeight:300}},tooltip:{container:{background:"transparent"}},grid:{line:{stroke:"rgba(0,0,0,0.08)"}}}})}),i.jsx(x,{variant:"caption",sx:{color:l.tabUnselected},children:"Note: “missing” usually means suppressed or unavailable subgroup counts (null rate)."})]})})}export{ee as default};
